(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/8/o":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){return document.createElement("canvas")};function i(t,e,n){return void 0===n&&(n=r()),n.width=t.width*e,n.height=t.height*e,n.getContext("2d").drawImage(t,0,0,n.width,n.height),n}e.resize=i,e.resizeMaxTo=function(t,e,n){return void 0===n&&(n=r()),i(t,e/Math.max(t.width,t.height),n)},e.resizeMinTo=function(t,e,n){return void 0===n&&(n=r()),i(t,e/Math.min(t.width,t.height),n)},e.cropTo=function(t,e,n,i){void 0===n&&(n=!1),void 0===i&&(i=r());var s=t.width,o=t.height;t instanceof HTMLVideoElement&&(s=t.videoWidth,o=t.videoHeight);var a=e/Math.min(s,o),l=Math.ceil(s*a),u=Math.ceil(o*a),c=l-e,h=u-e;i.width=i.height=e;var d=i.getContext("2d");return d.drawImage(t,-1*~~(c/2),-1*~~(h/2),l,u),n&&(d.scale(-1,1),d.drawImage(i,-1*e,0)),i}},0:function(t,e,n){t.exports=n("zUnb")},1:function(t,e){},2:function(t,e){},3:function(t,e){},4:function(t,e){},5:function(t,e){},"5RHE":function(t,e,n){var r,i;r=function(){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t){if("object"!==r(t.console)){t.console={};for(var e,n,i=t.console,s=function(){},o=["memory"],a="assert,clear,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profiles,profileEnd,show,table,time,timeEnd,timeline,timelineEnd,timeStamp,trace,warn".split(",");e=o.pop();)i[e]||(i[e]={});for(;n=a.pop();)i[n]||(i[n]=s)}var l,u,c,h,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";void 0===t.btoa&&(t.btoa=function(t){var e,n,r,i,s,o=0,a=0,l="",u=[];if(!t)return t;for(;e=(s=t.charCodeAt(o++)<<16|t.charCodeAt(o++)<<8|t.charCodeAt(o++))>>18&63,n=s>>12&63,r=s>>6&63,i=63&s,u[a++]=d.charAt(e)+d.charAt(n)+d.charAt(r)+d.charAt(i),o<t.length;);l=u.join("");var c=t.length%3;return(c?l.slice(0,c-3):l)+"===".slice(c||3)}),void 0===t.atob&&(t.atob=function(t){var e,n,r,i,s,o,a=0,l=0,u=[];if(!t)return t;for(t+="";e=(o=d.indexOf(t.charAt(a++))<<18|d.indexOf(t.charAt(a++))<<12|(i=d.indexOf(t.charAt(a++)))<<6|(s=d.indexOf(t.charAt(a++))))>>16&255,n=o>>8&255,r=255&o,u[l++]=64==i?String.fromCharCode(e):64==s?String.fromCharCode(e,n):String.fromCharCode(e,n,r),a<t.length;);return u.join("")}),Array.prototype.map||(Array.prototype.map=function(t){if(null==this||"function"!=typeof t)throw new TypeError;for(var e=Object(this),n=e.length>>>0,r=new Array(n),i=1<arguments.length?arguments[1]:void 0,s=0;s<n;s++)s in e&&(r[s]=t.call(i,e[s],s,e));return r}),Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),Array.prototype.forEach||(Array.prototype.forEach=function(t,e){if(null==this||"function"!=typeof t)throw new TypeError;for(var n=Object(this),r=n.length>>>0,i=0;i<r;i++)i in n&&t.call(e,n[i],i,n)}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(t){if(null==this)throw new TypeError('"this" is null or not defined');var e=Object(this),n=e.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var r=arguments[1],i=0;i<n;){var s=e[i];if(t.call(r,s,i,e))return s;i++}},configurable:!0,writable:!0}),Object.keys||(Object.keys=(l=Object.prototype.hasOwnProperty,u=!{toString:null}.propertyIsEnumerable("toString"),h=(c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"]).length,function(t){if("object"!==r(t)&&("function"!=typeof t||null===t))throw new TypeError;var e,n,i=[];for(e in t)l.call(t,e)&&i.push(e);if(u)for(n=0;n<h;n++)l.call(t,c[n])&&i.push(c[n]);return i})),"function"!=typeof Object.assign&&(Object.assign=function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");t=Object(t);for(var e=1;e<arguments.length;e++){var n=arguments[e];if(null!=n)for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),String.prototype.trimLeft||(String.prototype.trimLeft=function(){return this.replace(/^\s+/g,"")}),String.prototype.trimRight||(String.prototype.trimRight=function(){return this.replace(/\s+$/g,"")}),Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||"undefined"!=typeof global&&global||Function('return typeof this === "object" && this.content')()||Function("return this")());var s,o,a,l,u,c,h,d,p,f,A,m,g,y,w,b,v,x,_,C,S,E,B,k,N,I,F,T,R,O,D,L,M,U,P,z,Q,H,$,V,q,j,K,W,G,X,Y,J,Z,tt,et,nt,rt,it,st,ot,at,lt,ut,ct,ht,dt=function(s){function o(t){if("object"!==r(t))throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,n,r){if(r=r||!1,"string"!=typeof t||"function"!=typeof n||"boolean"!=typeof r)throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var i=Math.random().toString(35);return e[t][i]=[n,!!r],i},this.unsubscribe=function(t){for(var n in e)if(e[n][t])return delete e[n][t],0===Object.keys(e[n]).length&&delete e[n],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var o in e[n]){var a=e[n][o];try{a[0].apply(t,r)}catch(n){s.console&&console.error("jsPDF PubSub Error",n.message,n)}a[1]&&i.push(o)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function a(t,e,n,i){var l={},u=[],c=1;"object"===r(t)&&(t=(l=t).orientation,e=l.unit||e,n=l.format||n,i=l.compress||l.compressPdf||i,u=l.filters||(!0===i?["FlateEncode"]:u),c="number"==typeof l.userUnit?Math.abs(l.userUnit):1),e=e||"mm",t=(""+(t||"P")).toLowerCase();var h=l.putOnlyUsedFonts||!0,d={},p={internal:{},__private__:{}};p.__private__.PubSub=o;var f="1.3",A=p.__private__.getPdfVersion=function(){return f},m=(p.__private__.setPdfVersion=function(t){f=t},{a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]}),g=(p.__private__.getPageFormats=function(){return m},p.__private__.getPageFormat=function(t){return m[t]});"string"==typeof n&&(n=g(n)),n=n||g("a4");var y,w=p.f2=p.__private__.f2=function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.f2");return t.toFixed(2)},b=p.__private__.f3=function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.f3");return t.toFixed(3)},v="00000000000000000000000000000000",x=p.__private__.getFileId=function(){return v},_=p.__private__.setFileId=function(t){return t=t||"12345678901234567890123456789012".split("").map((function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))})).join(""),v=t};p.setFileId=function(t){return _(t),this},p.getFileId=function(){return x()};var C=p.__private__.convertDateToPDFDate=function(t){var e=t.getTimezoneOffset(),n=e<0?"+":"-",r=Math.floor(Math.abs(e/60)),i=Math.abs(e%60),s=[n,L(r),"'",L(i),"'"].join("");return["D:",t.getFullYear(),L(t.getMonth()+1),L(t.getDate()),L(t.getHours()),L(t.getMinutes()),L(t.getSeconds()),s].join("")},S=p.__private__.convertPDFDateToDate=function(t){var e=parseInt(t.substr(2,4),10),n=parseInt(t.substr(6,2),10)-1,r=parseInt(t.substr(8,2),10),i=parseInt(t.substr(10,2),10),s=parseInt(t.substr(12,2),10),o=parseInt(t.substr(14,2),10);return parseInt(t.substr(16,2),10),parseInt(t.substr(20,2),10),new Date(e,n,r,i,s,o,0)},E=p.__private__.setCreationDate=function(t){var e;if(void 0===t&&(t=new Date),"object"===r(t)&&"[object Date]"===Object.prototype.toString.call(t))e=C(t);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|\-0[0-9]|\-1[0-1])\'(0[0-9]|[1-5][0-9])\'?$/.test(t))throw new Error("Invalid argument passed to jsPDF.setCreationDate");e=t}return y=e},B=p.__private__.getCreationDate=function(t){var e=y;return"jsDate"===t&&(e=S(y)),e};p.setCreationDate=function(t){return E(t),this},p.getCreationDate=function(t){return B(t)};var k,N,I,F,T,R,O,D,L=p.__private__.padd2=function(t){return("0"+parseInt(t)).slice(-2)},M=!1,U=[],P=[],z=0,Q=(p.__private__.setCustomOutputDestination=function(t){N=t},p.__private__.resetCustomOutputDestination=function(t){N=void 0},p.__private__.out=function(t){var e;return t="string"==typeof t?t:t.toString(),(e=void 0===N?M?U[k]:P:N).push(t),M||(z+=t.length+1),e}),H=p.__private__.write=function(t){return Q(1===arguments.length?t.toString():Array.prototype.join.call(arguments," "))},$=p.__private__.getArrayBuffer=function(t){for(var e=t.length,n=new ArrayBuffer(e),r=new Uint8Array(n);e--;)r[e]=t.charCodeAt(e);return n},V=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]],q=(p.__private__.getStandardFonts=function(t){return V},l.fontSize||16),j=(p.__private__.setFontSize=p.setFontSize=function(t){return q=t,this},p.__private__.getFontSize=p.getFontSize=function(){return q}),K=l.R2L||!1,W=(p.__private__.setR2L=p.setR2L=function(t){return K=t,this},p.__private__.getR2L=p.getR2L=function(t){return K},p.__private__.setZoomMode=function(t){if(/^\d*\.?\d*\%$/.test(t))I=t;else if(isNaN(t)){if(-1===[void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(t))throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+t+'" is not recognized.');I=t}else I=parseInt(t,10)}),G=(p.__private__.getZoomMode=function(){return I},p.__private__.setPageMode=function(t){if(-1==[void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(t))throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+t+'" is not recognized.');F=t}),X=(p.__private__.getPageMode=function(){return F},p.__private__.setLayoutMode=function(t){if(-1==[void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(t))throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+t+'" is not recognized.');T=t}),Y=(p.__private__.getLayoutMode=function(){return T},p.__private__.setDisplayMode=p.setDisplayMode=function(t,e,n){return W(t),X(e),G(n),this},{title:"",subject:"",author:"",keywords:"",creator:""}),J=(p.__private__.getDocumentProperty=function(t){if(-1===Object.keys(Y).indexOf(t))throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Y[t]},p.__private__.getDocumentProperties=function(t){return Y},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(t){for(var e in Y)Y.hasOwnProperty(e)&&t[e]&&(Y[e]=t[e]);return this},p.__private__.setDocumentProperty=function(t,e){if(-1===Object.keys(Y).indexOf(t))throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Y[t]=e},0),Z=[],tt={},et={},nt=0,rt=[],it=[],st=new o(p),ot=l.hotfixes||[],at=p.__private__.newObject=function(){var t=lt();return ut(t,!0),t},lt=p.__private__.newObjectDeferred=function(){return Z[++J]=function(){return z},J},ut=function(t,e){return e="boolean"==typeof e&&e,Z[t]=z,e&&Q(t+" 0 obj"),t},ct=p.__private__.newAdditionalObject=function(){var t={objId:lt(),content:""};return it.push(t),t},ht=lt(),dt=lt(),pt=p.__private__.decodeColorString=function(t){var e=t.split(" ");if(2===e.length&&("g"===e[1]||"G"===e[1])){var n=parseFloat(e[0]);e=[n,n,n,"r"]}for(var r="#",i=0;i<3;i++)r+=("0"+Math.floor(255*parseFloat(e[i])).toString(16)).slice(-2);return r},ft=p.__private__.encodeColorString=function(t){var e;"string"==typeof t&&(t={ch1:t});var n=t.ch1,i=t.ch2,s=t.ch3,o=t.ch4,a="draw"===t.pdfColorType?["G","RG","K"]:["g","rg","k"];if("string"==typeof n&&"#"!==n.charAt(0)){var l=new RGBColor(n);if(l.ok)n=l.toHex();else if(!/^\d*\.?\d*$/.test(n))throw new Error('Invalid color "'+n+'" passed to jsPDF.encodeColorString.')}if("string"==typeof n&&/^#[0-9A-Fa-f]{3}$/.test(n)&&(n="#"+n[1]+n[1]+n[2]+n[2]+n[3]+n[3]),"string"==typeof n&&/^#[0-9A-Fa-f]{6}$/.test(n)){var u=parseInt(n.substr(1),16);n=u>>16&255,i=u>>8&255,s=255&u}if(void 0===i||void 0===o&&n===i&&i===s)if("string"==typeof n)e=n+" "+a[0];else switch(t.precision){case 2:e=w(n/255)+" "+a[0];break;case 3:default:e=b(n/255)+" "+a[0]}else if(void 0===o||"object"===r(o)){if(o&&!isNaN(o.a)&&0===o.a)return["1.000","1.000","1.000",a[1]].join(" ");if("string"==typeof n)e=[n,i,s,a[1]].join(" ");else switch(t.precision){case 2:e=[w(n/255),w(i/255),w(s/255),a[1]].join(" ");break;default:case 3:e=[b(n/255),b(i/255),b(s/255),a[1]].join(" ")}}else if("string"==typeof n)e=[n,i,s,o,a[2]].join(" ");else switch(t.precision){case 2:e=[w(n/255),w(i/255),w(s/255),w(o/255),a[2]].join(" ");break;case 3:default:e=[b(n/255),b(i/255),b(s/255),b(o/255),a[2]].join(" ")}return e},At=p.__private__.getFilters=function(){return u},mt=p.__private__.putStream=function(t){var e,n=(t=t||{}).data||"",r=t.filters||At(),i=t.alreadyAppliedFilters||[],s=t.addLength1||!1,o=n.length;!0===r&&(r=["FlateEncode"]);var l=t.additionalKeyValues||[],u=(e=void 0!==a.API.processDataByFilters?a.API.processDataByFilters(n,r):{data:n,reverseChain:[]}).reverseChain+(Array.isArray(i)?i.join(" "):i.toString());0!==e.data.length&&(l.push({key:"Length",value:e.data.length}),!0===s&&l.push({key:"Length1",value:o})),0!=u.length&&(u.split("/").length-1==1?l.push({key:"Filter",value:u}):l.push({key:"Filter",value:"["+u+"]"})),Q("<<");for(var c=0;c<l.length;c++)Q("/"+l[c].key+" "+l[c].value);Q(">>"),0!==e.data.length&&(Q("stream"),Q(e.data),Q("endstream"))},gt=p.__private__.putPage=function(t){var e=t.number,n=t.data,r=t.objId,i=t.contentsObjId;ut(r,!0),Q("<</Type /Page"),Q("/Parent "+t.rootDictionaryObjId+" 0 R"),Q("/Resources "+t.resourceDictionaryObjId+" 0 R"),Q("/MediaBox ["+parseFloat(w(t.mediaBox.bottomLeftX))+" "+parseFloat(w(t.mediaBox.bottomLeftY))+" "+w(t.mediaBox.topRightX)+" "+w(t.mediaBox.topRightY)+"]"),null!==t.cropBox&&Q("/CropBox ["+w(t.cropBox.bottomLeftX)+" "+w(t.cropBox.bottomLeftY)+" "+w(t.cropBox.topRightX)+" "+w(t.cropBox.topRightY)+"]"),null!==t.bleedBox&&Q("/BleedBox ["+w(t.bleedBox.bottomLeftX)+" "+w(t.bleedBox.bottomLeftY)+" "+w(t.bleedBox.topRightX)+" "+w(t.bleedBox.topRightY)+"]"),null!==t.trimBox&&Q("/TrimBox ["+w(t.trimBox.bottomLeftX)+" "+w(t.trimBox.bottomLeftY)+" "+w(t.trimBox.topRightX)+" "+w(t.trimBox.topRightY)+"]"),null!==t.artBox&&Q("/ArtBox ["+w(t.artBox.bottomLeftX)+" "+w(t.artBox.bottomLeftY)+" "+w(t.artBox.topRightX)+" "+w(t.artBox.topRightY)+"]"),"number"==typeof t.userUnit&&1!==t.userUnit&&Q("/UserUnit "+t.userUnit),st.publish("putPage",{objId:r,pageContext:rt[e],pageNumber:e,page:n}),Q("/Contents "+i+" 0 R"),Q(">>"),Q("endobj");var s=n.join("\n");return ut(i,!0),mt({data:s,filters:At()}),Q("endobj"),r},yt=p.__private__.putPages=function(){var t,e,n=[];for(t=1;t<=nt;t++)rt[t].objId=lt(),rt[t].contentsObjId=lt();for(t=1;t<=nt;t++)n.push(gt({number:t,data:U[t],objId:rt[t].objId,contentsObjId:rt[t].contentsObjId,mediaBox:rt[t].mediaBox,cropBox:rt[t].cropBox,bleedBox:rt[t].bleedBox,trimBox:rt[t].trimBox,artBox:rt[t].artBox,userUnit:rt[t].userUnit,rootDictionaryObjId:ht,resourceDictionaryObjId:dt}));ut(ht,!0),Q("<</Type /Pages");var r="/Kids [";for(e=0;e<nt;e++)r+=n[e]+" 0 R ";Q(r+"]"),Q("/Count "+nt),Q(">>"),Q("endobj"),st.publish("postPutPages")},wt=function(t,e,n){et.hasOwnProperty(e)||(et[e]={}),et[e][n]=t},bt=function(t,e,n,r,i){i=i||!1;var s="F"+(Object.keys(tt).length+1).toString(10),o={id:s,postScriptName:t,fontName:e,fontStyle:n,encoding:r,isStandardFont:i,metadata:{}};return st.publish("addFont",{font:o,instance:this}),void 0!==s&&(tt[s]=o,wt(s,e,n)),s},vt=p.__private__.pdfEscape=p.pdfEscape=function(t,e){return function(t,e){var n,r,i,s,o,a,l,u,c;if(i=(e=e||{}).sourceEncoding||"Unicode",o=e.outputEncoding,(e.autoencode||o)&&tt[R].metadata&&tt[R].metadata[i]&&tt[R].metadata[i].encoding&&(s=tt[R].metadata[i].encoding,!o&&tt[R].encoding&&(o=tt[R].encoding),!o&&s.codePages&&(o=s.codePages[0]),"string"==typeof o&&(o=s[o]),o)){for(l=!1,a=[],n=0,r=t.length;n<r;n++)(u=o[t.charCodeAt(n)])?a.push(String.fromCharCode(u)):a.push(t[n]),a[n].charCodeAt(0)>>8&&(l=!0);t=a.join("")}for(n=t.length;void 0===l&&0!==n;)t.charCodeAt(n-1)>>8&&(l=!0),n--;if(!l)return t;for(a=e.noBOM?[]:[254,255],n=0,r=t.length;n<r;n++){if((c=(u=t.charCodeAt(n))>>8)>>8)throw new Error("Character at position "+n+" of string '"+t+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");a.push(c),a.push(u-(c<<8))}return String.fromCharCode.apply(void 0,a)}(t,e).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},xt=p.__private__.beginPage=function(t,e){var r,i="string"==typeof e&&e.toLowerCase();if("string"==typeof t&&(r=g(t.toLowerCase()))&&(t=r[0],e=r[1]),Array.isArray(t)&&(e=t[1],t=t[0]),(isNaN(t)||isNaN(e))&&(t=n[0],e=n[1]),i){switch(i.substr(0,1)){case"l":t<e&&(i="s");break;case"p":e<t&&(i="s")}"s"===i&&(r=t,t=e,e=r)}(14400<t||14400<e)&&(console.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),t=Math.min(14400,t),e=Math.min(14400,e)),n=[t,e],M=!0,U[++nt]=[],rt[nt]={objId:0,contentsObjId:0,userUnit:Number(c),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(t),topRightY:Number(e)}},Ct(nt)},_t=function(){xt.apply(this,arguments),Vt($t),Q(Jt),0!==ie&&Q(ie+" J"),0!==oe&&Q(oe+" j"),st.publish("addPage",{pageNumber:nt})},Ct=function(t){0<t&&t<=nt&&(k=t)},St=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return U.length-1},Et=function(t,e,n){var r,i=void 0;return n=n||{},e=void 0!==e?e:tt[R].fontStyle,r=(t=void 0!==t?t:tt[R].fontName).toLowerCase(),void 0!==et[r]&&void 0!==et[r][e]?i=et[r][e]:void 0!==et[t]&&void 0!==et[t][e]?i=et[t][e]:!1===n.disableWarning&&console.warn("Unable to look up font label for font '"+t+"', '"+e+"'. Refer to getFontList() for available fonts."),i||n.noFallback||null==(i=et.times[e])&&(i=et.times.normal),i},Bt=p.__private__.putInfo=function(){for(var t in at(),Q("<<"),Q("/Producer (jsPDF "+a.version+")"),Y)Y.hasOwnProperty(t)&&Y[t]&&Q("/"+t.substr(0,1).toUpperCase()+t.substr(1)+" ("+vt(Y[t])+")");Q("/CreationDate ("+y+")"),Q(">>"),Q("endobj")},Nt=p.__private__.putCatalog=function(t){var e=(t=t||{}).rootDictionaryObjId||ht;switch(at(),Q("<<"),Q("/Type /Catalog"),Q("/Pages "+e+" 0 R"),I||(I="fullwidth"),I){case"fullwidth":Q("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Q("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Q("/OpenAction [3 0 R /Fit]");break;case"original":Q("/OpenAction [3 0 R /XYZ null null 1]");break;default:var n=""+I;"%"===n.substr(n.length-1)&&(I=parseInt(I)/100),"number"==typeof I&&Q("/OpenAction [3 0 R /XYZ null null "+w(I)+"]")}switch(T||(T="continuous"),T){case"continuous":Q("/PageLayout /OneColumn");break;case"single":Q("/PageLayout /SinglePage");break;case"two":case"twoleft":Q("/PageLayout /TwoColumnLeft");break;case"tworight":Q("/PageLayout /TwoColumnRight")}F&&Q("/PageMode /"+F),st.publish("putCatalog"),Q(">>"),Q("endobj")},It=p.__private__.putTrailer=function(){Q("trailer"),Q("<<"),Q("/Size "+(J+1)),Q("/Root "+J+" 0 R"),Q("/Info "+(J-1)+" 0 R"),Q("/ID [ <"+v+"> <"+v+"> ]"),Q(">>")},Ft=p.__private__.putHeader=function(){Q("%PDF-"+f),Q("%\xba\xdf\xac\xe0")},Tt=p.__private__.putXRef=function(){var t=1,e="0000000000";for(Q("xref"),Q("0 "+(J+1)),Q("0000000000 65535 f "),t=1;t<=J;t++)Q("function"==typeof Z[t]?(e+Z[t]()).slice(-10)+" 00000 n ":void 0!==Z[t]?(e+Z[t]).slice(-10)+" 00000 n ":"0000000000 00000 n ")},Rt=p.__private__.buildDocument=function(){M=!1,z=J=0,P=[],Z=[],it=[],ht=lt(),dt=lt(),st.publish("buildDocument"),Ft(),yt(),function(){st.publish("putAdditionalObjects");for(var t=0;t<it.length;t++){var e=it[t];ut(e.objId,!0),Q(e.content),Q("endobj")}st.publish("postPutAdditionalObjects")}(),function(){for(var t in tt)tt.hasOwnProperty(t)&&(!1===h||!0===h&&d.hasOwnProperty(t))&&(st.publish("putFont",{font:e=tt[t],out:Q,newObject:at,putStream:mt}),!0!==e.isAlreadyPutted&&(e.objectNumber=at(),Q("<<"),Q("/Type /Font"),Q("/BaseFont /"+e.postScriptName),Q("/Subtype /Type1"),"string"==typeof e.encoding&&Q("/Encoding /"+e.encoding),Q("/FirstChar 32"),Q("/LastChar 255"),Q(">>"),Q("endobj")));var e}(),st.publish("putResources"),ut(dt,!0),Q("<<"),function(){for(var t in Q("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Q("/Font <<"),tt)tt.hasOwnProperty(t)&&(!1===h||!0===h&&d.hasOwnProperty(t))&&Q("/"+t+" "+tt[t].objectNumber+" 0 R");Q(">>"),Q("/XObject <<"),st.publish("putXobjectDict"),Q(">>")}(),Q(">>"),Q("endobj"),st.publish("postPutResources"),Bt(),Nt();var t=z;return Tt(),It(),Q("startxref"),Q(""+t),Q("%%EOF"),M=!0,P.join("\n")},Ot=p.__private__.getBlob=function(t){return new Blob([$(t)],{type:"application/pdf"})},Dt=p.output=p.__private__.output=((D=function(t,e){e=e||{};var n=Rt();switch("string"==typeof e?e={filename:e}:e.filename=e.filename||"generated.pdf",t){case void 0:return n;case"save":p.save(e.filename);break;case"arraybuffer":return $(n);case"blob":return Ot(n);case"bloburi":case"bloburl":if(void 0!==s.URL&&"function"==typeof s.URL.createObjectURL)return s.URL&&s.URL.createObjectURL(Ot(n))||void 0;console.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":return"data:application/pdf;filename="+e.filename+";base64,"+btoa(n);case"dataurlnewwindow":var r='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring")+'"></iframe></body></html>',i=s.open();if(null!==i&&i.document.write(r),i||"undefined"==typeof safari)return i;case"datauri":case"dataurl":return s.document.location.href="data:application/pdf;filename="+e.filename+";base64,"+btoa(n);default:return null}}).foo=function(){try{return D.apply(this,arguments)}catch(t){var e=t.stack||"";~e.indexOf(" at ")&&(e=e.split(" at ")[1]);var n="Error in function "+e.split("\n")[0].split("<")[0]+": "+t.message;if(!s.console)throw new Error(n);s.console.error(n,t),s.alert&&alert(n)}},(D.foo.bar=D).foo),Lt=function(t){return!0===Array.isArray(ot)&&-1<ot.indexOf(t)};switch(e){case"pt":O=1;break;case"mm":O=72/25.4;break;case"cm":O=72/2.54;break;case"in":O=72;break;case"px":O=1==Lt("px_scaling")?.75:96/72;break;case"pc":case"em":O=12;break;case"ex":O=6;break;default:throw new Error("Invalid unit: "+e)}E(),_();var Mt=p.__private__.getPageInfo=function(t){if(isNaN(t)||t%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:rt[t].objId,pageNumber:t,pageContext:rt[t]}},Ut=p.__private__.getPageInfoByObjId=function(t){for(var e in rt)if(rt[e].objId===t)break;if(isNaN(t)||t%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");return Mt(e)},Pt=p.__private__.getCurrentPageInfo=function(){return{objId:rt[k].objId,pageNumber:k,pageContext:rt[k]}};p.addPage=function(){return _t.apply(this,arguments),this},p.setPage=function(){return Ct.apply(this,arguments),this},p.insertPage=function(t){return this.addPage(),this.movePage(k,t),this},p.movePage=function(t,e){if(e<t){for(var n=U[t],r=rt[t],i=t;e<i;i--)U[i]=U[i-1],rt[i]=rt[i-1];U[e]=n,rt[e]=r,this.setPage(e)}else if(t<e){for(n=U[t],r=rt[t],i=t;i<e;i++)U[i]=U[i+1],rt[i]=rt[i+1];U[e]=n,rt[e]=r,this.setPage(e)}return this},p.deletePage=function(){return(function(t){0<t&&t<=nt&&(U.splice(t,1),--nt<k&&(k=nt),this.setPage(k))}).apply(this,arguments),this},p.__private__.text=p.text=function(t,e,n,i){var s;"number"!=typeof t||"number"!=typeof e||"string"!=typeof n&&!Array.isArray(n)||(s=n,n=e,e=t,t=s);var o=arguments[3],a=arguments[4],l=arguments[5];if("object"===r(o)&&null!==o||("string"==typeof a&&(l=a,a=null),"string"==typeof o&&(l=o,o=null),"number"==typeof o&&(a=o,o=null),i={flags:o,angle:a,align:l}),(o=o||{}).noBOM=o.noBOM||!0,o.autoencode=o.autoencode||!0,isNaN(e)||isNaN(n)||null==t)throw new Error("Invalid arguments passed to jsPDF.text");if(0===t.length)return p;var u,c="",h="number"==typeof i.lineHeightFactor?i.lineHeightFactor:Ht,p=i.scope||this;function f(t){for(var e,n=t.concat(),r=[],i=n.length;i--;)"string"==typeof(e=n.shift())?r.push(e):Array.isArray(t)&&1===e.length?r.push(e[0]):r.push([e[0],e[1],e[2]]);return r}function A(t,e){var n;if("string"==typeof t)n=e(t)[0];else if(Array.isArray(t)){for(var r,i,s=t.concat(),o=[],a=s.length;a--;)"string"==typeof(r=s.shift())?o.push(e(r)[0]):Array.isArray(r)&&"string"===r[0]&&(i=e(r[0],r[1],r[2]),o.push([i[0],i[1],i[2]]));n=o}return n}var m=!1,g=!0;if("string"==typeof t)m=!0;else if(Array.isArray(t)){for(var y,v=t.concat(),x=[],_=v.length;_--;)("string"!=typeof(y=v.shift())||Array.isArray(y)&&"string"!=typeof y[0])&&(g=!1);m=g}if(!1===m)throw new Error('Type of text must be string or Array. "'+t+'" is not recognized.');var C=tt[R].encoding;"WinAnsiEncoding"!==C&&"StandardEncoding"!==C||(t=A(t,(function(t,e,n){return[(r=t,r=r.split("\t").join(Array(i.TabLen||9).join(" ")),vt(r,o)),e,n];var r}))),"string"==typeof t&&(t=t.match(/[\r?\n]/)?t.split(/\r\n|\r|\n/g):[t]);var S=q/p.internal.scaleFactor,E=S*(Ht-1);switch(i.baseline){case"bottom":n-=E;break;case"top":n+=S-E;break;case"hanging":n+=S-2*E;break;case"middle":n+=S/2-E}0<(H=i.maxWidth||0)&&("string"==typeof t?t=p.splitTextToSize(t,H):"[object Array]"===Object.prototype.toString.call(t)&&(t=p.splitTextToSize(t.join(" "),H)));var B={text:t,x:e,y:n,options:i,mutex:{pdfEscape:vt,activeFontKey:R,fonts:tt,activeFontSize:q}};st.publish("preProcessText",B),t=B.text,a=(i=B.options).angle;var k=p.internal.scaleFactor,N=[];if(a){a*=Math.PI/180;var I=Math.cos(a),F=Math.sin(a);N=[w(I),w(F),w(-1*F),w(I)]}void 0!==(z=i.charSpace)&&(c+=b(z*k)+" Tc\n");var T=-1,O=void 0!==i.renderingMode?i.renderingMode:i.stroke,D=p.internal.getCurrentPageInfo().pageContext;switch(O){case 0:case!1:case"fill":T=0;break;case 1:case!0:case"stroke":T=1;break;case 2:case"fillThenStroke":T=2;break;case 3:case"invisible":T=3;break;case 4:case"fillAndAddForClipping":T=4;break;case 5:case"strokeAndAddPathForClipping":T=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":T=6;break;case 7:case"addToPathForClipping":T=7}var L=void 0!==D.usedRenderingMode?D.usedRenderingMode:-1;-1!==T?c+=T+" Tr\n":-1!==L&&(c+="0 Tr\n"),-1!==T&&(D.usedRenderingMode=T),l=i.align||"left";var M=q*h,U=p.internal.pageSize.getWidth(),P=(k=p.internal.scaleFactor,tt[R]),z=i.charSpace||ne,H=i.maxWidth||0,$=(o={},[]);if("[object Array]"===Object.prototype.toString.call(t)){var V,j;x=f(t),"left"!==l&&(j=x.map((function(t){return p.getStringUnitWidth(t,{font:P,charSpace:z,fontSize:q})*q/k}))),Math.max.apply(Math,j);var W,G=0;if("right"===l){e-=j[0],t=[];var X=0;for(_=x.length;X<_;X++)V=0===X?(W=Wt(e),Gt(n)):(W=(G-j[X])*k,-M),t.push([x[X],W,V]),G=j[X]}else if("center"===l)for(e-=j[0]/2,t=[],X=0,_=x.length;X<_;X++)V=0===X?(W=Wt(e),Gt(n)):(W=(G-j[X])/2*k,-M),t.push([x[X],W,V]),G=j[X];else if("left"===l)for(t=[],X=0,_=x.length;X<_;X++)V=0===X?Gt(n):-M,W=0===X?Wt(e):0,t.push(x[X]);else{if("justify"!==l)throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(t=[],H=0!==H?H:U,X=0,_=x.length;X<_;X++)V=0===X?Gt(n):-M,W=0===X?Wt(e):0,X<_-1&&$.push(((H-j[X])/(x[X].split(" ").length-1)*k).toFixed(2)),t.push([x[X],W,V])}}!0===("boolean"==typeof i.R2L?i.R2L:K)&&(t=A(t,(function(t,e,n){return[t.split("").reverse().join(""),e,n]}))),st.publish("postProcessText",B={text:t,x:e,y:n,options:i,mutex:{pdfEscape:vt,activeFontKey:R,fonts:tt,activeFontSize:q}}),u=B.mutex.isHex,x=f(t=B.text),t=[];var Y,J,Z,et=0,nt=(_=x.length,"");for(X=0;X<_;X++)nt="",Array.isArray(x[X])?(Y=parseFloat(x[X][1]),J=parseFloat(x[X][2]),Z=(u?"<":"(")+x[X][0]+(u?">":")"),et=1):(Y=Wt(e),J=Gt(n),Z=(u?"<":"(")+x[X]+(u?">":")")),void 0!==$&&void 0!==$[X]&&(nt=$[X]+" Tw\n"),t.push(0!==N.length&&0===X?nt+N.join(" ")+" "+Y.toFixed(2)+" "+J.toFixed(2)+" Tm\n"+Z:1===et||0===et&&0===X?nt+Y.toFixed(2)+" "+J.toFixed(2)+" Td\n"+Z:nt+Z);t=t.join(0===et?" Tj\nT* ":" Tj\n"),t+=" Tj\n";var rt="BT\n/"+R+" "+q+" Tf\n"+(q*h).toFixed(2)+" TL\n"+te+"\n";return rt+=c,rt+=t,Q(rt+="ET"),d[R]=!0,p},p.__private__.lstext=p.lstext=function(t,e,n,r){return console.warn("jsPDF.lstext is deprecated"),this.text(t,e,n,{charSpace:r})},p.__private__.clip=p.clip=function(t){Q("evenodd"===t?"W*":"W"),Q("n")},p.__private__.clip_fixed=p.clip_fixed=function(t){console.log("clip_fixed is deprecated"),p.clip(t)};var zt=p.__private__.isValidStyle=function(t){var e=!1;return-1!==[void 0,null,"S","F","DF","FD","f","f*","B","B*"].indexOf(t)&&(e=!0),e},Qt=p.__private__.getStyle=function(t){var e="S";return"F"===t?e="f":"FD"===t||"DF"===t?e="B":"f"!==t&&"f*"!==t&&"B"!==t&&"B*"!==t||(e=t),e};p.__private__.line=p.line=function(t,e,n,r){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(r))throw new Error("Invalid arguments passed to jsPDF.line");return this.lines([[n-t,r-e]],t,e)},p.__private__.lines=p.lines=function(t,e,n,r,i,s){var o,a,l,u,c,h,d,p,f,A,m,g;if("number"==typeof t&&(g=n,n=e,e=t,t=g),r=r||[1,1],s=s||!1,isNaN(e)||isNaN(n)||!Array.isArray(t)||!Array.isArray(r)||!zt(i)||"boolean"!=typeof s)throw new Error("Invalid arguments passed to jsPDF.lines");for(Q(b(Wt(e))+" "+b(Gt(n))+" m "),o=r[0],a=r[1],u=t.length,A=e,m=n,l=0;l<u;l++)2===(c=t[l]).length?(m=c[1]*a+m,Q(b(Wt(A=c[0]*o+A))+" "+b(Gt(m))+" l")):(h=c[0]*o+A,d=c[1]*a+m,p=c[2]*o+A,f=c[3]*a+m,A=c[4]*o+A,m=c[5]*a+m,Q(b(Wt(h))+" "+b(Gt(d))+" "+b(Wt(p))+" "+b(Gt(f))+" "+b(Wt(A))+" "+b(Gt(m))+" c"));return s&&Q(" h"),null!==i&&Q(Qt(i)),this},p.__private__.rect=p.rect=function(t,e,n,r,i){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(r)||!zt(i))throw new Error("Invalid arguments passed to jsPDF.rect");return Q([w(Wt(t)),w(Gt(e)),w(n*O),w(-r*O),"re"].join(" ")),null!==i&&Q(Qt(i)),this},p.__private__.triangle=p.triangle=function(t,e,n,r,i,s,o){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(r)||isNaN(i)||isNaN(s)||!zt(o))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[n-t,r-e],[i-n,s-r],[t-i,e-s]],t,e,[1,1],o,!0),this},p.__private__.roundedRect=p.roundedRect=function(t,e,n,r,i,s,o){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(r)||isNaN(i)||isNaN(s)||!zt(o))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var a=4/3*(Math.SQRT2-1);return this.lines([[n-2*i,0],[i*a,0,i,s-s*a,i,s],[0,r-2*s],[0,s*a,-i*a,s,-i,s],[2*i-n,0],[-i*a,0,-i,-s*a,-i,-s],[0,2*s-r],[0,-s*a,i*a,-s,i,-s]],t+i,e,[1,1],o),this},p.__private__.ellipse=p.ellipse=function(t,e,n,r,i){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(r)||!zt(i))throw new Error("Invalid arguments passed to jsPDF.ellipse");var s=4/3*(Math.SQRT2-1)*n,o=4/3*(Math.SQRT2-1)*r;return Q([w(Wt(t+n)),w(Gt(e)),"m",w(Wt(t+n)),w(Gt(e-o)),w(Wt(t+s)),w(Gt(e-r)),w(Wt(t)),w(Gt(e-r)),"c"].join(" ")),Q([w(Wt(t-s)),w(Gt(e-r)),w(Wt(t-n)),w(Gt(e-o)),w(Wt(t-n)),w(Gt(e)),"c"].join(" ")),Q([w(Wt(t-n)),w(Gt(e+o)),w(Wt(t-s)),w(Gt(e+r)),w(Wt(t)),w(Gt(e+r)),"c"].join(" ")),Q([w(Wt(t+s)),w(Gt(e+r)),w(Wt(t+n)),w(Gt(e+o)),w(Wt(t+n)),w(Gt(e)),"c"].join(" ")),null!==i&&Q(Qt(i)),this},p.__private__.circle=p.circle=function(t,e,n,r){if(isNaN(t)||isNaN(e)||isNaN(n)||!zt(r))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(t,e,n,n,r)},p.setFont=function(t,e){return R=Et(t,e,{disableWarning:!1}),this},p.setFontStyle=p.setFontType=function(t){return R=Et(void 0,t),this},p.__private__.getFontList=p.getFontList=function(){var t,e,n,r={};for(t in et)if(et.hasOwnProperty(t))for(e in r[t]=n=[],et[t])et[t].hasOwnProperty(e)&&n.push(e);return r},p.addFont=function(t,e,n,r){bt.call(this,t,e,n,r=r||"Identity-H")};var Ht,$t=l.lineWidth||.200025,Vt=p.__private__.setLineWidth=p.setLineWidth=function(t){return Q((t*O).toFixed(2)+" w"),this},qt=(p.__private__.setLineDash=a.API.setLineDash=function(t,e){if(t=t||[],e=e||0,isNaN(e)||!Array.isArray(t))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return t=t.map((function(t){return(t*O).toFixed(3)})).join(" "),e=parseFloat((e*O).toFixed(3)),Q("["+t+"] "+e+" d"),this},p.__private__.getLineHeight=p.getLineHeight=function(){return q*Ht}),jt=(qt=p.__private__.getLineHeight=p.getLineHeight=function(){return q*Ht},p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(t){return"number"==typeof(t=t||1.15)&&(Ht=t),this}),Kt=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return Ht};jt(l.lineHeight);var Wt=p.__private__.getHorizontalCoordinate=function(t){return t*O},Gt=p.__private__.getVerticalCoordinate=function(t){return rt[k].mediaBox.topRightY-rt[k].mediaBox.bottomLeftY-t*O},Xt=p.__private__.getHorizontalCoordinateString=function(t){return w(t*O)},Yt=p.__private__.getVerticalCoordinateString=function(t){return w(rt[k].mediaBox.topRightY-rt[k].mediaBox.bottomLeftY-t*O)},Jt=l.strokeColor||"0 G",Zt=(p.__private__.getStrokeColor=p.getDrawColor=function(){return pt(Jt)},p.__private__.setStrokeColor=p.setDrawColor=function(t,e,n,r){return Jt=ft({ch1:t,ch2:e,ch3:n,ch4:r,pdfColorType:"draw",precision:2}),Q(Jt),this},l.fillColor||"0 g"),te=(p.__private__.getFillColor=p.getFillColor=function(){return pt(Zt)},p.__private__.setFillColor=p.setFillColor=function(t,e,n,r){return Zt=ft({ch1:t,ch2:e,ch3:n,ch4:r,pdfColorType:"fill",precision:2}),Q(Zt),this},l.textColor||"0 g"),ee=p.__private__.getTextColor=p.getTextColor=function(){return pt(te)},ne=(p.__private__.setTextColor=p.setTextColor=function(t,e,n,r){return te=ft({ch1:t,ch2:e,ch3:n,ch4:r,pdfColorType:"text",precision:3}),this},l.charSpace||0),re=p.__private__.getCharSpace=p.getCharSpace=function(){return ne},ie=(p.__private__.setCharSpace=p.setCharSpace=function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return ne=t,this},0);p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(t){var e=p.CapJoinStyles[t];if(void 0===e)throw new Error("Line cap style of '"+t+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Q((ie=e)+" J"),this};var se,oe=0;for(var ae in p.__private__.setLineJoin=p.setLineJoin=function(t){var e=p.CapJoinStyles[t];if(void 0===e)throw new Error("Line join style of '"+t+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Q((oe=e)+" j"),this},p.__private__.setMiterLimit=p.setMiterLimit=function(t){if(t=t||0,isNaN(t))throw new Error("Invalid argument passed to jsPDF.setMiterLimit");return se=parseFloat(w(t*O)),Q(se+" M"),this},p.save=function(t,e){if(t=t||"generated.pdf",(e=e||{}).returnPromise=e.returnPromise||!1,!1!==e.returnPromise)return new Promise((function(e,n){try{var r=kt(Ot(Rt()),t);"function"==typeof kt.unload&&s.setTimeout&&setTimeout(kt.unload,911),e(r)}catch(e){n(e.message)}}));kt(Ot(Rt()),t),"function"==typeof kt.unload&&s.setTimeout&&setTimeout(kt.unload,911)},a.API)a.API.hasOwnProperty(ae)&&("events"===ae&&a.API.events.length?function(t,e){var n,r;for(r=e.length-1;-1!==r;r--)t.subscribe.apply(t,[e[r][0]].concat("function"==typeof(n=e[r][1])?[n]:n))}(st,a.API.events):p[ae]=a.API[ae]);return p.internal={pdfEscape:vt,getStyle:Qt,getFont:function(){return tt[Et.apply(p,arguments)]},getFontSize:j,getCharSpace:re,getTextColor:ee,getLineHeight:qt,getLineHeightFactor:Kt,write:H,getHorizontalCoordinate:Wt,getVerticalCoordinate:Gt,getCoordinateString:Xt,getVerticalCoordinateString:Yt,collections:{},newObject:at,newAdditionalObject:ct,newObjectDeferred:lt,newObjectDeferredBegin:ut,getFilters:At,putStream:mt,events:st,scaleFactor:O,pageSize:{getWidth:function(){return(rt[k].mediaBox.topRightX-rt[k].mediaBox.bottomLeftX)/O},setWidth:function(t){rt[k].mediaBox.topRightX=t*O+rt[k].mediaBox.bottomLeftX},getHeight:function(){return(rt[k].mediaBox.topRightY-rt[k].mediaBox.bottomLeftY)/O},setHeight:function(t){rt[k].mediaBox.topRightY=t*O+rt[k].mediaBox.bottomLeftY}},output:Dt,getNumberOfPages:St,pages:U,out:Q,f2:w,f3:b,getPageInfo:Mt,getPageInfoByObjId:Ut,getCurrentPageInfo:Pt,getPDFVersion:A,hasHotfix:Lt},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return(rt[k].mediaBox.topRightX-rt[k].mediaBox.bottomLeftX)/O},set:function(t){rt[k].mediaBox.topRightX=t*O+rt[k].mediaBox.bottomLeftX},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return(rt[k].mediaBox.topRightY-rt[k].mediaBox.bottomLeftY)/O},set:function(t){rt[k].mediaBox.topRightY=t*O+rt[k].mediaBox.bottomLeftY},enumerable:!0,configurable:!0}),function(t){for(var e=0,n=V.length;e<n;e++){var r=bt(t[e][0],t[e][1],t[e][2],V[e][3],!0);d[r]=!0;var i=t[e][0].split("-");wt(r,i[0],i[1]||"")}st.publish("addFonts",{fonts:tt,dictionary:et})}(V),R="F1",_t(n,t),st.publish("initialized"),p}return a.API={events:[]},a.version="1.5.3",void 0!==(i=(function(){return a}).call(e,n,e,t))&&(t.exports=i),a}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||"undefined"!=typeof global&&global||Function('return typeof this === "object" && this.content')()||Function("return this")());(function(t,e){var n,i=1,s=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},o=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},a=function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.f2");return t.toFixed(2)},l=function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.f2");return t.toFixed(5)};t.__acroform__={};var u=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},c=function(t){return t*i},h=function(t){return t/i},d=function(t){var e=new O,n=W.internal.getHeight(t)||0,r=W.internal.getWidth(t)||0;return e.BBox=[0,0,Number(a(r)),Number(a(n))],e},p=t.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},f=t.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},A=t.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return 0==(t&1<<e)?0:1},m=t.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return A(t,e-1)},g=t.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return p(t,e-1)},y=t.__acroform__.clearBitForPdf=function(t,e,n){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return f(t,e-1)},w=t.__acroform__.calculateCoordinates=function(t){var e=this.internal.getHorizontalCoordinate,n=this.internal.getVerticalCoordinate,r=t[0],i=t[1],s=t[2],o=t[3],l={};return l.lowerLeft_X=e(r)||0,l.lowerLeft_Y=n(i+o)||0,l.upperRight_X=e(r+s)||0,l.upperRight_Y=n(i)||0,[Number(a(l.lowerLeft_X)),Number(a(l.lowerLeft_Y)),Number(a(l.upperRight_X)),Number(a(l.upperRight_Y))]},b=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],r=v(t,t.V||t.DV),i=n.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.__private__.encodeColorString(t.color)),e.push("/"+i+" "+a(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=new d(t);return s.stream=e.join("\n"),s}},v=function(t,e){var r=t.maxFontSize||12,i={text:"",fontSize:""},o=(e=")"==(e="("==e.substr(0,1)?e.substr(1):e).substr(e.length-1)?e.substr(0,e.length-1):e).split(" "),l=(n.__private__.encodeColorString(t.color),r),u=W.internal.getHeight(t)||0;u=u<0?-u:u;var c=W.internal.getWidth(t)||0;c=c<0?-c:c;var h=function(e,n,r){return e+1<o.length&&x(n+" "+o[e+1],t,r).width<=c-4};l++;t:for(;;){e="";var d=x("3",t,--l).height,p=t.multiline?u-l:(u-d)/2,f=-2,A=p+=2,m=0,g=0,y=0;if(l<=0){e="(...) Tj\n",e+="% Width of Text: "+x(e,t,l=12).width+", FieldWidth:"+c+"\n";break}y=x(o[0]+" ",t,l).width;var w="",b=0;for(var v in o)if(o.hasOwnProperty(v)){w=" "==(w+=o[v]+" ").substr(w.length-1)?w.substr(0,w.length-1):w;var _=parseInt(v);y=x(w+" ",t,l).width;var C=h(_,w,l),S=v>=o.length-1;if(C&&!S){w+=" ";continue}if(C||S){if(S)g=_;else if(t.multiline&&u<(d+2)*(b+2)+2)continue t}else{if(!t.multiline)continue t;if(u<(d+2)*(b+2)+2)continue t;g=_}for(var E="",B=m;B<=g;B++)E+=o[B]+" ";switch(E=" "==E.substr(E.length-1)?E.substr(0,E.length-1):E,y=x(E,t,l).width,t.textAlign){case"right":f=c-y-2;break;case"center":f=(c-y)/2;break;case"left":default:f=2}e+=a(f)+" "+a(A)+" Td\n",e+="("+s(E)+") Tj\n",e+=-a(f)+" 0 Td\n",A=-(l+2),y=0,m=g+1,b++,w=""}break}return i.text=e,i.fontSize=l,i},x=function(t,e,r){var i=n.internal.getFont(e.fontName,e.fontStyle),s=n.getStringUnitWidth(t,{font:i,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:n.getStringUnitWidth("3",{font:i,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:s}},_={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},C=function(){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var t=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var e in t)if(t.hasOwnProperty(e)){var r=t[e];r.objId=void 0,r.hasAnnotation&&S.call(n,r)}},S=function(t){var e={type:"reference",object:t};void 0===n.internal.getPageInfo(t.page).pageContext.annotations.find((function(t){return t.type===e.type&&t.object===e.object}))&&n.internal.getPageInfo(t.page).pageContext.annotations.push(e)},E=function(){if(void 0===n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")},B=function(){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0},k=function(t){var e=!t;for(var i in t||(n.internal.newObjectDeferredBegin(n.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),n.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),t=t||n.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(t.hasOwnProperty(i)){var s=t[i],o=[],a=s.Rect;if(s.Rect&&(s.Rect=w.call(this,s.Rect)),n.internal.newObjectDeferredBegin(s.objId,!0),s.DA=W.createDefaultAppearanceStream(s),"object"===r(s)&&"function"==typeof s.getKeyValueListForStream&&(o=s.getKeyValueListForStream()),s.Rect=a,s.hasAppearanceStream&&!s.appearanceStreamContent){var l=b.call(this,s);o.push({key:"AP",value:"<</N "+l+">>"}),n.internal.acroformPlugin.xForms.push(l)}if(s.appearanceStreamContent){var u="";for(var c in s.appearanceStreamContent)if(s.appearanceStreamContent.hasOwnProperty(c)){var h=s.appearanceStreamContent[c];if(u+="/"+c+" ",u+="<<",1<=Object.keys(h).length||Array.isArray(h))for(var i in h){var d;h.hasOwnProperty(i)&&("function"==typeof(d=h[i])&&(d=d.call(this,s)),u+="/"+i+" "+d+" ",0<=n.internal.acroformPlugin.xForms.indexOf(d)||n.internal.acroformPlugin.xForms.push(d))}else"function"==typeof(d=h)&&(d=d.call(this,s)),u+="/"+i+" "+d,0<=n.internal.acroformPlugin.xForms.indexOf(d)||n.internal.acroformPlugin.xForms.push(d);u+=">>"}o.push({key:"AP",value:"<<\n"+u+">>"})}n.internal.putStream({additionalKeyValues:o}),n.internal.out("endobj")}e&&N.call(this,n.internal.acroformPlugin.xForms)},N=function(t){for(var e in t)if(t.hasOwnProperty(e)){var i=e,s=t[e];n.internal.newObjectDeferredBegin(s&&s.objId,!0),"object"===r(s)&&"function"==typeof s.putStream&&s.putStream(),delete t[i]}},I=function(){if(void 0!==this.internal&&(void 0===this.internal.acroformPlugin||!1===this.internal.acroformPlugin.isInitialized)){if(n=this,L.FieldNum=0,this.internal.acroformPlugin=JSON.parse(JSON.stringify(_)),this.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");i=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new D,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",B),n.internal.events.subscribe("buildDocument",C),n.internal.events.subscribe("putCatalog",E),n.internal.events.subscribe("postPutPages",k),n.internal.acroformPlugin.isInitialized=!0}},F=t.__acroform__.arrayToPdfArray=function(t){if(Array.isArray(t)){for(var e="[",n=0;n<t.length;n++)switch(0!==n&&(e+=" "),r(t[n])){case"boolean":case"number":case"object":e+=t[n].toString();break;case"string":"/"!==t[n].substr(0,1)?e+="("+s(t[n].toString())+")":e+=t[n].toString()}return e+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},T=function(t){return(t=t||"").toString(),"("+s(t)+")"},R=function(){var t;Object.defineProperty(this,"objId",{configurable:!0,get:function(){if(t||(t=n.internal.newObjectDeferred()),!t)throw new Error("AcroFormPDFObject: Couldn't create Object ID");return t},set:function(e){t=e}})};R.prototype.toString=function(){return this.objId+" 0 R"},R.prototype.putStream=function(){var t=this.getKeyValueListForStream();n.internal.putStream({data:this.stream,additionalKeyValues:t}),n.internal.out("endobj")},R.prototype.getKeyValueListForStream=function(){return function(t){var e=[],n=Object.getOwnPropertyNames(t).filter((function(t){return"content"!=t&&"appearanceStreamContent"!=t&&"_"!=t.substring(0,1)}));for(var r in n)if(!1===Object.getOwnPropertyDescriptor(t,n[r]).configurable){var i=n[r],s=t[i];s&&(Array.isArray(s)?e.push({key:i,value:F(s)}):s instanceof R?e.push({key:i,value:s.objId+" 0 R"}):"function"!=typeof s&&e.push({key:i,value:s}))}return e}(this)};var O=function(){R.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writeable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writeable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writeable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,writeable:!0,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writeable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(e){t=e.trim()},get:function(){return t||null}})};u(O,R);var D=function(){R.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return 0<e.length?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t)return"("+t+")"},set:function(e){t=e}})};u(D,R);var L=function t(){R.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){if(isNaN(t))throw new Error('Invalid value "'+t+'" for attribute F supplied.');e=t}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return Boolean(m(e,3))},set:function(t){this.F=!0===Boolean(t)?g(e,3):y(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){if(isNaN(t))throw new Error('Invalid value "'+t+'" for attribute Ff supplied.');n=t}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(0!==r.length)return r},set:function(t){r=void 0!==t?t:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:h(r[0])},set:function(t){r[0]=c(t)}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:h(r[1])},set:function(t){r[1]=c(t)}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:h(r[2])},set:function(t){r[2]=c(t)}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:h(r[3])},set:function(t){r[3]=c(t)}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(t){switch(t){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=t;break;default:throw new Error('Invalid value "'+t+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof V)return;a="FieldObject"+t.FieldNum++}return"("+s(a)+")"},set:function(t){a=t.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(t){a=t}});var l="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return l},set:function(t){l=t}});var u="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return u},set:function(t){u=t}});var d=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return h(d)},set:function(t){d=c(t)}});var p=50;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return h(p)},set:function(t){p=c(t)}});var f="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return f},set:function(t){f=t}});var A="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!A||this instanceof V||this instanceof j))return T(A)},set:function(t){t=t.toString(),A=t}});var w=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(w)return this instanceof Q==0?T(w):w},set:function(t){t=t.toString(),w=this instanceof Q==0?"("===t.substr(0,1)?o(t.substr(1,t.length-2)):o(t):t}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Q==1?o(w.substr(1,w.length-1)):w},set:function(t){t=t.toString(),w=this instanceof Q==1?"/"+t:t}});var b=null;Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(b)return this instanceof Q==0?T(b):b},set:function(t){t=t.toString(),b=this instanceof Q==0?"("===t.substr(0,1)?o(t.substr(1,t.length-2)):o(t):t}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Q==1?o(b.substr(1,b.length-1)):b},set:function(t){t=t.toString(),b=this instanceof Q==1?"/"+t:t}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var v,x=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,writeable:!0,get:function(){return x},set:function(t){t=Boolean(t),x=t}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,writeable:!0,get:function(){if(v)return v},set:function(t){v=t}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return Boolean(m(this.Ff,1))},set:function(t){this.Ff=!0===Boolean(t)?g(this.Ff,1):y(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return Boolean(m(this.Ff,2))},set:function(t){this.Ff=!0===Boolean(t)?g(this.Ff,2):y(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return Boolean(m(this.Ff,3))},set:function(t){this.Ff=!0===Boolean(t)?g(this.Ff,3):y(this.Ff,3)}});var _=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(null!==_)return _},set:function(t){if(-1===[0,1,2].indexOf(t))throw new Error('Invalid value "'+t+'" for attribute Q supplied.');_=t}}),Object.defineProperty(this,"textAlign",{get:function(){var t="left";switch(_){case 0:default:t="left";break;case 1:t="center";break;case 2:t="right"}return t},configurable:!0,enumerable:!0,set:function(t){switch(t){case"right":case 2:_=2;break;case"center":case 1:_=1;break;case"left":case 0:default:_=0}}})};u(L,R);var M=function(){L.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){t=e}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return F(e)},set:function(t){var n,r;r=[],"string"==typeof(n=t)&&(r=function(t,e,n){n||(n=1);for(var r,i=[];r=e.exec(t);)i.push(r[n]);return i}(n,/\((.*?)\)/g)),e=r}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,n){for(n=n||!1,t=(t=t||"").toString();-1!==e.indexOf(t)&&(e.splice(e.indexOf(t),1),!1!==n););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return Boolean(m(this.Ff,18))},set:function(t){this.Ff=!0===Boolean(t)?g(this.Ff,18):y(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return Boolean(m(this.Ff,19))},set:function(t){!0===this.combo&&(this.Ff=!0===Boolean(t)?g(this.Ff,19):y(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return Boolean(m(this.Ff,20))},set:function(t){!0===Boolean(t)?(this.Ff=g(this.Ff,20),e.sort()):this.Ff=y(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(m(this.Ff,22))},set:function(t){this.Ff=!0===Boolean(t)?g(this.Ff,22):y(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(m(this.Ff,23))},set:function(t){this.Ff=!0===Boolean(t)?g(this.Ff,23):y(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return Boolean(m(this.Ff,27))},set:function(t){this.Ff=!0===Boolean(t)?g(this.Ff,27):y(this.Ff,27)}}),this.hasAppearanceStream=!1};u(M,L);var U=function(){M.call(this),this.fontName="helvetica",this.combo=!1};u(U,M);var P=function(){U.call(this),this.combo=!0};u(P,U);var z=function(){P.call(this),this.edit=!0};u(z,P);var Q=function(){L.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return Boolean(m(this.Ff,15))},set:function(t){this.Ff=!0===Boolean(t)?g(this.Ff,15):y(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return Boolean(m(this.Ff,16))},set:function(t){this.Ff=!0===Boolean(t)?g(this.Ff,16):y(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return Boolean(m(this.Ff,17))},set:function(t){this.Ff=!0===Boolean(t)?g(this.Ff,17):y(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return Boolean(m(this.Ff,26))},set:function(t){this.Ff=!0===Boolean(t)?g(this.Ff,26):y(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){if(0!==Object.keys(e).length){var t,n=[];for(t in n.push("<<"),e)n.push("/"+t+" ("+e[t]+")");return n.push(">>"),n.join("\n")}},set:function(t){"object"===r(t)&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){"string"==typeof t&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(e){t="/"+e}})};u(Q,L);var H=function(){Q.call(this),this.pushButton=!0};u(H,Q);var $=function(){Q.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=void 0!==e?e:[]}})};u($,Q);var V=function(){var t,e;L.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(t){e=t}});var n,i={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t,e=[];for(t in e.push("<<"),i)e.push("/"+t+" ("+i[t]+")");return e.push(">>"),e.join("\n")},set:function(t){"object"===r(t)&&(i=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return i.CA||""},set:function(t){"string"==typeof t&&(i.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}}),this.optionName=name,this.caption="l",this.appearanceState="Off",this._AppearanceType=W.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(name)};u(V,L),$.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},$.prototype.createOption=function(t){var e=new V;return e.Parent=this,e.optionName=t,this.Kids.push(e),G.call(this,e),e};var q=function(){Q.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=W.CheckBox.createAppearanceStream()};u(q,Q);var j=function(){L.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return Boolean(m(this.Ff,13))},set:function(t){this.Ff=!0===Boolean(t)?g(this.Ff,13):y(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(m(this.Ff,21))},set:function(t){this.Ff=!0===Boolean(t)?g(this.Ff,21):y(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(m(this.Ff,23))},set:function(t){this.Ff=!0===Boolean(t)?g(this.Ff,23):y(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return Boolean(m(this.Ff,24))},set:function(t){this.Ff=!0===Boolean(t)?g(this.Ff,24):y(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return Boolean(m(this.Ff,25))},set:function(t){this.Ff=!0===Boolean(t)?g(this.Ff,25):y(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return Boolean(m(this.Ff,26))},set:function(t){this.Ff=!0===Boolean(t)?g(this.Ff,26):y(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};u(j,L);var K=function(){j.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return Boolean(m(this.Ff,14))},set:function(t){this.Ff=!0===Boolean(t)?g(this.Ff,14):y(this.Ff,14)}}),this.password=!0};u(K,j);var W={CheckBox:{createAppearanceStream:function(){return{N:{On:W.CheckBox.YesNormal},D:{On:W.CheckBox.YesPushDown,Off:W.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=d(t),r=[],i=n.internal.getFont(t.fontName,t.fontStyle).id,s=n.__private__.encodeColorString(t.color),o=v(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+a(W.internal.getWidth(t))+" "+a(W.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+i+" "+a(o.fontSize)+" Tf "+s),r.push("BT"),r.push(o.text),r.push("ET"),r.push("Q"),r.push("EMC"),e.stream=r.join("\n"),e},YesNormal:function(t){var e=d(t),r=n.internal.getFont(t.fontName,t.fontStyle).id,i=n.__private__.encodeColorString(t.color),s=[],o=W.internal.getHeight(t),l=W.internal.getWidth(t),u=v(t,t.caption);return s.push("1 g"),s.push("0 0 "+a(l)+" "+a(o)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+a(l-1)+" "+a(o-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+r+" "+a(u.fontSize)+" Tf "+i),s.push(u.text),s.push("ET"),s.push("Q"),e.stream=s.join("\n"),e},OffPushDown:function(t){var e=d(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+a(W.internal.getWidth(t))+" "+a(W.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join("\n"),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:W.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=W.RadioButton.Circle.YesNormal,e.D[t]=W.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=d(t),n=[],r=W.internal.getWidth(t)<=W.internal.getHeight(t)?W.internal.getWidth(t)/4:W.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((r*W.internal.Bezier_C).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+l(W.internal.getWidth(t)/2)+" "+l(W.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+i+" "+i+" "+r+" 0 "+r+" c"),n.push("-"+i+" "+r+" -"+r+" "+i+" -"+r+" 0 c"),n.push("-"+r+" -"+i+" -"+i+" -"+r+" 0 -"+r+" c"),n.push(i+" -"+r+" "+r+" -"+i+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join("\n"),e},YesPushDown:function(t){var e=d(t),n=[],r=W.internal.getWidth(t)<=W.internal.getHeight(t)?W.internal.getWidth(t)/4:W.internal.getHeight(t)/4,i=(r=Number((.9*r).toFixed(5)),Number((2*r).toFixed(5))),s=Number((i*W.internal.Bezier_C).toFixed(5)),o=Number((r*W.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+l(W.internal.getWidth(t)/2)+" "+l(W.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+l(W.internal.getWidth(t)/2)+" "+l(W.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join("\n"),e},OffPushDown:function(t){var e=d(t),n=[],r=W.internal.getWidth(t)<=W.internal.getHeight(t)?W.internal.getWidth(t)/4:W.internal.getHeight(t)/4,i=(r=Number((.9*r).toFixed(5)),Number((2*r).toFixed(5))),s=Number((i*W.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+l(W.internal.getWidth(t)/2)+" "+l(W.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join("\n"),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:W.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=W.RadioButton.Cross.YesNormal,e.D[t]=W.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=d(t),n=[],r=W.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+a(W.internal.getWidth(t)-2)+" "+a(W.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(a(r.x1.x)+" "+a(r.x1.y)+" m"),n.push(a(r.x2.x)+" "+a(r.x2.y)+" l"),n.push(a(r.x4.x)+" "+a(r.x4.y)+" m"),n.push(a(r.x3.x)+" "+a(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join("\n"),e},YesPushDown:function(t){var e=d(t),n=W.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+a(W.internal.getWidth(t))+" "+a(W.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+a(W.internal.getWidth(t)-2)+" "+a(W.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(a(n.x1.x)+" "+a(n.x1.y)+" m"),r.push(a(n.x2.x)+" "+a(n.x2.y)+" l"),r.push(a(n.x4.x)+" "+a(n.x4.y)+" m"),r.push(a(n.x3.x)+" "+a(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join("\n"),e},OffPushDown:function(t){var e=d(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+a(W.internal.getWidth(t))+" "+a(W.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join("\n"),e}}},createDefaultAppearanceStream:function(t){var e=n.internal.getFont(t.fontName,t.fontStyle).id,r=n.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+r}};W.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=W.internal.getWidth(t),n=W.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},W.internal.getWidth=function(t){var e=0;return"object"===r(t)&&(e=c(t.Rect[2])),e},W.internal.getHeight=function(t){var e=0;return"object"===r(t)&&(e=c(t.Rect[3])),e};var G=t.addField=function(t){if(I.call(this),!(t instanceof L))throw new Error("Invalid argument passed to jsPDF.addField.");return(function(t){n.internal.acroformPlugin.printedOut&&(n.internal.acroformPlugin.printedOut=!1,n.internal.acroformPlugin.acroFormDictionaryRoot=null),n.internal.acroformPlugin.acroFormDictionaryRoot||I.call(n),n.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t)}).call(this,t),t.page=n.internal.getCurrentPageInfo().pageNumber,this};t.addButton=function(t){if(t instanceof Q==0)throw new Error("Invalid argument passed to jsPDF.addButton.");return G.call(this,t)},t.addTextField=function(t){if(t instanceof j==0)throw new Error("Invalid argument passed to jsPDF.addTextField.");return G.call(this,t)},t.addChoiceField=function(t){if(t instanceof M==0)throw new Error("Invalid argument passed to jsPDF.addChoiceField.");return G.call(this,t)},"object"==r(e)&&void 0===e.ChoiceField&&void 0===e.ListBox&&void 0===e.ComboBox&&void 0===e.EditBox&&void 0===e.Button&&void 0===e.PushButton&&void 0===e.RadioButton&&void 0===e.CheckBox&&void 0===e.TextField&&void 0===e.PasswordField?(e.ChoiceField=M,e.ListBox=U,e.ComboBox=P,e.EditBox=z,e.Button=Q,e.PushButton=H,e.RadioButton=$,e.CheckBox=q,e.TextField=j,e.PasswordField=K,e.AcroForm={Appearance:W}):console.warn("AcroForm-Classes are not populated into global-namespace, because the class-Names exist already."),t.AcroFormChoiceField=M,t.AcroFormListBox=U,t.AcroFormComboBox=P,t.AcroFormEditBox=z,t.AcroFormButton=Q,t.AcroFormPushButton=H,t.AcroFormRadioButton=$,t.AcroFormCheckBox=q,t.AcroFormTextField=j,t.AcroFormPasswordField=K,t.AcroFormAppearance=W,t.AcroForm={ChoiceField:M,ListBox:U,ComboBox:P,EditBox:z,Button:Q,PushButton:H,RadioButton:$,CheckBox:q,TextField:j,PasswordField:K,Appearance:W}})((window.tmp=dt).API,"undefined"!=typeof window&&window||"undefined"!=typeof global&&global),function(t){var e="addImage_",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=t.getImageFileTypeByImageData=function(e,r){var i,s;r=r||"UNKNOWN";var o,a,l,u="UNKNOWN";for(l in t.isArrayBufferView(e)&&(e=t.arrayBufferToBinaryString(e)),n)for(o=n[l],i=0;i<o.length;i+=1){for(a=!0,s=0;s<o[i].length;s+=1)if(void 0!==o[i][s]&&o[i][s]!==e.charCodeAt(s)){a=!1;break}if(!0===a){u=l;break}}return"UNKNOWN"===u&&"UNKNOWN"!==r&&(console.warn('FileType of Image not recognized. Processing image as "'+r+'".'),u=r),u},s=function t(e){for(var n=this.internal.newObject(),r=this.internal.write,i=this.internal.putStream,s=(0,this.internal.getFilters)();-1!==s.indexOf("FlateEncode");)s.splice(s.indexOf("FlateEncode"),1);e.n=n;var o=[];if(o.push({key:"Type",value:"/XObject"}),o.push({key:"Subtype",value:"/Image"}),o.push({key:"Width",value:e.w}),o.push({key:"Height",value:e.h}),e.cs===this.color_spaces.INDEXED?o.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(e.pal.length/3-1)+" "+("smask"in e?n+2:n+1)+" 0 R]"}):(o.push({key:"ColorSpace",value:"/"+e.cs}),e.cs===this.color_spaces.DEVICE_CMYK&&o.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),o.push({key:"BitsPerComponent",value:e.bpc}),"dp"in e&&o.push({key:"DecodeParms",value:"<<"+e.dp+">>"}),"trns"in e&&e.trns.constructor==Array){for(var a="",l=0,u=e.trns.length;l<u;l++)a+=e.trns[l]+" "+e.trns[l]+" ";o.push({key:"Mask",value:"["+a+"]"})}if("smask"in e&&o.push({key:"SMask",value:n+1+" 0 R"}),i({data:e.data,additionalKeyValues:o,alreadyAppliedFilters:void 0!==e.f?["/"+e.f]:void 0}),r("endobj"),"smask"in e){var c={w:e.w,h:e.h,cs:"DeviceGray",bpc:e.bpc,dp:"/Predictor "+e.p+" /Colors 1 /BitsPerComponent "+e.bpc+" /Columns "+e.w,data:e.smask};"f"in e&&(c.f=e.f),t.call(this,c)}e.cs===this.color_spaces.INDEXED&&(this.internal.newObject(),i({data:this.arrayBufferToBinaryString(new Uint8Array(e.pal))}),r("endobj"))},o=function(){var t=this.internal.collections[e+"images"];for(var n in t)s.call(this,t[n])},a=function(){var t,n=this.internal.collections[e+"images"],r=this.internal.write;for(var i in n)r("/I"+(t=n[i]).i,t.n,"0","R")},l=function(e){return"function"==typeof t["process"+e.toUpperCase()]},u=function(t){return"object"===r(t)&&1===t.nodeType},c=function(e,n){if("IMG"===e.nodeName&&e.hasAttribute("src")){var r=""+e.getAttribute("src");if(0===r.indexOf("data:image/"))return unescape(r);var i=t.loadFile(r);if(void 0!==i)return btoa(i)}if("CANVAS"===e.nodeName){var s=e;return e.toDataURL("image/jpeg",1)}(s=document.createElement("canvas")).width=e.clientWidth||e.width,s.height=e.clientHeight||e.height;var o=s.getContext("2d");if(!o)throw"addImage requires canvas to be supported by browser.";return o.drawImage(e,0,0,s.width,s.height),s.toDataURL("png"==(""+n).toLowerCase()?"image/png":"image/jpeg")},h=function(t,e){var n;if(e)for(var r in e)if(t===e[r].alias){n=e[r];break}return n};t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"},t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"},t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},t.sHashCode=function(t){var e,n=0;if(0===(t=t||"").length)return n;for(e=0;e<t.length;e++)n=(n<<5)-n+t.charCodeAt(e),n|=0;return n},t.isString=function(t){return"string"==typeof t},t.validateStringAsBase64=function(t){(t=t||"").toString().trim();var e=!0;return 0===t.length&&(e=!1),t.length%4!=0&&(e=!1),!1===/^[A-Za-z0-9+\/]+$/.test(t.substr(0,t.length-2))&&(e=!1),!1===/^[A-Za-z0-9\/][A-Za-z0-9+\/]|[A-Za-z0-9+\/]=|==$/.test(t.substr(-2))&&(e=!1),e},t.extractInfoFromBase64DataURI=function(t){return/^data:([\w]+?\/([\w]+?));\S*;*base64,(.+)$/g.exec(t)},t.extractImageFromDataUrl=function(t){var e=(t=t||"").split("base64,"),n=null;if(2===e.length){var r=/^data:(\w*\/\w*);*(charset=[\w=-]*)*;*$/.exec(e[0]);Array.isArray(r)&&(n={mimeType:r[1],charset:r[2],data:e[1]})}return n},t.supportsArrayBuffer=function(){return"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array},t.isArrayBuffer=function(t){return!!this.supportsArrayBuffer()&&t instanceof ArrayBuffer},t.isArrayBufferView=function(t){return!!this.supportsArrayBuffer()&&"undefined"!=typeof Uint32Array&&(t instanceof Int8Array||t instanceof Uint8Array||"undefined"!=typeof Uint8ClampedArray&&t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array)},t.binaryStringToUint8Array=function(t){for(var e=t.length,n=new Uint8Array(e),r=0;r<e;r++)n[r]=t.charCodeAt(r);return n},t.arrayBufferToBinaryString=function(t){if("function"==typeof atob)return atob(this.arrayBufferToBase64(t))},t.arrayBufferToBase64=function(t){for(var e,n="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=new Uint8Array(t),s=i.byteLength,o=s%3,a=s-o,l=0;l<a;l+=3)n+=r[(16515072&(e=i[l]<<16|i[l+1]<<8|i[l+2]))>>18]+r[(258048&e)>>12]+r[(4032&e)>>6]+r[63&e];return 1==o?n+=r[(252&(e=i[a]))>>2]+r[(3&e)<<4]+"==":2==o&&(n+=r[(64512&(e=i[a]<<8|i[a+1]))>>10]+r[(1008&e)>>4]+r[(15&e)<<2]+"="),n},t.createImageInfo=function(t,e,n,r,i,s,o,a,l,u,c,h,d){var p={alias:a,w:e,h:n,cs:r,bpc:i,i:o,data:t};return s&&(p.f=s),l&&(p.dp=l),u&&(p.trns=u),c&&(p.pal=c),h&&(p.smask=h),d&&(p.p=d),p},t.addImage=function(n,i,s,d,p,f,A,m,g){var y="";if("string"!=typeof i){var w=f;f=p,p=d,d=s,s=i,i=w}if("object"===r(n)&&!u(n)&&"imageData"in n){var b=n;n=b.imageData,i=b.format||i||"UNKNOWN",s=b.x||s||0,d=b.y||d||0,p=b.w||p,f=b.h||f,A=b.alias||A,m=b.compression||m,g=b.rotation||b.angle||g}var v=this.internal.getFilters();if(void 0===m&&-1!==v.indexOf("FlateEncode")&&(m="SLOW"),"string"==typeof n&&(n=unescape(n)),isNaN(s)||isNaN(d))throw console.error("jsPDF.addImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addImage");var x,_,C,S,E,B,k,N=(function(){var t=this.internal.collections[e+"images"];return t||(this.internal.collections[e+"images"]=t={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",a)),t}).call(this);if(!((x=h(n,N))||(u(n)&&(n=c(n,i)),(null==(k=A)||0===k.length)&&(A="string"==typeof(B=n)?t.sHashCode(B):t.isArrayBufferView(B)?t.sHashCode(t.arrayBufferToBinaryString(B)):null),x=h(A,N)))){if(this.isString(n)&&(""!==(y=this.convertStringToImageData(n))||void 0!==(y=t.loadFile(n)))&&(n=y),i=this.getImageFileTypeByImageData(n,i),!l(i))throw new Error("addImage does not support files of type '"+i+"', please ensure that a plugin for '"+i+"' support is added.");if(this.supportsArrayBuffer()&&(n instanceof Uint8Array||(_=n,n=this.binaryStringToUint8Array(n))),!(x=this["process"+i.toUpperCase()](n,(E=0,(S=N)&&(E=Object.keys?Object.keys(S).length:function(t){var e=0;for(var n in t)t.hasOwnProperty(n)&&e++;return e}(S)),E),A,((C=m)&&"string"==typeof C&&(C=C.toUpperCase()),C in t.image_compression?C:t.image_compression.NONE),_)))throw new Error("An unknown error occurred whilst processing the image")}return(function(t,e,n,r,i,s,o,a){var l=(function(t,e,n){return t||e||(e=t=-96),t<0&&(t=-1*n.w*72/t/this.internal.scaleFactor),e<0&&(e=-1*n.h*72/e/this.internal.scaleFactor),0===t&&(t=e*n.w/n.h),0===e&&(e=t*n.h/n.w),[t,e]}).call(this,n,r,i),u=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;if(n=l[0],r=l[1],o[s]=i,a){a*=Math.PI/180;var h=Math.cos(a),d=Math.sin(a),p=function(t){return t.toFixed(4)},f=[p(h),p(d),p(-1*d),p(h),0,0,"cm"]}this.internal.write("q"),a?(this.internal.write([1,"0","0",1,u(t),c(e+r),"cm"].join(" ")),this.internal.write(f.join(" ")),this.internal.write([u(n),"0","0",u(r),"0","0","cm"].join(" "))):this.internal.write([u(n),"0","0",u(r),u(t),c(e+r),"cm"].join(" ")),this.internal.write("/I"+i.i+" Do"),this.internal.write("Q")}).call(this,s,d,p,f,x,x.i,N,g),this},t.convertStringToImageData=function(e){var n,r="";if(this.isString(e)){var i;n=null!==(i=this.extractImageFromDataUrl(e))?i.data:e;try{r=atob(n)}catch(e){throw t.validateStringAsBase64(n)?new Error("atob-Error in jsPDF.convertStringToImageData "+e.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertStringToImageData ")}}return r};var d=function(t,e){return t.subarray(e,e+5)};t.processJPEG=function(t,e,n,r,s,o){var a,l=this.decode.DCT_DECODE;if(!this.isString(t)&&!this.isArrayBuffer(t)&&!this.isArrayBufferView(t))return null;if(this.isString(t)&&(a=function(t){var e;if("JPEG"!==i(t))throw new Error("getJpegSize requires a binary string jpeg file");for(var n=256*t.charCodeAt(4)+t.charCodeAt(5),r=4,s=t.length;r<s;){if(255!==t.charCodeAt(r+=n))throw new Error("getJpegSize could not find the size of the image");if(192===t.charCodeAt(r+1)||193===t.charCodeAt(r+1)||194===t.charCodeAt(r+1)||195===t.charCodeAt(r+1)||196===t.charCodeAt(r+1)||197===t.charCodeAt(r+1)||198===t.charCodeAt(r+1)||199===t.charCodeAt(r+1))return e=256*t.charCodeAt(r+5)+t.charCodeAt(r+6),[256*t.charCodeAt(r+7)+t.charCodeAt(r+8),e,t.charCodeAt(r+9)];n=256*t.charCodeAt(r+=2)+t.charCodeAt(r+1)}}(t)),this.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.isArrayBufferView(t)&&(a=function(t){if(65496!=(t[0]<<8|t[1]))throw new Error("Supplied data is not a JPEG");for(var e,n=t.length,r=(t[4]<<8)+t[5],i=4;i<n;){if(r=((e=d(t,i+=r))[2]<<8)+e[3],(192===e[1]||194===e[1])&&255===e[0]&&7<r)return{width:((e=d(t,i+5))[2]<<8)+e[3],height:(e[0]<<8)+e[1],numcomponents:e[4]};i+=2}throw new Error("getJpegSizeFromBytes could not find the size of the image")}(t),t=s||this.arrayBufferToBinaryString(t)),void 0===o)switch(a.numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;default:case 3:o=this.color_spaces.DEVICE_RGB}return this.createImageInfo(t,a.width,a.height,o,8,l,e,n)},t.processJPG=function(){return this.processJPEG.apply(this,arguments)},t.getImageProperties=function(e){var n,r,i="";if(u(e)&&(e=c(e)),this.isString(e)&&(""!==(i=this.convertStringToImageData(e))||void 0!==(i=t.loadFile(e)))&&(e=i),r=this.getImageFileTypeByImageData(e),!l(r))throw new Error("addImage does not support files of type '"+r+"', please ensure that a plugin for '"+r+"' support is added.");if(this.supportsArrayBuffer()&&(e instanceof Uint8Array||(e=this.binaryStringToUint8Array(e))),!(n=this["process"+r.toUpperCase()](e)))throw new Error("An unknown error occurred whilst processing the image");return{fileType:r,width:n.w,height:n.h,colorSpace:n.cs,compressionMode:n.f,bitsPerComponent:n.bpc}}}(dt.API),s=dt.API,dt.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),s.events.push(["putPage",function(t){for(var e=this.internal.getPageInfoByObjId(t.objId),n=t.pageContext.annotations,r=function(t){if(void 0!==t&&""!=t)return!0},i=!1,s=0;s<n.length&&!i;s++)switch((l=n[s]).type){case"link":if(r(l.options.url)||r(l.options.pageNumber)){i=!0;break}case"reference":case"text":case"freetext":i=!0}if(0!=i){this.internal.write("/Annots [");var o=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString;for(s=0;s<n.length;s++){var l;switch((l=n[s]).type){case"reference":this.internal.write(" "+l.object.objId+" 0 R ");break;case"text":var u=this.internal.newAdditionalObject(),c=this.internal.newAdditionalObject(),h=l.title||"Note";A="<</Type /Annot /Subtype /Text "+(p="/Rect ["+o(l.bounds.x)+" "+a(l.bounds.y+l.bounds.h)+" "+o(l.bounds.x+l.bounds.w)+" "+a(l.bounds.y)+"] ")+"/Contents ("+l.contents+")",A+=" /Popup "+c.objId+" 0 R",A+=" /P "+e.objId+" 0 R",u.content=A+=" /T ("+h+") >>";var d=u.objId+" 0 R";A="<</Type /Annot /Subtype /Popup "+(p="/Rect ["+o(l.bounds.x+30)+" "+a(l.bounds.y+l.bounds.h)+" "+o(l.bounds.x+l.bounds.w+30)+" "+a(l.bounds.y)+"] ")+" /Parent "+d,l.open&&(A+=" /Open true"),c.content=A+=" >>",this.internal.write(u.objId,"0 R",c.objId,"0 R");break;case"freetext":var p="/Rect ["+o(l.bounds.x)+" "+a(l.bounds.y)+" "+o(l.bounds.x+l.bounds.w)+" "+a(l.bounds.y+l.bounds.h)+"] ";A="<</Type /Annot /Subtype /FreeText "+p+"/Contents ("+l.contents+")",A+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+(l.color||"#000000")+")",A+=" /Border [0 0 0]",this.internal.write(A+=" >>");break;case"link":if(l.options.name){var f=this.annotations._nameMap[l.options.name];l.options.pageNumber=f.page,l.options.top=f.y}else l.options.top||(l.options.top=0);p="/Rect ["+o(l.x)+" "+a(l.y)+" "+o(l.x+l.w)+" "+a(l.y+l.h)+"] ";var A="";if(l.options.url)A="<</Type /Annot /Subtype /Link "+p+"/Border [0 0 0] /A <</S /URI /URI ("+l.options.url+") >>";else if(l.options.pageNumber)switch(A="<</Type /Annot /Subtype /Link "+p+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(l.options.pageNumber).objId+" 0 R",l.options.magFactor=l.options.magFactor||"XYZ",l.options.magFactor){case"Fit":A+=" /Fit]";break;case"FitH":A+=" /FitH "+l.options.top+"]";break;case"FitV":l.options.left=l.options.left||0,A+=" /FitV "+l.options.left+"]";break;case"XYZ":default:var m=a(l.options.top);l.options.left=l.options.left||0,void 0===l.options.zoom&&(l.options.zoom=0),A+=" /XYZ "+l.options.left+" "+m+" "+l.options.zoom+"]"}""!=A&&this.internal.write(A+=" >>")}}this.internal.write("]")}}]),s.createAnnotation=function(t){var e=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":e.pageContext.annotations.push(t)}},s.link=function(t,e,n,r,i){this.internal.getCurrentPageInfo().pageContext.annotations.push({x:t,y:e,w:n,h:r,options:i,type:"link"})},s.textWithLink=function(t,e,n,r){var i=this.getTextWidth(t),s=this.internal.getLineHeight()/this.internal.scaleFactor;return this.text(t,e,n),this.link(e,(n+=.2*s)-s,i,s,r),i},s.getTextWidth=function(t){var e=this.internal.getFontSize();return this.getStringUnitWidth(t)*e/this.internal.scaleFactor},function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(t){return void 0!==e[t.charCodeAt(0)]},o=t.__arabicParser__.isArabicLetter=function(t){return"string"==typeof t&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(t)},a=t.__arabicParser__.isArabicEndLetter=function(t){return o(t)&&s(t)&&e[t.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(t){return o(t)&&0<=i.indexOf(t.charCodeAt(0))},u=(t.__arabicParser__.arabicLetterHasIsolatedForm=function(t){return o(t)&&s(t)&&1<=e[t.charCodeAt(0)].length},t.__arabicParser__.arabicLetterHasFinalForm=function(t){return o(t)&&s(t)&&2<=e[t.charCodeAt(0)].length}),c=(t.__arabicParser__.arabicLetterHasInitialForm=function(t){return o(t)&&s(t)&&3<=e[t.charCodeAt(0)].length},t.__arabicParser__.arabicLetterHasMedialForm=function(t){return o(t)&&s(t)&&4==e[t.charCodeAt(0)].length}),h=t.__arabicParser__.resolveLigatures=function(t){var e=0,r=n,i=0,s="",o=0;for(e=0;e<t.length;e+=1)void 0!==r[t.charCodeAt(e)]?(o++,"number"==typeof(r=r[t.charCodeAt(e)])&&(i=-1!==(i=d(t.charAt(e),t.charAt(e-o),t.charAt(e+1)))?i:0,s+=String.fromCharCode(r),r=n,o=0),e===t.length-1&&(r=n,s+=t.charAt(e-(o-1)),e-=o-1,o=0)):(r=n,s+=t.charAt(e-o),e-=o,o=0);return s},d=(t.__arabicParser__.isArabicDiacritic=function(t){return void 0!==t&&void 0!==r[t.charCodeAt(0)]},t.__arabicParser__.getCorrectForm=function(t,e,n){return o(t)?!1===s(t)?-1:!u(t)||!o(e)&&!o(n)||!o(n)&&a(e)||a(t)&&!o(e)||a(t)&&l(e)||a(t)&&a(e)?0:c(t)&&o(e)&&!a(e)&&o(n)&&u(n)?3:a(t)||!o(n)?1:2:-1}),p=t.__arabicParser__.processArabic=t.processArabic=function(t){var n=0,r=0,i=0,s="",a="",l="",u=(t=t||"").split("\\s+"),c=[];for(n=0;n<u.length;n+=1){for(c.push(""),r=0;r<u[n].length;r+=1)a=u[n][r-1],l=u[n][r+1],o(s=u[n][r])?(i=d(s,a,l),c[n]+=-1!==i?String.fromCharCode(e[s.charCodeAt(0)][i]):s):c[n]+=s;c[n]=h(c[n])}return c.join(" ")};t.events.push(["preProcessText",function(t){var e=t.text,n=[];if("[object Array]"===Object.prototype.toString.call(e)){var r=0;for(n=[],r=0;r<e.length;r+=1)"[object Array]"===Object.prototype.toString.call(e[r])?n.push([p(e[r][0]),e[r][1],e[r][2]]):n.push([p(e[r])]);t.text=n}else t.text=p(e)}])}(dt.API),dt.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",(function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){this.internal.out("/OpenAction "+e+" 0 R")}))}return this},o=dt.API,(a=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(e){t=e}});var e=150;Object.defineProperty(this,"width",{get:function(){return e},set:function(t){e=isNaN(t)||!1===Number.isInteger(t)||t<0?150:t,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=e+1)}});var n=300;Object.defineProperty(this,"height",{get:function(){return n},set:function(t){n=isNaN(t)||!1===Number.isInteger(t)||t<0?300:t,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=n+1)}});var r=[];Object.defineProperty(this,"childNodes",{get:function(){return r},set:function(t){r=t}});var i={};Object.defineProperty(this,"style",{get:function(){return i},set:function(t){i=t}}),Object.defineProperty(this,"parentNode",{get:function(){return!1}})}).prototype.getContext=function(t,e){var n;if("2d"!==(t=t||"2d"))return null;for(n in e)this.pdf.context2d.hasOwnProperty(n)&&(this.pdf.context2d[n]=e[n]);return(this.pdf.context2d._canvas=this).pdf.context2d},a.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},o.events.push(["initialized",function(){this.canvas=new a,this.canvas.pdf=this}]),c={x:void 0,y:void 0,w:void 0,h:void 0,ln:void 0},h=1,d=function(t,e,n,r,i){c={x:t,y:e,w:n,h:r,ln:i}},p=function(){return c},f={left:0,top:0,bottom:0},(l=dt.API).setHeaderFunction=function(t){u=t},l.getTextDimensions=function(t,e){var n=this.table_font_size||this.internal.getFontSize(),r=(this.internal.getFont(),(e=e||{}).scaleFactor||this.internal.scaleFactor),i=0,s=0,o=0;if("string"==typeof t)0!=(i=this.getStringUnitWidth(t)*n)&&(s=1);else{if("[object Array]"!==Object.prototype.toString.call(t))throw new Error("getTextDimensions expects text-parameter to be of type String or an Array of Strings.");for(var a=0;a<t.length;a++)i<(o=this.getStringUnitWidth(t[a])*n)&&(i=o);0!==i&&(s=t.length)}return{w:i/=r,h:Math.max((s*n*this.getLineHeightFactor()-n*(this.getLineHeightFactor()-1))/r,0)}},l.cellAddPage=function(){var t=this.margins||f;this.addPage(),d(t.left,t.top,void 0,void 0),h+=1},l.cellInitialize=function(){c={x:void 0,y:void 0,w:void 0,h:void 0,ln:void 0},h=1},l.cell=function(t,e,n,r,i,s,o){var a=p(),l=!1;if(void 0!==a.ln)if(a.ln===s)t=a.x+a.w,e=a.y;else{var u=this.margins||f;a.y+a.h+r+13>=this.internal.pageSize.getHeight()-u.bottom&&(this.cellAddPage(),l=!0,this.printHeaders&&this.tableHeaderRow&&this.printHeaderRow(s,!0)),e=p().y+p().h,l&&(e=23)}if(void 0!==i[0])if(this.printingHeaderRow?this.rect(t,e,n,r,"FD"):this.rect(t,e,n,r),"right"===o){i instanceof Array||(i=[i]);for(var c=0;c<i.length;c++){var h=i[c],A=this.getStringUnitWidth(h)*this.internal.getFontSize()/this.internal.scaleFactor;this.text(h,t+n-A-3,e+this.internal.getLineHeight()*(c+1))}}else this.text(i,t+3,e+this.internal.getLineHeight());return d(t,e,n,r,s),this},l.arrayMax=function(t,e){var n,r,i,s=t[0];for(n=0,r=t.length;n<r;n+=1)i=t[n],e?-1===e(s,i)&&(s=i):s<i&&(s=i);return s},l.table=function(t,e,n,r,i){if(!n)throw"No data for PDF table";var s,o,a,u,d,p,A,m,g,y=[],w=[],b={},v={},x=[],_=[],C=!1,S=!0,E=12,B=f;if(B.width=this.internal.pageSize.getWidth(),i&&(!0===i.autoSize&&(C=!0),!1===i.printHeaders&&(S=!1),i.fontSize&&(E=i.fontSize),i.css&&void 0!==i.css["font-size"]&&(E=16*i.css["font-size"]),i.margins&&(B=i.margins)),this.lnMod=0,c={x:void 0,y:void 0,w:void 0,h:void 0,ln:void 0},h=1,this.printHeaders=S,this.margins=B,this.setFontSize(E),this.table_font_size=E,null==r)y=Object.keys(n[0]);else if(r[0]&&"string"!=typeof r[0])for(o=0,a=r.length;o<a;o+=1)y.push((s=r[o]).name),w.push(s.prompt),v[s.name]=s.width*(19.049976/25.4);else y=r;if(C)for(g=function(t){return t[s]},o=0,a=y.length;o<a;o+=1){for(b[s=y[o]]=n.map(g),x.push(this.getTextDimensions(w[o]||s,{scaleFactor:1}).w),p=0,u=(d=b[s]).length;p<u;p+=1)x.push(this.getTextDimensions(d[p],{scaleFactor:1}).w);v[s]=l.arrayMax(x),x=[]}if(S){var k=this.calculateLineHeight(y,v,w.length?w:y);for(o=0,a=y.length;o<a;o+=1)_.push([t,e,v[s=y[o]],k,String(w.length?w[o]:s)]);this.setTableHeaderRow(_),this.printHeaderRow(1,!1)}for(o=0,a=n.length;o<a;o+=1)for(k=this.calculateLineHeight(y,v,A=n[o]),p=0,m=y.length;p<m;p+=1)this.cell(t,e,v[s=y[p]],k,A[s],o+2,s.align);return this.lastCellPos=c,this.table_x=t,this.table_y=e,this},l.calculateLineHeight=function(t,e,n){for(var r,i=0,s=0;s<t.length;s++){n[r=t[s]]=this.splitTextToSize(String(n[r]),e[r]-3);var o=this.internal.getLineHeight()*n[r].length+3;i<o&&(i=o)}return i},l.setTableHeaderRow=function(t){this.tableHeaderRow=t},l.printHeaderRow=function(t,e){if(!this.tableHeaderRow)throw"Property tableHeaderRow does not exist.";var n,r,i,s;if(this.printingHeaderRow=!0,void 0!==u){var o=u(this,h);d(o[0],o[1],o[2],o[3],-1)}this.setFontStyle("bold");var a=[];for(i=0,s=this.tableHeaderRow.length;i<s;i+=1)this.setFillColor(200,200,200),n=this.tableHeaderRow[i],e&&(this.margins.top=13,n[1]=this.margins&&this.margins.top||0,a.push(n)),r=[].concat(n),this.cell.apply(this,r.concat(t));0<a.length&&this.setTableHeaderRow(a),this.setFontStyle("normal"),this.printingHeaderRow=!1},function(t,e){var n,i,s,o,a,l=function(t){return this.isStrokeTransparent=(t=t||{}).isStrokeTransparent||!1,this.strokeOpacity=t.strokeOpacity||1,this.strokeStyle=t.strokeStyle||"#000000",this.fillStyle=t.fillStyle||"#000000",this.isFillTransparent=t.isFillTransparent||!1,this.fillOpacity=t.fillOpacity||1,this.font=t.font||"10px sans-serif",this.textBaseline=t.textBaseline||"alphabetic",this.textAlign=t.textAlign||"left",this.lineWidth=t.lineWidth||1,this.lineJoin=t.lineJoin||"miter",this.lineCap=t.lineCap||"butt",this.path=t.path||[],this.transform=void 0!==t.transform?t.transform.clone():new D,this.globalCompositeOperation=t.globalCompositeOperation||"normal",this.globalAlpha=t.globalAlpha||1,this.clip_path=t.clip_path||[],this.currentPoint=t.currentPoint||new R,this.miterLimit=t.miterLimit||10,this.lastPoint=t.lastPoint||new R,this.ignoreClearRect="boolean"!=typeof t.ignoreClearRect||t.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new u(this),n=this.internal.f2,i=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,o=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate}]);var u=function(t){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}}),Object.defineProperty(this,"pdf",{get:function(){return t}});var e=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return e},set:function(t){e=Boolean(t)}});var n=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return n},set:function(t){n=Boolean(t)}});var r=0;Object.defineProperty(this,"posX",{get:function(){return r},set:function(t){isNaN(t)||(r=t)}});var i=0;Object.defineProperty(this,"posY",{get:function(){return i},set:function(t){isNaN(t)||(i=t)}});var s=!1;Object.defineProperty(this,"autoPaging",{get:function(){return s},set:function(t){s=Boolean(t)}});var o=0;Object.defineProperty(this,"lastBreak",{get:function(){return o},set:function(t){o=t}});var a=[];Object.defineProperty(this,"pageBreaks",{get:function(){return a},set:function(t){a=t}});var u=new l;Object.defineProperty(this,"ctx",{get:function(){return u},set:function(t){t instanceof l&&(u=t)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(t){u.path=t}});var h=[];Object.defineProperty(this,"ctxStack",{get:function(){return h},set:function(t){h=t}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(t){var e;e=c(t),this.ctx.fillStyle=e.style,this.ctx.isFillTransparent=0===e.a,this.ctx.fillOpacity=e.a,this.pdf.setFillColor(e.r,e.g,e.b,{a:e.a}),this.pdf.setTextColor(e.r,e.g,e.b,{a:e.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(t){var e=c(t);this.ctx.strokeStyle=e.style,this.ctx.isStrokeTransparent=0===e.a,this.ctx.strokeOpacity=e.a,0===e.a?this.pdf.setDrawColor(255,255,255):this.pdf.setDrawColor(e.r,e.g,e.b)}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(t){-1!==["butt","round","square"].indexOf(t)&&(this.ctx.lineCap=t,this.pdf.setLineCap(t))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(t){isNaN(t)||(this.ctx.lineWidth=t,this.pdf.setLineWidth(t))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(t){-1!==["bevel","round","miter"].indexOf(t)&&(this.ctx.lineJoin=t,this.pdf.setLineJoin(t))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(t){isNaN(t)||(this.ctx.miterLimit=t,this.pdf.setMiterLimit(t))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(t){this.ctx.textBaseline=t}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(t){-1!==["right","end","center","left","start"].indexOf(t)&&(this.ctx.textAlign=t)}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(t){var e;if(this.ctx.font=t,null!==(e=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(t))){var n=e[1],r=e[3],i=e[4],s=e[5],o=e[6];i="px"===s?Math.floor(parseFloat(i)):"em"===s?Math.floor(parseFloat(i)*this.pdf.getFontSize()):Math.floor(parseFloat(i)),this.pdf.setFontSize(i);var a="";("bold"===r||700<=parseInt(r,10)||"bold"===n)&&(a="bold"),"italic"===n&&(a+="italic"),0===a.length&&(a="normal");for(var l="",u=o.toLowerCase().replace(/"|'/g,"").split(/\s*,\s*/),c={arial:"Helvetica",verdana:"Helvetica",helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",courier:"Courier",times:"Times",cursive:"Times",fantasy:"Times",serif:"Times"},h=0;h<u.length;h++){if(void 0!==this.pdf.internal.getFont(u[h],a,{noFallback:!0,disableWarning:!0})){l=u[h];break}if("bolditalic"===a&&void 0!==this.pdf.internal.getFont(u[h],"bold",{noFallback:!0,disableWarning:!0}))l=u[h],a="bold";else if(void 0!==this.pdf.internal.getFont(u[h],"normal",{noFallback:!0,disableWarning:!0})){l=u[h],a="normal";break}}if(""===l)for(h=0;h<u.length;h++)if(c[u[h]]){l=c[u[h]];break}this.pdf.setFont(l=""===l?"Times":l,a)}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(t){this.ctx.globalCompositeOperation=t}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(t){this.ctx.globalAlpha=t}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(t){this.ctx.ignoreClearRect=Boolean(t)}})};u.prototype.fill=function(){m.call(this,"fill",!1)},u.prototype.stroke=function(){m.call(this,"stroke",!1)},u.prototype.beginPath=function(){this.path=[{type:"begin"}]},u.prototype.moveTo=function(t,e){if(isNaN(t)||isNaN(e))throw console.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var n=this.ctx.transform.applyToPoint(new R(t,e));this.path.push({type:"mt",x:n.x,y:n.y}),this.ctx.lastPoint=new R(t,e)},u.prototype.closePath=function(){var t=new R(0,0),e=0;for(e=this.path.length-1;-1!==e;e--)if("begin"===this.path[e].type&&"object"===r(this.path[e+1])&&"number"==typeof this.path[e+1].x){t=new R(this.path[e+1].x,this.path[e+1].y),this.path.push({type:"lt",x:t.x,y:t.y});break}"object"===r(this.path[e+2])&&"number"==typeof this.path[e+2].x&&this.path.push(JSON.parse(JSON.stringify(this.path[e+2]))),this.path.push({type:"close"}),this.ctx.lastPoint=new R(t.x,t.y)},u.prototype.lineTo=function(t,e){if(isNaN(t)||isNaN(e))throw console.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var n=this.ctx.transform.applyToPoint(new R(t,e));this.path.push({type:"lt",x:n.x,y:n.y}),this.ctx.lastPoint=new R(n.x,n.y)},u.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),m.call(this,null,!0)},u.prototype.quadraticCurveTo=function(t,e,n,r){if(isNaN(n)||isNaN(r)||isNaN(t)||isNaN(e))throw console.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var i=this.ctx.transform.applyToPoint(new R(n,r)),s=this.ctx.transform.applyToPoint(new R(t,e));this.path.push({type:"qct",x1:s.x,y1:s.y,x:i.x,y:i.y}),this.ctx.lastPoint=new R(i.x,i.y)},u.prototype.bezierCurveTo=function(t,e,n,r,i,s){if(isNaN(i)||isNaN(s)||isNaN(t)||isNaN(e)||isNaN(n)||isNaN(r))throw console.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var o=this.ctx.transform.applyToPoint(new R(i,s)),a=this.ctx.transform.applyToPoint(new R(t,e)),l=this.ctx.transform.applyToPoint(new R(n,r));this.path.push({type:"bct",x1:a.x,y1:a.y,x2:l.x,y2:l.y,x:o.x,y:o.y}),this.ctx.lastPoint=new R(o.x,o.y)},u.prototype.arc=function(t,e,n,r,i,s){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(r)||isNaN(i))throw console.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(s=Boolean(s),!this.ctx.transform.isIdentity){var o=this.ctx.transform.applyToPoint(new R(t,e));t=o.x,e=o.y;var a=this.ctx.transform.applyToPoint(new R(0,n)),l=this.ctx.transform.applyToPoint(new R(0,0));n=Math.sqrt(Math.pow(a.x-l.x,2)+Math.pow(a.y-l.y,2))}Math.abs(i-r)>=2*Math.PI&&(r=0,i=2*Math.PI),this.path.push({type:"arc",x:t,y:e,radius:n,startAngle:r,endAngle:i,counterclockwise:s})},u.prototype.arcTo=function(t,e,n,r,i){throw new Error("arcTo not implemented.")},u.prototype.rect=function(t,e,n,r){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(r))throw console.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(t,e),this.lineTo(t+n,e),this.lineTo(t+n,e+r),this.lineTo(t,e+r),this.lineTo(t,e),this.lineTo(t+n,e),this.lineTo(t,e)},u.prototype.fillRect=function(t,e,n,r){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(r))throw console.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!h.call(this)){var i={};"butt"!==this.lineCap&&(i.lineCap=this.lineCap,this.lineCap="butt"),"miter"!==this.lineJoin&&(i.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(t,e,n,r),this.fill(),i.hasOwnProperty("lineCap")&&(this.lineCap=i.lineCap),i.hasOwnProperty("lineJoin")&&(this.lineJoin=i.lineJoin)}},u.prototype.strokeRect=function(t,e,n,r){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(r))throw console.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");d.call(this)||(this.beginPath(),this.rect(t,e,n,r),this.stroke())},u.prototype.clearRect=function(t,e,n,r){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(r))throw console.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(t,e,n,r))},u.prototype.save=function(t){t="boolean"!=typeof t||t;for(var e=this.pdf.internal.getCurrentPageInfo().pageNumber,n=0;n<this.pdf.internal.getNumberOfPages();n++)this.pdf.setPage(n+1),this.pdf.internal.out("q");if(this.pdf.setPage(e),t){this.ctx.fontSize=this.pdf.internal.getFontSize();var r=new l(this.ctx);this.ctxStack.push(this.ctx),this.ctx=r}},u.prototype.restore=function(t){t="boolean"!=typeof t||t;for(var e=this.pdf.internal.getCurrentPageInfo().pageNumber,n=0;n<this.pdf.internal.getNumberOfPages();n++)this.pdf.setPage(n+1),this.pdf.internal.out("Q");this.pdf.setPage(e),t&&0!==this.ctxStack.length&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin)},u.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var c=function(t){var e,n,r,i;if(!0===t.isCanvasGradient&&(t=t.getColor()),!t)return{r:0,g:0,b:0,a:0,style:t};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(t))i=r=n=e=0;else{var s=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(t);if(null!==s)e=parseInt(s[1]),n=parseInt(s[2]),r=parseInt(s[3]),i=1;else if(null!==(s=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d\.]+)\s*\)/.exec(t)))e=parseInt(s[1]),n=parseInt(s[2]),r=parseInt(s[3]),i=parseFloat(s[4]);else{if(i=1,"string"==typeof t&&"#"!==t.charAt(0)){var o=new RGBColor(t);t=o.ok?o.toHex():"#000000"}4===t.length?(e=t.substring(1,2),e+=e,n=t.substring(2,3),n+=n,r=t.substring(3,4),r+=r):(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7)),e=parseInt(e,16),n=parseInt(n,16),r=parseInt(r,16)}}return{r:e,g:n,b:r,a:i,style:t}},h=function(){return this.ctx.isFillTransparent||0==this.globalAlpha},d=function(){return Boolean(this.ctx.isStrokeTransparent||0==this.globalAlpha)};u.prototype.fillText=function(t,e,n,r){if(isNaN(e)||isNaN(n)||"string"!=typeof t)throw console.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(r=isNaN(r)?void 0:r,!h.call(this)){n=y.call(this,n);var i=N(this.ctx.transform.rotation),s=this.ctx.transform.scaleX;_.call(this,{text:t,x:e,y:n,scale:s,angle:i,align:this.textAlign,maxWidth:r})}},u.prototype.strokeText=function(t,e,n,r){if(isNaN(e)||isNaN(n)||"string"!=typeof t)throw console.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!d.call(this)){r=isNaN(r)?void 0:r,n=y.call(this,n);var i=N(this.ctx.transform.rotation),s=this.ctx.transform.scaleX;_.call(this,{text:t,x:e,y:n,scale:s,renderingMode:"stroke",angle:i,align:this.textAlign,maxWidth:r})}},u.prototype.measureText=function(t){if("string"!=typeof t)throw console.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var e=this.pdf,n=this.pdf.internal.scaleFactor,r=e.internal.getFontSize(),i=e.getStringUnitWidth(t)*r/e.internal.scaleFactor;return new function(t){var e=(t=t||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return e}}),this}({width:i*=Math.round(96*n/72*1e4)/1e4})},u.prototype.scale=function(t,e){if(isNaN(t)||isNaN(e))throw console.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var n=new D(t,0,0,e,0,0);this.ctx.transform=this.ctx.transform.multiply(n)},u.prototype.rotate=function(t){if(isNaN(t))throw console.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var e=new D(Math.cos(t),Math.sin(t),-Math.sin(t),Math.cos(t),0,0);this.ctx.transform=this.ctx.transform.multiply(e)},u.prototype.translate=function(t,e){if(isNaN(t)||isNaN(e))throw console.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var n=new D(1,0,0,1,t,e);this.ctx.transform=this.ctx.transform.multiply(n)},u.prototype.transform=function(t,e,n,r,i,s){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(r)||isNaN(i)||isNaN(s))throw console.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var o=new D(t,e,n,r,i,s);this.ctx.transform=this.ctx.transform.multiply(o)},u.prototype.setTransform=function(t,e,n,r,i,s){t=isNaN(t)?1:t,e=isNaN(e)?0:e,n=isNaN(n)?0:n,r=isNaN(r)?1:r,i=isNaN(i)?0:i,s=isNaN(s)?0:s,this.ctx.transform=new D(t,e,n,r,i,s)},u.prototype.drawImage=function(t,e,n,r,i,s,o,a,l){var u=this.pdf.getImageProperties(t),c=1,h=1,d=1,f=1;void 0!==r&&void 0!==a&&(d=a/r,f=l/i,c=u.width/r*a/r,h=u.height/i*l/i),void 0===s&&(s=e,o=n,n=e=0),void 0!==r&&void 0===a&&(a=r,l=i),void 0===r&&void 0===a&&(a=u.width,l=u.height);for(var m,y=this.ctx.transform.decompose(),w=N(y.rotate.shx),b=new D,v=((b=(b=(b=b.multiply(y.translate)).multiply(y.skew)).multiply(y.scale)).applyToPoint(new R(a,l)),b.applyToRectangle(new O(s-e*d,o-n*f,r*c,i*h))),x=p.call(this,v),_=[],C=0;C<x.length;C+=1)-1===_.indexOf(x[C])&&_.push(x[C]);if(_.sort(),this.autoPaging)for(var S=_[_.length-1],E=_[0];E<S+1;E++){if(this.pdf.setPage(E),0!==this.ctx.clip_path.length){var B=this.path;m=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=A(m,this.posX,-1*this.pdf.internal.pageSize.height*(E-1)+this.posY),g.call(this,"fill",!0),this.path=B}var k=JSON.parse(JSON.stringify(v));k=A([k],this.posX,-1*this.pdf.internal.pageSize.height*(E-1)+this.posY)[0],this.pdf.addImage(t,"jpg",k.x,k.y,k.w,k.h,null,null,w)}else this.pdf.addImage(t,"jpg",v.x,v.y,v.w,v.h,null,null,w)};var p=function(t,e,n){var r=[];switch(e=e||this.pdf.internal.pageSize.width,n=n||this.pdf.internal.pageSize.height,t.type){default:case"mt":case"lt":r.push(Math.floor((t.y+this.posY)/n)+1);break;case"arc":r.push(Math.floor((t.y+this.posY-t.radius)/n)+1),r.push(Math.floor((t.y+this.posY+t.radius)/n)+1);break;case"qct":var i=F(this.ctx.lastPoint.x,this.ctx.lastPoint.y,t.x1,t.y1,t.x,t.y);r.push(Math.floor(i.y/n)+1),r.push(Math.floor((i.y+i.h)/n)+1);break;case"bct":var s=T(this.ctx.lastPoint.x,this.ctx.lastPoint.y,t.x1,t.y1,t.x2,t.y2,t.x,t.y);r.push(Math.floor(s.y/n)+1),r.push(Math.floor((s.y+s.h)/n)+1);break;case"rect":r.push(Math.floor((t.y+this.posY)/n)+1),r.push(Math.floor((t.y+t.h+this.posY)/n)+1)}for(var o=0;o<r.length;o+=1)for(;this.pdf.internal.getNumberOfPages()<r[o];)f.call(this);return r},f=function(){var t=this.fillStyle,e=this.strokeStyle,n=this.font,r=this.lineCap,i=this.lineWidth,s=this.lineJoin;this.pdf.addPage(),this.fillStyle=t,this.strokeStyle=e,this.font=n,this.lineCap=r,this.lineWidth=i,this.lineJoin=s},A=function(t,e,n){for(var r=0;r<t.length;r++)switch(t[r].type){case"bct":t[r].x2+=e,t[r].y2+=n;case"qct":t[r].x1+=e,t[r].y1+=n;case"mt":case"lt":case"arc":default:t[r].x+=e,t[r].y+=n}return t},m=function(t,e){for(var n,r,i=this.fillStyle,s=this.strokeStyle,o=this.lineCap,a=this.lineWidth,l=this.lineJoin,u=JSON.parse(JSON.stringify(this.path)),c=JSON.parse(JSON.stringify(this.path)),h=[],d=0;d<c.length;d++)if(void 0!==c[d].x)for(var m=p.call(this,c[d]),y=0;y<m.length;y+=1)-1===h.indexOf(m[y])&&h.push(m[y]);for(d=0;d<h.length;d++)for(;this.pdf.internal.getNumberOfPages()<h[d];)f.call(this);if(h.sort(),this.autoPaging){var w=h[h.length-1];for(d=h[0];d<w+1;d++){if(this.pdf.setPage(d),this.fillStyle=i,this.strokeStyle=s,this.lineCap=o,this.lineWidth=a,this.lineJoin=l,0!==this.ctx.clip_path.length){var b=this.path;n=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=A(n,this.posX,-1*this.pdf.internal.pageSize.height*(d-1)+this.posY),g.call(this,t,!0),this.path=b}r=JSON.parse(JSON.stringify(u)),this.path=A(r,this.posX,-1*this.pdf.internal.pageSize.height*(d-1)+this.posY),!1!==e&&0!==d||g.call(this,t,e)}}else g.call(this,t,e);this.path=u},g=function(t,e){if(("stroke"!==t||e||!d.call(this))&&("stroke"===t||e||!h.call(this))){for(var n,r=[],i=this.path,s=0;s<i.length;s++){var o=i[s];switch(o.type){case"begin":r.push({begin:!0});break;case"close":r.push({close:!0});break;case"mt":r.push({start:o,deltas:[],abs:[]});break;case"lt":var a=r.length;if(!isNaN(i[s-1].x)){var l=[o.x-i[s-1].x,o.y-i[s-1].y];if(0<a)for(;0<=a;a--)if(!0!==r[a-1].close&&!0!==r[a-1].begin){r[a-1].deltas.push(l),r[a-1].abs.push(o);break}}break;case"bct":r[r.length-1].deltas.push(l=[o.x1-i[s-1].x,o.y1-i[s-1].y,o.x2-i[s-1].x,o.y2-i[s-1].y,o.x-i[s-1].x,o.y-i[s-1].y]);break;case"qct":r[r.length-1].deltas.push(l=[i[s-1].x+2/3*(o.x1-i[s-1].x)-i[s-1].x,i[s-1].y+2/3*(o.y1-i[s-1].y)-i[s-1].y,o.x+2/3*(o.x1-o.x)-i[s-1].x,o.y+2/3*(o.y1-o.y)-i[s-1].y,o.x-i[s-1].x,o.y-i[s-1].y]);break;case"arc":r.push({deltas:[],abs:[],arc:!0}),Array.isArray(r[r.length-1].abs)&&r[r.length-1].abs.push(o)}}for(n=e?null:"stroke"===t?"stroke":"fill",s=0;s<r.length;s++){if(r[s].arc)for(var u=r[s].abs,c=0;c<u.length;c++){var p=u[c];if(void 0!==p.startAngle){var f=N(p.startAngle),A=N(p.endAngle),m=p.x,g=p.y;w.call(this,m,g,p.radius,f,A,p.counterclockwise,n,e)}else C.call(this,p.x,p.y)}r[s].arc||!0===r[s].close||!0===r[s].begin||S.call(this,r[s].deltas,m=r[s].start.x,g=r[s].start.y,null,null)}n&&b.call(this,n),e&&v.call(this)}},y=function(t){var e=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,n=e*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return t-n;case"top":return t+e-n;case"hanging":return t+e-2*n;case"middle":return t+e/2-n;case"ideographic":return t;case"alphabetic":default:return t}};u.prototype.createLinearGradient=function(){var t=function(){};return t.colorStops=[],t.addColorStop=function(t,e){this.colorStops.push([t,e])},t.getColor=function(){return 0===this.colorStops.length?"#000000":this.colorStops[0][1]},t.isCanvasGradient=!0,t},u.prototype.createPattern=function(){return this.createLinearGradient()},u.prototype.createRadialGradient=function(){return this.createLinearGradient()};var w=function(t,e,n,r,i,s,o,a){for(var l=I(r),u=I(i),c=B.call(this,n,l,u,s),h=0;h<c.length;h++){var d=c[h];0===h&&x.call(this,d.x1+t,d.y1+e),E.call(this,t,e,d.x2,d.y2,d.x3,d.y3,d.x4,d.y4)}a?v.call(this):b.call(this,o)},b=function(t){switch(t){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},v=function(){this.pdf.clip()},x=function(t,e){this.pdf.internal.out(i(t)+" "+s(e)+" m")},_=function(t){var e;switch(t.align){case"right":case"end":e="right";break;case"center":e="center";break;case"left":case"start":default:e="left"}var n=this.ctx.transform.applyToPoint(new R(t.x,t.y)),r=this.ctx.transform.decompose(),i=new D;i=(i=(i=i.multiply(r.translate)).multiply(r.skew)).multiply(r.scale);for(var s,o=this.pdf.getTextDimensions(t.text),a=this.ctx.transform.applyToRectangle(new O(t.x,t.y,o.w,o.h)),l=i.applyToRectangle(new O(t.x,t.y-o.h,o.w,o.h)),u=p.call(this,l),c=[],h=0;h<u.length;h+=1)-1===c.indexOf(u[h])&&c.push(u[h]);if(c.sort(),!0===this.autoPaging)for(var d=c[c.length-1],f=c[0];f<d+1;f++){if(this.pdf.setPage(f),0!==this.ctx.clip_path.length){var m=this.path;s=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=A(s,this.posX,-1*this.pdf.internal.pageSize.height*(f-1)+this.posY),g.call(this,"fill",!0),this.path=m}var y=JSON.parse(JSON.stringify(a));if(y=A([y],this.posX,-1*this.pdf.internal.pageSize.height*(f-1)+this.posY)[0],.01<=t.scale){var w=this.pdf.internal.getFontSize();this.pdf.setFontSize(w*t.scale)}this.pdf.text(t.text,y.x,y.y,{angle:t.angle,align:e,renderingMode:t.renderingMode,maxWidth:t.maxWidth}),.01<=t.scale&&this.pdf.setFontSize(w)}else.01<=t.scale&&(w=this.pdf.internal.getFontSize(),this.pdf.setFontSize(w*t.scale)),this.pdf.text(t.text,n.x+this.posX,n.y+this.posY,{angle:t.angle,align:e,renderingMode:t.renderingMode,maxWidth:t.maxWidth}),.01<=t.scale&&this.pdf.setFontSize(w)},C=function(t,e,n,r){r=r||0,this.pdf.internal.out(i(t+(n=n||0))+" "+s(e+r)+" l")},S=function(t,e,n){return this.pdf.lines(t,e,n,null,null)},E=function(t,e,r,i,s,l,u,c){this.pdf.internal.out([n(o(r+t)),n(a(i+e)),n(o(s+t)),n(a(l+e)),n(o(u+t)),n(a(c+e)),"c"].join(" "))},B=function(t,e,n,r){var i=2*Math.PI,s=e;(s<i||i<s)&&(s%=i);var o=n;(o<i||i<o)&&(o%=i);for(var a=[],l=Math.PI/2,u=r?-1:1,c=e,h=Math.min(i,Math.abs(o-s));1e-5<h;){var d=c+u*Math.min(h,l);a.push(k.call(this,t,c,d)),h-=Math.abs(d-c),c=d}return a},k=function(t,e,n){var r=(n-e)/2,i=t*Math.cos(r),s=t*Math.sin(r),o=i,a=-s,l=o*o+a*a,u=l+o*i+a*s,c=4/3*(Math.sqrt(2*l*u)-u)/(o*s-a*i),h=o-c*a,d=a+c*o,p=h,f=-d,A=r+e,m=Math.cos(A),g=Math.sin(A);return{x1:t*Math.cos(e),y1:t*Math.sin(e),x2:h*m-d*g,y2:h*g+d*m,x3:p*m-f*g,y3:p*g+f*m,x4:t*Math.cos(n),y4:t*Math.sin(n)}},N=function(t){return 180*t/Math.PI},I=function(t){return t*Math.PI/180},F=function(t,e,n,r,i,s){var o=t+.5*(n-t),a=e+.5*(r-e),l=i+.5*(n-i),u=s+.5*(r-s),c=Math.min(t,i,o,l),h=Math.max(t,i,o,l),d=Math.min(e,s,a,u),p=Math.max(e,s,a,u);return new O(c,d,h-c,p-d)},T=function(t,e,n,r,i,s,o,a){for(var l,u,c,h,d,p,f,A,m,g,y,w,b,v=n-t,x=r-e,_=i-n,C=s-r,S=o-i,E=a-s,B=0;B<41;B++)A=(p=(u=t+(l=B/40)*v)+l*((h=n+l*_)-u))+l*(h+l*(i+l*S-h)-p),m=(f=(c=e+l*x)+l*((d=r+l*C)-c))+l*(d+l*(s+l*E-d)-f),b=0==B?(w=g=A,y=m):(g=Math.min(g,A),y=Math.min(y,m),w=Math.max(w,A),Math.max(b,m));return new O(Math.round(g),Math.round(y),Math.round(w-g),Math.round(b-y))},R=function(t,e){var n=t||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return n},set:function(t){isNaN(t)||(n=parseFloat(t))}});var r=e||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return r},set:function(t){isNaN(t)||(r=parseFloat(t))}});var i="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return i},set:function(t){i=t.toString()}}),this},O=function(t,e,n,r){R.call(this,t,e),this.type="rect";var i=n||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return i},set:function(t){isNaN(t)||(i=parseFloat(t))}});var s=r||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return s},set:function(t){isNaN(t)||(s=parseFloat(t))}}),this},D=function(t,e,n,r,i,s){var o=[];return Object.defineProperty(this,"sx",{get:function(){return o[0]},set:function(t){o[0]=Math.round(1e5*t)/1e5}}),Object.defineProperty(this,"shy",{get:function(){return o[1]},set:function(t){o[1]=Math.round(1e5*t)/1e5}}),Object.defineProperty(this,"shx",{get:function(){return o[2]},set:function(t){o[2]=Math.round(1e5*t)/1e5}}),Object.defineProperty(this,"sy",{get:function(){return o[3]},set:function(t){o[3]=Math.round(1e5*t)/1e5}}),Object.defineProperty(this,"tx",{get:function(){return o[4]},set:function(t){o[4]=Math.round(1e5*t)/1e5}}),Object.defineProperty(this,"ty",{get:function(){return o[5]},set:function(t){o[5]=Math.round(1e5*t)/1e5}}),Object.defineProperty(this,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(this,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(this,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(this,"isIdentity",{get:function(){return 1===this.sx&&0===this.shy&&0===this.shx&&1===this.sy&&0===this.tx&&0===this.ty}}),this.sx=isNaN(t)?1:t,this.shy=isNaN(e)?0:e,this.shx=isNaN(n)?0:n,this.sy=isNaN(r)?1:r,this.tx=isNaN(i)?0:i,this.ty=isNaN(s)?0:s,this};D.prototype.multiply=function(t){return new D(t.sx*this.sx+t.shy*this.shx,t.sx*this.shy+t.shy*this.sy,t.shx*this.sx+t.sy*this.shx,t.shx*this.shy+t.sy*this.sy,t.tx*this.sx+t.ty*this.shx+this.tx,t.tx*this.shy+t.ty*this.sy+this.ty)},D.prototype.decompose=function(){var t=this.sx,e=this.shy,n=this.shx,r=this.sy,i=this.tx,s=this.ty,o=Math.sqrt(t*t+e*e),a=(t/=o)*n+(e/=o)*r;n-=t*a,r-=e*a;var l=Math.sqrt(n*n+r*r);return a/=l,t*(r/=l)<e*(n/=l)&&(t=-t,e=-e,a=-a,o=-o),{scale:new D(o,0,0,l,0,0),translate:new D(1,0,0,1,i,s),rotate:new D(t,e,-e,t,0,0),skew:new D(1,0,a,1,0,0)}},D.prototype.applyToPoint=function(t){return new R(t.x*this.sx+t.y*this.shx+this.tx,t.x*this.shy+t.y*this.sy+this.ty)},D.prototype.applyToRectangle=function(t){var e=this.applyToPoint(t),n=this.applyToPoint(new R(t.x+t.w,t.y+t.h));return new O(e.x,e.y,n.x-e.x,n.y-e.y)},D.prototype.clone=function(){return new D(this.sx,this.shy,this.shx,this.sy,this.tx,this.ty)}}(dt.API,"undefined"!=typeof self&&self||"undefined"!=typeof window&&window||"undefined"!=typeof global&&global||Function('return typeof this === "object" && this.content')()||Function("return this")()),m=function(t){var e,n,r,i,s,o,a,l,u,c;for(/[^\x00-\xFF]/.test(t),n=[],r=0,i=(t+=e="\0\0\0\0".slice(t.length%4||4)).length;r<i;r+=4)0!==(s=(t.charCodeAt(r)<<24)+(t.charCodeAt(r+1)<<16)+(t.charCodeAt(r+2)<<8)+t.charCodeAt(r+3))?(o=(s=((s=((s=((s=(s-(c=s%85))/85)-(u=s%85))/85)-(l=s%85))/85)-(a=s%85))/85)%85,n.push(o+33,a+33,l+33,u+33,c+33)):n.push(122);return function(t,n){for(var r=e.length;0<r;r--)t.pop()}(n),String.fromCharCode.apply(String,n)+"~>"},g=function(t){var e,n,r,i,s,o=String,a="length",l="charCodeAt",u="slice",c="replace";for(t[u](-2),t=t[u](0,-2)[c](/\s/g,"")[c]("z","!!!!!"),r=[],i=0,s=(t+=e="uuuuu"[u](t[a]%5||5))[a];i<s;i+=5)n=52200625*(t[l](i)-33)+614125*(t[l](i+1)-33)+7225*(t[l](i+2)-33)+85*(t[l](i+3)-33)+(t[l](i+4)-33),r.push(255&n>>24,255&n>>16,255&n>>8,255&n);return function(t,n){for(var r=e[a];0<r;r--)t.pop()}(r),o.fromCharCode.apply(o,r)},y=function(t){for(var e="",n=0;n<t.length;n+=1)e+=("0"+t.charCodeAt(n).toString(16)).slice(-2);return e+">"},w=function(t){var e=new RegExp(/^([0-9A-Fa-f]{2})+$/);if(-1!==(t=t.replace(/\s/g,"")).indexOf(">")&&(t=t.substr(0,t.indexOf(">"))),t.length%2&&(t+="0"),!1===e.test(t))return"";for(var n="",r=0;r<t.length;r+=2)n+=String.fromCharCode("0x"+(t[r]+t[r+1]));return n},b=function(t,e){e=Object.assign({predictor:1,colors:1,bitsPerComponent:8,columns:1},e);for(var n,r,i=[],s=t.length;s--;)i[s]=t.charCodeAt(s);return n=A.adler32cs.from(t),(r=new Deflater(6)).append(new Uint8Array(i)),t=r.flush(),(i=new Uint8Array(t.length+6)).set(new Uint8Array([120,156])),i.set(t,2),i.set(new Uint8Array([255&n,n>>8&255,n>>16&255,n>>24&255]),t.length+2),String.fromCharCode.apply(null,i)},(A=dt.API).processDataByFilters=function(t,e){var n=0,r=t||"",i=[];for("string"==typeof(e=e||[])&&(e=[e]),n=0;n<e.length;n+=1)switch(e[n]){case"ASCII85Decode":case"/ASCII85Decode":r=g(r),i.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":r=m(r),i.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":r=w(r),i.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":r=y(r),i.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":r=b(r),i.push("/FlateDecode");break;default:throw'The filter: "'+e[n]+'" is not implemented'}return{data:r,reverseChain:i.reverse().join(" ")}},(v=dt.API).loadFile=function(t,e,n){var r;e=e||!0,n=n||function(){};try{r=function(t,e,n){var r=new XMLHttpRequest,i=[],s=0,o=function(t){var e=t.length,n=String.fromCharCode;for(s=0;s<e;s+=1)i.push(n(255&t.charCodeAt(s)));return i.join("")};if(r.open("GET",t,!e),r.overrideMimeType("text/plain; charset=x-user-defined"),!1===e&&(r.onload=function(){return o(this.responseText)}),r.send(null),200===r.status)return e?o(r.responseText):void 0;console.warn('Unable to load file "'+t+'"')}(t,e)}catch(t){r=void 0}return r},v.loadImageFile=v.loadFile,x=dt.API,_="undefined"!=typeof window&&window||"undefined"!=typeof global&&global,C=function(t){var e=r(t);return"undefined"===e?"undefined":"string"===e||t instanceof String?"string":"number"===e||t instanceof Number?"number":"function"===e||t instanceof Function?"function":t&&t.constructor===Array?"array":t&&1===t.nodeType?"element":"object"===e?"object":"unknown"},S=function(t,e){var n=document.createElement(t);if(e.className&&(n.className=e.className),e.innerHTML){n.innerHTML=e.innerHTML;for(var r=n.getElementsByTagName("script"),i=r.length;0<i--;null)r[i].parentNode.removeChild(r[i])}for(var s in e.style)n.style[s]=e.style[s];return n},(((E=function t(e){var n=Object.assign(t.convert(Promise.resolve()),JSON.parse(JSON.stringify(t.template))),r=t.convert(Promise.resolve(),n);return(r=r.setProgress(1,t,1,[t])).set(e)}).prototype=Object.create(Promise.prototype)).constructor=E).convert=function(t,e){return t.__proto__=e||E.prototype,t},E.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{}}},E.prototype.from=function(t,e){return this.then((function(){switch(e=e||function(t){switch(C(t)){case"string":return"string";case"element":return"canvas"===t.nodeName.toLowerCase?"canvas":"element";default:return"unknown"}}(t)){case"string":return this.set({src:S("div",{innerHTML:t})});case"element":return this.set({src:t});case"canvas":return this.set({canvas:t});case"img":return this.set({img:t});default:return this.error("Unknown source type.")}}))},E.prototype.to=function(t){switch(t){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},E.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then((function(){var t={position:"relative",display:"inline-block",width:Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:"white"},e=function t(e,n){for(var r=3===e.nodeType?document.createTextNode(e.nodeValue):e.cloneNode(!1),i=e.firstChild;i;i=i.nextSibling)!0!==n&&1===i.nodeType&&"SCRIPT"===i.nodeName||r.appendChild(t(i,n));return 1===e.nodeType&&("CANVAS"===e.nodeName?(r.width=e.width,r.height=e.height,r.getContext("2d").drawImage(e,0,0)):"TEXTAREA"!==e.nodeName&&"SELECT"!==e.nodeName||(r.value=e.value),r.addEventListener("load",(function(){r.scrollTop=e.scrollTop,r.scrollLeft=e.scrollLeft}),!0)),r}(this.prop.src,this.opt.html2canvas.javascriptEnabled);"BODY"===e.tagName&&(t.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=S("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=S("div",{className:"html2pdf__container",style:t}),this.prop.container.appendChild(e),this.prop.container.firstChild.appendChild(S("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"}))},E.prototype.toCanvas=function(){return this.thenList([function(){return document.body.contains(this.prop.container)||this.toContainer()}]).then((function(){var t=Object.assign({},this.opt.html2canvas);if(delete t.onrendered,this.isHtml2CanvasLoaded())return html2canvas(this.prop.container,t)})).then((function(t){(this.opt.html2canvas.onrendered||function(){})(t),this.prop.canvas=t,document.body.removeChild(this.prop.overlay)}))},E.prototype.toContext2d=function(){return this.thenList([function(){return document.body.contains(this.prop.container)||this.toContainer()}]).then((function(){var t=this.opt.jsPDF,e=Object.assign({async:!0,allowTaint:!0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete e.onrendered,t.context2d.autoPaging=!0,t.context2d.posX=this.opt.x,t.context2d.posY=this.opt.y,e.windowHeight=e.windowHeight||0,e.windowHeight=0==e.windowHeight?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):e.windowHeight,this.isHtml2CanvasLoaded())return html2canvas(this.prop.container,e)})).then((function(t){(this.opt.html2canvas.onrendered||function(){})(t),this.prop.canvas=t,document.body.removeChild(this.prop.overlay)}))},E.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then((function(){var t=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=t}))},E.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then((function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF}))},E.prototype.output=function(t,e,n){return"img"===(n=n||"pdf").toLowerCase()||"image"===n.toLowerCase()?this.outputImg(t,e):this.outputPdf(t,e)},E.prototype.outputPdf=function(t,e){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){return this.prop.pdf.output(t,e)}))},E.prototype.outputImg=function(t,e){return this.thenList([function(){return this.prop.img||this.toImg()}]).then((function(){switch(t){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+t+'" is not supported.'}}))},E.prototype.isHtml2CanvasLoaded=function(){var t=void 0!==_.html2canvas;return t||console.error("html2canvas not loaded."),t},E.prototype.save=function(t){if(this.isHtml2CanvasLoaded())return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(t?{filename:t}:null).then((function(){this.prop.pdf.save(this.opt.filename)}))},E.prototype.doCallback=function(t){if(this.isHtml2CanvasLoaded())return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){this.prop.callback(this.prop.pdf)}))},E.prototype.set=function(t){if("object"!==C(t))return this;var e=Object.keys(t||{}).map((function(e){if(e in E.template.prop)return function(){this.prop[e]=t[e]};switch(e){case"margin":return this.setMargin.bind(this,t.margin);case"jsPDF":return function(){return this.opt.jsPDF=t.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,t.pageSize);default:return function(){this.opt[e]=t[e]}}}),this);return this.then((function(){return this.thenList(e)}))},E.prototype.get=function(t,e){return this.then((function(){var n=t in E.template.prop?this.prop[t]:this.opt[t];return e?e(n):n}))},E.prototype.setMargin=function(t){return this.then((function(){switch(C(t)){case"number":t=[t,t,t,t];case"array":if(2===t.length&&(t=[t[0],t[1],t[0],t[1]]),4===t.length)break;default:return this.error("Invalid margin array.")}this.opt.margin=t})).then(this.setPageSize)},E.prototype.setPageSize=function(t){function e(t,e){return Math.floor(t*e/72*96)}return this.then((function(){(t=t||dt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(t.inner={width:t.width-this.opt.margin[1]-this.opt.margin[3],height:t.height-this.opt.margin[0]-this.opt.margin[2]},t.inner.px={width:e(t.inner.width,t.k),height:e(t.inner.height,t.k)},t.inner.ratio=t.inner.height/t.inner.width),this.prop.pageSize=t}))},E.prototype.setProgress=function(t,e,n,r){return null!=t&&(this.progress.val=t),null!=e&&(this.progress.state=e),null!=n&&(this.progress.n=n),null!=r&&(this.progress.stack=r),this.progress.ratio=this.progress.val/this.progress.state,this},E.prototype.updateProgress=function(t,e,n,r){return this.setProgress(t?this.progress.val+t:null,e||null,n?this.progress.n+n:null,r?this.progress.stack.concat(r):null)},E.prototype.then=function(t,e){var n=this;return this.thenCore(t,e,(function(t,e){return n.updateProgress(null,null,1,[t]),Promise.prototype.then.call(this,(function(e){return n.updateProgress(null,t),e})).then(t,e).then((function(t){return n.updateProgress(1),t}))}))},E.prototype.thenCore=function(t,e,n){n=n||Promise.prototype.then;var r=this;t&&(t=t.bind(r)),e&&(e=e.bind(r));var i=-1!==Promise.toString().indexOf("[native code]")&&"Promise"===Promise.name?r:E.convert(Object.assign({},r),Promise.prototype),s=n.call(i,t,e);return E.convert(s,r.__proto__)},E.prototype.thenExternal=function(t,e){return Promise.prototype.then.call(this,t,e)},E.prototype.thenList=function(t){var e=this;return t.forEach((function(t){e=e.thenCore(t)})),e},E.prototype.catch=function(t){t&&(t=t.bind(this));var e=Promise.prototype.catch.call(this,t);return E.convert(e,this)},E.prototype.catchExternal=function(t){return Promise.prototype.catch.call(this,t)},E.prototype.error=function(t){return this.then((function(){throw new Error(t)}))},E.prototype.using=E.prototype.set,E.prototype.saveAs=E.prototype.save,E.prototype.export=E.prototype.output,E.prototype.run=E.prototype.then,dt.getPageSize=function(t,e,n){if("object"===r(t)){var i=t;t=i.orientation,e=i.unit||e,n=i.format||n}e=e||"mm",n=n||"a4",t=(""+(t||"P")).toLowerCase();var s=(""+n).toLowerCase(),o={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(e){case"pt":var a=1;break;case"mm":a=72/25.4;break;case"cm":a=72/2.54;break;case"in":a=72;break;case"px":a=.75;break;case"pc":case"em":a=12;break;case"ex":a=6;break;default:throw"Invalid unit: "+e}if(o.hasOwnProperty(s))var l=o[s][1]/a,u=o[s][0]/a;else try{l=n[1],u=n[0]}catch(t){throw new Error("Invalid format: "+n)}if("p"===t||"portrait"===t){if(t="p",l<u){var c=u;u=l,l=c}}else{if("l"!==t&&"landscape"!==t)throw"Invalid orientation: "+t;t="l",u<l&&(c=u,u=l,l=c)}return{width:u,height:l,unit:e,k:a}},x.html=function(t,e){(e=e||{}).callback=e.callback||function(){},e.html2canvas=e.html2canvas||{},e.html2canvas.canvas=e.html2canvas.canvas||this.canvas,e.jsPDF=e.jsPDF||this;var n=new E(e);return e.worker?n:n.from(t).doCallback()},dt.API.addJS=function(t){return N=t,this.internal.events.subscribe("postPutResources",(function(t){B=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(B+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),k=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+N+")"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){void 0!==B&&void 0!==k&&this.internal.out("/Names <</JavaScript "+B+" 0 R>>")})),this},(I=dt.API).events.push(["postPutResources",function(){var t=this,e=/^(\d+) 0 obj$/;if(0<this.outline.root.children.length)for(var n=t.outline.render().split(/\r\n/),r=0;r<n.length;r++){var i=n[r],s=e.exec(i);null!=s&&t.internal.newObjectDeferredBegin(s[1],!1),t.internal.write(i)}if(this.outline.createNamedDestinations){var o=this.internal.pages.length,a=[];for(r=0;r<o;r++){var l=t.internal.newObject();a.push(l);var u=t.internal.getPageInfo(r+1);t.internal.write("<< /D["+u.objId+" 0 R /XYZ null null null]>> endobj")}var c=t.internal.newObject();for(t.internal.write("<< /Names [ "),r=0;r<a.length;r++)t.internal.write("(page_"+(r+1)+")"+a[r]+" 0 R");t.internal.write(" ] >>","endobj"),t.internal.newObject(),t.internal.write("<< /Dests "+c+" 0 R"),t.internal.write(">>","endobj")}}]),I.events.push(["putCatalog",function(){0<this.outline.root.children.length&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+namesOid+" 0 R"))}]),I.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(t,e,n){var r={title:e,options:n,children:[]};return null==t&&(t=this.root),t.children.push(r),r},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(e){e.id=t.internal.newObjectDeferred();for(var n=0;n<e.children.length;n++)this.genIds_r(e.children[n])},t.outline.renderRoot=function(t){this.objStart(t),this.line("/Type /Outlines"),0<t.children.length&&(this.line("/First "+this.makeRef(t.children[0])),this.line("/Last "+this.makeRef(t.children[t.children.length-1]))),this.line("/Count "+this.count_r({count:0},t)),this.objEnd()},t.outline.renderItems=function(e){for(var n=this.ctx.pdf.internal.getVerticalCoordinateString,r=0;r<e.children.length;r++){var i=e.children[r];this.objStart(i),this.line("/Title "+this.makeString(i.title)),this.line("/Parent "+this.makeRef(e)),0<r&&this.line("/Prev "+this.makeRef(e.children[r-1])),r<e.children.length-1&&this.line("/Next "+this.makeRef(e.children[r+1])),0<i.children.length&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1])));var s=this.count=this.count_r({count:0},i);if(0<s&&this.line("/Count "+s),i.options&&i.options.pageNumber){var o=t.internal.getPageInfo(i.options.pageNumber);this.line("/Dest ["+o.objId+" 0 R /XYZ 0 "+n(0)+" 0]")}this.objEnd()}for(r=0;r<e.children.length;r++)this.renderItems(i=e.children[r])},t.outline.line=function(t){this.ctx.val+=t+"\r\n"},t.outline.makeRef=function(t){return t.id+" 0 R"},t.outline.makeString=function(e){return"("+t.internal.pdfEscape(e)+")"},t.outline.objStart=function(t){this.ctx.val+="\r\n"+t.id+" 0 obj\r\n<<\r\n"},t.outline.objEnd=function(t){this.ctx.val+=">> \r\nendobj\r\n"},t.outline.count_r=function(t,e){for(var n=0;n<e.children.length;n++)t.count++,this.count_r(t,e.children[n]);return t.count}}]),T=function(){var t="function"==typeof Deflater;if(!t)throw new Error("requires deflate.js for compression");return t},R=function(t,e,n,r){var i=5,s=P;switch(r){case F.image_compression.FAST:i=3,s=U;break;case F.image_compression.MEDIUM:i=6,s=z;break;case F.image_compression.SLOW:i=9,s=Q}t=L(t,e,n,s);var o=new Uint8Array(O(i)),a=D(t),l=new Deflater(i),u=l.append(t),c=l.flush(),h=o.length+u.length+c.length,d=new Uint8Array(h+4);return d.set(o),d.set(u,o.length),d.set(c,o.length+u.length),d[h++]=a>>>24&255,d[h++]=a>>>16&255,d[h++]=a>>>8&255,d[h++]=255&a,F.arrayBufferToBinaryString(d)},O=function(t,e){var n=Math.LOG2E*Math.log(32768)-8<<4|8,r=n<<8;return r|=Math.min(3,(e-1&255)>>1)<<6,r|=0,[n,255&(r+=31-r%31)]},D=function(t,e){for(var n,r=1,i=0,s=t.length,o=0;0<s;){for(s-=n=e<s?e:s;i+=r+=t[o++],--n;);r%=65521,i%=65521}return(i<<16|r)>>>0},L=function(t,e,n,r){for(var i,s,o,a=t.length/e,l=new Uint8Array(t.length+a),u=$(),c=0;c<a;c++){if(i=t.subarray(o=c*e,o+e),r)l.set(r(i,n,s),o+c);else{for(var h=0,d=u.length,p=[];h<d;h++)p[h]=u[h](i,n,s);var f=V(p.concat());l.set(p[f],o+c)}s=i}return l},M=function(t,e,n){var r=Array.apply([],t);return r.unshift(0),r},U=function(t,e,n){var r=[],i=0,s=t.length;for(r[0]=1;i<s;i++)r[i+1]=t[i]-(t[i-e]||0)+256&255;return r},P=function(t,e,n){var r=[],i=0,s=t.length;for(r[0]=2;i<s;i++)r[i+1]=t[i]-(n&&n[i]||0)+256&255;return r},z=function(t,e,n){var r=[],i=0,s=t.length;for(r[0]=3;i<s;i++)r[i+1]=t[i]+256-((t[i-e]||0)+(n&&n[i]||0)>>>1)&255;return r},Q=function(t,e,n){var r,i=[],s=0,o=t.length;for(i[0]=4;s<o;s++)r=H(t[s-e]||0,n&&n[s]||0,n&&n[s-e]||0),i[s+1]=t[s]-r+256&255;return i},H=function(t,e,n){var r=t+e-n,i=Math.abs(r-t),s=Math.abs(r-e),o=Math.abs(r-n);return i<=s&&i<=o?t:s<=o?e:n},$=function(){return[M,U,P,z,Q]},V=function(t){for(var e,n,r,i=0,s=t.length;i<s;)((e=q(t[i].slice(1)))<n||!n)&&(n=e,r=i),i++;return r},q=function(t){for(var e=0,n=t.length,r=0;e<n;)r+=Math.abs(t[e++]);return r},(F=dt.API).processPNG=function(t,e,n,r,i){var s,o,a,l,u,c,h=this.color_spaces.DEVICE_RGB,d=this.decode.FLATE_DECODE,p=8;if(this.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.isArrayBufferView(t)){if("function"!=typeof PNG||"function"!=typeof Ot)throw new Error("PNG support requires png.js and zlib.js");if(t=(s=new PNG(t)).imgData,p=s.bits,h=s.colorSpace,l=s.colors,-1!==[4,6].indexOf(s.colorType)){if(8===s.bits)for(var f,A=(E=32==s.pixelBitlength?new Uint32Array(s.decodePixels().buffer):16==s.pixelBitlength?new Uint16Array(s.decodePixels().buffer):new Uint8Array(s.decodePixels().buffer)).length,m=new Uint8Array(A*s.colors),g=new Uint8Array(A),y=s.pixelBitlength-s.bits,w=0,b=0;w<A;w++){for(v=E[w],f=0;f<y;)m[b++]=v>>>f&255,f+=s.bits;g[w]=v>>>f&255}if(16===s.bits){A=(E=new Uint32Array(s.decodePixels().buffer)).length,m=new Uint8Array(A*(32/s.pixelBitlength)*s.colors),g=new Uint8Array(A*(32/s.pixelBitlength));for(var v,x=1<s.colors,_=b=w=0;w<A;)v=E[w++],m[b++]=v>>>0&255,x&&(m[b++]=v>>>16&255,v=E[w++],m[b++]=v>>>0&255),g[_++]=v>>>16&255;p=8}r!==F.image_compression.NONE&&T()?(t=R(m,s.width*s.colors,s.colors,r),c=R(g,s.width,1,r)):(t=m,c=g,d=null)}if(3===s.colorType&&(h=this.color_spaces.INDEXED,u=s.palette,s.transparency.indexed)){var C=s.transparency.indexed,S=0;for(w=0,A=C.length;w<A;++w)S+=C[w];if((S/=255)==A-1&&-1!==C.indexOf(0))a=[C.indexOf(0)];else if(S!==A){var E=s.decodePixels();for(g=new Uint8Array(E.length),w=0,A=E.length;w<A;w++)g[w]=C[E[w]];c=R(g,s.width,1)}}var B=function(t){var e;switch(t){case F.image_compression.FAST:e=11;break;case F.image_compression.MEDIUM:e=13;break;case F.image_compression.SLOW:e=14;break;default:e=12}return e}(r);return o=d===this.decode.FLATE_DECODE?"/Predictor "+B+" /Colors "+l+" /BitsPerComponent "+p+" /Columns "+s.width:"/Colors "+l+" /BitsPerComponent "+p+" /Columns "+s.width,(this.isArrayBuffer(t)||this.isArrayBufferView(t))&&(t=this.arrayBufferToBinaryString(t)),(c&&this.isArrayBuffer(c)||this.isArrayBufferView(c))&&(c=this.arrayBufferToBinaryString(c)),this.createImageInfo(t,s.width,s.height,h,p,d,e,n,o,a,u,c,B)}throw new Error("Unsupported PNG image data, try using JPEG instead.")},(j=dt.API).processGIF89A=function(t,e,n,r,i){var s=new Nt(t),o=s.width,a=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var u={data:l,width:o,height:a},c=new Ft(100).encode(u,100);return j.processJPEG.call(this,c,e,n,r)},j.processGIF87A=j.processGIF89A,(K=dt.API).processBMP=function(t,e,n,r,i){var s=new Tt(t,!1),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},u=new Ft(100).encode(l,100);return K.processJPEG.call(this,u,e,n,r)},dt.API.setLanguage=function(t){return void 0===this.internal.languageSettings&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),void 0!=={af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"FYRO Macedonian",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]&&(this.internal.languageSettings.languageCode=t,!1===this.internal.languageSettings.isSubscribed&&(this.internal.events.subscribe("putCatalog",(function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")})),this.internal.languageSettings.isSubscribed=!0)),this},G=(W=dt.API).getCharWidthsArray=function(t,e){var n,r,i,s=(e=e||{}).font||this.internal.getFont(),o=e.fontSize||this.internal.getFontSize(),a=e.charSpace||this.internal.getCharSpace(),l=e.widths?e.widths:s.metadata.Unicode.widths,u=l.fof?l.fof:1,c=e.kerning?e.kerning:s.metadata.Unicode.kerning,h=c.fof?c.fof:1,d=0,p=l[0]||u,f=[];for(n=0,r=t.length;n<r;n++)i=t.charCodeAt(n),f.push("function"==typeof s.metadata.widthOfString?(s.metadata.widthOfGlyph(s.metadata.characterToGlyph(i))+a*(1e3/o)||0)/1e3:(l[i]||p)/u+(c[i]&&c[i][d]||0)/h),d=i;return f},X=W.getArraySum=function(t){for(var e=t.length,n=0;e;)n+=t[--e];return n},Y=W.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return"function"==typeof r.metadata.widthOfString?r.metadata.widthOfString(t,n,i)/n:X(G.apply(this,arguments))},J=function(t,e,n,r){for(var i=[],s=0,o=t.length,a=0;s!==o&&a+e[s]<n;)a+=e[s],s++;i.push(t.slice(0,s));var l=s;for(a=0;s!==o;)a+e[s]>r&&(i.push(t.slice(l,s)),a=0,l=s),a+=e[s],s++;return l!==s&&i.push(t.slice(l,s)),i},Z=function(t,e,n){n||(n={});var r,i,s,o,a,l,u=[],c=[u],h=n.textIndent||0,d=0,p=0,f=t.split(" "),A=G.apply(this,[" ",n])[0];if(l=-1===n.lineIndent?f[0].length+2:n.lineIndent||0){var m=Array(l).join(" "),g=[];f.map((function(t){1<(t=t.split(/\s*\n/)).length?g=g.concat(t.map((function(t,e){return(e&&t.length?"\n":"")+t}))):g.push(t[0])})),f=g,l=Y.apply(this,[m,n])}for(s=0,o=f.length;s<o;s++){var y=0;if(r=f[s],l&&"\n"==r[0]&&(r=r.substr(1),y=1),i=G.apply(this,[r,n]),e<h+d+(p=X(i))||y){if(e<p){for(a=J.apply(this,[r,i,e-(h+d),e]),u.push(a.shift()),u=[a.pop()];a.length;)c.push([a.shift()]);p=X(i.slice(r.length-(u[0]?u[0].length:0)))}else u=[r];c.push(u),h=p+l,d=A}else u.push(r),h+=d+p,d=A}if(l)var w=function(t,e){return(e?m:"")+t.join(" ")};else w=function(t){return t.join(" ")};return c.map(w)},W.splitTextToSize=function(t,e,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),s=(function(t){if(t.widths&&t.kerning)return{widths:t.widths,kerning:t.kerning};var e=this.internal.getFont(t.fontName,t.fontStyle),n="Unicode";return e.metadata[n]?{widths:e.metadata[n].widths||{0:1},kerning:e.metadata[n].kerning||{}}:{font:e.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:t.split(/\r?\n/);var o=1*this.internal.scaleFactor*e/i;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=n.lineIndent;var a,l,u=[];for(a=0,l=r.length;a<l;a++)u=u.concat(Z.apply(this,[r[a],o,s]));return u},tt=dt.API,nt={codePages:["WinAnsiEncoding"],WinAnsiEncoding:(et=function(t){for(var e="klmnopqrstuvwxyz",n={},r=0;r<e.length;r++)n[e[r]]="0123456789abcdef"[r];var i,s,o,a,l,u={},c=1,h=u,d=[],p="",f="",A=t.length-1;for(r=1;r!=A;)l=t[r],r+=1,"'"==l?s=s?(a=s.join(""),i):[]:s?s.push(l):"{"==l?(d.push([h,a]),h={},a=i):"}"==l?((o=d.pop())[0][o[1]]=h,a=i,h=o[0]):"-"==l?c=-1:a===i?n.hasOwnProperty(l)?(p+=n[l],a=parseInt(p,16)*c,c=1,p=""):p+=l:n.hasOwnProperty(l)?(f+=n[l],h[a]=parseInt(f,16)*c,c=1,a=i,f=""):f+=l;return u})("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},rt={Unicode:{Courier:nt,"Courier-Bold":nt,"Courier-BoldOblique":nt,"Courier-Oblique":nt,Helvetica:nt,"Helvetica-Bold":nt,"Helvetica-BoldOblique":nt,"Helvetica-Oblique":nt,"Times-Roman":nt,"Times-Bold":nt,"Times-BoldItalic":nt,"Times-Italic":nt}},it={Unicode:{"Courier-Oblique":et("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":et("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":et("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:et("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":et("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":et("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:et("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:et("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":et("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:et("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":et("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":et("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":et("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":et("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}},tt.events.push(["addFont",function(t){var e,n,r,i=t.font,s="Unicode";(e=it[s][i.postScriptName])&&((n=i.metadata[s]?i.metadata[s]:i.metadata[s]={}).widths=e.widths,n.kerning=e.kerning),(r=rt[s][i.postScriptName])&&((n=i.metadata[s]?i.metadata[s]:i.metadata[s]={}).encoding=r).codePages&&r.codePages.length&&(i.encoding=r.codePages[0])}]),st=dt,"undefined"!=typeof self&&self||"undefined"!=typeof global&&global||"undefined"!=typeof window&&window||Function("return this")(),st.API.events.push(["addFont",function(t){var e=t.font,n=t.instance;if(void 0!==n&&n.existsFileInVFS(e.postScriptName)){var r=n.getFileFromVFS(e.postScriptName);if("string"!=typeof r)throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+e.postScriptName+"').");e.metadata=st.API.TTFFont.open(e.postScriptName,e.fontName,r,e.encoding),e.metadata.Unicode=e.metadata.Unicode||{encoding:{},kerning:{},widths:[]},e.metadata.glyIdsUsed=[0]}else if(!1===e.isStandardFont)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+e.postScriptName+"').")}]),(ot=dt.API).addSvg=function(t,e,n,r,i){if(void 0===e||void 0===n)throw new Error("addSVG needs values for 'x' and 'y'");function s(t){for(var e=parseFloat(t[1]),n=parseFloat(t[2]),r=[],i=3,s=t.length;i<s;)"c"===t[i]?(r.push([parseFloat(t[i+1]),parseFloat(t[i+2]),parseFloat(t[i+3]),parseFloat(t[i+4]),parseFloat(t[i+5]),parseFloat(t[i+6])]),i+=7):"l"===t[i]?(r.push([parseFloat(t[i+1]),parseFloat(t[i+2])]),i+=3):i+=1;return[e,n,r]}var o,a,l,u,c,h,d,p=((a=((d=(l=document).createElement("iframe"),u=".jsPDF_sillysvg_iframe {display:none;position:absolute;}",(h=(c=l).createElement("style")).type="text/css",h.styleSheet?h.styleSheet.cssText=u:h.appendChild(c.createTextNode(u)),c.getElementsByTagName("head")[0].appendChild(h),d.name="childframe",d.setAttribute("width",0),d.setAttribute("height",0),d.setAttribute("frameborder","0"),d.setAttribute("scrolling","no"),d.setAttribute("seamless","seamless"),d.setAttribute("class","jsPDF_sillysvg_iframe"),l.body.appendChild(d),o=d).contentWindow||o.contentDocument).document).write(t),a.close(),a.getElementsByTagName("svg")[0]),f=[1,1],A=parseFloat(p.getAttribute("width")),m=parseFloat(p.getAttribute("height"));A&&m&&(r&&i?f=[r/A,i/m]:r?f=[r/A,r/A]:i&&(f=[i/m,i/m]));var g,y,w,b,v=p.childNodes;for(g=0,y=v.length;g<y;g++)(w=v[g]).tagName&&"PATH"===w.tagName.toUpperCase()&&((b=s(w.getAttribute("d").split(" ")))[0]=b[0]*f[0]+e,b[1]=b[1]*f[1]+n,this.lines.call(this,b[2],b[0],b[1],f));return this},ot.addSVG=ot.addSvg,ot.addSvgAsImage=function(t,e,n,r,i,s,o,a){if(isNaN(e)||isNaN(n))throw console.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(i))throw console.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var l=document.createElement("canvas");l.width=r,l.height=i;var u=l.getContext("2d");return u.fillStyle="#fff",u.fillRect(0,0,l.width,l.height),canvg(l,t,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0}),this.addImage(l.toDataURL("image/jpeg",1),e,n,r,i,o,a),this},dt.API.putTotalPages=function(t){var e,n;n=parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,n);return this},dt.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var i,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(o),l=[],u=0,c=0,h=0,d=!0;function p(t,e){var n,r=!1;for(n=0;n<t.length;n+=1)t[n]===e&&(r=!0);return r}if(void 0===this.internal.viewerpreferences&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,"reset"===t||!0===e){var f=a.length;for(h=0;h<f;h+=1)n[a[h]].value=n[a[h]].defaultValue,n[a[h]].explicitSet=!1}if("object"===r(t))for(i in t)if(s=t[i],p(a,i)&&void 0!==s){if("boolean"===n[i].type&&"boolean"==typeof s)n[i].value=s;else if("name"===n[i].type&&p(n[i].valueSet,s))n[i].value=s;else if("integer"===n[i].type&&Number.isInteger(s))n[i].value=s;else if("array"===n[i].type){for(u=0;u<s.length;u+=1)if(d=!0,1===s[u].length&&"number"==typeof s[u][0])l.push(String(s[u]-1));else if(1<s[u].length){for(c=0;c<s[u].length;c+=1)"number"!=typeof s[u][c]&&(d=!1);!0===d&&l.push([s[u][0]-1,s[u][1]-1].join(" "))}n[i].value="["+l.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}return!1===this.internal.viewerpreferences.isSubscribed&&(this.internal.events.subscribe("putCatalog",(function(){var t,e=[];for(t in n)!0===n[t].explicitSet&&e.push("name"===n[t].type?"/"+t+" /"+n[t].value:"/"+t+" "+n[t].value);0!==e.length&&this.internal.write("/ViewerPreferences\n<<\n"+e.join("\n")+"\n>>")})),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},ut=lt=at="",dt.API.addMetadata=function(t,e){return lt=e||"http://jspdf.default.namespaceuri/",at=t,this.internal.events.subscribe("postPutResources",(function(){if(at){var t='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+lt+'"><jspdf:metadata>',e=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),n=unescape(encodeURIComponent(t)),r=unescape(encodeURIComponent(at)),i=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),s=unescape(encodeURIComponent("</x:xmpmeta>")),o=n.length+r.length+i.length+e.length+s.length;ut=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+o+" >>"),this.internal.write("stream"),this.internal.write(e+n+r+i+s),this.internal.write("endstream"),this.internal.write("endobj")}else ut=""})),this.internal.events.subscribe("putCatalog",(function(){ut&&this.internal.write("/Metadata "+ut+" 0 R")})),this},function(t,e){var n=t.API,r=n.pdfEscape16=function(t,e){for(var n,r=e.metadata.Unicode.widths,i=["","0","00","000","0000"],s=[""],o=0,a=t.length;o<a;++o){if(n=e.metadata.characterToGlyph(t.charCodeAt(o)),e.metadata.glyIdsUsed.push(n),e.metadata.toUnicode[n]=t.charCodeAt(o),-1==r.indexOf(n)&&(r.push(n),r.push([parseInt(e.metadata.widthOfGlyph(n),10)])),"0"==n)return s.join("");n=n.toString(16),s.push(i[4-n.length],n)}return s.join("")},i=function(t){var e,n,r,i,s,o,a;for(s="/CIDInit /ProcSet findresource begin\n12 dict begin\nbegincmap\n/CIDSystemInfo <<\n  /Registry (Adobe)\n  /Ordering (UCS)\n  /Supplement 0\n>> def\n/CMapName /Adobe-Identity-UCS def\n/CMapType 2 def\n1 begincodespacerange\n<0000><ffff>\nendcodespacerange",r=[],o=0,a=(n=Object.keys(t).sort((function(t,e){return t-e}))).length;o<a;o++)e=n[o],100<=r.length&&(s+="\n"+r.length+" beginbfchar\n"+r.join("\n")+"\nendbfchar",r=[]),i=("0000"+t[e].toString(16)).slice(-4),e=("0000"+(+e).toString(16)).slice(-4),r.push("<"+e+"><"+i+">");return r.length&&(s+="\n"+r.length+" beginbfchar\n"+r.join("\n")+"\nendbfchar\n"),s+"endcmap\nCMapName currentdict /CMap defineresource pop\nend\nend"};n.events.push(["putFont",function(e){!function(e,n,r,s){if(e.metadata instanceof t.API.TTFFont&&"Identity-H"===e.encoding){for(var o=e.metadata.Unicode.widths,a=e.metadata.subset.encode(e.metadata.glyIdsUsed,1),l="",u=0;u<a.length;u++)l+=String.fromCharCode(a[u]);var c=r();s({data:l,addLength1:!0}),n("endobj");var h=r();s({data:i(e.metadata.toUnicode),addLength1:!0}),n("endobj");var d=r();n("<<"),n("/Type /FontDescriptor"),n("/FontName /"+e.fontName),n("/FontFile2 "+c+" 0 R"),n("/FontBBox "+t.API.PDFObject.convert(e.metadata.bbox)),n("/Flags "+e.metadata.flags),n("/StemV "+e.metadata.stemV),n("/ItalicAngle "+e.metadata.italicAngle),n("/Ascent "+e.metadata.ascender),n("/Descent "+e.metadata.decender),n("/CapHeight "+e.metadata.capHeight),n(">>"),n("endobj");var p=r();n("<<"),n("/Type /Font"),n("/BaseFont /"+e.fontName),n("/FontDescriptor "+d+" 0 R"),n("/W "+t.API.PDFObject.convert(o)),n("/CIDToGIDMap /Identity"),n("/DW 1000"),n("/Subtype /CIDFontType2"),n("/CIDSystemInfo"),n("<<"),n("/Supplement 0"),n("/Registry (Adobe)"),n("/Ordering ("+e.encoding+")"),n(">>"),n(">>"),n("endobj"),e.objectNumber=r(),n("<<"),n("/Type /Font"),n("/Subtype /Type0"),n("/ToUnicode "+h+" 0 R"),n("/BaseFont /"+e.fontName),n("/Encoding /"+e.encoding),n("/DescendantFonts ["+p+" 0 R]"),n(">>"),n("endobj"),e.isAlreadyPutted=!0}}(e.font,e.out,e.newObject,e.putStream)}]),n.events.push(["putFont",function(e){!function(e,n,r,s){if(e.metadata instanceof t.API.TTFFont&&"WinAnsiEncoding"===e.encoding){for(var o=e.metadata.rawData,a="",l=0;l<o.length;l++)a+=String.fromCharCode(o[l]);var u=r();s({data:a,addLength1:!0}),n("endobj");var c=r();s({data:i(e.metadata.toUnicode),addLength1:!0}),n("endobj");var h=r();for(n("<<"),n("/Descent "+e.metadata.decender),n("/CapHeight "+e.metadata.capHeight),n("/StemV "+e.metadata.stemV),n("/Type /FontDescriptor"),n("/FontFile2 "+u+" 0 R"),n("/Flags 96"),n("/FontBBox "+t.API.PDFObject.convert(e.metadata.bbox)),n("/FontName /"+e.fontName),n("/ItalicAngle "+e.metadata.italicAngle),n("/Ascent "+e.metadata.ascender),n(">>"),n("endobj"),e.objectNumber=r(),l=0;l<e.metadata.hmtx.widths.length;l++)e.metadata.hmtx.widths[l]=parseInt(e.metadata.hmtx.widths[l]*(1e3/e.metadata.head.unitsPerEm));n("<</Subtype/TrueType/Type/Font/ToUnicode "+c+" 0 R/BaseFont/"+e.fontName+"/FontDescriptor "+h+" 0 R/Encoding/"+e.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(e.metadata.hmtx.widths)+">>"),n("endobj"),e.isAlreadyPutted=!0}}(e.font,e.out,e.newObject,e.putStream)}]);var s=function(t){var e,n,i=t.text||"",s=t.x,o=t.y,a=t.options||{},l=t.mutex||{},u=l.pdfEscape,c=l.activeFontKey,h=l.fonts,d="",p=0,f="",A=h[n=c].encoding;if("Identity-H"!==h[n].encoding)return{text:i,x:s,y:o,options:a,mutex:l};for(f=i,n=c,"[object Array]"===Object.prototype.toString.call(i)&&(f=i[0]),p=0;p<f.length;p+=1)h[n].metadata.hasOwnProperty("cmap")&&(e=h[n].metadata.cmap.unicode.codeMap[f[p].charCodeAt(0)]),e||f[p].charCodeAt(0)<256&&h[n].metadata.hasOwnProperty("Unicode")?d+=f[p]:d+="";var m="";return parseInt(n.slice(1))<14||"WinAnsiEncoding"===A?m=function(t){for(var e="",n=0;n<t.length;n++)e+=""+t.charCodeAt(n).toString(16);return e}(u(d,n)):"Identity-H"===A&&(m=r(d,h[n])),l.isHex=!0,{text:m,x:s,y:o,options:a,mutex:l}};n.events.push(["postProcessText",function(t){var e=t.text||"",n=[],r={text:e,x:t.x,y:t.y,options:t.options,mutex:t.mutex};if("[object Array]"===Object.prototype.toString.call(e)){var i=0;for(i=0;i<e.length;i+=1)"[object Array]"===Object.prototype.toString.call(e[i])&&3===e[i].length?n.push([s(Object.assign({},r,{text:e[i][0]})).text,e[i][1],e[i][2]]):n.push(s(Object.assign({},r,{text:e[i]})).text);t.text=n}else t.text=s(Object.assign({},r,{text:e})).text}])}(dt,"undefined"!=typeof self&&self||"undefined"!=typeof global&&global||"undefined"!=typeof window&&window||Function("return this")()),ht=function(t){return void 0!==t&&(void 0===t.vFS&&(t.vFS={}),!0)},(ct=dt.API).existsFileInVFS=function(t){return!!ht(this.internal)&&void 0!==this.internal.vFS[t]},ct.addFileToVFS=function(t,e){return ht(this.internal),this.internal.vFS[t]=e,this},ct.getFileFromVFS=function(t){return ht(this.internal),void 0!==this.internal.vFS[t]?this.internal.vFS[t]:null},dt.API.addHTML=function(t,e,n,r,i){if("undefined"==typeof html2canvas&&"undefined"==typeof rasterizeHTML)throw new Error("You need either https://github.com/niklasvh/html2canvas or https://github.com/cburgmer/rasterizeHTML.js");"number"!=typeof e&&(r=e,i=n),"function"==typeof r&&(i=r,r=null),"function"!=typeof i&&(i=function(){});var s=this.internal,o=s.scaleFactor,a=s.pageSize.getWidth(),l=s.pageSize.getHeight();if((r=r||{}).onrendered=(function(t){e=parseInt(e)||0,n=parseInt(n)||0;var s=r.dim||{},u=Object.assign({top:0,right:0,bottom:0,left:0,useFor:"content"},r.margin),c=s.h||Math.min(l,t.height/o),h=s.w||Math.min(a,t.width/o)-e,d=r.format||"JPEG",p=r.imageCompression||"SLOW";if(t.height>l-u.top-u.bottom&&r.pagesplit){var f=function(t,e,n,i,s){var o=document.createElement("canvas");o.height=s,o.width=i;var a=o.getContext("2d");return a.mozImageSmoothingEnabled=!1,a.webkitImageSmoothingEnabled=!1,a.msImageSmoothingEnabled=!1,a.imageSmoothingEnabled=!1,a.fillStyle=r.backgroundColor||"#ffffff",a.fillRect(0,0,i,s),a.drawImage(t,e,n,i,s,0,0,i,s),o},A=(function(){for(var r,s,c=0,A=0,m={},g=!1;;){var y;if(A=0,m.top=0!==c?u.top:n,m.left=0!==c?u.left:e,g=(a-u.left-u.right)*o<t.width,"content"===u.useFor?0===c?(r=Math.min((a-u.left)*o,t.width),s=Math.min((l-u.top)*o,t.height-c)):(r=Math.min(a*o,t.width),s=Math.min(l*o,t.height-c),m.top=0):(r=Math.min((a-u.left-u.right)*o,t.width),s=Math.min((l-u.bottom-u.top)*o,t.height-c)),g)for(;;){"content"===u.useFor&&(0===A?r=Math.min((a-u.left)*o,t.width):(r=Math.min(a*o,t.width-A),m.left=0));var w=[y=f(t,A,c,r,s),m.left,m.top,y.width/o,y.height/o,d,null,p];if(this.addImage.apply(this,w),(A+=r)>=t.width)break;this.addPage()}else w=[y=f(t,0,c,r,s),m.left,m.top,y.width/o,y.height/o,d,null,p],this.addImage.apply(this,w);if((c+=s)>=t.height)break;this.addPage()}i(h,c,null,w)}).bind(this);if("CANVAS"===t.nodeName){var m=new Image;m.onload=A,m.src=t.toDataURL("image/png"),t=m}else A()}else{var g=Math.random().toString(35),y=[t,e,n,h,c,d,g,p];this.addImage.apply(this,y),i(h,c,g,y)}}).bind(this),"undefined"!=typeof html2canvas&&!r.rstz)return html2canvas(t,r);if("undefined"==typeof rasterizeHTML)return null;var u="drawDocument";return"string"==typeof t&&(u=/^http/.test(t)?"drawURL":"drawHTML"),r.width=r.width||a*o,rasterizeHTML[u](t,void 0,r).then((function(t){r.onrendered(t.image)}),(function(t){i(null,t)}))},function(t){var e,n,i,s,o,a,l,u,c,h,d,p,f,A,m,g,y,w,b,v;e=function(){return function(e){return t.prototype=e,new t};function t(){}}(),h=function(t){var e,n,r,i,s,o,a;for(n=0,r=t.length,e=void 0,o=i=!1;!i&&n!==r;)(e=t[n]=t[n].trimLeft())&&(i=!0),n++;for(n=r-1;r&&!o&&-1!==n;)(e=t[n]=t[n].trimRight())&&(o=!0),n--;for(s=/\s+$/g,a=!0,n=0;n!==r;)"\u2028"!=t[n]&&(e=t[n].replace(/\s+/g," "),a&&(e=e.trimLeft()),e&&(a=s.test(e)),t[n]=e),n++;return t},p=function(t){var e,n,r;for(e=void 0,n=(r=t.split(",")).shift();!e&&n;)e=i[n.trim().toLowerCase()],n=r.shift();return e},f=function(t){var e;return-1<(t="auto"===t?"0px":t).indexOf("em")&&!isNaN(Number(t.replace("em","")))&&(t=18.719*Number(t.replace("em",""))+"px"),-1<t.indexOf("pt")&&!isNaN(Number(t.replace("pt","")))&&(t=1.333*Number(t.replace("pt",""))+"px"),(e=A[t])?e:void 0!==(e={"xx-small":9,"x-small":11,small:13,medium:16,large:19,"x-large":23,"xx-large":28,auto:0}[t])||(e=parseFloat(t))?A[t]=e/16:(e=t.match(/([\d\.]+)(px)/),A[t]=Array.isArray(e)&&3===e.length?parseFloat(e[1])/16:1)},c=function(t){var e,n,r,i,c;return c=t,i=document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(c,null):c.currentStyle?c.currentStyle:c.style,n=void 0,(e={})["font-family"]=p((r=function(t){return t=t.replace(/-\D/g,(function(t){return t.charAt(1).toUpperCase()})),i[t]})("font-family"))||"times",e["font-style"]=s[r("font-style")]||"normal",e["text-align"]=o[r("text-align")]||"left","bold"===(n=a[r("font-weight")]||"normal")&&(e["font-style"]="normal"===e["font-style"]?n:n+e["font-style"]),e["font-size"]=f(r("font-size"))||1,e["line-height"]=f(r("line-height"))||1,e.display="inline"===r("display")?"inline":"block",e["margin-top"]=(n="block"===e.display)&&f(r("margin-top"))||0,e["margin-bottom"]=n&&f(r("margin-bottom"))||0,e["padding-top"]=n&&f(r("padding-top"))||0,e["padding-bottom"]=n&&f(r("padding-bottom"))||0,e["margin-left"]=n&&f(r("margin-left"))||0,e["margin-right"]=n&&f(r("margin-right"))||0,e["padding-left"]=n&&f(r("padding-left"))||0,e["padding-right"]=n&&f(r("padding-right"))||0,e["page-break-before"]=r("page-break-before")||"auto",e.float=l[r("cssFloat")]||"none",e.clear=u[r("clear")]||"none",e.color=r("color"),e},m=function(t,e,n){var r,i,s,o,a;if(s=!1,o=i=void 0,r=n["#"+t.id])if("function"==typeof r)s=r(t,e);else for(i=0,o=r.length;!s&&i!==o;)s=r[i](t,e),i++;if(r=n[t.nodeName],!s&&r)if("function"==typeof r)s=r(t,e);else for(i=0,o=r.length;!s&&i!==o;)s=r[i](t,e),i++;for(a="string"==typeof t.className?t.className.split(" "):[],i=0;i<a.length;i++)if(r=n["."+a[i]],!s&&r)if("function"==typeof r)s=r(t,e);else for(i=0,o=r.length;!s&&i!==o;)s=r[i](t,e),i++;return s},v=function(t,e){var n,r,i,s,o,a,l,u,c;for(n=[],r=[],i=0,c=t.rows[0].cells.length,l=t.clientWidth;i<c;)r[i]={name:(u=t.rows[0].cells[i]).textContent.toLowerCase().replace(/\s+/g,""),prompt:u.textContent.replace(/\r?\n/g,""),width:u.clientWidth/l*e.pdf.internal.pageSize.getWidth()},i++;for(i=1;i<t.rows.length;){for(a=t.rows[i],o={},s=0;s<a.cells.length;)o[r[s].name]=a.cells[s].textContent.replace(/\r?\n/g,""),s++;n.push(o),i++}return{rows:n,headers:r}};var x={SCRIPT:1,STYLE:1,NOSCRIPT:1,OBJECT:1,EMBED:1,SELECT:1},_=1;n=function(t,i,s){var o,a,l,u,h,d,p,f;for(a=t.childNodes,o=void 0,(h="block"===(l=c(t)).display)&&(i.setBlockBoundary(),i.setBlockStyle(l)),u=0,d=a.length;u<d;){if("object"===r(o=a[u])){if(i.executeWatchFunctions(o),1===o.nodeType&&"HEADER"===o.nodeName){var A=o,y=i.pdf.margins_doc.top;i.pdf.internal.events.subscribe("addPage",(function(t){i.y=y,n(A,i,s),i.pdf.margins_doc.top=i.y+10,i.y+=10}),!1)}if(8===o.nodeType&&"#comment"===o.nodeName)~o.textContent.indexOf("ADD_PAGE")&&(i.pdf.addPage(),i.y=i.pdf.margins_doc.top);else if(1!==o.nodeType||x[o.nodeName])if(3===o.nodeType){var w=o.nodeValue;if(o.nodeValue&&"LI"===o.parentNode.nodeName)if("OL"===o.parentNode.parentNode.nodeName)w=_+++". "+w;else{var b=l["font-size"],C=(3-.75*b)*i.pdf.internal.scaleFactor,S=.75*b*i.pdf.internal.scaleFactor,E=1.74*b/i.pdf.internal.scaleFactor;f=function(t,e){this.pdf.circle(t+C,e+S,E,"FD")}}16&o.ownerDocument.body.compareDocumentPosition(o)&&i.addText(w,l)}else"string"==typeof o&&i.addText(o,l);else{var B;if("IMG"===o.nodeName){var k=o.getAttribute("src");B=g[i.pdf.sHashCode(k)||k]}if(B){i.pdf.internal.pageSize.getHeight()-i.pdf.margins_doc.bottom<i.y+o.height&&i.y>i.pdf.margins_doc.top&&(i.pdf.addPage(),i.y=i.pdf.margins_doc.top,i.executeWatchFunctions(o));var N=c(o),I=i.x,F=12/i.pdf.internal.scaleFactor,T=(N["margin-left"]+N["padding-left"])*F,R=(N["margin-right"]+N["padding-right"])*F,O=(N["margin-top"]+N["padding-top"])*F,D=(N["margin-bottom"]+N["padding-bottom"])*F;i.pdf.addImage(B,I+=void 0!==N.float&&"right"===N.float?i.settings.width-o.width-R:T,i.y+O,o.width,o.height),B=void 0,"right"===N.float||"left"===N.float?(i.watchFunctions.push((function(t,e,n,r){return i.y>=e?(i.x+=t,i.settings.width+=n,!0):!!(r&&1===r.nodeType&&!x[r.nodeName]&&i.x+r.width>i.pdf.margins_doc.left+i.pdf.margins_doc.width)&&(i.x+=t,i.y=e,i.settings.width+=n,!0)}).bind(this,"left"===N.float?-o.width-T-R:0,i.y+o.height+O+D,o.width)),i.watchFunctions.push((function(t,e,n){return!(i.y<t&&e===i.pdf.internal.getNumberOfPages())||1===n.nodeType&&"both"===c(n).clear&&(i.y=t,!0)}).bind(this,i.y+o.height,i.pdf.internal.getNumberOfPages())),i.settings.width-=o.width+T+R,"left"===N.float&&(i.x+=o.width+T+R)):i.y+=o.height+O+D}else if("TABLE"===o.nodeName)p=v(o,i),i.y+=10,i.pdf.table(i.x,i.y,p.rows,p.headers,{autoSize:!1,printHeaders:s.printHeaders,margins:i.pdf.margins_doc,css:c(o)}),i.y=i.pdf.lastCellPos.y+i.pdf.lastCellPos.h+20;else if("OL"===o.nodeName||"UL"===o.nodeName)_=1,m(o,i,s)||n(o,i,s),i.y+=10;else if("LI"===o.nodeName){var L=i.x;i.x+=20/i.pdf.internal.scaleFactor,i.y+=3,m(o,i,s)||n(o,i,s),i.x=L}else"BR"===o.nodeName?(i.y+=l["font-size"]*i.pdf.internal.scaleFactor,i.addText("\u2028",e(l))):m(o,i,s)||n(o,i,s)}}u++}if(s.outY=i.y,h)return i.setBlockBoundary(f)},g={},y=function(t,e,n,r){var i,s=t.getElementsByTagName("img"),o=s.length,a=0;function l(){e.pdf.internal.events.publish("imagesLoaded"),r(i)}function u(t,n,r){if(t){var s=new Image;i=++a,s.crossOrigin="",s.onerror=s.onload=function(){if(s.complete&&(0===s.src.indexOf("data:image/")&&(s.width=n||s.width||0,s.height=r||s.height||0),s.width+s.height)){var i=e.pdf.sHashCode(t)||t;g[i]=g[i]||s}--a||l()},s.src=t}}for(;o--;)u(s[o].getAttribute("src"),s[o].width,s[o].height);return a||l()},w=function(t,e,r){var i=t.getElementsByTagName("footer");if(0<i.length){i=i[0];var s=e.pdf.internal.write,o=e.y;e.pdf.internal.write=function(){},n(i,e,r);var a=Math.ceil(e.y-o)+5;e.y=o,e.pdf.internal.write=s,e.pdf.margins_doc.bottom+=a;for(var l=function(t){var s=void 0!==t?t.pageNumber:1,o=e.y;e.y=e.pdf.internal.pageSize.getHeight()-e.pdf.margins_doc.bottom,e.pdf.margins_doc.bottom-=a;for(var l=i.getElementsByTagName("span"),u=0;u<l.length;++u)-1<(" "+l[u].className+" ").replace(/[\n\t]/g," ").indexOf(" pageCounter ")&&(l[u].innerHTML=s),-1<(" "+l[u].className+" ").replace(/[\n\t]/g," ").indexOf(" totalPages ")&&(l[u].innerHTML="###jsPDFVarTotalPages###");n(i,e,r),e.pdf.margins_doc.bottom+=a,e.y=o},u=i.getElementsByTagName("span"),c=0;c<u.length;++c)-1<(" "+u[c].className+" ").replace(/[\n\t]/g," ").indexOf(" totalPages ")&&e.pdf.internal.events.subscribe("htmlRenderingFinished",e.pdf.putTotalPages.bind(e.pdf,"###jsPDFVarTotalPages###"),!0);e.pdf.internal.events.subscribe("addPage",l,!1),l(),x.FOOTER=1}},b=function(t,e,r,i,s,o){if(!e)return!1;var a,l,u,c;"string"==typeof e||e.parentNode||(e=""+e.innerHTML),"string"==typeof e&&(a=e.replace(/<\/?script[^>]*?>/gi,""),c="jsPDFhtmlText"+Date.now().toString()+(1e3*Math.random()).toFixed(0),(u=document.createElement("div")).style.cssText="position: absolute !important;clip: rect(1px 1px 1px 1px); /* IE6, IE7 */clip: rect(1px, 1px, 1px, 1px);padding:0 !important;border:0 !important;height: 1px !important;width: 1px !important; top:auto;left:-100px;overflow: hidden;",u.innerHTML='<iframe style="height:1px;width:1px" name="'+c+'" />',document.body.appendChild(u),(l=window.frames[c]).document.open(),l.document.writeln(a),l.document.close(),e=l.document.body);var h,p=new d(t,r,i,s);return y.call(this,e,p,s.elementHandlers,(function(t){w(e,p,s.elementHandlers),n(e,p,s.elementHandlers),p.pdf.internal.events.publish("htmlRenderingFinished"),h=p.dispose(),"function"==typeof o?o(h):t&&console.error("jsPDF Warning: rendering issues? provide a callback to fromHTML!")})),h||{x:p.x,y:p.y}},(d=function(t,e,n,r){return this.pdf=t,this.x=e,this.y=n,this.settings=r,this.watchFunctions=[],this.init(),this}).prototype.init=function(){return this.paragraph={text:[],style:[]},this.pdf.internal.write("q")},d.prototype.dispose=function(){return this.pdf.internal.write("Q"),{x:this.x,y:this.y,ready:!0}},d.prototype.executeWatchFunctions=function(t){var e=!1,n=[];if(0<this.watchFunctions.length){for(var r=0;r<this.watchFunctions.length;++r)!0===this.watchFunctions[r](t)?e=!0:n.push(this.watchFunctions[r]);this.watchFunctions=n}return e},d.prototype.splitFragmentsIntoLines=function(t,n){var r,i,s,o,a,l,u,c,h,d,p,f,A,m;for(d=this.pdf.internal.scaleFactor,o={},l=u=c=m=a=s=h=i=void 0,f=[p=[]],r=0,A=this.settings.width;t.length;)if(a=t.shift(),m=n.shift(),a)if((s=o[(i=m["font-family"])+(h=m["font-style"])])||(s=this.pdf.internal.getFont(i,h).metadata.Unicode,o[i+h]=s),u=this.pdf.getStringUnitWidth(a,c={widths:s.widths,kerning:s.kerning,fontSize:12*m["font-size"],textIndent:r})*c.fontSize/d,"\u2028"==a)f.push(p=[]);else if(A<r+u){for(l=this.pdf.splitTextToSize(a,A,c),p.push([l.shift(),m]);l.length;)p=[[l.shift(),m]],f.push(p);r=this.pdf.getStringUnitWidth(p[0][0],c)*c.fontSize/d}else p.push([a,m]),r+=u;if(void 0!==m["text-align"]&&("center"===m["text-align"]||"right"===m["text-align"]||"justify"===m["text-align"]))for(var g=0;g<f.length;++g){var y=this.pdf.getStringUnitWidth(f[g][0][0],c)*c.fontSize/d;0<g&&(f[g][0][1]=e(f[g][0][1]));var w=A-y;if("right"===m["text-align"])f[g][0][1]["margin-left"]=w;else if("center"===m["text-align"])f[g][0][1]["margin-left"]=w/2;else if("justify"===m["text-align"]){var b=f[g][0][0].split(" ").length-1;f[g][0][1]["word-spacing"]=w/b,g===f.length-1&&(f[g][0][1]["word-spacing"]=0)}}return f},d.prototype.RenderTextFragment=function(t,e){var n,r;r=0,this.pdf.internal.pageSize.getHeight()-this.pdf.margins_doc.bottom<this.y+this.pdf.internal.getFontSize()&&(this.pdf.internal.write("ET","Q"),this.pdf.addPage(),this.y=this.pdf.margins_doc.top,this.pdf.internal.write("q","BT",this.getPdfColor(e.color),this.pdf.internal.getCoordinateString(this.x),this.pdf.internal.getVerticalCoordinateString(this.y),"Td"),r=Math.max(r,e["line-height"],e["font-size"]),this.pdf.internal.write(0,(-12*r).toFixed(2),"Td")),n=this.pdf.internal.getFont(e["font-family"],e["font-style"]);var i=this.getPdfColor(e.color);i!==this.lastTextColor&&(this.pdf.internal.write(i),this.lastTextColor=i),void 0!==e["word-spacing"]&&0<e["word-spacing"]&&this.pdf.internal.write(e["word-spacing"].toFixed(2),"Tw"),this.pdf.internal.write("/"+n.id,(12*e["font-size"]).toFixed(2),"Tf","("+this.pdf.internal.pdfEscape(t)+") Tj"),void 0!==e["word-spacing"]&&this.pdf.internal.write(0,"Tw")},d.prototype.getPdfColor=function(t){var e,n,r,i=/rgb\s*\(\s*(\d+),\s*(\d+),\s*(\d+\s*)\)/.exec(t);if(null!=i)e=parseInt(i[1]),n=parseInt(i[2]),r=parseInt(i[3]);else{if("string"==typeof t&&"#"!=t.charAt(0)){var s=new RGBColor(t);t=s.ok?s.toHex():"#000000"}e=t.substring(1,3),e=parseInt(e,16),n=t.substring(3,5),n=parseInt(n,16),r=t.substring(5,7),r=parseInt(r,16)}if("string"==typeof e&&/^#[0-9A-Fa-f]{6}$/.test(e)){var o=parseInt(e.substr(1),16);e=o>>16&255,n=o>>8&255,r=255&o}var a=this.f3;return 0===e&&0===n&&0===r||void 0===n?a(e/255)+" g":[a(e/255),a(n/255),a(r/255),"rg"].join(" ")},d.prototype.f3=function(t){return t.toFixed(3)},d.prototype.renderParagraph=function(t){var e,n,r,i,s,o,a,l,u,c,d,p,f;if(r=h(this.paragraph.text),p=this.paragraph.style,this.paragraph={text:[],style:[],blockstyle:{},priorblockstyle:e=this.paragraph.blockstyle},r.join("").trim()){a=this.splitFragmentsIntoLines(r,p),l=o=void 0,n=12/this.pdf.internal.scaleFactor,this.priorMarginBottom=this.priorMarginBottom||0,d=(Math.max((e["margin-top"]||0)-this.priorMarginBottom,0)+(e["padding-top"]||0))*n,c=((e["margin-bottom"]||0)+(e["padding-bottom"]||0))*n,this.priorMarginBottom=e["margin-bottom"]||0,"always"===e["page-break-before"]&&(this.pdf.addPage(),this.y=0,d=((e["margin-top"]||0)+(e["padding-top"]||0))*n),u=this.pdf.internal.write,s=i=void 0,this.y+=d,u("q","BT 0 g",this.pdf.internal.getCoordinateString(this.x),this.pdf.internal.getVerticalCoordinateString(this.y),"Td");for(var A=0;a.length;){for(i=l=0,s=(o=a.shift()).length;i!==s;)o[i][0].trim()&&(l=Math.max(l,o[i][1]["line-height"],o[i][1]["font-size"]),f=7*o[i][1]["font-size"]),i++;var m=0,g=0;for(void 0!==o[0][1]["margin-left"]&&0<o[0][1]["margin-left"]&&(m=(g=this.pdf.internal.getCoordinateString(o[0][1]["margin-left"]))-A,A=g),u(m+Math.max(e["margin-left"]||0,0)*n,(-12*l).toFixed(2),"Td"),i=0,s=o.length;i!==s;)o[i][0]&&this.RenderTextFragment(o[i][0],o[i][1]),i++;if(this.y+=l*n,this.executeWatchFunctions(o[0][1])&&0<a.length){var y=[],w=[];a.forEach((function(t){for(var e=0,n=t.length;e!==n;)t[e][0]&&(y.push(t[e][0]+" "),w.push(t[e][1])),++e})),a=this.splitFragmentsIntoLines(h(y),w),u("ET","Q"),u("q","BT 0 g",this.pdf.internal.getCoordinateString(this.x),this.pdf.internal.getVerticalCoordinateString(this.y),"Td")}}return t&&"function"==typeof t&&t.call(this,this.x-9,this.y-f/2),u("ET","Q"),this.y+=c}},d.prototype.setBlockBoundary=function(t){return this.renderParagraph(t)},d.prototype.setBlockStyle=function(t){return this.paragraph.blockstyle=t},d.prototype.addText=function(t,e){return this.paragraph.text.push(t),this.paragraph.style.push(e)},i={helvetica:"helvetica","sans-serif":"helvetica","times new roman":"times",serif:"times",times:"times",monospace:"courier",courier:"courier"},a={100:"normal",200:"normal",300:"normal",400:"normal",500:"bold",600:"bold",700:"bold",800:"bold",900:"bold",normal:"normal",bold:"bold",bolder:"bold",lighter:"normal"},s={normal:"normal",italic:"italic",oblique:"italic"},o={left:"left",right:"right",center:"center",justify:"justify"},l={none:"none",right:"right",left:"left"},u={none:"none",both:"both"},A={normal:1},t.fromHTML=function(t,e,n,r,i,s){return this.margins_doc=s||{top:0,bottom:0},r||(r={}),r.elementHandlers||(r.elementHandlers={}),b(this,t,isNaN(e)?4:e,isNaN(n)?4:n,r,i)}}(dt.API),("undefined"!=typeof window&&window||"undefined"!=typeof global&&global).html2pdf=function(t,e,n){var r=e.canvas;if(r){var i,s;if((r.pdf=e).annotations={_nameMap:[],createAnnotation:function(t,n){var r,i=e.context2d._wrapX(n.left),s=e.context2d._wrapY(n.top),o=(e.context2d._page(n.top),t.indexOf("#"));r=0<=o?{name:t.substring(o+1)}:{url:t},e.link(i,s,n.right-n.left,n.bottom-n.top,r)},setName:function(t,n){var r=e.context2d._wrapX(n.left),i=e.context2d._wrapY(n.top),s=e.context2d._page(n.top);this._nameMap[t]={page:s,x:r,y:i}}},r.annotations=e.annotations,e.context2d._pageBreakAt=function(t){this.pageBreaks.push(t)},e.context2d._gotoPage=function(t){for(;e.internal.getNumberOfPages()<t;)e.addPage();e.setPage(t)},"string"==typeof t){t=t.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"");var o,a,l=document.createElement("iframe");document.body.appendChild(l),null!=(o=l.contentDocument)&&null!=o||(o=l.contentWindow.document),o.open(),o.write(t),o.close(),i=o.body,a=o.body||{},t=o.documentElement||{},s=Math.max(a.scrollHeight,a.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight)}else a=(i=t).body||{},s=Math.max(a.scrollHeight,a.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight);var u={async:!0,allowTaint:!0,backgroundColor:"#ffffff",canvas:r,imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1,windowHeight:s=e.internal.pageSize.getHeight(),scrollY:s};e.context2d.pageWrapYEnabled=!0,e.context2d.pageWrapY=e.internal.pageSize.getHeight(),html2canvas(i,u).then((function(t){n&&(l&&l.parentElement.removeChild(l),n(e))}))}else alert("jsPDF canvas plugin not installed")},window.tmp=html2pdf,function(t){var e=t.BlobBuilder||t.WebKitBlobBuilder||t.MSBlobBuilder||t.MozBlobBuilder;t.URL=t.URL||t.webkitURL||function(t,e){return(e=document.createElement("a")).href=t,e};var n=t.Blob,r=URL.createObjectURL,i=URL.revokeObjectURL,s=t.Symbol&&t.Symbol.toStringTag,o=!1,a=!1,l=!!t.ArrayBuffer,u=e&&e.prototype.append&&e.prototype.getBlob;try{o=2===new Blob(["\xe4"]).size,a=2===new Blob([new Uint8Array([1,2])]).size}catch(o){}function c(t){return t.map((function(t){if(t.buffer instanceof ArrayBuffer){var e=t.buffer;if(t.byteLength!==e.byteLength){var n=new Uint8Array(t.byteLength);n.set(new Uint8Array(e,t.byteOffset,t.byteLength)),e=n.buffer}return e}return t}))}function h(t,n){n=n||{};var r=new e;return c(t).forEach((function(t){r.append(t)})),n.type?r.getBlob(n.type):r.getBlob()}function d(t,e){return new n(c(t),e||{})}if(t.Blob&&(h.prototype=Blob.prototype,d.prototype=Blob.prototype),s)try{File.prototype[s]="File",Blob.prototype[s]="Blob",FileReader.prototype[s]="FileReader"}catch(o){}function p(){var e=!!t.ActiveXObject||"-ms-scroll-limit"in document.documentElement.style&&"-ms-ime-align"in document.documentElement.style,n=t.XMLHttpRequest&&t.XMLHttpRequest.prototype.send;e&&n&&(XMLHttpRequest.prototype.send=function(t){t instanceof Blob&&this.setRequestHeader("Content-Type",t.type),n.call(this,t)});try{new File([],"")}catch(e){try{var r=new Function('class File extends Blob {constructor(chunks, name, opts) {opts = opts || {};super(chunks, opts || {});this.name = name;this.lastModifiedDate = opts.lastModified ? new Date(opts.lastModified) : new Date;this.lastModified = +this.lastModifiedDate;}};return new File([], ""), File')();t.File=r}catch(e){t.File=r=function(t,e,n){var r=new Blob(t,n),i=n&&void 0!==n.lastModified?new Date(n.lastModified):new Date;return r.name=e,r.lastModifiedDate=i,r.lastModified=+i,r.toString=function(){return"[object File]"},s&&(r[s]="File"),r}}}}o?(p(),t.Blob=a?t.Blob:d):u?(p(),t.Blob=h):function(){function e(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e.push(r):r<2048?e.push(192|r>>6,128|63&r):r<55296||57344<=r?e.push(224|r>>12,128|r>>6&63,128|63&r):(n++,r=65536+((1023&r)<<10|1023&t.charCodeAt(n)),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r))}return e}function n(t){var e,n,r,i,s,o;for(e="",r=t.length,n=0;n<r;)switch((i=t[n++])>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:e+=String.fromCharCode(i);break;case 12:case 13:s=t[n++],e+=String.fromCharCode((31&i)<<6|63&s);break;case 14:s=t[n++],o=t[n++],e+=String.fromCharCode((15&i)<<12|(63&s)<<6|(63&o)<<0)}return e}function s(t){for(var e=new Array(t.byteLength),n=new Uint8Array(t),r=e.length;r--;)e[r]=n[r];return e}function o(t){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=[],r=0;r<t.length;r+=3){var i=t[r],s=r+1<t.length,o=s?t[r+1]:0,a=r+2<t.length,l=a?t[r+2]:0,u=(15&o)<<2|l>>6,c=63&l;a||(c=64,s||(u=64)),n.push(e[i>>2],e[(3&i)<<4|o>>4],e[u],e[c])}return n.join("")}var a=Object.create||function(t){function e(){}return e.prototype=t,new e};if(l)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],c=ArrayBuffer.isView||function(t){return t&&-1<u.indexOf(Object.prototype.toString.call(t))};function h(t,n){for(var r=0,i=(t=t||[]).length;r<i;r++){var o=t[r];t[r]=o instanceof h?o._buffer:"string"==typeof o?e(o):l&&(ArrayBuffer.prototype.isPrototypeOf(o)||c(o))?s(o):l&&(a=o)&&DataView.prototype.isPrototypeOf(a)?s(o.buffer):e(String(o))}var a;this._buffer=[].concat.apply([],t),this.size=this._buffer.length,this.type=n&&n.type||""}function d(t,e,n){var r=h.call(this,t,n=n||{})||this;return r.name=e,r.lastModifiedDate=n.lastModified?new Date(n.lastModified):new Date,r.lastModified=+r.lastModifiedDate,r}if(h.prototype.slice=function(t,e,n){return new h([this._buffer.slice(t||0,e||this._buffer.length)],{type:n})},h.prototype.toString=function(){return"[object Blob]"},(d.prototype=a(h.prototype)).constructor=d,Object.setPrototypeOf)Object.setPrototypeOf(d,h);else try{d.__proto__=h}catch(a){}function p(){if(!(this instanceof p))throw new TypeError("Failed to construct 'FileReader': Please use the 'new' operator, this DOM object constructor cannot be called as a function.");var t=document.createDocumentFragment();this.addEventListener=t.addEventListener,this.dispatchEvent=function(e){var n=this["on"+e.type];"function"==typeof n&&n(e),t.dispatchEvent(e)},this.removeEventListener=t.removeEventListener}function f(t,e,n){if(!(e instanceof h))throw new TypeError("Failed to execute '"+n+"' on 'FileReader': parameter 1 is not of type 'Blob'.");t.result="",setTimeout((function(){this.readyState=p.LOADING,t.dispatchEvent(new Event("load")),t.dispatchEvent(new Event("loadend"))}))}d.prototype.toString=function(){return"[object File]"},p.EMPTY=0,p.LOADING=1,p.DONE=2,p.prototype.error=null,p.prototype.onabort=null,p.prototype.onerror=null,p.prototype.onload=null,p.prototype.onloadend=null,p.prototype.onloadstart=null,p.prototype.onprogress=null,p.prototype.readAsDataURL=function(t){f(this,t,"readAsDataURL"),this.result="data:"+t.type+";base64,"+o(t._buffer)},p.prototype.readAsText=function(t){f(this,t,"readAsText"),this.result=n(t._buffer)},p.prototype.readAsArrayBuffer=function(t){f(this,t,"readAsText"),this.result=t._buffer.slice()},p.prototype.abort=function(){},URL.createObjectURL=function(t){return t instanceof h?"data:"+t.type+";base64,"+o(t._buffer):r.call(URL,t)},URL.revokeObjectURL=function(t){i&&i.call(URL,t)};var A=t.XMLHttpRequest&&t.XMLHttpRequest.prototype.send;A&&(XMLHttpRequest.prototype.send=function(t){t instanceof h?(this.setRequestHeader("Content-Type",t.type),A.call(this,n(t._buffer))):A.call(this,t)}),t.FileReader=p,t.File=d,t.Blob=h}()}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||"undefined"!=typeof global&&global||Function('return typeof this === "object" && this.content')()||Function("return this")());var pt,ft,At,mt,gt,yt,wt,bt,vt,xt,_t,Ct,St,Et,Bt,kt=kt||function(t){if(!(void 0===t||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var e=function(){return t.URL||t.webkitURL||t},n=t.document.createElementNS("http://www.w3.org/1999/xhtml","a"),r="download"in n,i=/constructor/i.test(t.HTMLElement)||t.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent),o=t.setImmediate||t.setTimeout,a=function(t){o((function(){throw t}),0)},l=function(t){setTimeout((function(){"string"==typeof t?e().revokeObjectURL(t):t.remove()}),4e4)},u=function(t){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t},c=function(c,h,d){d||(c=u(c));var p,f=this,A="application/octet-stream"===c.type,m=function(){!function(t,e,n){for(var r=(e=[].concat(e)).length;r--;){var i=t["on"+e[r]];if("function"==typeof i)try{i.call(t,t)}catch(t){a(t)}}}(f,"writestart progress write writeend".split(" "))};if(f.readyState=f.INIT,r)return p=e().createObjectURL(c),void o((function(){var t,e;n.href=p,n.download=h,t=n,e=new MouseEvent("click"),t.dispatchEvent(e),m(),l(p),f.readyState=f.DONE}),0);!function(){if((s||A&&i)&&t.FileReader){var n=new FileReader;return n.onloadend=function(){var e=s?n.result:n.result.replace(/^data:[^;]*;/,"data:attachment/file;");t.open(e,"_blank")||(t.location.href=e),e=void 0,f.readyState=f.DONE,m()},n.readAsDataURL(c),f.readyState=f.INIT}p||(p=e().createObjectURL(c)),A?t.location.href=p:t.open(p,"_blank")||(t.location.href=p),f.readyState=f.DONE,m(),l(p)}()},h=c.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(t,e,n){return e=e||t.name||"download",n||(t=u(t)),navigator.msSaveOrOpenBlob(t,e)}:(h.abort=function(){},h.readyState=h.INIT=0,h.WRITING=1,h.DONE=2,h.error=h.onwritestart=h.onprogress=h.onwrite=h.onabort=h.onerror=h.onwriteend=null,function(t,e,n){return new c(t,e||t.name||"download",n)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||void 0);function Nt(t){var e=0;if(71!==t[e++]||73!==t[e++]||70!==t[e++]||56!==t[e++]||56!=(t[e++]+1&253)||97!==t[e++])throw"Invalid GIF 87a/89a header.";var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,i=t[e++];e++,e++;var s=null;i>>7&&(s=e,e+=3*(1<<1+(7&i)));var o=!0,a=[],l=0,u=null,c=0,h=null;for(this.width=n,this.height=r;o&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(11!==t[e]||78==t[e+1]&&69==t[e+2]&&84==t[e+3]&&83==t[e+4]&&67==t[e+5]&&65==t[e+6]&&80==t[e+7]&&69==t[e+8]&&50==t[e+9]&&46==t[e+10]&&48==t[e+11]&&3==t[e+12]&&1==t[e+13]&&0==t[e+16])e+=14,h=t[e++]|t[e++]<<8,e++;else for(e+=12;0!==(x=t[e++]);)e+=x;break;case 249:if(4!==t[e++]||0!==t[e+4])throw"Invalid graphics extension block.";var d=t[e++];l=t[e++]|t[e++]<<8,u=t[e++],0==(1&d)&&(u=null),c=d>>2&7,e++;break;case 254:for(;0!==(x=t[e++]);)e+=x;break;default:throw"Unknown graphic control label: 0x"+t[e-1].toString(16)}break;case 44:var p=t[e++]|t[e++]<<8,f=t[e++]|t[e++]<<8,A=t[e++]|t[e++]<<8,m=t[e++]|t[e++]<<8,g=t[e++],y=g>>6&1,w=s,b=!1;g>>7&&(b=!0,w=e,e+=3*(1<<1+(7&g)));var v=e;for(e++;;){var x;if(0===(x=t[e++]))break;e+=x}a.push({x:p,y:f,width:A,height:m,has_local_palette:b,palette_offset:w,data_offset:v,data_length:e-v,transparent_index:u,interlaced:!!y,delay:l,disposal:c});break;case 59:o=!1;break;default:throw"Unknown gif block: 0x"+t[e-1].toString(16)}this.numFrames=function(){return a.length},this.loopCount=function(){return h},this.frameInfo=function(t){if(t<0||t>=a.length)throw"Frame index out of range.";return a[t]},this.decodeAndBlitFrameBGRA=function(e,r){var i=this.frameInfo(e),s=i.width*i.height,o=new Uint8Array(s);It(t,i.data_offset,o,s);var a=i.palette_offset,l=i.transparent_index;null===l&&(l=256);var u=i.width,c=n-u,h=u,d=4*(i.y*n+i.x),p=4*((i.y+i.height)*n+i.x),f=d,A=4*c;!0===i.interlaced&&(A+=4*(u+c)*7);for(var m=8,g=0,y=o.length;g<y;++g){var w=o[g];if(0===h&&(h=u,p<=(f+=A)&&(A=c+4*(u+c)*(m-1),f=d+(u+c)*(m<<1),m>>=1)),w===l)f+=4;else{var b=t[a+3*w],v=t[a+3*w+1];r[f++]=t[a+3*w+2],r[f++]=v,r[f++]=b,r[f++]=255}--h}},this.decodeAndBlitFrameRGBA=function(e,r){var i=this.frameInfo(e),s=i.width*i.height,o=new Uint8Array(s);It(t,i.data_offset,o,s);var a=i.palette_offset,l=i.transparent_index;null===l&&(l=256);var u=i.width,c=n-u,h=u,d=4*(i.y*n+i.x),p=4*((i.y+i.height)*n+i.x),f=d,A=4*c;!0===i.interlaced&&(A+=4*(u+c)*7);for(var m=8,g=0,y=o.length;g<y;++g){var w=o[g];if(0===h&&(h=u,p<=(f+=A)&&(A=c+4*(u+c)*(m-1),f=d+(u+c)*(m<<1),m>>=1)),w===l)f+=4;else{var b=t[a+3*w+1],v=t[a+3*w+2];r[f++]=t[a+3*w],r[f++]=b,r[f++]=v,r[f++]=255}--h}}}function It(t,e,n,r){for(var i=t[e++],s=1<<i,o=s+1,a=o+1,l=i+1,u=(1<<l)-1,c=0,h=0,d=0,p=t[e++],f=new Int32Array(4096),A=null;;){for(;c<16&&0!==p;)h|=t[e++]<<c,c+=8,1===p?p=t[e++]:--p;if(c<l)break;var m=h&u;if(h>>=l,c-=l,m!==s){if(m===o)break;for(var g=m<a?m:A,y=0,w=g;s<w;)w=f[w]>>8,++y;var b=w;if(r<d+y+(g!==m?1:0))return void console.log("Warning, gif stream longer than expected.");n[d++]=b;var v=d+=y;for(g!==m&&(n[d++]=b),w=g;y--;)n[--v]=255&(w=f[w]),w>>=8;null!==A&&a<4096&&(f[a++]=A<<8|b,u+1<=a&&l<12&&(++l,u=u<<1|1)),A=m}else a=o+1,u=(1<<(l=i+1))-1,A=null}return d!==r&&console.log("Warning, gif stream shorter than expected."),n}try{e.GifWriter=function(t,e,n,r){var i=0,s=void 0===(r=void 0===r?{}:r).loop?null:r.loop,o=void 0===r.palette?null:r.palette;if(e<=0||n<=0||65535<e||65535<n)throw"Width/Height invalid.";function a(t){var e=t.length;if(e<2||256<e||e&e-1)throw"Invalid code/color length, must be power of 2 and 2 .. 256.";return e}t[i++]=71,t[i++]=73,t[i++]=70,t[i++]=56,t[i++]=57,t[i++]=97;var l=0,u=0;if(null!==o){for(var c=a(o);c>>=1;)++l;if(c=1<<l,--l,void 0!==r.background){if(c<=(u=r.background))throw"Background index out of range.";if(0===u)throw"Background index explicitly passed as 0."}}if(t[i++]=255&e,t[i++]=e>>8&255,t[i++]=255&n,t[i++]=n>>8&255,t[i++]=(null!==o?128:0)|l,t[i++]=u,t[i++]=0,null!==o)for(var h=0,d=o.length;h<d;++h){var p=o[h];t[i++]=p>>16&255,t[i++]=p>>8&255,t[i++]=255&p}if(null!==s){if(s<0||65535<s)throw"Loop count invalid.";t[i++]=33,t[i++]=255,t[i++]=11,t[i++]=78,t[i++]=69,t[i++]=84,t[i++]=83,t[i++]=67,t[i++]=65,t[i++]=80,t[i++]=69,t[i++]=50,t[i++]=46,t[i++]=48,t[i++]=3,t[i++]=1,t[i++]=255&s,t[i++]=s>>8&255,t[i++]=0}var f=!1;this.addFrame=function(e,n,r,s,l,u){if(!0===f&&(--i,f=!1),e<0||n<0||65535<e||65535<n)throw"x/y invalid.";if(r<=0||s<=0||65535<r||65535<s)throw"Width/Height invalid.";if(l.length<r*s)throw"Not enough pixels for the frame size.";var c=!0,h=(u=void 0===u?{}:u).palette;if(null==h&&(c=!1,h=o),null==h)throw"Must supply either a local or global palette.";for(var d=a(h),p=0;d>>=1;)++p;d=1<<p;var A=void 0===u.delay?0:u.delay,m=void 0===u.disposal?0:u.disposal;if(m<0||3<m)throw"Disposal out of range.";var g=!1,y=0;if(null!=u.transparent&&(g=!0,(y=u.transparent)<0||d<=y))throw"Transparent color index.";if((0!==m||g||0!==A)&&(t[i++]=33,t[i++]=249,t[i++]=4,t[i++]=m<<2|(!0===g?1:0),t[i++]=255&A,t[i++]=A>>8&255,t[i++]=y,t[i++]=0),t[i++]=44,t[i++]=255&e,t[i++]=e>>8&255,t[i++]=255&n,t[i++]=n>>8&255,t[i++]=255&r,t[i++]=r>>8&255,t[i++]=255&s,t[i++]=s>>8&255,t[i++]=!0===c?128|p-1:0,!0===c)for(var w=0,b=h.length;w<b;++w){var v=h[w];t[i++]=v>>16&255,t[i++]=v>>8&255,t[i++]=255&v}i=function(t,e,n,r){t[e++]=n;var i=e++,s=1<<n,o=s-1,a=s+1,l=a+1,u=n+1,c=0,h=0;function d(n){for(;n<=c;)t[e++]=255&h,h>>=8,c-=8,e===i+256&&(t[i]=255,i=e++)}function p(t){h|=t<<c,c+=u,d(8)}var f=r[0]&o,A={};p(s);for(var m=1,g=r.length;m<g;++m){var y=r[m]&o,w=f<<8|y,b=A[w];if(void 0===b){for(h|=f<<c,c+=u;8<=c;)t[e++]=255&h,h>>=8,c-=8,e===i+256&&(t[i]=255,i=e++);4096===l?(p(s),l=a+1,u=n+1,A={}):(1<<u<=l&&++u,A[w]=l++),f=y}else f=b}return p(f),p(a),d(1),i+1===e?t[i]=0:(t[i]=e-i-1,t[e++]=0),e}(t,i,p<2?2:p,l)},this.end=function(){return!1===f&&(t[i++]=59,f=!0),i}},e.GifReader=Nt}catch(s){}function Ft(t){var e,n,r,i,s,o=Math.floor,a=new Array(64),l=new Array(64),u=new Array(64),c=new Array(64),h=new Array(65535),d=new Array(65535),p=new Array(64),f=new Array(64),A=[],m=0,g=7,y=new Array(64),w=new Array(64),b=new Array(64),v=new Array(256),x=new Array(2048),_=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],C=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],S=[0,1,2,3,4,5,6,7,8,9,10,11],E=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],B=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],k=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],N=[0,1,2,3,4,5,6,7,8,9,10,11],I=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],F=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function T(t,e){for(var n=0,r=0,i=new Array,s=1;s<=16;s++){for(var o=1;o<=t[s];o++)i[e[r]]=[],i[e[r]][0]=n,i[e[r]][1]=s,r++,n++;n*=2}return i}function R(t){for(var e=t[0],n=t[1]-1;0<=n;)e&1<<n&&(m|=1<<g),n--,--g<0&&(255==m?(O(255),O(0)):O(m),g=7,m=0)}function O(t){A.push(t)}function D(t){O(t>>8&255),O(255&t)}function L(t,e,n,r,i){for(var s,o=i[0],a=i[240],l=function(t,e){var n,r,i,s,o,a,l,u,c,h,d=0;for(c=0;c<8;++c){var f=(n=t[d])+(u=t[d+7]),A=n-u,m=(r=t[d+1])+(l=t[d+6]),g=r-l,y=(i=t[d+2])+(a=t[d+5]),w=i-a,b=(s=t[d+3])+(o=t[d+4]),v=s-o,x=f+b,_=f-b,C=m+y,S=m-y;t[d]=x+C,t[d+4]=x-C;var E=.707106781*(S+_);t[d+2]=_+E,t[d+6]=_-E;var B=.382683433*((x=v+w)-(S=g+A)),k=.5411961*x+B,N=1.306562965*S+B,I=.707106781*(C=w+g),F=A+I,T=A-I;t[d+5]=T+k,t[d+3]=T-k,t[d+1]=F+N,t[d+7]=F-N,d+=8}for(c=d=0;c<8;++c){var R=(n=t[d])+(u=t[d+56]),O=n-u,D=(r=t[d+8])+(l=t[d+48]),L=r-l,M=(i=t[d+16])+(a=t[d+40]),U=i-a,P=(s=t[d+24])+(o=t[d+32]),z=s-o,Q=R+P,H=R-P,$=D+M,V=D-M;t[d]=Q+$,t[d+32]=Q-$;var q=.707106781*(V+H);t[d+16]=H+q,t[d+48]=H-q;var j=.382683433*((Q=z+U)-(V=L+O)),K=.5411961*Q+j,W=1.306562965*V+j,G=.707106781*($=U+L),X=O+G,Y=O-G;t[d+40]=Y+K,t[d+24]=Y-K,t[d+8]=X+W,t[d+56]=X-W,d++}for(c=0;c<64;++c)p[c]=0<(h=t[c]*e[c])?h+.5|0:h-.5|0;return p}(t,e),u=0;u<64;++u)f[_[u]]=l[u];var c=f[0]-n;n=f[0],0==c?R(r[0]):(R(r[d[s=32767+c]]),R(h[s]));for(var A=63;0<A&&0==f[A];A--);if(0==A)return R(o),n;for(var m,g=1;g<=A;){for(var y=g;0==f[g]&&g<=A;++g);var w=g-y;if(16<=w){m=w>>4;for(var b=1;b<=m;++b)R(a);w&=15}R(i[(w<<4)+d[s=32767+f[g]]]),R(h[s]),g++}return 63!=A&&R(o),n}function M(t){t<=0&&(t=1),100<t&&(t=100),s!=t&&(function(t){for(var e=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],n=0;n<64;n++){var r=o((e[n]*t+50)/100);r<1?r=1:255<r&&(r=255),a[_[n]]=r}for(var i=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],s=0;s<64;s++){var h=o((i[s]*t+50)/100);h<1?h=1:255<h&&(h=255),l[_[s]]=h}for(var d=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],p=0,f=0;f<8;f++)for(var A=0;A<8;A++)u[p]=1/(a[_[p]]*d[f]*d[A]*8),c[p]=1/(l[_[p]]*d[f]*d[A]*8),p++}(t<50?Math.floor(5e3/t):Math.floor(200-2*t)),s=t)}this.encode=function(t,s){var o,h;(new Date).getTime(),s&&M(s),A=new Array,m=0,g=7,D(65496),D(65504),D(16),O(74),O(70),O(73),O(70),O(0),O(1),O(1),O(0),D(1),D(1),O(0),O(0),function(){D(65499),D(132),O(0);for(var t=0;t<64;t++)O(a[t]);O(1);for(var e=0;e<64;e++)O(l[e])}(),o=t.width,h=t.height,D(65472),D(17),O(8),D(h),D(o),O(3),O(1),O(17),O(0),O(2),O(17),O(1),O(3),O(17),O(1),function(){D(65476),D(418),O(0);for(var t=0;t<16;t++)O(C[t+1]);for(var e=0;e<=11;e++)O(S[e]);O(16);for(var n=0;n<16;n++)O(E[n+1]);for(var r=0;r<=161;r++)O(B[r]);O(1);for(var i=0;i<16;i++)O(k[i+1]);for(var s=0;s<=11;s++)O(N[s]);O(17);for(var o=0;o<16;o++)O(I[o+1]);for(var a=0;a<=161;a++)O(F[a])}(),D(65498),D(12),O(3),O(1),O(0),O(2),O(17),O(3),O(17),O(0),O(63),O(0);var d=0,p=0,f=0;m=0,g=7,this.encode.displayName="_encode_";for(var v,_,T,U,P,z,Q,H,$,V=t.data,q=t.height,j=4*t.width,K=0;K<q;){for(v=0;v<j;){for(z=P=j*K+v,Q=-1,$=H=0;$<64;$++)z=P+(H=$>>3)*j+(Q=4*(7&$)),q<=K+H&&(z-=j*(K+1+H-q)),j<=v+Q&&(z-=v+Q-j+4),_=V[z++],T=V[z++],U=V[z++],y[$]=(x[_]+x[T+256>>0]+x[U+512>>0]>>16)-128,w[$]=(x[_+768>>0]+x[T+1024>>0]+x[U+1280>>0]>>16)-128,b[$]=(x[_+1280>>0]+x[T+1536>>0]+x[U+1792>>0]>>16)-128;d=L(y,u,d,e,r),p=L(w,c,p,n,i),f=L(b,c,f,n,i),v+=32}K+=8}if(0<=g){var W=[];W[1]=g+1,W[0]=(1<<g+1)-1,R(W)}return D(65497),new Uint8Array(A)},(new Date).getTime(),t||(t=50),function(){for(var t=String.fromCharCode,e=0;e<256;e++)v[e]=t(e)}(),e=T(C,S),n=T(k,N),r=T(E,B),i=T(I,F),function(){for(var t=1,e=2,n=1;n<=15;n++){for(var r=t;r<e;r++)d[32767+r]=n,h[32767+r]=[],h[32767+r][1]=n,h[32767+r][0]=r;for(var i=-(e-1);i<=-t;i++)d[32767+i]=n,h[32767+i]=[],h[32767+i][1]=n,h[32767+i][0]=e-1+i;t<<=1,e<<=1}}(),function(){for(var t=0;t<256;t++)x[t]=19595*t,x[t+256>>0]=38470*t,x[t+512>>0]=7471*t+32768,x[t+768>>0]=-11059*t,x[t+1024>>0]=-21709*t,x[t+1280>>0]=32768*t+8421375,x[t+1536>>0]=-27439*t,x[t+1792>>0]=-5329*t}(),M(t),(new Date).getTime()}function Tt(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,-1===["BM","BA","CI","CP","IC","PT"].indexOf(this.flag))throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}window.tmp=Nt,dt.API.adler32cs=(yt="function"==typeof ArrayBuffer&&"function"==typeof Uint8Array,wt=null,bt=function(){if(!yt)return function(){return!1};try{var t={};"function"==typeof t.Buffer&&(wt=t.Buffer)}catch(t){}return function(t){return t instanceof ArrayBuffer||null!==wt&&t instanceof wt}}(),vt=null!==wt?function(t){return new wt(t,"utf8").toString("binary")}:function(t){return unescape(encodeURIComponent(t))},xt=function(t,e){for(var n=65535&t,r=t>>>16,i=0,s=e.length;i<s;i++)r=(r+(n=(n+(255&e.charCodeAt(i)))%65521))%65521;return(r<<16|n)>>>0},_t=function(t,e){for(var n=65535&t,r=t>>>16,i=0,s=e.length;i<s;i++)r=(r+(n=(n+e[i])%65521))%65521;return(r<<16|n)>>>0},St=(Ct={}).Adler32=(((gt=(mt=function(t){if(!(this instanceof mt))throw new TypeError("Constructor cannot called be as a function.");if(!isFinite(t=null==t?1:+t))throw new Error("First arguments needs to be a finite number.");this.checksum=t>>>0}).prototype={}).constructor=mt).from=((pt=function(t){if(!(this instanceof mt))throw new TypeError("Constructor cannot called be as a function.");if(null==t)throw new Error("First argument needs to be a string.");this.checksum=xt(1,t.toString())}).prototype=gt,pt),mt.fromUtf8=((ft=function(t){if(!(this instanceof mt))throw new TypeError("Constructor cannot called be as a function.");if(null==t)throw new Error("First argument needs to be a string.");var e=vt(t.toString());this.checksum=xt(1,e)}).prototype=gt,ft),yt&&(mt.fromBuffer=((At=function(t){if(!(this instanceof mt))throw new TypeError("Constructor cannot called be as a function.");if(!bt(t))throw new Error("First argument needs to be ArrayBuffer.");var e=new Uint8Array(t);return this.checksum=_t(1,e)}).prototype=gt,At)),gt.update=function(t){if(null==t)throw new Error("First argument needs to be a string.");return t=t.toString(),this.checksum=xt(this.checksum,t)},gt.updateUtf8=function(t){if(null==t)throw new Error("First argument needs to be a string.");var e=vt(t.toString());return this.checksum=xt(this.checksum,e)},yt&&(gt.updateBuffer=function(t){if(!bt(t))throw new Error("First argument needs to be ArrayBuffer.");var e=new Uint8Array(t);return this.checksum=_t(this.checksum,e)}),gt.clone=function(){return new St(this.checksum)},mt),Ct.from=function(t){if(null==t)throw new Error("First argument needs to be a string.");return xt(1,t.toString())},Ct.fromUtf8=function(t){if(null==t)throw new Error("First argument needs to be a string.");var e=vt(t.toString());return xt(1,e)},yt&&(Ct.fromBuffer=function(t){if(!bt(t))throw new Error("First argument need to be ArrayBuffer.");var e=new Uint8Array(t);return _t(1,e)}),Ct),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(t){var n,r,i,s,o,a,l,u=e,c=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],h=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],d={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},p={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},f=["(",")","(","<",">","<","[","]","[","{","}","{","\xab","\xbb","\xab","\u2039","\u203a","\u2039","\u2045","\u2046","\u2045","\u207d","\u207e","\u207d","\u208d","\u208e","\u208d","\u2264","\u2265","\u2264","\u2329","\u232a","\u2329","\ufe59","\ufe5a","\ufe59","\ufe5b","\ufe5c","\ufe5b","\ufe5d","\ufe5e","\ufe5d","\ufe64","\ufe65","\ufe64"],A=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),m=!1,g=0;this.__bidiEngine__={};var y=function(t){var e=t.charCodeAt(),n=e>>8,r=p[n];return void 0!==r?u[256*r+(255&e)]:252===n||253===n?"AL":A.test(n)?"L":8===n?"R":"N"},w=function(t){for(var e,n=0;n<t.length;n++){if("L"===(e=y(t.charAt(n))))return!1;if("R"===e)return!0}return!1},b=function(t,e,o,a){var l,u,c,h,d=e[a];switch(d){case"L":case"R":m=!1;break;case"N":case"AN":break;case"EN":m&&(d="AN");break;case"AL":m=!0,d="R";break;case"WS":d="N";break;case"CS":a<1||a+1>=e.length||"EN"!==(l=o[a-1])&&"AN"!==l||"EN"!==(u=e[a+1])&&"AN"!==u?d="N":m&&(u="AN"),d=u===l?u:"N";break;case"ES":d="EN"===(l=0<a?o[a-1]:"B")&&a+1<e.length&&"EN"===e[a+1]?"EN":"N";break;case"ET":if(0<a&&"EN"===o[a-1]){d="EN";break}if(m){d="N";break}for(c=a+1,h=e.length;c<h&&"ET"===e[c];)c++;d=c<h&&"EN"===e[c]?"EN":"N";break;case"NSM":if(i&&!s){for(h=e.length,c=a+1;c<h&&"NSM"===e[c];)c++;if(c<h){var p=t[a];if(l=e[c],(1425<=p&&p<=2303||64286===p)&&("R"===l||"AL"===l)){d="R";break}}}d=a<1||"B"===(l=e[a-1])?"N":o[a-1];break;case"B":n=!(m=!1),d=g;break;case"S":r=!0,d="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":m=!1;break;case"BN":d="N"}return d},v=function(t,e,n){var r=t.split("");return n&&x(r,n,{hiLevel:g}),r.reverse(),e&&e.reverse(),r.join("")},x=function(t,e,i){var s,o,a,l,u,p=-1,f=t.length,A=0,w=[],v=g?h:c,x=[];for(r=n=m=!1,o=0;o<f;o++)x[o]=y(t[o]);for(a=0;a<f;a++){if(u=A,w[a]=b(t,x,w,a),s=240&(A=v[u][d[w[a]]]),e[a]=l=v[A&=15][5],0<s)if(16===s){for(o=p;o<a;o++)e[o]=1;p=-1}else p=-1;if(v[A][6])-1===p&&(p=a);else if(-1<p){for(o=p;o<a;o++)e[o]=l;p=-1}"B"===x[a]&&(e[a]=0),i.hiLevel|=l}r&&function(t,e,n){for(var r=0;r<n;r++)if("S"===t[r]){e[r]=g;for(var i=r-1;0<=i&&"WS"===t[i];i--)e[i]=g}}(x,e,f)},_=function(t,e,r,i,s){if(!(s.hiLevel<t)){if(1===t&&1===g&&!n)return e.reverse(),void(r&&r.reverse());for(var o,a,l,u,c=e.length,h=0;h<c;){if(i[h]>=t){for(l=h+1;l<c&&i[l]>=t;)l++;for(u=h,a=l-1;u<a;u++,a--)o=e[u],e[u]=e[a],e[a]=o,r&&(o=r[u],r[u]=r[a],r[a]=o);h=l}h++}}},C=function(t,e,n){var r=t.split(""),i={hiLevel:g};return n||(n=[]),x(r,n,i),function(t,e,n){if(0!==n.hiLevel&&l)for(var r,i=0;i<t.length;i++)1===e[i]&&0<=(r=f.indexOf(t[i]))&&(t[i]=f[r+1])}(r,n,i),_(2,r,e,n,i),_(1,r,e,n,i),r.join("")};return this.__bidiEngine__.doBidiReorder=function(t,e,n){if(function(t,e){if(e)for(var n=0;n<t.length;n++)e[n]=n;void 0===s&&(s=w(t)),void 0===a&&(a=w(t))}(t,e),i||!o||a)if(i&&o&&s^a)g=s?1:0,t=v(t,e,n);else if(!i&&o&&a)g=s?1:0,t=C(t,e,n),t=v(t,e);else if(!i||s||o||a){if(i&&!o&&s^a)t=v(t,e),t=s?(g=0,C(t,e,n)):(g=1,t=C(t,e,n),v(t,e));else if(i&&s&&!o&&a)g=1,t=C(t,e,n),t=v(t,e);else if(!i&&!o&&s^a){var r=l;s?(g=1,t=C(t,e,n),g=0,l=!1,t=C(t,e,n),l=r):(g=0,t=C(t,e,n),t=v(t,e),l=!(g=1),t=C(t,e,n),l=r,t=v(t,e))}}else g=0,t=C(t,e,n);else g=s?1:0,t=C(t,e,n);return t},this.__bidiEngine__.setOptions=function(t){t&&(i=t.isInputVisual,o=t.isOutputVisual,s=t.isInputRtl,a=t.isOutputRtl,l=t.isSymmetricSwapping)},this.__bidiEngine__.setOptions(t),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(t){var e=t.text,r=[];if("[object Array]"===Object.prototype.toString.call(e)){var i=0;for(r=[],i=0;i<e.length;i+=1)"[object Array]"===Object.prototype.toString.call(e[i])?r.push([n.doBidiReorder(e[i][0]),e[i][1],e[i][2]]):r.push([n.doBidiReorder(e[i])]);t.text=r}else t.text=n.doBidiReorder(e)}])}(dt),window.tmp=Ft,Tt.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,16===this.bitPP&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=0===this.colors?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Tt.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP;this.data=new Uint8Array(this.width*this.height*4),this[t]()}catch(t){console.log("bit decode error:"+t)}},Tt.prototype.bit1=function(){var t=Math.ceil(this.width/8),e=t%4,n=0<=this.height?this.height-1:-this.height;for(n=this.height-1;0<=n;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<t;i++)for(var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var l=this.palette[s>>7-a&1];this.data[o+4*a]=l.blue,this.data[o+4*a+1]=l.green,this.data[o+4*a+2]=l.red,this.data[o+4*a+3]=255}0!=e&&(this.pos+=4-e)}},Tt.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;0<=n;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<t;i++){var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,a=15&s,l=this.palette[s>>4];if(this.data[o]=l.blue,this.data[o+1]=l.green,this.data[o+2]=l.red,this.data[o+3]=255,2*i+1>=this.width)break;this.data[o+4]=(l=this.palette[a]).blue,this.data[o+4+1]=l.green,this.data[o+4+2]=l.red,this.data[o+4+3]=255}0!=e&&(this.pos+=4-e)}},Tt.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;0<=e;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}0!=t&&(this.pos+=4-t)}},Tt.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;0<=n;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,a=(s>>5&e)/e*255|0,l=s>>15?255:0,u=r*this.width*4+4*i;this.data[u]=(s>>10&e)/e*255|0,this.data[u+1]=a,this.data[u+2]=o,this.data[u+3]=l}this.pos+=t}},Tt.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;0<=r;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&e)/e*255|0,l=(o>>5&n)/n*255|0,u=i*this.width*4+4*s;this.data[u]=(o>>11)/e*255|0,this.data[u+1]=l,this.data[u+2]=a,this.data[u+3]=255}this.pos+=t}},Tt.prototype.bit24=function(){for(var t=this.height-1;0<=t;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*n;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},Tt.prototype.bit32=function(){for(var t=this.height-1;0<=t;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*n;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=o}},Tt.prototype.getData=function(){return this.data},window.tmp=Tt,function(t){var e=[0,1,2,3,4,4,5,5,6,6,6,6,7,7,7,7,8,8,8,8,8,8,8,8,9,9,9,9,9,9,9,9,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,0,0,16,17,18,18,19,19,20,20,20,20,21,21,21,21,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29];function n(){var t=this;function e(t,e){for(var n=0;n|=1&t,t>>>=1,n<<=1,0<--e;);return n>>>1}t.build_tree=function(n){var r,i,s,o=t.dyn_tree,a=t.stat_desc.static_tree,l=t.stat_desc.elems,u=-1;for(n.heap_len=0,n.heap_max=573,r=0;r<l;r++)0!==o[2*r]?(n.heap[++n.heap_len]=u=r,n.depth[r]=0):o[2*r+1]=0;for(;n.heap_len<2;)o[2*(s=n.heap[++n.heap_len]=u<2?++u:0)]=1,n.depth[s]=0,n.opt_len--,a&&(n.static_len-=a[2*s+1]);for(t.max_code=u,r=Math.floor(n.heap_len/2);1<=r;r--)n.pqdownheap(o,r);for(s=l;r=n.heap[1],n.heap[1]=n.heap[n.heap_len--],n.pqdownheap(o,1),i=n.heap[1],n.heap[--n.heap_max]=r,n.heap[--n.heap_max]=i,o[2*s]=o[2*r]+o[2*i],n.depth[s]=Math.max(n.depth[r],n.depth[i])+1,o[2*r+1]=o[2*i+1]=s,n.heap[1]=s++,n.pqdownheap(o,1),2<=n.heap_len;);n.heap[--n.heap_max]=n.heap[1],function(e){var n,r,i,s,o,a,l=t.dyn_tree,u=t.stat_desc.static_tree,c=t.stat_desc.extra_bits,h=t.stat_desc.extra_base,d=t.stat_desc.max_length,p=0;for(s=0;s<=15;s++)e.bl_count[s]=0;for(l[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<573;n++)d<(s=l[2*l[2*(r=e.heap[n])+1]+1]+1)&&(s=d,p++),l[2*r+1]=s,r>t.max_code||(e.bl_count[s]++,o=0,h<=r&&(o=c[r-h]),e.opt_len+=(a=l[2*r])*(s+o),u&&(e.static_len+=a*(u[2*r+1]+o)));if(0!==p){do{for(s=d-1;0===e.bl_count[s];)s--;e.bl_count[s]--,e.bl_count[s+1]+=2,e.bl_count[d]--,p-=2}while(0<p);for(s=d;0!==s;s--)for(r=e.bl_count[s];0!==r;)(i=e.heap[--n])>t.max_code||(l[2*i+1]!=s&&(e.opt_len+=(s-l[2*i+1])*l[2*i],l[2*i+1]=s),r--)}}(n),function(t,n,r){var i,s,o,a=[],l=0;for(i=1;i<=15;i++)a[i]=l=l+r[i-1]<<1;for(s=0;s<=n;s++)0!==(o=t[2*s+1])&&(t[2*s]=e(a[o]++,o))}(o,t.max_code,n.bl_count)}}function r(t,e,n,r,i){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=r,this.max_length=i}function i(t,e,n,r,i){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=r,this.func=i}n._length_code=[0,1,2,3,4,5,6,7,8,8,9,9,10,10,11,11,12,12,12,12,13,13,13,13,14,14,14,14,15,15,15,15,16,16,16,16,16,16,16,16,17,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28],n.base_length=[0,1,2,3,4,5,6,7,8,10,12,14,16,20,24,28,32,40,48,56,64,80,96,112,128,160,192,224,0],n.base_dist=[0,1,2,3,4,6,8,12,16,24,32,48,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096,6144,8192,12288,16384,24576],n.d_code=function(t){return t<256?e[t]:e[256+(t>>>7)]},n.extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],n.extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],n.extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],n.bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],r.static_ltree=[12,8,140,8,76,8,204,8,44,8,172,8,108,8,236,8,28,8,156,8,92,8,220,8,60,8,188,8,124,8,252,8,2,8,130,8,66,8,194,8,34,8,162,8,98,8,226,8,18,8,146,8,82,8,210,8,50,8,178,8,114,8,242,8,10,8,138,8,74,8,202,8,42,8,170,8,106,8,234,8,26,8,154,8,90,8,218,8,58,8,186,8,122,8,250,8,6,8,134,8,70,8,198,8,38,8,166,8,102,8,230,8,22,8,150,8,86,8,214,8,54,8,182,8,118,8,246,8,14,8,142,8,78,8,206,8,46,8,174,8,110,8,238,8,30,8,158,8,94,8,222,8,62,8,190,8,126,8,254,8,1,8,129,8,65,8,193,8,33,8,161,8,97,8,225,8,17,8,145,8,81,8,209,8,49,8,177,8,113,8,241,8,9,8,137,8,73,8,201,8,41,8,169,8,105,8,233,8,25,8,153,8,89,8,217,8,57,8,185,8,121,8,249,8,5,8,133,8,69,8,197,8,37,8,165,8,101,8,229,8,21,8,149,8,85,8,213,8,53,8,181,8,117,8,245,8,13,8,141,8,77,8,205,8,45,8,173,8,109,8,237,8,29,8,157,8,93,8,221,8,61,8,189,8,125,8,253,8,19,9,275,9,147,9,403,9,83,9,339,9,211,9,467,9,51,9,307,9,179,9,435,9,115,9,371,9,243,9,499,9,11,9,267,9,139,9,395,9,75,9,331,9,203,9,459,9,43,9,299,9,171,9,427,9,107,9,363,9,235,9,491,9,27,9,283,9,155,9,411,9,91,9,347,9,219,9,475,9,59,9,315,9,187,9,443,9,123,9,379,9,251,9,507,9,7,9,263,9,135,9,391,9,71,9,327,9,199,9,455,9,39,9,295,9,167,9,423,9,103,9,359,9,231,9,487,9,23,9,279,9,151,9,407,9,87,9,343,9,215,9,471,9,55,9,311,9,183,9,439,9,119,9,375,9,247,9,503,9,15,9,271,9,143,9,399,9,79,9,335,9,207,9,463,9,47,9,303,9,175,9,431,9,111,9,367,9,239,9,495,9,31,9,287,9,159,9,415,9,95,9,351,9,223,9,479,9,63,9,319,9,191,9,447,9,127,9,383,9,255,9,511,9,0,7,64,7,32,7,96,7,16,7,80,7,48,7,112,7,8,7,72,7,40,7,104,7,24,7,88,7,56,7,120,7,4,7,68,7,36,7,100,7,20,7,84,7,52,7,116,7,3,8,131,8,67,8,195,8,35,8,163,8,99,8,227,8],r.static_dtree=[0,5,16,5,8,5,24,5,4,5,20,5,12,5,28,5,2,5,18,5,10,5,26,5,6,5,22,5,14,5,30,5,1,5,17,5,9,5,25,5,5,5,21,5,13,5,29,5,3,5,19,5,11,5,27,5,7,5,23,5],r.static_l_desc=new r(r.static_ltree,n.extra_lbits,257,286,15),r.static_d_desc=new r(r.static_dtree,n.extra_dbits,0,30,15),r.static_bl_desc=new r(null,n.extra_blbits,0,19,7);var s=[new i(0,0,0,0,0),new i(4,4,8,4,1),new i(4,5,16,8,1),new i(4,6,32,32,1),new i(4,4,16,16,2),new i(8,16,32,32,2),new i(8,16,128,128,2),new i(8,32,128,256,2),new i(32,128,258,1024,2),new i(32,258,258,4096,2)],o=["need dictionary","stream end","","","stream error","data error","","buffer error","",""];function a(t,e,n,r){var i=t[2*e],s=t[2*n];return i<s||i==s&&r[e]<=r[n]}function l(){var t,e,i,l,u,c,h,d,p,f,A,m,g,y,w,b,v,x,_,C,S,E,B,k,N,I,F,T,R,O,D,L,M,U,P,z,Q,H,$,V,q,j=this,K=new n,W=new n,G=new n;function X(){var t;for(t=0;t<286;t++)D[2*t]=0;for(t=0;t<30;t++)L[2*t]=0;for(t=0;t<19;t++)M[2*t]=0;D[512]=1,j.opt_len=j.static_len=0,z=H=0}function Y(t,e){var n,r,i=-1,s=t[1],o=0,a=7,l=4;for(0===s&&(a=138,l=3),t[2*(e+1)+1]=65535,n=0;n<=e;n++)r=s,s=t[2*(n+1)+1],++o<a&&r==s||(o<l?M[2*r]+=o:0!==r?(r!=i&&M[2*r]++,M[32]++):o<=10?M[34]++:M[36]++,i=r,l=(o=0)===s?(a=138,3):r==s?(a=6,3):(a=7,4))}function J(t){j.pending_buf[j.pending++]=t}function Z(t){J(255&t),J(t>>>8&255)}function tt(t,e){var n,r=e;16-r<q?(Z(V|=(n=t)<<q&65535),V=n>>>16-q,q+=r-16):(V|=t<<q&65535,q+=r)}function et(t,e){var n=2*t;tt(65535&e[n],65535&e[n+1])}function nt(t,e){var n,r,i=-1,s=t[1],o=0,a=7,l=4;for(0===s&&(a=138,l=3),n=0;n<=e;n++)if(r=s,s=t[2*(n+1)+1],!(++o<a&&r==s)){if(o<l)for(;et(r,M),0!=--o;);else 0!==r?(r!=i&&(et(r,M),o--),et(16,M),tt(o-3,2)):o<=10?(et(17,M),tt(o-3,3)):(et(18,M),tt(o-11,7));i=r,l=(o=0)===s?(a=138,3):r==s?(a=6,3):(a=7,4)}}function rt(){16==q?(Z(V),q=V=0):8<=q&&(J(255&V),V>>>=8,q-=8)}function it(t,e){var r,i,s;if(j.pending_buf[Q+2*z]=t>>>8&255,j.pending_buf[Q+2*z+1]=255&t,j.pending_buf[U+z]=255&e,z++,0===t?D[2*e]++:(H++,t--,D[2*(n._length_code[e]+256+1)]++,L[2*n.d_code(t)]++),0==(8191&z)&&2<F){for(r=8*z,i=S-v,s=0;s<30;s++)r+=L[2*s]*(5+n.extra_dbits[s]);if(r>>>=3,H<Math.floor(z/2)&&r<Math.floor(i/2))return!0}return z==P-1}function st(t,e){var r,i,s,o,a=0;if(0!==z)for(;r=j.pending_buf[Q+2*a]<<8&65280|255&j.pending_buf[Q+2*a+1],i=255&j.pending_buf[U+a],a++,0===r?et(i,t):(et((s=n._length_code[i])+256+1,t),0!==(o=n.extra_lbits[s])&&tt(i-=n.base_length[s],o),et(s=n.d_code(--r),e),0!==(o=n.extra_dbits[s])&&tt(r-=n.base_dist[s],o)),a<z;);et(256,t),$=t[513]}function ot(){8<q?Z(V):0<q&&J(255&V),q=V=0}function at(t,e,n){var r,i;tt(0+(n?1:0),3),r=t,i=e,ot(),$=8,Z(i),Z(~i),j.pending_buf.set(d.subarray(r,r+i),j.pending),j.pending+=i}function lt(e){(function(t,e,i){var s,o,a=0;0<F?(K.build_tree(j),W.build_tree(j),a=function(){var t;for(Y(D,K.max_code),Y(L,W.max_code),G.build_tree(j),t=18;3<=t&&0===M[2*n.bl_order[t]+1];t--);return j.opt_len+=3*(t+1)+5+5+4,t}(),(o=j.static_len+3+7>>>3)<=(s=j.opt_len+3+7>>>3)&&(s=o)):s=o=e+5,e+4<=s&&-1!=t?at(t,e,i):o==s?(tt(2+(i?1:0),3),st(r.static_ltree,r.static_dtree)):(tt(4+(i?1:0),3),function(t,e,r){var i;for(tt(t-257,5),tt(e-1,5),tt(r-4,4),i=0;i<r;i++)tt(M[2*n.bl_order[i]+1],3);nt(D,t-1),nt(L,e-1)}(K.max_code+1,W.max_code+1,a+1),st(D,L)),X(),i&&ot()})(0<=v?v:-1,S-v,e),v=S,t.flush_pending()}function ut(){var e,n,r,i;do{if(0==(i=p-B-S)&&0===S&&0===B)i=u;else if(-1==i)i--;else if(u+u-262<=S){for(d.set(d.subarray(u,u+u),0),E-=u,S-=u,v-=u,r=e=g;n=65535&A[--r],A[r]=u<=n?n-u:0,0!=--e;);for(r=e=u;n=65535&f[--r],f[r]=u<=n?n-u:0,0!=--e;);i+=u}if(0===t.avail_in)return;e=t.read_buf(d,S+B,i),3<=(B+=e)&&(m=((m=255&d[S])<<b^255&d[S+1])&w)}while(B<262&&0!==t.avail_in)}function ct(t){var e,n,r=N,i=S,s=k,o=u-262<S?S-(u-262):0,a=O,l=h,c=S+258,p=d[i+s-1],A=d[i+s];R<=k&&(r>>=2),B<a&&(a=B);do{if(d[(e=t)+s]==A&&d[e+s-1]==p&&d[e]==d[i]&&d[++e]==d[i+1]){i+=2,e++;do{}while(d[++i]==d[++e]&&d[++i]==d[++e]&&d[++i]==d[++e]&&d[++i]==d[++e]&&d[++i]==d[++e]&&d[++i]==d[++e]&&d[++i]==d[++e]&&d[++i]==d[++e]&&i<c);if(n=258-(c-i),i=c-258,s<n){if(E=t,a<=(s=n))break;p=d[i+s-1],A=d[i+s]}}}while((t=65535&f[t&l])>o&&0!=--r);return s<=B?s:B}function ht(t){return t.total_in=t.total_out=0,t.msg=null,j.pending=0,j.pending_out=0,e=113,l=0,K.dyn_tree=D,K.stat_desc=r.static_l_desc,W.dyn_tree=L,W.stat_desc=r.static_d_desc,G.dyn_tree=M,G.stat_desc=r.static_bl_desc,q=V=0,$=8,X(),function(){var t;for(p=2*u,t=A[g-1]=0;t<g-1;t++)A[t]=0;I=s[F].max_lazy,R=s[F].good_length,O=s[F].nice_length,N=s[F].max_chain,x=k=2,m=C=B=v=S=0}(),0}j.depth=[],j.bl_count=[],j.heap=[],D=[],L=[],M=[],j.pqdownheap=function(t,e){for(var n=j.heap,r=n[e],i=e<<1;i<=j.heap_len&&(i<j.heap_len&&a(t,n[i+1],n[i],j.depth)&&i++,!a(t,r,n[i],j.depth));)n[e]=n[i],e=i,i<<=1;n[e]=r},j.deflateInit=function(t,e,n,r,s,o){return r||(r=8),s||(s=8),o||(o=0),t.msg=null,-1==e&&(e=6),s<1||9<s||8!=r||n<9||15<n||e<0||9<e||o<0||2<o?-2:(t.dstate=j,h=(u=1<<(c=n))-1,w=(g=1<<(y=s+7))-1,b=Math.floor((y+3-1)/3),d=new Uint8Array(2*u),f=[],A=[],P=1<<s+6,j.pending_buf=new Uint8Array(4*P),i=4*P,Q=Math.floor(P/2),U=3*P,F=e,T=o,ht(t))},j.deflateEnd=function(){return 42!=e&&113!=e&&666!=e?-2:(j.pending_buf=null,d=f=A=null,j.dstate=null,113==e?-3:0)},j.deflateParams=function(t,e,n){var r=0;return-1==e&&(e=6),e<0||9<e||n<0||2<n?-2:(s[F].func!=s[e].func&&0!==t.total_in&&(r=t.deflate(1)),F!=e&&(I=s[F=e].max_lazy,R=s[F].good_length,O=s[F].nice_length,N=s[F].max_chain),T=n,r)},j.deflateSetDictionary=function(t,n,r){var i,s=r,o=0;if(!n||42!=e)return-2;if(s<3)return 0;for(u-262<s&&(o=r-(s=u-262)),d.set(n.subarray(o,o+s),0),v=S=s,m=((m=255&d[0])<<b^255&d[1])&w,i=0;i<=s-3;i++)f[i&h]=A[m=(m<<b^255&d[i+2])&w],A[m]=i;return 0},j.deflate=function(n,a){var p,y,N,R,O,D;if(4<a||a<0)return-2;if(!n.next_out||!n.next_in&&0!==n.avail_in||666==e&&4!=a)return n.msg=o[4],-2;if(0===n.avail_out)return n.msg=o[7],-5;if(t=n,R=l,l=a,42==e&&(y=8+(c-8<<4)<<8,3<(N=(F-1&255)>>1)&&(N=3),y|=N<<6,0!==S&&(y|=32),e=113,J((D=y+=31-y%31)>>8&255),J(255&D)),0!==j.pending){if(t.flush_pending(),0===t.avail_out)return l=-1,0}else if(0===t.avail_in&&a<=R&&4!=a)return t.msg=o[7],-5;if(666==e&&0!==t.avail_in)return n.msg=o[7],-5;if(0!==t.avail_in||0!==B||0!=a&&666!=e){switch(O=-1,s[F].func){case 0:O=function(e){var n,r=65535;for(i-5<r&&(r=i-5);;){if(B<=1){if(ut(),0===B&&0==e)return 0;if(0===B)break}if(S+=B,n=v+r,((B=0)===S||n<=S)&&(B=S-n,S=n,lt(!1),0===t.avail_out))return 0;if(u-262<=S-v&&(lt(!1),0===t.avail_out))return 0}return lt(4==e),0===t.avail_out?4==e?2:0:4==e?3:1}(a);break;case 1:O=function(e){for(var n,r=0;;){if(B<262){if(ut(),B<262&&0==e)return 0;if(0===B)break}if(3<=B&&(r=65535&A[m=(m<<b^255&d[S+2])&w],f[S&h]=A[m],A[m]=S),0!==r&&(S-r&65535)<=u-262&&2!=T&&(x=ct(r)),3<=x)if(n=it(S-E,x-3),B-=x,x<=I&&3<=B){for(x--;m=(m<<b^255&d[2+ ++S])&w,r=65535&A[m],f[S&h]=A[m],A[m]=S,0!=--x;);S++}else S+=x,x=0,m=((m=255&d[S])<<b^255&d[S+1])&w;else n=it(0,255&d[S]),B--,S++;if(n&&(lt(!1),0===t.avail_out))return 0}return lt(4==e),0===t.avail_out?4==e?2:0:4==e?3:1}(a);break;case 2:O=function(e){for(var n,r,i=0;;){if(B<262){if(ut(),B<262&&0==e)return 0;if(0===B)break}if(3<=B&&(i=65535&A[m=(m<<b^255&d[S+2])&w],f[S&h]=A[m],A[m]=S),k=x,_=E,x=2,0!==i&&k<I&&(S-i&65535)<=u-262&&(2!=T&&(x=ct(i)),x<=5&&(1==T||3==x&&4096<S-E)&&(x=2)),3<=k&&x<=k){for(r=S+B-3,n=it(S-1-_,k-3),B-=k-1,k-=2;++S<=r&&(i=65535&A[m=(m<<b^255&d[S+2])&w],f[S&h]=A[m],A[m]=S),0!=--k;);if(C=0,x=2,S++,n&&(lt(!1),0===t.avail_out))return 0}else if(0!==C){if((n=it(0,255&d[S-1]))&&lt(!1),S++,B--,0===t.avail_out)return 0}else C=1,S++,B--}return 0!==C&&(n=it(0,255&d[S-1]),C=0),lt(4==e),0===t.avail_out?4==e?2:0:4==e?3:1}(a)}if(2!=O&&3!=O||(e=666),0==O||2==O)return 0===t.avail_out&&(l=-1),0;if(1==O){if(1==a)tt(2,3),et(256,r.static_ltree),rt(),1+$+10-q<9&&(tt(2,3),et(256,r.static_ltree),rt()),$=7;else if(at(0,0,!1),3==a)for(p=0;p<g;p++)A[p]=0;if(t.flush_pending(),0===t.avail_out)return l=-1,0}}return 4!=a?0:1}}function u(){this.next_in_index=0,this.next_out_index=0,this.avail_in=0,this.total_in=0,this.avail_out=0,this.total_out=0}u.prototype={deflateInit:function(t,e){return this.dstate=new l,e||(e=15),this.dstate.deflateInit(this,t,e)},deflate:function(t){return this.dstate?this.dstate.deflate(this,t):-2},deflateEnd:function(){if(!this.dstate)return-2;var t=this.dstate.deflateEnd();return this.dstate=null,t},deflateParams:function(t,e){return this.dstate?this.dstate.deflateParams(this,t,e):-2},deflateSetDictionary:function(t,e){return this.dstate?this.dstate.deflateSetDictionary(this,t,e):-2},read_buf:function(t,e,n){var r=this.avail_in;return n<r&&(r=n),0===r?0:(this.avail_in-=r,t.set(this.next_in.subarray(this.next_in_index,this.next_in_index+r),e),this.next_in_index+=r,this.total_in+=r,r)},flush_pending:function(){var t=this,e=t.dstate.pending;e>t.avail_out&&(e=t.avail_out),0!==e&&(t.next_out.set(t.dstate.pending_buf.subarray(t.dstate.pending_out,t.dstate.pending_out+e),t.next_out_index),t.next_out_index+=e,t.dstate.pending_out+=e,t.total_out+=e,t.avail_out-=e,t.dstate.pending-=e,0===t.dstate.pending&&(t.dstate.pending_out=0))}};var c=t.zip||t;c.Deflater=c._jzlib_Deflater=function(t){var e=new u,n=new Uint8Array(512),r=t?t.level:-1;void 0===r&&(r=-1),e.deflateInit(r),e.next_out=n,this.append=function(t,r){var i,s=[],o=0,a=0,l=0;if(t.length){e.next_in_index=0,e.next_in=t,e.avail_in=t.length;do{if(e.next_out_index=0,e.avail_out=512,0!=e.deflate(0))throw new Error("deflating: "+e.msg);e.next_out_index&&s.push(512==e.next_out_index?new Uint8Array(n):new Uint8Array(n.subarray(0,e.next_out_index))),l+=e.next_out_index,r&&0<e.next_in_index&&e.next_in_index!=o&&(r(e.next_in_index),o=e.next_in_index)}while(0<e.avail_in||0===e.avail_out);return i=new Uint8Array(l),s.forEach((function(t){i.set(t,a),a+=t.length})),i}},this.flush=function(){var t,r,i=[],s=0,o=0;do{if(e.next_out_index=0,e.avail_out=512,1!=(t=e.deflate(4))&&0!=t)throw new Error("deflating: "+e.msg);0<512-e.avail_out&&i.push(new Uint8Array(n.subarray(0,e.next_out_index))),o+=e.next_out_index}while(0<e.avail_in||0===e.avail_out);return e.deflateEnd(),r=new Uint8Array(o),i.forEach((function(t){r.set(t,s),s+=t.length})),r}}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||"undefined"!=typeof global&&global||Function('return typeof this === "object" && this.content')()||Function("return this")()),("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||"undefined"!=typeof global&&global||Function('return typeof this === "object" && this.content')()||Function("return this")()).RGBColor=function(t){var e;t=t||"",this.ok=!1,"#"==t.charAt(0)&&(t=t.substr(1,6)),t=(t=t.replace(/ /g,"")).toLowerCase();var n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};for(var r in n)t==r&&(t=n[r]);for(var i=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}}],s=0;s<i.length;s++){var o=i[s].process,a=i[s].re.exec(t);a&&(e=o(a),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:255<this.r?255:this.r,this.g=this.g<0||isNaN(this.g)?0:255<this.g?255:this.g,this.b=this.b<0||isNaN(this.b)?0:255<this.b?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var t=this.r.toString(16),e=this.g.toString(16),n=this.b.toString(16);return 1==t.length&&(t="0"+t),1==e.length&&(e="0"+e),1==n.length&&(n="0"+n),"#"+t+e+n}},function(t){var e="+".charCodeAt(0),n="/".charCodeAt(0),r="0".charCodeAt(0),i="a".charCodeAt(0),s="A".charCodeAt(0),o="-".charCodeAt(0),a="_".charCodeAt(0),l=function(t){var l=t.charCodeAt(0);return l===e||l===o?62:l===n||l===a?63:l<r?-1:l<r+10?l-r+26+26:l<s+26?l-s:l<i+26?l-i+26:void 0};t.API.TTFFont=function(){function t(t,e,n){var r;if(this.rawData=t,r=this.contents=new c(t),this.contents.pos=4,"ttcf"===r.readString(4)){if(!e)throw new Error("Must specify a font name for TTC files.");throw new Error("Font "+e+" not found in TTC file.")}r.pos=0,this.parse(),this.subset=new N(this),this.registerTTF()}return t.open=function(e,n,r,i){if("string"!=typeof r)throw new Error("Invalid argument supplied in TTFFont.open");return new t(function(t){var e,n,r,i,s,o;if(0<t.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var a=t.length;s="="===t.charAt(a-2)?2:"="===t.charAt(a-1)?1:0,o=new Uint8Array(3*t.length/4-s),r=0<s?t.length-4:t.length;var u=0;function c(t){o[u++]=t}for(n=e=0;e<r;e+=4,n+=3)c((16711680&(i=l(t.charAt(e))<<18|l(t.charAt(e+1))<<12|l(t.charAt(e+2))<<6|l(t.charAt(e+3))))>>16),c((65280&i)>>8),c(255&i);return 2===s?c(255&(i=l(t.charAt(e))<<2|l(t.charAt(e+1))>>4)):1===s&&(c((i=l(t.charAt(e))<<10|l(t.charAt(e+1))<<4|l(t.charAt(e+2))>>2)>>8&255),c(255&i)),o}(r),n,i)},t.prototype.parse=function(){return this.directory=new h(this.contents),this.head=new f(this),this.name=new v(this),this.cmap=new m(this),this.toUnicode=new Map,this.hhea=new g(this),this.maxp=new x(this),this.hmtx=new _(this),this.post=new w(this),this.os2=new y(this),this.loca=new k(this),this.glyf=new S(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var t,e,n,r;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var t,e,n,r;for(r=[],t=0,e=(n=this.bbox).length;t<e;t++)r.push(Math.round(n[t]*this.scaleFactor));return r}).call(this),this.stemV=0,this.post.exists?(e=255&(n=this.post.italic_angle),!0&(t=n>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+e)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=1===(r=this.familyClass)||2===r||3===r||4===r||5===r||7===r,this.isScript=10===this.familyClass,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),0!==this.italicAngle&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(t){var e;return(null!=(e=this.cmap.unicode)?e.codeMap[t]:void 0)||0},t.prototype.widthOfGlyph=function(t){var e;return e=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*e},t.prototype.widthOfString=function(t,e,n){var r,i,s,o,a;for(i=o=s=0,a=(t=""+t).length;0<=a?o<a:a<o;i=0<=a?++o:--o)r=t.charCodeAt(i),s+=this.widthOfGlyph(this.characterToGlyph(r))+n*(1e3/e)||0;return s*(e/1e3)},t.prototype.lineHeight=function(t,e){return null==e&&(e=!1),(this.ascender+(e?this.lineGap:0)-this.decender)/1e3*t},t}();var u,c=function(){function t(t){this.data=null!=t?t:[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(t){return this.data[this.pos++]=t},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},t.prototype.readInt32=function(){var t;return 2147483648<=(t=this.readUInt32())?t-4294967296:t},t.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},t.prototype.readInt16=function(){var t;return 32768<=(t=this.readUInt16())?t-65536:t},t.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},t.prototype.readString=function(t){var e,n,r;for(n=[],e=r=0;0<=t?r<t:t<r;e=0<=t?++r:--r)n[e]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(t){var e,n,r,i;for(i=[],e=n=0,r=t.length;0<=r?n<r:r<n;e=0<=r?++n:--n)i.push(this.writeByte(t.charCodeAt(e)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(t){return this.writeInt16(t)},t.prototype.readLongLong=function(){var t,e,n,r,i,s,o,a;return t=this.readByte(),e=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),a=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^e)+1099511627776*(255^n)+4294967296*(255^r)+16777216*(255^i)+65536*(255^s)+256*(255^o)+(255^a)+1):72057594037927940*t+281474976710656*e+1099511627776*n+4294967296*r+16777216*i+65536*s+256*o+a},t.prototype.writeLongLong=function(t){var e,n;return e=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(e>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(t){return this.writeInt32(t)},t.prototype.read=function(t){var e,n;for(e=[],n=0;0<=t?n<t:t<n;0<=t?++n:--n)e.push(this.readByte());return e},t.prototype.write=function(t){var e,n,r;for(r=[],e=0,n=t.length;e<n;e++)r.push(this.writeByte(t[e]));return r},t}(),h=function(){var t;function e(t){var e,n,r;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},n=0,r=this.tableCount;0<=r?n<r:r<n;0<=r?++n:--n)e={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[e.tag]=e}return e.prototype.encode=function(e){var n,r,i,s,o,a,l,u,h,d,p,f;for(f in d=Object.keys(e).length,o=Math.log(2),u=16*Math.floor(Math.log(d)/o),i=Math.floor(u/o),l=16*d-u,(r=new c).writeInt(this.scalarType),r.writeShort(d),r.writeShort(u),r.writeShort(i),r.writeShort(l),a=r.pos+16*d,s=null,p=[],e)for(h=e[f],r.writeString(f),r.writeInt(t(h)),r.writeInt(a),r.writeInt(h.length),p=p.concat(h),"head"===f&&(s=a),a+=h.length;a%4;)p.push(0),a++;return r.write(p),n=2981146554-t(r.data),r.pos=s+8,r.writeUInt32(n),r.data},t=function(t){var e,n,r,i;for(t=C.call(t);t.length%4;)t.push(0);for(n=new c(t),r=e=0,i=t.length;r<i;r+=4)e+=n.readUInt32();return 4294967295&e},e}(),d={}.hasOwnProperty,p=function(t,e){for(var n in e)d.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};u=function(){function t(t){var e;this.file=t,this.exists=!!(e=this.file.directory.tables[this.tag]),e&&(this.offset=e.offset,this.length=e.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var f=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,u),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var e;return(e=new c).writeInt(this.version),e.writeInt(this.revision),e.writeInt(this.checkSumAdjustment),e.writeInt(this.magicNumber),e.writeShort(this.flags),e.writeShort(this.unitsPerEm),e.writeLongLong(this.created),e.writeLongLong(this.modified),e.writeShort(this.xMin),e.writeShort(this.yMin),e.writeShort(this.xMax),e.writeShort(this.yMax),e.writeShort(this.macStyle),e.writeShort(this.lowestRecPPEM),e.writeShort(this.fontDirectionHint),e.writeShort(t),e.writeShort(this.glyphDataFormat),e.data},e}(),A=function(){function t(t,e){var n,r,i,s,o,a,l,u,c,h,d,p,f,A,m,g,y,w;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=e+t.readInt(),c=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=3===this.platformID&&1===this.encodingID&&4===this.format||0===this.platformID&&4===this.format,this.codeMap={},this.format){case 0:for(a=m=0;m<256;a=++m)this.codeMap[a]=t.readByte();break;case 4:for(d=t.readUInt16(),h=d/2,t.pos+=6,i=function(){var e,n;for(n=[],a=e=0;0<=h?e<h:h<e;a=0<=h?++e:--e)n.push(t.readUInt16());return n}(),t.pos+=2,f=function(){var e,n;for(n=[],a=e=0;0<=h?e<h:h<e;a=0<=h?++e:--e)n.push(t.readUInt16());return n}(),l=function(){var e,n;for(n=[],a=e=0;0<=h?e<h:h<e;a=0<=h?++e:--e)n.push(t.readUInt16());return n}(),u=function(){var e,n;for(n=[],a=e=0;0<=h?e<h:h<e;a=0<=h?++e:--e)n.push(t.readUInt16());return n}(),r=(this.length-t.pos+this.offset)/2,o=function(){var e,n;for(n=[],a=e=0;0<=r?e<r:r<e;a=0<=r?++e:--e)n.push(t.readUInt16());return n}(),a=g=0,w=i.length;g<w;a=++g)for(A=i[a],n=y=p=f[a];p<=A?y<=A:A<=y;n=p<=A?++y:--y)0===u[a]?s=n+l[a]:0!==(s=o[u[a]/2+(n-p)-(h-a)]||0)&&(s+=l[a]),this.codeMap[n]=65535&s}t.pos=c}return t.encode=function(t,e){var n,r,i,s,o,a,l,u,h,d,p,f,A,m,g,y,w,b,v,x,_,C,S,E,B,k,N,I,F,T,R,O,D,L,M,U,P,z,Q,H,$,V,q,j,K;switch(N=new c,s=Object.keys(t).sort((function(t,e){return t-e})),e){case"macroman":for(A=0,m=function(){var t,e;for(e=[],f=t=0;t<256;f=++t)e.push(0);return e}(),y={0:0},i={},I=0,O=s.length;I<O;I++)null==y[V=t[r=s[I]]]&&(y[V]=++A),i[r]={old:t[r],new:y[t[r]]},m[r]=y[t[r]];return N.writeUInt16(1),N.writeUInt16(0),N.writeUInt32(12),N.writeUInt16(0),N.writeUInt16(262),N.writeUInt16(0),N.write(m),{charMap:i,subtable:N.data,maxGlyphID:A+1};case"unicode":for(B=[],h=[],y={},n={},g=l=null,F=w=0,D=s.length;F<D;F++)null==y[b=t[r=s[F]]]&&(y[b]=++w),n[r]={old:b,new:y[b]},o=y[b]-r,null!=g&&o===l||(g&&h.push(g),B.push(r),l=o),g=r;for(g&&h.push(g),h.push(65535),B.push(65535),S=2*(C=B.length),_=2*Math.pow(Math.log(C)/Math.LN2,2),d=Math.log(_/2)/Math.LN2,x=2*C-_,a=[],v=[],p=[],f=T=0,L=B.length;T<L;f=++T){if(u=h[f],65535===(E=B[f])){a.push(0),v.push(0);break}if(32768<=E-(k=n[E].new))for(a.push(0),v.push(2*(p.length+C-f)),r=R=E;E<=u?R<=u:u<=R;r=E<=u?++R:--R)p.push(n[r].new);else a.push(k-E),v.push(0)}for(N.writeUInt16(3),N.writeUInt16(1),N.writeUInt32(12),N.writeUInt16(4),N.writeUInt16(16+8*C+2*p.length),N.writeUInt16(0),N.writeUInt16(S),N.writeUInt16(_),N.writeUInt16(d),N.writeUInt16(x),H=0,M=h.length;H<M;H++)N.writeUInt16(r=h[H]);for(N.writeUInt16(0),$=0,U=B.length;$<U;$++)N.writeUInt16(r=B[$]);for(q=0,P=a.length;q<P;q++)N.writeUInt16(o=a[q]);for(j=0,z=v.length;j<z;j++)N.writeUInt16(v[j]);for(K=0,Q=p.length;K<Q;K++)N.writeUInt16(A=p[K]);return{charMap:n,subtable:N.data,maxGlyphID:w+1}}},t}(),m=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,u),e.prototype.tag="cmap",e.prototype.parse=function(t){var e,n,r;for(t.pos=this.offset,this.version=t.readUInt16(),n=t.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=n?r<n:n<r;0<=n?++r:--r)e=new A(t,this.offset),this.tables.push(e),e.isUnicode&&null==this.unicode&&(this.unicode=e);return!0},e.encode=function(t,e){var n,r;return null==e&&(e="macroman"),n=A.encode(t,e),(r=new c).writeUInt16(0),r.writeUInt16(1),n.table=r.data.concat(n.subtable),n},e}(),g=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,u),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),y=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,u),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var e,n;for(n=[],e=0;e<10;++e)n.push(t.readByte());return n}(),this.charRange=function(){var e,n;for(n=[],e=0;e<4;++e)n.push(t.readInt());return n}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),0<this.version&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var e,n;for(n=[],e=0;e<2;++e)n.push(t.readInt());return n}(),1<this.version))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),w=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,u),e.prototype.tag="post",e.prototype.parse=function(t){var e,n,r,i;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:for(n=t.readUInt16(),this.glyphNameIndex=[],r=0;0<=n?r<n:n<r;0<=n?++r:--r)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],i=[];t.pos<this.offset+this.length;)e=t.readByte(),i.push(this.names.push(t.readString(e)));return i;case 151552:return n=t.readUInt16(),this.offsets=t.read(n);case 196608:break;case 262144:return this.map=(function(){var e,n,r;for(r=[],e=0,n=this.file.maxp.numGlyphs;0<=n?e<n:n<e;0<=n?++e:--e)r.push(t.readUInt32());return r}).call(this)}},e}(),b=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},v=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,u),e.prototype.tag="name",e.prototype.parse=function(t){var e,n,r,i,s,o,a,l,u,c,h,d;for(t.pos=this.offset,t.readShort(),e=t.readShort(),o=t.readShort(),n=[],i=u=0;0<=e?u<e:e<u;i=0<=e?++u:--u)n.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+o+t.readShort()});for(a={},i=c=0,h=n.length;c<h;i=++c)t.pos=(r=n[i]).offset,l=t.readString(r.length),s=new b(l,r),null==a[d=r.nameID]&&(a[d]=[]),a[r.nameID].push(s);this.strings=a,this.copyright=a[0],this.fontFamily=a[1],this.fontSubfamily=a[2],this.uniqueSubfamily=a[3],this.fontName=a[4],this.version=a[5];try{this.postscriptName=a[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch(t){this.postscriptName=a[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=a[7],this.manufacturer=a[8],this.designer=a[9],this.description=a[10],this.vendorUrl=a[11],this.designerUrl=a[12],this.license=a[13],this.licenseUrl=a[14],this.preferredFamily=a[15],this.preferredSubfamily=a[17],this.compatibleFull=a[18],this.sampleText=a[19]},e}(),x=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,u),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),_=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,u),e.prototype.tag="hmtx",e.prototype.parse=function(t){var e,n,r,i,s,o;for(t.pos=this.offset,this.metrics=[],r=0,s=this.file.hhea.numberOfMetrics;0<=s?r<s:s<r;0<=s?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(n=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var e,r;for(r=[],e=0;0<=n?e<n:n<e;0<=n?++e:--e)r.push(t.readInt16());return r}(),this.widths=(function(){var t,e,n,r;for(r=[],t=0,e=(n=this.metrics).length;t<e;t++)r.push(n[t].advance);return r}).call(this),e=this.widths[this.widths.length-1],o=[],i=0;0<=n?i<n:n<i;0<=n?++i:--i)o.push(this.widths.push(e));return o},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),C=[].slice,S=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,u),e.prototype.tag="glyf",e.prototype.parse=function(t){return this.cache={}},e.prototype.glyphFor=function(t){var e,n,r,i,s,o,a,l,u,h;return(t=t)in this.cache?this.cache[t]:(e=this.file.contents,n=(i=this.file.loca).indexOf(t),0===(r=i.lengthOf(t))?this.cache[t]=null:(e.pos=this.offset+n,s=(o=new c(e.read(r))).readShort(),l=o.readShort(),h=o.readShort(),a=o.readShort(),u=o.readShort(),this.cache[t]=-1===s?new B(o,l,h,a,u):new E(o,s,l,h,a,u),this.cache[t]))},e.prototype.encode=function(t,e,n){var r,i,s,o,a;for(s=[],i=[],o=0,a=e.length;o<a;o++)r=t[e[o]],i.push(s.length),r&&(s=s.concat(r.encode(n)));return i.push(s.length),{table:s,offsets:i}},e}(),E=function(){function t(t,e,n,r,i,s){this.raw=t,this.numberOfContours=e,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),B=function(){function t(t,e,n,r,i){var s,o;for(this.raw=t,this.xMin=e,this.yMin=n,this.xMax=r,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],s=this.raw;o=s.readShort(),this.glyphOffsets.push(s.pos),this.glyphIDs.push(s.readShort()),32&o;)s.pos+=1&o?4:2,128&o?s.pos+=8:64&o?s.pos+=4:8&o&&(s.pos+=2)}return t.prototype.encode=function(t){var e,n,r,i;for(n=new c(C.call(this.raw.data)),e=r=0,i=this.glyphIDs.length;r<i;e=++r)n.pos=this.glyphOffsets[e];return n.data},t}(),k=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,u),e.prototype.tag="loca",e.prototype.parse=function(t){return t.pos=this.offset,this.offsets=0===this.file.head.indexToLocFormat?(function(){var e,n,r;for(r=[],e=0,n=this.length;e<n;e+=2)r.push(2*t.readUInt16());return r}).call(this):(function(){var e,n,r;for(r=[],e=0,n=this.length;e<n;e+=4)r.push(t.readUInt32());return r}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,e){for(var n=new Uint32Array(this.offsets.length),r=0,i=0,s=0;s<n.length;++s)if(n[s]=r,i<e.length&&e[i]==s){++i,n[s]=r;var o=this.offsets[s+1]-this.offsets[s];0<o&&(r+=o)}for(var a=new Array(4*n.length),l=0;l<n.length;++l)a[4*l+3]=255&n[l],a[4*l+2]=(65280&n[l])>>8,a[4*l+1]=(16711680&n[l])>>16,a[4*l]=(4278190080&n[l])>>24;return a},e}(),N=function(){function t(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var t,e,n,r;for(e in n=this.font.cmap.tables[0].codeMap,t={},r=this.subset)t[e]=n[r[e]];return t},t.prototype.glyphsFor=function(t){var e,n,r,i,s,o,a;for(r={},s=0,o=t.length;s<o;s++)r[i=t[s]]=this.font.glyf.glyphFor(i);for(i in e=[],r)(null!=(n=r[i])?n.compound:void 0)&&e.push.apply(e,n.glyphIDs);if(0<e.length)for(i in a=this.glyphsFor(e))r[i]=n=a[i];return r},t.prototype.encode=function(t,e){var n,r,i,s,o,a,l,u,c,h,d,p,f,A;for(r in n=m.encode(this.generateCmap(),"unicode"),s=this.glyphsFor(t),h={0:0},A=n.charMap)h[(o=A[r]).old]=o.new;for(d in c=n.maxGlyphID,s)d in h||(h[d]=c++);return l=function(t){var e,n;for(e in n={},t)n[t[e]]=e;return n}(h),u=Object.keys(l).sort((function(t,e){return t-e})),p=function(){var t,e,n;for(n=[],t=0,e=u.length;t<e;t++)n.push(l[u[t]]);return n}(),i=this.font.glyf.encode(s,p,h),a=this.font.loca.encode(i.offsets,p),f={cmap:this.font.cmap.raw(),glyf:i.table,loca:a,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(e)},this.font.os2.exists&&(f["OS/2"]=this.font.os2.raw()),this.font.directory.encode(f)},t}();t.API.PDFObject=function(){var t;function e(){}return t=function(t,e){return(Array(e+1).join("0")+t).slice(-e)},e.convert=function(n){var r,i;if(Array.isArray(n))return"["+function(){var t,r,i;for(i=[],t=0,r=n.length;t<r;t++)i.push(e.convert(n[t]));return i}().join(" ")+"]";if("string"==typeof n)return"/"+n;if(null!=n?n.isString:void 0)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if("[object Object]"!=={}.toString.call(n))return""+n;for(r in i=["<<"],n)i.push("/"+r+" "+e.convert(n[r]));return i.push(">>"),i.join("\n")},e}()}(dt),Et="undefined"!=typeof self&&self||"undefined"!=typeof window&&window||"undefined"!=typeof global&&global||Function('return typeof this === "object" && this.content')()||Function("return this")(),Bt=function(){var t,e,n;function r(t){var e,n,r,i,s,o,a,l,u,c,h,d,p;for(this.data=t,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},s=null;;){switch(e=this.readUInt32(),l=(function(){var t,e;for(e=[],t=0;t<4;++t)e.push(String.fromCharCode(this.data[this.pos++]));return e}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(e);break;case"fcTL":s&&this.animation.frames.push(s),this.pos+=4,s={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},i=this.readUInt16(),r=this.readUInt16()||100,s.delay=1e3*i/r,s.disposeOp=this.data[this.pos++],s.blendOp=this.data[this.pos++],s.data=[];break;case"IDAT":case"fdAT":for("fdAT"===l&&(this.pos+=4,e-=4),t=(null!=s?s.data:void 0)||this.imgData,h=0;0<=e?h<e:e<h;0<=e?++h:--h)t.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(n=this.palette.length/3,this.transparency.indexed=this.read(e),this.transparency.indexed.length>n)throw new Error("More transparent colors than palette size");if(0<(u=n-this.transparency.indexed.length))for(d=0;0<=u?d<u:u<d;0<=u?++d:--d)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(e)[0];break;case 2:this.transparency.rgb=this.read(e)}break;case"tEXt":o=(c=this.read(e)).indexOf(0),a=String.fromCharCode.apply(String,c.slice(0,o)),this.text[a]=String.fromCharCode.apply(String,c.slice(o+1));break;case"IEND":return s&&this.animation.frames.push(s),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=4===(p=this.colorType)||6===p,this.pixelBitlength=this.bits*(this.colors+(this.hasAlphaChannel?1:0)),this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=e}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.load=function(t,e,n){var i;return"function"==typeof e&&(n=e),(i=new XMLHttpRequest).open("GET",t,!0),i.responseType="arraybuffer",i.onload=function(){var t;return t=new r(new Uint8Array(i.response||i.mozResponseArrayBuffer)),"function"==typeof(null!=e?e.getContext:void 0)&&t.render(e),"function"==typeof n?n(t):void 0},i.send(null)},r.prototype.read=function(t){var e,n;for(n=[],e=0;0<=t?e<t:t<e;0<=t?++e:--e)n.push(this.data[this.pos++]);return n},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(t){var e=this.pixelBitlength/8,n=new Uint8Array(this.width*this.height*e),r=0,i=this;if(null==t&&(t=this.imgData),0===t.length)return new Uint8Array(0);function s(s,o,a,l){var u,c,h,d,p,f,A,m,g,y,w,b,v,x,_,C,S,E,B,k,N=Math.ceil((i.width-s)/a),I=Math.ceil((i.height-o)/l),F=i.width==N&&i.height==I;for(v=e*N,w=F?n:new Uint8Array(v*I),f=t.length,c=b=0;b<I&&r<f;){switch(t[r++]){case 0:for(d=C=0;C<v;d=C+=1)w[c++]=t[r++];break;case 1:for(d=S=0;S<v;d=S+=1)u=t[r++],p=d<e?0:w[c-e],w[c++]=(u+p)%256;break;case 2:for(d=E=0;E<v;d=E+=1)u=t[r++],h=(d-d%e)/e,w[c++]=((x=b&&w[(b-1)*v+h*e+d%e])+u)%256;break;case 3:for(d=B=0;B<v;d=B+=1)u=t[r++],h=(d-d%e)/e,p=d<e?0:w[c-e],x=b&&w[(b-1)*v+h*e+d%e],w[c++]=(u+Math.floor((p+x)/2))%256;break;case 4:for(d=k=0;k<v;d=k+=1)u=t[r++],h=(d-d%e)/e,0===b?x=_=0:(x=w[(b-1)*v+h*e+d%e],_=h&&w[(b-1)*v+(h-1)*e+d%e]),A=(p=d<e?0:w[c-e])+x-_,m=Math.abs(A-p),g=Math.abs(A-x),y=Math.abs(A-_),w[c++]=(u+(m<=g&&m<=y?p:g<=y?x:_))%256;break;default:throw new Error("Invalid filter algorithm: "+t[r-1])}if(!F){var T=((o+b*l)*i.width+s)*e,R=b*v;for(d=0;d<N;d+=1){for(var O=0;O<e;O+=1)n[T++]=w[R++];T+=(a-1)*e}}b++}}return t=(t=new Ot(t)).getBytes(),1==i.interlaceMethod?(s(0,0,8,8),s(4,0,8,8),s(0,4,4,8),s(2,0,4,4),s(0,2,2,4),s(1,0,2,2),s(0,1,1,2)):s(0,0,1,1),n},r.prototype.decodePalette=function(){var t,e,n,r,i,s,o,a,l;for(n=this.palette,s=this.transparency.indexed||[],i=new Uint8Array((s.length||0)+n.length),r=0,e=o=t=0,a=n.length;o<a;e=o+=3)i[r++]=n[e],i[r++]=n[e+1],i[r++]=n[e+2],i[r++]=null!=(l=s[t++])?l:255;return i},r.prototype.copyToImageData=function(t,e){var n,r,i,s,o,a,l,u,c,h,d;if(r=this.colors,c=null,n=this.hasAlphaChannel,this.palette.length&&(c=null!=(d=this._decodedPalette)?d:this._decodedPalette=this.decodePalette(),r=4,n=!0),u=(i=t.data||t).length,o=c||e,s=a=0,1===r)for(;s<u;)l=c?4*e[s/4]:a,h=o[l++],i[s++]=h,i[s++]=h,i[s++]=h,i[s++]=n?o[l++]:255,a=l;else for(;s<u;)l=c?4*e[s/4]:a,i[s++]=o[l++],i[s++]=o[l++],i[s++]=o[l++],i[s++]=n?o[l++]:255,a=l},r.prototype.decode=function(){var t;return t=new Uint8Array(this.width*this.height*4),this.copyToImageData(t,this.decodePixels()),t};try{e=Et.document.createElement("canvas"),n=e.getContext("2d")}catch(s){return-1}return t=function(t){var r;return n.width=t.width,n.height=t.height,n.clearRect(0,0,t.width,t.height),n.putImageData(t,0,0),(r=new Image).src=e.toDataURL(),r},r.prototype.decodeFrames=function(e){var n,r,i,s,o,a,l,u;if(this.animation){for(u=[],r=o=0,a=(l=this.animation.frames).length;o<a;r=++o)i=e.createImageData((n=l[r]).width,n.height),s=this.decodePixels(new Uint8Array(n.data)),this.copyToImageData(i,s),n.imageData=i,u.push(n.image=t(i));return u}},r.prototype.renderFrame=function(t,e){var n,r,i;return n=(r=this.animation.frames)[e],i=r[e-1],0===e&&t.clearRect(0,0,this.width,this.height),1===(null!=i?i.disposeOp:void 0)?t.clearRect(i.xOffset,i.yOffset,i.width,i.height):2===(null!=i?i.disposeOp:void 0)&&t.putImageData(i.imageData,i.xOffset,i.yOffset),0===n.blendOp&&t.clearRect(n.xOffset,n.yOffset,n.width,n.height),t.drawImage(n.image,n.xOffset,n.yOffset)},r.prototype.animate=function(t){var e,n,r,i,s,o,a=this;return n=0,i=(o=this.animation).numFrames,r=o.frames,s=o.numPlays,(e=function(){var o,l;if(o=n++%i,l=r[o],a.renderFrame(t,o),1<i&&n/i<s)return a.animation._timeout=setTimeout(e,l.delay)})()},r.prototype.stopAnimation=function(){var t;return clearTimeout(null!=(t=this.animation)?t._timeout:void 0)},r.prototype.render=function(t){var e,n;return t._png&&t._png.stopAnimation(),t._png=this,t.width=this.width,t.height=this.height,e=t.getContext("2d"),this.animation?(this.decodeFrames(e),this.animate(e)):(n=e.createImageData(this.width,this.height),this.copyToImageData(n,this.decodePixels()),e.putImageData(n,0,0))},r}(),Et.PNG=Bt;var Rt=function(){function t(){this.pos=0,this.bufferLength=0,this.eof=!1,this.buffer=null}return t.prototype={ensureBuffer:function(t){var e=this.buffer,n=e?e.byteLength:0;if(t<n)return e;for(var r=512;r<t;)r<<=1;for(var i=new Uint8Array(r),s=0;s<n;++s)i[s]=e[s];return this.buffer=i},getByte:function(){for(var t=this.pos;this.bufferLength<=t;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},getBytes:function(t){var e=this.pos;if(t){this.ensureBuffer(e+t);for(var n=e+t;!this.eof&&this.bufferLength<n;)this.readBlock();var r=this.bufferLength;r<n&&(n=r)}else{for(;!this.eof;)this.readBlock();n=this.bufferLength}return this.pos=n,this.buffer.subarray(e,n)},lookChar:function(){for(var t=this.pos;this.bufferLength<=t;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var t=this.pos;this.bufferLength<=t;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(t,e,n){for(var r=t+e;this.bufferLength<=r&&!this.eof;)this.readBlock();return new Stream(this.buffer,t,e,n)},skip:function(t){t||(t=1),this.pos+=t},reset:function(){this.pos=0}},t}(),Ot=function(){if("undefined"!=typeof Uint32Array){var t=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),e=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),n=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),r=[new Uint32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59e4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],i=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];return(o.prototype=Object.create(Rt.prototype)).getBits=function(t){for(var e,n=this.codeSize,r=this.codeBuf,i=this.bytes,o=this.bytesPos;n<t;)void 0===(e=i[o++])&&s("Bad encoding in flate stream"),r|=e<<n,n+=8;return e=r&(1<<t)-1,this.codeBuf=r>>t,this.codeSize=n-=t,this.bytesPos=o,e},o.prototype.getCode=function(t){for(var e=t[0],n=t[1],r=this.codeSize,i=this.codeBuf,o=this.bytes,a=this.bytesPos;r<n;){var l;void 0===(l=o[a++])&&s("Bad encoding in flate stream"),i|=l<<r,r+=8}var u=e[i&(1<<n)-1],c=u>>16,h=65535&u;return(0==r||r<c||0==c)&&s("Bad encoding in flate stream"),this.codeBuf=i>>c,this.codeSize=r-c,this.bytesPos=a,h},o.prototype.generateHuffmanTable=function(t){for(var e=t.length,n=0,r=0;r<e;++r)t[r]>n&&(n=t[r]);for(var i=1<<n,s=new Uint32Array(i),o=1,a=0,l=2;o<=n;++o,a<<=1,l<<=1)for(var u=0;u<e;++u)if(t[u]==o){var c=0,h=a;for(r=0;r<o;++r)c=c<<1|1&h,h>>=1;for(r=c;r<i;r+=l)s[r]=o<<16|u;++a}return[s,n]},o.prototype.readBlock=function(){function o(t,e,n,r,i){for(var s=t.getBits(n)+r;0<s--;)e[f++]=i}var a=this.getBits(3);if(1&a&&(this.eof=!0),0!=(a>>=1)){var l,u;if(1==a)l=r,u=i;else if(2==a){for(var c=this.getBits(5)+257,h=this.getBits(5)+1,d=this.getBits(4)+4,p=Array(t.length),f=0;f<d;)p[t[f++]]=this.getBits(3);for(var A=this.generateHuffmanTable(p),m=0,g=(f=0,c+h),y=new Array(g);f<g;){var w=this.getCode(A);16==w?o(this,y,2,3,m):17==w?o(this,y,3,3,m=0):18==w?o(this,y,7,11,m=0):y[f++]=m=w}l=this.generateHuffmanTable(y.slice(0,c)),u=this.generateHuffmanTable(y.slice(c,g))}else s("Unknown block type in flate stream");for(var b=(T=this.buffer)?T.length:0,v=this.bufferLength;;){var x=this.getCode(l);if(x<256)b<=v+1&&(b=(T=this.ensureBuffer(v+1)).length),T[v++]=x;else{if(256==x)return void(this.bufferLength=v);var _=(x=e[x-=257])>>16;0<_&&(_=this.getBits(_)),m=(65535&x)+_,x=this.getCode(u),0<(_=(x=n[x])>>16)&&(_=this.getBits(_));var C=(65535&x)+_;b<=v+m&&(b=(T=this.ensureBuffer(v+m)).length);for(var S=0;S<m;++S,++v)T[v]=T[v-C]}}}else{var E,B=this.bytes,k=this.bytesPos;void 0===(E=B[k++])&&s("Bad block header in flate stream");var N=E;void 0===(E=B[k++])&&s("Bad block header in flate stream"),N|=E<<8,void 0===(E=B[k++])&&s("Bad block header in flate stream");var I=E;void 0===(E=B[k++])&&s("Bad block header in flate stream"),(I|=E<<8)!=(65535&~N)&&s("Bad uncompressed block length in flate stream"),this.codeBuf=0,this.codeSize=0;var F=this.bufferLength,T=this.ensureBuffer(F+N),R=F+N;this.bufferLength=R;for(var O=F;O<R;++O){if(void 0===(E=B[k++])){this.eof=!0;break}T[O]=E}this.bytesPos=k}},o}function s(t){throw new Error(t)}function o(t){var e=0,n=t[e++],r=t[e++];-1!=n&&-1!=r||s("Invalid header in flate stream"),8!=(15&n)&&s("Unknown compression method in flate stream"),((n<<8)+r)%31!=0&&s("Bad FCHECK in flate stream"),32&r&&s("FDICT bit set in flate stream"),this.bytes=t,this.bytesPos=2,this.codeSize=0,this.codeBuf=0,Rt.call(this)}}();window.tmp=Ot},void 0===(i=r.call(e,n,e,t))||(t.exports=i);try{t.exports=jsPDF}catch(s){}},"5ZxK":function(t,e,n){var r,i,s;!function(t){if(!t.numeric){var e={dim:function(t){var n;return"object"==typeof t?"object"==typeof(n=t[0])?"object"==typeof n[0]?e._dim(t):[t.length,n.length]:[t.length]:[]},_foreach2:function t(e,n,r,i){if(r===n.length-1)return i(e);var s,o=n[r],a=Array(o);for(s=o-1;s>=0;s--)a[s]=t(e[s],n,r+1,i);return a},cloneV:function(t){var e,n=t.length,r=Array(n);for(e=n-1;-1!==e;--e)r[e]=t[e];return r},clone:function(t){if("object"!=typeof t)return t;var n=e.cloneV,r=e.dim(t);return e._foreach2(t,r,0,n)},diag:function(t){var e,n,r,i,s=t.length,o=Array(s);for(e=s-1;e>=0;e--){for(i=Array(s),n=e+2,r=s-1;r>=n;r-=2)i[r]=0,i[r-1]=0;for(r>e&&(i[r]=0),i[e]=t[e],r=e-1;r>=1;r-=2)i[r]=0,i[r-1]=0;0===r&&(i[0]=0),o[e]=i}return o},rep:function(t,n,r){void 0===r&&(r=0);var i,s=t[r],o=Array(s);if(r===t.length-1){for(i=s-2;i>=0;i-=2)o[i+1]=n,o[i]=n;return-1===i&&(o[0]=n),o}for(i=s-1;i>=0;i--)o[i]=e.rep(t,n,r+1);return o},identity:function(t){return e.diag(e.rep([t],1))},inv:function(t){var n,r,i,s,o,a,l,u,c=e.dim(t),h=Math.abs,d=c[0],p=c[1],f=e.clone(t),A=e.identity(d);for(a=0;a<p;++a){var m=-1,g=-1;for(o=a;o!==d;++o)(l=h(f[o][a]))>g&&(m=o,g=l);for(r=f[m],f[m]=f[a],f[a]=r,s=A[m],A[m]=A[a],A[a]=s,u=r[a],l=a;l!==p;++l)r[l]/=u;for(l=p-1;-1!==l;--l)s[l]/=u;for(o=d-1;-1!==o;--o)if(o!==a){for(i=A[o],u=(n=f[o])[a],l=a+1;l!==p;++l)n[l]-=r[l]*u;for(l=p-1;l>0;--l)i[l]-=s[l]*u,i[--l]-=s[l]*u;0===l&&(i[0]-=s[0]*u)}}return A},dotMMsmall:function(t,e){var n,r,i,s,o,a,l,u,c,h,d;for(s=t.length,o=e.length,a=e[0].length,l=Array(s),n=s-1;n>=0;n--){for(u=Array(a),c=t[n],i=a-1;i>=0;i--){for(h=c[o-1]*e[o-1][i],r=o-2;r>=1;r-=2)h+=c[r]*e[r][i]+c[d=r-1]*e[d][i];0===r&&(h+=c[0]*e[0][i]),u[i]=h}l[n]=u}return l},dotMV:function(t,n){var r,i=t.length,s=Array(i),o=e.dotVV;for(r=i-1;r>=0;r--)s[r]=o(t[r],n);return s},dotVV:function(t,e){var n,r,i=t.length,s=t[i-1]*e[i-1];for(n=i-2;n>=1;n-=2)s+=t[n]*e[n]+t[r=n-1]*e[r];return 0===n&&(s+=t[0]*e[0]),s},transpose:function(t){var e,n,r,i,s,o=t.length,a=t[0].length,l=Array(a);for(n=0;n<a;n++)l[n]=Array(o);for(e=o-1;e>=1;e-=2){for(i=t[e],r=t[e-1],n=a-1;n>=1;--n)(s=l[n])[e]=i[n],s[e-1]=r[n],(s=l[--n])[e]=i[n],s[e-1]=r[n];0===n&&((s=l[0])[e]=i[0],s[e-1]=r[0])}if(0===e){for(r=t[0],n=a-1;n>=1;--n)l[n][0]=r[n],l[--n][0]=r[n];0===n&&(l[0][0]=r[0])}return l}};this.numeric=e,t.numeric=e}}(this),s=function(){"use strict";function t(t,e,n){if(n){var r=e;e=t,t=r}var i,s=[[t[0],t[1],1,0,0,0,-1*e[0]*t[0],-1*e[0]*t[1]],[0,0,0,t[0],t[1],1,-1*e[1]*t[0],-1*e[1]*t[1]],[t[2],t[3],1,0,0,0,-1*e[2]*t[2],-1*e[2]*t[3]],[0,0,0,t[2],t[3],1,-1*e[3]*t[2],-1*e[3]*t[3]],[t[4],t[5],1,0,0,0,-1*e[4]*t[4],-1*e[4]*t[5]],[0,0,0,t[4],t[5],1,-1*e[5]*t[4],-1*e[5]*t[5]],[t[6],t[7],1,0,0,0,-1*e[6]*t[6],-1*e[6]*t[7]],[0,0,0,t[6],t[7],1,-1*e[7]*t[6],-1*e[7]*t[7]]],o=e;try{i=numeric.inv(numeric.dotMMsmall(numeric.transpose(s),s))}catch(c){return console.log(c),[1,0,0,0,1,0,0,0]}for(var a=numeric.dotMMsmall(i,numeric.transpose(s)),l=numeric.dotMV(a,o),u=0;u<l.length;u++)l[u]=Math.round(1e10*l[u])/1e10;return l[8]=1,l}function e(n,r){return"undefined"!=typeof window&&window===this||void 0===this?new e(n,r):(this.srcPts=n,this.dstPts=r,this.coeffs=t(this.srcPts,this.dstPts,!1),this.coeffsInv=t(this.srcPts,this.dstPts,!0),this)}return e.prototype={transform:function(t,e){var n=[];return n[0]=(this.coeffs[0]*t+this.coeffs[1]*e+this.coeffs[2])/(this.coeffs[6]*t+this.coeffs[7]*e+1),n[1]=(this.coeffs[3]*t+this.coeffs[4]*e+this.coeffs[5])/(this.coeffs[6]*t+this.coeffs[7]*e+1),n},transformInverse:function(t,e){var n=[];return n[0]=(this.coeffsInv[0]*t+this.coeffsInv[1]*e+this.coeffsInv[2])/(this.coeffsInv[6]*t+this.coeffsInv[7]*e+1),n[1]=(this.coeffsInv[3]*t+this.coeffsInv[4]*e+this.coeffsInv[5])/(this.coeffsInv[6]*t+this.coeffsInv[7]*e+1),n}},e},void 0!==typeof t?t.exports=s():void 0===(i="function"==typeof(r=s)?r.call(e,n,e,t):r)||(t.exports=i)},AKnV:function(t,e,n){var r=n("ZYb/"),i=i||{};i.Posit=function(t,e){this.objectPoints=this.buildModel(t),this.focalLength=e,this.objectVectors=[],this.objectNormal=[],this.objectMatrix=[[],[],[]],this.init()},i.Posit.prototype.buildModel=function(t){var e=t/2;return[[-e,e,0],[e,e,0],[e,-e,0],[-e,-e,0]]},i.Posit.prototype.init=function(){var t,e=this.objectPoints.length,n=[],r=[],s=0,o=2;for(t=0;t<e;++t)this.objectVectors[t]=[this.objectPoints[t][0]-this.objectPoints[0][0],this.objectPoints[t][1]-this.objectPoints[0][1],this.objectPoints[t][2]-this.objectPoints[0][2]],n[t]=[this.objectVectors[t][0],this.objectVectors[t][1],this.objectVectors[t][2]];for(;0===s;)r[0]=this.objectVectors[1][1]*this.objectVectors[o][2]-this.objectVectors[1][2]*this.objectVectors[o][1],r[1]=this.objectVectors[1][2]*this.objectVectors[o][0]-this.objectVectors[1][0]*this.objectVectors[o][2],r[2]=this.objectVectors[1][0]*this.objectVectors[o][1]-this.objectVectors[1][1]*this.objectVectors[o][0],s=Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]),++o;for(t=0;t<3;++t)this.objectNormal[t]=r[t]/s;i.pseudoInverse(n,e,this.objectMatrix)},i.Posit.prototype.pose=function(t){var e,n,r,s,o,a,l=[[],[],[]],u=[[],[],[]],c=[],h=[[],[],[]],d=[[],[],[]],p=[],f=[];for(this.pos(t,l,u,c),e=(r=this.isValid(l,c))?this.iterate(t,l,c,h,p):{euclidean:-1,pixels:-1,maximum:-1},n=(s=this.isValid(u,c))?this.iterate(t,u,c,d,f):{euclidean:-1,pixels:-1,maximum:-1},o=0;o<3;++o)for(a=0;a<3;++a)r&&(p[o]-=h[o][a]*this.objectPoints[0][a]),s&&(f[o]-=d[o][a]*this.objectPoints[0][a]);return e.euclidean<n.euclidean?new i.Pose(e.pixels,h,p,n.pixels,d,f):new i.Pose(n.pixels,d,f,e.pixels,h,p)},i.Posit.prototype.pos=function(t,e,n,r){var i,s,o,a,l,u,c,h,d,p,f=this.objectPoints.length,A=[],m=[],g=[],y=[],w=[],b=[],v=[],x=[];for(d=0;d<f;++d)A[d]=[t[d].x-t[0].x,t[d].y-t[0].y];for(d=0;d<3;++d)for(m[d]=0,g[d]=0,p=0;p<f;++p)m[d]+=this.objectMatrix[d][p]*A[p][0],g[d]+=this.objectMatrix[d][p]*A[p][1];for(a=((s=g[0]*g[0]+g[1]*g[1]+g[2]*g[2])-(i=m[0]*m[0]+m[1]*m[1]+m[2]*m[2]))*(s-i)+(o=m[0]*g[0]+m[1]*g[1]+m[2]*g[2])*o*4,c=(l=s-i>=0?(s-i+Math.sqrt(a))/2:(s-i-Math.sqrt(a))/2)>=0?0===(u=Math.sqrt(l))?0:-o/u:0===(u=Math.sqrt(-o*o/l))?Math.sqrt(i-s):-o/u,d=0;d<3;++d)y[d]=m[d]+u*this.objectNormal[d],w[d]=g[d]+c*this.objectNormal[d];for(h=Math.sqrt(y[0]*y[0]+y[1]*y[1]+y[2]*y[2]),d=0;d<3;++d)b[d]=y[d]/h,v[d]=w[d]/h;for(x[0]=b[1]*v[2]-b[2]*v[1],x[1]=b[2]*v[0]-b[0]*v[2],x[2]=b[0]*v[1]-b[1]*v[0],d=0;d<3;++d)e[0][d]=b[d],e[1][d]=v[d],e[2][d]=x[d];for(d=0;d<3;++d)y[d]=m[d]-u*this.objectNormal[d],w[d]=g[d]-c*this.objectNormal[d];for(d=0;d<3;++d)b[d]=y[d]/h,v[d]=w[d]/h;for(x[0]=b[1]*v[2]-b[2]*v[1],x[1]=b[2]*v[0]-b[0]*v[2],x[2]=b[0]*v[1]-b[1]*v[0],d=0;d<3;++d)n[0][d]=b[d],n[1][d]=v[d],n[2][d]=x[d];r[0]=t[0].x/h,r[1]=t[0].y/h,r[2]=this.focalLength/h},i.Posit.prototype.isValid=function(t,e){for(var n,r=this.objectPoints.length,i=1/0,s=0;s<r;++s)(n=e[2]+(t[2][0]*this.objectVectors[s][0]+t[2][1]*this.objectVectors[s][1]+t[2][2]*this.objectVectors[s][2]))<i&&(i=n);return i>=0},i.Posit.prototype.iterate=function(t,e,n,r,i){var s,o,a,l,u,c,h,d,p,f=this.objectPoints.length,A=[],m=[],g=[[],[],[]],y=[[],[],[]],w=[],b=[],v=!1,x=0;for(d=0;d<f;++d)A[d]={x:t[d].x,y:t[d].y};for(d=0;d<3;++d){for(p=0;p<3;++p)r[d][p]=e[d][p];i[d]=n[d]}for(d=0;d<f;++d){for(a=0,p=0;p<3;++p)a+=this.objectVectors[d][p]*r[2][p]/i[2];m[d]={x:(1+a)*t[d].x,y:(1+a)*t[d].y}}for(o=0,d=0;d<f;++d)o+=Math.abs(m[d].x-A[d].x),o+=Math.abs(m[d].y-A[d].y);for(d=0;d<3;++d)w[d]=i[d]-(r[d][0]*this.objectPoints[0][0]+r[d][1]*this.objectPoints[0][1]+r[d][2]*this.objectPoints[0][2]);for(l=u=this.error(t,r,w),v=0===u.pixels||o<.01;x++<100&&!v;){for(d=0;d<f;++d)A[d].x=m[d].x,A[d].y=m[d].y;for(this.pos(m,g,y,i),d=0;d<3;++d)w[d]=i[d]-(g[d][0]*this.objectPoints[0][0]+g[d][1]*this.objectPoints[0][1]+g[d][2]*this.objectPoints[0][2]),b[d]=i[d]-(y[d][0]*this.objectPoints[0][0]+y[d][1]*this.objectPoints[0][1]+y[d][2]*this.objectPoints[0][2]);if(u=this.error(t,g,w),c=this.error(t,y,b),u.euclidean>=0&&c.euclidean>=0)if(c.euclidean<u.euclidean)for(l=c,d=0;d<3;++d)for(p=0;p<3;++p)r[d][p]=y[d][p];else for(l=u,d=0;d<3;++d)for(p=0;p<3;++p)r[d][p]=g[d][p];if(u.euclidean<0&&c.euclidean>=0)for(l=c,d=0;d<3;++d)for(p=0;p<3;++p)r[d][p]=y[d][p];if(c.euclidean<0&&u.euclidean>=0)for(l=u,d=0;d<3;++d)for(p=0;p<3;++p)r[d][p]=g[d][p];for(d=0;d<f;++d){for(a=0,p=0;p<3;++p)a+=this.objectVectors[d][p]*r[2][p]/i[2];m[d].x=(1+a)*t[d].x,m[d].y=(1+a)*t[d].y}for(s=o,o=0,d=0;d<f;++d)o+=Math.abs(m[d].x-A[d].x),o+=Math.abs(m[d].y-A[d].y);h=Math.abs(o-s),v=0===l.pixels||h<.01}return l},i.Posit.prototype.error=function(t,e,n){var r,i,s,o=this.objectPoints.length,a=[],l=[],u=[],c=0,h=0,d=0;if(!this.isValid(e,n))return{euclidean:-1,pixels:-1,maximum:-1};for(r=0;r<o;++r)for(a[r]=[],i=0;i<3;++i)a[r][i]=n[i];for(r=0;r<o;++r)for(i=0;i<3;++i)for(s=0;s<3;++s)a[r][i]+=e[i][s]*this.objectPoints[r][s];for(r=0;r<o;++r)for(l[r]=[],i=0;i<2;++i)l[r][i]=this.focalLength*a[r][i]/a[r][2];for(r=0;r<o;++r)u[r]=[l[r][0]-t[r].x,l[r][1]-t[r].y];for(r=0;r<o;++r)c+=Math.sqrt(u[r][0]*u[r][0]+u[r][1]*u[r][1]),h+=Math.abs(Math.round(l[r][0])-Math.round(t[r].x))+Math.abs(Math.round(l[r][1])-Math.round(t[r].y)),Math.abs(u[r][0])>d&&(d=Math.abs(u[r][0])),Math.abs(u[r][1])>d&&(d=Math.abs(u[r][1]));return{euclidean:c/o,pixels:h,maximum:d}},i.pseudoInverse=function(t,e,n){var i,s,o,a=[],l=[[],[],[]],u=[[],[],[]],c=0,h=0;for(r.svdcmp(t,e,3,a,l),i=0;i<3;++i)a[i]>c&&(c=a[i]);for(c*=.01,i=0;i<3;++i)a[i]<c&&(a[i]=0);for(s=0;s<3;++s)if(0===a[s])for(++h,o=s;o<2;++o){for(i=0;i<e;++i)t[i][o]=t[i][o+1];for(i=0;i<3;++i)l[i][o]=l[i][o+1]}for(s=0;s<2;++s)0===a[s]&&(a[s]=a[s+1]);for(i=0;i<3;++i)for(s=0;s<3-h;++s)u[i][s]=l[i][s]/a[s];for(i=0;i<3;++i)for(s=0;s<e;++s)for(n[i][s]=0,o=0;o<3-h;++o)n[i][s]+=u[i][o]*t[s][o]},i.Pose=function(t,e,n,r,i,s){this.bestError=t,this.bestRotation=e,this.bestTranslation=n,this.alternativeError=r,this.alternativeRotation=i,this.alternativeTranslation=s},t.exports=i},B9Yq:function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},CA5I:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("bO7W");e.IMAGE_SIZE=r.IMAGE_SIZE,e.CustomMobileNet=r.CustomMobileNet,e.load=r.load,e.loadFromFiles=r.loadFromFiles,e.loadTruncatedMobileNet=r.loadTruncatedMobileNet;var i=n("YD9d");e.TeachableMobileNet=i.TeachableMobileNet,e.createTeachable=i.createTeachable;var s=n("KuaA");e.Webcam=s.Webcam;var o=n("e1GX");e.version=o.version},EhIR:function(t,e,n){(function(t){var r;!function(t,i,s){function o(t){var e,n=this,r=(e=4022871197,function(t){t=t.toString();for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)});n.next=function(){var t=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=t-(n.c=0|t)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(t),n.s0<0&&(n.s0+=1),n.s1-=r(t),n.s1<0&&(n.s1+=1),n.s2-=r(t),n.s2<0&&(n.s2+=1),r=null}function a(t,e){return e.c=t.c,e.s0=t.s0,e.s1=t.s1,e.s2=t.s2,e}function l(t,e){var n=new o(t),r=e&&e.state,i=n.next;return i.int32=function(){return 4294967296*n.next()|0},i.double=function(){return i()+11102230246251565e-32*(2097152*i()|0)},i.quick=i,r&&("object"==typeof r&&a(r,n),i.state=function(){return a(n,{})}),i}i&&i.exports?i.exports=l:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return l}).call(e,n,e,i))||(i.exports=r):this.alea=l}(0,t,n("B9Yq"))}).call(this,n("YuTi")(t))},Iab2:function(t,e,n){var r,i;void 0===(i="function"==typeof(r=function(){"use strict";function e(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){s(r.response,e,n)},r.onerror=function(){console.error("could not download file")},r.send()}function n(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function r(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(e){var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(n)}}var i="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,s=i.saveAs||("object"!=typeof window||window!==i?function(){}:"download"in HTMLAnchorElement.prototype?function(t,s,o){var a=i.URL||i.webkitURL,l=document.createElement("a");l.download=s=s||t.name||"download",l.rel="noopener","string"==typeof t?(l.href=t,l.origin===location.origin?r(l):n(l.href)?e(t,s,o):r(l,l.target="_blank")):(l.href=a.createObjectURL(t),setTimeout((function(){a.revokeObjectURL(l.href)}),4e4),setTimeout((function(){r(l)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,i,s){if(i=i||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,s),i);else if(n(t))e(t,i,s);else{var o=document.createElement("a");o.href=t,o.target="_blank",setTimeout((function(){r(o)}))}}:function(t,n,r,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),"string"==typeof t)return e(t,n,r);var o="application/octet-stream"===t.type,a=/constructor/i.test(i.HTMLElement)||i.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||o&&a)&&"object"==typeof FileReader){var u=new FileReader;u.onloadend=function(){var t=u.result;t=l?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=t:location=t,s=null},u.readAsDataURL(t)}else{var c=i.URL||i.webkitURL,h=c.createObjectURL(t);s?s.location=h:location.href=h,s=null,setTimeout((function(){c.revokeObjectURL(h)}),4e4)}});i.saveAs=s.saveAs=s,t.exports=s})?r.apply(e,[]):r)||(t.exports=i)},KuaA:function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var i,s=arguments.length,o=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(s<3?i(o):s>3?i(e,n,o):i(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o},i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,s){function o(t){try{l(r.next(t))}catch(e){s(e)}}function a(t){try{l(r.throw(t))}catch(e){s(e)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}l((r=r.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(a){s=[6,a],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}};Object.defineProperty(e,"__esModule",{value:!0});var o=n("usyV"),a=n("/8/o"),l={facingMode:"user",frameRate:24};e.Webcam=function(){function t(t,e,n){void 0===t&&(t=400),void 0===e&&(e=400),void 0===n&&(n=!1),this.width=t,this.height=e,this.flip=n}return t.prototype.getWebcam=function(t){if(void 0===t&&(t={}),!window.navigator.mediaDevices||!window.navigator.mediaDevices.getUserMedia)return Promise.reject("Your browser does not support WebRTC. Please try another one.");t.width=640;var e=function(t){return t.facingMode=t.facingMode||l.facingMode,t.frameRate=t.frameRate||l.frameRate,t.aspectRatio=t.aspectRatio||l.aspectRatio,t}(t),n=document.createElement("video");return window.navigator.mediaDevices.getUserMedia({video:e}).then((function(t){return n.srcObject=t,n.addEventListener("loadedmetadata",(function(t){var e=n.videoHeight;n.width=n.videoWidth,n.height=e})),n}),(function(){return Promise.reject("Could not open your camera. You may have denied access.")}))},t.prototype.setup=function(t){return void 0===t&&(t={}),i(this,void 0,void 0,(function(){var e;return s(this,(function(n){switch(n.label){case 0:return this.webcam?[3,2]:(e=this,[4,this.getWebcam(t)]);case 1:e.webcam=n.sent(),this.canvas||(this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height),n.label=2;case 2:return[2]}}))}))},t.prototype.play=function(){return this.webcam.play()},t.prototype.pause=function(){this.webcam.pause()},t.prototype.stop=function(){this.stopStreamedVideo(this.webcam)},t.prototype.update=function(){this.renderCameraToCanvas()},t.prototype.stopStreamedVideo=function(t){t.srcObject.getTracks().forEach((function(t){t.stop()})),t.srcObject=null},t.prototype.renderCameraToCanvas=function(){if(this.canvas&&this.webcam){var t=this.canvas.getContext("2d");if(0!==this.webcam.videoWidth){var e=a.cropTo(this.webcam,this.width,this.flip);t.drawImage(e,0,0)}}},r([o.default],t.prototype,"getWebcam",null),r([o.default],t.prototype,"setup",null),r([o.default],t.prototype,"play",null),r([o.default],t.prototype,"pause",null),r([o.default],t.prototype,"stop",null),r([o.default],t.prototype,"update",null),r([o.default],t.prototype,"stopStreamedVideo",null),r([o.default],t.prototype,"renderCameraToCanvas",null),t}()},"Oy/b":function(t,e,n){var r;"undefined"!=typeof self&&self,r=function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,(function(e){return t[e]}).bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){},function(t,e,n){"use strict";n.r(e),n(0);var r=function(){function t(t,e,n){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=t,this.start=e,this.end=n}return t.range=function(e,n){return n?e&&e.loc&&n.loc&&e.loc.lexer===n.loc.lexer?new t(e.loc.lexer,e.loc.start,n.loc.end):null:e&&e.loc},t}(),i=function(){function t(t,e){this.text=void 0,this.loc=void 0,this.text=t,this.loc=e}return t.prototype.range=function(e,n){return new t(n,r.range(this,e))},t}(),s=function t(e,n){this.position=void 0;var r,i="KaTeX parse error: "+e,s=n&&n.loc;if(s&&s.start<=s.end){var o=s.lexer.input,a=s.end;i+=(r=s.start)===o.length?" at end of input: ":" at position "+(r+1)+": ";var l=o.slice(r,a).replace(/[^]/g,"$&\u0332");i+=(r>15?"\u2026"+o.slice(r-15,r):o.slice(0,r))+l+(a+15<o.length?o.slice(a,a+15)+"\u2026":o.slice(a))}var u=new Error(i);return u.name="ParseError",u.__proto__=t.prototype,u.position=r,u};s.prototype.__proto__=Error.prototype;var o=s,a=/([A-Z])/g,l={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},u=/[&><"']/g,c=function t(e){return"ordgroup"===e.type||"color"===e.type?1===e.body.length?t(e.body[0]):e:"font"===e.type?t(e.body):e},h=function(t,e){return-1!==t.indexOf(e)},d=function(t,e){return void 0===t?e:t},p=function(t){return String(t).replace(u,(function(t){return l[t]}))},f=function(t){return t.replace(a,"-$1").toLowerCase()},A=c,m=function(t){var e=c(t);return"mathord"===e.type||"textord"===e.type||"atom"===e.type},g=function(){function t(t){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.displayMode=d((t=t||{}).displayMode,!1),this.output=d(t.output,"htmlAndMathml"),this.leqno=d(t.leqno,!1),this.fleqn=d(t.fleqn,!1),this.throwOnError=d(t.throwOnError,!0),this.errorColor=d(t.errorColor,"#cc0000"),this.macros=t.macros||{},this.minRuleThickness=Math.max(0,d(t.minRuleThickness,0)),this.colorIsTextColor=d(t.colorIsTextColor,!1),this.strict=d(t.strict,"warn"),this.trust=d(t.trust,!1),this.maxSize=Math.max(0,d(t.maxSize,1/0)),this.maxExpand=Math.max(0,d(t.maxExpand,1e3))}var e=t.prototype;return e.reportNonstrict=function(t,e,n){var r=this.strict;if("function"==typeof r&&(r=r(t,e,n)),r&&"ignore"!==r){if(!0===r||"error"===r)throw new o("LaTeX-incompatible input and strict mode is set to 'error': "+e+" ["+t+"]",n);"warn"===r?"undefined"!=typeof console&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+e+" ["+t+"]"):"undefined"!=typeof console&&console.warn("LaTeX-incompatible input and strict mode is set to unrecognized '"+r+"': "+e+" ["+t+"]")}},e.useStrictBehavior=function(t,e,n){var r=this.strict;if("function"==typeof r)try{r=r(t,e,n)}catch(i){r="error"}return!(!r||"ignore"===r||!0!==r&&"error"!==r&&("warn"===r?("undefined"!=typeof console&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+e+" ["+t+"]"),1):("undefined"!=typeof console&&console.warn("LaTeX-incompatible input and strict mode is set to unrecognized '"+r+"': "+e+" ["+t+"]"),1)))},e.isTrusted=function(t){var e;t.url&&!t.protocol&&(t.protocol=null!=(e=/^\s*([^\\/#]*?)(?::|&#0*58|&#x0*3a)/i.exec(t.url))?e[1]:"_relative");var n="function"==typeof this.trust?this.trust(t):this.trust;return Boolean(n)},t}(),y=function(){function t(t,e,n){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=t,this.size=e,this.cramped=n}var e=t.prototype;return e.sup=function(){return w[b[this.id]]},e.sub=function(){return w[v[this.id]]},e.fracNum=function(){return w[x[this.id]]},e.fracDen=function(){return w[_[this.id]]},e.cramp=function(){return w[C[this.id]]},e.text=function(){return w[S[this.id]]},e.isTight=function(){return this.size>=2},t}(),w=[new y(0,0,!1),new y(1,0,!0),new y(2,1,!1),new y(3,1,!0),new y(4,2,!1),new y(5,2,!0),new y(6,3,!1),new y(7,3,!0)],b=[4,5,4,5,6,7,6,7],v=[5,5,5,5,7,7,7,7],x=[2,3,4,5,6,7,6,7],_=[3,3,5,5,7,7,7,7],C=[1,1,3,3,5,5,7,7],S=[0,1,2,3,2,3,2,3],E={DISPLAY:w[0],TEXT:w[2],SCRIPT:w[4],SCRIPTSCRIPT:w[6]},B=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}],k=[];function N(t){for(var e=0;e<k.length;e+=2)if(t>=k[e]&&t<=k[e+1])return!0;return!1}B.forEach((function(t){return t.blocks.forEach((function(t){return k.push.apply(k,t)}))}));var I={doubleleftarrow:"M262 157\nl10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3\n 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28\n 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5\nc2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5\n 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87\n-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7\n-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z\nm8 0v40h399730v-40zm0 194v40h399730v-40z",doublerightarrow:"M399738 392l\n-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5\n 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88\n-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68\n-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18\n-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782\nc-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3\n-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z",leftarrow:"M400000 241H110l3-3c68.7-52.7 113.7-120\n 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8\n-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247\nc-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208\n 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3\n 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202\n l-3-3h399890zM100 241v40h399900v-40z",leftbrace:"M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117\n-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7\n 5-6 9-10 13-.7 1-7.3 1-20 1H6z",leftbraceunder:"M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13\n 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688\n 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7\n-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z",leftgroup:"M400000 80\nH435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0\n 435 0h399565z",leftgroupunder:"M400000 262\nH435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219\n 435 219h399565z",leftharpoon:"M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3\n-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5\n-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7\n-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z",leftharpoonplus:"M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5\n 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3\n-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7\n-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z\nm0 0v40h400000v-40z",leftharpoondown:"M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333\n 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5\n 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667\n-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z",leftharpoondownplus:"M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12\n 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7\n-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0\nv40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z",lefthook:"M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5\n-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3\n-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21\n 71.5 23h399859zM103 281v-40h399897v40z",leftlinesegment:"M40 281 V428 H0 V94 H40 V241 H400000 v40z\nM40 281 V428 H0 V94 H40 V241 H400000 v40z",leftmapsto:"M40 281 V448H0V74H40V241H400000v40z\nM40 281 V448H0V74H40V241H400000v40z",leftToFrom:"M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23\n-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8\nc28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3\n 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z",longequal:"M0 50 h400000 v40H0z m0 194h40000v40H0z\nM0 50 h400000 v40H0z m0 194h40000v40H0z",midbrace:"M200428 334\nc-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14\n-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7\n 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11\n 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z",midbraceunder:"M199572 214\nc100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14\n 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3\n 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0\n-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z",oiintSize1:"M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6\n-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z\nm368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8\n60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z",oiintSize2:"M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8\n-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z\nm502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2\nc0 110 84 276 504 276s502.4-166 502.4-276z",oiiintSize1:"M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6\n-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z\nm525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0\n85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z",oiiintSize2:"M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8\n-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z\nm770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1\nc0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z",rightarrow:"M0 241v40h399891c-47.3 35.3-84 78-110 128\n-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20\n 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7\n 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85\n-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5\n-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67\n 151.7 139 205zm0 0v40h399900v-40z",rightbrace:"M400000 542l\n-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5\ns-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1\nc124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z",rightbraceunder:"M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3\n 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237\n-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z",rightgroup:"M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0\n 3-1 3-3v-38c-76-158-257-219-435-219H0z",rightgroupunder:"M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18\n 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z",rightharpoon:"M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3\n-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2\n-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58\n 69.2 92 94.5zm0 0v40h399900v-40z",rightharpoonplus:"M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11\n-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7\n 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z\nm0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z",rightharpoondown:"M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8\n 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5\n-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95\n-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z",rightharpoondownplus:"M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8\n 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3\n 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3\n-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z\nm0-194v40h400000v-40zm0 0v40h400000v-40z",righthook:"M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3\n 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0\n-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21\n 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z",rightlinesegment:"M399960 241 V94 h40 V428 h-40 V281 H0 v-40z\nM399960 241 V94 h40 V428 h-40 V281 H0 v-40z",rightToFrom:"M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23\n 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32\n-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142\n-167z M100 147v40h399900v-40zM0 341v40h399900v-40z",twoheadleftarrow:"M0 167c68 40\n 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69\n-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3\n-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19\n-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101\n 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z",twoheadrightarrow:"M400000 167\nc-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3\n 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42\n 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333\n-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70\n 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z",tilde1:"M200 55.538c-77 0-168 73.953-177 73.953-3 0-7\n-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0\n 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0\n 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128\n-68.267.847-113-73.952-191-73.952z",tilde2:"M344 55.266c-142 0-300.638 81.316-311.5 86.418\n-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9\n 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114\nc1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751\n 181.476 676 181.476c-149 0-189-126.21-332-126.21z",tilde3:"M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457\n-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0\n 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697\n 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696\n -338 0-409-156.573-744-156.573z",tilde4:"M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345\n-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409\n 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9\n 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409\n -175.236-744-175.236z",vec:"M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z",widehat1:"M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22\nc-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z",widehat2:"M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",widehat3:"M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",widehat4:"M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",widecheck1:"M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,\n-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z",widecheck2:"M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",widecheck3:"M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",widecheck4:"M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",baraboveleftarrow:"M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202\nc4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5\nc-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130\ns-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47\n121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6\ns2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11\nc0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z\nM100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z",rightarrowabovebar:"M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32\n-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0\n13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39\n-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5\n-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5\n-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67\n151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z",baraboveshortleftharpoon:"M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11\nc1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17\nc2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21\nc-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40\nc-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z\nM0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z",rightharpoonaboveshortbar:"M0,241 l0,40c399126,0,399993,0,399993,0\nc4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,\n-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6\nc-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z\nM0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z",shortbaraboveleftharpoon:"M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11\nc1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,\n1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,\n-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z\nM93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z",shortrightharpoonabovebar:"M53,241l0,40c398570,0,399437,0,399437,0\nc4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,\n-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6\nc-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z\nM500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z"},F=function(){function t(t){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=t,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}var e=t.prototype;return e.hasClass=function(t){return h(this.classes,t)},e.toNode=function(){for(var t=document.createDocumentFragment(),e=0;e<this.children.length;e++)t.appendChild(this.children[e].toNode());return t},e.toMarkup=function(){for(var t="",e=0;e<this.children.length;e++)t+=this.children[e].toMarkup();return t},e.toText=function(){return this.children.map((function(t){return t.toText()})).join("")},t}(),T=function(t){return t.filter((function(t){return t})).join(" ")},R=function(t,e,n){if(this.classes=t||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=n||{},e){e.style.isTight()&&this.classes.push("mtight");var r=e.getColor();r&&(this.style.color=r)}},O=function(t){var e=document.createElement(t);for(var n in e.className=T(this.classes),this.style)this.style.hasOwnProperty(n)&&(e.style[n]=this.style[n]);for(var r in this.attributes)this.attributes.hasOwnProperty(r)&&e.setAttribute(r,this.attributes[r]);for(var i=0;i<this.children.length;i++)e.appendChild(this.children[i].toNode());return e},D=function(t){var e="<"+t;this.classes.length&&(e+=' class="'+p(T(this.classes))+'"');var n="";for(var r in this.style)this.style.hasOwnProperty(r)&&(n+=f(r)+":"+this.style[r]+";");for(var i in n&&(e+=' style="'+p(n)+'"'),this.attributes)this.attributes.hasOwnProperty(i)&&(e+=" "+i+'="'+p(this.attributes[i])+'"');e+=">";for(var s=0;s<this.children.length;s++)e+=this.children[s].toMarkup();return e+"</"+t+">"},L=function(){function t(t,e,n,r){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,R.call(this,t,n,r),this.children=e||[]}var e=t.prototype;return e.setAttribute=function(t,e){this.attributes[t]=e},e.hasClass=function(t){return h(this.classes,t)},e.toNode=function(){return O.call(this,"span")},e.toMarkup=function(){return D.call(this,"span")},t}(),M=function(){function t(t,e,n,r){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,R.call(this,e,r),this.children=n||[],this.setAttribute("href",t)}var e=t.prototype;return e.setAttribute=function(t,e){this.attributes[t]=e},e.hasClass=function(t){return h(this.classes,t)},e.toNode=function(){return O.call(this,"a")},e.toMarkup=function(){return D.call(this,"a")},t}(),U=function(){function t(t,e,n){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=e,this.src=t,this.classes=["mord"],this.style=n}var e=t.prototype;return e.hasClass=function(t){return h(this.classes,t)},e.toNode=function(){var t=document.createElement("img");for(var e in t.src=this.src,t.alt=this.alt,t.className="mord",this.style)this.style.hasOwnProperty(e)&&(t.style[e]=this.style[e]);return t},e.toMarkup=function(){var t="<img  src='"+this.src+" 'alt='"+this.alt+"' ",e="";for(var n in this.style)this.style.hasOwnProperty(n)&&(e+=f(n)+":"+this.style[n]+";");return e&&(t+=' style="'+p(e)+'"'),t+"'/>"},t}(),P={"\xee":"\u0131\u0302","\xef":"\u0131\u0308","\xed":"\u0131\u0301","\xec":"\u0131\u0300"},z=function(){function t(t,e,n,r,i,s,o,a){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=t,this.height=e||0,this.depth=n||0,this.italic=r||0,this.skew=i||0,this.width=s||0,this.classes=o||[],this.style=a||{},this.maxFontSize=0;var l=function(t){for(var e=0;e<B.length;e++)for(var n=B[e],r=0;r<n.blocks.length;r++){var i=n.blocks[r];if(t>=i[0]&&t<=i[1])return n.name}return null}(this.text.charCodeAt(0));l&&this.classes.push(l+"_fallback"),/[\xee\xef\xed\xec]/.test(this.text)&&(this.text=P[this.text])}var e=t.prototype;return e.hasClass=function(t){return h(this.classes,t)},e.toNode=function(){var t=document.createTextNode(this.text),e=null;for(var n in this.italic>0&&((e=document.createElement("span")).style.marginRight=this.italic+"em"),this.classes.length>0&&((e=e||document.createElement("span")).className=T(this.classes)),this.style)this.style.hasOwnProperty(n)&&((e=e||document.createElement("span")).style[n]=this.style[n]);return e?(e.appendChild(t),e):t},e.toMarkup=function(){var t=!1,e="<span";this.classes.length&&(t=!0,e+=' class="',e+=p(T(this.classes)),e+='"');var n="";for(var r in this.italic>0&&(n+="margin-right:"+this.italic+"em;"),this.style)this.style.hasOwnProperty(r)&&(n+=f(r)+":"+this.style[r]+";");n&&(t=!0,e+=' style="'+p(n)+'"');var i=p(this.text);return t?(e+=">",e+=i,e+="</span>"):i},t}(),Q=function(){function t(t,e){this.children=void 0,this.attributes=void 0,this.children=t||[],this.attributes=e||{}}var e=t.prototype;return e.toNode=function(){var t=document.createElementNS("http://www.w3.org/2000/svg","svg");for(var e in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,e)&&t.setAttribute(e,this.attributes[e]);for(var n=0;n<this.children.length;n++)t.appendChild(this.children[n].toNode());return t},e.toMarkup=function(){var t="<svg";for(var e in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,e)&&(t+=" "+e+"='"+this.attributes[e]+"'");t+=">";for(var n=0;n<this.children.length;n++)t+=this.children[n].toMarkup();return t+"</svg>"},t}(),H=function(){function t(t,e){this.pathName=void 0,this.alternate=void 0,this.pathName=t,this.alternate=e}var e=t.prototype;return e.toNode=function(){var t=document.createElementNS("http://www.w3.org/2000/svg","path");return t.setAttribute("d",this.alternate?this.alternate:I[this.pathName]),t},e.toMarkup=function(){return this.alternate?"<path d='"+this.alternate+"'/>":"<path d='"+I[this.pathName]+"'/>"},t}(),$=function(){function t(t){this.attributes=void 0,this.attributes=t||{}}var e=t.prototype;return e.toNode=function(){var t=document.createElementNS("http://www.w3.org/2000/svg","line");for(var e in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,e)&&t.setAttribute(e,this.attributes[e]);return t},e.toMarkup=function(){var t="<line";for(var e in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,e)&&(t+=" "+e+"='"+this.attributes[e]+"'");return t+"/>"},t}();function V(t){if(t instanceof z)return t;throw new Error("Expected symbolNode but got "+String(t)+".")}var q={"AMS-Regular":{65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473]},"Fraktur-Regular":{33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],163:[0,.69444,0,0,.86853],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],163:[0,.69444,0,0,.76909],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],305:[0,.43056,0,.02778,.32246],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],567:[.19444,.43056,0,.08334,.38403],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.12,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,1],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.67,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.9,0,0,.278],8943:[-.19,.31,0,0,1.172],8945:[-.1,.82,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.744,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.744,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333]},"Math-Italic":{65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059]},"Math-Regular":{65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059]},"SansSerif-Bold":{33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212]},"Size1-Regular":{40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},j={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},K={"\xc5":"A","\xc7":"C","\xd0":"D","\xde":"o","\xe5":"a","\xe7":"c","\xf0":"d","\xfe":"o","\u0410":"A","\u0411":"B","\u0412":"B","\u0413":"F","\u0414":"A","\u0415":"E","\u0416":"K","\u0417":"3","\u0418":"N","\u0419":"N","\u041a":"K","\u041b":"N","\u041c":"M","\u041d":"H","\u041e":"O","\u041f":"N","\u0420":"P","\u0421":"C","\u0422":"T","\u0423":"y","\u0424":"O","\u0425":"X","\u0426":"U","\u0427":"h","\u0428":"W","\u0429":"W","\u042a":"B","\u042b":"X","\u042c":"B","\u042d":"3","\u042e":"X","\u042f":"R","\u0430":"a","\u0431":"b","\u0432":"a","\u0433":"r","\u0434":"y","\u0435":"e","\u0436":"m","\u0437":"e","\u0438":"n","\u0439":"n","\u043a":"n","\u043b":"n","\u043c":"m","\u043d":"n","\u043e":"o","\u043f":"n","\u0440":"p","\u0441":"c","\u0442":"o","\u0443":"y","\u0444":"b","\u0445":"x","\u0446":"n","\u0447":"n","\u0448":"w","\u0449":"w","\u044a":"a","\u044b":"m","\u044c":"a","\u044d":"e","\u044e":"m","\u044f":"r"};function W(t,e,n){if(!q[e])throw new Error("Font metrics not found for font: "+e+".");var r=t.charCodeAt(0),i=q[e][r];if(!i&&t[0]in K&&(r=K[t[0]].charCodeAt(0),i=q[e][r]),i||"text"!==n||N(r)&&(i=q[e][77]),i)return{depth:i[0],height:i[1],italic:i[2],skew:i[3],width:i[4]}}var G={},X={bin:1,close:1,inner:1,open:1,punct:1,rel:1},Y={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},J={math:{},text:{}},Z=J;function tt(t,e,n,r,i,s){J[t][i]={font:e,group:n,replace:r},s&&r&&(J[t][r]=J[t][i])}var et="main",nt="ams",rt="bin",it="mathord",st="op-token",ot="rel";tt("math",et,ot,"\u2261","\\equiv",!0),tt("math",et,ot,"\u227a","\\prec",!0),tt("math",et,ot,"\u227b","\\succ",!0),tt("math",et,ot,"\u223c","\\sim",!0),tt("math",et,ot,"\u22a5","\\perp"),tt("math",et,ot,"\u2aaf","\\preceq",!0),tt("math",et,ot,"\u2ab0","\\succeq",!0),tt("math",et,ot,"\u2243","\\simeq",!0),tt("math",et,ot,"\u2223","\\mid",!0),tt("math",et,ot,"\u226a","\\ll",!0),tt("math",et,ot,"\u226b","\\gg",!0),tt("math",et,ot,"\u224d","\\asymp",!0),tt("math",et,ot,"\u2225","\\parallel"),tt("math",et,ot,"\u22c8","\\bowtie",!0),tt("math",et,ot,"\u2323","\\smile",!0),tt("math",et,ot,"\u2291","\\sqsubseteq",!0),tt("math",et,ot,"\u2292","\\sqsupseteq",!0),tt("math",et,ot,"\u2250","\\doteq",!0),tt("math",et,ot,"\u2322","\\frown",!0),tt("math",et,ot,"\u220b","\\ni",!0),tt("math",et,ot,"\u221d","\\propto",!0),tt("math",et,ot,"\u22a2","\\vdash",!0),tt("math",et,ot,"\u22a3","\\dashv",!0),tt("math",et,ot,"\u220b","\\owns"),tt("math",et,"punct",".","\\ldotp"),tt("math",et,"punct","\u22c5","\\cdotp"),tt("math",et,"textord","#","\\#"),tt("text",et,"textord","#","\\#"),tt("math",et,"textord","&","\\&"),tt("text",et,"textord","&","\\&"),tt("math",et,"textord","\u2135","\\aleph",!0),tt("math",et,"textord","\u2200","\\forall",!0),tt("math",et,"textord","\u210f","\\hbar",!0),tt("math",et,"textord","\u2203","\\exists",!0),tt("math",et,"textord","\u2207","\\nabla",!0),tt("math",et,"textord","\u266d","\\flat",!0),tt("math",et,"textord","\u2113","\\ell",!0),tt("math",et,"textord","\u266e","\\natural",!0),tt("math",et,"textord","\u2663","\\clubsuit",!0),tt("math",et,"textord","\u2118","\\wp",!0),tt("math",et,"textord","\u266f","\\sharp",!0),tt("math",et,"textord","\u2662","\\diamondsuit",!0),tt("math",et,"textord","\u211c","\\Re",!0),tt("math",et,"textord","\u2661","\\heartsuit",!0),tt("math",et,"textord","\u2111","\\Im",!0),tt("math",et,"textord","\u2660","\\spadesuit",!0),tt("text",et,"textord","\xa7","\\S",!0),tt("text",et,"textord","\xb6","\\P",!0),tt("math",et,"textord","\u2020","\\dag"),tt("text",et,"textord","\u2020","\\dag"),tt("text",et,"textord","\u2020","\\textdagger"),tt("math",et,"textord","\u2021","\\ddag"),tt("text",et,"textord","\u2021","\\ddag"),tt("text",et,"textord","\u2021","\\textdaggerdbl"),tt("math",et,"close","\u23b1","\\rmoustache",!0),tt("math",et,"open","\u23b0","\\lmoustache",!0),tt("math",et,"close","\u27ef","\\rgroup",!0),tt("math",et,"open","\u27ee","\\lgroup",!0),tt("math",et,rt,"\u2213","\\mp",!0),tt("math",et,rt,"\u2296","\\ominus",!0),tt("math",et,rt,"\u228e","\\uplus",!0),tt("math",et,rt,"\u2293","\\sqcap",!0),tt("math",et,rt,"\u2217","\\ast"),tt("math",et,rt,"\u2294","\\sqcup",!0),tt("math",et,rt,"\u25ef","\\bigcirc"),tt("math",et,rt,"\u2219","\\bullet"),tt("math",et,rt,"\u2021","\\ddagger"),tt("math",et,rt,"\u2240","\\wr",!0),tt("math",et,rt,"\u2a3f","\\amalg"),tt("math",et,rt,"&","\\And"),tt("math",et,ot,"\u27f5","\\longleftarrow",!0),tt("math",et,ot,"\u21d0","\\Leftarrow",!0),tt("math",et,ot,"\u27f8","\\Longleftarrow",!0),tt("math",et,ot,"\u27f6","\\longrightarrow",!0),tt("math",et,ot,"\u21d2","\\Rightarrow",!0),tt("math",et,ot,"\u27f9","\\Longrightarrow",!0),tt("math",et,ot,"\u2194","\\leftrightarrow",!0),tt("math",et,ot,"\u27f7","\\longleftrightarrow",!0),tt("math",et,ot,"\u21d4","\\Leftrightarrow",!0),tt("math",et,ot,"\u27fa","\\Longleftrightarrow",!0),tt("math",et,ot,"\u21a6","\\mapsto",!0),tt("math",et,ot,"\u27fc","\\longmapsto",!0),tt("math",et,ot,"\u2197","\\nearrow",!0),tt("math",et,ot,"\u21a9","\\hookleftarrow",!0),tt("math",et,ot,"\u21aa","\\hookrightarrow",!0),tt("math",et,ot,"\u2198","\\searrow",!0),tt("math",et,ot,"\u21bc","\\leftharpoonup",!0),tt("math",et,ot,"\u21c0","\\rightharpoonup",!0),tt("math",et,ot,"\u2199","\\swarrow",!0),tt("math",et,ot,"\u21bd","\\leftharpoondown",!0),tt("math",et,ot,"\u21c1","\\rightharpoondown",!0),tt("math",et,ot,"\u2196","\\nwarrow",!0),tt("math",et,ot,"\u21cc","\\rightleftharpoons",!0),tt("math",nt,ot,"\u226e","\\nless",!0),tt("math",nt,ot,"\ue010","\\@nleqslant"),tt("math",nt,ot,"\ue011","\\@nleqq"),tt("math",nt,ot,"\u2a87","\\lneq",!0),tt("math",nt,ot,"\u2268","\\lneqq",!0),tt("math",nt,ot,"\ue00c","\\@lvertneqq"),tt("math",nt,ot,"\u22e6","\\lnsim",!0),tt("math",nt,ot,"\u2a89","\\lnapprox",!0),tt("math",nt,ot,"\u2280","\\nprec",!0),tt("math",nt,ot,"\u22e0","\\npreceq",!0),tt("math",nt,ot,"\u22e8","\\precnsim",!0),tt("math",nt,ot,"\u2ab9","\\precnapprox",!0),tt("math",nt,ot,"\u2241","\\nsim",!0),tt("math",nt,ot,"\ue006","\\@nshortmid"),tt("math",nt,ot,"\u2224","\\nmid",!0),tt("math",nt,ot,"\u22ac","\\nvdash",!0),tt("math",nt,ot,"\u22ad","\\nvDash",!0),tt("math",nt,ot,"\u22ea","\\ntriangleleft"),tt("math",nt,ot,"\u22ec","\\ntrianglelefteq",!0),tt("math",nt,ot,"\u228a","\\subsetneq",!0),tt("math",nt,ot,"\ue01a","\\@varsubsetneq"),tt("math",nt,ot,"\u2acb","\\subsetneqq",!0),tt("math",nt,ot,"\ue017","\\@varsubsetneqq"),tt("math",nt,ot,"\u226f","\\ngtr",!0),tt("math",nt,ot,"\ue00f","\\@ngeqslant"),tt("math",nt,ot,"\ue00e","\\@ngeqq"),tt("math",nt,ot,"\u2a88","\\gneq",!0),tt("math",nt,ot,"\u2269","\\gneqq",!0),tt("math",nt,ot,"\ue00d","\\@gvertneqq"),tt("math",nt,ot,"\u22e7","\\gnsim",!0),tt("math",nt,ot,"\u2a8a","\\gnapprox",!0),tt("math",nt,ot,"\u2281","\\nsucc",!0),tt("math",nt,ot,"\u22e1","\\nsucceq",!0),tt("math",nt,ot,"\u22e9","\\succnsim",!0),tt("math",nt,ot,"\u2aba","\\succnapprox",!0),tt("math",nt,ot,"\u2246","\\ncong",!0),tt("math",nt,ot,"\ue007","\\@nshortparallel"),tt("math",nt,ot,"\u2226","\\nparallel",!0),tt("math",nt,ot,"\u22af","\\nVDash",!0),tt("math",nt,ot,"\u22eb","\\ntriangleright"),tt("math",nt,ot,"\u22ed","\\ntrianglerighteq",!0),tt("math",nt,ot,"\ue018","\\@nsupseteqq"),tt("math",nt,ot,"\u228b","\\supsetneq",!0),tt("math",nt,ot,"\ue01b","\\@varsupsetneq"),tt("math",nt,ot,"\u2acc","\\supsetneqq",!0),tt("math",nt,ot,"\ue019","\\@varsupsetneqq"),tt("math",nt,ot,"\u22ae","\\nVdash",!0),tt("math",nt,ot,"\u2ab5","\\precneqq",!0),tt("math",nt,ot,"\u2ab6","\\succneqq",!0),tt("math",nt,ot,"\ue016","\\@nsubseteqq"),tt("math",nt,rt,"\u22b4","\\unlhd"),tt("math",nt,rt,"\u22b5","\\unrhd"),tt("math",nt,ot,"\u219a","\\nleftarrow",!0),tt("math",nt,ot,"\u219b","\\nrightarrow",!0),tt("math",nt,ot,"\u21cd","\\nLeftarrow",!0),tt("math",nt,ot,"\u21cf","\\nRightarrow",!0),tt("math",nt,ot,"\u21ae","\\nleftrightarrow",!0),tt("math",nt,ot,"\u21ce","\\nLeftrightarrow",!0),tt("math",nt,ot,"\u25b3","\\vartriangle"),tt("math",nt,"textord","\u210f","\\hslash"),tt("math",nt,"textord","\u25bd","\\triangledown"),tt("math",nt,"textord","\u25ca","\\lozenge"),tt("math",nt,"textord","\u24c8","\\circledS"),tt("math",nt,"textord","\xae","\\circledR"),tt("text",nt,"textord","\xae","\\circledR"),tt("math",nt,"textord","\u2221","\\measuredangle",!0),tt("math",nt,"textord","\u2204","\\nexists"),tt("math",nt,"textord","\u2127","\\mho"),tt("math",nt,"textord","\u2132","\\Finv",!0),tt("math",nt,"textord","\u2141","\\Game",!0),tt("math",nt,"textord","\u2035","\\backprime"),tt("math",nt,"textord","\u25b2","\\blacktriangle"),tt("math",nt,"textord","\u25bc","\\blacktriangledown"),tt("math",nt,"textord","\u25a0","\\blacksquare"),tt("math",nt,"textord","\u29eb","\\blacklozenge"),tt("math",nt,"textord","\u2605","\\bigstar"),tt("math",nt,"textord","\u2222","\\sphericalangle",!0),tt("math",nt,"textord","\u2201","\\complement",!0),tt("math",nt,"textord","\xf0","\\eth",!0),tt("math",nt,"textord","\u2571","\\diagup"),tt("math",nt,"textord","\u2572","\\diagdown"),tt("math",nt,"textord","\u25a1","\\square"),tt("math",nt,"textord","\u25a1","\\Box"),tt("math",nt,"textord","\u25ca","\\Diamond"),tt("math",nt,"textord","\xa5","\\yen",!0),tt("text",nt,"textord","\xa5","\\yen",!0),tt("math",nt,"textord","\u2713","\\checkmark",!0),tt("text",nt,"textord","\u2713","\\checkmark"),tt("math",nt,"textord","\u2136","\\beth",!0),tt("math",nt,"textord","\u2138","\\daleth",!0),tt("math",nt,"textord","\u2137","\\gimel",!0),tt("math",nt,"textord","\u03dd","\\digamma",!0),tt("math",nt,"textord","\u03f0","\\varkappa"),tt("math",nt,"open","\u250c","\\ulcorner",!0),tt("math",nt,"close","\u2510","\\urcorner",!0),tt("math",nt,"open","\u2514","\\llcorner",!0),tt("math",nt,"close","\u2518","\\lrcorner",!0),tt("math",nt,ot,"\u2266","\\leqq",!0),tt("math",nt,ot,"\u2a7d","\\leqslant",!0),tt("math",nt,ot,"\u2a95","\\eqslantless",!0),tt("math",nt,ot,"\u2272","\\lesssim",!0),tt("math",nt,ot,"\u2a85","\\lessapprox",!0),tt("math",nt,ot,"\u224a","\\approxeq",!0),tt("math",nt,rt,"\u22d6","\\lessdot"),tt("math",nt,ot,"\u22d8","\\lll",!0),tt("math",nt,ot,"\u2276","\\lessgtr",!0),tt("math",nt,ot,"\u22da","\\lesseqgtr",!0),tt("math",nt,ot,"\u2a8b","\\lesseqqgtr",!0),tt("math",nt,ot,"\u2251","\\doteqdot"),tt("math",nt,ot,"\u2253","\\risingdotseq",!0),tt("math",nt,ot,"\u2252","\\fallingdotseq",!0),tt("math",nt,ot,"\u223d","\\backsim",!0),tt("math",nt,ot,"\u22cd","\\backsimeq",!0),tt("math",nt,ot,"\u2ac5","\\subseteqq",!0),tt("math",nt,ot,"\u22d0","\\Subset",!0),tt("math",nt,ot,"\u228f","\\sqsubset",!0),tt("math",nt,ot,"\u227c","\\preccurlyeq",!0),tt("math",nt,ot,"\u22de","\\curlyeqprec",!0),tt("math",nt,ot,"\u227e","\\precsim",!0),tt("math",nt,ot,"\u2ab7","\\precapprox",!0),tt("math",nt,ot,"\u22b2","\\vartriangleleft"),tt("math",nt,ot,"\u22b4","\\trianglelefteq"),tt("math",nt,ot,"\u22a8","\\vDash",!0),tt("math",nt,ot,"\u22aa","\\Vvdash",!0),tt("math",nt,ot,"\u2323","\\smallsmile"),tt("math",nt,ot,"\u2322","\\smallfrown"),tt("math",nt,ot,"\u224f","\\bumpeq",!0),tt("math",nt,ot,"\u224e","\\Bumpeq",!0),tt("math",nt,ot,"\u2267","\\geqq",!0),tt("math",nt,ot,"\u2a7e","\\geqslant",!0),tt("math",nt,ot,"\u2a96","\\eqslantgtr",!0),tt("math",nt,ot,"\u2273","\\gtrsim",!0),tt("math",nt,ot,"\u2a86","\\gtrapprox",!0),tt("math",nt,rt,"\u22d7","\\gtrdot"),tt("math",nt,ot,"\u22d9","\\ggg",!0),tt("math",nt,ot,"\u2277","\\gtrless",!0),tt("math",nt,ot,"\u22db","\\gtreqless",!0),tt("math",nt,ot,"\u2a8c","\\gtreqqless",!0),tt("math",nt,ot,"\u2256","\\eqcirc",!0),tt("math",nt,ot,"\u2257","\\circeq",!0),tt("math",nt,ot,"\u225c","\\triangleq",!0),tt("math",nt,ot,"\u223c","\\thicksim"),tt("math",nt,ot,"\u2248","\\thickapprox"),tt("math",nt,ot,"\u2ac6","\\supseteqq",!0),tt("math",nt,ot,"\u22d1","\\Supset",!0),tt("math",nt,ot,"\u2290","\\sqsupset",!0),tt("math",nt,ot,"\u227d","\\succcurlyeq",!0),tt("math",nt,ot,"\u22df","\\curlyeqsucc",!0),tt("math",nt,ot,"\u227f","\\succsim",!0),tt("math",nt,ot,"\u2ab8","\\succapprox",!0),tt("math",nt,ot,"\u22b3","\\vartriangleright"),tt("math",nt,ot,"\u22b5","\\trianglerighteq"),tt("math",nt,ot,"\u22a9","\\Vdash",!0),tt("math",nt,ot,"\u2223","\\shortmid"),tt("math",nt,ot,"\u2225","\\shortparallel"),tt("math",nt,ot,"\u226c","\\between",!0),tt("math",nt,ot,"\u22d4","\\pitchfork",!0),tt("math",nt,ot,"\u221d","\\varpropto"),tt("math",nt,ot,"\u25c0","\\blacktriangleleft"),tt("math",nt,ot,"\u2234","\\therefore",!0),tt("math",nt,ot,"\u220d","\\backepsilon"),tt("math",nt,ot,"\u25b6","\\blacktriangleright"),tt("math",nt,ot,"\u2235","\\because",!0),tt("math",nt,ot,"\u22d8","\\llless"),tt("math",nt,ot,"\u22d9","\\gggtr"),tt("math",nt,rt,"\u22b2","\\lhd"),tt("math",nt,rt,"\u22b3","\\rhd"),tt("math",nt,ot,"\u2242","\\eqsim",!0),tt("math",et,ot,"\u22c8","\\Join"),tt("math",nt,ot,"\u2251","\\Doteq",!0),tt("math",nt,rt,"\u2214","\\dotplus",!0),tt("math",nt,rt,"\u2216","\\smallsetminus"),tt("math",nt,rt,"\u22d2","\\Cap",!0),tt("math",nt,rt,"\u22d3","\\Cup",!0),tt("math",nt,rt,"\u2a5e","\\doublebarwedge",!0),tt("math",nt,rt,"\u229f","\\boxminus",!0),tt("math",nt,rt,"\u229e","\\boxplus",!0),tt("math",nt,rt,"\u22c7","\\divideontimes",!0),tt("math",nt,rt,"\u22c9","\\ltimes",!0),tt("math",nt,rt,"\u22ca","\\rtimes",!0),tt("math",nt,rt,"\u22cb","\\leftthreetimes",!0),tt("math",nt,rt,"\u22cc","\\rightthreetimes",!0),tt("math",nt,rt,"\u22cf","\\curlywedge",!0),tt("math",nt,rt,"\u22ce","\\curlyvee",!0),tt("math",nt,rt,"\u229d","\\circleddash",!0),tt("math",nt,rt,"\u229b","\\circledast",!0),tt("math",nt,rt,"\u22c5","\\centerdot"),tt("math",nt,rt,"\u22ba","\\intercal",!0),tt("math",nt,rt,"\u22d2","\\doublecap"),tt("math",nt,rt,"\u22d3","\\doublecup"),tt("math",nt,rt,"\u22a0","\\boxtimes",!0),tt("math",nt,ot,"\u21e2","\\dashrightarrow",!0),tt("math",nt,ot,"\u21e0","\\dashleftarrow",!0),tt("math",nt,ot,"\u21c7","\\leftleftarrows",!0),tt("math",nt,ot,"\u21c6","\\leftrightarrows",!0),tt("math",nt,ot,"\u21da","\\Lleftarrow",!0),tt("math",nt,ot,"\u219e","\\twoheadleftarrow",!0),tt("math",nt,ot,"\u21a2","\\leftarrowtail",!0),tt("math",nt,ot,"\u21ab","\\looparrowleft",!0),tt("math",nt,ot,"\u21cb","\\leftrightharpoons",!0),tt("math",nt,ot,"\u21b6","\\curvearrowleft",!0),tt("math",nt,ot,"\u21ba","\\circlearrowleft",!0),tt("math",nt,ot,"\u21b0","\\Lsh",!0),tt("math",nt,ot,"\u21c8","\\upuparrows",!0),tt("math",nt,ot,"\u21bf","\\upharpoonleft",!0),tt("math",nt,ot,"\u21c3","\\downharpoonleft",!0),tt("math",nt,ot,"\u22b8","\\multimap",!0),tt("math",nt,ot,"\u21ad","\\leftrightsquigarrow",!0),tt("math",nt,ot,"\u21c9","\\rightrightarrows",!0),tt("math",nt,ot,"\u21c4","\\rightleftarrows",!0),tt("math",nt,ot,"\u21a0","\\twoheadrightarrow",!0),tt("math",nt,ot,"\u21a3","\\rightarrowtail",!0),tt("math",nt,ot,"\u21ac","\\looparrowright",!0),tt("math",nt,ot,"\u21b7","\\curvearrowright",!0),tt("math",nt,ot,"\u21bb","\\circlearrowright",!0),tt("math",nt,ot,"\u21b1","\\Rsh",!0),tt("math",nt,ot,"\u21ca","\\downdownarrows",!0),tt("math",nt,ot,"\u21be","\\upharpoonright",!0),tt("math",nt,ot,"\u21c2","\\downharpoonright",!0),tt("math",nt,ot,"\u21dd","\\rightsquigarrow",!0),tt("math",nt,ot,"\u21dd","\\leadsto"),tt("math",nt,ot,"\u21db","\\Rrightarrow",!0),tt("math",nt,ot,"\u21be","\\restriction"),tt("math",et,"textord","\u2018","`"),tt("math",et,"textord","$","\\$"),tt("text",et,"textord","$","\\$"),tt("text",et,"textord","$","\\textdollar"),tt("math",et,"textord","%","\\%"),tt("text",et,"textord","%","\\%"),tt("math",et,"textord","_","\\_"),tt("text",et,"textord","_","\\_"),tt("text",et,"textord","_","\\textunderscore"),tt("math",et,"textord","\u2220","\\angle",!0),tt("math",et,"textord","\u221e","\\infty",!0),tt("math",et,"textord","\u2032","\\prime"),tt("math",et,"textord","\u25b3","\\triangle"),tt("math",et,"textord","\u0393","\\Gamma",!0),tt("math",et,"textord","\u0394","\\Delta",!0),tt("math",et,"textord","\u0398","\\Theta",!0),tt("math",et,"textord","\u039b","\\Lambda",!0),tt("math",et,"textord","\u039e","\\Xi",!0),tt("math",et,"textord","\u03a0","\\Pi",!0),tt("math",et,"textord","\u03a3","\\Sigma",!0),tt("math",et,"textord","\u03a5","\\Upsilon",!0),tt("math",et,"textord","\u03a6","\\Phi",!0),tt("math",et,"textord","\u03a8","\\Psi",!0),tt("math",et,"textord","\u03a9","\\Omega",!0),tt("math",et,"textord","A","\u0391"),tt("math",et,"textord","B","\u0392"),tt("math",et,"textord","E","\u0395"),tt("math",et,"textord","Z","\u0396"),tt("math",et,"textord","H","\u0397"),tt("math",et,"textord","I","\u0399"),tt("math",et,"textord","K","\u039a"),tt("math",et,"textord","M","\u039c"),tt("math",et,"textord","N","\u039d"),tt("math",et,"textord","O","\u039f"),tt("math",et,"textord","P","\u03a1"),tt("math",et,"textord","T","\u03a4"),tt("math",et,"textord","X","\u03a7"),tt("math",et,"textord","\xac","\\neg",!0),tt("math",et,"textord","\xac","\\lnot"),tt("math",et,"textord","\u22a4","\\top"),tt("math",et,"textord","\u22a5","\\bot"),tt("math",et,"textord","\u2205","\\emptyset"),tt("math",nt,"textord","\u2205","\\varnothing"),tt("math",et,it,"\u03b1","\\alpha",!0),tt("math",et,it,"\u03b2","\\beta",!0),tt("math",et,it,"\u03b3","\\gamma",!0),tt("math",et,it,"\u03b4","\\delta",!0),tt("math",et,it,"\u03f5","\\epsilon",!0),tt("math",et,it,"\u03b6","\\zeta",!0),tt("math",et,it,"\u03b7","\\eta",!0),tt("math",et,it,"\u03b8","\\theta",!0),tt("math",et,it,"\u03b9","\\iota",!0),tt("math",et,it,"\u03ba","\\kappa",!0),tt("math",et,it,"\u03bb","\\lambda",!0),tt("math",et,it,"\u03bc","\\mu",!0),tt("math",et,it,"\u03bd","\\nu",!0),tt("math",et,it,"\u03be","\\xi",!0),tt("math",et,it,"\u03bf","\\omicron",!0),tt("math",et,it,"\u03c0","\\pi",!0),tt("math",et,it,"\u03c1","\\rho",!0),tt("math",et,it,"\u03c3","\\sigma",!0),tt("math",et,it,"\u03c4","\\tau",!0),tt("math",et,it,"\u03c5","\\upsilon",!0),tt("math",et,it,"\u03d5","\\phi",!0),tt("math",et,it,"\u03c7","\\chi",!0),tt("math",et,it,"\u03c8","\\psi",!0),tt("math",et,it,"\u03c9","\\omega",!0),tt("math",et,it,"\u03b5","\\varepsilon",!0),tt("math",et,it,"\u03d1","\\vartheta",!0),tt("math",et,it,"\u03d6","\\varpi",!0),tt("math",et,it,"\u03f1","\\varrho",!0),tt("math",et,it,"\u03c2","\\varsigma",!0),tt("math",et,it,"\u03c6","\\varphi",!0),tt("math",et,rt,"\u2217","*"),tt("math",et,rt,"+","+"),tt("math",et,rt,"\u2212","-"),tt("math",et,rt,"\u22c5","\\cdot",!0),tt("math",et,rt,"\u2218","\\circ"),tt("math",et,rt,"\xf7","\\div",!0),tt("math",et,rt,"\xb1","\\pm",!0),tt("math",et,rt,"\xd7","\\times",!0),tt("math",et,rt,"\u2229","\\cap",!0),tt("math",et,rt,"\u222a","\\cup",!0),tt("math",et,rt,"\u2216","\\setminus"),tt("math",et,rt,"\u2227","\\land"),tt("math",et,rt,"\u2228","\\lor"),tt("math",et,rt,"\u2227","\\wedge",!0),tt("math",et,rt,"\u2228","\\vee",!0),tt("math",et,"textord","\u221a","\\surd"),tt("math",et,"open","(","("),tt("math",et,"open","[","["),tt("math",et,"open","\u27e8","\\langle",!0),tt("math",et,"open","\u2223","\\lvert"),tt("math",et,"open","\u2225","\\lVert"),tt("math",et,"close",")",")"),tt("math",et,"close","]","]"),tt("math",et,"close","?","?"),tt("math",et,"close","!","!"),tt("math",et,"close","\u27e9","\\rangle",!0),tt("math",et,"close","\u2223","\\rvert"),tt("math",et,"close","\u2225","\\rVert"),tt("math",et,ot,"=","="),tt("math",et,ot,"<","<"),tt("math",et,ot,">",">"),tt("math",et,ot,":",":"),tt("math",et,ot,"\u2248","\\approx",!0),tt("math",et,ot,"\u2245","\\cong",!0),tt("math",et,ot,"\u2265","\\ge"),tt("math",et,ot,"\u2265","\\geq",!0),tt("math",et,ot,"\u2190","\\gets"),tt("math",et,ot,">","\\gt"),tt("math",et,ot,"\u2208","\\in",!0),tt("math",et,ot,"\ue020","\\@not"),tt("math",et,ot,"\u2282","\\subset",!0),tt("math",et,ot,"\u2283","\\supset",!0),tt("math",et,ot,"\u2286","\\subseteq",!0),tt("math",et,ot,"\u2287","\\supseteq",!0),tt("math",nt,ot,"\u2288","\\nsubseteq",!0),tt("math",nt,ot,"\u2289","\\nsupseteq",!0),tt("math",et,ot,"\u22a8","\\models"),tt("math",et,ot,"\u2190","\\leftarrow",!0),tt("math",et,ot,"\u2264","\\le"),tt("math",et,ot,"\u2264","\\leq",!0),tt("math",et,ot,"<","\\lt"),tt("math",et,ot,"\u2192","\\rightarrow",!0),tt("math",et,ot,"\u2192","\\to"),tt("math",nt,ot,"\u2271","\\ngeq",!0),tt("math",nt,ot,"\u2270","\\nleq",!0),tt("math",et,"spacing","\xa0","\\ "),tt("math",et,"spacing","\xa0","~"),tt("math",et,"spacing","\xa0","\\space"),tt("math",et,"spacing","\xa0","\\nobreakspace"),tt("text",et,"spacing","\xa0","\\ "),tt("text",et,"spacing","\xa0","~"),tt("text",et,"spacing","\xa0","\\space"),tt("text",et,"spacing","\xa0","\\nobreakspace"),tt("math",et,"spacing",null,"\\nobreak"),tt("math",et,"spacing",null,"\\allowbreak"),tt("math",et,"punct",",",","),tt("math",et,"punct",";",";"),tt("math",nt,rt,"\u22bc","\\barwedge",!0),tt("math",nt,rt,"\u22bb","\\veebar",!0),tt("math",et,rt,"\u2299","\\odot",!0),tt("math",et,rt,"\u2295","\\oplus",!0),tt("math",et,rt,"\u2297","\\otimes",!0),tt("math",et,"textord","\u2202","\\partial",!0),tt("math",et,rt,"\u2298","\\oslash",!0),tt("math",nt,rt,"\u229a","\\circledcirc",!0),tt("math",nt,rt,"\u22a1","\\boxdot",!0),tt("math",et,rt,"\u25b3","\\bigtriangleup"),tt("math",et,rt,"\u25bd","\\bigtriangledown"),tt("math",et,rt,"\u2020","\\dagger"),tt("math",et,rt,"\u22c4","\\diamond"),tt("math",et,rt,"\u22c6","\\star"),tt("math",et,rt,"\u25c3","\\triangleleft"),tt("math",et,rt,"\u25b9","\\triangleright"),tt("math",et,"open","{","\\{"),tt("text",et,"textord","{","\\{"),tt("text",et,"textord","{","\\textbraceleft"),tt("math",et,"close","}","\\}"),tt("text",et,"textord","}","\\}"),tt("text",et,"textord","}","\\textbraceright"),tt("math",et,"open","{","\\lbrace"),tt("math",et,"close","}","\\rbrace"),tt("math",et,"open","[","\\lbrack"),tt("text",et,"textord","[","\\lbrack"),tt("math",et,"close","]","\\rbrack"),tt("text",et,"textord","]","\\rbrack"),tt("math",et,"open","(","\\lparen"),tt("math",et,"close",")","\\rparen"),tt("text",et,"textord","<","\\textless"),tt("text",et,"textord",">","\\textgreater"),tt("math",et,"open","\u230a","\\lfloor",!0),tt("math",et,"close","\u230b","\\rfloor",!0),tt("math",et,"open","\u2308","\\lceil",!0),tt("math",et,"close","\u2309","\\rceil",!0),tt("math",et,"textord","\\","\\backslash"),tt("math",et,"textord","\u2223","|"),tt("math",et,"textord","\u2223","\\vert"),tt("text",et,"textord","|","\\textbar"),tt("math",et,"textord","\u2225","\\|"),tt("math",et,"textord","\u2225","\\Vert"),tt("text",et,"textord","\u2225","\\textbardbl"),tt("text",et,"textord","~","\\textasciitilde"),tt("text",et,"textord","\\","\\textbackslash"),tt("text",et,"textord","^","\\textasciicircum"),tt("math",et,ot,"\u2191","\\uparrow",!0),tt("math",et,ot,"\u21d1","\\Uparrow",!0),tt("math",et,ot,"\u2193","\\downarrow",!0),tt("math",et,ot,"\u21d3","\\Downarrow",!0),tt("math",et,ot,"\u2195","\\updownarrow",!0),tt("math",et,ot,"\u21d5","\\Updownarrow",!0),tt("math",et,st,"\u2210","\\coprod"),tt("math",et,st,"\u22c1","\\bigvee"),tt("math",et,st,"\u22c0","\\bigwedge"),tt("math",et,st,"\u2a04","\\biguplus"),tt("math",et,st,"\u22c2","\\bigcap"),tt("math",et,st,"\u22c3","\\bigcup"),tt("math",et,st,"\u222b","\\int"),tt("math",et,st,"\u222b","\\intop"),tt("math",et,st,"\u222c","\\iint"),tt("math",et,st,"\u222d","\\iiint"),tt("math",et,st,"\u220f","\\prod"),tt("math",et,st,"\u2211","\\sum"),tt("math",et,st,"\u2a02","\\bigotimes"),tt("math",et,st,"\u2a01","\\bigoplus"),tt("math",et,st,"\u2a00","\\bigodot"),tt("math",et,st,"\u222e","\\oint"),tt("math",et,st,"\u222f","\\oiint"),tt("math",et,st,"\u2230","\\oiiint"),tt("math",et,st,"\u2a06","\\bigsqcup"),tt("math",et,st,"\u222b","\\smallint"),tt("text",et,"inner","\u2026","\\textellipsis"),tt("math",et,"inner","\u2026","\\mathellipsis"),tt("text",et,"inner","\u2026","\\ldots",!0),tt("math",et,"inner","\u2026","\\ldots",!0),tt("math",et,"inner","\u22ef","\\@cdots",!0),tt("math",et,"inner","\u22f1","\\ddots",!0),tt("math",et,"textord","\u22ee","\\varvdots"),tt("math",et,"accent-token","\u02ca","\\acute"),tt("math",et,"accent-token","\u02cb","\\grave"),tt("math",et,"accent-token","\xa8","\\ddot"),tt("math",et,"accent-token","~","\\tilde"),tt("math",et,"accent-token","\u02c9","\\bar"),tt("math",et,"accent-token","\u02d8","\\breve"),tt("math",et,"accent-token","\u02c7","\\check"),tt("math",et,"accent-token","^","\\hat"),tt("math",et,"accent-token","\u20d7","\\vec"),tt("math",et,"accent-token","\u02d9","\\dot"),tt("math",et,"accent-token","\u02da","\\mathring"),tt("math",et,it,"\u0131","\\imath",!0),tt("math",et,it,"\u0237","\\jmath",!0),tt("text",et,"textord","\u0131","\\i",!0),tt("text",et,"textord","\u0237","\\j",!0),tt("text",et,"textord","\xdf","\\ss",!0),tt("text",et,"textord","\xe6","\\ae",!0),tt("text",et,"textord","\xe6","\\ae",!0),tt("text",et,"textord","\u0153","\\oe",!0),tt("text",et,"textord","\xf8","\\o",!0),tt("text",et,"textord","\xc6","\\AE",!0),tt("text",et,"textord","\u0152","\\OE",!0),tt("text",et,"textord","\xd8","\\O",!0),tt("text",et,"accent-token","\u02ca","\\'"),tt("text",et,"accent-token","\u02cb","\\`"),tt("text",et,"accent-token","\u02c6","\\^"),tt("text",et,"accent-token","\u02dc","\\~"),tt("text",et,"accent-token","\u02c9","\\="),tt("text",et,"accent-token","\u02d8","\\u"),tt("text",et,"accent-token","\u02d9","\\."),tt("text",et,"accent-token","\u02da","\\r"),tt("text",et,"accent-token","\u02c7","\\v"),tt("text",et,"accent-token","\xa8",'\\"'),tt("text",et,"accent-token","\u02dd","\\H"),tt("text",et,"accent-token","\u25ef","\\textcircled");var at={"--":!0,"---":!0,"``":!0,"''":!0};tt("text",et,"textord","\u2013","--"),tt("text",et,"textord","\u2013","\\textendash"),tt("text",et,"textord","\u2014","---"),tt("text",et,"textord","\u2014","\\textemdash"),tt("text",et,"textord","\u2018","`"),tt("text",et,"textord","\u2018","\\textquoteleft"),tt("text",et,"textord","\u2019","'"),tt("text",et,"textord","\u2019","\\textquoteright"),tt("text",et,"textord","\u201c","``"),tt("text",et,"textord","\u201c","\\textquotedblleft"),tt("text",et,"textord","\u201d","''"),tt("text",et,"textord","\u201d","\\textquotedblright"),tt("math",et,"textord","\xb0","\\degree",!0),tt("text",et,"textord","\xb0","\\degree"),tt("text",et,"textord","\xb0","\\textdegree",!0),tt("math",et,it,"\xa3","\\pounds"),tt("math",et,it,"\xa3","\\mathsterling",!0),tt("text",et,it,"\xa3","\\pounds"),tt("text",et,it,"\xa3","\\textsterling",!0),tt("math",nt,"textord","\u2720","\\maltese"),tt("text",nt,"textord","\u2720","\\maltese"),tt("text",et,"spacing","\xa0","\\ "),tt("text",et,"spacing","\xa0"," "),tt("text",et,"spacing","\xa0","~");for(var lt=0;lt<'0123456789/@."'.length;lt++){var ut='0123456789/@."'.charAt(lt);tt("math",et,"textord",ut,ut)}for(var ct=0;ct<'0123456789!@*()-=+[]<>|";:?/.,'.length;ct++){var ht='0123456789!@*()-=+[]<>|";:?/.,'.charAt(ct);tt("text",et,"textord",ht,ht)}for(var dt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",pt=0;pt<dt.length;pt++){var ft=dt.charAt(pt);tt("math",et,it,ft,ft),tt("text",et,"textord",ft,ft)}tt("math",nt,"textord","C","\u2102"),tt("text",nt,"textord","C","\u2102"),tt("math",nt,"textord","H","\u210d"),tt("text",nt,"textord","H","\u210d"),tt("math",nt,"textord","N","\u2115"),tt("text",nt,"textord","N","\u2115"),tt("math",nt,"textord","P","\u2119"),tt("text",nt,"textord","P","\u2119"),tt("math",nt,"textord","Q","\u211a"),tt("text",nt,"textord","Q","\u211a"),tt("math",nt,"textord","R","\u211d"),tt("text",nt,"textord","R","\u211d"),tt("math",nt,"textord","Z","\u2124"),tt("text",nt,"textord","Z","\u2124"),tt("math",et,it,"h","\u210e"),tt("text",et,it,"h","\u210e");for(var At="",mt=0;mt<dt.length;mt++){var gt=dt.charAt(mt);tt("math",et,it,gt,At=String.fromCharCode(55349,56320+mt)),tt("text",et,"textord",gt,At),tt("math",et,it,gt,At=String.fromCharCode(55349,56372+mt)),tt("text",et,"textord",gt,At),tt("math",et,it,gt,At=String.fromCharCode(55349,56424+mt)),tt("text",et,"textord",gt,At),tt("math",et,it,gt,At=String.fromCharCode(55349,56580+mt)),tt("text",et,"textord",gt,At),tt("math",et,it,gt,At=String.fromCharCode(55349,56736+mt)),tt("text",et,"textord",gt,At),tt("math",et,it,gt,At=String.fromCharCode(55349,56788+mt)),tt("text",et,"textord",gt,At),tt("math",et,it,gt,At=String.fromCharCode(55349,56840+mt)),tt("text",et,"textord",gt,At),tt("math",et,it,gt,At=String.fromCharCode(55349,56944+mt)),tt("text",et,"textord",gt,At),mt<26&&(tt("math",et,it,gt,At=String.fromCharCode(55349,56632+mt)),tt("text",et,"textord",gt,At),tt("math",et,it,gt,At=String.fromCharCode(55349,56476+mt)),tt("text",et,"textord",gt,At))}tt("math",et,it,"k",At=String.fromCharCode(55349,56668)),tt("text",et,"textord","k",At);for(var yt=0;yt<10;yt++){var wt=yt.toString();tt("math",et,it,wt,At=String.fromCharCode(55349,57294+yt)),tt("text",et,"textord",wt,At),tt("math",et,it,wt,At=String.fromCharCode(55349,57314+yt)),tt("text",et,"textord",wt,At),tt("math",et,it,wt,At=String.fromCharCode(55349,57324+yt)),tt("text",et,"textord",wt,At),tt("math",et,it,wt,At=String.fromCharCode(55349,57334+yt)),tt("text",et,"textord",wt,At)}for(var bt=0;bt<"\xc7\xd0\xde\xe7\xfe".length;bt++){var vt="\xc7\xd0\xde\xe7\xfe".charAt(bt);tt("math",et,it,vt,vt),tt("text",et,"textord",vt,vt)}tt("text",et,"textord","\xf0","\xf0"),tt("text",et,"textord","\u2013","\u2013"),tt("text",et,"textord","\u2014","\u2014"),tt("text",et,"textord","\u2018","\u2018"),tt("text",et,"textord","\u2019","\u2019"),tt("text",et,"textord","\u201c","\u201c"),tt("text",et,"textord","\u201d","\u201d");var xt=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathdefault","textit","Math-Italic"],["mathdefault","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["","",""],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],_t=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],Ct=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],St=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],Et=function(t,e){return e.size<2?t:Ct[t-1][e.size-1]},Bt=function(){function t(e){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=e.style,this.color=e.color,this.size=e.size||t.BASESIZE,this.textSize=e.textSize||this.size,this.phantom=!!e.phantom,this.font=e.font||"",this.fontFamily=e.fontFamily||"",this.fontWeight=e.fontWeight||"",this.fontShape=e.fontShape||"",this.sizeMultiplier=St[this.size-1],this.maxSize=e.maxSize,this.minRuleThickness=e.minRuleThickness,this._fontMetrics=void 0}var e=t.prototype;return e.extend=function(e){var n={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);return new t(n)},e.havingStyle=function(t){return this.style===t?this:this.extend({style:t,size:Et(this.textSize,t)})},e.havingCrampedStyle=function(){return this.havingStyle(this.style.cramp())},e.havingSize=function(t){return this.size===t&&this.textSize===t?this:this.extend({style:this.style.text(),size:t,textSize:t,sizeMultiplier:St[t-1]})},e.havingBaseStyle=function(e){e=e||this.style.text();var n=Et(t.BASESIZE,e);return this.size===n&&this.textSize===t.BASESIZE&&this.style===e?this:this.extend({style:e,size:n})},e.havingBaseSizing=function(){var t;switch(this.style.id){case 4:case 5:t=3;break;case 6:case 7:t=1;break;default:t=6}return this.extend({style:this.style.text(),size:t})},e.withColor=function(t){return this.extend({color:t})},e.withPhantom=function(){return this.extend({phantom:!0})},e.withFont=function(t){return this.extend({font:t})},e.withTextFontFamily=function(t){return this.extend({fontFamily:t,font:""})},e.withTextFontWeight=function(t){return this.extend({fontWeight:t,font:""})},e.withTextFontShape=function(t){return this.extend({fontShape:t,font:""})},e.sizingClasses=function(t){return t.size!==this.size?["sizing","reset-size"+t.size,"size"+this.size]:[]},e.baseSizingClasses=function(){return this.size!==t.BASESIZE?["sizing","reset-size"+this.size,"size"+t.BASESIZE]:[]},e.fontMetrics=function(){return this._fontMetrics||(this._fontMetrics=function(t){var e;if(!G[e=t>=5?0:t>=3?1:2]){var n=G[e]={cssEmPerMu:j.quad[e]/18};for(var r in j)j.hasOwnProperty(r)&&(n[r]=j[r][e])}return G[e]}(this.size)),this._fontMetrics},e.getColor=function(){return this.phantom?"transparent":this.color},t}();Bt.BASESIZE=6;var kt=Bt,Nt={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:1.00375,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:1.00375},It={ex:!0,em:!0,mu:!0},Ft=function(t){return"string"!=typeof t&&(t=t.unit),t in Nt||t in It||"ex"===t},Tt=function(t,e){var n;if(t.unit in Nt)n=Nt[t.unit]/e.fontMetrics().ptPerEm/e.sizeMultiplier;else if("mu"===t.unit)n=e.fontMetrics().cssEmPerMu;else{var r;if(r=e.style.isTight()?e.havingStyle(e.style.text()):e,"ex"===t.unit)n=r.fontMetrics().xHeight;else{if("em"!==t.unit)throw new o("Invalid unit: '"+t.unit+"'");n=r.fontMetrics().quad}r!==e&&(n*=r.sizeMultiplier/e.sizeMultiplier)}return Math.min(t.number*n,e.maxSize)},Rt=["\\imath","\u0131","\\jmath","\u0237","\\pounds","\\mathsterling","\\textsterling","\xa3"],Ot=function(t,e,n){return Z[n][t]&&Z[n][t].replace&&(t=Z[n][t].replace),{value:t,metrics:W(t,e,n)}},Dt=function(t,e,n,r,i){var s,o=Ot(t,e,n),a=o.metrics;if(t=o.value,a){var l=a.italic;("text"===n||r&&"mathit"===r.font)&&(l=0),s=new z(t,a.height,a.depth,l,a.skew,a.width,i)}else"undefined"!=typeof console&&console.warn("No character metrics for '"+t+"' in style '"+e+"' and mode '"+n+"'"),s=new z(t,0,0,0,0,0,i);if(r){s.maxFontSize=r.sizeMultiplier,r.style.isTight()&&s.classes.push("mtight");var u=r.getColor();u&&(s.style.color=u)}return s},Lt=function(t,e){if(T(t.classes)!==T(e.classes)||t.skew!==e.skew||t.maxFontSize!==e.maxFontSize)return!1;for(var n in t.style)if(t.style.hasOwnProperty(n)&&t.style[n]!==e.style[n])return!1;for(var r in e.style)if(e.style.hasOwnProperty(r)&&t.style[r]!==e.style[r])return!1;return!0},Mt=function(t){for(var e=0,n=0,r=0,i=0;i<t.children.length;i++){var s=t.children[i];s.height>e&&(e=s.height),s.depth>n&&(n=s.depth),s.maxFontSize>r&&(r=s.maxFontSize)}t.height=e,t.depth=n,t.maxFontSize=r},Ut=function(t,e,n,r){var i=new L(t,e,n,r);return Mt(i),i},Pt=function(t,e,n,r){return new L(t,e,n,r)},zt=function(t){var e=new F(t);return Mt(e),e},Qt=function(t,e,n){var r="";switch(t){case"amsrm":r="AMS";break;case"textrm":r="Main";break;case"textsf":r="SansSerif";break;case"texttt":r="Typewriter";break;default:r=t}return r+"-"+("textbf"===e&&"textit"===n?"BoldItalic":"textbf"===e?"Bold":"textit"===e?"Italic":"Regular")},Ht={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},$t={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},Vt={fontMap:Ht,makeSymbol:Dt,mathsym:function(t,e,n,r){return void 0===r&&(r=[]),"boldsymbol"===n.font&&Ot(t,"Main-Bold",e).metrics?Dt(t,"Main-Bold",e,n,r.concat(["mathbf"])):"\\"===t||"main"===Z[e][t].font?Dt(t,"Main-Regular",e,n,r):Dt(t,"AMS-Regular",e,n,r.concat(["amsrm"]))},makeSpan:Ut,makeSvgSpan:Pt,makeLineSpan:function(t,e,n){var r=Ut([t],[],e);return r.height=Math.max(n||e.fontMetrics().defaultRuleThickness,e.minRuleThickness),r.style.borderBottomWidth=r.height+"em",r.maxFontSize=1,r},makeAnchor:function(t,e,n,r){var i=new M(t,e,n,r);return Mt(i),i},makeFragment:zt,wrapFragment:function(t,e){return t instanceof F?Ut([],[t],e):t},makeVList:function(t,e){for(var n=function(t){if("individualShift"===t.positionType){for(var e=t.children,n=[e[0]],r=-e[0].shift-e[0].elem.depth,i=r,s=1;s<e.length;s++){var o=-e[s].shift-i-e[s].elem.depth;i+=o,n.push({type:"kern",size:o-(e[s-1].elem.height+e[s-1].elem.depth)}),n.push(e[s])}return{children:n,depth:r}}var a;if("top"===t.positionType){for(var l=t.positionData,u=0;u<t.children.length;u++){var c=t.children[u];l-="kern"===c.type?c.size:c.elem.height+c.elem.depth}a=l}else if("bottom"===t.positionType)a=-t.positionData;else{var h=t.children[0];if("elem"!==h.type)throw new Error('First child must have type "elem".');if("shift"===t.positionType)a=-h.elem.depth-t.positionData;else{if("firstBaseline"!==t.positionType)throw new Error("Invalid positionType "+t.positionType+".");a=-h.elem.depth}}return{children:t.children,depth:a}}(t),r=n.children,i=n.depth,s=0,o=0;o<r.length;o++){var a=r[o];if("elem"===a.type){var l=a.elem;s=Math.max(s,l.maxFontSize,l.height)}}s+=2;var u=Ut(["pstrut"],[]);u.style.height=s+"em";for(var c=[],h=i,d=i,p=i,f=0;f<r.length;f++){var A=r[f];if("kern"===A.type)p+=A.size;else{var m=A.elem,g=Ut(A.wrapperClasses||[],[u,m],void 0,A.wrapperStyle||{});g.style.top=-s-p-m.depth+"em",A.marginLeft&&(g.style.marginLeft=A.marginLeft),A.marginRight&&(g.style.marginRight=A.marginRight),c.push(g),p+=m.height+m.depth}h=Math.min(h,p),d=Math.max(d,p)}var y,w=Ut(["vlist"],c);if(w.style.height=d+"em",h<0){var b=Ut([],[]),v=Ut(["vlist"],[b]);v.style.height=-h+"em";var x=Ut(["vlist-s"],[new z("\u200b")]);y=[Ut(["vlist-r"],[w,x]),Ut(["vlist-r"],[v])]}else y=[Ut(["vlist-r"],[w])];var _=Ut(["vlist-t"],y);return 2===y.length&&_.classes.push("vlist-t2"),_.height=d,_.depth=-h,_},makeOrd:function(t,e,n){var r,i=t.mode,s=t.text,a=["mord"],l="math"===i||"text"===i&&e.font,u=l?e.font:e.fontFamily;if(55349===s.charCodeAt(0)){var c=function(t,e){var n=1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536,r="math"===e?0:1;if(119808<=n&&n<120484){var i=Math.floor((n-119808)/26);return[xt[i][2],xt[i][r]]}if(120782<=n&&n<=120831){var s=Math.floor((n-120782)/10);return[_t[s][2],_t[s][r]]}if(120485===n||120486===n)return[xt[0][2],xt[0][r]];if(120486<n&&n<120782)return["",""];throw new o("Unsupported character: "+t)}(s,i);return Dt(s,c[0],i,e,a.concat(c[1]))}if(u){var d,p;if("boldsymbol"===u||"mathnormal"===u){var f="boldsymbol"===u?function(t,e,n,r){return Ot(t,"Math-BoldItalic",e).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}}(s,i):h(Rt,r=s)?{fontName:"Main-Italic",fontClass:"mathit"}:/[0-9]/.test(r.charAt(0))?{fontName:"Caligraphic-Regular",fontClass:"mathcal"}:{fontName:"Math-Italic",fontClass:"mathdefault"};d=f.fontName,p=[f.fontClass]}else h(Rt,s)?(d="Main-Italic",p=["mathit"]):l?(d=Ht[u].fontName,p=[u]):(d=Qt(u,e.fontWeight,e.fontShape),p=[u,e.fontWeight,e.fontShape]);if(Ot(s,d,i).metrics)return Dt(s,d,i,e,a.concat(p));if(at.hasOwnProperty(s)&&"Typewriter"===d.substr(0,10)){for(var A=[],m=0;m<s.length;m++)A.push(Dt(s[m],d,i,e,a.concat(p)));return zt(A)}}if("mathord"===n){var g=function(t,e,n,r){return/[0-9]/.test(t.charAt(0))||h(Rt,t)?{fontName:"Main-Italic",fontClass:"mathit"}:{fontName:"Math-Italic",fontClass:"mathdefault"}}(s);return Dt(s,g.fontName,i,e,a.concat([g.fontClass]))}if("textord"===n){var y=Z[i][s]&&Z[i][s].font;if("ams"===y){var w=Qt("amsrm",e.fontWeight,e.fontShape);return Dt(s,w,i,e,a.concat("amsrm",e.fontWeight,e.fontShape))}if("main"!==y&&y){var b=Qt(y,e.fontWeight,e.fontShape);return Dt(s,b,i,e,a.concat(b,e.fontWeight,e.fontShape))}var v=Qt("textrm",e.fontWeight,e.fontShape);return Dt(s,v,i,e,a.concat(e.fontWeight,e.fontShape))}throw new Error("unexpected type: "+n+" in makeOrd")},makeGlue:function(t,e){var n=Ut(["mspace"],[],e),r=Tt(t,e);return n.style.marginRight=r+"em",n},staticSvg:function(t,e){var n=$t[t],r=n[1],i=n[2],s=new H(n[0]),o=new Q([s],{width:r+"em",height:i+"em",style:"width:"+r+"em",viewBox:"0 0 "+1e3*r+" "+1e3*i,preserveAspectRatio:"xMinYMin"}),a=Pt(["overlay"],[o],e);return a.height=i,a.style.height=i+"em",a.style.width=r+"em",a},svgData:$t,tryCombineChars:function(t){for(var e=0;e<t.length-1;e++){var n=t[e],r=t[e+1];n instanceof z&&r instanceof z&&Lt(n,r)&&(n.text+=r.text,n.height=Math.max(n.height,r.height),n.depth=Math.max(n.depth,r.depth),n.italic=r.italic,t.splice(e+1,1),e--)}return t}};function qt(t,e){var n=jt(t,e);if(!n)throw new Error("Expected node of type "+e+", but got "+(t?"node of type "+t.type:String(t)));return n}function jt(t,e){return t&&t.type===e?t:null}function Kt(t,e){var n=function(t,e){return t&&"atom"===t.type&&t.family===e?t:null}(t,e);if(!n)throw new Error('Expected node of type "atom" and family "'+e+'", but got '+(t?"atom"===t.type?"atom of family "+t.family:"node of type "+t.type:String(t)));return n}function Wt(t){var e=Gt(t);if(!e)throw new Error("Expected node of symbol group type, but got "+(t?"node of type "+t.type:String(t)));return e}function Gt(t){return t&&("atom"===t.type||Y.hasOwnProperty(t.type))?t:null}var Xt={number:3,unit:"mu"},Yt={number:4,unit:"mu"},Jt={number:5,unit:"mu"},Zt={mord:{mop:Xt,mbin:Yt,mrel:Jt,minner:Xt},mop:{mord:Xt,mop:Xt,mrel:Jt,minner:Xt},mbin:{mord:Yt,mop:Yt,mopen:Yt,minner:Yt},mrel:{mord:Jt,mop:Jt,mopen:Jt,minner:Jt},mopen:{},mclose:{mop:Xt,mbin:Yt,mrel:Jt,minner:Xt},mpunct:{mord:Xt,mop:Xt,mrel:Jt,mopen:Xt,mclose:Xt,mpunct:Xt,minner:Xt},minner:{mord:Xt,mop:Xt,mbin:Yt,mrel:Jt,mopen:Xt,mpunct:Xt,minner:Xt}},te={mord:{mop:Xt},mop:{mord:Xt,mop:Xt},mbin:{},mrel:{},mopen:{},mclose:{mop:Xt},mpunct:{},minner:{mop:Xt}},ee={},ne={},re={};function ie(t){for(var e=t.type,n=t.names,r=t.props,i=t.htmlBuilder,s=t.mathmlBuilder,o={type:e,numArgs:r.numArgs,argTypes:r.argTypes,greediness:void 0===r.greediness?1:r.greediness,allowedInText:!!r.allowedInText,allowedInMath:void 0===r.allowedInMath||r.allowedInMath,numOptionalArgs:r.numOptionalArgs||0,infix:!!r.infix,handler:t.handler},a=0;a<n.length;++a)ee[n[a]]=o;e&&(i&&(ne[e]=i),s&&(re[e]=s))}function se(t){ie({type:t.type,names:[],props:{numArgs:0},handler:function(){throw new Error("Should never be called.")},htmlBuilder:t.htmlBuilder,mathmlBuilder:t.mathmlBuilder})}var oe=function(t){var e=jt(t,"ordgroup");return e?e.body:[t]},ae=Vt.makeSpan,le=["leftmost","mbin","mopen","mrel","mop","mpunct"],ue=["rightmost","mrel","mclose","mpunct"],ce={display:E.DISPLAY,text:E.TEXT,script:E.SCRIPT,scriptscript:E.SCRIPTSCRIPT},he={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},de=function(t,e,n,r){void 0===r&&(r=[null,null]);for(var i=[],s=0;s<t.length;s++){var o=ge(t[s],e);o instanceof F?i.push.apply(i,o.children):i.push(o)}if(!n)return i;var a=e;if(1===t.length){var l=jt(t[0],"sizing")||jt(t[0],"styling");l&&("sizing"===l.type?a=e.havingSize(l.size):"styling"===l.type&&(a=e.havingStyle(ce[l.style])))}var u=ae([r[0]||"leftmost"],[],e),c=ae([r[1]||"rightmost"],[],e);return pe(i,(function(t,e){var n=e.classes[0],r=t.classes[0];"mbin"===n&&h(ue,r)?e.classes[0]="mord":"mbin"===r&&h(le,n)&&(t.classes[0]="mord")}),{node:u},c),pe(i,(function(t,e){var n=Ae(e),r=Ae(t),i=n&&r?t.hasClass("mtight")?te[n][r]:Zt[n][r]:null;if(i)return Vt.makeGlue(i,a)}),{node:u},c),i},pe=function t(e,n,r,i){i&&e.push(i);for(var s=0;s<e.length;s++){var o=e[s],a=fe(o);if(a)t(a.children,n,r);else if("mspace"!==o.classes[0]){var l=n(o,r.node);l&&(r.insertAfter?r.insertAfter(l):(e.unshift(l),s++)),r.node=o,r.insertAfter=function(t){return function(n){e.splice(t+1,0,n),s++}}(s)}}i&&e.pop()},fe=function(t){return t instanceof F||t instanceof M?t:null},Ae=function(t,e){return t?(e&&(t=function t(e,n){var r=fe(e);if(r){var i=r.children;if(i.length){if("right"===n)return t(i[i.length-1],"right");if("left"===n)return t(i[0],"left")}}return e}(t,e)),he[t.classes[0]]||null):null},me=function(t,e){var n=["nulldelimiter"].concat(t.baseSizingClasses());return ae(e.concat(n))},ge=function(t,e,n){if(!t)return ae();if(ne[t.type]){var r=ne[t.type](t,e);if(n&&e.size!==n.size){r=ae(e.sizingClasses(n),[r],e);var i=e.sizeMultiplier/n.sizeMultiplier;r.height*=i,r.depth*=i}return r}throw new o("Got group of unknown type: '"+t.type+"'")};function ye(t,e){var n=ae(["base"],t,e),r=ae(["strut"]);return r.style.height=n.height+n.depth+"em",r.style.verticalAlign=-n.depth+"em",n.children.unshift(r),n}function we(t,e){var n=null;1===t.length&&"tag"===t[0].type&&(n=t[0].tag,t=t[0].body);for(var r,i=de(t,e,!0),s=[],o=[],a=0;a<i.length;a++)if(o.push(i[a]),i[a].hasClass("mbin")||i[a].hasClass("mrel")||i[a].hasClass("allowbreak")){for(var l=!1;a<i.length-1&&i[a+1].hasClass("mspace")&&!i[a+1].hasClass("newline");)a++,o.push(i[a]),i[a].hasClass("nobreak")&&(l=!0);l||(s.push(ye(o,e)),o=[])}else i[a].hasClass("newline")&&(o.pop(),o.length>0&&(s.push(ye(o,e)),o=[]),s.push(i[a]));o.length>0&&s.push(ye(o,e)),n&&((r=ye(de(n,e,!0))).classes=["tag"],s.push(r));var u=ae(["katex-html"],s);if(u.setAttribute("aria-hidden","true"),r){var c=r.children[0];c.style.height=u.height+u.depth+"em",c.style.verticalAlign=-u.depth+"em"}return u}function be(t){return new F(t)}var ve=function(){function t(t,e){this.type=void 0,this.attributes=void 0,this.children=void 0,this.type=t,this.attributes={},this.children=e||[]}var e=t.prototype;return e.setAttribute=function(t,e){this.attributes[t]=e},e.getAttribute=function(t){return this.attributes[t]},e.toNode=function(){var t=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var e in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,e)&&t.setAttribute(e,this.attributes[e]);for(var n=0;n<this.children.length;n++)t.appendChild(this.children[n].toNode());return t},e.toMarkup=function(){var t="<"+this.type;for(var e in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,e)&&(t+=" "+e+'="',t+=p(this.attributes[e]),t+='"');t+=">";for(var n=0;n<this.children.length;n++)t+=this.children[n].toMarkup();return t+"</"+this.type+">"},e.toText=function(){return this.children.map((function(t){return t.toText()})).join("")},t}(),xe=function(){function t(t){this.text=void 0,this.text=t}var e=t.prototype;return e.toNode=function(){return document.createTextNode(this.text)},e.toMarkup=function(){return p(this.toText())},e.toText=function(){return this.text},t}(),_e={MathNode:ve,TextNode:xe,SpaceNode:function(){function t(t){this.width=void 0,this.character=void 0,this.width=t,this.character=t>=.05555&&t<=.05556?"\u200a":t>=.1666&&t<=.1667?"\u2009":t>=.2222&&t<=.2223?"\u2005":t>=.2777&&t<=.2778?"\u2005\u200a":t>=-.05556&&t<=-.05555?"\u200a\u2063":t>=-.1667&&t<=-.1666?"\u2009\u2063":t>=-.2223&&t<=-.2222?"\u205f\u2063":t>=-.2778&&t<=-.2777?"\u2005\u2063":null}var e=t.prototype;return e.toNode=function(){if(this.character)return document.createTextNode(this.character);var t=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return t.setAttribute("width",this.width+"em"),t},e.toMarkup=function(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+this.width+'em"/>'},e.toText=function(){return this.character?this.character:" "},t}(),newDocumentFragment:be},Ce=function(t,e,n){return!Z[e][t]||!Z[e][t].replace||55349===t.charCodeAt(0)||at.hasOwnProperty(t)&&n&&(n.fontFamily&&"tt"===n.fontFamily.substr(4,2)||n.font&&"tt"===n.font.substr(4,2))||(t=Z[e][t].replace),new _e.TextNode(t)},Se=function(t){return 1===t.length?t[0]:new _e.MathNode("mrow",t)},Ee=function(t,e){if("texttt"===e.fontFamily)return"monospace";if("textsf"===e.fontFamily)return"textit"===e.fontShape&&"textbf"===e.fontWeight?"sans-serif-bold-italic":"textit"===e.fontShape?"sans-serif-italic":"textbf"===e.fontWeight?"bold-sans-serif":"sans-serif";if("textit"===e.fontShape&&"textbf"===e.fontWeight)return"bold-italic";if("textit"===e.fontShape)return"italic";if("textbf"===e.fontWeight)return"bold";var n=e.font;if(!n||"mathnormal"===n)return null;var r=t.mode;if("mathit"===n)return"italic";if("boldsymbol"===n)return"bold-italic";if("mathbf"===n)return"bold";if("mathbb"===n)return"double-struck";if("mathfrak"===n)return"fraktur";if("mathscr"===n||"mathcal"===n)return"script";if("mathsf"===n)return"sans-serif";if("mathtt"===n)return"monospace";var i=t.text;return h(["\\imath","\\jmath"],i)?null:(Z[r][i]&&Z[r][i].replace&&(i=Z[r][i].replace),W(i,Vt.fontMap[n].fontName,r)?Vt.fontMap[n].variant:null)},Be=function(t,e,n){if(1===t.length){var r=Ne(t[0],e);return n&&r instanceof ve&&"mo"===r.type&&(r.setAttribute("lspace","0em"),r.setAttribute("rspace","0em")),[r]}for(var i,s=[],o=0;o<t.length;o++){var a=Ne(t[o],e);if(a instanceof ve&&i instanceof ve){if("mtext"===a.type&&"mtext"===i.type&&a.getAttribute("mathvariant")===i.getAttribute("mathvariant")){var l;(l=i.children).push.apply(l,a.children);continue}if("mn"===a.type&&"mn"===i.type){var u;(u=i.children).push.apply(u,a.children);continue}if("mi"===a.type&&1===a.children.length&&"mn"===i.type){var c=a.children[0];if(c instanceof xe&&"."===c.text){var h;(h=i.children).push.apply(h,a.children);continue}}else if("mi"===i.type&&1===i.children.length){var d=i.children[0];if(d instanceof xe&&"\u0338"===d.text&&("mo"===a.type||"mi"===a.type||"mn"===a.type)){var p=a.children[0];p instanceof xe&&p.text.length>0&&(p.text=p.text.slice(0,1)+"\u0338"+p.text.slice(1),s.pop())}}}s.push(a),i=a}return s},ke=function(t,e,n){return Se(Be(t,e,n))},Ne=function(t,e){if(!t)return new _e.MathNode("mrow");if(re[t.type])return re[t.type](t,e);throw new o("Got group of unknown type: '"+t.type+"'")};function Ie(t,e,n,r){var i,s=Be(t,n);i=1===s.length&&s[0]instanceof ve&&h(["mrow","mtable"],s[0].type)?s[0]:new _e.MathNode("mrow",s);var o=new _e.MathNode("annotation",[new _e.TextNode(e)]);o.setAttribute("encoding","application/x-tex");var a=new _e.MathNode("semantics",[i,o]),l=new _e.MathNode("math",[a]);return l.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),Vt.makeSpan([r?"katex":"katex-mathml"],[l])}var Fe=function(t){return new kt({style:t.displayMode?E.DISPLAY:E.TEXT,maxSize:t.maxSize,minRuleThickness:t.minRuleThickness})},Te=function(t,e){if(e.displayMode){var n=["katex-display"];e.leqno&&n.push("leqno"),e.fleqn&&n.push("fleqn"),t=Vt.makeSpan(n,[t])}return t},Re={widehat:"^",widecheck:"\u02c7",widetilde:"~",utilde:"~",overleftarrow:"\u2190",underleftarrow:"\u2190",xleftarrow:"\u2190",overrightarrow:"\u2192",underrightarrow:"\u2192",xrightarrow:"\u2192",underbrace:"\u23df",overbrace:"\u23de",overgroup:"\u23e0",undergroup:"\u23e1",overleftrightarrow:"\u2194",underleftrightarrow:"\u2194",xleftrightarrow:"\u2194",Overrightarrow:"\u21d2",xRightarrow:"\u21d2",overleftharpoon:"\u21bc",xleftharpoonup:"\u21bc",overrightharpoon:"\u21c0",xrightharpoonup:"\u21c0",xLeftarrow:"\u21d0",xLeftrightarrow:"\u21d4",xhookleftarrow:"\u21a9",xhookrightarrow:"\u21aa",xmapsto:"\u21a6",xrightharpoondown:"\u21c1",xleftharpoondown:"\u21bd",xrightleftharpoons:"\u21cc",xleftrightharpoons:"\u21cb",xtwoheadleftarrow:"\u219e",xtwoheadrightarrow:"\u21a0",xlongequal:"=",xtofrom:"\u21c4",xrightleftarrows:"\u21c4",xrightequilibrium:"\u21cc",xleftequilibrium:"\u21cb"},Oe={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},De=function(t){var e=new _e.MathNode("mo",[new _e.TextNode(Re[t.substr(1)])]);return e.setAttribute("stretchy","true"),e},Le=function(t,e){var n=function(){var n=4e5,r=t.label.substr(1);if(h(["widehat","widecheck","widetilde","utilde"],r)){var i,s,o,a="ordgroup"===(f=t.base).type?f.body.length:1;if(a>5)"widehat"===r||"widecheck"===r?(i=420,n=2364,o=.42,s=r+"4"):(i=312,n=2340,o=.34,s="tilde4");else{var l=[1,1,2,2,3,3][a];"widehat"===r||"widecheck"===r?(n=[0,1062,2364,2364,2364][l],i=[0,239,300,360,420][l],o=[0,.24,.3,.3,.36,.42][l],s=r+l):(n=[0,600,1033,2339,2340][l],i=[0,260,286,306,312][l],o=[0,.26,.286,.3,.306,.34][l],s="tilde"+l)}var u=new H(s),c=new Q([u],{width:"100%",height:o+"em",viewBox:"0 0 "+n+" "+i,preserveAspectRatio:"none"});return{span:Vt.makeSvgSpan([],[c],e),minWidth:0,height:o}}var d,p,f,A=[],m=Oe[r],g=m[0],y=m[1],w=m[2],b=w/1e3,v=g.length;if(1===v)d=["hide-tail"],p=[m[3]];else if(2===v)d=["halfarrow-left","halfarrow-right"],p=["xMinYMin","xMaxYMin"];else{if(3!==v)throw new Error("Correct katexImagesData or update code here to support\n                    "+v+" children.");d=["brace-left","brace-center","brace-right"],p=["xMinYMin","xMidYMin","xMaxYMin"]}for(var x=0;x<v;x++){var _=new H(g[x]),C=new Q([_],{width:"400em",height:b+"em",viewBox:"0 0 "+n+" "+w,preserveAspectRatio:p[x]+" slice"}),S=Vt.makeSvgSpan([d[x]],[C],e);if(1===v)return{span:S,minWidth:y,height:b};S.style.height=b+"em",A.push(S)}return{span:Vt.makeSpan(["stretchy"],A,e),minWidth:y,height:b}}(),r=n.span,i=n.minWidth,s=n.height;return r.height=s,r.style.height=s+"em",i>0&&(r.style.minWidth=i+"em"),r},Me=function(t,e){var n,r,i,s=jt(t,"supsub");s?(r=qt(s.base,"accent"),s.base=n=r.base,i=function(t){if(t instanceof L)return t;throw new Error("Expected span<HtmlDomNode> but got "+String(t)+".")}(ge(s,e)),s.base=r):n=(r=qt(t,"accent")).base;var o=ge(n,e.havingCrampedStyle()),a=0;if(r.isShifty&&m(n)){var l=A(n);a=V(ge(l,e.havingCrampedStyle())).skew}var u,c=Math.min(o.height,e.fontMetrics().xHeight);if(r.isStretchy)u=Le(r,e),u=Vt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:o},{type:"elem",elem:u,wrapperClasses:["svg-align"],wrapperStyle:a>0?{width:"calc(100% - "+2*a+"em)",marginLeft:2*a+"em"}:void 0}]},e);else{var h,d;"\\vec"===r.label?(h=Vt.staticSvg("vec",e),d=Vt.svgData.vec[1]):((h=V(h=Vt.makeOrd({mode:r.mode,text:r.label},e,"textord"))).italic=0,d=h.width),u=Vt.makeSpan(["accent-body"],[h]);var p="\\textcircled"===r.label;p&&(u.classes.push("accent-full"),c=o.height);var f=a;p||(f-=d/2),u.style.left=f+"em","\\textcircled"===r.label&&(u.style.top=".2em"),u=Vt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:o},{type:"kern",size:-c},{type:"elem",elem:u}]},e)}var g=Vt.makeSpan(["mord","accent"],[u],e);return i?(i.children[0]=g,i.height=Math.max(g.height,i.height),i.classes[0]="mord",i):g},Ue=function(t,e){var n=t.isStretchy?De(t.label):new _e.MathNode("mo",[Ce(t.label,t.mode)]),r=new _e.MathNode("mover",[Ne(t.base,e),n]);return r.setAttribute("accent","true"),r},Pe=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map((function(t){return"\\"+t})).join("|"));ie({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:function(t,e){var n=e[0],r=!Pe.test(t.funcName);return{type:"accent",mode:t.parser.mode,label:t.funcName,isStretchy:r,isShifty:!r||"\\widehat"===t.funcName||"\\widetilde"===t.funcName||"\\widecheck"===t.funcName,base:n}},htmlBuilder:Me,mathmlBuilder:Ue}),ie({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!1},handler:function(t,e){return{type:"accent",mode:t.parser.mode,label:t.funcName,isStretchy:!1,isShifty:!0,base:e[0]}},htmlBuilder:Me,mathmlBuilder:Ue}),ie({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:function(t,e){return{type:"accentUnder",mode:t.parser.mode,label:t.funcName,base:e[0]}},htmlBuilder:function(t,e){var n=ge(t.base,e),r=Le(t,e),i="\\utilde"===t.label?.12:0,s=Vt.makeVList({positionType:"bottom",positionData:r.height+i,children:[{type:"elem",elem:r,wrapperClasses:["svg-align"]},{type:"kern",size:i},{type:"elem",elem:n}]},e);return Vt.makeSpan(["mord","accentunder"],[s],e)},mathmlBuilder:function(t,e){var n=De(t.label),r=new _e.MathNode("munder",[Ne(t.base,e),n]);return r.setAttribute("accentunder","true"),r}});var ze=function(t){var e=new _e.MathNode("mpadded",t?[t]:[]);return e.setAttribute("width","+0.6em"),e.setAttribute("lspace","0.3em"),e};ie({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium"],props:{numArgs:1,numOptionalArgs:1},handler:function(t,e,n){return{type:"xArrow",mode:t.parser.mode,label:t.funcName,body:e[0],below:n[0]}},htmlBuilder:function(t,e){var n,r=e.style,i=e.havingStyle(r.sup()),s=Vt.wrapFragment(ge(t.body,i,e),e);s.classes.push("x-arrow-pad"),t.below&&(i=e.havingStyle(r.sub()),(n=Vt.wrapFragment(ge(t.below,i,e),e)).classes.push("x-arrow-pad"));var o,a=Le(t,e),l=-e.fontMetrics().axisHeight+.5*a.height,u=-e.fontMetrics().axisHeight-.5*a.height-.111;if((s.depth>.25||"\\xleftequilibrium"===t.label)&&(u-=s.depth),n){var c=-e.fontMetrics().axisHeight+n.height+.5*a.height+.111;o=Vt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:s,shift:u},{type:"elem",elem:a,shift:l},{type:"elem",elem:n,shift:c}]},e)}else o=Vt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:s,shift:u},{type:"elem",elem:a,shift:l}]},e);return o.children[0].children[0].children[1].classes.push("svg-align"),Vt.makeSpan(["mrel","x-arrow"],[o],e)},mathmlBuilder:function(t,e){var n,r=De(t.label);if(t.body){var i=ze(Ne(t.body,e));if(t.below){var s=ze(Ne(t.below,e));n=new _e.MathNode("munderover",[r,s,i])}else n=new _e.MathNode("mover",[r,i])}else if(t.below){var o=ze(Ne(t.below,e));n=new _e.MathNode("munder",[r,o])}else n=ze(),n=new _e.MathNode("mover",[r,n]);return n}}),ie({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler:function(t,e){for(var n=t.parser,r=qt(e[0],"ordgroup").body,i="",s=0;s<r.length;s++)i+=qt(r[s],"textord").text;var a=parseInt(i);if(isNaN(a))throw new o("\\@char has non-numeric argument "+i);return{type:"textord",mode:n.mode,text:String.fromCharCode(a)}}});var Qe=function(t,e){var n=de(t.body,e.withColor(t.color),!1);return Vt.makeFragment(n)},He=function(t,e){var n=Be(t.body,e.withColor(t.color)),r=new _e.MathNode("mstyle",n);return r.setAttribute("mathcolor",t.color),r};ie({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,greediness:3,argTypes:["color","original"]},handler:function(t,e){var n=t.parser,r=qt(e[0],"color-token").color;return{type:"color",mode:n.mode,color:r,body:oe(e[1])}},htmlBuilder:Qe,mathmlBuilder:He}),ie({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,greediness:3,argTypes:["color"]},handler:function(t,e){var n=t.parser,r=t.breakOnTokenText,i=qt(e[0],"color-token").color;n.gullet.macros.set("\\current@color",i);var s=n.parseExpression(!0,r);return{type:"color",mode:n.mode,color:i,body:s}},htmlBuilder:Qe,mathmlBuilder:He}),ie({type:"cr",names:["\\cr","\\newline"],props:{numArgs:0,numOptionalArgs:1,argTypes:["size"],allowedInText:!0},handler:function(t,e,n){var r=t.parser,i=n[0],s="\\cr"===t.funcName,o=!1;return s||(o=!r.settings.displayMode||!r.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode")),{type:"cr",mode:r.mode,newLine:o,newRow:s,size:i&&qt(i,"size").value}},htmlBuilder:function(t,e){if(t.newRow)throw new o("\\cr valid only within a tabular/array environment");var n=Vt.makeSpan(["mspace"],[],e);return t.newLine&&(n.classes.push("newline"),t.size&&(n.style.marginTop=Tt(t.size,e)+"em")),n},mathmlBuilder:function(t,e){var n=new _e.MathNode("mspace");return t.newLine&&(n.setAttribute("linebreak","newline"),t.size&&n.setAttribute("height",Tt(t.size,e)+"em")),n}});var $e=function(t,e,n){var r=W(Z.math[t]&&Z.math[t].replace||t,e,n);if(!r)throw new Error("Unsupported symbol "+t+" and font size "+e+".");return r},Ve=function(t,e,n,r){var i=n.havingBaseStyle(e),s=Vt.makeSpan(r.concat(i.sizingClasses(n)),[t],n),o=i.sizeMultiplier/n.sizeMultiplier;return s.height*=o,s.depth*=o,s.maxFontSize=i.sizeMultiplier,s},qe=function(t,e,n){var r=e.havingBaseStyle(n),i=(1-e.sizeMultiplier/r.sizeMultiplier)*e.fontMetrics().axisHeight;t.classes.push("delimcenter"),t.style.top=i+"em",t.height-=i,t.depth+=i},je=function(t,e,n,r,i,s){var o=function(t,e,n,r){return Vt.makeSymbol(t,"Size"+e+"-Regular",n,r)}(t,e,i,r),a=Ve(Vt.makeSpan(["delimsizing","size"+e],[o],r),E.TEXT,r,s);return n&&qe(a,r,E.TEXT),a},Ke=function(t,e,n){return{type:"elem",elem:Vt.makeSpan(["delimsizinginner","Size1-Regular"===e?"delim-size1":"delim-size4"],[Vt.makeSpan([],[Vt.makeSymbol(t,e,n)])])}},We={type:"kern",size:-.005},Ge=function(t,e,n,r,i,s){var o,a,l,u;o=l=u=t,a=null;var c="Size1-Regular";"\\uparrow"===t?l=u="\u23d0":"\\Uparrow"===t?l=u="\u2016":"\\downarrow"===t?o=l="\u23d0":"\\Downarrow"===t?o=l="\u2016":"\\updownarrow"===t?(o="\\uparrow",l="\u23d0",u="\\downarrow"):"\\Updownarrow"===t?(o="\\Uparrow",l="\u2016",u="\\Downarrow"):"["===t||"\\lbrack"===t?(o="\u23a1",l="\u23a2",u="\u23a3",c="Size4-Regular"):"]"===t||"\\rbrack"===t?(o="\u23a4",l="\u23a5",u="\u23a6",c="Size4-Regular"):"\\lfloor"===t||"\u230a"===t?(l=o="\u23a2",u="\u23a3",c="Size4-Regular"):"\\lceil"===t||"\u2308"===t?(o="\u23a1",l=u="\u23a2",c="Size4-Regular"):"\\rfloor"===t||"\u230b"===t?(l=o="\u23a5",u="\u23a6",c="Size4-Regular"):"\\rceil"===t||"\u2309"===t?(o="\u23a4",l=u="\u23a5",c="Size4-Regular"):"("===t||"\\lparen"===t?(o="\u239b",l="\u239c",u="\u239d",c="Size4-Regular"):")"===t||"\\rparen"===t?(o="\u239e",l="\u239f",u="\u23a0",c="Size4-Regular"):"\\{"===t||"\\lbrace"===t?(o="\u23a7",a="\u23a8",u="\u23a9",l="\u23aa",c="Size4-Regular"):"\\}"===t||"\\rbrace"===t?(o="\u23ab",a="\u23ac",u="\u23ad",l="\u23aa",c="Size4-Regular"):"\\lgroup"===t||"\u27ee"===t?(o="\u23a7",u="\u23a9",l="\u23aa",c="Size4-Regular"):"\\rgroup"===t||"\u27ef"===t?(o="\u23ab",u="\u23ad",l="\u23aa",c="Size4-Regular"):"\\lmoustache"===t||"\u23b0"===t?(o="\u23a7",u="\u23ad",l="\u23aa",c="Size4-Regular"):"\\rmoustache"!==t&&"\u23b1"!==t||(o="\u23ab",u="\u23a9",l="\u23aa",c="Size4-Regular");var h=$e(o,c,i),d=h.height+h.depth,p=$e(l,c,i),f=p.height+p.depth,A=$e(u,c,i),m=A.height+A.depth,g=0,y=1;if(null!==a){var w=$e(a,c,i);g=w.height+w.depth,y=2}var b=d+m+g,v=Math.max(0,Math.ceil((e-b)/(y*f))),x=b+v*y*f,_=r.fontMetrics().axisHeight;n&&(_*=r.sizeMultiplier);var C=x/2-_,S=.005*(v+1)-f,B=[];if(B.push(Ke(u,c,i)),null===a)for(var k=0;k<v;k++)B.push(We),B.push(Ke(l,c,i));else{for(var N=0;N<v;N++)B.push(We),B.push(Ke(l,c,i));B.push({type:"kern",size:S}),B.push(Ke(l,c,i)),B.push(We),B.push(Ke(a,c,i));for(var I=0;I<v;I++)B.push(We),B.push(Ke(l,c,i))}B.push({type:"kern",size:S}),B.push(Ke(l,c,i)),B.push(We),B.push(Ke(o,c,i));var F=r.havingBaseStyle(E.TEXT),T=Vt.makeVList({positionType:"bottom",positionData:C,children:B},F);return Ve(Vt.makeSpan(["delimsizing","mult"],[T],F),E.TEXT,r,s)},Xe=function(t,e,n,r,i){var s=function(t,e,n){e*=1e3;var r="";switch(t){case"sqrtMain":r=function(t,e){return"M95,"+(622+t+80)+"\nc-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14\nc0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54\nc44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10\ns173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429\nc69,-144,104.5,-217.7,106.5,-221\nl"+t/2.075+" -"+t+"\nc5.3,-9.3,12,-14,20,-14\nH400000v"+(40+t)+"H845.2724\ns-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7\nc-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z\nM"+(834+t)+" 80h400000v"+(40+t)+"h-400000z"}(e);break;case"sqrtSize1":r=function(t,e){return"M263,"+(601+t+80)+"c0.7,0,18,39.7,52,119\nc34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120\nc340,-704.7,510.7,-1060.3,512,-1067\nl"+t/2.084+" -"+t+"\nc4.7,-7.3,11,-11,19,-11\nH40000v"+(40+t)+"H1012.3\ns-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232\nc-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1\ns-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26\nc-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z\nM"+(1001+t)+" 80h400000v"+(40+t)+"h-400000z"}(e);break;case"sqrtSize2":r=function(t,e){return"M983 "+(10+t+80)+"\nl"+t/3.13+" -"+t+"\nc4,-6.7,10,-10,18,-10 H400000v"+(40+t)+"\nH1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7\ns-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744\nc-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30\nc26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722\nc56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5\nc53.7,-170.3,84.5,-266.8,92.5,-289.5z\nM"+(1001+t)+" 80h400000v"+(40+t)+"h-400000z"}(e);break;case"sqrtSize3":r=function(t,e){return"M424,"+(2398+t+80)+"\nc-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514\nc0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20\ns-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121\ns209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081\nl"+t/4.223+" -"+t+"c4,-6.7,10,-10,18,-10 H400000\nv"+(40+t)+"H1014.6\ns-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185\nc-2,6,-10,9,-24,9\nc-8,0,-12,-0.7,-12,-2z M"+(1001+t)+" 80\nh400000v"+(40+t)+"h-400000z"}(e);break;case"sqrtSize4":r=function(t,e){return"M473,"+(2713+t+80)+"\nc339.3,-1799.3,509.3,-2700,510,-2702 l"+t/5.298+" -"+t+"\nc3.3,-7.3,9.3,-11,18,-11 H400000v"+(40+t)+"H1017.7\ns-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9\nc-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200\nc0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26\ns76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,\n606zM"+(1001+t)+" 80h400000v"+(40+t)+"H1017.7z"}(e);break;case"sqrtTall":r=function(t,e,n){return"M702 "+(t+80)+"H400000"+(40+t)+"\nH742v"+(n-54-80-t)+"l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1\nh-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170\nc-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667\n219 661 l218 661zM702 80H400000v"+(40+t)+"H742z"}(e,0,n)}return r}(t,r,n),o=new H(t,s),a=new Q([o],{width:"400em",height:e+"em",viewBox:"0 0 400000 "+n,preserveAspectRatio:"xMinYMin slice"});return Vt.makeSvgSpan(["hide-tail"],[a],i)},Ye=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","\u230a","\u230b","\\lceil","\\rceil","\u2308","\u2309","\\surd"],Je=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","\u27ee","\u27ef","\\lmoustache","\\rmoustache","\u23b0","\u23b1"],Ze=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],tn=[0,1.2,1.8,2.4,3],en=[{type:"small",style:E.SCRIPTSCRIPT},{type:"small",style:E.SCRIPT},{type:"small",style:E.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],nn=[{type:"small",style:E.SCRIPTSCRIPT},{type:"small",style:E.SCRIPT},{type:"small",style:E.TEXT},{type:"stack"}],rn=[{type:"small",style:E.SCRIPTSCRIPT},{type:"small",style:E.SCRIPT},{type:"small",style:E.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],sn=function(t){if("small"===t.type)return"Main-Regular";if("large"===t.type)return"Size"+t.size+"-Regular";if("stack"===t.type)return"Size4-Regular";throw new Error("Add support for delim type '"+t.type+"' here.")},on=function(t,e,n,r){for(var i=Math.min(2,3-r.style.size);i<n.length&&"stack"!==n[i].type;i++){var s=$e(t,sn(n[i]),"math"),o=s.height+s.depth;if("small"===n[i].type&&(o*=r.havingBaseStyle(n[i].style).sizeMultiplier),o>e)return n[i]}return n[n.length-1]},an=function(t,e,n,r,i,s){var o;"<"===t||"\\lt"===t||"\u27e8"===t?t="\\langle":">"!==t&&"\\gt"!==t&&"\u27e9"!==t||(t="\\rangle"),o=h(Ze,t)?en:h(Ye,t)?rn:nn;var a=on(t,e,o,r);return"small"===a.type?function(t,e,n,r,i,s){var o=Vt.makeSymbol(t,"Main-Regular",i,r),a=Ve(o,e,r,s);return n&&qe(a,r,e),a}(t,a.style,n,r,i,s):"large"===a.type?je(t,a.size,n,r,i,s):Ge(t,e,n,r,i,s)},ln=function(t,e,n,r,i){if("<"===t||"\\lt"===t||"\u27e8"===t?t="\\langle":">"!==t&&"\\gt"!==t&&"\u27e9"!==t||(t="\\rangle"),h(Ye,t)||h(Ze,t))return je(t,e,!1,n,r,i);if(h(Je,t))return Ge(t,tn[e],!1,n,r,i);throw new o("Illegal delimiter: '"+t+"'")},un=an,cn=function(t,e,n,r,i,s){var o=r.fontMetrics().axisHeight*r.sizeMultiplier,a=5/r.fontMetrics().ptPerEm,l=Math.max(e-o,n+o),u=Math.max(l/500*901,2*l-a);return an(t,u,!0,r,i,s)},hn={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},dn=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","\u230a","\u230b","\\lceil","\\rceil","\u2308","\u2309","<",">","\\langle","\u27e8","\\rangle","\u27e9","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","\u27ee","\u27ef","\\lmoustache","\\rmoustache","\u23b0","\u23b1","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function pn(t,e){var n=Gt(t);if(n&&h(dn,n.text))return n;throw new o("Invalid delimiter: '"+(n?n.text:JSON.stringify(t))+"' after '"+e.funcName+"'",t)}function fn(t){if(!t.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}ie({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1},handler:function(t,e){var n=pn(e[0],t);return{type:"delimsizing",mode:t.parser.mode,size:hn[t.funcName].size,mclass:hn[t.funcName].mclass,delim:n.text}},htmlBuilder:function(t,e){return"."===t.delim?Vt.makeSpan([t.mclass]):ln(t.delim,t.size,e,t.mode,[t.mclass])},mathmlBuilder:function(t){var e=[];"."!==t.delim&&e.push(Ce(t.delim,t.mode));var n=new _e.MathNode("mo",e);return n.setAttribute("fence","mopen"===t.mclass||"mclose"===t.mclass?"true":"false"),n}}),ie({type:"leftright-right",names:["\\right"],props:{numArgs:1},handler:function(t,e){var n=t.parser.gullet.macros.get("\\current@color");if(n&&"string"!=typeof n)throw new o("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:t.parser.mode,delim:pn(e[0],t).text,color:n}}}),ie({type:"leftright",names:["\\left"],props:{numArgs:1},handler:function(t,e){var n=pn(e[0],t),r=t.parser;++r.leftrightDepth;var i=r.parseExpression(!1);--r.leftrightDepth,r.expect("\\right",!1);var s=qt(r.parseFunction(),"leftright-right");return{type:"leftright",mode:r.mode,body:i,left:n.text,right:s.delim,rightColor:s.color}},htmlBuilder:function(t,e){fn(t);for(var n,r,i=de(t.body,e,!0,["mopen","mclose"]),s=0,o=0,a=!1,l=0;l<i.length;l++)i[l].isMiddle?a=!0:(s=Math.max(i[l].height,s),o=Math.max(i[l].depth,o));if(s*=e.sizeMultiplier,o*=e.sizeMultiplier,n="."===t.left?me(e,["mopen"]):cn(t.left,s,o,e,t.mode,["mopen"]),i.unshift(n),a)for(var u=1;u<i.length;u++){var c=i[u].isMiddle;c&&(i[u]=cn(c.delim,s,o,c.options,t.mode,[]))}if("."===t.right)r=me(e,["mclose"]);else{var h=t.rightColor?e.withColor(t.rightColor):e;r=cn(t.right,s,o,h,t.mode,["mclose"])}return i.push(r),Vt.makeSpan(["minner"],i,e)},mathmlBuilder:function(t,e){fn(t);var n=Be(t.body,e);if("."!==t.left){var r=new _e.MathNode("mo",[Ce(t.left,t.mode)]);r.setAttribute("fence","true"),n.unshift(r)}if("."!==t.right){var i=new _e.MathNode("mo",[Ce(t.right,t.mode)]);i.setAttribute("fence","true"),t.rightColor&&i.setAttribute("mathcolor",t.rightColor),n.push(i)}return Se(n)}}),ie({type:"middle",names:["\\middle"],props:{numArgs:1},handler:function(t,e){var n=pn(e[0],t);if(!t.parser.leftrightDepth)throw new o("\\middle without preceding \\left",n);return{type:"middle",mode:t.parser.mode,delim:n.text}},htmlBuilder:function(t,e){var n;return"."===t.delim?n=me(e,[]):(n=ln(t.delim,1,e,t.mode,[])).isMiddle={delim:t.delim,options:e},n},mathmlBuilder:function(t,e){var n="\\vert"===t.delim||"|"===t.delim?Ce("|","text"):Ce(t.delim,t.mode),r=new _e.MathNode("mo",[n]);return r.setAttribute("fence","true"),r.setAttribute("lspace","0.05em"),r.setAttribute("rspace","0.05em"),r}});var An=function(t,e){var n,r,i=Vt.wrapFragment(ge(t.body,e),e),s=t.label.substr(1),o=e.sizeMultiplier,a=0,l=m(t.body);if("sout"===s)(n=Vt.makeSpan(["stretchy","sout"])).height=e.fontMetrics().defaultRuleThickness/o,a=-.5*e.fontMetrics().xHeight;else{/cancel/.test(s)?l||i.classes.push("cancel-pad"):i.classes.push("boxpad");var u=0,c=0;/box/.test(s)?(c=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness),u=e.fontMetrics().fboxsep+("colorbox"===s?0:c)):u=l?.2:0,n=function(t,e,n,r){var i,s=t.height+t.depth+2*n;if(/fbox|color/.test(e)){if(i=Vt.makeSpan(["stretchy",e],[],r),"fbox"===e){var o=r.color&&r.getColor();o&&(i.style.borderColor=o)}}else{var a=[];/^[bx]cancel$/.test(e)&&a.push(new $({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(e)&&a.push(new $({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var l=new Q(a,{width:"100%",height:s+"em"});i=Vt.makeSvgSpan([],[l],r)}return i.height=s,i.style.height=s+"em",i}(i,s,u,e),/fbox|boxed|fcolorbox/.test(s)&&(n.style.borderStyle="solid",n.style.borderWidth=c+"em"),a=i.depth+u,t.backgroundColor&&(n.style.backgroundColor=t.backgroundColor,t.borderColor&&(n.style.borderColor=t.borderColor))}return r=Vt.makeVList(t.backgroundColor?{positionType:"individualShift",children:[{type:"elem",elem:n,shift:a},{type:"elem",elem:i,shift:0}]}:{positionType:"individualShift",children:[{type:"elem",elem:i,shift:0},{type:"elem",elem:n,shift:a,wrapperClasses:/cancel/.test(s)?["svg-align"]:[]}]},e),/cancel/.test(s)&&(r.height=i.height,r.depth=i.depth),/cancel/.test(s)&&!l?Vt.makeSpan(["mord","cancel-lap"],[r],e):Vt.makeSpan(["mord"],[r],e)},mn=function(t,e){var n=0,r=new _e.MathNode(t.label.indexOf("colorbox")>-1?"mpadded":"menclose",[Ne(t.body,e)]);switch(t.label){case"\\cancel":r.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":r.setAttribute("notation","downdiagonalstrike");break;case"\\sout":r.setAttribute("notation","horizontalstrike");break;case"\\fbox":r.setAttribute("notation","box");break;case"\\fcolorbox":case"\\colorbox":if(n=e.fontMetrics().fboxsep*e.fontMetrics().ptPerEm,r.setAttribute("width","+"+2*n+"pt"),r.setAttribute("height","+"+2*n+"pt"),r.setAttribute("lspace",n+"pt"),r.setAttribute("voffset",n+"pt"),"\\fcolorbox"===t.label){var i=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness);r.setAttribute("style","border: "+i+"em solid "+String(t.borderColor))}break;case"\\xcancel":r.setAttribute("notation","updiagonalstrike downdiagonalstrike")}return t.backgroundColor&&r.setAttribute("mathbackground",t.backgroundColor),r};ie({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,greediness:3,argTypes:["color","text"]},handler:function(t,e,n){var r=t.parser,i=t.funcName,s=qt(e[0],"color-token").color;return{type:"enclose",mode:r.mode,label:i,backgroundColor:s,body:e[1]}},htmlBuilder:An,mathmlBuilder:mn}),ie({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,greediness:3,argTypes:["color","color","text"]},handler:function(t,e,n){var r=t.parser,i=t.funcName,s=qt(e[0],"color-token").color,o=qt(e[1],"color-token").color;return{type:"enclose",mode:r.mode,label:i,backgroundColor:o,borderColor:s,body:e[2]}},htmlBuilder:An,mathmlBuilder:mn}),ie({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler:function(t,e){return{type:"enclose",mode:t.parser.mode,label:"\\fbox",body:e[0]}}}),ie({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout"],props:{numArgs:1},handler:function(t,e,n){return{type:"enclose",mode:t.parser.mode,label:t.funcName,body:e[0]}},htmlBuilder:An,mathmlBuilder:mn});var gn={};function yn(t){for(var e=t.type,n=t.names,r=t.htmlBuilder,i=t.mathmlBuilder,s={type:e,numArgs:t.props.numArgs||0,greediness:1,allowedInText:!1,numOptionalArgs:0,handler:t.handler},o=0;o<n.length;++o)gn[n[o]]=s;r&&(ne[e]=r),i&&(re[e]=i)}function wn(t){var e=[];t.consumeSpaces();for(var n=t.fetch().text;"\\hline"===n||"\\hdashline"===n;)t.consume(),e.push("\\hdashline"===n),t.consumeSpaces(),n=t.fetch().text;return e}function bn(t,e,n){var r=e.hskipBeforeAndAfter,i=e.addJot,s=e.cols,a=e.arraystretch,l=e.colSeparationType;if(t.gullet.beginGroup(),t.gullet.macros.set("\\\\","\\cr"),!a){var u=t.gullet.expandMacroAsText("\\arraystretch");if(null==u)a=1;else if(!(a=parseFloat(u))||a<0)throw new o("Invalid \\arraystretch: "+u)}t.gullet.beginGroup();var c=[],h=[c],d=[],p=[];for(p.push(wn(t));;){var f=t.parseExpression(!1,"\\cr");t.gullet.endGroup(),t.gullet.beginGroup(),f={type:"ordgroup",mode:t.mode,body:f},n&&(f={type:"styling",mode:t.mode,style:n,body:[f]}),c.push(f);var A=t.fetch().text;if("&"===A)t.consume();else{if("\\end"===A){1===c.length&&"styling"===f.type&&0===f.body[0].body.length&&h.pop(),p.length<h.length+1&&p.push([]);break}if("\\cr"!==A)throw new o("Expected & or \\\\ or \\cr or \\end",t.nextToken);var m=qt(t.parseFunction(),"cr");d.push(m.size),p.push(wn(t)),h.push(c=[])}}return t.gullet.endGroup(),t.gullet.endGroup(),{type:"array",mode:t.mode,addJot:i,arraystretch:a,body:h,cols:s,rowGaps:d,hskipBeforeAndAfter:r,hLinesBeforeRow:p,colSeparationType:l}}function vn(t){return"d"===t.substr(0,1)?"display":"text"}var xn=function(t,e){var n,r,i=t.body.length,s=t.hLinesBeforeRow,a=0,l=new Array(i),u=[],c=Math.max(e.fontMetrics().arrayRuleWidth,e.minRuleThickness),h=1/e.fontMetrics().ptPerEm,p=5*h;t.colSeparationType&&"small"===t.colSeparationType&&(p=e.havingStyle(E.SCRIPT).sizeMultiplier/e.sizeMultiplier*.2778);var f=3*h,A=t.arraystretch*(12*h),m=.7*A,g=.3*A,y=0;function w(t){for(var e=0;e<t.length;++e)e>0&&(y+=.25),u.push({pos:y,isDashed:t[e]})}for(w(s[0]),n=0;n<t.body.length;++n){var b=t.body[n],v=m,x=g;a<b.length&&(a=b.length);var _=new Array(b.length);for(r=0;r<b.length;++r){var C=ge(b[r],e);x<C.depth&&(x=C.depth),v<C.height&&(v=C.height),_[r]=C}var S=t.rowGaps[n],B=0;S&&(B=Tt(S,e))>0&&(x<(B+=g)&&(x=B),B=0),t.addJot&&(x+=f),_.height=v,_.depth=x,_.pos=y+=v,y+=x+B,l[n]=_,w(s[n+1])}var k,N,I=y/2+e.fontMetrics().axisHeight,F=t.cols||[],T=[];for(r=0,N=0;r<a||N<F.length;++r,++N){for(var R=F[N]||{},O=!0;"separator"===R.type;){if(O||((k=Vt.makeSpan(["arraycolsep"],[])).style.width=e.fontMetrics().doubleRuleSep+"em",T.push(k)),"|"!==R.separator&&":"!==R.separator)throw new o("Invalid separator type: "+R.separator);var D="|"===R.separator?"solid":"dashed",L=Vt.makeSpan(["vertical-separator"],[],e);L.style.height=y+"em",L.style.borderRightWidth=c+"em",L.style.borderRightStyle=D,L.style.margin="0 -"+c/2+"em",L.style.verticalAlign=-(y-I)+"em",T.push(L),R=F[++N]||{},O=!1}if(!(r>=a)){var M=void 0;(r>0||t.hskipBeforeAndAfter)&&0!==(M=d(R.pregap,p))&&((k=Vt.makeSpan(["arraycolsep"],[])).style.width=M+"em",T.push(k));var U=[];for(n=0;n<i;++n){var P=l[n],z=P[r];if(z){var Q=P.pos-I;z.depth=P.depth,z.height=P.height,U.push({type:"elem",elem:z,shift:Q})}}U=Vt.makeVList({positionType:"individualShift",children:U},e),U=Vt.makeSpan(["col-align-"+(R.align||"c")],[U]),T.push(U),(r<a-1||t.hskipBeforeAndAfter)&&0!==(M=d(R.postgap,p))&&((k=Vt.makeSpan(["arraycolsep"],[])).style.width=M+"em",T.push(k))}}if(l=Vt.makeSpan(["mtable"],T),u.length>0){for(var H=Vt.makeLineSpan("hline",e,c),$=Vt.makeLineSpan("hdashline",e,c),V=[{type:"elem",elem:l,shift:0}];u.length>0;){var q=u.pop(),j=q.pos-I;V.push(q.isDashed?{type:"elem",elem:$,shift:j}:{type:"elem",elem:H,shift:j})}l=Vt.makeVList({positionType:"individualShift",children:V},e)}return Vt.makeSpan(["mord"],[l],e)},_n={c:"center ",l:"left ",r:"right "},Cn=function(t,e){var n=new _e.MathNode("mtable",t.body.map((function(t){return new _e.MathNode("mtr",t.map((function(t){return new _e.MathNode("mtd",[Ne(t,e)])})))})));n.setAttribute("rowspacing",(.5===t.arraystretch?.1:.16+t.arraystretch-1+(t.addJot?.09:0))+"em");var r="",i="";if(t.cols){var s=t.cols,o="",a=!1,l=0,u=s.length;"separator"===s[0].type&&(r+="top ",l=1),"separator"===s[s.length-1].type&&(r+="bottom ",u-=1);for(var c=l;c<u;c++)"align"===s[c].type?(i+=_n[s[c].align],a&&(o+="none "),a=!0):"separator"===s[c].type&&a&&(o+="|"===s[c].separator?"solid ":"dashed ",a=!1);n.setAttribute("columnalign",i.trim()),/[sd]/.test(o)&&n.setAttribute("columnlines",o.trim())}if("align"===t.colSeparationType){for(var h=t.cols||[],d="",p=1;p<h.length;p++)d+=p%2?"0em ":"1em ";n.setAttribute("columnspacing",d.trim())}else n.setAttribute("columnspacing","alignat"===t.colSeparationType?"0em":"small"===t.colSeparationType?"0.2778em":"1em");var f="",A=t.hLinesBeforeRow;r+=A[0].length>0?"left ":"",r+=A[A.length-1].length>0?"right ":"";for(var m=1;m<A.length-1;m++)f+=0===A[m].length?"none ":A[m][0]?"dashed ":"solid ";return/[sd]/.test(f)&&n.setAttribute("rowlines",f.trim()),""!==r&&(n=new _e.MathNode("menclose",[n])).setAttribute("notation",r.trim()),t.arraystretch&&t.arraystretch<1&&(n=new _e.MathNode("mstyle",[n])).setAttribute("scriptlevel","1"),n},Sn=function(t,e){var n,r=[],i=bn(t.parser,{cols:r,addJot:!0},"display"),s=0,a={type:"ordgroup",mode:t.mode,body:[]},l=jt(e[0],"ordgroup");if(l){for(var u="",c=0;c<l.body.length;c++)u+=qt(l.body[c],"textord").text;n=Number(u),s=2*n}var h=!s;i.body.forEach((function(t){for(var e=1;e<t.length;e+=2){var r=qt(t[e],"styling");qt(r.body[0],"ordgroup").body.unshift(a)}if(h)s<t.length&&(s=t.length);else{var i=t.length/2;if(n<i)throw new o("Too many math in a row: expected "+n+", but got "+i,t[0])}}));for(var d=0;d<s;++d){var p="r",f=0;d%2==1?p="l":d>0&&h&&(f=1),r[d]={type:"align",align:p,pregap:f,postgap:0}}return i.colSeparationType=h?"align":"alignat",i};yn({type:"array",names:["array","darray"],props:{numArgs:1},handler:function(t,e){var n=(Gt(e[0])?[e[0]]:qt(e[0],"ordgroup").body).map((function(t){var e=Wt(t).text;if(-1!=="lcr".indexOf(e))return{type:"align",align:e};if("|"===e)return{type:"separator",separator:"|"};if(":"===e)return{type:"separator",separator:":"};throw new o("Unknown column alignment: "+e,t)}));return bn(t.parser,{cols:n,hskipBeforeAndAfter:!0},vn(t.envName))},htmlBuilder:xn,mathmlBuilder:Cn}),yn({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix"],props:{numArgs:0},handler:function(t){var e={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[t.envName],n=bn(t.parser,{hskipBeforeAndAfter:!1},vn(t.envName));return e?{type:"leftright",mode:t.mode,body:[n],left:e[0],right:e[1],rightColor:void 0}:n},htmlBuilder:xn,mathmlBuilder:Cn}),yn({type:"array",names:["smallmatrix"],props:{numArgs:0},handler:function(t){var e=bn(t.parser,{arraystretch:.5},"script");return e.colSeparationType="small",e},htmlBuilder:xn,mathmlBuilder:Cn}),yn({type:"array",names:["subarray"],props:{numArgs:1},handler:function(t,e){var n=(Gt(e[0])?[e[0]]:qt(e[0],"ordgroup").body).map((function(t){var e=Wt(t).text;if(-1!=="lc".indexOf(e))return{type:"align",align:e};throw new o("Unknown column alignment: "+e,t)}));if(n.length>1)throw new o("{subarray} can contain only one column");var r={cols:n,hskipBeforeAndAfter:!1,arraystretch:.5};if((r=bn(t.parser,r,"script")).body[0].length>1)throw new o("{subarray} can contain only one column");return r},htmlBuilder:xn,mathmlBuilder:Cn}),yn({type:"array",names:["cases","dcases"],props:{numArgs:0},handler:function(t){var e=bn(t.parser,{arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},vn(t.envName));return{type:"leftright",mode:t.mode,body:[e],left:"\\{",right:".",rightColor:void 0}},htmlBuilder:xn,mathmlBuilder:Cn}),yn({type:"array",names:["aligned"],props:{numArgs:0},handler:Sn,htmlBuilder:xn,mathmlBuilder:Cn}),yn({type:"array",names:["gathered"],props:{numArgs:0},handler:function(t){return bn(t.parser,{cols:[{type:"align",align:"c"}],addJot:!0},"display")},htmlBuilder:xn,mathmlBuilder:Cn}),yn({type:"array",names:["alignedat"],props:{numArgs:1},handler:Sn,htmlBuilder:xn,mathmlBuilder:Cn}),ie({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler:function(t,e){throw new o(t.funcName+" valid only within array environment")}});var En=gn;ie({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler:function(t,e){var n=t.parser,r=t.funcName,i=e[0];if("ordgroup"!==i.type)throw new o("Invalid environment name",i);for(var s="",a=0;a<i.body.length;++a)s+=qt(i.body[a],"textord").text;if("\\begin"===r){if(!En.hasOwnProperty(s))throw new o("No such environment: "+s,i);var l=En[s],u=n.parseArguments("\\begin{"+s+"}",l),c=l.handler({mode:n.mode,envName:s,parser:n},u.args,u.optArgs);n.expect("\\end",!1);var h=n.nextToken,d=qt(n.parseFunction(),"environment");if(d.name!==s)throw new o("Mismatch: \\begin{"+s+"} matched by \\end{"+d.name+"}",h);return c}return{type:"environment",mode:n.mode,name:s,nameGroup:i}}});var Bn=Vt.makeSpan;function kn(t,e){var n=de(t.body,e,!0);return Bn([t.mclass],n,e)}function Nn(t,e){var n,r=Be(t.body,e);return"minner"===t.mclass?_e.newDocumentFragment(r):("mord"===t.mclass?t.isCharacterBox?(n=r[0]).type="mi":n=new _e.MathNode("mi",r):(t.isCharacterBox?(n=r[0]).type="mo":n=new _e.MathNode("mo",r),"mbin"===t.mclass?(n.attributes.lspace="0.22em",n.attributes.rspace="0.22em"):"mpunct"===t.mclass?(n.attributes.lspace="0em",n.attributes.rspace="0.17em"):"mopen"!==t.mclass&&"mclose"!==t.mclass||(n.attributes.lspace="0em",n.attributes.rspace="0em")),n)}ie({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1},handler:function(t,e){var n=e[0];return{type:"mclass",mode:t.parser.mode,mclass:"m"+t.funcName.substr(5),body:oe(n),isCharacterBox:m(n)}},htmlBuilder:kn,mathmlBuilder:Nn});var In=function(t){var e="ordgroup"===t.type&&t.body.length?t.body[0]:t;return"atom"!==e.type||"bin"!==e.family&&"rel"!==e.family?"mord":"m"+e.family};ie({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler:function(t,e){return{type:"mclass",mode:t.parser.mode,mclass:In(e[0]),body:[e[1]],isCharacterBox:m(e[1])}}}),ie({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler:function(t,e){var n,r=t.parser,i=t.funcName,s=e[1],o=e[0];n="\\stackrel"!==i?In(s):"mrel";var a={type:"op",mode:s.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:"\\stackrel"!==i,body:oe(s)},l={type:"supsub",mode:o.mode,base:a,sup:"\\underset"===i?null:o,sub:"\\underset"===i?o:null};return{type:"mclass",mode:r.mode,mclass:n,body:[l],isCharacterBox:m(l)}},htmlBuilder:kn,mathmlBuilder:Nn});var Fn=function(t,e){var n=e.withFont(t.font);return ge(t.body,n)},Tn=function(t,e){var n=e.withFont(t.font);return Ne(t.body,n)},Rn={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};ie({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,greediness:2},handler:function(t,e){var n=e[0],r=t.funcName;return r in Rn&&(r=Rn[r]),{type:"font",mode:t.parser.mode,font:r.slice(1),body:n}},htmlBuilder:Fn,mathmlBuilder:Tn}),ie({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1,greediness:2},handler:function(t,e){var n=t.parser,r=e[0],i=m(r);return{type:"mclass",mode:n.mode,mclass:In(r),body:[{type:"font",mode:n.mode,font:"boldsymbol",body:r}],isCharacterBox:i}}}),ie({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it"],props:{numArgs:0,allowedInText:!0},handler:function(t,e){var n=t.parser,r=t.funcName,i=n.mode,s=n.parseExpression(!0,t.breakOnTokenText);return{type:"font",mode:i,font:"math"+r.slice(1),body:{type:"ordgroup",mode:n.mode,body:s}}},htmlBuilder:Fn,mathmlBuilder:Tn});var On=function(t,e){var n=e;return"display"===t?n=n.id>=E.SCRIPT.id?n.text():E.DISPLAY:"text"===t&&n.size===E.DISPLAY.size?n=E.TEXT:"script"===t?n=E.SCRIPT:"scriptscript"===t&&(n=E.SCRIPTSCRIPT),n},Dn=function(t,e){var n,r=On(t.size,e.style),i=r.fracNum(),s=r.fracDen();n=e.havingStyle(i);var o=ge(t.numer,n,e);if(t.continued){var a=8.5/e.fontMetrics().ptPerEm,l=3.5/e.fontMetrics().ptPerEm;o.height=o.height<a?a:o.height,o.depth=o.depth<l?l:o.depth}n=e.havingStyle(s);var u,c,h,d,p,f,A,m,g,y,w=ge(t.denom,n,e);if(t.hasBarLine?(t.barSize?(c=Tt(t.barSize,e),u=Vt.makeLineSpan("frac-line",e,c)):u=Vt.makeLineSpan("frac-line",e),c=u.height,h=u.height):(u=null,c=0,h=e.fontMetrics().defaultRuleThickness),r.size===E.DISPLAY.size||"display"===t.size?(d=e.fontMetrics().num1,p=c>0?3*h:7*h,f=e.fontMetrics().denom1):(c>0?(d=e.fontMetrics().num2,p=h):(d=e.fontMetrics().num3,p=3*h),f=e.fontMetrics().denom2),u){var b=e.fontMetrics().axisHeight;d-o.depth-(b+.5*c)<p&&(d+=p-(d-o.depth-(b+.5*c))),b-.5*c-(w.height-f)<p&&(f+=p-(b-.5*c-(w.height-f))),A=Vt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:w,shift:f},{type:"elem",elem:u,shift:-(b-.5*c)},{type:"elem",elem:o,shift:-d}]},e)}else{var v=d-o.depth-(w.height-f);v<p&&(d+=.5*(p-v),f+=.5*(p-v)),A=Vt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:w,shift:f},{type:"elem",elem:o,shift:-d}]},e)}return n=e.havingStyle(r),A.height*=n.sizeMultiplier/e.sizeMultiplier,A.depth*=n.sizeMultiplier/e.sizeMultiplier,m=r.size===E.DISPLAY.size?e.fontMetrics().delim1:e.fontMetrics().delim2,g=null==t.leftDelim?me(e,["mopen"]):un(t.leftDelim,m,!0,e.havingStyle(r),t.mode,["mopen"]),y=t.continued?Vt.makeSpan([]):null==t.rightDelim?me(e,["mclose"]):un(t.rightDelim,m,!0,e.havingStyle(r),t.mode,["mclose"]),Vt.makeSpan(["mord"].concat(n.sizingClasses(e)),[g,Vt.makeSpan(["mfrac"],[A]),y],e)},Ln=function(t,e){var n=new _e.MathNode("mfrac",[Ne(t.numer,e),Ne(t.denom,e)]);if(t.hasBarLine){if(t.barSize){var r=Tt(t.barSize,e);n.setAttribute("linethickness",r+"em")}}else n.setAttribute("linethickness","0px");var i=On(t.size,e.style);if(i.size!==e.style.size&&((n=new _e.MathNode("mstyle",[n])).setAttribute("displaystyle",i.size===E.DISPLAY.size?"true":"false"),n.setAttribute("scriptlevel","0")),null!=t.leftDelim||null!=t.rightDelim){var s=[];if(null!=t.leftDelim){var o=new _e.MathNode("mo",[new _e.TextNode(t.leftDelim.replace("\\",""))]);o.setAttribute("fence","true"),s.push(o)}if(s.push(n),null!=t.rightDelim){var a=new _e.MathNode("mo",[new _e.TextNode(t.rightDelim.replace("\\",""))]);a.setAttribute("fence","true"),s.push(a)}return Se(s)}return n};ie({type:"genfrac",names:["\\cfrac","\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,greediness:2},handler:function(t,e){var n,r=t.parser,i=t.funcName,s=e[0],o=e[1],a=null,l=null,u="auto";switch(i){case"\\cfrac":case"\\dfrac":case"\\frac":case"\\tfrac":n=!0;break;case"\\\\atopfrac":n=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":n=!1,a="(",l=")";break;case"\\\\bracefrac":n=!1,a="\\{",l="\\}";break;case"\\\\brackfrac":n=!1,a="[",l="]";break;default:throw new Error("Unrecognized genfrac command")}switch(i){case"\\cfrac":case"\\dfrac":case"\\dbinom":u="display";break;case"\\tfrac":case"\\tbinom":u="text"}return{type:"genfrac",mode:r.mode,continued:"\\cfrac"===i,numer:s,denom:o,hasBarLine:n,leftDelim:a,rightDelim:l,size:u,barSize:null}},htmlBuilder:Dn,mathmlBuilder:Ln}),ie({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler:function(t){var e,n=t.parser,r=t.token;switch(t.funcName){case"\\over":e="\\frac";break;case"\\choose":e="\\binom";break;case"\\atop":e="\\\\atopfrac";break;case"\\brace":e="\\\\bracefrac";break;case"\\brack":e="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:n.mode,replaceWith:e,token:r}}});var Mn=["display","text","script","scriptscript"],Un=function(t){var e=null;return t.length>0&&(e="."===(e=t)?null:e),e};ie({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,greediness:6,argTypes:["math","math","size","text","math","math"]},handler:function(t,e){var n=t.parser,r=e[4],i=e[5],s=jt(e[0],"atom");s&&(s=Kt(e[0],"open"));var o=s?Un(s.text):null,a=jt(e[1],"atom");a&&(a=Kt(e[1],"close"));var l,u=a?Un(a.text):null,c=qt(e[2],"size"),h=null;l=!!c.isBlank||(h=c.value).number>0;var d="auto",p=jt(e[3],"ordgroup");if(p){if(p.body.length>0){var f=qt(p.body[0],"textord");d=Mn[Number(f.text)]}}else p=qt(e[3],"textord"),d=Mn[Number(p.text)];return{type:"genfrac",mode:n.mode,numer:r,denom:i,continued:!1,hasBarLine:l,barSize:h,leftDelim:o,rightDelim:u,size:d}},htmlBuilder:Dn,mathmlBuilder:Ln}),ie({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler:function(t,e){var n=t.token;return{type:"infix",mode:t.parser.mode,replaceWith:"\\\\abovefrac",size:qt(e[0],"size").value,token:n}}}),ie({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:function(t,e){var n=t.parser,r=e[0],i=function(t){if(!t)throw new Error("Expected non-null, but got "+String(t));return t}(qt(e[1],"infix").size);return{type:"genfrac",mode:n.mode,numer:r,denom:e[2],continued:!1,hasBarLine:i.number>0,barSize:i,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:Dn,mathmlBuilder:Ln});var Pn=function(t,e){var n,r,i=e.style,s=jt(t,"supsub");s?(n=s.sup?ge(s.sup,e.havingStyle(i.sup()),e):ge(s.sub,e.havingStyle(i.sub()),e),r=qt(s.base,"horizBrace")):r=qt(t,"horizBrace");var o,a=ge(r.base,e.havingBaseStyle(E.DISPLAY)),l=Le(r,e);if(r.isOver?(o=Vt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a},{type:"kern",size:.1},{type:"elem",elem:l}]},e)).children[0].children[0].children[1].classes.push("svg-align"):(o=Vt.makeVList({positionType:"bottom",positionData:a.depth+.1+l.height,children:[{type:"elem",elem:l},{type:"kern",size:.1},{type:"elem",elem:a}]},e)).children[0].children[0].children[0].classes.push("svg-align"),n){var u=Vt.makeSpan(["mord",r.isOver?"mover":"munder"],[o],e);o=Vt.makeVList(r.isOver?{positionType:"firstBaseline",children:[{type:"elem",elem:u},{type:"kern",size:.2},{type:"elem",elem:n}]}:{positionType:"bottom",positionData:u.depth+.2+n.height+n.depth,children:[{type:"elem",elem:n},{type:"kern",size:.2},{type:"elem",elem:u}]},e)}return Vt.makeSpan(["mord",r.isOver?"mover":"munder"],[o],e)};ie({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler:function(t,e){var n=t.funcName;return{type:"horizBrace",mode:t.parser.mode,label:n,isOver:/^\\over/.test(n),base:e[0]}},htmlBuilder:Pn,mathmlBuilder:function(t,e){var n=De(t.label);return new _e.MathNode(t.isOver?"mover":"munder",[Ne(t.base,e),n])}}),ie({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:function(t,e){var n=t.parser,r=e[1],i=qt(e[0],"url").url;return n.settings.isTrusted({command:"\\href",url:i})?{type:"href",mode:n.mode,href:i,body:oe(r)}:n.formatUnsupportedCmd("\\href")},htmlBuilder:function(t,e){var n=de(t.body,e,!1);return Vt.makeAnchor(t.href,[],n,e)},mathmlBuilder:function(t,e){var n=ke(t.body,e);return n instanceof ve||(n=new ve("mrow",[n])),n.setAttribute("href",t.href),n}}),ie({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:function(t,e){var n=t.parser,r=qt(e[0],"url").url;if(!n.settings.isTrusted({command:"\\url",url:r}))return n.formatUnsupportedCmd("\\url");for(var i=[],s=0;s<r.length;s++){var o=r[s];"~"===o&&(o="\\textasciitilde"),i.push({type:"textord",mode:"text",text:o})}return{type:"href",mode:n.mode,href:r,body:oe({type:"text",mode:n.mode,font:"\\texttt",body:i})}}}),ie({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:function(t,e){return{type:"htmlmathml",mode:t.parser.mode,html:oe(e[0]),mathml:oe(e[1])}},htmlBuilder:function(t,e){var n=de(t.html,e,!1);return Vt.makeFragment(n)},mathmlBuilder:function(t,e){return ke(t.mathml,e)}});var zn=function(t){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(t))return{number:+t,unit:"bp"};var e=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(t);if(!e)throw new o("Invalid size: '"+t+"' in \\includegraphics");var n={number:+(e[1]+e[2]),unit:e[3]};if(!Ft(n))throw new o("Invalid unit: '"+n.unit+"' in \\includegraphics.");return n};ie({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:function(t,e,n){var r=t.parser,i={number:0,unit:"em"},s={number:.9,unit:"em"},a={number:0,unit:"em"},l="";if(n[0])for(var u=qt(n[0],"raw").string.split(","),c=0;c<u.length;c++){var h=u[c].split("=");if(2===h.length){var d=h[1].trim();switch(h[0].trim()){case"alt":l=d;break;case"width":i=zn(d);break;case"height":s=zn(d);break;case"totalheight":a=zn(d);break;default:throw new o("Invalid key: '"+h[0]+"' in \\includegraphics.")}}}var p=qt(e[0],"url").url;return""===l&&(l=(l=(l=p).replace(/^.*[\\/]/,"")).substring(0,l.lastIndexOf("."))),r.settings.isTrusted({command:"\\includegraphics",url:p})?{type:"includegraphics",mode:r.mode,alt:l,width:i,height:s,totalheight:a,src:p}:r.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:function(t,e){var n=Tt(t.height,e),r=0;t.totalheight.number>0&&(r=Tt(t.totalheight,e)-n,r=Number(r.toFixed(2)));var i=0;t.width.number>0&&(i=Tt(t.width,e));var s={height:n+r+"em"};i>0&&(s.width=i+"em"),r>0&&(s.verticalAlign=-r+"em");var o=new U(t.src,t.alt,s);return o.height=n,o.depth=r,o},mathmlBuilder:function(t,e){var n=new _e.MathNode("mglyph",[]);n.setAttribute("alt",t.alt);var r=Tt(t.height,e),i=0;if(t.totalheight.number>0&&(i=(i=Tt(t.totalheight,e)-r).toFixed(2),n.setAttribute("valign","-"+i+"em")),n.setAttribute("height",r+i+"em"),t.width.number>0){var s=Tt(t.width,e);n.setAttribute("width",s+"em")}return n.setAttribute("src",t.src),n}}),ie({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],allowedInText:!0},handler:function(t,e){var n=t.parser,r=t.funcName,i=qt(e[0],"size");if(n.settings.strict){var s="mu"===i.value.unit;"m"===r[1]?(s||n.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+r+" supports only mu units, not "+i.value.unit+" units"),"math"!==n.mode&&n.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+r+" works only in math mode")):s&&n.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+r+" doesn't support mu units")}return{type:"kern",mode:n.mode,dimension:i.value}},htmlBuilder:function(t,e){return Vt.makeGlue(t.dimension,e)},mathmlBuilder:function(t,e){var n=Tt(t.dimension,e);return new _e.SpaceNode(n)}}),ie({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:function(t,e){var n=e[0];return{type:"lap",mode:t.parser.mode,alignment:t.funcName.slice(5),body:n}},htmlBuilder:function(t,e){var n;"clap"===t.alignment?(n=Vt.makeSpan([],[ge(t.body,e)]),n=Vt.makeSpan(["inner"],[n],e)):n=Vt.makeSpan(["inner"],[ge(t.body,e)]);var r=Vt.makeSpan(["fix"],[]),i=Vt.makeSpan([t.alignment],[n,r],e),s=Vt.makeSpan(["strut"]);return s.style.height=i.height+i.depth+"em",s.style.verticalAlign=-i.depth+"em",i.children.unshift(s),i=Vt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:i}]},e),Vt.makeSpan(["mord"],[i],e)},mathmlBuilder:function(t,e){var n=new _e.MathNode("mpadded",[Ne(t.body,e)]);return"rlap"!==t.alignment&&n.setAttribute("lspace",("llap"===t.alignment?"-1":"-0.5")+"width"),n.setAttribute("width","0px"),n}}),ie({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler:function(t,e){var n=t.funcName,r=t.parser,i=r.mode;r.switchMode("math");var s="\\("===n?"\\)":"$",o=r.parseExpression(!1,s);return r.expect(s),r.switchMode(i),{type:"styling",mode:r.mode,style:"text",body:o}}}),ie({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler:function(t,e){throw new o("Mismatched "+t.funcName)}});var Qn=function(t,e){switch(e.style.size){case E.DISPLAY.size:return t.display;case E.TEXT.size:return t.text;case E.SCRIPT.size:return t.script;case E.SCRIPTSCRIPT.size:return t.scriptscript;default:return t.text}};ie({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4},handler:function(t,e){return{type:"mathchoice",mode:t.parser.mode,display:oe(e[0]),text:oe(e[1]),script:oe(e[2]),scriptscript:oe(e[3])}},htmlBuilder:function(t,e){var n=Qn(t,e),r=de(n,e,!1);return Vt.makeFragment(r)},mathmlBuilder:function(t,e){var n=Qn(t,e);return ke(n,e)}});var Hn=function(t,e,n,r,i,s,o){var a,l,u;if(t=Vt.makeSpan([],[t]),e){var c=ge(e,r.havingStyle(i.sup()),r);l={elem:c,kern:Math.max(r.fontMetrics().bigOpSpacing1,r.fontMetrics().bigOpSpacing3-c.depth)}}if(n){var h=ge(n,r.havingStyle(i.sub()),r);a={elem:h,kern:Math.max(r.fontMetrics().bigOpSpacing2,r.fontMetrics().bigOpSpacing4-h.height)}}if(l&&a){var d=r.fontMetrics().bigOpSpacing5+a.elem.height+a.elem.depth+a.kern+t.depth+o;u=Vt.makeVList({positionType:"bottom",positionData:d,children:[{type:"kern",size:r.fontMetrics().bigOpSpacing5},{type:"elem",elem:a.elem,marginLeft:-s+"em"},{type:"kern",size:a.kern},{type:"elem",elem:t},{type:"kern",size:l.kern},{type:"elem",elem:l.elem,marginLeft:s+"em"},{type:"kern",size:r.fontMetrics().bigOpSpacing5}]},r)}else if(a)u=Vt.makeVList({positionType:"top",positionData:t.height-o,children:[{type:"kern",size:r.fontMetrics().bigOpSpacing5},{type:"elem",elem:a.elem,marginLeft:-s+"em"},{type:"kern",size:a.kern},{type:"elem",elem:t}]},r);else{if(!l)return t;u=Vt.makeVList({positionType:"bottom",positionData:t.depth+o,children:[{type:"elem",elem:t},{type:"kern",size:l.kern},{type:"elem",elem:l.elem,marginLeft:s+"em"},{type:"kern",size:r.fontMetrics().bigOpSpacing5}]},r)}return Vt.makeSpan(["mop","op-limits"],[u],r)},$n=["\\smallint"],Vn=function(t,e){var n,r,i,s=!1,o=jt(t,"supsub");o?(n=o.sup,r=o.sub,i=qt(o.base,"op"),s=!0):i=qt(t,"op");var a,l=e.style,u=!1;if(l.size===E.DISPLAY.size&&i.symbol&&!h($n,i.name)&&(u=!0),i.symbol){var c=u?"Size2-Regular":"Size1-Regular",d="";if("\\oiint"!==i.name&&"\\oiiint"!==i.name||(d=i.name.substr(1),i.name="oiint"===d?"\\iint":"\\iiint"),a=Vt.makeSymbol(i.name,c,"math",e,["mop","op-symbol",u?"large-op":"small-op"]),d.length>0){var p=a.italic,f=Vt.staticSvg(d+"Size"+(u?"2":"1"),e);a=Vt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:a,shift:0},{type:"elem",elem:f,shift:u?.08:0}]},e),i.name="\\"+d,a.classes.unshift("mop"),a.italic=p}}else if(i.body){var A=de(i.body,e,!0);1===A.length&&A[0]instanceof z?(a=A[0]).classes[0]="mop":a=Vt.makeSpan(["mop"],Vt.tryCombineChars(A),e)}else{for(var m=[],g=1;g<i.name.length;g++)m.push(Vt.mathsym(i.name[g],i.mode,e));a=Vt.makeSpan(["mop"],m,e)}var y=0,w=0;return(a instanceof z||"\\oiint"===i.name||"\\oiiint"===i.name)&&!i.suppressBaseShift&&(y=(a.height-a.depth)/2-e.fontMetrics().axisHeight,w=a.italic),s?Hn(a,n,r,e,l,w,y):(y&&(a.style.position="relative",a.style.top=y+"em"),a)},qn=function(t,e){var n;if(t.symbol)n=new ve("mo",[Ce(t.name,t.mode)]),h($n,t.name)&&n.setAttribute("largeop","false");else if(t.body)n=new ve("mo",Be(t.body,e));else{n=new ve("mi",[new xe(t.name.slice(1))]);var r=new ve("mo",[Ce("\u2061","text")]);n=t.parentIsSupSub?new ve("mo",[n,r]):be([n,r])}return n},jn={"\u220f":"\\prod","\u2210":"\\coprod","\u2211":"\\sum","\u22c0":"\\bigwedge","\u22c1":"\\bigvee","\u22c2":"\\bigcap","\u22c3":"\\bigcup","\u2a00":"\\bigodot","\u2a01":"\\bigoplus","\u2a02":"\\bigotimes","\u2a04":"\\biguplus","\u2a06":"\\bigsqcup"};ie({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","\u220f","\u2210","\u2211","\u22c0","\u22c1","\u22c2","\u22c3","\u2a00","\u2a01","\u2a02","\u2a04","\u2a06"],props:{numArgs:0},handler:function(t,e){var n=t.funcName;return 1===n.length&&(n=jn[n]),{type:"op",mode:t.parser.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:n}},htmlBuilder:Vn,mathmlBuilder:qn}),ie({type:"op",names:["\\mathop"],props:{numArgs:1},handler:function(t,e){return{type:"op",mode:t.parser.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:oe(e[0])}},htmlBuilder:Vn,mathmlBuilder:qn});var Kn={"\u222b":"\\int","\u222c":"\\iint","\u222d":"\\iiint","\u222e":"\\oint","\u222f":"\\oiint","\u2230":"\\oiiint"};ie({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler:function(t){return{type:"op",mode:t.parser.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:t.funcName}},htmlBuilder:Vn,mathmlBuilder:qn}),ie({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler:function(t){return{type:"op",mode:t.parser.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:t.funcName}},htmlBuilder:Vn,mathmlBuilder:qn}),ie({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","\u222b","\u222c","\u222d","\u222e","\u222f","\u2230"],props:{numArgs:0},handler:function(t){var e=t.funcName;return 1===e.length&&(e=Kn[e]),{type:"op",mode:t.parser.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:e}},htmlBuilder:Vn,mathmlBuilder:qn});var Wn=function(t,e){var n,r,i,s,o=!1,a=jt(t,"supsub");if(a?(n=a.sup,r=a.sub,i=qt(a.base,"operatorname"),o=!0):i=qt(t,"operatorname"),i.body.length>0){for(var l=i.body.map((function(t){var e=t.text;return"string"==typeof e?{type:"textord",mode:t.mode,text:e}:t})),u=de(l,e.withFont("mathrm"),!0),c=0;c<u.length;c++){var h=u[c];h instanceof z&&(h.text=h.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}s=Vt.makeSpan(["mop"],u,e)}else s=Vt.makeSpan(["mop"],[],e);return o?Hn(s,n,r,e,e.style,0,0):s};function Gn(t,e,n){for(var r=de(t,e,!1),i=e.sizeMultiplier/n.sizeMultiplier,s=0;s<r.length;s++){var o=r[s].classes.indexOf("sizing");o<0?Array.prototype.push.apply(r[s].classes,e.sizingClasses(n)):r[s].classes[o+1]==="reset-size"+e.size&&(r[s].classes[o+1]="reset-size"+n.size),r[s].height*=i,r[s].depth*=i}return Vt.makeFragment(r)}ie({type:"operatorname",names:["\\operatorname","\\operatorname*"],props:{numArgs:1},handler:function(t,e){var n=t.funcName;return{type:"operatorname",mode:t.parser.mode,body:oe(e[0]),alwaysHandleSupSub:"\\operatorname*"===n,limits:!1,parentIsSupSub:!1}},htmlBuilder:Wn,mathmlBuilder:function(t,e){for(var n=Be(t.body,e.withFont("mathrm")),r=!0,i=0;i<n.length;i++){var s=n[i];if(s instanceof _e.SpaceNode);else if(s instanceof _e.MathNode)switch(s.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":var o=s.children[0];1===s.children.length&&o instanceof _e.TextNode?o.text=o.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):r=!1;break;default:r=!1}else r=!1}if(r){var a=n.map((function(t){return t.toText()})).join("");n=[new _e.TextNode(a)]}var l=new _e.MathNode("mi",n);l.setAttribute("mathvariant","normal");var u=new _e.MathNode("mo",[Ce("\u2061","text")]);return t.parentIsSupSub?new _e.MathNode("mo",[l,u]):_e.newDocumentFragment([l,u])}}),se({type:"ordgroup",htmlBuilder:function(t,e){return t.semisimple?Vt.makeFragment(de(t.body,e,!1)):Vt.makeSpan(["mord"],de(t.body,e,!0),e)},mathmlBuilder:function(t,e){return ke(t.body,e,!0)}}),ie({type:"overline",names:["\\overline"],props:{numArgs:1},handler:function(t,e){return{type:"overline",mode:t.parser.mode,body:e[0]}},htmlBuilder:function(t,e){var n=ge(t.body,e.havingCrampedStyle()),r=Vt.makeLineSpan("overline-line",e),i=e.fontMetrics().defaultRuleThickness,s=Vt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n},{type:"kern",size:3*i},{type:"elem",elem:r},{type:"kern",size:i}]},e);return Vt.makeSpan(["mord","overline"],[s],e)},mathmlBuilder:function(t,e){var n=new _e.MathNode("mo",[new _e.TextNode("\u203e")]);n.setAttribute("stretchy","true");var r=new _e.MathNode("mover",[Ne(t.body,e),n]);return r.setAttribute("accent","true"),r}}),ie({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:function(t,e){return{type:"phantom",mode:t.parser.mode,body:oe(e[0])}},htmlBuilder:function(t,e){var n=de(t.body,e.withPhantom(),!1);return Vt.makeFragment(n)},mathmlBuilder:function(t,e){var n=Be(t.body,e);return new _e.MathNode("mphantom",n)}}),ie({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:function(t,e){return{type:"hphantom",mode:t.parser.mode,body:e[0]}},htmlBuilder:function(t,e){var n=Vt.makeSpan([],[ge(t.body,e.withPhantom())]);if(n.height=0,n.depth=0,n.children)for(var r=0;r<n.children.length;r++)n.children[r].height=0,n.children[r].depth=0;return n=Vt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n}]},e),Vt.makeSpan(["mord"],[n],e)},mathmlBuilder:function(t,e){var n=Be(oe(t.body),e),r=new _e.MathNode("mphantom",n),i=new _e.MathNode("mpadded",[r]);return i.setAttribute("height","0px"),i.setAttribute("depth","0px"),i}}),ie({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:function(t,e){return{type:"vphantom",mode:t.parser.mode,body:e[0]}},htmlBuilder:function(t,e){var n=Vt.makeSpan(["inner"],[ge(t.body,e.withPhantom())]),r=Vt.makeSpan(["fix"],[]);return Vt.makeSpan(["mord","rlap"],[n,r],e)},mathmlBuilder:function(t,e){var n=Be(oe(t.body),e),r=new _e.MathNode("mphantom",n),i=new _e.MathNode("mpadded",[r]);return i.setAttribute("width","0px"),i}}),ie({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler:function(t,e){var n=t.parser,r=qt(e[0],"size").value;return{type:"raisebox",mode:n.mode,dy:r,body:e[1]}},htmlBuilder:function(t,e){var n=ge(t.body,e),r=Tt(t.dy,e);return Vt.makeVList({positionType:"shift",positionData:-r,children:[{type:"elem",elem:n}]},e)},mathmlBuilder:function(t,e){var n=new _e.MathNode("mpadded",[Ne(t.body,e)]);return n.setAttribute("voffset",t.dy.number+t.dy.unit),n}}),ie({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,argTypes:["size","size","size"]},handler:function(t,e,n){var r=t.parser,i=n[0],s=qt(e[0],"size"),o=qt(e[1],"size");return{type:"rule",mode:r.mode,shift:i&&qt(i,"size").value,width:s.value,height:o.value}},htmlBuilder:function(t,e){var n=Vt.makeSpan(["mord","rule"],[],e),r=Tt(t.width,e),i=Tt(t.height,e),s=t.shift?Tt(t.shift,e):0;return n.style.borderRightWidth=r+"em",n.style.borderTopWidth=i+"em",n.style.bottom=s+"em",n.width=r,n.height=i+s,n.depth=-s,n.maxFontSize=1.125*i*e.sizeMultiplier,n},mathmlBuilder:function(t,e){var n=Tt(t.width,e),r=Tt(t.height,e),i=t.shift?Tt(t.shift,e):0,s=e.color&&e.getColor()||"black",o=new _e.MathNode("mspace");o.setAttribute("mathbackground",s),o.setAttribute("width",n+"em"),o.setAttribute("height",r+"em");var a=new _e.MathNode("mpadded",[o]);return i>=0?a.setAttribute("height","+"+i+"em"):(a.setAttribute("height",i+"em"),a.setAttribute("depth","+"+-i+"em")),a.setAttribute("voffset",i+"em"),a}});var Xn=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"];ie({type:"sizing",names:Xn,props:{numArgs:0,allowedInText:!0},handler:function(t,e){var n=t.funcName,r=t.parser,i=r.parseExpression(!1,t.breakOnTokenText);return{type:"sizing",mode:r.mode,size:Xn.indexOf(n)+1,body:i}},htmlBuilder:function(t,e){var n=e.havingSize(t.size);return Gn(t.body,n,e)},mathmlBuilder:function(t,e){var n=e.havingSize(t.size),r=Be(t.body,n),i=new _e.MathNode("mstyle",r);return i.setAttribute("mathsize",n.sizeMultiplier+"em"),i}}),ie({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:function(t,e,n){var r=t.parser,i=!1,s=!1,o=n[0]&&qt(n[0],"ordgroup");if(o)for(var a="",l=0;l<o.body.length;++l)if("t"===(a=o.body[l].text))i=!0;else{if("b"!==a){i=!1,s=!1;break}s=!0}else i=!0,s=!0;return{type:"smash",mode:r.mode,body:e[0],smashHeight:i,smashDepth:s}},htmlBuilder:function(t,e){var n=Vt.makeSpan([],[ge(t.body,e)]);if(!t.smashHeight&&!t.smashDepth)return n;if(t.smashHeight&&(n.height=0,n.children))for(var r=0;r<n.children.length;r++)n.children[r].height=0;if(t.smashDepth&&(n.depth=0,n.children))for(var i=0;i<n.children.length;i++)n.children[i].depth=0;var s=Vt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n}]},e);return Vt.makeSpan(["mord"],[s],e)},mathmlBuilder:function(t,e){var n=new _e.MathNode("mpadded",[Ne(t.body,e)]);return t.smashHeight&&n.setAttribute("height","0px"),t.smashDepth&&n.setAttribute("depth","0px"),n}}),ie({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler:function(t,e,n){return{type:"sqrt",mode:t.parser.mode,body:e[0],index:n[0]}},htmlBuilder:function(t,e){var n=ge(t.body,e.havingCrampedStyle());0===n.height&&(n.height=e.fontMetrics().xHeight),n=Vt.wrapFragment(n,e);var r=e.fontMetrics().defaultRuleThickness,i=r;e.style.id<E.TEXT.id&&(i=e.fontMetrics().xHeight);var s=r+i/4,o=function(t,e){var n,r,i=e.havingBaseSizing(),s=on("\\surd",t*i.sizeMultiplier,rn,i),o=i.sizeMultiplier,a=Math.max(0,e.minRuleThickness-e.fontMetrics().sqrtRuleThickness),l=0,u=0,c=0;return"small"===s.type?(t<1?o=1:t<1.4&&(o=.7),u=(1+a)/o,(n=Xe("sqrtMain",l=(1+a+.08)/o,c=1e3+1e3*a+80,a,e)).style.minWidth="0.853em",r=.833/o):"large"===s.type?(u=(tn[s.size]+a)/o,(n=Xe("sqrtSize"+s.size,l=(tn[s.size]+a+.08)/o,c=1080*tn[s.size],a,e)).style.minWidth="1.02em",r=1/o):(l=t+a+.08,u=t+a,c=Math.floor(1e3*t+a)+80,(n=Xe("sqrtTall",l,c,a,e)).style.minWidth="0.742em",r=1.056),n.height=u,n.style.height=l+"em",{span:n,advanceWidth:r,ruleWidth:(e.fontMetrics().sqrtRuleThickness+a)*o}}(n.height+n.depth+s+r,e),a=o.span,l=o.ruleWidth,u=a.height-l;u>n.height+n.depth+s&&(s=(s+u-n.height-n.depth)/2);var c=a.height-n.height-s-l;n.style.paddingLeft=o.advanceWidth+"em";var h=Vt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n,wrapperClasses:["svg-align"]},{type:"kern",size:-(n.height+c)},{type:"elem",elem:a},{type:"kern",size:l}]},e);if(t.index){var d=e.havingStyle(E.SCRIPTSCRIPT),p=ge(t.index,d,e),f=Vt.makeVList({positionType:"shift",positionData:-.6*(h.height-h.depth),children:[{type:"elem",elem:p}]},e),A=Vt.makeSpan(["root"],[f]);return Vt.makeSpan(["mord","sqrt"],[A,h],e)}return Vt.makeSpan(["mord","sqrt"],[h],e)},mathmlBuilder:function(t,e){var n=t.body,r=t.index;return r?new _e.MathNode("mroot",[Ne(n,e),Ne(r,e)]):new _e.MathNode("msqrt",[Ne(n,e)])}});var Yn={display:E.DISPLAY,text:E.TEXT,script:E.SCRIPT,scriptscript:E.SCRIPTSCRIPT};ie({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0},handler:function(t,e){var n=t.funcName,r=t.parser,i=r.parseExpression(!0,t.breakOnTokenText),s=n.slice(1,n.length-5);return{type:"styling",mode:r.mode,style:s,body:i}},htmlBuilder:function(t,e){var n=e.havingStyle(Yn[t.style]).withFont("");return Gn(t.body,n,e)},mathmlBuilder:function(t,e){var n=e.havingStyle(Yn[t.style]),r=Be(t.body,n),i=new _e.MathNode("mstyle",r),s={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]}[t.style];return i.setAttribute("scriptlevel",s[0]),i.setAttribute("displaystyle",s[1]),i}}),se({type:"supsub",htmlBuilder:function(t,e){var n=function(t,e){var n=t.base;return n?"op"===n.type?n.limits&&(e.style.size===E.DISPLAY.size||n.alwaysHandleSupSub)?Vn:null:"operatorname"===n.type?n.alwaysHandleSupSub&&(e.style.size===E.DISPLAY.size||n.limits)?Wn:null:"accent"===n.type?m(n.base)?Me:null:"horizBrace"===n.type&&!t.sub===n.isOver?Pn:null:null}(t,e);if(n)return n(t,e);var r,i,s,o=t.base,a=t.sup,l=t.sub,u=ge(o,e),c=e.fontMetrics(),h=0,d=0,p=o&&m(o);if(a){var f=e.havingStyle(e.style.sup());r=ge(a,f,e),p||(h=u.height-f.fontMetrics().supDrop*f.sizeMultiplier/e.sizeMultiplier)}if(l){var A=e.havingStyle(e.style.sub());i=ge(l,A,e),p||(d=u.depth+A.fontMetrics().subDrop*A.sizeMultiplier/e.sizeMultiplier)}s=e.style===E.DISPLAY?c.sup1:e.style.cramped?c.sup3:c.sup2;var g,y=.5/c.ptPerEm/e.sizeMultiplier+"em",w=null;if(i&&(u instanceof z||t.base&&"op"===t.base.type&&t.base.name&&("\\oiint"===t.base.name||"\\oiiint"===t.base.name))&&(w=-u.italic+"em"),r&&i){h=Math.max(h,s,r.depth+.25*c.xHeight),d=Math.max(d,c.sub2);var b=4*c.defaultRuleThickness;if(h-r.depth-(i.height-d)<b){d=b-(h-r.depth)+i.height;var v=.8*c.xHeight-(h-r.depth);v>0&&(h+=v,d-=v)}g=Vt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:i,shift:d,marginRight:y,marginLeft:w},{type:"elem",elem:r,shift:-h,marginRight:y}]},e)}else if(i)d=Math.max(d,c.sub1,i.height-.8*c.xHeight),g=Vt.makeVList({positionType:"shift",positionData:d,children:[{type:"elem",elem:i,marginLeft:w,marginRight:y}]},e);else{if(!r)throw new Error("supsub must have either sup or sub.");h=Math.max(h,s,r.depth+.25*c.xHeight),g=Vt.makeVList({positionType:"shift",positionData:-h,children:[{type:"elem",elem:r,marginRight:y}]},e)}var x=Ae(u,"right")||"mord";return Vt.makeSpan([x],[u,Vt.makeSpan(["msupsub"],[g])],e)},mathmlBuilder:function(t,e){var n,r=!1,i=jt(t.base,"horizBrace");i&&!!t.sup===i.isOver&&(r=!0,n=i.isOver),!t.base||"op"!==t.base.type&&"operatorname"!==t.base.type||(t.base.parentIsSupSub=!0);var s,o=[Ne(t.base,e)];if(t.sub&&o.push(Ne(t.sub,e)),t.sup&&o.push(Ne(t.sup,e)),r)s=n?"mover":"munder";else if(t.sub)if(t.sup){var a=t.base;s=a&&"op"===a.type&&a.limits&&e.style===E.DISPLAY||a&&"operatorname"===a.type&&a.alwaysHandleSupSub&&(e.style===E.DISPLAY||a.limits)?"munderover":"msubsup"}else{var l=t.base;s=l&&"op"===l.type&&l.limits&&(e.style===E.DISPLAY||l.alwaysHandleSupSub)||l&&"operatorname"===l.type&&l.alwaysHandleSupSub&&(l.limits||e.style===E.DISPLAY)?"munder":"msub"}else{var u=t.base;s=u&&"op"===u.type&&u.limits&&(e.style===E.DISPLAY||u.alwaysHandleSupSub)||u&&"operatorname"===u.type&&u.alwaysHandleSupSub&&(u.limits||e.style===E.DISPLAY)?"mover":"msup"}return new _e.MathNode(s,o)}}),se({type:"atom",htmlBuilder:function(t,e){return Vt.mathsym(t.text,t.mode,e,["m"+t.family])},mathmlBuilder:function(t,e){var n=new _e.MathNode("mo",[Ce(t.text,t.mode)]);if("bin"===t.family){var r=Ee(t,e);"bold-italic"===r&&n.setAttribute("mathvariant",r)}else"punct"===t.family?n.setAttribute("separator","true"):"open"!==t.family&&"close"!==t.family||n.setAttribute("stretchy","false");return n}});var Jn={mi:"italic",mn:"normal",mtext:"normal"};se({type:"mathord",htmlBuilder:function(t,e){return Vt.makeOrd(t,e,"mathord")},mathmlBuilder:function(t,e){var n=new _e.MathNode("mi",[Ce(t.text,t.mode,e)]),r=Ee(t,e)||"italic";return r!==Jn[n.type]&&n.setAttribute("mathvariant",r),n}}),se({type:"textord",htmlBuilder:function(t,e){return Vt.makeOrd(t,e,"textord")},mathmlBuilder:function(t,e){var n,r=Ce(t.text,t.mode,e),i=Ee(t,e)||"normal";return n="text"===t.mode?new _e.MathNode("mtext",[r]):/[0-9]/.test(t.text)?new _e.MathNode("mn",[r]):new _e.MathNode("\\prime"===t.text?"mo":"mi",[r]),i!==Jn[n.type]&&n.setAttribute("mathvariant",i),n}});var Zn={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},tr={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};se({type:"spacing",htmlBuilder:function(t,e){if(tr.hasOwnProperty(t.text)){var n=tr[t.text].className||"";if("text"===t.mode){var r=Vt.makeOrd(t,e,"textord");return r.classes.push(n),r}return Vt.makeSpan(["mspace",n],[Vt.mathsym(t.text,t.mode,e)],e)}if(Zn.hasOwnProperty(t.text))return Vt.makeSpan(["mspace",Zn[t.text]],[],e);throw new o('Unknown type of space "'+t.text+'"')},mathmlBuilder:function(t,e){if(!tr.hasOwnProperty(t.text)){if(Zn.hasOwnProperty(t.text))return new _e.MathNode("mspace");throw new o('Unknown type of space "'+t.text+'"')}return new _e.MathNode("mtext",[new _e.TextNode("\xa0")])}});var er=function(){var t=new _e.MathNode("mtd",[]);return t.setAttribute("width","50%"),t};se({type:"tag",mathmlBuilder:function(t,e){var n=new _e.MathNode("mtable",[new _e.MathNode("mtr",[er(),new _e.MathNode("mtd",[ke(t.body,e)]),er(),new _e.MathNode("mtd",[ke(t.tag,e)])])]);return n.setAttribute("width","100%"),n}});var nr={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},rr={"\\textbf":"textbf","\\textmd":"textmd"},ir={"\\textit":"textit","\\textup":"textup"},sr=function(t,e){var n=t.font;return n?nr[n]?e.withTextFontFamily(nr[n]):rr[n]?e.withTextFontWeight(rr[n]):e.withTextFontShape(ir[n]):e};ie({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup"],props:{numArgs:1,argTypes:["text"],greediness:2,allowedInText:!0},handler:function(t,e){var n=t.funcName;return{type:"text",mode:t.parser.mode,body:oe(e[0]),font:n}},htmlBuilder:function(t,e){var n=sr(t,e),r=de(t.body,n,!0);return Vt.makeSpan(["mord","text"],Vt.tryCombineChars(r),n)},mathmlBuilder:function(t,e){var n=sr(t,e);return ke(t.body,n)}}),ie({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler:function(t,e){return{type:"underline",mode:t.parser.mode,body:e[0]}},htmlBuilder:function(t,e){var n=ge(t.body,e),r=Vt.makeLineSpan("underline-line",e),i=e.fontMetrics().defaultRuleThickness,s=Vt.makeVList({positionType:"top",positionData:n.height,children:[{type:"kern",size:i},{type:"elem",elem:r},{type:"kern",size:3*i},{type:"elem",elem:n}]},e);return Vt.makeSpan(["mord","underline"],[s],e)},mathmlBuilder:function(t,e){var n=new _e.MathNode("mo",[new _e.TextNode("\u203e")]);n.setAttribute("stretchy","true");var r=new _e.MathNode("munder",[Ne(t.body,e),n]);return r.setAttribute("accentunder","true"),r}}),ie({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler:function(t,e,n){throw new o("\\verb ended by end of line instead of matching delimiter")},htmlBuilder:function(t,e){for(var n=or(t),r=[],i=e.havingStyle(e.style.text()),s=0;s<n.length;s++){var o=n[s];"~"===o&&(o="\\textasciitilde"),r.push(Vt.makeSymbol(o,"Typewriter-Regular",t.mode,i,["mord","texttt"]))}return Vt.makeSpan(["mord","text"].concat(i.sizingClasses(e)),Vt.tryCombineChars(r),i)},mathmlBuilder:function(t,e){var n=new _e.TextNode(or(t)),r=new _e.MathNode("mtext",[n]);return r.setAttribute("mathvariant","monospace"),r}});var or=function(t){return t.body.replace(/ /g,t.star?"\u2423":"\xa0")},ar=ee,lr=new RegExp("^(\\\\[a-zA-Z@]+)[ \r\n\t]*$"),ur=new RegExp("[\u0300-\u036f]+$"),cr=function(){function t(t,e){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=t,this.settings=e,this.tokenRegex=new RegExp("([ \r\n\t]+)|([!-\\[\\]-\u2027\u202a-\ud7ff\uf900-\uffff][\u0300-\u036f]*|[\ud800-\udbff][\udc00-\udfff][\u0300-\u036f]*|\\\\verb\\*([^]).*?\\3|\\\\verb([^*a-zA-Z]).*?\\4|\\\\operatorname\\*|\\\\[a-zA-Z@]+[ \r\n\t]*|\\\\[^\ud800-\udfff])","g"),this.catcodes={"%":14}}var e=t.prototype;return e.setCatcode=function(t,e){this.catcodes[t]=e},e.lex=function(){var t=this.input,e=this.tokenRegex.lastIndex;if(e===t.length)return new i("EOF",new r(this,e,e));var n=this.tokenRegex.exec(t);if(null===n||n.index!==e)throw new o("Unexpected character: '"+t[e]+"'",new i(t[e],new r(this,e,e+1)));var s=n[2]||" ";if(14===this.catcodes[s]){var a=t.indexOf("\n",this.tokenRegex.lastIndex);return-1===a?(this.tokenRegex.lastIndex=t.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=a+1,this.lex()}var l=s.match(lr);return l&&(s=l[1]),new i(s,new r(this,e,this.tokenRegex.lastIndex))},t}(),hr=function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=e,this.builtins=t,this.undefStack=[]}var e=t.prototype;return e.beginGroup=function(){this.undefStack.push({})},e.endGroup=function(){if(0===this.undefStack.length)throw new o("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var t=this.undefStack.pop();for(var e in t)t.hasOwnProperty(e)&&(void 0===t[e]?delete this.current[e]:this.current[e]=t[e])},e.has=function(t){return this.current.hasOwnProperty(t)||this.builtins.hasOwnProperty(t)},e.get=function(t){return this.current.hasOwnProperty(t)?this.current[t]:this.builtins[t]},e.set=function(t,e,n){if(void 0===n&&(n=!1),n){for(var r=0;r<this.undefStack.length;r++)delete this.undefStack[r][t];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][t]=e)}else{var i=this.undefStack[this.undefStack.length-1];i&&!i.hasOwnProperty(t)&&(i[t]=this.current[t])}this.current[t]=e},t}(),dr={},pr=dr;function fr(t,e){dr[t]=e}fr("\\@firstoftwo",(function(t){return{tokens:t.consumeArgs(2)[0],numArgs:0}})),fr("\\@secondoftwo",(function(t){return{tokens:t.consumeArgs(2)[1],numArgs:0}})),fr("\\@ifnextchar",(function(t){var e=t.consumeArgs(3),n=t.future();return 1===e[0].length&&e[0][0].text===n.text?{tokens:e[1],numArgs:0}:{tokens:e[2],numArgs:0}})),fr("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}"),fr("\\TextOrMath",(function(t){var e=t.consumeArgs(2);return"text"===t.mode?{tokens:e[0],numArgs:0}:{tokens:e[1],numArgs:0}}));var Ar={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};fr("\\char",(function(t){var e,n=t.popToken(),r="";if("'"===n.text)e=8,n=t.popToken();else if('"'===n.text)e=16,n=t.popToken();else if("`"===n.text)if("\\"===(n=t.popToken()).text[0])r=n.text.charCodeAt(1);else{if("EOF"===n.text)throw new o("\\char` missing argument");r=n.text.charCodeAt(0)}else e=10;if(e){if(null==(r=Ar[n.text])||r>=e)throw new o("Invalid base-"+e+" digit "+n.text);for(var i;null!=(i=Ar[t.future().text])&&i<e;)r*=e,r+=i,t.popToken()}return"\\@char{"+r+"}"}));var mr=function(t,e){var n=t.consumeArgs(1)[0];if(1!==n.length)throw new o("\\gdef's first argument must be a macro name");var r=n[0].text,i=0;for(n=t.consumeArgs(1)[0];1===n.length&&"#"===n[0].text;){if(1!==(n=t.consumeArgs(1)[0]).length)throw new o('Invalid argument number length "'+n.length+'"');if(!/^[1-9]$/.test(n[0].text))throw new o('Invalid argument number "'+n[0].text+'"');if(i++,parseInt(n[0].text)!==i)throw new o('Argument number "'+n[0].text+'" out of order');n=t.consumeArgs(1)[0]}return t.macros.set(r,{tokens:n,numArgs:i},e),""};fr("\\gdef",(function(t){return mr(t,!0)})),fr("\\def",(function(t){return mr(t,!1)})),fr("\\global",(function(t){var e=t.consumeArgs(1)[0];if(1!==e.length)throw new o("Invalid command after \\global");var n=e[0].text;if("\\def"===n)return mr(t,!0);throw new o("Invalid command '"+n+"' after \\global")}));var gr=function(t,e,n){var r=t.consumeArgs(1)[0];if(1!==r.length)throw new o("\\newcommand's first argument must be a macro name");var i=r[0].text,s=t.isDefined(i);if(s&&!e)throw new o("\\newcommand{"+i+"} attempting to redefine "+i+"; use \\renewcommand");if(!s&&!n)throw new o("\\renewcommand{"+i+"} when command "+i+" does not yet exist; use \\newcommand");var a=0;if(1===(r=t.consumeArgs(1)[0]).length&&"["===r[0].text){for(var l="",u=t.expandNextToken();"]"!==u.text&&"EOF"!==u.text;)l+=u.text,u=t.expandNextToken();if(!l.match(/^\s*[0-9]+\s*$/))throw new o("Invalid number of arguments: "+l);a=parseInt(l),r=t.consumeArgs(1)[0]}return t.macros.set(i,{tokens:r,numArgs:a}),""};fr("\\newcommand",(function(t){return gr(t,!1,!0)})),fr("\\renewcommand",(function(t){return gr(t,!0,!1)})),fr("\\providecommand",(function(t){return gr(t,!0,!0)})),fr("\\bgroup","{"),fr("\\egroup","}"),fr("\\lq","`"),fr("\\rq","'"),fr("\\aa","\\r a"),fr("\\AA","\\r A"),fr("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`\xa9}"),fr("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}"),fr("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`\xae}"),fr("\u212c","\\mathscr{B}"),fr("\u2130","\\mathscr{E}"),fr("\u2131","\\mathscr{F}"),fr("\u210b","\\mathscr{H}"),fr("\u2110","\\mathscr{I}"),fr("\u2112","\\mathscr{L}"),fr("\u2133","\\mathscr{M}"),fr("\u211b","\\mathscr{R}"),fr("\u212d","\\mathfrak{C}"),fr("\u210c","\\mathfrak{H}"),fr("\u2128","\\mathfrak{Z}"),fr("\\Bbbk","\\Bbb{k}"),fr("\xb7","\\cdotp"),fr("\\llap","\\mathllap{\\textrm{#1}}"),fr("\\rlap","\\mathrlap{\\textrm{#1}}"),fr("\\clap","\\mathclap{\\textrm{#1}}"),fr("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}'),fr("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`\u2260}}"),fr("\\ne","\\neq"),fr("\u2260","\\neq"),fr("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`\u2209}}"),fr("\u2209","\\notin"),fr("\u2258","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`\u2258}}"),fr("\u2259","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`\u2258}}"),fr("\u225a","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`\u225a}}"),fr("\u225b","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`\u225b}}"),fr("\u225d","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`\u225d}}"),fr("\u225e","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`\u225e}}"),fr("\u225f","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`\u225f}}"),fr("\u27c2","\\perp"),fr("\u203c","\\mathclose{!\\mkern-0.8mu!}"),fr("\u220c","\\notni"),fr("\u231c","\\ulcorner"),fr("\u231d","\\urcorner"),fr("\u231e","\\llcorner"),fr("\u231f","\\lrcorner"),fr("\xa9","\\copyright"),fr("\xae","\\textregistered"),fr("\ufe0f","\\textregistered"),fr("\\vdots","\\mathord{\\varvdots\\rule{0pt}{15pt}}"),fr("\u22ee","\\vdots"),fr("\\varGamma","\\mathit{\\Gamma}"),fr("\\varDelta","\\mathit{\\Delta}"),fr("\\varTheta","\\mathit{\\Theta}"),fr("\\varLambda","\\mathit{\\Lambda}"),fr("\\varXi","\\mathit{\\Xi}"),fr("\\varPi","\\mathit{\\Pi}"),fr("\\varSigma","\\mathit{\\Sigma}"),fr("\\varUpsilon","\\mathit{\\Upsilon}"),fr("\\varPhi","\\mathit{\\Phi}"),fr("\\varPsi","\\mathit{\\Psi}"),fr("\\varOmega","\\mathit{\\Omega}"),fr("\\substack","\\begin{subarray}{c}#1\\end{subarray}"),fr("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu"),fr("\\boxed","\\fbox{$\\displaystyle{#1}$}"),fr("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;"),fr("\\implies","\\DOTSB\\;\\Longrightarrow\\;"),fr("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");var yr={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};fr("\\dots",(function(t){var e="\\dotso",n=t.expandAfterFuture().text;return n in yr?e=yr[n]:("\\not"===n.substr(0,4)||n in Z.math&&h(["bin","rel"],Z.math[n].group))&&(e="\\dotsb"),e}));var wr={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};fr("\\dotso",(function(t){return t.future().text in wr?"\\ldots\\,":"\\ldots"})),fr("\\dotsc",(function(t){var e=t.future().text;return e in wr&&","!==e?"\\ldots\\,":"\\ldots"})),fr("\\cdots",(function(t){return t.future().text in wr?"\\@cdots\\,":"\\@cdots"})),fr("\\dotsb","\\cdots"),fr("\\dotsm","\\cdots"),fr("\\dotsi","\\!\\cdots"),fr("\\dotsx","\\ldots\\,"),fr("\\DOTSI","\\relax"),fr("\\DOTSB","\\relax"),fr("\\DOTSX","\\relax"),fr("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax"),fr("\\,","\\tmspace+{3mu}{.1667em}"),fr("\\thinspace","\\,"),fr("\\>","\\mskip{4mu}"),fr("\\:","\\tmspace+{4mu}{.2222em}"),fr("\\medspace","\\:"),fr("\\;","\\tmspace+{5mu}{.2777em}"),fr("\\thickspace","\\;"),fr("\\!","\\tmspace-{3mu}{.1667em}"),fr("\\negthinspace","\\!"),fr("\\negmedspace","\\tmspace-{4mu}{.2222em}"),fr("\\negthickspace","\\tmspace-{5mu}{.277em}"),fr("\\enspace","\\kern.5em "),fr("\\enskip","\\hskip.5em\\relax"),fr("\\quad","\\hskip1em\\relax"),fr("\\qquad","\\hskip2em\\relax"),fr("\\tag","\\@ifstar\\tag@literal\\tag@paren"),fr("\\tag@paren","\\tag@literal{({#1})}"),fr("\\tag@literal",(function(t){if(t.macros.get("\\df@tag"))throw new o("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"})),fr("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}"),fr("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)"),fr("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}"),fr("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1"),fr("\\pmb","\\html@mathml{\\@binrel{#1}{\\mathrlap{#1}\\kern0.5px#1}}{\\mathbf{#1}}"),fr("\\\\","\\newline"),fr("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var br=q["Main-Regular"]["T".charCodeAt(0)][1]-.7*q["Main-Regular"]["A".charCodeAt(0)][1]+"em";fr("\\LaTeX","\\textrm{\\html@mathml{L\\kern-.36em\\raisebox{"+br+"}{\\scriptstyle A}\\kern-.15em\\TeX}{LaTeX}}"),fr("\\KaTeX","\\textrm{\\html@mathml{K\\kern-.17em\\raisebox{"+br+"}{\\scriptstyle A}\\kern-.15em\\TeX}{KaTeX}}"),fr("\\hspace","\\@ifstar\\@hspacer\\@hspace"),fr("\\@hspace","\\hskip #1\\relax"),fr("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax"),fr("\\ordinarycolon",":"),fr("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}"),fr("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}'),fr("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}'),fr("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}'),fr("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}'),fr("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}'),fr("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}'),fr("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}'),fr("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}'),fr("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}'),fr("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}'),fr("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}'),fr("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}'),fr("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}'),fr("\u2237","\\dblcolon"),fr("\u2239","\\eqcolon"),fr("\u2254","\\coloneqq"),fr("\u2255","\\eqqcolon"),fr("\u2a74","\\Coloneqq"),fr("\\ratio","\\vcentcolon"),fr("\\coloncolon","\\dblcolon"),fr("\\colonequals","\\coloneqq"),fr("\\coloncolonequals","\\Coloneqq"),fr("\\equalscolon","\\eqqcolon"),fr("\\equalscoloncolon","\\Eqqcolon"),fr("\\colonminus","\\coloneq"),fr("\\coloncolonminus","\\Coloneq"),fr("\\minuscolon","\\eqcolon"),fr("\\minuscoloncolon","\\Eqcolon"),fr("\\coloncolonapprox","\\Colonapprox"),fr("\\coloncolonsim","\\Colonsim"),fr("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}"),fr("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}"),fr("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}"),fr("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}"),fr("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`\u220c}}"),fr("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}"),fr("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}"),fr("\\gvertneqq","\\html@mathml{\\@gvertneqq}{\u2269}"),fr("\\lvertneqq","\\html@mathml{\\@lvertneqq}{\u2268}"),fr("\\ngeqq","\\html@mathml{\\@ngeqq}{\u2271}"),fr("\\ngeqslant","\\html@mathml{\\@ngeqslant}{\u2271}"),fr("\\nleqq","\\html@mathml{\\@nleqq}{\u2270}"),fr("\\nleqslant","\\html@mathml{\\@nleqslant}{\u2270}"),fr("\\nshortmid","\\html@mathml{\\@nshortmid}{\u2224}"),fr("\\nshortparallel","\\html@mathml{\\@nshortparallel}{\u2226}"),fr("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{\u2288}"),fr("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{\u2289}"),fr("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{\u228a}"),fr("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{\u2acb}"),fr("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{\u228b}"),fr("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{\u2acc}"),fr("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`\u27e6}}"),fr("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`\u27e7}}"),fr("\u27e6","\\llbracket"),fr("\u27e7","\\rrbracket"),fr("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`\u2983}}"),fr("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`\u2984}}"),fr("\u2983","\\lBrace"),fr("\u2984","\\rBrace"),fr("\\darr","\\downarrow"),fr("\\dArr","\\Downarrow"),fr("\\Darr","\\Downarrow"),fr("\\lang","\\langle"),fr("\\rang","\\rangle"),fr("\\uarr","\\uparrow"),fr("\\uArr","\\Uparrow"),fr("\\Uarr","\\Uparrow"),fr("\\N","\\mathbb{N}"),fr("\\R","\\mathbb{R}"),fr("\\Z","\\mathbb{Z}"),fr("\\alef","\\aleph"),fr("\\alefsym","\\aleph"),fr("\\Alpha","\\mathrm{A}"),fr("\\Beta","\\mathrm{B}"),fr("\\bull","\\bullet"),fr("\\Chi","\\mathrm{X}"),fr("\\clubs","\\clubsuit"),fr("\\cnums","\\mathbb{C}"),fr("\\Complex","\\mathbb{C}"),fr("\\Dagger","\\ddagger"),fr("\\diamonds","\\diamondsuit"),fr("\\empty","\\emptyset"),fr("\\Epsilon","\\mathrm{E}"),fr("\\Eta","\\mathrm{H}"),fr("\\exist","\\exists"),fr("\\harr","\\leftrightarrow"),fr("\\hArr","\\Leftrightarrow"),fr("\\Harr","\\Leftrightarrow"),fr("\\hearts","\\heartsuit"),fr("\\image","\\Im"),fr("\\infin","\\infty"),fr("\\Iota","\\mathrm{I}"),fr("\\isin","\\in"),fr("\\Kappa","\\mathrm{K}"),fr("\\larr","\\leftarrow"),fr("\\lArr","\\Leftarrow"),fr("\\Larr","\\Leftarrow"),fr("\\lrarr","\\leftrightarrow"),fr("\\lrArr","\\Leftrightarrow"),fr("\\Lrarr","\\Leftrightarrow"),fr("\\Mu","\\mathrm{M}"),fr("\\natnums","\\mathbb{N}"),fr("\\Nu","\\mathrm{N}"),fr("\\Omicron","\\mathrm{O}"),fr("\\plusmn","\\pm"),fr("\\rarr","\\rightarrow"),fr("\\rArr","\\Rightarrow"),fr("\\Rarr","\\Rightarrow"),fr("\\real","\\Re"),fr("\\reals","\\mathbb{R}"),fr("\\Reals","\\mathbb{R}"),fr("\\Rho","\\mathrm{P}"),fr("\\sdot","\\cdot"),fr("\\sect","\\S"),fr("\\spades","\\spadesuit"),fr("\\sub","\\subset"),fr("\\sube","\\subseteq"),fr("\\supe","\\supseteq"),fr("\\Tau","\\mathrm{T}"),fr("\\thetasym","\\vartheta"),fr("\\weierp","\\wp"),fr("\\Zeta","\\mathrm{Z}"),fr("\\argmin","\\DOTSB\\operatorname*{arg\\,min}"),fr("\\argmax","\\DOTSB\\operatorname*{arg\\,max}"),fr("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits"),fr("\\blue","\\textcolor{##6495ed}{#1}"),fr("\\orange","\\textcolor{##ffa500}{#1}"),fr("\\pink","\\textcolor{##ff00af}{#1}"),fr("\\red","\\textcolor{##df0030}{#1}"),fr("\\green","\\textcolor{##28ae7b}{#1}"),fr("\\gray","\\textcolor{gray}{#1}"),fr("\\purple","\\textcolor{##9d38bd}{#1}"),fr("\\blueA","\\textcolor{##ccfaff}{#1}"),fr("\\blueB","\\textcolor{##80f6ff}{#1}"),fr("\\blueC","\\textcolor{##63d9ea}{#1}"),fr("\\blueD","\\textcolor{##11accd}{#1}"),fr("\\blueE","\\textcolor{##0c7f99}{#1}"),fr("\\tealA","\\textcolor{##94fff5}{#1}"),fr("\\tealB","\\textcolor{##26edd5}{#1}"),fr("\\tealC","\\textcolor{##01d1c1}{#1}"),fr("\\tealD","\\textcolor{##01a995}{#1}"),fr("\\tealE","\\textcolor{##208170}{#1}"),fr("\\greenA","\\textcolor{##b6ffb0}{#1}"),fr("\\greenB","\\textcolor{##8af281}{#1}"),fr("\\greenC","\\textcolor{##74cf70}{#1}"),fr("\\greenD","\\textcolor{##1fab54}{#1}"),fr("\\greenE","\\textcolor{##0d923f}{#1}"),fr("\\goldA","\\textcolor{##ffd0a9}{#1}"),fr("\\goldB","\\textcolor{##ffbb71}{#1}"),fr("\\goldC","\\textcolor{##ff9c39}{#1}"),fr("\\goldD","\\textcolor{##e07d10}{#1}"),fr("\\goldE","\\textcolor{##a75a05}{#1}"),fr("\\redA","\\textcolor{##fca9a9}{#1}"),fr("\\redB","\\textcolor{##ff8482}{#1}"),fr("\\redC","\\textcolor{##f9685d}{#1}"),fr("\\redD","\\textcolor{##e84d39}{#1}"),fr("\\redE","\\textcolor{##bc2612}{#1}"),fr("\\maroonA","\\textcolor{##ffbde0}{#1}"),fr("\\maroonB","\\textcolor{##ff92c6}{#1}"),fr("\\maroonC","\\textcolor{##ed5fa6}{#1}"),fr("\\maroonD","\\textcolor{##ca337c}{#1}"),fr("\\maroonE","\\textcolor{##9e034e}{#1}"),fr("\\purpleA","\\textcolor{##ddd7ff}{#1}"),fr("\\purpleB","\\textcolor{##c6b9fc}{#1}"),fr("\\purpleC","\\textcolor{##aa87ff}{#1}"),fr("\\purpleD","\\textcolor{##7854ab}{#1}"),fr("\\purpleE","\\textcolor{##543b78}{#1}"),fr("\\mintA","\\textcolor{##f5f9e8}{#1}"),fr("\\mintB","\\textcolor{##edf2df}{#1}"),fr("\\mintC","\\textcolor{##e0e5cc}{#1}"),fr("\\grayA","\\textcolor{##f6f7f7}{#1}"),fr("\\grayB","\\textcolor{##f0f1f2}{#1}"),fr("\\grayC","\\textcolor{##e3e5e6}{#1}"),fr("\\grayD","\\textcolor{##d6d8da}{#1}"),fr("\\grayE","\\textcolor{##babec2}{#1}"),fr("\\grayF","\\textcolor{##888d93}{#1}"),fr("\\grayG","\\textcolor{##626569}{#1}"),fr("\\grayH","\\textcolor{##3b3e40}{#1}"),fr("\\grayI","\\textcolor{##21242c}{#1}"),fr("\\kaBlue","\\textcolor{##314453}{#1}"),fr("\\kaGreen","\\textcolor{##71B307}{#1}");var vr={"\\relax":!0,"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0},xr=function(){function t(t,e,n){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=e,this.expansionCount=0,this.feed(t),this.macros=new hr(pr,e.macros),this.mode=n,this.stack=[]}var e=t.prototype;return e.feed=function(t){this.lexer=new cr(t,this.settings)},e.switchMode=function(t){this.mode=t},e.beginGroup=function(){this.macros.beginGroup()},e.endGroup=function(){this.macros.endGroup()},e.future=function(){return 0===this.stack.length&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]},e.popToken=function(){return this.future(),this.stack.pop()},e.pushToken=function(t){this.stack.push(t)},e.pushTokens=function(t){var e;(e=this.stack).push.apply(e,t)},e.consumeSpaces=function(){for(;" "===this.future().text;)this.stack.pop()},e.consumeArgs=function(t){for(var e=[],n=0;n<t;++n){this.consumeSpaces();var r=this.popToken();if("{"===r.text){for(var i=[],s=1;0!==s;){var a=this.popToken();if(i.push(a),"{"===a.text)++s;else if("}"===a.text)--s;else if("EOF"===a.text)throw new o("End of input in macro argument",r)}i.pop(),i.reverse(),e[n]=i}else{if("EOF"===r.text)throw new o("End of input expecting macro argument");e[n]=[r]}}return e},e.expandOnce=function(){var t=this.popToken(),e=this._getExpansion(t.text);if(null==e)return this.pushToken(t),t;if(this.expansionCount++,this.expansionCount>this.settings.maxExpand)throw new o("Too many expansions: infinite loop or need to increase maxExpand setting");var n=e.tokens;if(e.numArgs)for(var r=this.consumeArgs(e.numArgs),i=(n=n.slice()).length-1;i>=0;--i){var s=n[i];if("#"===s.text){if(0===i)throw new o("Incomplete placeholder at end of macro body",s);if("#"===(s=n[--i]).text)n.splice(i+1,1);else{if(!/^[1-9]$/.test(s.text))throw new o("Not a valid argument number",s);var a;(a=n).splice.apply(a,[i,2].concat(r[+s.text-1]))}}}return this.pushTokens(n),n},e.expandAfterFuture=function(){return this.expandOnce(),this.future()},e.expandNextToken=function(){for(;;){var t=this.expandOnce();if(t instanceof i){if("\\relax"!==t.text)return this.stack.pop();this.stack.pop()}}throw new Error},e.expandMacro=function(t){if(this.macros.get(t)){var e=[],n=this.stack.length;for(this.pushToken(new i(t));this.stack.length>n;)this.expandOnce()instanceof i&&e.push(this.stack.pop());return e}},e.expandMacroAsText=function(t){var e=this.expandMacro(t);return e?e.map((function(t){return t.text})).join(""):e},e._getExpansion=function(t){var e=this.macros.get(t);if(null==e)return e;var n="function"==typeof e?e(this):e;if("string"==typeof n){var r=0;if(-1!==n.indexOf("#"))for(var i=n.replace(/##/g,"");-1!==i.indexOf("#"+(r+1));)++r;for(var s=new cr(n,this.settings),o=[],a=s.lex();"EOF"!==a.text;)o.push(a),a=s.lex();return o.reverse(),{tokens:o,numArgs:r}}return n},e.isDefined=function(t){return this.macros.has(t)||ar.hasOwnProperty(t)||Z.math.hasOwnProperty(t)||Z.text.hasOwnProperty(t)||vr.hasOwnProperty(t)},t}(),_r={"\u0301":{text:"\\'",math:"\\acute"},"\u0300":{text:"\\`",math:"\\grave"},"\u0308":{text:'\\"',math:"\\ddot"},"\u0303":{text:"\\~",math:"\\tilde"},"\u0304":{text:"\\=",math:"\\bar"},"\u0306":{text:"\\u",math:"\\breve"},"\u030c":{text:"\\v",math:"\\check"},"\u0302":{text:"\\^",math:"\\hat"},"\u0307":{text:"\\.",math:"\\dot"},"\u030a":{text:"\\r",math:"\\mathring"},"\u030b":{text:"\\H"}},Cr={"\xe1":"a\u0301","\xe0":"a\u0300","\xe4":"a\u0308","\u01df":"a\u0308\u0304","\xe3":"a\u0303","\u0101":"a\u0304","\u0103":"a\u0306","\u1eaf":"a\u0306\u0301","\u1eb1":"a\u0306\u0300","\u1eb5":"a\u0306\u0303","\u01ce":"a\u030c","\xe2":"a\u0302","\u1ea5":"a\u0302\u0301","\u1ea7":"a\u0302\u0300","\u1eab":"a\u0302\u0303","\u0227":"a\u0307","\u01e1":"a\u0307\u0304","\xe5":"a\u030a","\u01fb":"a\u030a\u0301","\u1e03":"b\u0307","\u0107":"c\u0301","\u010d":"c\u030c","\u0109":"c\u0302","\u010b":"c\u0307","\u010f":"d\u030c","\u1e0b":"d\u0307","\xe9":"e\u0301","\xe8":"e\u0300","\xeb":"e\u0308","\u1ebd":"e\u0303","\u0113":"e\u0304","\u1e17":"e\u0304\u0301","\u1e15":"e\u0304\u0300","\u0115":"e\u0306","\u011b":"e\u030c","\xea":"e\u0302","\u1ebf":"e\u0302\u0301","\u1ec1":"e\u0302\u0300","\u1ec5":"e\u0302\u0303","\u0117":"e\u0307","\u1e1f":"f\u0307","\u01f5":"g\u0301","\u1e21":"g\u0304","\u011f":"g\u0306","\u01e7":"g\u030c","\u011d":"g\u0302","\u0121":"g\u0307","\u1e27":"h\u0308","\u021f":"h\u030c","\u0125":"h\u0302","\u1e23":"h\u0307","\xed":"i\u0301","\xec":"i\u0300","\xef":"i\u0308","\u1e2f":"i\u0308\u0301","\u0129":"i\u0303","\u012b":"i\u0304","\u012d":"i\u0306","\u01d0":"i\u030c","\xee":"i\u0302","\u01f0":"j\u030c","\u0135":"j\u0302","\u1e31":"k\u0301","\u01e9":"k\u030c","\u013a":"l\u0301","\u013e":"l\u030c","\u1e3f":"m\u0301","\u1e41":"m\u0307","\u0144":"n\u0301","\u01f9":"n\u0300","\xf1":"n\u0303","\u0148":"n\u030c","\u1e45":"n\u0307","\xf3":"o\u0301","\xf2":"o\u0300","\xf6":"o\u0308","\u022b":"o\u0308\u0304","\xf5":"o\u0303","\u1e4d":"o\u0303\u0301","\u1e4f":"o\u0303\u0308","\u022d":"o\u0303\u0304","\u014d":"o\u0304","\u1e53":"o\u0304\u0301","\u1e51":"o\u0304\u0300","\u014f":"o\u0306","\u01d2":"o\u030c","\xf4":"o\u0302","\u1ed1":"o\u0302\u0301","\u1ed3":"o\u0302\u0300","\u1ed7":"o\u0302\u0303","\u022f":"o\u0307","\u0231":"o\u0307\u0304","\u0151":"o\u030b","\u1e55":"p\u0301","\u1e57":"p\u0307","\u0155":"r\u0301","\u0159":"r\u030c","\u1e59":"r\u0307","\u015b":"s\u0301","\u1e65":"s\u0301\u0307","\u0161":"s\u030c","\u1e67":"s\u030c\u0307","\u015d":"s\u0302","\u1e61":"s\u0307","\u1e97":"t\u0308","\u0165":"t\u030c","\u1e6b":"t\u0307","\xfa":"u\u0301","\xf9":"u\u0300","\xfc":"u\u0308","\u01d8":"u\u0308\u0301","\u01dc":"u\u0308\u0300","\u01d6":"u\u0308\u0304","\u01da":"u\u0308\u030c","\u0169":"u\u0303","\u1e79":"u\u0303\u0301","\u016b":"u\u0304","\u1e7b":"u\u0304\u0308","\u016d":"u\u0306","\u01d4":"u\u030c","\xfb":"u\u0302","\u016f":"u\u030a","\u0171":"u\u030b","\u1e7d":"v\u0303","\u1e83":"w\u0301","\u1e81":"w\u0300","\u1e85":"w\u0308","\u0175":"w\u0302","\u1e87":"w\u0307","\u1e98":"w\u030a","\u1e8d":"x\u0308","\u1e8b":"x\u0307","\xfd":"y\u0301","\u1ef3":"y\u0300","\xff":"y\u0308","\u1ef9":"y\u0303","\u0233":"y\u0304","\u0177":"y\u0302","\u1e8f":"y\u0307","\u1e99":"y\u030a","\u017a":"z\u0301","\u017e":"z\u030c","\u1e91":"z\u0302","\u017c":"z\u0307","\xc1":"A\u0301","\xc0":"A\u0300","\xc4":"A\u0308","\u01de":"A\u0308\u0304","\xc3":"A\u0303","\u0100":"A\u0304","\u0102":"A\u0306","\u1eae":"A\u0306\u0301","\u1eb0":"A\u0306\u0300","\u1eb4":"A\u0306\u0303","\u01cd":"A\u030c","\xc2":"A\u0302","\u1ea4":"A\u0302\u0301","\u1ea6":"A\u0302\u0300","\u1eaa":"A\u0302\u0303","\u0226":"A\u0307","\u01e0":"A\u0307\u0304","\xc5":"A\u030a","\u01fa":"A\u030a\u0301","\u1e02":"B\u0307","\u0106":"C\u0301","\u010c":"C\u030c","\u0108":"C\u0302","\u010a":"C\u0307","\u010e":"D\u030c","\u1e0a":"D\u0307","\xc9":"E\u0301","\xc8":"E\u0300","\xcb":"E\u0308","\u1ebc":"E\u0303","\u0112":"E\u0304","\u1e16":"E\u0304\u0301","\u1e14":"E\u0304\u0300","\u0114":"E\u0306","\u011a":"E\u030c","\xca":"E\u0302","\u1ebe":"E\u0302\u0301","\u1ec0":"E\u0302\u0300","\u1ec4":"E\u0302\u0303","\u0116":"E\u0307","\u1e1e":"F\u0307","\u01f4":"G\u0301","\u1e20":"G\u0304","\u011e":"G\u0306","\u01e6":"G\u030c","\u011c":"G\u0302","\u0120":"G\u0307","\u1e26":"H\u0308","\u021e":"H\u030c","\u0124":"H\u0302","\u1e22":"H\u0307","\xcd":"I\u0301","\xcc":"I\u0300","\xcf":"I\u0308","\u1e2e":"I\u0308\u0301","\u0128":"I\u0303","\u012a":"I\u0304","\u012c":"I\u0306","\u01cf":"I\u030c","\xce":"I\u0302","\u0130":"I\u0307","\u0134":"J\u0302","\u1e30":"K\u0301","\u01e8":"K\u030c","\u0139":"L\u0301","\u013d":"L\u030c","\u1e3e":"M\u0301","\u1e40":"M\u0307","\u0143":"N\u0301","\u01f8":"N\u0300","\xd1":"N\u0303","\u0147":"N\u030c","\u1e44":"N\u0307","\xd3":"O\u0301","\xd2":"O\u0300","\xd6":"O\u0308","\u022a":"O\u0308\u0304","\xd5":"O\u0303","\u1e4c":"O\u0303\u0301","\u1e4e":"O\u0303\u0308","\u022c":"O\u0303\u0304","\u014c":"O\u0304","\u1e52":"O\u0304\u0301","\u1e50":"O\u0304\u0300","\u014e":"O\u0306","\u01d1":"O\u030c","\xd4":"O\u0302","\u1ed0":"O\u0302\u0301","\u1ed2":"O\u0302\u0300","\u1ed6":"O\u0302\u0303","\u022e":"O\u0307","\u0230":"O\u0307\u0304","\u0150":"O\u030b","\u1e54":"P\u0301","\u1e56":"P\u0307","\u0154":"R\u0301","\u0158":"R\u030c","\u1e58":"R\u0307","\u015a":"S\u0301","\u1e64":"S\u0301\u0307","\u0160":"S\u030c","\u1e66":"S\u030c\u0307","\u015c":"S\u0302","\u1e60":"S\u0307","\u0164":"T\u030c","\u1e6a":"T\u0307","\xda":"U\u0301","\xd9":"U\u0300","\xdc":"U\u0308","\u01d7":"U\u0308\u0301","\u01db":"U\u0308\u0300","\u01d5":"U\u0308\u0304","\u01d9":"U\u0308\u030c","\u0168":"U\u0303","\u1e78":"U\u0303\u0301","\u016a":"U\u0304","\u1e7a":"U\u0304\u0308","\u016c":"U\u0306","\u01d3":"U\u030c","\xdb":"U\u0302","\u016e":"U\u030a","\u0170":"U\u030b","\u1e7c":"V\u0303","\u1e82":"W\u0301","\u1e80":"W\u0300","\u1e84":"W\u0308","\u0174":"W\u0302","\u1e86":"W\u0307","\u1e8c":"X\u0308","\u1e8a":"X\u0307","\xdd":"Y\u0301","\u1ef2":"Y\u0300","\u0178":"Y\u0308","\u1ef8":"Y\u0303","\u0232":"Y\u0304","\u0176":"Y\u0302","\u1e8e":"Y\u0307","\u0179":"Z\u0301","\u017d":"Z\u030c","\u1e90":"Z\u0302","\u017b":"Z\u0307","\u03ac":"\u03b1\u0301","\u1f70":"\u03b1\u0300","\u1fb1":"\u03b1\u0304","\u1fb0":"\u03b1\u0306","\u03ad":"\u03b5\u0301","\u1f72":"\u03b5\u0300","\u03ae":"\u03b7\u0301","\u1f74":"\u03b7\u0300","\u03af":"\u03b9\u0301","\u1f76":"\u03b9\u0300","\u03ca":"\u03b9\u0308","\u0390":"\u03b9\u0308\u0301","\u1fd2":"\u03b9\u0308\u0300","\u1fd1":"\u03b9\u0304","\u1fd0":"\u03b9\u0306","\u03cc":"\u03bf\u0301","\u1f78":"\u03bf\u0300","\u03cd":"\u03c5\u0301","\u1f7a":"\u03c5\u0300","\u03cb":"\u03c5\u0308","\u03b0":"\u03c5\u0308\u0301","\u1fe2":"\u03c5\u0308\u0300","\u1fe1":"\u03c5\u0304","\u1fe0":"\u03c5\u0306","\u03ce":"\u03c9\u0301","\u1f7c":"\u03c9\u0300","\u038e":"\u03a5\u0301","\u1fea":"\u03a5\u0300","\u03ab":"\u03a5\u0308","\u1fe9":"\u03a5\u0304","\u1fe8":"\u03a5\u0306","\u038f":"\u03a9\u0301","\u1ffa":"\u03a9\u0300"},Sr=function(){function t(t,e){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new xr(t,e,this.mode),this.settings=e,this.leftrightDepth=0}var e=t.prototype;return e.expect=function(t,e){if(void 0===e&&(e=!0),this.fetch().text!==t)throw new o("Expected '"+t+"', got '"+this.fetch().text+"'",this.fetch());e&&this.consume()},e.consume=function(){this.nextToken=null},e.fetch=function(){return null==this.nextToken&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken},e.switchMode=function(t){this.mode=t,this.gullet.switchMode(t)},e.parse=function(){this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");var t=this.parseExpression(!1);return this.expect("EOF"),this.gullet.endGroup(),t},e.parseExpression=function(e,n){for(var r=[];;){"math"===this.mode&&this.consumeSpaces();var i=this.fetch();if(-1!==t.endOfExpression.indexOf(i.text))break;if(n&&i.text===n)break;if(e&&ar[i.text]&&ar[i.text].infix)break;var s=this.parseAtom(n);if(!s)break;r.push(s)}return"text"===this.mode&&this.formLigatures(r),this.handleInfixNodes(r)},e.handleInfixNodes=function(t){for(var e,n=-1,r=0;r<t.length;r++){var i=jt(t[r],"infix");if(i){if(-1!==n)throw new o("only one infix operator per group",i.token);n=r,e=i.replaceWith}}if(-1!==n&&e){var s,a,l=t.slice(0,n),u=t.slice(n+1);return s=1===l.length&&"ordgroup"===l[0].type?l[0]:{type:"ordgroup",mode:this.mode,body:l},a=1===u.length&&"ordgroup"===u[0].type?u[0]:{type:"ordgroup",mode:this.mode,body:u},[this.callFunction(e,"\\\\abovefrac"===e?[s,t[n],a]:[s,a],[])]}return t},e.handleSupSubscript=function(e){var n=this.fetch(),r=n.text;this.consume();var i=this.parseGroup(e,!1,t.SUPSUB_GREEDINESS,void 0,void 0,!0);if(!i)throw new o("Expected group after '"+r+"'",n);return i},e.formatUnsupportedCmd=function(t){for(var e=[],n=0;n<t.length;n++)e.push({type:"textord",mode:"text",text:t[n]});return{type:"color",mode:this.mode,color:this.settings.errorColor,body:[{type:"text",mode:this.mode,body:e}]}},e.parseAtom=function(t){var e,n,r=this.parseGroup("atom",!1,null,t);if("text"===this.mode)return r;for(;;){this.consumeSpaces();var i=this.fetch();if("\\limits"===i.text||"\\nolimits"===i.text){var s=jt(r,"op");if(s)s.limits="\\limits"===i.text,s.alwaysHandleSupSub=!0;else{if(!(s=jt(r,"operatorname"))||!s.alwaysHandleSupSub)throw new o("Limit controls must follow a math operator",i);s.limits="\\limits"===i.text}this.consume()}else if("^"===i.text){if(e)throw new o("Double superscript",i);e=this.handleSupSubscript("superscript")}else if("_"===i.text){if(n)throw new o("Double subscript",i);n=this.handleSupSubscript("subscript")}else{if("'"!==i.text)break;if(e)throw new o("Double superscript",i);var a={type:"textord",mode:this.mode,text:"\\prime"},l=[a];for(this.consume();"'"===this.fetch().text;)l.push(a),this.consume();"^"===this.fetch().text&&l.push(this.handleSupSubscript("superscript")),e={type:"ordgroup",mode:this.mode,body:l}}}return e||n?{type:"supsub",mode:this.mode,base:r,sup:e,sub:n}:r},e.parseFunction=function(t,e,n){var r=this.fetch(),i=r.text,s=ar[i];if(!s)return null;if(this.consume(),null!=n&&s.greediness<=n)throw new o("Got function '"+i+"' with no arguments"+(e?" as "+e:""),r);if("text"===this.mode&&!s.allowedInText)throw new o("Can't use function '"+i+"' in text mode",r);if("math"===this.mode&&!1===s.allowedInMath)throw new o("Can't use function '"+i+"' in math mode",r);var a=this.parseArguments(i,s);return this.callFunction(i,a.args,a.optArgs,r,t)},e.callFunction=function(t,e,n,r,i){var s=ar[t];if(s&&s.handler)return s.handler({funcName:t,parser:this,token:r,breakOnTokenText:i},e,n);throw new o("No function handler for "+t)},e.parseArguments=function(t,e){var n=e.numArgs+e.numOptionalArgs;if(0===n)return{args:[],optArgs:[]};for(var r=e.greediness,i=[],s=[],a=0;a<n;a++){var l=a<e.numOptionalArgs,u=this.parseGroupOfType("argument to '"+t+"'",e.argTypes&&e.argTypes[a],l,r,a>0&&!l||0===a&&!l&&"math"===this.mode);if(!u){if(l){s.push(null);continue}throw new o("Expected group after '"+t+"'",this.fetch())}(l?s:i).push(u)}return{args:i,optArgs:s}},e.parseGroupOfType=function(t,e,n,r,i){switch(e){case"color":return i&&this.consumeSpaces(),this.parseColorGroup(n);case"size":return i&&this.consumeSpaces(),this.parseSizeGroup(n);case"url":return this.parseUrlGroup(n,i);case"math":case"text":return this.parseGroup(t,n,r,void 0,e,i);case"hbox":var s=this.parseGroup(t,n,r,void 0,"text",i);return s?{type:"styling",mode:s.mode,body:[s],style:"text"}:s;case"raw":if(i&&this.consumeSpaces(),n&&"{"===this.fetch().text)return null;var a=this.parseStringGroup("raw",n,!0);if(a)return{type:"raw",mode:"text",string:a.text};throw new o("Expected raw group",this.fetch());case"original":case null:case void 0:return this.parseGroup(t,n,r,void 0,void 0,i);default:throw new o("Unknown group type as "+t,this.fetch())}},e.consumeSpaces=function(){for(;" "===this.fetch().text;)this.consume()},e.parseStringGroup=function(t,e,n){var r=e?"[":"{",i=e?"]":"}",s=this.fetch();if(s.text!==r){if(e)return null;if(n&&"EOF"!==s.text&&/[^{}[\]]/.test(s.text))return this.consume(),s}var a=this.mode;this.mode="text",this.expect(r);for(var l,u="",c=this.fetch(),h=0,d=c;(l=this.fetch()).text!==i||n&&h>0;){switch(l.text){case"EOF":throw new o("Unexpected end of input in "+t,c.range(d,u));case r:h++;break;case i:h--}u+=(d=l).text,this.consume()}return this.expect(i),this.mode=a,c.range(d,u)},e.parseRegexGroup=function(t,e){var n=this.mode;this.mode="text";for(var r,i=this.fetch(),s=i,a="";"EOF"!==(r=this.fetch()).text&&t.test(a+r.text);)a+=(s=r).text,this.consume();if(""===a)throw new o("Invalid "+e+": '"+i.text+"'",i);return this.mode=n,i.range(s,a)},e.parseColorGroup=function(t){var e=this.parseStringGroup("color",t);if(!e)return null;var n=/^(#[a-f0-9]{3}|#?[a-f0-9]{6}|[a-z]+)$/i.exec(e.text);if(!n)throw new o("Invalid color: '"+e.text+"'",e);var r=n[0];return/^[0-9a-f]{6}$/i.test(r)&&(r="#"+r),{type:"color-token",mode:this.mode,color:r}},e.parseSizeGroup=function(t){var e,n=!1;if(!(e=t||"{"===this.fetch().text?this.parseStringGroup("size",t):this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size")))return null;t||0!==e.text.length||(e.text="0pt",n=!0);var r=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(e.text);if(!r)throw new o("Invalid size: '"+e.text+"'",e);var i={number:+(r[1]+r[2]),unit:r[3]};if(!Ft(i))throw new o("Invalid unit: '"+i.unit+"'",e);return{type:"size",mode:this.mode,value:i,isBlank:n}},e.parseUrlGroup=function(t,e){this.gullet.lexer.setCatcode("%",13);var n=this.parseStringGroup("url",t,!0);if(this.gullet.lexer.setCatcode("%",14),!n)return null;var r=n.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:r}},e.parseGroup=function(e,n,i,s,a,l){var u=this.mode;a&&this.switchMode(a),l&&this.consumeSpaces();var c,h=this.fetch(),d=h.text;if(n?"["===d:"{"===d||"\\begingroup"===d){this.consume();var p=t.endOfGroup[d];this.gullet.beginGroup();var f=this.parseExpression(!1,p),A=this.fetch();this.expect(p),this.gullet.endGroup(),c={type:"ordgroup",mode:this.mode,loc:r.range(h,A),body:f,semisimple:"\\begingroup"===d||void 0}}else if(n)c=null;else if(null==(c=this.parseFunction(s,e,i)||this.parseSymbol())&&"\\"===d[0]&&!vr.hasOwnProperty(d)){if(this.settings.throwOnError)throw new o("Undefined control sequence: "+d,h);c=this.formatUnsupportedCmd(d),this.consume()}return a&&this.switchMode(u),c},e.formLigatures=function(t){for(var e=t.length-1,n=0;n<e;++n){var i=t[n],s=i.text;"-"===s&&"-"===t[n+1].text&&(n+1<e&&"-"===t[n+2].text?(t.splice(n,3,{type:"textord",mode:"text",loc:r.range(i,t[n+2]),text:"---"}),e-=2):(t.splice(n,2,{type:"textord",mode:"text",loc:r.range(i,t[n+1]),text:"--"}),e-=1)),"'"!==s&&"`"!==s||t[n+1].text!==s||(t.splice(n,2,{type:"textord",mode:"text",loc:r.range(i,t[n+1]),text:s+s}),e-=1)}},e.parseSymbol=function(){var t=this.fetch(),e=t.text;if(/^\\verb[^a-zA-Z]/.test(e)){this.consume();var n=e.slice(5),i="*"===n.charAt(0);if(i&&(n=n.slice(1)),n.length<2||n.charAt(0)!==n.slice(-1))throw new o("\\verb assertion failed --\n                    please report what input caused this bug");return{type:"verb",mode:"text",body:n=n.slice(1,-1),star:i}}Cr.hasOwnProperty(e[0])&&!Z[this.mode][e[0]]&&(this.settings.strict&&"math"===this.mode&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+e[0]+'" used in math mode',t),e=Cr[e[0]]+e.substr(1));var s,a=ur.exec(e);if(a&&("i"===(e=e.substring(0,a.index))?e="\u0131":"j"===e&&(e="\u0237")),Z[this.mode][e]){this.settings.strict&&"math"===this.mode&&"\xc7\xd0\xde\xe7\xfe".indexOf(e)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+e[0]+'" used in math mode',t);var l=Z[this.mode][e].group,u=r.range(t);s=X.hasOwnProperty(l)?{type:"atom",mode:this.mode,family:l,loc:u,text:e}:{type:l,mode:this.mode,loc:u,text:e}}else{if(!(e.charCodeAt(0)>=128))return null;this.settings.strict&&(N(e.charCodeAt(0))?"math"===this.mode&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+e[0]+'" used in math mode',t):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+e[0]+'" ('+e.charCodeAt(0)+")",t)),s={type:"textord",mode:"text",loc:r.range(t),text:e}}if(this.consume(),a)for(var c=0;c<a[0].length;c++){var h=a[0][c];if(!_r[h])throw new o("Unknown accent ' "+h+"'",t);var d=_r[h][this.mode];if(!d)throw new o("Accent "+h+" unsupported in "+this.mode+" mode",t);s={type:"accent",mode:this.mode,loc:r.range(t),label:d,isStretchy:!1,isShifty:!0,base:s}}return s},t}();Sr.endOfExpression=["}","\\endgroup","\\end","\\right","&"],Sr.endOfGroup={"[":"]","{":"}","\\begingroup":"\\endgroup"},Sr.SUPSUB_GREEDINESS=1;var Er=function(t,e){if(!("string"==typeof t||t instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var n=new Sr(t,e);delete n.gullet.macros.current["\\df@tag"];var r=n.parse();if(n.gullet.macros.get("\\df@tag")){if(!e.displayMode)throw new o("\\tag works only in display equations");n.gullet.feed("\\df@tag"),r=[{type:"tag",mode:"text",body:r,tag:n.parse()}]}return r},Br=function(t,e,n){e.textContent="";var r=Nr(t,n).toNode();e.appendChild(r)};"undefined"!=typeof document&&"CSS1Compat"!==document.compatMode&&("undefined"!=typeof console&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),Br=function(){throw new o("KaTeX doesn't work in quirks mode.")});var kr=function(t,e,n){if(n.throwOnError||!(t instanceof o))throw t;var r=Vt.makeSpan(["katex-error"],[new z(e)]);return r.setAttribute("title",t.toString()),r.setAttribute("style","color:"+n.errorColor),r},Nr=function(t,e){var n=new g(e);try{return function(t,e,n){var r,i=Fe(n);if("mathml"===n.output)return Ie(t,e,i,!0);if("html"===n.output){var s=we(t,i);r=Vt.makeSpan(["katex"],[s])}else{var o=Ie(t,e,i,!1),a=we(t,i);r=Vt.makeSpan(["katex"],[o,a])}return Te(r,n)}(Er(t,n),t,n)}catch(r){return kr(r,t,n)}};e.default={version:"0.11.1",render:Br,renderToString:function(t,e){return Nr(t,e).toMarkup()},ParseError:o,__parse:function(t,e){var n=new g(e);return Er(t,n)},__renderToDomTree:Nr,__renderToHTMLTree:function(t,e){var n=new g(e);try{return function(t,e,n){var r=we(t,Fe(n)),i=Vt.makeSpan(["katex"],[r]);return Te(i,n)}(Er(t,n),0,n)}catch(r){return kr(r,t,n)}},__setFontMetrics:function(t,e){q[t]=e},__defineSymbol:tt,__defineMacro:fr,__domTree:{Span:L,Anchor:M,SymbolNode:z,SvgNode:Q,PathNode:H,LineNode:$}}}]).default},t.exports=r()},PDX0:function(t,e){(function(e){t.exports=e}).call(this,{})},QtUI:function(t,e,n){"use strict";var r=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,s=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return o};function i(t,e){if(e){var n=t[t.length-1];n&&"text"===n.type?(n.value+=e,n.raw+=e):t.push({type:"text",math:!1,value:e,raw:e})}}function s(t,e,n){n&&t.push({type:e,math:!0,value:n.replace(/\\\$/g,"$"),raw:n})}Object.defineProperty(e,"__esModule",{value:!0}),e.SEGMENTS_REGEX=/(\\\$)|\$\$(.*?[^\\])\$\$|\$(.*?[^\\])\$/,e.extractMath=function(t){var n,o,a,l,u,c=[],h=r(t.split(e.SEGMENTS_REGEX)),d=h[0],p=h.slice(1);for(i(c,d);p.length>0;)a=(n=r(p))[0],l=n[1],u=n[2],p=n.slice(3),a?i(c,"$"):l?s(c,"display",l):u&&s(c,"inline",u),d=(o=r(p))[0],p=o.slice(1),i(c,d);return c}},YD9d:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,s){function o(t){try{l(r.next(t))}catch(e){s(e)}}function a(t){try{l(r.throw(t))}catch(e){s(e)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}l((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(a){s=[6,a],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}};Object.defineProperty(e,"__esModule",{value:!0});var a=n("zhpf"),l=n("zhpf"),u=n("uLFl"),c=n("bO7W"),h=n("YSVl");function d(t,e){for(var n,r=t.length,i=t.slice(),s=r-1;s>0;s-=1){var o;o=e?Math.floor(e()*(s+1)):Math.floor(Math.random()*(s+1)),i[s]=(n=[i[o],i[s]])[0],i[o]=n[1]}return i}var p=function(t){function e(e,n){var r=t.call(this,a.sequential(),n)||this;return r.totalSamples=0,r.examples=[],r.truncatedModel=e,r}return i(e,t),Object.defineProperty(e.prototype,"asSequentialModel",{get:function(){return this.model},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isTrained",{get:function(){return!!this.model&&this.model.layers&&this.model.layers.length>2},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPrepared",{get:function(){return!!this.trainDataset},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numClasses",{get:function(){return this._metadata.labels.length},enumerable:!0,configurable:!0}),e.prototype.addExample=function(t,e){return s(this,void 0,void 0,(function(){var n,r,i;return o(this,(function(s){var o;return n="object"==typeof(o=e).dataId&&"object"===o.shape?e:u.capture(e),r=this.truncatedModel.predict(n),i=r.dataSync(),n.dispose(),r.dispose(),this.examples[t].push(i),this.totalSamples++,[2]}))}))},e.prototype.predict=function(e,n){return void 0===n&&(n=!1),s(this,void 0,void 0,(function(){return o(this,(function(r){if(!this.model)throw new Error("Model has not been trained yet, called train() first");return[2,t.prototype.predict.call(this,e,n)]}))}))},e.prototype.predictTopK=function(e,n,r){return void 0===n&&(n=10),void 0===r&&(r=!1),s(this,void 0,void 0,(function(){return o(this,(function(i){if(!this.model)throw new Error("Model has not been trained yet, called train() first");return[2,t.prototype.predictTopK.call(this,e,n,r)]}))}))},e.prototype.prepare=function(){for(var t in this.examples)if(0===t.length)throw new Error("Add some examples before training");var e=this.convertToTfDataset();this.trainDataset=e.trainDataset,this.validationDataset=e.validationDataset},e.prototype.convertToTfDataset=function(){for(var t=0;t<this.examples.length;t++)this.examples[t]=d(this.examples[t],this.seed);var e=[],n=[],r=function(t){var r,s,o=(r=t,(s=new Array(i.numClasses).fill(0))[r]=1,s),a=i.examples[t].length,l=a-Math.ceil(.15*a),u=i.examples[t].slice(0,l).map((function(t){return{data:t,label:o}})),c=i.examples[t].slice(l).map((function(t){return{data:t,label:o}}));e=e.concat(u),n=n.concat(c)},i=this;for(t=0;t<this.examples.length;t++)r(t);e=d(e,this.seed),n=d(n,this.seed);var s=a.data.array(e.map((function(t){return t.data}))),o=a.data.array(n.map((function(t){return t.data}))),l=a.data.array(e.map((function(t){return t.label}))),u=a.data.array(n.map((function(t){return t.label})));return{trainDataset:a.data.zip({xs:s,ys:l}),validationDataset:a.data.zip({xs:o,ys:u})}},e.prototype.save=function(t,e){return s(this,void 0,void 0,(function(){return o(this,(function(n){return[2,this.model.save(t,e)]}))}))},e.prototype.train=function(t,e){return void 0===e&&(e={}),s(this,void 0,void 0,(function(){var n,r,i,s,u,c,h,d,p,f=this;return o(this,(function(o){switch(o.label){case 0:if(n=e.onTrainEnd||function(){},e.onTrainEnd=function(t){f.__stopTrainingResolve&&(f.__stopTrainingResolve(),f.__stopTrainingResolve=null),n(t)},this.isPrepared||this.prepare(),r=this.getLabels().length,l.util.assert(r===this.numClasses,(function(){return"Can not train, has "+r+" labels and "+f.numClasses+" classes"})),i=this.truncatedModel.outputs[0].shape.slice(1),s=a.util.sizeFromShape(i),u=a.initializers.varianceScaling(this.seed?{seed:3.14}:{}),this.trainingModel=a.sequential({layers:[a.layers.dense({inputShape:[s],units:t.denseUnits,activation:"relu",kernelInitializer:u,useBias:!0}),a.layers.dense({kernelInitializer:u,useBias:!1,activation:"softmax",units:this.numClasses})]}),c=a.train.adam(t.learningRate),this.trainingModel.compile({optimizer:c,loss:"categoricalCrossentropy",metrics:["accuracy"]}),!(t.batchSize>0))throw new Error("Batch size is 0 or NaN. Please choose a non-zero fraction");return h=this.trainDataset.batch(t.batchSize),d=this.validationDataset.batch(t.batchSize),[4,this.trainingModel.fitDataset(h,{epochs:t.epochs,validationData:d,callbacks:e})];case 1:return o.sent(),(p=a.sequential()).add(this.truncatedModel),p.add(this.trainingModel),this.model=p,c.dispose(),[2,this.model]}}))}))},e.prototype.prepareDataset=function(){for(var t=0;t<this.numClasses;t++)this.examples[t]=[]},e.prototype.setLabel=function(t,e){this._metadata.labels[t]=e},e.prototype.setLabels=function(t){this._metadata.labels=t,this.prepareDataset()},e.prototype.getLabel=function(t){return this._metadata.labels[t]},e.prototype.getLabels=function(){return this._metadata.labels},e.prototype.setName=function(t){this._metadata.modelName=t},e.prototype.getName=function(){return this._metadata.modelName},e.prototype.stopTraining=function(){var t=this;return new Promise((function(e,n){t.trainingModel.stopTraining=!0,t.__stopTrainingResolve=e}))},e.prototype.dispose=function(){this.trainingModel.dispose(),t.prototype.dispose.call(this)},e.prototype.calculateAccuracyPerClass=function(){return s(this,void 0,void 0,(function(){var t,e,n,r,i,l,u,c,h,d,p,f,A,m,g,y,w,b,v=this;return o(this,(function(x){switch(x.label){case 0:return t=this.validationDataset.mapAsync((function(t){return s(v,void 0,void 0,(function(){return o(this,(function(e){return[2,t.xs]}))}))})),e=this.validationDataset.mapAsync((function(t){return s(v,void 0,void 0,(function(){return o(this,(function(e){return[2,t.ys]}))}))})),n=Math.min(e.size,32),r=Math.ceil(e.size/n),i=t.batch(n),l=e.batch(n),[4,i.iterator()];case 1:return u=x.sent(),[4,l.iterator()];case 2:c=x.sent(),h=[],d=[],b=0,x.label=3;case 3:return b<r?[4,u.next()]:[3,7];case 4:return p=x.sent(),f=this.trainingModel.predict(p.value),A=f.argMax(1),h.push(A),[4,c.next()];case 5:m=x.sent(),g=m.value.argMax(1),d.push(g),p.value.dispose(),f.dispose(),m.value.dispose(),x.label=6;case 6:return b++,[3,3];case 7:if(y=a.concat(d),w=a.concat(h),1!==r)for(b=0;b<h.length;b++)h[b].dispose(),d[b].dispose();return[2,{reference:y,predictions:w}]}}))}))},e.prototype.setSeed=function(t){this.seed=h(t)},e}(c.CustomMobileNet);e.TeachableMobileNet=p,e.createTeachable=function(t,e){return s(this,void 0,void 0,(function(){var n;return o(this,(function(r){switch(r.label){case 0:return[4,c.loadTruncatedMobileNet(e)];case 1:return n=r.sent(),[2,new p(n,t)]}}))}))}},YSVl:function(t,e,n){var r=n("EhIR"),i=n("uDiL"),s=n("pJ6O"),o=n("yuCN"),a=n("euyF"),l=n("ie1u"),u=n("pJ3+");u.alea=r,u.xor128=i,u.xorwow=s,u.xorshift7=o,u.xor4096=a,u.tychei=l,t.exports=u},YuTi:function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},"ZYb/":function(t,e){var n=n||{};n.svdcmp=function(t,e,r,i,s){var o,a,l,u,c,h,d,p,f,A,m,g,y,w,b,v=0,x=0,_=0,C=[];for(a=0;a<r;++a){if(d=a+1,C[a]=_*x,x=g=_=0,a<e){for(h=a;h<e;++h)_+=Math.abs(t[h][a]);if(0!==_){for(h=a;h<e;++h)t[h][a]/=_,g+=t[h][a]*t[h][a];for(m=(A=t[a][a])*(x=-n.sign(Math.sqrt(g),A))-g,t[a][a]=A-x,u=d;u<r;++u){for(g=0,h=a;h<e;++h)g+=t[h][a]*t[h][u];for(A=g/m,h=a;h<e;++h)t[h][u]+=A*t[h][a]}for(h=a;h<e;++h)t[h][a]*=_}}if(i[a]=_*x,x=g=_=0,a<e&&a!==r-1){for(h=d;h<r;++h)_+=Math.abs(t[a][h]);if(0!==_){for(h=d;h<r;++h)t[a][h]/=_,g+=t[a][h]*t[a][h];for(m=(A=t[a][d])*(x=-n.sign(Math.sqrt(g),A))-g,t[a][d]=A-x,h=d;h<r;++h)C[h]=t[a][h]/m;for(u=d;u<e;++u){for(g=0,h=d;h<r;++h)g+=t[u][h]*t[a][h];for(h=d;h<r;++h)t[u][h]+=g*C[h]}for(h=d;h<r;++h)t[a][h]*=_}}v=Math.max(v,Math.abs(i[a])+Math.abs(C[a]))}for(a=r-1;a>=0;--a){if(a<r-1){if(0!==x){for(u=d;u<r;++u)s[u][a]=t[a][u]/t[a][d]/x;for(u=d;u<r;++u){for(g=0,h=d;h<r;++h)g+=t[a][h]*s[h][u];for(h=d;h<r;++h)s[h][u]+=g*s[h][a]}}for(u=d;u<r;++u)s[a][u]=s[u][a]=0}s[a][a]=1,x=C[a],d=a}for(a=Math.min(r,e)-1;a>=0;--a){for(x=i[a],u=d=a+1;u<r;++u)t[a][u]=0;if(0!==x){for(x=1/x,u=d;u<r;++u){for(g=0,h=d;h<e;++h)g+=t[h][a]*t[h][u];for(A=g/t[a][a]*x,h=a;h<e;++h)t[h][u]+=A*t[h][a]}for(u=a;u<e;++u)t[u][a]*=x}else for(u=a;u<e;++u)t[u][a]=0;++t[a][a]}for(h=r-1;h>=0;--h)for(l=1;l<=30;++l){for(o=!0,d=h;d>=0;--d){if(p=d-1,Math.abs(C[d])+v===v){o=!1;break}if(Math.abs(i[p])+v===v)break}if(o)for(f=0,g=1,a=d;a<=h&&(A=g*C[a],Math.abs(A)+v!==v);++a)for(m=n.pythag(A,x=i[a]),i[a]=m,f=x*(m=1/m),g=-A*m,u=1;u<=e;++u)t[u][p]=(w=t[u][p])*f+(b=t[u][a])*g,t[u][a]=b*f-w*g;if(b=i[h],d===h){if(b<0)for(i[h]=-b,u=0;u<r;++u)s[u][h]=-s[u][h];break}if(30===l)return!1;for(y=i[d],x=n.pythag(A=(((w=i[p=h-1])-b)*(w+b)+((x=C[p])-(m=C[h]))*(x+m))/(2*m*w),1),A=((y-b)*(y+b)+m*(w/(A+n.sign(x,A))-m))/y,f=g=1,u=d;u<=p;++u){for(w=i[a=u+1],m=g*(x=C[a]),x*=f,b=n.pythag(A,m),C[u]=b,A=y*(f=A/b)+x*(g=m/b),x=x*f-y*g,m=w*g,w*=f,c=0;c<r;++c)s[c][u]=(y=s[c][u])*f+(b=s[c][a])*g,s[c][a]=b*f-y*g;for(b=n.pythag(A,m),i[u]=b,0!==b&&(f=A*(b=1/b),g=m*b),A=f*x+g*w,y=f*w-g*x,c=0;c<e;++c)t[c][u]=(w=t[c][u])*f+(b=t[c][a])*g,t[c][a]=b*f-w*g}C[d]=0,C[h]=A,i[h]=y}return!0},n.pythag=function(t,e){var n,r=Math.abs(t),i=Math.abs(e);return r>i?(n=i/r,r*Math.sqrt(1+n*n)):0===i?0:(n=r/i,i*Math.sqrt(1+n*n))},n.sign=function(t,e){return e>=0?Math.abs(t):-Math.abs(t)},t.exports=n},bO7W:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,s){function o(t){try{l(r.next(t))}catch(e){s(e)}}function a(t){try{l(r.throw(t))}catch(e){s(e)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}l((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(a){s=[6,a],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}};Object.defineProperty(e,"__esModule",{value:!0});var s=n("zhpf"),o=n("zhpf"),a=n("uLFl"),l=n("/8/o"),u=n("e1GX");e.IMAGE_SIZE=224;var c=function(t){return t.packageVersion=t.packageVersion||u.version,t.packageName=t.packageName||"@teachablemachine/image",t.timeStamp=t.timeStamp||(new Date).toISOString(),t.userMetadata=t.userMetadata||{},t.modelName=t.modelName||"untitled",t.labels=t.labels||[],t},h=function(t,e){if(1===t){if(.25!==e&&.5!==e&&.75!==e&&1!==e)return console.warn("Invalid alpha. Options are: 0.25, 0.50, 0.75 or 1.00."),console.log("Loading model with alpha: ",.25.toFixed(2)),.25}else if(.35!==e&&.5!==e&&.75!==e&&1!==e)return console.warn("Invalid alpha. Options are: 0.35, 0.50, 0.75 or 1.00."),console.log("Loading model with alpha: ",.35.toFixed(2)),.35;return e},d=function(t){return r(void 0,void 0,void 0,(function(){var e;return i(this,(function(n){switch(n.label){case 0:return"string"!=typeof t?[3,3]:[4,fetch(t)];case 1:return[4,n.sent().json()];case 2:return e=n.sent(),[3,4];case 3:if(!(r=t)||!Array.isArray(r.labels))throw new Error("Invalid Metadata provided");e=t,n.label=4;case 4:return[2,c(e)]}var r}))}))};function p(t,e,n){return void 0===n&&(n=3),r(this,void 0,void 0,(function(){var r;return i(this,(function(i){switch(i.label){case 0:return[4,e.data()];case 1:return r=i.sent(),[2,s.tidy((function(){n=Math.min(n,r.length);for(var e=[],i=0;i<r.length;i++)e.push({value:r[i],index:i});e.sort((function(t,e){return e.value-t.value}));var s=new Float32Array(n),o=new Int32Array(n);for(i=0;i<n;i++)s[i]=e[i].value,o[i]=e[i].index;var a=[];for(i=0;i<o.length;i++)a.push({className:t[o[i]],probability:s[i]});return a}))]}}))}))}e.getTopKClasses=p;var f=function(){function t(t,e){this.model=t,this._metadata=c(e)}return Object.defineProperty(t,"EXPECTED_IMAGE_SIZE",{get:function(){return e.IMAGE_SIZE},enumerable:!0,configurable:!0}),t.prototype.getMetadata=function(){return this._metadata},t.prototype.getTotalClasses=function(){return this.model.output.shape[1]},t.prototype.getClassLabels=function(){return this._metadata.labels},t.prototype.predictTopK=function(t,n,u){return void 0===n&&(n=10),void 0===u&&(u=!1),r(this,void 0,void 0,(function(){var r,c,h,d=this;return i(this,(function(i){switch(i.label){case 0:return r=l.cropTo(t,e.IMAGE_SIZE,u),c=s.tidy((function(){var t=a.capture(r);return d.model.predict(t)})),[4,p(this._metadata.labels,c,n)];case 1:return h=i.sent(),o.dispose(c),[2,h]}}))}))},t.prototype.predict=function(t,n){return void 0===n&&(n=!1),r(this,void 0,void 0,(function(){var r,u,c,h,d,p=this;return i(this,(function(i){switch(i.label){case 0:return r=l.cropTo(t,e.IMAGE_SIZE,n),[4,(u=s.tidy((function(){var t=a.capture(r);return p.model.predict(t)}))).data()];case 1:for(c=i.sent(),h=[],d=0;d<c.length;d++)h.push({className:this._metadata.labels[d],probability:c[d]});return o.dispose(u),[2,h]}}))}))},t.prototype.dispose=function(){this.truncatedModel.dispose()},t}();e.CustomMobileNet=f,e.loadTruncatedMobileNet=function(t){return r(this,void 0,void 0,(function(){var n,r,o,a,l,u;return i(this,(function(i){switch(i.label){case 0:return n=function(t){if((t=t||{}).checkpointUrl&&t.trainingLayer)return(t.alpha||t.version)&&console.warn("Checkpoint URL passed to modelOptions, alpha options are ignored"),[t.checkpointUrl,t.trainingLayer];if(t.version=t.version||1,1===t.version){t.alpha=t.alpha||.25,t.alpha=h(t.version,t.alpha),console.log("Loading mobilenet "+t.version+" and alpha "+t.alpha);var n=t.alpha.toFixed(2);return"1.00"===n&&(n="1.0"),["https://storage.googleapis.com/tfjs-models/tfjs/mobilenet_v1_"+n+"_"+e.IMAGE_SIZE+"/model.json","conv_pw_13_relu"]}if(2===t.version)return t.alpha=t.alpha||.35,t.alpha=h(t.version,t.alpha),console.log("Loading mobilenet "+t.version+" and alpha "+t.alpha),["https://storage.googleapis.com/teachable-machine-models/mobilenet_v2_weights_tf_dim_ordering_tf_kernels_"+t.alpha.toFixed(2)+"_"+e.IMAGE_SIZE+"_no_top/model.json","out_relu"];throw new Error("MobileNet V"+t.version+" doesn't exist")}(t),r=n[1],[4,s.loadLayersModel(n[0])];case 1:return o=i.sent(),t&&1===t.version?(a=o.getLayer(r),l=s.model({inputs:o.inputs,outputs:a.output}),(u=s.sequential()).add(l),u.add(s.layers.flatten()),[2,u]):(a=o.getLayer(r),l=s.model({inputs:o.inputs,outputs:a.output}),(u=s.sequential()).add(l),u.add(s.layers.globalAveragePooling2d({})),[2,u])}}))}))},e.load=function(t,e){return r(this,void 0,void 0,(function(){var n,r;return i(this,(function(i){switch(i.label){case 0:return[4,s.loadLayersModel(t)];case 1:return n=i.sent(),e?[4,d(e)]:[3,3];case 2:return r=i.sent(),[3,4];case 3:r=null,i.label=4;case 4:return[2,new f(n,r)]}}))}))},e.loadFromFiles=function(t,e,n){return r(this,void 0,void 0,(function(){var r,o,a;return i(this,(function(i){switch(i.label){case 0:return[4,s.loadLayersModel(s.io.browserFiles([t,e]))];case 1:return r=i.sent(),[4,new Response(n).json()];case 2:return o=i.sent(),n?[4,d(o)]:[3,4];case 3:return a=i.sent(),[3,5];case 4:a=null,i.label=5;case 5:return[2,new f(r,a)]}}))}))}},e1GX:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.version="0.8.4"},euyF:function(t,e,n){(function(t){var r;!function(t,i,s){function o(t){var e=this;e.next=function(){var t,n,r=e.w,i=e.X,s=e.i;return e.w=r=r+1640531527|0,n=i[s+34&127],t=i[s=s+1&127],n^=n<<13,t^=t<<17,n=i[s]=(n^=n>>>15)^(t^=t>>>12),e.i=s,n+(r^r>>>16)|0},function(t,e){var n,r,i,s,o,a=[],l=128;for(e===(0|e)?(r=e,e=null):(e+="\0",r=0,l=Math.max(l,e.length)),i=0,s=-32;s<l;++s)e&&(r^=e.charCodeAt((s+32)%e.length)),0===s&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,s>=0&&(i=0==(n=a[127&s]^=r+(o=o+1640531527|0))?i+1:0);for(i>=128&&(a[127&(e&&e.length||0)]=-1),i=127,s=512;s>0;--s)r=a[i+34&127],n=a[i=i+1&127],r^=r<<13,n^=n<<17,a[i]=(r^=r>>>15)^(n^=n>>>12);t.w=o,t.X=a,t.i=i}(e,t)}function a(t,e){return e.i=t.i,e.w=t.w,e.X=t.X.slice(),e}function l(t,e){null==t&&(t=+new Date);var n=new o(t),r=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=n.next,i.quick=i,r&&(r.X&&a(r,n),i.state=function(){return a(n,{})}),i}i&&i.exports?i.exports=l:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return l}).call(e,n,e,i))||(i.exports=r):this.xor4096=l}(0,t,n("B9Yq"))}).call(this,n("YuTi")(t))},ie1u:function(t,e,n){(function(t){var r;!function(t,i,s){function o(t){var e=this,n="";e.next=function(){var t=e.b,n=e.c,r=e.d,i=e.a;return t=t<<25^t>>>7^n,n=n-r|0,r=r<<24^r>>>8^i,i=i-t|0,e.b=t=t<<20^t>>>12^n,e.c=n=n-r|0,e.d=r<<16^n>>>16^i,e.a=i-t|0},e.a=0,e.b=0,e.c=-1640531527,e.d=1367130551,t===Math.floor(t)?(e.a=t/4294967296|0,e.b=0|t):n+=t;for(var r=0;r<n.length+20;r++)e.b^=0|n.charCodeAt(r),e.next()}function a(t,e){return e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e}function l(t,e){var n=new o(t),r=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&a(r,n),i.state=function(){return a(n,{})}),i}i&&i.exports?i.exports=l:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return l}).call(e,n,e,i))||(i.exports=r):this.tychei=l}(0,t,n("B9Yq"))}).call(this,n("YuTi")(t))},jtGA:function(t,e,n){t.exports={CV:n("zium"),AR:n("wN+T"),SVD:n("ZYb/"),POS1:n("AKnV"),POS2:n("pKV/")}},"pJ3+":function(t,e,n){var r;!function(i,s){var o,a=this,l=s.pow(256,6),u=s.pow(2,52),c=2*u;function h(t,e,n){var r=[],h=f(function t(e,n){var r,i=[],s=typeof e;if(n&&"object"==s)for(r in e)try{i.push(t(e[r],n-1))}catch(o){}return i.length?i:"string"==s?e:e+"\0"}((e=1==e?{entropy:!0}:e||{}).entropy?[t,A(i)]:null==t?function(){try{var t;return o&&(t=o.randomBytes)?t=t(256):(t=new Uint8Array(256),(a.crypto||a.msCrypto).getRandomValues(t)),A(t)}catch(r){var e=a.navigator,n=e&&e.plugins;return[+new Date,a,n,a.screen,A(i)]}}():t,3),r),m=new d(r),g=function(){for(var t=m.g(6),e=l,n=0;t<u;)t=256*(t+n),e*=256,n=m.g(1);for(;t>=c;)t/=2,e/=2,n>>>=1;return(t+n)/e};return g.int32=function(){return 0|m.g(4)},g.quick=function(){return m.g(4)/4294967296},g.double=g,f(A(m.S),i),(e.pass||n||function(t,e,n,r){return r&&(r.S&&p(r,m),t.state=function(){return p(m,{})}),n?(s.random=t,e):t})(g,h,"global"in e?e.global:this==s,e.state)}function d(t){var e,n=t.length,r=this,i=0,s=r.i=r.j=0,o=r.S=[];for(n||(t=[n++]);i<256;)o[i]=i++;for(i=0;i<256;i++)o[i]=o[s=255&s+t[i%n]+(e=o[i])],o[s]=e;(r.g=function(t){for(var e,n=0,i=r.i,s=r.j,o=r.S;t--;)e=o[i=255&i+1],n=256*n+o[255&(o[i]=o[s=255&s+e])+(o[s]=e)];return r.i=i,r.j=s,n})(256)}function p(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function f(t,e){for(var n,r=t+"",i=0;i<r.length;)e[255&i]=255&(n^=19*e[255&i])+r.charCodeAt(i++);return A(e)}function A(t){return String.fromCharCode.apply(0,t)}if(s.seedrandom=h,f(s.random(),i),t.exports){t.exports=h;try{o=n(3)}catch(m){}}else void 0===(r=(function(){return h}).call(e,n,e,t))||(t.exports=r)}([],Math)},pJ6O:function(t,e,n){(function(t){var r;!function(t,i,s){function o(t){var e=this,n="";e.next=function(){var t=e.x^e.x>>>2;return e.x=e.y,e.y=e.z,e.z=e.w,e.w=e.v,(e.d=e.d+362437|0)+(e.v=e.v^e.v<<4^t^t<<1)|0},e.x=0,e.y=0,e.z=0,e.w=0,e.v=0,t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),r==n.length&&(e.d=e.x<<10^e.x>>>4),e.next()}function a(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e.v=t.v,e.d=t.d,e}function l(t,e){var n=new o(t),r=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&a(r,n),i.state=function(){return a(n,{})}),i}i&&i.exports?i.exports=l:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return l}).call(e,n,e,i))||(i.exports=r):this.xorwow=l}(0,t,n("B9Yq"))}).call(this,n("YuTi")(t))},"pKV/":function(t,e,n){var r=n("ZYb/"),i=i||{};i.Posit=function(t,e){this.model=this.buildModel(t),this.focalLength=e,this.init()},i.Posit.prototype.buildModel=function(t){var e=t/2;return[new s(-e,e,0),new s(e,e,0),new s(e,-e,0),new s(-e,-e,0)]},i.Posit.prototype.init=function(){var t,e=new s,n=new o;this.modelVectors=o.fromRows(s.sub(this.model[1],this.model[0]),s.sub(this.model[2],this.model[0]),s.sub(this.model[3],this.model[0])),t=o.clone(this.modelVectors),r.svdcmp(t.m,3,3,e.v,n.m),this.modelPseudoInverse=o.mult(o.mult(n,o.fromDiagonal(s.inverse(e))),o.transpose(t)),this.modelNormal=n.column(e.minIndex())},i.Posit.prototype.pose=function(t){var e,n,r=new s(1,1,1),a=new o,l=new o,u=new s,c=new s;return this.pos(t,r,a,l,u,c),(e=this.iterate(t,a,u))<(n=this.iterate(t,l,c))?new i.Pose(e,a.m,u.v,n,l.m,c.v):new i.Pose(n,l.m,c.v,e,a.m,u.v)},i.Posit.prototype.pos=function(t,e,n,r,i,a){var l,u,c,h,d,p,f,A,m,g=new s(t[1].x,t[2].x,t[3].x),y=new s(t[1].y,t[2].y,t[3].y),w=s.addScalar(s.mult(g,e),-t[0].x),b=s.addScalar(s.mult(y,e),-t[0].y),v=o.multVector(this.modelPseudoInverse,w),x=o.multVector(this.modelPseudoInverse,b),_=x.square()-v.square(),C=s.dot(v,x),S=0,E=0;0===_?(S=Math.sqrt(Math.abs(2*C)),E=-Math.PI/2*(C<0?-1:C>0?1:0)):(S=Math.sqrt(Math.sqrt(_*_+4*C*C)),E=Math.atan(-2*C/_),_<0&&(E+=Math.PI),E/=2),A=S*Math.cos(E),m=S*Math.sin(E),l=s.add(v,s.multScalar(this.modelNormal,A)),u=s.add(x,s.multScalar(this.modelNormal,m)),h=l.normalize(),d=u.normalize(),c=s.cross(l,u),n.copy(o.fromRows(l,u,c)),p=(h+d)/2,f=o.multVector(n,this.model[0]),i.v=[t[0].x/p-f.v[0],t[0].y/p-f.v[1],this.focalLength/p],l=s.sub(v,s.multScalar(this.modelNormal,A)),u=s.sub(x,s.multScalar(this.modelNormal,m)),h=l.normalize(),d=u.normalize(),c=s.cross(l,u),r.copy(o.fromRows(l,u,c)),p=(h+d)/2,f=o.multVector(r,this.model[0]),a.v=[t[0].x/p-f.v[0],t[0].y/p-f.v[1],this.focalLength/p]},i.Posit.prototype.iterate=function(t,e,n){for(var r,i,a,l,u=1/0,c=new o,h=new o,d=new s,p=new s,f=0;f<100&&(r=s.addScalar(s.multScalar(o.multVector(this.modelVectors,e.row(2)),1/n.v[2]),1),this.pos(t,r,c,h,d,p),(a=this.getError(t,c,d))<(l=this.getError(t,h,p))?(e.copy(c),n.copy(d),i=a):(e.copy(h),n.copy(p),i=l),!(i<=2||i>u));++f)u=i;return i},i.Posit.prototype.getError=function(t,e,n){var r,i,a,l,u,c,h,d,p,f=s.add(o.multVector(e,this.model[0]),n),A=s.add(o.multVector(e,this.model[1]),n),m=s.add(o.multVector(e,this.model[2]),n),g=s.add(o.multVector(e,this.model[3]),n);return A=A.v,m=m.v,g=g.v,(f=f.v)[0]*=this.focalLength/f[2],f[1]*=this.focalLength/f[2],A[0]*=this.focalLength/A[2],A[1]*=this.focalLength/A[2],m[0]*=this.focalLength/m[2],m[1]*=this.focalLength/m[2],g[0]*=this.focalLength/g[2],g[1]*=this.focalLength/g[2],r=[{x:f[0],y:f[1]},{x:A[0],y:A[1]},{x:m[0],y:m[1]},{x:g[0],y:g[1]}],i=this.angle(t[0],t[1],t[3]),a=this.angle(t[1],t[2],t[0]),l=this.angle(t[2],t[3],t[1]),u=this.angle(t[3],t[0],t[2]),c=this.angle(r[0],r[1],r[3]),h=this.angle(r[1],r[2],r[0]),d=this.angle(r[2],r[3],r[1]),p=this.angle(r[3],r[0],r[2]),(Math.abs(i-c)+Math.abs(a-h)+Math.abs(l-d)+Math.abs(u-p))/4},i.Posit.prototype.angle=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,s=n.x-t.x,o=n.y-t.y;return 180*Math.acos((r*s+i*o)/(Math.sqrt(r*r+i*i)*Math.sqrt(s*s+o*o)))/Math.PI},i.Pose=function(t,e,n,r,i,s){this.bestError=t,this.bestRotation=e,this.bestTranslation=n,this.alternativeError=r,this.alternativeRotation=i,this.alternativeTranslation=s};var s=function(t,e,n){this.v=[t||0,e||0,n||0]};s.prototype.copy=function(t){var e=this.v;return e[0]=(t=t.v)[0],e[1]=t[1],e[2]=t[2],this},s.add=function(t,e){var n=new s,r=n.v;return r[0]=(t=t.v)[0]+(e=e.v)[0],r[1]=t[1]+e[1],r[2]=t[2]+e[2],n},s.sub=function(t,e){var n=new s,r=n.v;return r[0]=(t=t.v)[0]-(e=e.v)[0],r[1]=t[1]-e[1],r[2]=t[2]-e[2],n},s.mult=function(t,e){var n=new s,r=n.v;return r[0]=(t=t.v)[0]*(e=e.v)[0],r[1]=t[1]*e[1],r[2]=t[2]*e[2],n},s.addScalar=function(t,e){var n=new s,r=n.v;return r[0]=(t=t.v)[0]+e,r[1]=t[1]+e,r[2]=t[2]+e,n},s.multScalar=function(t,e){var n=new s,r=n.v;return r[0]=(t=t.v)[0]*e,r[1]=t[1]*e,r[2]=t[2]*e,n},s.dot=function(t,e){return(t=t.v)[0]*(e=e.v)[0]+t[1]*e[1]+t[2]*e[2]},s.cross=function(t,e){return new s((t=t.v)[1]*(e=e.v)[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0])},s.prototype.normalize=function(){var t=this.v,e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);return e>0&&(t[0]/=e,t[1]/=e,t[2]/=e),e},s.inverse=function(t){var e=new s,n=e.v;return 0!==(t=t.v)[0]&&(n[0]=1/t[0]),0!==t[1]&&(n[1]=1/t[1]),0!==t[2]&&(n[2]=1/t[2]),e},s.prototype.square=function(){var t=this.v;return t[0]*t[0]+t[1]*t[1]+t[2]*t[2]},s.prototype.minIndex=function(){var t=this.v;return t[0]<t[1]?t[0]<t[2]?0:2:t[1]<t[2]?1:2};var o=function(){this.m=[[0,0,0],[0,0,0],[0,0,0]]};o.clone=function(t){var e=new o,n=e.m;return n[0][0]=(t=t.m)[0][0],n[0][1]=t[0][1],n[0][2]=t[0][2],n[1][0]=t[1][0],n[1][1]=t[1][1],n[1][2]=t[1][2],n[2][0]=t[2][0],n[2][1]=t[2][1],n[2][2]=t[2][2],e},o.prototype.copy=function(t){var e=this.m;return e[0][0]=(t=t.m)[0][0],e[0][1]=t[0][1],e[0][2]=t[0][2],e[1][0]=t[1][0],e[1][1]=t[1][1],e[1][2]=t[1][2],e[2][0]=t[2][0],e[2][1]=t[2][1],e[2][2]=t[2][2],this},o.fromRows=function(t,e,n){var r=new o,i=r.m;return e=e.v,n=n.v,i[0][0]=(t=t.v)[0],i[0][1]=t[1],i[0][2]=t[2],i[1][0]=e[0],i[1][1]=e[1],i[1][2]=e[2],i[2][0]=n[0],i[2][1]=n[1],i[2][2]=n[2],r},o.fromDiagonal=function(t){var e=new o,n=e.m;return n[0][0]=(t=t.v)[0],n[1][1]=t[1],n[2][2]=t[2],e},o.transpose=function(t){var e=new o,n=e.m;return n[0][0]=(t=t.m)[0][0],n[0][1]=t[1][0],n[0][2]=t[2][0],n[1][0]=t[0][1],n[1][1]=t[1][1],n[1][2]=t[2][1],n[2][0]=t[0][2],n[2][1]=t[1][2],n[2][2]=t[2][2],e},o.mult=function(t,e){var n=new o,r=n.m;return r[0][0]=(t=t.m)[0][0]*(e=e.m)[0][0]+t[0][1]*e[1][0]+t[0][2]*e[2][0],r[0][1]=t[0][0]*e[0][1]+t[0][1]*e[1][1]+t[0][2]*e[2][1],r[0][2]=t[0][0]*e[0][2]+t[0][1]*e[1][2]+t[0][2]*e[2][2],r[1][0]=t[1][0]*e[0][0]+t[1][1]*e[1][0]+t[1][2]*e[2][0],r[1][1]=t[1][0]*e[0][1]+t[1][1]*e[1][1]+t[1][2]*e[2][1],r[1][2]=t[1][0]*e[0][2]+t[1][1]*e[1][2]+t[1][2]*e[2][2],r[2][0]=t[2][0]*e[0][0]+t[2][1]*e[1][0]+t[2][2]*e[2][0],r[2][1]=t[2][0]*e[0][1]+t[2][1]*e[1][1]+t[2][2]*e[2][1],r[2][2]=t[2][0]*e[0][2]+t[2][1]*e[1][2]+t[2][2]*e[2][2],n},o.multVector=function(t,e){return new s((t=t.m)[0][0]*(e=e.v)[0]+t[0][1]*e[1]+t[0][2]*e[2],t[1][0]*e[0]+t[1][1]*e[1]+t[1][2]*e[2],t[2][0]*e[0]+t[2][1]*e[1]+t[2][2]*e[2])},o.prototype.column=function(t){var e=this.m;return new s(e[0][t],e[1][t],e[2][t])},o.prototype.row=function(t){var e=this.m;return new s(e[t][0],e[t][1],e[t][2])},t.exports=i},uDiL:function(t,e,n){(function(t){var r;!function(t,i,s){function o(t){var e=this,n="";e.x=0,e.y=0,e.z=0,e.w=0,e.next=function(){var t=e.x^e.x<<11;return e.x=e.y,e.y=e.z,e.z=e.w,e.w^=e.w>>>19^t^t>>>8},t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),e.next()}function a(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e}function l(t,e){var n=new o(t),r=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&a(r,n),i.state=function(){return a(n,{})}),i}i&&i.exports?i.exports=l:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return l}).call(e,n,e,i))||(i.exports=r):this.xor128=l}(0,t,n("B9Yq"))}).call(this,n("YuTi")(t))},uLFl:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("zhpf");function i(t){var e=Math.min(t.shape[0],t.shape[1]);return t.slice([t.shape[0]/2-e/2,t.shape[1]/2-e/2,0],[e,e,3])}e.capture=function(t){return r.tidy((function(){return i(r.browser.fromPixels(t)).expandDims(0).toFloat().div(r.scalar(127)).sub(r.scalar(1))}))},e.cropTensor=i},usyV:function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e,n){var i=n.value;if("function"!=typeof i)throw new TypeError("@boundMethod decorator can only be applied to methods not: ".concat(r(i)));var s=!1;return{configurable:!0,get:function(){if(s||this===t.prototype||this.hasOwnProperty(e)||"function"!=typeof i)return i;var n=i.bind(this);return s=!0,Object.defineProperty(this,e,{configurable:!0,get:function(){return n},set:function(t){i=t,delete this[e]}}),s=!1,n},set:function(t){i=t}}}function s(t){var e;return"undefined"!=typeof Reflect&&"function"==typeof Reflect.ownKeys?e=Reflect.ownKeys(t.prototype):(e=Object.getOwnPropertyNames(t.prototype),"function"==typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(t.prototype)))),e.forEach((function(e){if("constructor"!==e){var n=Object.getOwnPropertyDescriptor(t.prototype,e);"function"==typeof n.value&&Object.defineProperty(t.prototype,e,i(t,e,n))}})),t}function o(){return 1===arguments.length?s.apply(void 0,arguments):i.apply(void 0,arguments)}n.r(e),n.d(e,"boundMethod",(function(){return i})),n.d(e,"boundClass",(function(){return s})),n.d(e,"default",(function(){return o}))},wCX4:function(t,e,n){var r,i;i=this,void 0===(r=(function(){return i.ArucoMarker=function(){function t(t){if(t<0||t>1023)throw new RangeError("Marker ID must be in the range [0..1023]");this.id=t}return t.prototype={markerMatrix:function(){var t,e,n,r=[16,23,9,14],i=[[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0]];for(n=0;n<5;n++)for(t=r[this.id>>2*(4-n)&3],e=0;e<5;e++)i[e][n]=t>>4-e&1?1:0;return i},toSVG:function(t){var e,n,r,i=this.markerMatrix();for(r="<svg "+(t=t?'height="'+t+'" width="'+t+'"':"")+' viewBox="0 0 7 7" version="1.1" xmlns="http://www.w3.org/2000/svg">\n  <rect x="0" y="0" width="7" height="7" fill="black"/>\n',n=0;n<5;n++)for(e=0;e<5;e++)1===i[e][n]&&(r+='  <rect x="'+(e+1)+'" y="'+(n+1)+'" width="1" height="1" fill="white" stroke="white" stroke-width="0.01" />\n');return r+"</svg>"}},t}()}).apply(e,[]))||(t.exports=r)},"wN+T":function(t,e,n){var r=n("zium"),i=i||{};i.Marker=function(t,e){this.id=t,this.corners=e},i.Detector=function(){this.grey=new r.Image,this.thres=new r.Image,this.homography=new r.Image,this.binary=[],this.contours=[],this.polys=[],this.candidates=[]},i.Detector.prototype.detect=function(t){return r.grayscale(t,this.grey),r.adaptiveThreshold(this.grey,this.thres,2,7),this.contours=r.findContours(this.thres,this.binary),this.candidates=this.findCandidates(this.contours,.2*t.width,.05,10),this.candidates=this.clockwiseCorners(this.candidates),this.candidates=this.notTooNear(this.candidates,10),this.findMarkers(this.grey,this.candidates,49)},i.Detector.prototype.findCandidates=function(t,e,n,i){var s,o,a,l=[],u=t.length;for(this.polys=[],a=0;a<u;++a)(s=t[a]).length>=e&&(o=r.approxPolyDP(s,s.length*n),this.polys.push(o),4===o.length&&r.isContourConvex(o)&&r.minEdgeLength(o)>=i&&l.push(o));return l},i.Detector.prototype.clockwiseCorners=function(t){var e,n,r=t.length;for(n=0;n<r;++n)(t[n][1].x-t[n][0].x)*(t[n][2].y-t[n][0].y)-(t[n][1].y-t[n][0].y)*(t[n][2].x-t[n][0].x)<0&&(e=t[n][1],t[n][1]=t[n][3],t[n][3]=e);return t},i.Detector.prototype.notTooNear=function(t,e){var n,i,s,o,a,l,u=[],c=t.length;for(o=0;o<c;++o)for(a=o+1;a<c;++a){for(n=0,l=0;l<4;++l)n+=(i=t[o][l].x-t[a][l].x)*i+(s=t[o][l].y-t[a][l].y)*s;n/4<e*e&&(r.perimeter(t[o])<r.perimeter(t[a])?t[o].tooNear=!0:t[a].tooNear=!0)}for(o=0;o<c;++o)t[o].tooNear||u.push(t[o]);return u},i.Detector.prototype.findMarkers=function(t,e,n){var i,s,o,a=[],l=e.length;for(o=0;o<l;++o)r.warp(t,this.homography,i=e[o],n),r.threshold(this.homography,this.homography,r.otsu(this.homography)),(s=this.getMarker(this.homography,i))&&a.push(s);return a},i.Detector.prototype.getMarker=function(t,e){var n,s,o,a,l=t.width/7>>>0,u=l*l>>1,c=[],h=[],d=[];for(o=0;o<7;++o)for(s=0===o||6===o?1:6,a=0;a<7;a+=s)if(r.countNonZero(t,{x:a*l,y:o*l,width:l,height:l})>u)return null;for(o=0;o<5;++o)for(c[o]=[],a=0;a<5;++a)c[o][a]=r.countNonZero(t,{x:(a+1)*l,y:(o+1)*l,width:l,height:l})>u?1:0;for(h[0]=c,d[0]=this.hammingDistance(h[0]),n={first:d[0],second:0},o=1;o<4;++o)h[o]=this.rotate(h[o-1]),d[o]=this.hammingDistance(h[o]),d[o]<n.first&&(n.first=d[o],n.second=o);return 0!==n.first?null:new i.Marker(this.mat2id(h[n.second]),this.rotate2(e,4-n.second))},i.Detector.prototype.hammingDistance=function(t){var e,n,r,i,s,o=[[1,0,0,0,0],[1,0,1,1,1],[0,1,0,0,1],[0,1,1,1,0]],a=0;for(r=0;r<5;++r){for(n=1/0,i=0;i<4;++i){for(e=0,s=0;s<5;++s)e+=t[r][s]===o[i][s]?0:1;e<n&&(n=e)}a+=n}return a},i.Detector.prototype.mat2id=function(t){var e,n=0;for(e=0;e<5;++e)n<<=1,n|=t[e][1],n<<=1,n|=t[e][3];return n},i.Detector.prototype.rotate=function(t){var e,n,r=[],i=t.length;for(e=0;e<i;++e)for(r[e]=[],n=0;n<t[e].length;++n)r[e][n]=t[t[e].length-n-1][e];return r},i.Detector.prototype.rotate2=function(t,e){var n,r=[],i=t.length;for(n=0;n<i;++n)r[n]=t[(e+n)%i];return r},t.exports=i},wOnQ:function(t,e,n){t.exports=function(){"use strict";var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};function e(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var n=function(){return(n=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function r(t,e,n,r){return new(n||(n=Promise))((function(i,s){function o(t){try{l(r.next(t))}catch(e){s(e)}}function a(t){try{l(r.throw(t))}catch(e){s(e)}}function l(t){t.done?i(t.value):new n((function(e){e(t.value)})).then(o,a)}l((r=r.apply(t,e||[])).next())}))}function i(t,e){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(a){s=[6,a],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}for(var s=function(){function t(t,e,n,r){this.left=t,this.top=e,this.width=n,this.height=r}return t.prototype.add=function(e,n,r,i){return new t(this.left+e,this.top+n,this.width+r,this.height+i)},t.fromClientRect=function(e){return new t(e.left,e.top,e.width,e.height)},t}(),o=function(t){return s.fromClientRect(t.getBoundingClientRect())},a=function(t){for(var e=[],n=0,r=t.length;n<r;){var i=t.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var s=t.charCodeAt(n++);56320==(64512&s)?e.push(((1023&i)<<10)+(1023&s)+65536):(e.push(i),n--)}else e.push(i)}return e},l=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var n=t.length;if(!n)return"";for(var r=[],i=-1,s="";++i<n;){var o=t[i];o<=65535?r.push(o):r.push(55296+((o-=65536)>>10),o%1024+56320),(i+1===n||r.length>16384)&&(s+=String.fromCharCode.apply(String,r),r.length=0)}return s},u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c="undefined"==typeof Uint8Array?[]:new Uint8Array(256),h=0;h<u.length;h++)c[u.charCodeAt(h)]=h;var d,p,f,A,m,g,y,w,b=function(t,e,n){return t.slice?t.slice(e,n):new Uint16Array(Array.prototype.slice.call(t,e,n))},v=function(){function t(t,e,n,r,i,s){this.initialValue=t,this.errorValue=e,this.highStart=n,this.highValueIndex=r,this.index=i,this.data=s}return t.prototype.get=function(t){var e;if(t>=0){if(t<55296||t>56319&&t<=65535)return this.data[e=((e=this.index[t>>5])<<2)+(31&t)];if(t<=65535)return this.data[e=((e=this.index[2048+(t-55296>>5)])<<2)+(31&t)];if(t<this.highStart)return e=this.index[e=2080+(t>>11)],this.data[e=((e=this.index[e+=t>>5&63])<<2)+(31&t)];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),x=10,_=13,C=15,S=17,E=18,B=19,k=20,N=21,I=22,F=24,T=25,R=26,O=27,D=28,L=30,M=32,U=33,P=34,z=35,Q=37,H=38,$=39,V=40,q=42,j=(A=function(t){var e,n,r,i,s,o=.75*t.length,a=t.length,l=0;"="===t[t.length-1]&&(o--,"="===t[t.length-2]&&o--);var u="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&void 0!==Uint8Array.prototype.slice?new ArrayBuffer(o):new Array(o),h=Array.isArray(u)?u:new Uint8Array(u);for(e=0;e<a;e+=4)n=c[t.charCodeAt(e)],r=c[t.charCodeAt(e+1)],i=c[t.charCodeAt(e+2)],s=c[t.charCodeAt(e+3)],h[l++]=n<<2|r>>4,h[l++]=(15&r)<<4|i>>2,h[l++]=(3&i)<<6|63&s;return u}("KwAAAAAAAAAACA4AIDoAAPAfAAACAAAAAAAIABAAGABAAEgAUABYAF4AZgBeAGYAYABoAHAAeABeAGYAfACEAIAAiACQAJgAoACoAK0AtQC9AMUAXgBmAF4AZgBeAGYAzQDVAF4AZgDRANkA3gDmAOwA9AD8AAQBDAEUARoBIgGAAIgAJwEvATcBPwFFAU0BTAFUAVwBZAFsAXMBewGDATAAiwGTAZsBogGkAawBtAG8AcIBygHSAdoB4AHoAfAB+AH+AQYCDgIWAv4BHgImAi4CNgI+AkUCTQJTAlsCYwJrAnECeQKBAk0CiQKRApkCoQKoArACuALAAsQCzAIwANQC3ALkAjAA7AL0AvwCAQMJAxADGAMwACADJgMuAzYDPgOAAEYDSgNSA1IDUgNaA1oDYANiA2IDgACAAGoDgAByA3YDfgOAAIQDgACKA5IDmgOAAIAAogOqA4AAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAK8DtwOAAIAAvwPHA88D1wPfAyAD5wPsA/QD/AOAAIAABAQMBBIEgAAWBB4EJgQuBDMEIAM7BEEEXgBJBCADUQRZBGEEaQQwADAAcQQ+AXkEgQSJBJEEgACYBIAAoASoBK8EtwQwAL8ExQSAAIAAgACAAIAAgACgAM0EXgBeAF4AXgBeAF4AXgBeANUEXgDZBOEEXgDpBPEE+QQBBQkFEQUZBSEFKQUxBTUFPQVFBUwFVAVcBV4AYwVeAGsFcwV7BYMFiwWSBV4AmgWgBacFXgBeAF4AXgBeAKsFXgCyBbEFugW7BcIFwgXIBcIFwgXQBdQF3AXkBesF8wX7BQMGCwYTBhsGIwYrBjMGOwZeAD8GRwZNBl4AVAZbBl4AXgBeAF4AXgBeAF4AXgBeAF4AXgBeAGMGXgBqBnEGXgBeAF4AXgBeAF4AXgBeAF4AXgB5BoAG4wSGBo4GkwaAAIADHgR5AF4AXgBeAJsGgABGA4AAowarBrMGswagALsGwwbLBjAA0wbaBtoG3QbaBtoG2gbaBtoG2gblBusG8wb7BgMHCwcTBxsHCwcjBysHMAc1BzUHOgdCB9oGSgdSB1oHYAfaBloHaAfaBlIH2gbaBtoG2gbaBtoG2gbaBjUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHbQdeAF4ANQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQd1B30HNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B4MH2gaKB68EgACAAIAAgACAAIAAgACAAI8HlwdeAJ8HpweAAIAArwe3B14AXgC/B8UHygcwANAH2AfgB4AA6AfwBz4B+AcACFwBCAgPCBcIogEYAR8IJwiAAC8INwg/CCADRwhPCFcIXwhnCEoDGgSAAIAAgABvCHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIhAiLCI4IMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAANQc1BzUHNQc1BzUHNQc1BzUHNQc1B54INQc1B6II2gaqCLIIugiAAIAAvgjGCIAAgACAAIAAgACAAIAAgACAAIAAywiHAYAA0wiAANkI3QjlCO0I9Aj8CIAAgACAAAIJCgkSCRoJIgknCTYHLwk3CZYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiAAIAAAAFAAXgBeAGAAcABeAHwAQACQAKAArQC9AJ4AXgBeAE0A3gBRAN4A7AD8AMwBGgEAAKcBNwEFAUwBXAF4QkhCmEKnArcCgAHHAsABz4LAAcABwAHAAd+C6ABoAG+C/4LAAcABwAHAAc+DF4MAAcAB54M3gweDV4Nng3eDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEeDqABVg6WDqABoQ6gAaABoAHXDvcONw/3DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DncPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB7cPPwlGCU4JMACAAIAAgABWCV4JYQmAAGkJcAl4CXwJgAkwADAAMAAwAIgJgACLCZMJgACZCZ8JowmrCYAAswkwAF4AXgB8AIAAuwkABMMJyQmAAM4JgADVCTAAMAAwADAAgACAAIAAgACAAIAAgACAAIAAqwYWBNkIMAAwADAAMADdCeAJ6AnuCR4E9gkwAP4JBQoNCjAAMACAABUK0wiAAB0KJAosCjQKgAAwADwKQwqAAEsKvQmdCVMKWwowADAAgACAALcEMACAAGMKgABrCjAAMAAwADAAMAAwADAAMAAwADAAMAAeBDAAMAAwADAAMAAwADAAMAAwADAAMAAwAIkEPQFzCnoKiQSCCooKkAqJBJgKoAqkCokEGAGsCrQKvArBCjAAMADJCtEKFQHZCuEK/gHpCvEKMAAwADAAMACAAIwE+QowAIAAPwEBCzAAMAAwADAAMACAAAkLEQswAIAAPwEZCyELgAAOCCkLMAAxCzkLMAAwADAAMAAwADAAXgBeAEELMAAwADAAMAAwADAAMAAwAEkLTQtVC4AAXAtkC4AAiQkwADAAMAAwADAAMAAwADAAbAtxC3kLgAuFC4sLMAAwAJMLlwufCzAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAApwswADAAMACAAIAAgACvC4AAgACAAIAAgACAALcLMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAvwuAAMcLgACAAIAAgACAAIAAyguAAIAAgACAAIAA0QswADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAANkLgACAAIAA4AswADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACJCR4E6AswADAAhwHwC4AA+AsADAgMEAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMACAAIAAGAwdDCUMMAAwAC0MNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQw1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHPQwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADUHNQc1BzUHNQc1BzUHNQc2BzAAMAA5DDUHNQc1BzUHNQc1BzUHNQc1BzUHNQdFDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAgACAAIAATQxSDFoMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAF4AXgBeAF4AXgBeAF4AYgxeAGoMXgBxDHkMfwxeAIUMXgBeAI0MMAAwADAAMAAwAF4AXgCVDJ0MMAAwADAAMABeAF4ApQxeAKsMswy7DF4Awgy9DMoMXgBeAF4AXgBeAF4AXgBeAF4AXgDRDNkMeQBqCeAM3Ax8AOYM7Az0DPgMXgBeAF4AXgBeAF4AXgBeAF4AXgBeAF4AXgBeAF4AXgCgAAANoAAHDQ4NFg0wADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAeDSYNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIAAgACAAIAAgACAAC4NMABeAF4ANg0wADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAD4NRg1ODVYNXg1mDTAAbQ0wADAAMAAwADAAMAAwADAA2gbaBtoG2gbaBtoG2gbaBnUNeg3CBYANwgWFDdoGjA3aBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gaUDZwNpA2oDdoG2gawDbcNvw3HDdoG2gbPDdYN3A3fDeYN2gbsDfMN2gbaBvoN/g3aBgYODg7aBl4AXgBeABYOXgBeACUG2gYeDl4AJA5eACwO2w3aBtoGMQ45DtoG2gbaBtoGQQ7aBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gZJDjUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B1EO2gY1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQdZDjUHNQc1BzUHNQc1B2EONQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHaA41BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B3AO2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gY1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B2EO2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gZJDtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBkkOeA6gAKAAoAAwADAAMAAwAKAAoACgAKAAoACgAKAAgA4wADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAD//wQABAAEAAQABAAEAAQABAAEAA0AAwABAAEAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAKABMAFwAeABsAGgAeABcAFgASAB4AGwAYAA8AGAAcAEsASwBLAEsASwBLAEsASwBLAEsAGAAYAB4AHgAeABMAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAFgAbABIAHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYADQARAB4ABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkAFgAaABsAGwAbAB4AHQAdAB4ATwAXAB4ADQAeAB4AGgAbAE8ATwAOAFAAHQAdAB0ATwBPABcATwBPAE8AFgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwArAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAAQABAANAA0ASwBLAEsASwBLAEsASwBLAEsASwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUAArACsABABQAAQABAAEAAQABAAEAAQAKwArAAQABAArACsABAAEAAQAUAArACsAKwArACsAKwArACsABAArACsAKwArAFAAUAArAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAGgAaAFAAUABQAFAAUABMAB4AGwBQAB4AKwArACsABAAEAAQAKwBQAFAAUABQAFAAUAArACsAKwArAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUAArAFAAUAArACsABAArAAQABAAEAAQABAArACsAKwArAAQABAArACsABAAEAAQAKwArACsABAArACsAKwArACsAKwArAFAAUABQAFAAKwBQACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwAEAAQAUABQAFAABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUAArACsABABQAAQABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQAKwArAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwAeABsAKwArACsAKwArACsAKwBQAAQABAAEAAQABAAEACsABAAEAAQAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwArAAQABAArACsABAAEAAQAKwArACsAKwArACsAKwArAAQABAArACsAKwArAFAAUAArAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwAeAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwAEAFAAKwBQAFAAUABQAFAAUAArACsAKwBQAFAAUAArAFAAUABQAFAAKwArACsAUABQACsAUAArAFAAUAArACsAKwBQAFAAKwArACsAUABQAFAAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQAKwArACsABAAEAAQAKwAEAAQABAAEACsAKwBQACsAKwArACsAKwArAAQAKwArACsAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAB4AHgAeAB4AHgAeABsAHgArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABAArACsAKwArACsAKwArAAQABAArAFAAUABQACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAB4AUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABAArACsAKwArACsAKwArAAQABAArACsAKwArACsAKwArAFAAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwArAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAKwBcAFwAKwBcACsAKwBcACsAKwArACsAKwArAFwAXABcAFwAKwBcAFwAXABcAFwAXABcACsAXABcAFwAKwBcACsAXAArACsAXABcACsAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgArACoAKgBcACsAKwBcAFwAXABcAFwAKwBcACsAKgAqACoAKgAqACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAFwAXABcAFwAUAAOAA4ADgAOAB4ADgAOAAkADgAOAA0ACQATABMAEwATABMACQAeABMAHgAeAB4ABAAEAB4AHgAeAB4AHgAeAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUAANAAQAHgAEAB4ABAAWABEAFgARAAQABABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAAQABAAEAAQABAANAAQABABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsADQANAB4AHgAeAB4AHgAeAAQAHgAeAB4AHgAeAB4AKwAeAB4ADgAOAA0ADgAeAB4AHgAeAB4ACQAJACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgAeAB4AHgBcAFwAXABcAFwAXAAqACoAKgAqAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAKgAqACoAKgAqACoAKgBcAFwAXAAqACoAKgAqAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAXAAqAEsASwBLAEsASwBLAEsASwBLAEsAKgAqACoAKgAqACoAUABQAFAAUABQAFAAKwBQACsAKwArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQACsAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwAEAAQABAAeAA0AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAEQArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAADQANAA0AUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAA0ADQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoADQANABUAXAANAB4ADQAbAFwAKgArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAB4AHgATABMADQANAA4AHgATABMAHgAEAAQABAAJACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAUABQAFAAUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwAeACsAKwArABMAEwBLAEsASwBLAEsASwBLAEsASwBLAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwBcAFwAXABcAFwAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcACsAKwArACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwAeAB4AXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgArACsABABLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKgAqACoAKgAqACoAKgBcACoAKgAqACoAKgAqACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAUABQAFAAUABQAFAAUAArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4ADQANAA0ADQAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAHgAeAB4AHgBQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwANAA0ADQANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwBQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsABAAEAAQAHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAABABQAFAAUABQAAQABAAEAFAAUAAEAAQABAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAKwBQACsAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAKwArAB4AHgAeAB4AHgAeACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAUABQAFAAKwAeAB4AHgAeAB4AHgAeAA4AHgArAA0ADQANAA0ADQANAA0ACQANAA0ADQAIAAQACwAEAAQADQAJAA0ADQAMAB0AHQAeABcAFwAWABcAFwAXABYAFwAdAB0AHgAeABQAFAAUAA0AAQABAAQABAAEAAQABAAJABoAGgAaABoAGgAaABoAGgAeABcAFwAdABUAFQAeAB4AHgAeAB4AHgAYABYAEQAVABUAFQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgANAB4ADQANAA0ADQAeAA0ADQANAAcAHgAeAB4AHgArAAQABAAEAAQABAAEAAQABAAEAAQAUABQACsAKwBPAFAAUABQAFAAUAAeAB4AHgAWABEATwBQAE8ATwBPAE8AUABQAFAAUABQAB4AHgAeABYAEQArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAGwAbABsAGwAbABsAGwAaABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAaABsAGwAbABsAGgAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgBQABoAHgAdAB4AUAAeABoAHgAeAB4AHgAeAB4AHgAeAB4ATwAeAFAAGwAeAB4AUABQAFAAUABQAB4AHgAeAB0AHQAeAFAAHgBQAB4AUAAeAFAATwBQAFAAHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AUABQAFAAUABPAE8AUABQAFAAUABQAE8AUABQAE8AUABPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAE8ATwBPAE8ATwBPAE8ATwBPAE8AUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAATwAeAB4AKwArACsAKwAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB0AHQAeAB4AHgAdAB0AHgAeAB0AHgAeAB4AHQAeAB0AGwAbAB4AHQAeAB4AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB0AHgAdAB4AHQAdAB0AHQAdAB0AHgAdAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAdAB0AHQAdAB4AHgAdAB0AHgAeAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABQAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAlACUAHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBQAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAeAB4AHgAeAB0AHQAeAB4AHgAeAB0AHQAdAB4AHgAdAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB0AHQAeAB4AHQAeAB4AHgAeAB0AHQAeAB4AHgAeACUAJQAdAB0AJQAeACUAJQAlACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAHgAeAB4AHgAdAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHQAdAB0AHgAdACUAHQAdAB4AHQAdAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHQAdAB0AHQAlAB4AJQAlACUAHQAlACUAHQAdAB0AJQAlAB0AHQAlAB0AHQAlACUAJQAeAB0AHgAeAB4AHgAdAB0AJQAdAB0AHQAdAB0AHQAlACUAJQAlACUAHQAlACUAIAAlAB0AHQAlACUAJQAlACUAJQAlACUAHgAeAB4AJQAlACAAIAAgACAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeABcAFwAXABcAFwAXAB4AEwATACUAHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwArACUAJQBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAKwArACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAE8ATwBPAE8ATwBPAE8ATwAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeACsAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUAArACsAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQBQAFAAUABQACsAKwArACsAUABQAFAAUABQAFAAUABQAA0AUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQACsAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgBQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAABAAEAAQAKwAEAAQAKwArACsAKwArAAQABAAEAAQAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsABAAEAAQAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsADQANAA0ADQANAA0ADQANAB4AKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AUABQAFAAUABQAFAAUABQAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAUABQAFAAUABQAA0ADQANAA0ADQANABQAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwANAA0ADQANAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAeAAQABAAEAB4AKwArAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLACsADQArAB4AKwArAAQABAAEAAQAUABQAB4AUAArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwAEAAQABAAEAAQABAAEAAQABAAOAA0ADQATABMAHgAeAB4ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0AUABQAFAAUAAEAAQAKwArAAQADQANAB4AUAArACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXABcAA0ADQANACoASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUAArACsAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANACsADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEcARwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQACsAKwAeAAQABAANAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAEAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUAArACsAUAArACsAUABQACsAKwBQAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AKwArAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAeAB4ADQANAA0ADQAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAArAAQABAArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAEAAQABAAEAAQABAAEACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAFgAWAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAKwBQACsAKwArACsAKwArAFAAKwArACsAKwBQACsAUAArAFAAKwBQAFAAUAArAFAAUAArAFAAKwArAFAAKwBQACsAUAArAFAAKwBQACsAUABQACsAUAArACsAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAUABQAFAAUAArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUAArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAlACUAJQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeACUAJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeACUAJQAlACUAJQAeACUAJQAlACUAJQAgACAAIAAlACUAIAAlACUAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIQAhACEAIQAhACUAJQAgACAAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAgACAAIAAlACUAJQAlACAAJQAgACAAIAAgACAAIAAgACAAIAAlACUAJQAgACUAJQAlACUAIAAgACAAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeACUAHgAlAB4AJQAlACUAJQAlACAAJQAlACUAJQAeACUAHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAgACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAlACUAJQAlACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAIAAgACAAJQAlACUAIAAgACAAIAAgAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFwAXABcAFQAVABUAHgAeAB4AHgAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAgACAAJQAlACUAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAlACAAIAAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsA"),m=Array.isArray(A)?function(t){for(var e=t.length,n=[],r=0;r<e;r+=4)n.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return n}(A):new Uint32Array(A),y=b(g=Array.isArray(A)?function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n.push(t[r+1]<<8|t[r]);return n}(A):new Uint16Array(A),12,m[4]/2),w=2===m[5]?b(g,(24+m[4])/2):(p=m,f=Math.ceil((24+m[4])/4),p.slice?p.slice(f,void 0):new Uint32Array(Array.prototype.slice.call(p,f,void 0))),new v(m[0],m[1],m[2],m[3],y,w)),K=[L,36],W=[1,2,3,5],G=[x,8],X=[O,R],Y=W.concat(G),J=[H,$,V,P,z],Z=[C,_],tt=function(t,e,n,r){var i=r[n];if(Array.isArray(t)?-1!==t.indexOf(i):t===i)for(var s=n;s<=r.length;){if((l=r[++s])===e)return!0;if(l!==x)break}if(i===x)for(s=n;s>0;){var o=r[--s];if(Array.isArray(t)?-1!==t.indexOf(o):t===o)for(var a=n;a<=r.length;){var l;if((l=r[++a])===e)return!0;if(l!==x)break}if(o!==x)break}return!1},et=function(t,e){for(var n=t;n>=0;){var r=e[n];if(r!==x)return r;n--}return 0},nt=function(t,e,n,r,i){if(0===n[r])return"\xd7";var s=r-1;if(Array.isArray(i)&&!0===i[s])return"\xd7";var o=s-1,a=s+1,l=e[s],u=o>=0?e[o]:0,c=e[a];if(2===l&&3===c)return"\xd7";if(-1!==W.indexOf(l))return"!";if(-1!==W.indexOf(c))return"\xd7";if(-1!==G.indexOf(c))return"\xd7";if(8===et(s,e))return"\xf7";if(11===j.get(t[s])&&(c===Q||c===M||c===U))return"\xd7";if(7===l||7===c)return"\xd7";if(9===l)return"\xd7";if(-1===[x,_,C].indexOf(l)&&9===c)return"\xd7";if(-1!==[S,E,B,F,D].indexOf(c))return"\xd7";if(et(s,e)===I)return"\xd7";if(tt(23,I,s,e))return"\xd7";if(tt([S,E],N,s,e))return"\xd7";if(tt(12,12,s,e))return"\xd7";if(l===x)return"\xf7";if(23===l||23===c)return"\xd7";if(16===c||16===l)return"\xf7";if(-1!==[_,C,N].indexOf(c)||14===l)return"\xd7";if(36===u&&-1!==Z.indexOf(l))return"\xd7";if(l===D&&36===c)return"\xd7";if(c===k&&-1!==K.concat(k,B,T,Q,M,U).indexOf(l))return"\xd7";if(-1!==K.indexOf(c)&&l===T||-1!==K.indexOf(l)&&c===T)return"\xd7";if(l===O&&-1!==[Q,M,U].indexOf(c)||-1!==[Q,M,U].indexOf(l)&&c===R)return"\xd7";if(-1!==K.indexOf(l)&&-1!==X.indexOf(c)||-1!==X.indexOf(l)&&-1!==K.indexOf(c))return"\xd7";if(-1!==[O,R].indexOf(l)&&(c===T||-1!==[I,C].indexOf(c)&&e[a+1]===T)||-1!==[I,C].indexOf(l)&&c===T||l===T&&-1!==[T,D,F].indexOf(c))return"\xd7";if(-1!==[T,D,F,S,E].indexOf(c))for(var h=s;h>=0;){if((d=e[h])===T)return"\xd7";if(-1===[D,F].indexOf(d))break;h--}if(-1!==[O,R].indexOf(c))for(h=-1!==[S,E].indexOf(l)?o:s;h>=0;){var d;if((d=e[h])===T)return"\xd7";if(-1===[D,F].indexOf(d))break;h--}if(H===l&&-1!==[H,$,P,z].indexOf(c)||-1!==[$,P].indexOf(l)&&-1!==[$,V].indexOf(c)||-1!==[V,z].indexOf(l)&&c===V)return"\xd7";if(-1!==J.indexOf(l)&&-1!==[k,R].indexOf(c)||-1!==J.indexOf(c)&&l===O)return"\xd7";if(-1!==K.indexOf(l)&&-1!==K.indexOf(c))return"\xd7";if(l===F&&-1!==K.indexOf(c))return"\xd7";if(-1!==K.concat(T).indexOf(l)&&c===I||-1!==K.concat(T).indexOf(c)&&l===E)return"\xd7";if(41===l&&41===c){for(var p=n[s],f=1;p>0&&41===e[--p];)f++;if(f%2!=0)return"\xd7"}return l===M&&c===U?"\xd7":"\xf7"},rt=function(){function t(t,e,n,r){this.codePoints=t,this.required="!"===e,this.start=n,this.end=r}return t.prototype.slice=function(){return l.apply(void 0,this.codePoints.slice(this.start,this.end))},t}();!function(t){t[t.STRING_TOKEN=0]="STRING_TOKEN",t[t.BAD_STRING_TOKEN=1]="BAD_STRING_TOKEN",t[t.LEFT_PARENTHESIS_TOKEN=2]="LEFT_PARENTHESIS_TOKEN",t[t.RIGHT_PARENTHESIS_TOKEN=3]="RIGHT_PARENTHESIS_TOKEN",t[t.COMMA_TOKEN=4]="COMMA_TOKEN",t[t.HASH_TOKEN=5]="HASH_TOKEN",t[t.DELIM_TOKEN=6]="DELIM_TOKEN",t[t.AT_KEYWORD_TOKEN=7]="AT_KEYWORD_TOKEN",t[t.PREFIX_MATCH_TOKEN=8]="PREFIX_MATCH_TOKEN",t[t.DASH_MATCH_TOKEN=9]="DASH_MATCH_TOKEN",t[t.INCLUDE_MATCH_TOKEN=10]="INCLUDE_MATCH_TOKEN",t[t.LEFT_CURLY_BRACKET_TOKEN=11]="LEFT_CURLY_BRACKET_TOKEN",t[t.RIGHT_CURLY_BRACKET_TOKEN=12]="RIGHT_CURLY_BRACKET_TOKEN",t[t.SUFFIX_MATCH_TOKEN=13]="SUFFIX_MATCH_TOKEN",t[t.SUBSTRING_MATCH_TOKEN=14]="SUBSTRING_MATCH_TOKEN",t[t.DIMENSION_TOKEN=15]="DIMENSION_TOKEN",t[t.PERCENTAGE_TOKEN=16]="PERCENTAGE_TOKEN",t[t.NUMBER_TOKEN=17]="NUMBER_TOKEN",t[t.FUNCTION=18]="FUNCTION",t[t.FUNCTION_TOKEN=19]="FUNCTION_TOKEN",t[t.IDENT_TOKEN=20]="IDENT_TOKEN",t[t.COLUMN_TOKEN=21]="COLUMN_TOKEN",t[t.URL_TOKEN=22]="URL_TOKEN",t[t.BAD_URL_TOKEN=23]="BAD_URL_TOKEN",t[t.CDC_TOKEN=24]="CDC_TOKEN",t[t.CDO_TOKEN=25]="CDO_TOKEN",t[t.COLON_TOKEN=26]="COLON_TOKEN",t[t.SEMICOLON_TOKEN=27]="SEMICOLON_TOKEN",t[t.LEFT_SQUARE_BRACKET_TOKEN=28]="LEFT_SQUARE_BRACKET_TOKEN",t[t.RIGHT_SQUARE_BRACKET_TOKEN=29]="RIGHT_SQUARE_BRACKET_TOKEN",t[t.UNICODE_RANGE_TOKEN=30]="UNICODE_RANGE_TOKEN",t[t.WHITESPACE_TOKEN=31]="WHITESPACE_TOKEN",t[t.EOF_TOKEN=32]="EOF_TOKEN"}(d||(d={}));var it=function(t){return t>=48&&t<=57},st=function(t){return it(t)||t>=65&&t<=70||t>=97&&t<=102},ot=function(t){return 10===t||9===t||32===t},at=function(t){return function(t){return function(t){return t>=97&&t<=122}(t)||function(t){return t>=65&&t<=90}(t)}(t)||function(t){return t>=128}(t)||95===t},lt=function(t){return at(t)||it(t)||45===t},ut=function(t){return t>=0&&t<=8||11===t||t>=14&&t<=31||127===t},ct=function(t,e){return 92===t&&10!==e},ht=function(t,e,n){return 45===t?at(e)||ct(e,n):!!at(t)||!(92!==t||!ct(t,e))},dt=function(t,e,n){return 43===t||45===t?!!it(e)||46===e&&it(n):it(46===t?e:t)},pt=function(t){var e=0,n=1;43!==t[e]&&45!==t[e]||(45===t[e]&&(n=-1),e++);for(var r=[];it(t[e]);)r.push(t[e++]);var i=r.length?parseInt(l.apply(void 0,r),10):0;46===t[e]&&e++;for(var s=[];it(t[e]);)s.push(t[e++]);var o=s.length,a=o?parseInt(l.apply(void 0,s),10):0;69!==t[e]&&101!==t[e]||e++;var u=1;43!==t[e]&&45!==t[e]||(45===t[e]&&(u=-1),e++);for(var c=[];it(t[e]);)c.push(t[e++]);var h=c.length?parseInt(l.apply(void 0,c),10):0;return n*(i+a*Math.pow(10,-o))*Math.pow(10,u*h)},ft={type:d.LEFT_PARENTHESIS_TOKEN},At={type:d.RIGHT_PARENTHESIS_TOKEN},mt={type:d.COMMA_TOKEN},gt={type:d.SUFFIX_MATCH_TOKEN},yt={type:d.PREFIX_MATCH_TOKEN},wt={type:d.COLUMN_TOKEN},bt={type:d.DASH_MATCH_TOKEN},vt={type:d.INCLUDE_MATCH_TOKEN},xt={type:d.LEFT_CURLY_BRACKET_TOKEN},_t={type:d.RIGHT_CURLY_BRACKET_TOKEN},Ct={type:d.SUBSTRING_MATCH_TOKEN},St={type:d.BAD_URL_TOKEN},Et={type:d.BAD_STRING_TOKEN},Bt={type:d.CDO_TOKEN},kt={type:d.CDC_TOKEN},Nt={type:d.COLON_TOKEN},It={type:d.SEMICOLON_TOKEN},Ft={type:d.LEFT_SQUARE_BRACKET_TOKEN},Tt={type:d.RIGHT_SQUARE_BRACKET_TOKEN},Rt={type:d.WHITESPACE_TOKEN},Ot={type:d.EOF_TOKEN},Dt=function(){function t(){this._value=[]}return t.prototype.write=function(t){this._value=this._value.concat(a(t))},t.prototype.read=function(){for(var t=[],e=this.consumeToken();e!==Ot;)t.push(e),e=this.consumeToken();return t},t.prototype.consumeToken=function(){var t=this.consumeCodePoint();switch(t){case 34:return this.consumeStringToken(34);case 35:var e=this.peekCodePoint(0),n=this.peekCodePoint(1),r=this.peekCodePoint(2);if(lt(e)||ct(n,r)){var i=ht(e,n,r)?2:1,s=this.consumeName();return{type:d.HASH_TOKEN,value:s,flags:i}}break;case 36:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),gt;break;case 39:return this.consumeStringToken(39);case 40:return ft;case 41:return At;case 42:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),Ct;break;case 43:if(dt(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case 44:return mt;case 45:var o=t,a=this.peekCodePoint(0),u=this.peekCodePoint(1);if(dt(o,a,u))return this.reconsumeCodePoint(t),this.consumeNumericToken();if(ht(o,a,u))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();if(45===a&&62===u)return this.consumeCodePoint(),this.consumeCodePoint(),kt;break;case 46:if(dt(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case 47:if(42===this.peekCodePoint(0))for(this.consumeCodePoint();;){var c=this.consumeCodePoint();if(42===c&&47===(c=this.consumeCodePoint()))return this.consumeToken();if(-1===c)return this.consumeToken()}break;case 58:return Nt;case 59:return It;case 60:if(33===this.peekCodePoint(0)&&45===this.peekCodePoint(1)&&45===this.peekCodePoint(2))return this.consumeCodePoint(),this.consumeCodePoint(),Bt;break;case 64:var h=this.peekCodePoint(0),p=this.peekCodePoint(1),f=this.peekCodePoint(2);if(ht(h,p,f))return s=this.consumeName(),{type:d.AT_KEYWORD_TOKEN,value:s};break;case 91:return Ft;case 92:if(ct(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();break;case 93:return Tt;case 61:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),yt;break;case 123:return xt;case 125:return _t;case 117:case 85:var A=this.peekCodePoint(0),m=this.peekCodePoint(1);return 43!==A||!st(m)&&63!==m||(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(t),this.consumeIdentLikeToken();case 124:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),bt;if(124===this.peekCodePoint(0))return this.consumeCodePoint(),wt;break;case 126:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),vt;break;case-1:return Ot}return ot(t)?(this.consumeWhiteSpace(),Rt):it(t)?(this.reconsumeCodePoint(t),this.consumeNumericToken()):at(t)?(this.reconsumeCodePoint(t),this.consumeIdentLikeToken()):{type:d.DELIM_TOKEN,value:l(t)}},t.prototype.consumeCodePoint=function(){var t=this._value.shift();return void 0===t?-1:t},t.prototype.reconsumeCodePoint=function(t){this._value.unshift(t)},t.prototype.peekCodePoint=function(t){return t>=this._value.length?-1:this._value[t]},t.prototype.consumeUnicodeRangeToken=function(){for(var t=[],e=this.consumeCodePoint();st(e)&&t.length<6;)t.push(e),e=this.consumeCodePoint();for(var n=!1;63===e&&t.length<6;)t.push(e),e=this.consumeCodePoint(),n=!0;if(n){var r=parseInt(l.apply(void 0,t.map((function(t){return 63===t?48:t}))),16),i=parseInt(l.apply(void 0,t.map((function(t){return 63===t?70:t}))),16);return{type:d.UNICODE_RANGE_TOKEN,start:r,end:i}}var s=parseInt(l.apply(void 0,t),16);if(45===this.peekCodePoint(0)&&st(this.peekCodePoint(1))){this.consumeCodePoint(),e=this.consumeCodePoint();for(var o=[];st(e)&&o.length<6;)o.push(e),e=this.consumeCodePoint();return i=parseInt(l.apply(void 0,o),16),{type:d.UNICODE_RANGE_TOKEN,start:s,end:i}}return{type:d.UNICODE_RANGE_TOKEN,start:s,end:s}},t.prototype.consumeIdentLikeToken=function(){var t=this.consumeName();return"url"===t.toLowerCase()&&40===this.peekCodePoint(0)?(this.consumeCodePoint(),this.consumeUrlToken()):40===this.peekCodePoint(0)?(this.consumeCodePoint(),{type:d.FUNCTION_TOKEN,value:t}):{type:d.IDENT_TOKEN,value:t}},t.prototype.consumeUrlToken=function(){var t=[];if(this.consumeWhiteSpace(),-1===this.peekCodePoint(0))return{type:d.URL_TOKEN,value:""};var e=this.peekCodePoint(0);if(39===e||34===e){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===d.STRING_TOKEN&&(this.consumeWhiteSpace(),-1===this.peekCodePoint(0)||41===this.peekCodePoint(0))?(this.consumeCodePoint(),{type:d.URL_TOKEN,value:n.value}):(this.consumeBadUrlRemnants(),St)}for(;;){var r=this.consumeCodePoint();if(-1===r||41===r)return{type:d.URL_TOKEN,value:l.apply(void 0,t)};if(ot(r))return this.consumeWhiteSpace(),-1===this.peekCodePoint(0)||41===this.peekCodePoint(0)?(this.consumeCodePoint(),{type:d.URL_TOKEN,value:l.apply(void 0,t)}):(this.consumeBadUrlRemnants(),St);if(34===r||39===r||40===r||ut(r))return this.consumeBadUrlRemnants(),St;if(92===r){if(!ct(r,this.peekCodePoint(0)))return this.consumeBadUrlRemnants(),St;t.push(this.consumeEscapedCodePoint())}else t.push(r)}},t.prototype.consumeWhiteSpace=function(){for(;ot(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var t=this.consumeCodePoint();if(41===t||-1===t)return;ct(t,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(t){for(var e="";t>0;){var n=Math.min(6e4,t);e+=l.apply(void 0,this._value.splice(0,n)),t-=n}return this._value.shift(),e},t.prototype.consumeStringToken=function(t){for(var e="",n=0;;){var r=this._value[n];if(-1===r||void 0===r||r===t)return e+=this.consumeStringSlice(n),{type:d.STRING_TOKEN,value:e};if(10===r)return this._value.splice(0,n),Et;if(92===r){var i=this._value[n+1];-1!==i&&void 0!==i&&(10===i?(e+=this.consumeStringSlice(n),n=-1,this._value.shift()):ct(r,i)&&(e+=this.consumeStringSlice(n),e+=l(this.consumeEscapedCodePoint()),n=-1))}n++}},t.prototype.consumeNumber=function(){var t=[],e=4,n=this.peekCodePoint(0);for(43!==n&&45!==n||t.push(this.consumeCodePoint());it(this.peekCodePoint(0));)t.push(this.consumeCodePoint());n=this.peekCodePoint(0);var r=this.peekCodePoint(1);if(46===n&&it(r))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),e=8;it(this.peekCodePoint(0));)t.push(this.consumeCodePoint());n=this.peekCodePoint(0),r=this.peekCodePoint(1);var i=this.peekCodePoint(2);if((69===n||101===n)&&((43===r||45===r)&&it(i)||it(r)))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),e=8;it(this.peekCodePoint(0));)t.push(this.consumeCodePoint());return[pt(t),e]},t.prototype.consumeNumericToken=function(){var t=this.consumeNumber(),e=t[0],n=t[1],r=this.peekCodePoint(0),i=this.peekCodePoint(1),s=this.peekCodePoint(2);if(ht(r,i,s)){var o=this.consumeName();return{type:d.DIMENSION_TOKEN,number:e,flags:n,unit:o}}return 37===r?(this.consumeCodePoint(),{type:d.PERCENTAGE_TOKEN,number:e,flags:n}):{type:d.NUMBER_TOKEN,number:e,flags:n}},t.prototype.consumeEscapedCodePoint=function(){var t=this.consumeCodePoint();if(st(t)){for(var e=l(t);st(this.peekCodePoint(0))&&e.length<6;)e+=l(this.consumeCodePoint());ot(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(e,16);return 0===n||function(t){return t>=55296&&t<=57343}(n)||n>1114111?65533:n}return-1===t?65533:t},t.prototype.consumeName=function(){for(var t="";;){var e=this.consumeCodePoint();if(lt(e))t+=l(e);else{if(!ct(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),t;t+=l(this.consumeEscapedCodePoint())}}},t}(),Lt=function(){function t(t){this._tokens=t}return t.create=function(e){var n=new Dt;return n.write(e),new t(n.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var t=this.consumeToken();t.type===d.WHITESPACE_TOKEN;)t=this.consumeToken();if(t.type===d.EOF_TOKEN)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(t);var e=this.consumeComponentValue();do{t=this.consumeToken()}while(t.type===d.WHITESPACE_TOKEN);if(t.type===d.EOF_TOKEN)return e;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var t=[];;){var e=this.consumeComponentValue();if(e.type===d.EOF_TOKEN)return t;t.push(e),t.push()}},t.prototype.consumeComponentValue=function(){var t=this.consumeToken();switch(t.type){case d.LEFT_CURLY_BRACKET_TOKEN:case d.LEFT_SQUARE_BRACKET_TOKEN:case d.LEFT_PARENTHESIS_TOKEN:return this.consumeSimpleBlock(t.type);case d.FUNCTION_TOKEN:return this.consumeFunction(t)}return t},t.prototype.consumeSimpleBlock=function(t){for(var e={type:t,values:[]},n=this.consumeToken();;){if(n.type===d.EOF_TOKEN||qt(n,t))return e;this.reconsumeToken(n),e.values.push(this.consumeComponentValue()),n=this.consumeToken()}},t.prototype.consumeFunction=function(t){for(var e={name:t.value,values:[],type:d.FUNCTION};;){var n=this.consumeToken();if(n.type===d.EOF_TOKEN||n.type===d.RIGHT_PARENTHESIS_TOKEN)return e;this.reconsumeToken(n),e.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var t=this._tokens.shift();return void 0===t?Ot:t},t.prototype.reconsumeToken=function(t){this._tokens.unshift(t)},t}(),Mt=function(t){return t.type===d.DIMENSION_TOKEN},Ut=function(t){return t.type===d.NUMBER_TOKEN},Pt=function(t){return t.type===d.IDENT_TOKEN},zt=function(t){return t.type===d.STRING_TOKEN},Qt=function(t,e){return Pt(t)&&t.value===e},Ht=function(t){return t.type!==d.WHITESPACE_TOKEN},$t=function(t){return t.type!==d.WHITESPACE_TOKEN&&t.type!==d.COMMA_TOKEN},Vt=function(t){var e=[],n=[];return t.forEach((function(t){if(t.type===d.COMMA_TOKEN){if(0===n.length)throw new Error("Error parsing function args, zero tokens for arg");return e.push(n),void(n=[])}t.type!==d.WHITESPACE_TOKEN&&n.push(t)})),n.length&&e.push(n),e},qt=function(t,e){return e===d.LEFT_CURLY_BRACKET_TOKEN&&t.type===d.RIGHT_CURLY_BRACKET_TOKEN||e===d.LEFT_SQUARE_BRACKET_TOKEN&&t.type===d.RIGHT_SQUARE_BRACKET_TOKEN||e===d.LEFT_PARENTHESIS_TOKEN&&t.type===d.RIGHT_PARENTHESIS_TOKEN},jt=function(t){return t.type===d.NUMBER_TOKEN||t.type===d.DIMENSION_TOKEN},Kt=function(t){return t.type===d.PERCENTAGE_TOKEN||jt(t)},Wt=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},Gt={type:d.NUMBER_TOKEN,number:0,flags:4},Xt={type:d.PERCENTAGE_TOKEN,number:50,flags:4},Yt={type:d.PERCENTAGE_TOKEN,number:100,flags:4},Jt=function(t,e,n){var r=t[0],i=t[1];return[Zt(r,e),Zt(void 0!==i?i:r,n)]},Zt=function(t,e){if(t.type===d.PERCENTAGE_TOKEN)return t.number/100*e;if(Mt(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},te=function(t){if(t.type===d.DIMENSION_TOKEN)switch(t.unit){case"deg":return Math.PI*t.number/180;case"grad":return Math.PI/200*t.number;case"rad":return t.number;case"turn":return 2*Math.PI*t.number}throw new Error("Unsupported angle type")},ee=function(t){return t.type===d.DIMENSION_TOKEN&&("deg"===t.unit||"grad"===t.unit||"rad"===t.unit||"turn"===t.unit)},ne=function(t){switch(t.filter(Pt).map((function(t){return t.value})).join(" ")){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Gt,Gt];case"to top":case"bottom":return re(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Gt,Yt];case"to right":case"left":return re(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Yt,Yt];case"to bottom":case"top":return re(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Yt,Gt];case"to left":case"right":return re(270)}return 0},re=function(t){return Math.PI*t/180},ie=function(t){if(t.type===d.FUNCTION){var e=fe[t.name];if(void 0===e)throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return e(t.values)}if(t.type===d.HASH_TOKEN){if(3===t.value.length){var n=t.value.substring(0,1),r=t.value.substring(1,2),i=t.value.substring(2,3);return ae(parseInt(n+n,16),parseInt(r+r,16),parseInt(i+i,16),1)}if(4===t.value.length){n=t.value.substring(0,1),r=t.value.substring(1,2),i=t.value.substring(2,3);var s=t.value.substring(3,4);return ae(parseInt(n+n,16),parseInt(r+r,16),parseInt(i+i,16),parseInt(s+s,16)/255)}if(6===t.value.length)return n=t.value.substring(0,2),r=t.value.substring(2,4),i=t.value.substring(4,6),ae(parseInt(n,16),parseInt(r,16),parseInt(i,16),1);if(8===t.value.length)return n=t.value.substring(0,2),r=t.value.substring(2,4),i=t.value.substring(4,6),s=t.value.substring(6,8),ae(parseInt(n,16),parseInt(r,16),parseInt(i,16),parseInt(s,16)/255)}if(t.type===d.IDENT_TOKEN){var o=Ae[t.value.toUpperCase()];if(void 0!==o)return o}return Ae.TRANSPARENT},se=function(t){return 0==(255&t)},oe=function(t){var e=255&t,n=255&t>>8,r=255&t>>16,i=255&t>>24;return e<255?"rgba("+i+","+r+","+n+","+e/255+")":"rgb("+i+","+r+","+n+")"},ae=function(t,e,n,r){return(t<<24|e<<16|n<<8|Math.round(255*r)<<0)>>>0},le=function(t,e){if(t.type===d.NUMBER_TOKEN)return t.number;if(t.type===d.PERCENTAGE_TOKEN){var n=3===e?1:255;return 3===e?t.number/100*n:Math.round(t.number/100*n)}return 0},ue=function(t){var e=t.filter($t);if(3===e.length){var n=e.map(le);return ae(n[0],n[1],n[2],1)}if(4===e.length){var r=e.map(le);return ae(r[0],r[1],r[2],r[3])}return 0};function ce(t,e,n){return n<0&&(n+=1),n>=1&&(n-=1),n<1/6?(e-t)*n*6+t:n<.5?e:n<2/3?6*(e-t)*(2/3-n)+t:t}var he,de,pe=function(t){var e=t.filter($t),n=e[0],r=e[1],i=e[2],s=e[3],o=(n.type===d.NUMBER_TOKEN?re(n.number):te(n))/(2*Math.PI),a=Kt(r)?r.number/100:0,l=Kt(i)?i.number/100:0,u=void 0!==s&&Kt(s)?Zt(s,1):1;if(0===a)return ae(255*l,255*l,255*l,1);var c=l<=.5?l*(a+1):l+a-l*a,h=2*l-c,p=ce(h,c,o+1/3),f=ce(h,c,o),A=ce(h,c,o-1/3);return ae(255*p,255*f,255*A,u)},fe={hsl:pe,hsla:pe,rgb:ue,rgba:ue},Ae={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199};(function(t){t[t.VALUE=0]="VALUE",t[t.LIST=1]="LIST",t[t.IDENT_VALUE=2]="IDENT_VALUE",t[t.TYPE_VALUE=3]="TYPE_VALUE",t[t.TOKEN_VALUE=4]="TOKEN_VALUE"})(he||(he={})),function(t){t[t.BORDER_BOX=0]="BORDER_BOX",t[t.PADDING_BOX=1]="PADDING_BOX",t[t.CONTENT_BOX=2]="CONTENT_BOX"}(de||(de={}));var me,ge,ye,we={name:"background-clip",initialValue:"border-box",prefix:!1,type:he.LIST,parse:function(t){return t.map((function(t){if(Pt(t))switch(t.value){case"padding-box":return de.PADDING_BOX;case"content-box":return de.CONTENT_BOX}return de.BORDER_BOX}))}},be={name:"background-color",initialValue:"transparent",prefix:!1,type:he.TYPE_VALUE,format:"color"},ve=function(t){var e=ie(t[0]),n=t[1];return n&&Kt(n)?{color:e,stop:n}:{color:e,stop:null}},xe=function(t,e){var n=t[0],r=t[t.length-1];null===n.stop&&(n.stop=Gt),null===r.stop&&(r.stop=Yt);for(var i=[],s=0,o=0;o<t.length;o++){var a=t[o].stop;if(null!==a){var l=Zt(a,e);i.push(l>s?l:s),s=l}else i.push(null)}var u=null;for(o=0;o<i.length;o++){var c=i[o];if(null===c)null===u&&(u=o);else if(null!==u){for(var h=o-u,d=(c-i[u-1])/(h+1),p=1;p<=h;p++)i[u+p-1]=d*p;u=null}}return t.map((function(t,n){return{color:t.color,stop:Math.max(Math.min(1,i[n]/e),0)}}))},_e=function(t,e){return Math.sqrt(t*t+e*e)},Ce=function(t,e,n,r,i){return[[0,0],[0,e],[t,0],[t,e]].reduce((function(t,e){var s=_e(n-e[0],r-e[1]);return(i?s<t.optimumDistance:s>t.optimumDistance)?{optimumCorner:e,optimumDistance:s}:t}),{optimumDistance:i?1/0:-1/0,optimumCorner:null}).optimumCorner},Se=function(t){var e=re(180),n=[];return Vt(t).forEach((function(t,r){if(0===r){var i=t[0];if(i.type===d.IDENT_TOKEN&&-1!==["top","left","right","bottom"].indexOf(i.value))return void(e=ne(t));if(ee(i))return void(e=(te(i)+re(270))%re(360))}var s=ve(t);n.push(s)})),{angle:e,stops:n,type:me.LINEAR_GRADIENT}},Ee=function(t){return 0===t[0]&&255===t[1]&&0===t[2]&&255===t[3]},Be=function(t,e,n,r,i){var s="http://www.w3.org/2000/svg",o=document.createElementNS(s,"svg"),a=document.createElementNS(s,"foreignObject");return o.setAttributeNS(null,"width",t.toString()),o.setAttributeNS(null,"height",e.toString()),a.setAttributeNS(null,"width","100%"),a.setAttributeNS(null,"height","100%"),a.setAttributeNS(null,"x",n.toString()),a.setAttributeNS(null,"y",r.toString()),a.setAttributeNS(null,"externalResourcesRequired","true"),o.appendChild(a),a.appendChild(i),o},ke=function(t){return new Promise((function(e,n){var r=new Image;r.onload=function(){return e(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(t))}))},Ne={get SUPPORT_RANGE_BOUNDS(){var t=function(t){if(t.createRange){var e=t.createRange();if(e.getBoundingClientRect){var n=t.createElement("boundtest");n.style.height="123px",n.style.display="block",t.body.appendChild(n),e.selectNode(n);var r=e.getBoundingClientRect(),i=Math.round(r.height);if(t.body.removeChild(n),123===i)return!0}}return!1}(document);return Object.defineProperty(Ne,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=function(t){var e=new Image,n=t.createElement("canvas"),r=n.getContext("2d");if(!r)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(e,0,0),n.toDataURL()}catch(i){return!1}return!0}(document);return Object.defineProperty(Ne,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t="function"==typeof Array.from&&"function"==typeof window.fetch?function(t){var e=t.createElement("canvas");e.width=100,e.height=100;var n=e.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,100,100);var r=new Image,i=e.toDataURL();r.src=i;var s=Be(100,100,0,0,r);return n.fillStyle="red",n.fillRect(0,0,100,100),ke(s).then((function(e){n.drawImage(e,0,0);var r=n.getImageData(0,0,100,100).data;n.fillStyle="red",n.fillRect(0,0,100,100);var s=t.createElement("div");return s.style.backgroundImage="url("+i+")",s.style.height="100px",Ee(r)?ke(Be(100,100,0,0,s)):Promise.reject(!1)})).then((function(t){return n.drawImage(t,0,0),Ee(n.getImageData(0,0,100,100).data)})).catch((function(){return!1}))}(document):Promise.resolve(!1);return Object.defineProperty(Ne,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=void 0!==(new Image).crossOrigin;return Object.defineProperty(Ne,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t="string"==typeof(new XMLHttpRequest).responseType;return Object.defineProperty(Ne,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Ne,"SUPPORT_CORS_XHR",{value:t}),t}},Ie=function(){function t(t){var e=t.enabled;this.id=t.id,this.enabled=e,this.start=Date.now()}return t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.debug?console.debug.apply(console,[this.id,this.getTime()+"ms"].concat(t)):this.info.apply(this,t))},t.prototype.getTime=function(){return Date.now()-this.start},t.create=function(e){t.instances[e.id]=new t(e)},t.destroy=function(e){delete t.instances[e]},t.getInstance=function(e){var n=t.instances[e];if(void 0===n)throw new Error("No logger instance found with id "+e);return n},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.enabled&&"undefined"!=typeof window&&window.console&&"function"==typeof console.info&&console.info.apply(console,[this.id,this.getTime()+"ms"].concat(t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.error?console.error.apply(console,[this.id,this.getTime()+"ms"].concat(t)):this.info.apply(this,t))},t.instances={},t}(),Fe=function(){function t(){}return t.create=function(e,n){return t._caches[e]=new Te(e,n)},t.destroy=function(e){delete t._caches[e]},t.open=function(e){var n=t._caches[e];if(void 0!==n)return n;throw new Error('Cache with key "'+e+'" not found')},t.getOrigin=function(e){var n=t._link;return n?(n.href=e,n.href=n.href,n.protocol+n.hostname+n.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t.getInstance=function(){var e=t._current;if(null===e)throw new Error("No cache instance attached");return e},t.attachInstance=function(e){t._current=e},t.detachInstance=function(){t._current=null},t._caches={},t._origin="about:blank",t._current=null,t}(),Te=function(){function t(t,e){this.id=t,this._options=e,this._cache={}}return t.prototype.addImage=function(t){var e=Promise.resolve();return this.has(t)?e:Pe(t)||Le(t)?(this._cache[t]=this.loadImage(t),e):e},t.prototype.match=function(t){return this._cache[t]},t.prototype.loadImage=function(t){return r(this,void 0,void 0,(function(){var e,n,r,s,o=this;return i(this,(function(i){switch(i.label){case 0:return e=Fe.isSameOrigin(t),n=!Me(t)&&!0===this._options.useCORS&&Ne.SUPPORT_CORS_IMAGES&&!e,r=!Me(t)&&!e&&"string"==typeof this._options.proxy&&Ne.SUPPORT_CORS_XHR&&!n,e||!1!==this._options.allowTaint||Me(t)||r||n?(s=t,r?[4,this.proxy(s)]:[3,2]):[2];case 1:s=i.sent(),i.label=2;case 2:return Ie.getInstance(this.id).debug("Added image "+t.substring(0,256)),[4,new Promise((function(t,e){var r=new Image;r.onload=function(){return t(r)},r.onerror=e,(Ue(s)||n)&&(r.crossOrigin="anonymous"),r.src=s,!0===r.complete&&setTimeout((function(){return t(r)}),500),o._options.imageTimeout>0&&setTimeout((function(){return e("Timed out ("+o._options.imageTimeout+"ms) loading image")}),o._options.imageTimeout)}))];case 3:return[2,i.sent()]}}))}))},t.prototype.has=function(t){return void 0!==this._cache[t]},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(t){var e=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var r=t.substring(0,256);return new Promise((function(i,s){var o=Ne.SUPPORT_RESPONSE_TYPE?"blob":"text",a=new XMLHttpRequest;if(a.onload=function(){if(200===a.status)if("text"===o)i(a.response);else{var t=new FileReader;t.addEventListener("load",(function(){return i(t.result)}),!1),t.addEventListener("error",(function(t){return s(t)}),!1),t.readAsDataURL(a.response)}else s("Failed to proxy resource "+r+" with status code "+a.status)},a.onerror=s,a.open("GET",n+"?url="+encodeURIComponent(t)+"&responseType="+o),"text"!==o&&a instanceof XMLHttpRequest&&(a.responseType=o),e._options.imageTimeout){var l=e._options.imageTimeout;a.timeout=l,a.ontimeout=function(){return s("Timed out ("+l+"ms) proxying "+r)}}a.send()}))},t}(),Re=/^data:image\/svg\+xml/i,Oe=/^data:image\/.*;base64,/i,De=/^data:image\/.*/i,Le=function(t){return Ne.SUPPORT_SVG_DRAWING||!ze(t)},Me=function(t){return De.test(t)},Ue=function(t){return Oe.test(t)},Pe=function(t){return"blob"===t.substr(0,4)},ze=function(t){return"svg"===t.substr(-3).toLowerCase()||Re.test(t)},Qe=function(t){var e=ge.CIRCLE,n=ye.FARTHEST_CORNER,r=[],i=[];return Vt(t).forEach((function(t,s){var o=!0;if(0===s?o=t.reduce((function(t,e){if(Pt(e))switch(e.value){case"center":return i.push(Xt),!1;case"top":case"left":return i.push(Gt),!1;case"right":case"bottom":return i.push(Yt),!1}else if(Kt(e)||jt(e))return i.push(e),!1;return t}),o):1===s&&(o=t.reduce((function(t,r){if(Pt(r))switch(r.value){case"circle":return e=ge.CIRCLE,!1;case"ellipse":return e=ge.ELLIPSE,!1;case"contain":case"closest-side":return n=ye.CLOSEST_SIDE,!1;case"farthest-side":return n=ye.FARTHEST_SIDE,!1;case"closest-corner":return n=ye.CLOSEST_CORNER,!1;case"cover":case"farthest-corner":return n=ye.FARTHEST_CORNER,!1}else if(jt(r)||Kt(r))return Array.isArray(n)||(n=[]),n.push(r),!1;return t}),o)),o){var a=ve(t);r.push(a)}})),{size:n,shape:e,stops:r,position:i,type:me.RADIAL_GRADIENT}};!function(t){t[t.URL=0]="URL",t[t.LINEAR_GRADIENT=1]="LINEAR_GRADIENT",t[t.RADIAL_GRADIENT=2]="RADIAL_GRADIENT"}(me||(me={})),function(t){t[t.CIRCLE=0]="CIRCLE",t[t.ELLIPSE=1]="ELLIPSE"}(ge||(ge={})),function(t){t[t.CLOSEST_SIDE=0]="CLOSEST_SIDE",t[t.FARTHEST_SIDE=1]="FARTHEST_SIDE",t[t.CLOSEST_CORNER=2]="CLOSEST_CORNER",t[t.FARTHEST_CORNER=3]="FARTHEST_CORNER"}(ye||(ye={}));var He,$e=function(t){if(t.type===d.URL_TOKEN){var e={url:t.value,type:me.URL};return Fe.getInstance().addImage(t.value),e}if(t.type===d.FUNCTION){var n=Ve[t.name];if(void 0===n)throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return n(t.values)}throw new Error("Unsupported image type")},Ve={"linear-gradient":function(t){var e=re(180),n=[];return Vt(t).forEach((function(t,r){if(0===r){var i=t[0];if(i.type===d.IDENT_TOKEN&&"to"===i.value)return void(e=ne(t));if(ee(i))return void(e=te(i))}var s=ve(t);n.push(s)})),{angle:e,stops:n,type:me.LINEAR_GRADIENT}},"-moz-linear-gradient":Se,"-ms-linear-gradient":Se,"-o-linear-gradient":Se,"-webkit-linear-gradient":Se,"radial-gradient":function(t){var e=ge.CIRCLE,n=ye.FARTHEST_CORNER,r=[],i=[];return Vt(t).forEach((function(t,s){var o=!0;if(0===s){var a=!1;o=t.reduce((function(t,r){if(a)if(Pt(r))switch(r.value){case"center":return i.push(Xt),t;case"top":case"left":return i.push(Gt),t;case"right":case"bottom":return i.push(Yt),t}else(Kt(r)||jt(r))&&i.push(r);else if(Pt(r))switch(r.value){case"circle":return e=ge.CIRCLE,!1;case"ellipse":return e=ge.ELLIPSE,!1;case"at":return a=!0,!1;case"closest-side":return n=ye.CLOSEST_SIDE,!1;case"cover":case"farthest-side":return n=ye.FARTHEST_SIDE,!1;case"contain":case"closest-corner":return n=ye.CLOSEST_CORNER,!1;case"farthest-corner":return n=ye.FARTHEST_CORNER,!1}else if(jt(r)||Kt(r))return Array.isArray(n)||(n=[]),n.push(r),!1;return t}),o)}if(o){var l=ve(t);r.push(l)}})),{size:n,shape:e,stops:r,position:i,type:me.RADIAL_GRADIENT}},"-moz-radial-gradient":Qe,"-ms-radial-gradient":Qe,"-o-radial-gradient":Qe,"-webkit-radial-gradient":Qe,"-webkit-gradient":function(t){var e=re(180),n=[],r=me.LINEAR_GRADIENT,i=ge.CIRCLE,s=ye.FARTHEST_CORNER;return Vt(t).forEach((function(t,e){var i=t[0];if(0===e){if(Pt(i)&&"linear"===i.value)return void(r=me.LINEAR_GRADIENT);if(Pt(i)&&"radial"===i.value)return void(r=me.RADIAL_GRADIENT)}if(i.type===d.FUNCTION)if("from"===i.name){var s=ie(i.values[0]);n.push({stop:Gt,color:s})}else if("to"===i.name)s=ie(i.values[0]),n.push({stop:Yt,color:s});else if("color-stop"===i.name){var o=i.values.filter($t);if(2===o.length){s=ie(o[1]);var a=o[0];Ut(a)&&n.push({stop:{type:d.PERCENTAGE_TOKEN,number:100*a.number,flags:a.flags},color:s})}}})),r===me.LINEAR_GRADIENT?{angle:(e+re(180))%re(360),stops:n,type:r}:{size:s,shape:i,stops:n,position:[],type:r}}},qe={name:"background-image",initialValue:"none",type:he.LIST,prefix:!1,parse:function(t){if(0===t.length)return[];var e=t[0];return e.type===d.IDENT_TOKEN&&"none"===e.value?[]:t.filter((function(t){return $t(t)&&function(t){return t.type!==d.FUNCTION||Ve[t.name]}(t)})).map($e)}},je={name:"background-origin",initialValue:"border-box",prefix:!1,type:he.LIST,parse:function(t){return t.map((function(t){if(Pt(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0}))}},Ke={name:"background-position",initialValue:"0% 0%",type:he.LIST,prefix:!1,parse:function(t){return Vt(t).map((function(t){return t.filter(Kt)})).map(Wt)}};!function(t){t[t.REPEAT=0]="REPEAT",t[t.NO_REPEAT=1]="NO_REPEAT",t[t.REPEAT_X=2]="REPEAT_X",t[t.REPEAT_Y=3]="REPEAT_Y"}(He||(He={}));var We,Ge={name:"background-repeat",initialValue:"repeat",prefix:!1,type:he.LIST,parse:function(t){return Vt(t).map((function(t){return t.filter(Pt).map((function(t){return t.value})).join(" ")})).map(Xe)}},Xe=function(t){switch(t){case"no-repeat":return He.NO_REPEAT;case"repeat-x":case"repeat no-repeat":return He.REPEAT_X;case"repeat-y":case"no-repeat repeat":return He.REPEAT_Y;case"repeat":default:return He.REPEAT}};!function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"}(We||(We={}));var Ye,Je={name:"background-size",initialValue:"0",prefix:!1,type:he.LIST,parse:function(t){return Vt(t).map((function(t){return t.filter(Ze)}))}},Ze=function(t){return Pt(t)||Kt(t)},tn=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:he.TYPE_VALUE,format:"color"}},en=tn("top"),nn=tn("right"),rn=tn("bottom"),sn=tn("left"),on=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:he.LIST,parse:function(t){return Wt(t.filter(Kt))}}},an=on("top-left"),ln=on("top-right"),un=on("bottom-right"),cn=on("bottom-left");!function(t){t[t.NONE=0]="NONE",t[t.SOLID=1]="SOLID"}(Ye||(Ye={}));var hn,dn=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:he.IDENT_VALUE,parse:function(t){switch(t){case"none":return Ye.NONE}return Ye.SOLID}}},pn=dn("top"),fn=dn("right"),An=dn("bottom"),mn=dn("left"),gn=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:he.VALUE,prefix:!1,parse:function(t){return Mt(t)?t.number:0}}},yn=gn("top"),wn=gn("right"),bn=gn("bottom"),vn=gn("left"),xn={name:"color",initialValue:"transparent",prefix:!1,type:he.TYPE_VALUE,format:"color"},_n={name:"display",initialValue:"inline-block",prefix:!1,type:he.LIST,parse:function(t){return t.filter(Pt).reduce((function(t,e){return t|Cn(e.value)}),0)}},Cn=function(t){switch(t){case"block":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0};!function(t){t[t.NONE=0]="NONE",t[t.LEFT=1]="LEFT",t[t.RIGHT=2]="RIGHT",t[t.INLINE_START=3]="INLINE_START",t[t.INLINE_END=4]="INLINE_END"}(hn||(hn={}));var Sn,En={name:"float",initialValue:"none",prefix:!1,type:he.IDENT_VALUE,parse:function(t){switch(t){case"left":return hn.LEFT;case"right":return hn.RIGHT;case"inline-start":return hn.INLINE_START;case"inline-end":return hn.INLINE_END}return hn.NONE}},Bn={name:"letter-spacing",initialValue:"0",prefix:!1,type:he.VALUE,parse:function(t){return t.type===d.IDENT_TOKEN&&"normal"===t.value?0:t.type===d.NUMBER_TOKEN||t.type===d.DIMENSION_TOKEN?t.number:0}};!function(t){t.NORMAL="normal",t.STRICT="strict"}(Sn||(Sn={}));var kn,Nn={name:"line-break",initialValue:"normal",prefix:!1,type:he.IDENT_VALUE,parse:function(t){switch(t){case"strict":return Sn.STRICT;case"normal":default:return Sn.NORMAL}}},In={name:"line-height",initialValue:"normal",prefix:!1,type:he.TOKEN_VALUE},Fn={name:"list-style-image",initialValue:"none",type:he.VALUE,prefix:!1,parse:function(t){return t.type===d.IDENT_TOKEN&&"none"===t.value?null:$e(t)}};!function(t){t[t.INSIDE=0]="INSIDE",t[t.OUTSIDE=1]="OUTSIDE"}(kn||(kn={}));var Tn,Rn={name:"list-style-position",initialValue:"outside",prefix:!1,type:he.IDENT_VALUE,parse:function(t){switch(t){case"inside":return kn.INSIDE;case"outside":default:return kn.OUTSIDE}}};!function(t){t[t.NONE=-1]="NONE",t[t.DISC=0]="DISC",t[t.CIRCLE=1]="CIRCLE",t[t.SQUARE=2]="SQUARE",t[t.DECIMAL=3]="DECIMAL",t[t.CJK_DECIMAL=4]="CJK_DECIMAL",t[t.DECIMAL_LEADING_ZERO=5]="DECIMAL_LEADING_ZERO",t[t.LOWER_ROMAN=6]="LOWER_ROMAN",t[t.UPPER_ROMAN=7]="UPPER_ROMAN",t[t.LOWER_GREEK=8]="LOWER_GREEK",t[t.LOWER_ALPHA=9]="LOWER_ALPHA",t[t.UPPER_ALPHA=10]="UPPER_ALPHA",t[t.ARABIC_INDIC=11]="ARABIC_INDIC",t[t.ARMENIAN=12]="ARMENIAN",t[t.BENGALI=13]="BENGALI",t[t.CAMBODIAN=14]="CAMBODIAN",t[t.CJK_EARTHLY_BRANCH=15]="CJK_EARTHLY_BRANCH",t[t.CJK_HEAVENLY_STEM=16]="CJK_HEAVENLY_STEM",t[t.CJK_IDEOGRAPHIC=17]="CJK_IDEOGRAPHIC",t[t.DEVANAGARI=18]="DEVANAGARI",t[t.ETHIOPIC_NUMERIC=19]="ETHIOPIC_NUMERIC",t[t.GEORGIAN=20]="GEORGIAN",t[t.GUJARATI=21]="GUJARATI",t[t.GURMUKHI=22]="GURMUKHI",t[t.HEBREW=22]="HEBREW",t[t.HIRAGANA=23]="HIRAGANA",t[t.HIRAGANA_IROHA=24]="HIRAGANA_IROHA",t[t.JAPANESE_FORMAL=25]="JAPANESE_FORMAL",t[t.JAPANESE_INFORMAL=26]="JAPANESE_INFORMAL",t[t.KANNADA=27]="KANNADA",t[t.KATAKANA=28]="KATAKANA",t[t.KATAKANA_IROHA=29]="KATAKANA_IROHA",t[t.KHMER=30]="KHMER",t[t.KOREAN_HANGUL_FORMAL=31]="KOREAN_HANGUL_FORMAL",t[t.KOREAN_HANJA_FORMAL=32]="KOREAN_HANJA_FORMAL",t[t.KOREAN_HANJA_INFORMAL=33]="KOREAN_HANJA_INFORMAL",t[t.LAO=34]="LAO",t[t.LOWER_ARMENIAN=35]="LOWER_ARMENIAN",t[t.MALAYALAM=36]="MALAYALAM",t[t.MONGOLIAN=37]="MONGOLIAN",t[t.MYANMAR=38]="MYANMAR",t[t.ORIYA=39]="ORIYA",t[t.PERSIAN=40]="PERSIAN",t[t.SIMP_CHINESE_FORMAL=41]="SIMP_CHINESE_FORMAL",t[t.SIMP_CHINESE_INFORMAL=42]="SIMP_CHINESE_INFORMAL",t[t.TAMIL=43]="TAMIL",t[t.TELUGU=44]="TELUGU",t[t.THAI=45]="THAI",t[t.TIBETAN=46]="TIBETAN",t[t.TRAD_CHINESE_FORMAL=47]="TRAD_CHINESE_FORMAL",t[t.TRAD_CHINESE_INFORMAL=48]="TRAD_CHINESE_INFORMAL",t[t.UPPER_ARMENIAN=49]="UPPER_ARMENIAN",t[t.DISCLOSURE_OPEN=50]="DISCLOSURE_OPEN",t[t.DISCLOSURE_CLOSED=51]="DISCLOSURE_CLOSED"}(Tn||(Tn={}));var On,Dn={name:"list-style-type",initialValue:"none",prefix:!1,type:he.IDENT_VALUE,parse:function(t){switch(t){case"disc":return Tn.DISC;case"circle":return Tn.CIRCLE;case"square":return Tn.SQUARE;case"decimal":return Tn.DECIMAL;case"cjk-decimal":return Tn.CJK_DECIMAL;case"decimal-leading-zero":return Tn.DECIMAL_LEADING_ZERO;case"lower-roman":return Tn.LOWER_ROMAN;case"upper-roman":return Tn.UPPER_ROMAN;case"lower-greek":return Tn.LOWER_GREEK;case"lower-alpha":return Tn.LOWER_ALPHA;case"upper-alpha":return Tn.UPPER_ALPHA;case"arabic-indic":return Tn.ARABIC_INDIC;case"armenian":return Tn.ARMENIAN;case"bengali":return Tn.BENGALI;case"cambodian":return Tn.CAMBODIAN;case"cjk-earthly-branch":return Tn.CJK_EARTHLY_BRANCH;case"cjk-heavenly-stem":return Tn.CJK_HEAVENLY_STEM;case"cjk-ideographic":return Tn.CJK_IDEOGRAPHIC;case"devanagari":return Tn.DEVANAGARI;case"ethiopic-numeric":return Tn.ETHIOPIC_NUMERIC;case"georgian":return Tn.GEORGIAN;case"gujarati":return Tn.GUJARATI;case"gurmukhi":return Tn.GURMUKHI;case"hebrew":return Tn.HEBREW;case"hiragana":return Tn.HIRAGANA;case"hiragana-iroha":return Tn.HIRAGANA_IROHA;case"japanese-formal":return Tn.JAPANESE_FORMAL;case"japanese-informal":return Tn.JAPANESE_INFORMAL;case"kannada":return Tn.KANNADA;case"katakana":return Tn.KATAKANA;case"katakana-iroha":return Tn.KATAKANA_IROHA;case"khmer":return Tn.KHMER;case"korean-hangul-formal":return Tn.KOREAN_HANGUL_FORMAL;case"korean-hanja-formal":return Tn.KOREAN_HANJA_FORMAL;case"korean-hanja-informal":return Tn.KOREAN_HANJA_INFORMAL;case"lao":return Tn.LAO;case"lower-armenian":return Tn.LOWER_ARMENIAN;case"malayalam":return Tn.MALAYALAM;case"mongolian":return Tn.MONGOLIAN;case"myanmar":return Tn.MYANMAR;case"oriya":return Tn.ORIYA;case"persian":return Tn.PERSIAN;case"simp-chinese-formal":return Tn.SIMP_CHINESE_FORMAL;case"simp-chinese-informal":return Tn.SIMP_CHINESE_INFORMAL;case"tamil":return Tn.TAMIL;case"telugu":return Tn.TELUGU;case"thai":return Tn.THAI;case"tibetan":return Tn.TIBETAN;case"trad-chinese-formal":return Tn.TRAD_CHINESE_FORMAL;case"trad-chinese-informal":return Tn.TRAD_CHINESE_INFORMAL;case"upper-armenian":return Tn.UPPER_ARMENIAN;case"disclosure-open":return Tn.DISCLOSURE_OPEN;case"disclosure-closed":return Tn.DISCLOSURE_CLOSED;case"none":default:return Tn.NONE}}},Ln=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:he.TOKEN_VALUE}},Mn=Ln("top"),Un=Ln("right"),Pn=Ln("bottom"),zn=Ln("left");!function(t){t[t.VISIBLE=0]="VISIBLE",t[t.HIDDEN=1]="HIDDEN",t[t.SCROLL=2]="SCROLL",t[t.AUTO=3]="AUTO"}(On||(On={}));var Qn,Hn={name:"overflow",initialValue:"visible",prefix:!1,type:he.LIST,parse:function(t){return t.filter(Pt).map((function(t){switch(t.value){case"hidden":return On.HIDDEN;case"scroll":return On.SCROLL;case"auto":return On.AUTO;case"visible":default:return On.VISIBLE}}))}};!function(t){t.NORMAL="normal",t.BREAK_WORD="break-word"}(Qn||(Qn={}));var $n,Vn={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:he.IDENT_VALUE,parse:function(t){switch(t){case"break-word":return Qn.BREAK_WORD;case"normal":default:return Qn.NORMAL}}},qn=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:he.TYPE_VALUE,format:"length-percentage"}},jn=qn("top"),Kn=qn("right"),Wn=qn("bottom"),Gn=qn("left");!function(t){t[t.LEFT=0]="LEFT",t[t.CENTER=1]="CENTER",t[t.RIGHT=2]="RIGHT"}($n||($n={}));var Xn,Yn={name:"text-align",initialValue:"left",prefix:!1,type:he.IDENT_VALUE,parse:function(t){switch(t){case"right":return $n.RIGHT;case"center":case"justify":return $n.CENTER;case"left":default:return $n.LEFT}}};!function(t){t[t.STATIC=0]="STATIC",t[t.RELATIVE=1]="RELATIVE",t[t.ABSOLUTE=2]="ABSOLUTE",t[t.FIXED=3]="FIXED",t[t.STICKY=4]="STICKY"}(Xn||(Xn={}));var Jn,Zn={name:"position",initialValue:"static",prefix:!1,type:he.IDENT_VALUE,parse:function(t){switch(t){case"relative":return Xn.RELATIVE;case"absolute":return Xn.ABSOLUTE;case"fixed":return Xn.FIXED;case"sticky":return Xn.STICKY}return Xn.STATIC}},tr={name:"text-shadow",initialValue:"none",type:he.LIST,prefix:!1,parse:function(t){return 1===t.length&&Qt(t[0],"none")?[]:Vt(t).map((function(t){for(var e={color:Ae.TRANSPARENT,offsetX:Gt,offsetY:Gt,blur:Gt},n=0,r=0;r<t.length;r++){var i=t[r];jt(i)?(0===n?e.offsetX=i:1===n?e.offsetY=i:e.blur=i,n++):e.color=ie(i)}return e}))}};!function(t){t[t.NONE=0]="NONE",t[t.LOWERCASE=1]="LOWERCASE",t[t.UPPERCASE=2]="UPPERCASE",t[t.CAPITALIZE=3]="CAPITALIZE"}(Jn||(Jn={}));var er,nr={name:"text-transform",initialValue:"none",prefix:!1,type:he.IDENT_VALUE,parse:function(t){switch(t){case"uppercase":return Jn.UPPERCASE;case"lowercase":return Jn.LOWERCASE;case"capitalize":return Jn.CAPITALIZE}return Jn.NONE}},rr={name:"transform",initialValue:"none",prefix:!0,type:he.VALUE,parse:function(t){if(t.type===d.IDENT_TOKEN&&"none"===t.value)return null;if(t.type===d.FUNCTION){var e=ir[t.name];if(void 0===e)throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return e(t.values)}return null}},ir={matrix:function(t){var e=t.filter((function(t){return t.type===d.NUMBER_TOKEN})).map((function(t){return t.number}));return 6===e.length?e:null},matrix3d:function(t){var e=t.filter((function(t){return t.type===d.NUMBER_TOKEN})).map((function(t){return t.number}));return 16===e.length?[e[0],e[1],e[4],e[5],e[12],e[13]]:null}},sr={type:d.PERCENTAGE_TOKEN,number:50,flags:4},or=[sr,sr],ar={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:he.LIST,parse:function(t){var e=t.filter(Kt);return 2!==e.length?or:[e[0],e[1]]}};!function(t){t[t.VISIBLE=0]="VISIBLE",t[t.HIDDEN=1]="HIDDEN",t[t.COLLAPSE=2]="COLLAPSE"}(er||(er={}));var lr,ur={name:"visible",initialValue:"none",prefix:!1,type:he.IDENT_VALUE,parse:function(t){switch(t){case"hidden":return er.HIDDEN;case"collapse":return er.COLLAPSE;case"visible":default:return er.VISIBLE}}};!function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"}(lr||(lr={}));var cr,hr={name:"word-break",initialValue:"normal",prefix:!1,type:he.IDENT_VALUE,parse:function(t){switch(t){case"break-all":return lr.BREAK_ALL;case"keep-all":return lr.KEEP_ALL;case"normal":default:return lr.NORMAL}}},dr={name:"z-index",initialValue:"auto",prefix:!1,type:he.VALUE,parse:function(t){if(t.type===d.IDENT_TOKEN)return{auto:!0,order:0};if(Ut(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},pr={name:"opacity",initialValue:"1",type:he.VALUE,prefix:!1,parse:function(t){return Ut(t)?t.number:1}},fr={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:he.TYPE_VALUE,format:"color"},Ar={name:"text-decoration-line",initialValue:"none",prefix:!1,type:he.LIST,parse:function(t){return t.filter(Pt).map((function(t){switch(t.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0})).filter((function(t){return 0!==t}))}},mr={name:"font-family",initialValue:"",prefix:!1,type:he.LIST,parse:function(t){return t.filter(gr).map((function(t){return t.value}))}},gr=function(t){return t.type===d.STRING_TOKEN||t.type===d.IDENT_TOKEN},yr={name:"font-size",initialValue:"0",prefix:!1,type:he.TYPE_VALUE,format:"length"},wr={name:"font-weight",initialValue:"normal",type:he.VALUE,prefix:!1,parse:function(t){if(Ut(t))return t.number;if(Pt(t))switch(t.value){case"bold":return 700;case"normal":default:return 400}return 400}},br={name:"font-variant",initialValue:"none",type:he.LIST,prefix:!1,parse:function(t){return t.filter(Pt).map((function(t){return t.value}))}};!function(t){t.NORMAL="normal",t.ITALIC="italic",t.OBLIQUE="oblique"}(cr||(cr={}));var vr,xr={name:"font-style",initialValue:"normal",prefix:!1,type:he.IDENT_VALUE,parse:function(t){switch(t){case"oblique":return cr.OBLIQUE;case"italic":return cr.ITALIC;case"normal":default:return cr.NORMAL}}},_r=function(t,e){return 0!=(t&e)},Cr={name:"content",initialValue:"none",type:he.LIST,prefix:!1,parse:function(t){if(0===t.length)return[];var e=t[0];return e.type===d.IDENT_TOKEN&&"none"===e.value?[]:t}},Sr={name:"counter-increment",initialValue:"none",prefix:!0,type:he.LIST,parse:function(t){if(0===t.length)return null;var e=t[0];if(e.type===d.IDENT_TOKEN&&"none"===e.value)return null;for(var n=[],r=t.filter(Ht),i=0;i<r.length;i++){var s=r[i],o=r[i+1];if(s.type===d.IDENT_TOKEN){var a=o&&Ut(o)?o.number:1;n.push({counter:s.value,increment:a})}}return n}},Er={name:"counter-reset",initialValue:"none",prefix:!0,type:he.LIST,parse:function(t){if(0===t.length)return[];for(var e=[],n=t.filter(Ht),r=0;r<n.length;r++){var i=n[r],s=n[r+1];if(Pt(i)&&"none"!==i.value){var o=s&&Ut(s)?s.number:0;e.push({counter:i.value,reset:o})}}return e}},Br={name:"quotes",initialValue:"none",prefix:!0,type:he.LIST,parse:function(t){if(0===t.length)return null;var e=t[0];if(e.type===d.IDENT_TOKEN&&"none"===e.value)return null;var n=[],r=t.filter(zt);if(r.length%2!=0)return null;for(var i=0;i<r.length;i+=2)n.push({open:r[i].value,close:r[i+1].value});return n}},kr=function(t,e,n){if(!t)return"";var r=t[Math.min(e,t.length-1)];return r?n?r.open:r.close:""},Nr={name:"box-shadow",initialValue:"none",type:he.LIST,prefix:!1,parse:function(t){return 1===t.length&&Qt(t[0],"none")?[]:Vt(t).map((function(t){for(var e={color:255,offsetX:Gt,offsetY:Gt,blur:Gt,spread:Gt,inset:!1},n=0,r=0;r<t.length;r++){var i=t[r];Qt(i,"inset")?e.inset=!0:jt(i)?(0===n?e.offsetX=i:1===n?e.offsetY=i:2===n?e.blur=i:e.spread=i,n++):e.color=ie(i)}return e}))}},Ir=function(){function t(t){this.backgroundClip=Rr(we,t.backgroundClip),this.backgroundColor=Rr(be,t.backgroundColor),this.backgroundImage=Rr(qe,t.backgroundImage),this.backgroundOrigin=Rr(je,t.backgroundOrigin),this.backgroundPosition=Rr(Ke,t.backgroundPosition),this.backgroundRepeat=Rr(Ge,t.backgroundRepeat),this.backgroundSize=Rr(Je,t.backgroundSize),this.borderTopColor=Rr(en,t.borderTopColor),this.borderRightColor=Rr(nn,t.borderRightColor),this.borderBottomColor=Rr(rn,t.borderBottomColor),this.borderLeftColor=Rr(sn,t.borderLeftColor),this.borderTopLeftRadius=Rr(an,t.borderTopLeftRadius),this.borderTopRightRadius=Rr(ln,t.borderTopRightRadius),this.borderBottomRightRadius=Rr(un,t.borderBottomRightRadius),this.borderBottomLeftRadius=Rr(cn,t.borderBottomLeftRadius),this.borderTopStyle=Rr(pn,t.borderTopStyle),this.borderRightStyle=Rr(fn,t.borderRightStyle),this.borderBottomStyle=Rr(An,t.borderBottomStyle),this.borderLeftStyle=Rr(mn,t.borderLeftStyle),this.borderTopWidth=Rr(yn,t.borderTopWidth),this.borderRightWidth=Rr(wn,t.borderRightWidth),this.borderBottomWidth=Rr(bn,t.borderBottomWidth),this.borderLeftWidth=Rr(vn,t.borderLeftWidth),this.boxShadow=Rr(Nr,t.boxShadow),this.color=Rr(xn,t.color),this.display=Rr(_n,t.display),this.float=Rr(En,t.cssFloat),this.fontFamily=Rr(mr,t.fontFamily),this.fontSize=Rr(yr,t.fontSize),this.fontStyle=Rr(xr,t.fontStyle),this.fontVariant=Rr(br,t.fontVariant),this.fontWeight=Rr(wr,t.fontWeight),this.letterSpacing=Rr(Bn,t.letterSpacing),this.lineBreak=Rr(Nn,t.lineBreak),this.lineHeight=Rr(In,t.lineHeight),this.listStyleImage=Rr(Fn,t.listStyleImage),this.listStylePosition=Rr(Rn,t.listStylePosition),this.listStyleType=Rr(Dn,t.listStyleType),this.marginTop=Rr(Mn,t.marginTop),this.marginRight=Rr(Un,t.marginRight),this.marginBottom=Rr(Pn,t.marginBottom),this.marginLeft=Rr(zn,t.marginLeft),this.opacity=Rr(pr,t.opacity);var e=Rr(Hn,t.overflow);this.overflowX=e[0],this.overflowY=e[e.length>1?1:0],this.overflowWrap=Rr(Vn,t.overflowWrap),this.paddingTop=Rr(jn,t.paddingTop),this.paddingRight=Rr(Kn,t.paddingRight),this.paddingBottom=Rr(Wn,t.paddingBottom),this.paddingLeft=Rr(Gn,t.paddingLeft),this.position=Rr(Zn,t.position),this.textAlign=Rr(Yn,t.textAlign),this.textDecorationColor=Rr(fr,t.textDecorationColor||t.color),this.textDecorationLine=Rr(Ar,t.textDecorationLine),this.textShadow=Rr(tr,t.textShadow),this.textTransform=Rr(nr,t.textTransform),this.transform=Rr(rr,t.transform),this.transformOrigin=Rr(ar,t.transformOrigin),this.visibility=Rr(ur,t.visibility),this.wordBreak=Rr(hr,t.wordBreak),this.zIndex=Rr(dr,t.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===er.VISIBLE},t.prototype.isTransparent=function(){return se(this.backgroundColor)},t.prototype.isTransformed=function(){return null!==this.transform},t.prototype.isPositioned=function(){return this.position!==Xn.STATIC},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==hn.NONE},t.prototype.isInlineLevel=function(){return _r(this.display,4)||_r(this.display,33554432)||_r(this.display,268435456)||_r(this.display,536870912)||_r(this.display,67108864)||_r(this.display,134217728)},t}(),Fr=function(t){this.content=Rr(Cr,t.content),this.quotes=Rr(Br,t.quotes)},Tr=function(t){this.counterIncrement=Rr(Sr,t.counterIncrement),this.counterReset=Rr(Er,t.counterReset)},Rr=function(t,e){var n=new Dt,r=null!=e?e.toString():t.initialValue;n.write(r);var i=new Lt(n.read());switch(t.type){case he.IDENT_VALUE:var s=i.parseComponentValue();return t.parse(Pt(s)?s.value:t.initialValue);case he.VALUE:return t.parse(i.parseComponentValue());case he.LIST:return t.parse(i.parseComponentValues());case he.TOKEN_VALUE:return i.parseComponentValue();case he.TYPE_VALUE:switch(t.format){case"angle":return te(i.parseComponentValue());case"color":return ie(i.parseComponentValue());case"image":return $e(i.parseComponentValue());case"length":var o=i.parseComponentValue();return jt(o)?o:Gt;case"length-percentage":var a=i.parseComponentValue();return Kt(a)?a:Gt}}throw new Error("Attempting to parse unsupported css format type "+t.format)},Or=function(t){this.styles=new Ir(window.getComputedStyle(t,null)),this.textNodes=[],this.elements=[],null!==this.styles.transform&&oi(t)&&(t.style.transform="none"),this.bounds=o(t),this.flags=0},Dr=function(t,e){this.text=t,this.bounds=e},Lr=function(t,e){this.text=Mr(t.data,e.textTransform),this.textBounds=function(t,e,n){var r=function(t,e){return 0!==e.letterSpacing?a(t).map((function(t){return l(t)})):function(t,e){for(var n,r=function(t,e){var n=a(t),r=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var n=function(t,e){void 0===e&&(e="strict");var n=[],r=[],i=[];return t.forEach((function(t,s){var o=j.get(t);if(o>50?(i.push(!0),o-=50):i.push(!1),-1!==["normal","auto","loose"].indexOf(e)&&-1!==[8208,8211,12316,12448].indexOf(t))return r.push(s),n.push(16);if(4===o||11===o){if(0===s)return r.push(s),n.push(L);var a=n[s-1];return-1===Y.indexOf(a)?(r.push(r[s-1]),n.push(a)):(r.push(s),n.push(L))}return r.push(s),31===o?n.push("strict"===e?N:Q):o===q||29===o?n.push(L):43===o?n.push(t>=131072&&t<=196605||t>=196608&&t<=262141?Q:L):void n.push(o)})),[r,n,i]}(t,e.lineBreak),r=n[0],i=n[1],s=n[2];return"break-all"!==e.wordBreak&&"break-word"!==e.wordBreak||(i=i.map((function(t){return-1!==[T,L,q].indexOf(t)?Q:t}))),[r,i,"keep-all"===e.wordBreak?s.map((function(e,n){return e&&t[n]>=19968&&t[n]<=40959})):void 0]}(n,e),i=r[0],s=r[1],o=r[2],l=n.length,u=0,c=0;return{next:function(){if(c>=l)return{done:!0,value:null};for(var t="\xd7";c<l&&"\xd7"===(t=nt(n,s,i,++c,o)););if("\xd7"!==t||c===l){var e=new rt(n,t,u,c);return u=c,{value:e,done:!1}}return{done:!0,value:null}}}}(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap===Qn.BREAK_WORD?"break-word":e.wordBreak}),i=[];!(n=r.next()).done;)n.value&&i.push(n.value.slice());return i}(t,e)}(t,e),i=[],u=0;return r.forEach((function(t){if(e.textDecorationLine.length||t.trim().length>0)if(Ne.SUPPORT_RANGE_BOUNDS)i.push(new Dr(t,function(t,e,n){var r=t.ownerDocument;if(!r)throw new Error("Node has no owner document");var i=r.createRange();return i.setStart(t,e),i.setEnd(t,e+n),s.fromClientRect(i.getBoundingClientRect())}(n,u,t.length)));else{var r=n.splitText(t.length);i.push(new Dr(t,function(t){var e=t.ownerDocument;if(e){var n=e.createElement("html2canvaswrapper");n.appendChild(t.cloneNode(!0));var r=t.parentNode;if(r){r.replaceChild(n,t);var i=o(n);return n.firstChild&&r.replaceChild(n.firstChild,n),i}}return new s(0,0,0,0)}(n))),n=r}else Ne.SUPPORT_RANGE_BOUNDS||(n=n.splitText(t.length));u+=t.length})),i}(this.text,e,t)},Mr=function(t,e){switch(e){case Jn.LOWERCASE:return t.toLowerCase();case Jn.CAPITALIZE:return t.replace(Ur,Pr);case Jn.UPPERCASE:return t.toUpperCase();default:return t}},Ur=/(^|\s|:|-|\(|\))([a-z])/g,Pr=function(t,e,n){return t.length>0?e+n.toUpperCase():t},zr=function(t){function n(e){var n=t.call(this,e)||this;return n.src=e.currentSrc||e.src,n.intrinsicWidth=e.naturalWidth,n.intrinsicHeight=e.naturalHeight,Fe.getInstance().addImage(n.src),n}return e(n,t),n}(Or),Qr=function(t){function n(e){var n=t.call(this,e)||this;return n.canvas=e,n.intrinsicWidth=e.width,n.intrinsicHeight=e.height,n}return e(n,t),n}(Or),Hr=function(t){function n(e){var n=t.call(this,e)||this,r=new XMLSerializer;return n.svg="data:image/svg+xml,"+encodeURIComponent(r.serializeToString(e)),n.intrinsicWidth=e.width.baseVal.value,n.intrinsicHeight=e.height.baseVal.value,Fe.getInstance().addImage(n.svg),n}return e(n,t),n}(Or),$r=function(t){function n(e){var n=t.call(this,e)||this;return n.value=e.value,n}return e(n,t),n}(Or),Vr=function(t){function n(e){var n=t.call(this,e)||this;return n.start=e.start,n.reversed="boolean"==typeof e.reversed&&!0===e.reversed,n}return e(n,t),n}(Or),qr=[{type:d.DIMENSION_TOKEN,flags:0,unit:"px",number:3}],jr=[{type:d.PERCENTAGE_TOKEN,flags:0,number:50}],Kr=function(t){function n(e){var n,r,i,o=t.call(this,e)||this;switch(o.type=e.type.toLowerCase(),o.checked=e.checked,o.value=0===(r="password"===(n=e).type?new Array(n.value.length+1).join("\u2022"):n.value).length?n.placeholder||"":r,"checkbox"!==o.type&&"radio"!==o.type||(o.styles.backgroundColor=3739148031,o.styles.borderTopColor=o.styles.borderRightColor=o.styles.borderBottomColor=o.styles.borderLeftColor=2779096575,o.styles.borderTopWidth=o.styles.borderRightWidth=o.styles.borderBottomWidth=o.styles.borderLeftWidth=1,o.styles.borderTopStyle=o.styles.borderRightStyle=o.styles.borderBottomStyle=o.styles.borderLeftStyle=Ye.SOLID,o.styles.backgroundClip=[de.BORDER_BOX],o.styles.backgroundOrigin=[0],o.bounds=(i=o.bounds).width>i.height?new s(i.left+(i.width-i.height)/2,i.top,i.height,i.height):i.width<i.height?new s(i.left,i.top+(i.height-i.width)/2,i.width,i.width):i),o.type){case"checkbox":o.styles.borderTopRightRadius=o.styles.borderTopLeftRadius=o.styles.borderBottomRightRadius=o.styles.borderBottomLeftRadius=qr;break;case"radio":o.styles.borderTopRightRadius=o.styles.borderTopLeftRadius=o.styles.borderBottomRightRadius=o.styles.borderBottomLeftRadius=jr}return o}return e(n,t),n}(Or),Wr=function(t){function n(e){var n=t.call(this,e)||this,r=e.options[e.selectedIndex||0];return n.value=r&&r.text||"",n}return e(n,t),n}(Or),Gr=function(t){function n(e){var n=t.call(this,e)||this;return n.value=e.value,n}return e(n,t),n}(Or),Xr=function(t){return ie(Lt.create(t).parseComponentValue())},Yr=function(t){function n(e){var n=t.call(this,e)||this;n.src=e.src,n.width=parseInt(e.width,10)||0,n.height=parseInt(e.height,10)||0,n.backgroundColor=n.styles.backgroundColor;try{if(e.contentWindow&&e.contentWindow.document&&e.contentWindow.document.documentElement){n.tree=ei(e.contentWindow.document.documentElement);var r=e.contentWindow.document.documentElement?Xr(getComputedStyle(e.contentWindow.document.documentElement).backgroundColor):Ae.TRANSPARENT,i=e.contentWindow.document.body?Xr(getComputedStyle(e.contentWindow.document.body).backgroundColor):Ae.TRANSPARENT;n.backgroundColor=se(r)?se(i)?n.styles.backgroundColor:i:r}}catch(s){}return n}return e(n,t),n}(Or),Jr=["OL","UL","MENU"],Zr=function(t,e,n){for(var r=t.firstChild,i=void 0;r;r=i)if(i=r.nextSibling,ii(r)&&r.data.trim().length>0)e.textNodes.push(new Lr(r,e.styles));else if(si(r)){var s=ti(r);s.styles.isVisible()&&(ni(r,s,n)?s.flags|=4:ri(s.styles)&&(s.flags|=2),-1!==Jr.indexOf(r.tagName)&&(s.flags|=8),e.elements.push(s),gi(r)||ci(r)||yi(r)||Zr(r,s,n))}},ti=function(t){return pi(t)?new zr(t):di(t)?new Qr(t):ci(t)?new Hr(t):ai(t)?new $r(t):li(t)?new Vr(t):ui(t)?new Kr(t):yi(t)?new Wr(t):gi(t)?new Gr(t):fi(t)?new Yr(t):new Or(t)},ei=function(t){var e=ti(t);return e.flags|=4,Zr(t,e,e),e},ni=function(t,e,n){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||hi(t)&&n.styles.isTransparent()},ri=function(t){return t.isPositioned()||t.isFloating()},ii=function(t){return t.nodeType===Node.TEXT_NODE},si=function(t){return t.nodeType===Node.ELEMENT_NODE},oi=function(t){return void 0!==t.style},ai=function(t){return"LI"===t.tagName},li=function(t){return"OL"===t.tagName},ui=function(t){return"INPUT"===t.tagName},ci=function(t){return"svg"===t.tagName},hi=function(t){return"BODY"===t.tagName},di=function(t){return"CANVAS"===t.tagName},pi=function(t){return"IMG"===t.tagName},fi=function(t){return"IFRAME"===t.tagName},Ai=function(t){return"STYLE"===t.tagName},mi=function(t){return"SCRIPT"===t.tagName},gi=function(t){return"TEXTAREA"===t.tagName},yi=function(t){return"SELECT"===t.tagName},wi=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(t){var e=this.counters[t];return e&&e.length?e[e.length-1]:1},t.prototype.getCounterValues=function(t){return this.counters[t]||[]},t.prototype.pop=function(t){var e=this;t.forEach((function(t){return e.counters[t].pop()}))},t.prototype.parse=function(t){var e=this,n=t.counterIncrement,r=t.counterReset,i=!0;null!==n&&n.forEach((function(t){var n=e.counters[t.counter];n&&0!==t.increment&&(i=!1,n[Math.max(0,n.length-1)]+=t.increment)}));var s=[];return i&&r.forEach((function(t){var n=e.counters[t.counter];s.push(t.counter),n||(n=e.counters[t.counter]=[]),n.push(t.reset)})),s},t}(),bi={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},vi={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["\u0554","\u0553","\u0552","\u0551","\u0550","\u054f","\u054e","\u054d","\u054c","\u054b","\u054a","\u0549","\u0548","\u0547","\u0546","\u0545","\u0544","\u0543","\u0542","\u0541","\u0540","\u053f","\u053e","\u053d","\u053c","\u053b","\u053a","\u0539","\u0538","\u0537","\u0536","\u0535","\u0534","\u0533","\u0532","\u0531"]},xi={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["\u05d9\u05f3","\u05d8\u05f3","\u05d7\u05f3","\u05d6\u05f3","\u05d5\u05f3","\u05d4\u05f3","\u05d3\u05f3","\u05d2\u05f3","\u05d1\u05f3","\u05d0\u05f3","\u05ea","\u05e9","\u05e8","\u05e7","\u05e6","\u05e4","\u05e2","\u05e1","\u05e0","\u05de","\u05dc","\u05db","\u05d9\u05d8","\u05d9\u05d7","\u05d9\u05d6","\u05d8\u05d6","\u05d8\u05d5","\u05d9","\u05d8","\u05d7","\u05d6","\u05d5","\u05d4","\u05d3","\u05d2","\u05d1","\u05d0"]},_i={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["\u10f5","\u10f0","\u10ef","\u10f4","\u10ee","\u10ed","\u10ec","\u10eb","\u10ea","\u10e9","\u10e8","\u10e7","\u10e6","\u10e5","\u10e4","\u10f3","\u10e2","\u10e1","\u10e0","\u10df","\u10de","\u10dd","\u10f2","\u10dc","\u10db","\u10da","\u10d9","\u10d8","\u10d7","\u10f1","\u10d6","\u10d5","\u10d4","\u10d3","\u10d2","\u10d1","\u10d0"]},Ci=function(t,e,n,r,i,s){return t<e||t>n?Ni(t,i,s.length>0):r.integers.reduce((function(e,n,i){for(;t>=n;)t-=n,e+=r.values[i];return e}),"")+s},Si=function(t,e,n,r){var i="";do{n||t--,i=r(t)+i,t/=e}while(t*e>=e);return i},Ei=function(t,e,n,r,i){var s=n-e+1;return(t<0?"-":"")+(Si(Math.abs(t),s,r,(function(t){return l(Math.floor(t%s)+e)}))+i)},Bi=function(t,e,n){void 0===n&&(n=". ");var r=e.length;return Si(Math.abs(t),r,!1,(function(t){return e[Math.floor(t%r)]}))+n},ki=function(t,e,n,r,i,s){if(t<-9999||t>9999)return Ni(t,Tn.CJK_DECIMAL,i.length>0);var o=Math.abs(t),a=i;if(0===o)return e[0]+a;for(var l=0;o>0&&l<=4;l++){var u=o%10;0===u&&_r(s,1)&&""!==a?a=e[u]+a:u>1||1===u&&0===l||1===u&&1===l&&_r(s,2)||1===u&&1===l&&_r(s,4)&&t>100||1===u&&l>1&&_r(s,8)?a=e[u]+(l>0?n[l-1]:"")+a:1===u&&l>0&&(a=n[l-1]+a),o=Math.floor(o/10)}return(t<0?r:"")+a},Ni=function(t,e,n){var r=n?". ":"",i=n?"\u3001":"",s=n?", ":"",o=n?" ":"";switch(e){case Tn.DISC:return"\u2022"+o;case Tn.CIRCLE:return"\u25e6"+o;case Tn.SQUARE:return"\u25fe"+o;case Tn.DECIMAL_LEADING_ZERO:var a=Ei(t,48,57,!0,r);return a.length<4?"0"+a:a;case Tn.CJK_DECIMAL:return Bi(t,"\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d",i);case Tn.LOWER_ROMAN:return Ci(t,1,3999,bi,Tn.DECIMAL,r).toLowerCase();case Tn.UPPER_ROMAN:return Ci(t,1,3999,bi,Tn.DECIMAL,r);case Tn.LOWER_GREEK:return Ei(t,945,969,!1,r);case Tn.LOWER_ALPHA:return Ei(t,97,122,!1,r);case Tn.UPPER_ALPHA:return Ei(t,65,90,!1,r);case Tn.ARABIC_INDIC:return Ei(t,1632,1641,!0,r);case Tn.ARMENIAN:case Tn.UPPER_ARMENIAN:return Ci(t,1,9999,vi,Tn.DECIMAL,r);case Tn.LOWER_ARMENIAN:return Ci(t,1,9999,vi,Tn.DECIMAL,r).toLowerCase();case Tn.BENGALI:return Ei(t,2534,2543,!0,r);case Tn.CAMBODIAN:case Tn.KHMER:return Ei(t,6112,6121,!0,r);case Tn.CJK_EARTHLY_BRANCH:return Bi(t,"\u5b50\u4e11\u5bc5\u536f\u8fb0\u5df3\u5348\u672a\u7533\u9149\u620c\u4ea5",i);case Tn.CJK_HEAVENLY_STEM:return Bi(t,"\u7532\u4e59\u4e19\u4e01\u620a\u5df1\u5e9a\u8f9b\u58ec\u7678",i);case Tn.CJK_IDEOGRAPHIC:case Tn.TRAD_CHINESE_INFORMAL:return ki(t,"\u96f6\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u5341\u767e\u5343\u842c","\u8ca0",i,14);case Tn.TRAD_CHINESE_FORMAL:return ki(t,"\u96f6\u58f9\u8cb3\u53c3\u8086\u4f0d\u9678\u67d2\u634c\u7396","\u62fe\u4f70\u4edf\u842c","\u8ca0",i,15);case Tn.SIMP_CHINESE_INFORMAL:return ki(t,"\u96f6\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u5341\u767e\u5343\u842c","\u8d1f",i,14);case Tn.SIMP_CHINESE_FORMAL:return ki(t,"\u96f6\u58f9\u8d30\u53c1\u8086\u4f0d\u9646\u67d2\u634c\u7396","\u62fe\u4f70\u4edf\u842c","\u8d1f",i,15);case Tn.JAPANESE_INFORMAL:return ki(t,"\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u5341\u767e\u5343\u4e07","\u30de\u30a4\u30ca\u30b9",i,0);case Tn.JAPANESE_FORMAL:return ki(t,"\u96f6\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d","\u62fe\u767e\u5343\u4e07","\u30de\u30a4\u30ca\u30b9",i,7);case Tn.KOREAN_HANGUL_FORMAL:return ki(t,"\uc601\uc77c\uc774\uc0bc\uc0ac\uc624\uc721\uce60\ud314\uad6c","\uc2ed\ubc31\ucc9c\ub9cc","\ub9c8\uc774\ub108\uc2a4",s,7);case Tn.KOREAN_HANJA_INFORMAL:return ki(t,"\u96f6\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u5341\u767e\u5343\u842c","\ub9c8\uc774\ub108\uc2a4",s,0);case Tn.KOREAN_HANJA_FORMAL:return ki(t,"\u96f6\u58f9\u8cb3\u53c3\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u62fe\u767e\u5343","\ub9c8\uc774\ub108\uc2a4",s,7);case Tn.DEVANAGARI:return Ei(t,2406,2415,!0,r);case Tn.GEORGIAN:return Ci(t,1,19999,_i,Tn.DECIMAL,r);case Tn.GUJARATI:return Ei(t,2790,2799,!0,r);case Tn.GURMUKHI:return Ei(t,2662,2671,!0,r);case Tn.HEBREW:return Ci(t,1,10999,xi,Tn.DECIMAL,r);case Tn.HIRAGANA:return Bi(t,"\u3042\u3044\u3046\u3048\u304a\u304b\u304d\u304f\u3051\u3053\u3055\u3057\u3059\u305b\u305d\u305f\u3061\u3064\u3066\u3068\u306a\u306b\u306c\u306d\u306e\u306f\u3072\u3075\u3078\u307b\u307e\u307f\u3080\u3081\u3082\u3084\u3086\u3088\u3089\u308a\u308b\u308c\u308d\u308f\u3090\u3091\u3092\u3093");case Tn.HIRAGANA_IROHA:return Bi(t,"\u3044\u308d\u306f\u306b\u307b\u3078\u3068\u3061\u308a\u306c\u308b\u3092\u308f\u304b\u3088\u305f\u308c\u305d\u3064\u306d\u306a\u3089\u3080\u3046\u3090\u306e\u304a\u304f\u3084\u307e\u3051\u3075\u3053\u3048\u3066\u3042\u3055\u304d\u3086\u3081\u307f\u3057\u3091\u3072\u3082\u305b\u3059");case Tn.KANNADA:return Ei(t,3302,3311,!0,r);case Tn.KATAKANA:return Bi(t,"\u30a2\u30a4\u30a6\u30a8\u30aa\u30ab\u30ad\u30af\u30b1\u30b3\u30b5\u30b7\u30b9\u30bb\u30bd\u30bf\u30c1\u30c4\u30c6\u30c8\u30ca\u30cb\u30cc\u30cd\u30ce\u30cf\u30d2\u30d5\u30d8\u30db\u30de\u30df\u30e0\u30e1\u30e2\u30e4\u30e6\u30e8\u30e9\u30ea\u30eb\u30ec\u30ed\u30ef\u30f0\u30f1\u30f2\u30f3",i);case Tn.KATAKANA_IROHA:return Bi(t,"\u30a4\u30ed\u30cf\u30cb\u30db\u30d8\u30c8\u30c1\u30ea\u30cc\u30eb\u30f2\u30ef\u30ab\u30e8\u30bf\u30ec\u30bd\u30c4\u30cd\u30ca\u30e9\u30e0\u30a6\u30f0\u30ce\u30aa\u30af\u30e4\u30de\u30b1\u30d5\u30b3\u30a8\u30c6\u30a2\u30b5\u30ad\u30e6\u30e1\u30df\u30b7\u30f1\u30d2\u30e2\u30bb\u30b9",i);case Tn.LAO:return Ei(t,3792,3801,!0,r);case Tn.MONGOLIAN:return Ei(t,6160,6169,!0,r);case Tn.MYANMAR:return Ei(t,4160,4169,!0,r);case Tn.ORIYA:return Ei(t,2918,2927,!0,r);case Tn.PERSIAN:return Ei(t,1776,1785,!0,r);case Tn.TAMIL:return Ei(t,3046,3055,!0,r);case Tn.TELUGU:return Ei(t,3174,3183,!0,r);case Tn.THAI:return Ei(t,3664,3673,!0,r);case Tn.TIBETAN:return Ei(t,3872,3881,!0,r);case Tn.DECIMAL:default:return Ei(t,48,57,!0,r)}},Ii=function(){function t(t,e){if(this.options=e,this.scrolledElements=[],this.referenceElement=t,this.counters=new wi,this.quoteDepth=0,!t.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(t.ownerDocument.documentElement)}return t.prototype.toIFrame=function(t,e){var n=this,s=Ti(t,e);if(!s.contentWindow)return Promise.reject("Unable to find iframe window");var o=t.defaultView.pageXOffset,a=t.defaultView.pageYOffset,l=s.contentWindow,u=l.document,c=Ri(s).then((function(){return r(n,void 0,void 0,(function(){var t;return i(this,(function(n){switch(n.label){case 0:return this.scrolledElements.forEach(Mi),l&&(l.scrollTo(e.left,e.top),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||l.scrollY===e.top&&l.scrollX===e.left||(u.documentElement.style.top=-e.top+"px",u.documentElement.style.left=-e.left+"px",u.documentElement.style.position="absolute")),t=this.options.onclone,void 0===this.clonedReferenceElement?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:u.fonts&&u.fonts.ready?[4,u.fonts.ready]:[3,2];case 1:n.sent(),n.label=2;case 2:return"function"==typeof t?[2,Promise.resolve().then((function(){return t(u)})).then((function(){return s}))]:[2,s]}}))}))}));return u.open(),u.write(Di(document.doctype)+"<html></html>"),Li(this.referenceElement.ownerDocument,o,a),u.replaceChild(u.adoptNode(this.documentElement),u.documentElement),u.close(),c},t.prototype.createElementClone=function(t){return di(t)?this.createCanvasClone(t):Ai(t)?this.createStyleClone(t):t.cloneNode(!1)},t.prototype.createStyleClone=function(t){try{var e=t.sheet;if(e&&e.cssRules){var n=[].slice.call(e.cssRules,0).reduce((function(t,e){return e&&"string"==typeof e.cssText?t+e.cssText:t}),""),r=t.cloneNode(!1);return r.textContent=n,r}}catch(i){if(Ie.getInstance(this.options.id).error("Unable to access cssRules property",i),"SecurityError"!==i.name)throw i}return t.cloneNode(!1)},t.prototype.createCanvasClone=function(t){if(this.options.inlineImages&&t.ownerDocument){var e=t.ownerDocument.createElement("img");try{return e.src=t.toDataURL(),e}catch(s){Ie.getInstance(this.options.id).info("Unable to clone canvas contents, canvas is tainted")}}var n=t.cloneNode(!1);try{n.width=t.width,n.height=t.height;var r=t.getContext("2d"),i=n.getContext("2d");return i&&(r?i.putImageData(r.getImageData(0,0,t.width,t.height),0,0):i.drawImage(t,0,0)),n}catch(s){}return n},t.prototype.cloneNode=function(t){if(ii(t))return document.createTextNode(t.data);if(!t.ownerDocument)return t.cloneNode(!1);var e=t.ownerDocument.defaultView;if(oi(t)&&e){var n=this.createElementClone(t),r=e.getComputedStyle(t),i=e.getComputedStyle(t,":before"),s=e.getComputedStyle(t,":after");this.referenceElement===t&&(this.clonedReferenceElement=n),hi(n)&&zi(n);for(var o=this.counters.parse(new Tr(r)),a=this.resolvePseudoContent(t,n,i,vr.BEFORE),l=t.firstChild;l;l=l.nextSibling)si(l)&&(mi(l)||l.hasAttribute("data-html2canvas-ignore")||"function"==typeof this.options.ignoreElements&&this.options.ignoreElements(l))||this.options.copyStyles&&si(l)&&Ai(l)||n.appendChild(this.cloneNode(l));a&&n.insertBefore(a,n.firstChild);var u=this.resolvePseudoContent(t,n,s,vr.AFTER);return u&&n.appendChild(u),this.counters.pop(o),r&&this.options.copyStyles&&!fi(t)&&Oi(r,n),0===t.scrollTop&&0===t.scrollLeft||this.scrolledElements.push([n,t.scrollLeft,t.scrollTop]),(gi(t)||yi(t))&&(gi(n)||yi(n))&&(n.value=t.value),n}return t.cloneNode(!1)},t.prototype.resolvePseudoContent=function(t,e,n,r){var i=this;if(n){var s=n.content,o=e.ownerDocument;if(o&&s&&"none"!==s&&"-moz-alt-content"!==s&&"none"!==n.display){this.counters.parse(new Tr(n));var a=new Fr(n),l=o.createElement("html2canvaspseudoelement");return Oi(n,l),a.content.forEach((function(e){if(e.type===d.STRING_TOKEN)l.appendChild(o.createTextNode(e.value));else if(e.type===d.URL_TOKEN){var n=o.createElement("img");n.src=e.value,n.style.opacity="1",l.appendChild(n)}else if(e.type===d.FUNCTION){if("attr"===e.name){var r=e.values.filter(Pt);r.length&&l.appendChild(o.createTextNode(t.getAttribute(r[0].value)||""))}else if("counter"===e.name){var s=e.values.filter($t),u=s[1];if((p=s[0])&&Pt(p)){var c=i.counters.getCounterValue(p.value),h=u&&Pt(u)?Dn.parse(u.value):Tn.DECIMAL;l.appendChild(o.createTextNode(Ni(c,h,!1)))}}else if("counters"===e.name){var p,f=e.values.filter($t),A=f[1];if(u=f[2],(p=f[0])&&Pt(p)){var m=i.counters.getCounterValues(p.value),g=u&&Pt(u)?Dn.parse(u.value):Tn.DECIMAL,y=A&&A.type===d.STRING_TOKEN?A.value:"",w=m.map((function(t){return Ni(t,g,!1)})).join(y);l.appendChild(o.createTextNode(w))}}}else if(e.type===d.IDENT_TOKEN)switch(e.value){case"open-quote":l.appendChild(o.createTextNode(kr(a.quotes,i.quoteDepth++,!0)));break;case"close-quote":l.appendChild(o.createTextNode(kr(a.quotes,--i.quoteDepth,!1)));break;default:l.appendChild(o.createTextNode(e.value))}})),l.className=Ui+" "+Pi,e.className+=r===vr.BEFORE?" "+Ui:" "+Pi,l}}},t.destroy=function(t){return!!t.parentNode&&(t.parentNode.removeChild(t),!0)},t}();!function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"}(vr||(vr={}));var Fi,Ti=function(t,e){var n=t.createElement("iframe");return n.className="html2canvas-container",n.style.visibility="hidden",n.style.position="fixed",n.style.left="-10000px",n.style.top="0px",n.style.border="0",n.width=e.width.toString(),n.height=e.height.toString(),n.scrolling="no",n.setAttribute("data-html2canvas-ignore","true"),t.body.appendChild(n),n},Ri=function(t){return new Promise((function(e,n){var r=t.contentWindow;if(!r)return n("No window assigned for iframe");var i=r.document;r.onload=t.onload=i.onreadystatechange=function(){r.onload=t.onload=i.onreadystatechange=null;var n=setInterval((function(){i.body.childNodes.length>0&&"complete"===i.readyState&&(clearInterval(n),e(t))}),50)}}))},Oi=function(t,e){for(var n=t.length-1;n>=0;n--){var r=t.item(n);"content"!==r&&e.style.setProperty(r,t.getPropertyValue(r))}return e},Di=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},Li=function(t,e,n){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||n!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,n)},Mi=function(t){var e=t[0],n=t[2];e.scrollLeft=t[1],e.scrollTop=n},Ui="___html2canvas___pseudoelement_before",Pi="___html2canvas___pseudoelement_after",zi=function(t){Qi(t,"."+Ui+':before{\n    content: "" !important;\n    display: none !important;\n}\n         .'+Pi+':after{\n    content: "" !important;\n    display: none !important;\n}')},Qi=function(t,e){var n=t.ownerDocument;if(n){var r=n.createElement("style");r.textContent=e,t.appendChild(r)}};!function(t){t[t.VECTOR=0]="VECTOR",t[t.BEZIER_CURVE=1]="BEZIER_CURVE"}(Fi||(Fi={}));var Hi,$i=function(t,e){return t.length===e.length&&t.some((function(t,n){return t===e[n]}))},Vi=function(){function t(t,e){this.type=Fi.VECTOR,this.x=t,this.y=e}return t.prototype.add=function(e,n){return new t(this.x+e,this.y+n)},t}(),qi=function(t,e,n){return new Vi(t.x+(e.x-t.x)*n,t.y+(e.y-t.y)*n)},ji=function(){function t(t,e,n,r){this.type=Fi.BEZIER_CURVE,this.start=t,this.startControl=e,this.endControl=n,this.end=r}return t.prototype.subdivide=function(e,n){var r=qi(this.start,this.startControl,e),i=qi(this.startControl,this.endControl,e),s=qi(this.endControl,this.end,e),o=qi(r,i,e),a=qi(i,s,e),l=qi(o,a,e);return n?new t(this.start,r,o,l):new t(l,a,s,this.end)},t.prototype.add=function(e,n){return new t(this.start.add(e,n),this.startControl.add(e,n),this.endControl.add(e,n),this.end.add(e,n))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),Ki=function(t){return t.type===Fi.BEZIER_CURVE},Wi=function(t){var e=t.styles,n=t.bounds,r=Jt(e.borderTopLeftRadius,n.width,n.height),i=r[0],s=r[1],o=Jt(e.borderTopRightRadius,n.width,n.height),a=o[0],l=o[1],u=Jt(e.borderBottomRightRadius,n.width,n.height),c=u[0],h=u[1],d=Jt(e.borderBottomLeftRadius,n.width,n.height),p=d[0],f=d[1],A=[];A.push((i+a)/n.width),A.push((p+c)/n.width),A.push((s+f)/n.height),A.push((l+h)/n.height);var m=Math.max.apply(Math,A);m>1&&(i/=m,s/=m,a/=m,l/=m,c/=m,h/=m,p/=m,f/=m);var g=n.width-a,y=n.height-h,w=n.width-c,b=n.height-f,v=e.borderTopWidth,x=e.borderRightWidth,_=e.borderBottomWidth,C=e.borderLeftWidth,S=Zt(e.paddingTop,t.bounds.width),E=Zt(e.paddingRight,t.bounds.width),B=Zt(e.paddingBottom,t.bounds.width),k=Zt(e.paddingLeft,t.bounds.width);this.topLeftBorderBox=i>0||s>0?Gi(n.left,n.top,i,s,Hi.TOP_LEFT):new Vi(n.left,n.top),this.topRightBorderBox=a>0||l>0?Gi(n.left+g,n.top,a,l,Hi.TOP_RIGHT):new Vi(n.left+n.width,n.top),this.bottomRightBorderBox=c>0||h>0?Gi(n.left+w,n.top+y,c,h,Hi.BOTTOM_RIGHT):new Vi(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=p>0||f>0?Gi(n.left,n.top+b,p,f,Hi.BOTTOM_LEFT):new Vi(n.left,n.top+n.height),this.topLeftPaddingBox=i>0||s>0?Gi(n.left+C,n.top+v,Math.max(0,i-C),Math.max(0,s-v),Hi.TOP_LEFT):new Vi(n.left+C,n.top+v),this.topRightPaddingBox=a>0||l>0?Gi(n.left+Math.min(g,n.width+C),n.top+v,g>n.width+C?0:a-C,l-v,Hi.TOP_RIGHT):new Vi(n.left+n.width-x,n.top+v),this.bottomRightPaddingBox=c>0||h>0?Gi(n.left+Math.min(w,n.width-C),n.top+Math.min(y,n.height+v),Math.max(0,c-x),h-_,Hi.BOTTOM_RIGHT):new Vi(n.left+n.width-x,n.top+n.height-_),this.bottomLeftPaddingBox=p>0||f>0?Gi(n.left+C,n.top+b,Math.max(0,p-C),f-_,Hi.BOTTOM_LEFT):new Vi(n.left+C,n.top+n.height-_),this.topLeftContentBox=i>0||s>0?Gi(n.left+C+k,n.top+v+S,Math.max(0,i-(C+k)),Math.max(0,s-(v+S)),Hi.TOP_LEFT):new Vi(n.left+C+k,n.top+v+S),this.topRightContentBox=a>0||l>0?Gi(n.left+Math.min(g,n.width+C+k),n.top+v+S,g>n.width+C+k?0:a-C+k,l-(v+S),Hi.TOP_RIGHT):new Vi(n.left+n.width-(x+E),n.top+v+S),this.bottomRightContentBox=c>0||h>0?Gi(n.left+Math.min(w,n.width-(C+k)),n.top+Math.min(y,n.height+v+S),Math.max(0,c-(x+E)),h-(_+B),Hi.BOTTOM_RIGHT):new Vi(n.left+n.width-(x+E),n.top+n.height-(_+B)),this.bottomLeftContentBox=p>0||f>0?Gi(n.left+C+k,n.top+b,Math.max(0,p-(C+k)),f-(_+B),Hi.BOTTOM_LEFT):new Vi(n.left+C+k,n.top+n.height-(_+B))};!function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"}(Hi||(Hi={}));var Gi=function(t,e,n,r,i){var s=(Math.sqrt(2)-1)/3*4,o=n*s,a=r*s,l=t+n,u=e+r;switch(i){case Hi.TOP_LEFT:return new ji(new Vi(t,u),new Vi(t,u-a),new Vi(l-o,e),new Vi(l,e));case Hi.TOP_RIGHT:return new ji(new Vi(t,e),new Vi(t+o,e),new Vi(l,u-a),new Vi(l,u));case Hi.BOTTOM_RIGHT:return new ji(new Vi(l,e),new Vi(l,e+a),new Vi(t+o,u),new Vi(t,u));case Hi.BOTTOM_LEFT:default:return new ji(new Vi(l,u),new Vi(l-o,u),new Vi(t,e+a),new Vi(t,e))}},Xi=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},Yi=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},Ji=function(t,e,n){this.type=0,this.offsetX=t,this.offsetY=e,this.matrix=n,this.target=6},Zi=function(t,e){this.type=1,this.target=e,this.path=t},ts=function(t){this.element=t,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]},es=function(){function t(t,e){if(this.container=t,this.effects=e.slice(0),this.curves=new Wi(t),null!==t.styles.transform&&this.effects.push(new Ji(t.bounds.left+t.styles.transformOrigin[0].number,t.bounds.top+t.styles.transformOrigin[1].number,t.styles.transform)),t.styles.overflowX!==On.VISIBLE){var n=Xi(this.curves),r=Yi(this.curves);$i(n,r)?this.effects.push(new Zi(n,6)):(this.effects.push(new Zi(n,2)),this.effects.push(new Zi(r,4)))}}return t.prototype.getParentEffects=function(){var t=this.effects.slice(0);if(this.container.styles.overflowX!==On.VISIBLE){var e=Xi(this.curves),n=Yi(this.curves);$i(e,n)||t.push(new Zi(n,6))}return t},t}(),ns=function(t,e,n,r){t.container.elements.forEach((function(i){var s=_r(i.flags,4),o=_r(i.flags,2),a=new es(i,t.getParentEffects());_r(i.styles.display,2048)&&r.push(a);var l=_r(i.flags,8)?[]:r;if(s||o){var u=s||i.styles.isPositioned()?n:e,c=new ts(a);if(i.styles.isPositioned()||i.styles.opacity<1||i.styles.isTransformed()){var h=i.styles.zIndex.order;if(h<0){var d=0;u.negativeZIndex.some((function(t,e){return h>t.element.container.styles.zIndex.order?(d=e,!1):d>0})),u.negativeZIndex.splice(d,0,c)}else if(h>0){var p=0;u.positiveZIndex.some((function(t,e){return h>t.element.container.styles.zIndex.order?(p=e+1,!1):p>0})),u.positiveZIndex.splice(p,0,c)}else u.zeroOrAutoZIndexOrTransformedOrOpacity.push(c)}else i.styles.isFloating()?u.nonPositionedFloats.push(c):u.nonPositionedInlineLevel.push(c);ns(a,c,s?c:n,l)}else i.styles.isInlineLevel()?e.inlineLevel.push(a):e.nonInlineLevel.push(a),ns(a,e,n,l);_r(i.flags,8)&&rs(i,l)}))},rs=function(t,e){for(var n=t instanceof Vr?t.start:1,r=t instanceof Vr&&t.reversed,i=0;i<e.length;i++){var s=e[i];s.container instanceof $r&&"number"==typeof s.container.value&&0!==s.container.value&&(n=s.container.value),s.listValue=Ni(n,s.container.styles.listStyleType,!0),n+=r?-1:1}},is=function(t,e,n,r){var i=[];return Ki(t)?i.push(t.subdivide(.5,!1)):i.push(t),Ki(n)?i.push(n.subdivide(.5,!0)):i.push(n),Ki(r)?i.push(r.subdivide(.5,!0).reverse()):i.push(r),Ki(e)?i.push(e.subdivide(.5,!1).reverse()):i.push(e),i},ss=function(t){var e=t.styles;return t.bounds.add(e.borderLeftWidth,e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth),-(e.borderTopWidth+e.borderBottomWidth))},os=function(t){var e=t.styles,n=t.bounds,r=Zt(e.paddingLeft,n.width),i=Zt(e.paddingRight,n.width),s=Zt(e.paddingTop,n.width),o=Zt(e.paddingBottom,n.width);return n.add(r+e.borderLeftWidth,s+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+r+i),-(e.borderTopWidth+e.borderBottomWidth+s+o))},as=function(t,e,n){var r=function(t,e){return 0===t?e.bounds:2===t?os(e):ss(e)}(hs(t.styles.backgroundOrigin,e),t),i=function(t,e){return t===de.BORDER_BOX?e.bounds:t===de.CONTENT_BOX?os(e):ss(e)}(hs(t.styles.backgroundClip,e),t),s=cs(hs(t.styles.backgroundSize,e),n,r),o=s[0],a=s[1],l=Jt(hs(t.styles.backgroundPosition,e),r.width-o,r.height-a);return[ds(hs(t.styles.backgroundRepeat,e),l,s,r,i),Math.round(r.left+l[0]),Math.round(r.top+l[1]),o,a]},ls=function(t){return Pt(t)&&t.value===We.AUTO},us=function(t){return"number"==typeof t},cs=function(t,e,n){var r=e[0],i=e[1],s=e[2],o=t[0],a=t[1];if(Kt(o)&&a&&Kt(a))return[Zt(o,n.width),Zt(a,n.height)];var l=us(s);if(Pt(o)&&(o.value===We.CONTAIN||o.value===We.COVER))return us(s)?n.width/n.height<s!=(o.value===We.COVER)?[n.width,n.width/s]:[n.height*s,n.height]:[n.width,n.height];var u=us(r),c=us(i),h=u||c;if(ls(o)&&(!a||ls(a)))return u&&c?[r,i]:l||h?h&&l?[u?r:i*s,c?i:r/s]:[u?r:n.width,c?i:n.height]:[n.width,n.height];if(l){var d=0,p=0;return Kt(o)?d=Zt(o,n.width):Kt(a)&&(p=Zt(a,n.height)),ls(o)?d=p*s:a&&!ls(a)||(p=d/s),[d,p]}var f=null,A=null;if(Kt(o)?f=Zt(o,n.width):a&&Kt(a)&&(A=Zt(a,n.height)),null===f||a&&!ls(a)||(A=u&&c?f/r*i:n.height),null!==A&&ls(o)&&(f=u&&c?A/i*r:n.width),null!==f&&null!==A)return[f,A];throw new Error("Unable to calculate background-size for element")},hs=function(t,e){var n=t[e];return void 0===n?t[0]:n},ds=function(t,e,n,r,i){var s=e[0],o=e[1],a=n[0],l=n[1];switch(t){case He.REPEAT_X:return[new Vi(Math.round(r.left),Math.round(r.top+o)),new Vi(Math.round(r.left+r.width),Math.round(r.top+o)),new Vi(Math.round(r.left+r.width),Math.round(l+r.top+o)),new Vi(Math.round(r.left),Math.round(l+r.top+o))];case He.REPEAT_Y:return[new Vi(Math.round(r.left+s),Math.round(r.top)),new Vi(Math.round(r.left+s+a),Math.round(r.top)),new Vi(Math.round(r.left+s+a),Math.round(r.height+r.top)),new Vi(Math.round(r.left+s),Math.round(r.height+r.top))];case He.NO_REPEAT:return[new Vi(Math.round(r.left+s),Math.round(r.top+o)),new Vi(Math.round(r.left+s+a),Math.round(r.top+o)),new Vi(Math.round(r.left+s+a),Math.round(r.top+o+l)),new Vi(Math.round(r.left+s),Math.round(r.top+o+l))];default:return[new Vi(Math.round(i.left),Math.round(i.top)),new Vi(Math.round(i.left+i.width),Math.round(i.top)),new Vi(Math.round(i.left+i.width),Math.round(i.height+i.top)),new Vi(Math.round(i.left),Math.round(i.height+i.top))]}},ps=function(){function t(t){this._data={},this._document=t}return t.prototype.parseMetrics=function(t,e){var n=this._document.createElement("div"),r=this._document.createElement("img"),i=this._document.createElement("span"),s=this._document.body;n.style.visibility="hidden",n.style.fontFamily=t,n.style.fontSize=e,n.style.margin="0",n.style.padding="0",s.appendChild(n),r.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",r.width=1,r.height=1,r.style.margin="0",r.style.padding="0",r.style.verticalAlign="baseline",i.style.fontFamily=t,i.style.fontSize=e,i.style.margin="0",i.style.padding="0",i.appendChild(this._document.createTextNode("Hidden Text")),n.appendChild(i),n.appendChild(r);var o=r.offsetTop-i.offsetTop+2;n.removeChild(i),n.appendChild(this._document.createTextNode("Hidden Text")),n.style.lineHeight="normal",r.style.verticalAlign="super";var a=r.offsetTop-n.offsetTop+2;return s.removeChild(n),{baseline:o,middle:a}},t.prototype.getMetrics=function(t,e){var n=t+" "+e;return void 0===this._data[n]&&(this._data[n]=this.parseMetrics(t,e)),this._data[n]},t}(),fs=function(){function t(t){this._activeEffects=[],this.canvas=t.canvas?t.canvas:document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.options=t,t.canvas||(this.canvas.width=Math.floor(t.width*t.scale),this.canvas.height=Math.floor(t.height*t.scale),this.canvas.style.width=t.width+"px",this.canvas.style.height=t.height+"px"),this.fontMetrics=new ps(document),this.ctx.scale(this.options.scale,this.options.scale),this.ctx.translate(-t.x+t.scrollX,-t.y+t.scrollY),this.ctx.textBaseline="bottom",this._activeEffects=[],Ie.getInstance(t.id).debug("Canvas renderer initialized ("+t.width+"x"+t.height+" at "+t.x+","+t.y+") with scale "+t.scale)}return t.prototype.applyEffects=function(t,e){for(var n=this;this._activeEffects.length;)this.popEffect();t.filter((function(t){return _r(t.target,e)})).forEach((function(t){return n.applyEffect(t)}))},t.prototype.applyEffect=function(t){this.ctx.save(),function(t){return 0===t.type}(t)&&(this.ctx.translate(t.offsetX,t.offsetY),this.ctx.transform(t.matrix[0],t.matrix[1],t.matrix[2],t.matrix[3],t.matrix[4],t.matrix[5]),this.ctx.translate(-t.offsetX,-t.offsetY)),function(t){return 1===t.type}(t)&&(this.path(t.path),this.ctx.clip()),this._activeEffects.push(t)},t.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},t.prototype.renderStack=function(t){return r(this,void 0,void 0,(function(){var e;return i(this,(function(n){switch(n.label){case 0:return(e=t.element.container.styles).isVisible()?(this.ctx.globalAlpha=e.opacity,[4,this.renderStackContent(t)]):[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}}))}))},t.prototype.renderNode=function(t){return r(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return t.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(t)]:[3,3];case 1:return e.sent(),[4,this.renderNodeContent(t)];case 2:e.sent(),e.label=3;case 3:return[2]}}))}))},t.prototype.renderTextWithLetterSpacing=function(t,e){var n=this;0===e?this.ctx.fillText(t.text,t.bounds.left,t.bounds.top+t.bounds.height):a(t.text).map((function(t){return l(t)})).reduce((function(e,r){return n.ctx.fillText(r,e,t.bounds.top+t.bounds.height),e+n.ctx.measureText(r).width}),t.bounds.left)},t.prototype.createFontStyle=function(t){var e=t.fontVariant.filter((function(t){return"normal"===t||"small-caps"===t})).join(""),n=t.fontFamily.join(", "),r=Mt(t.fontSize)?""+t.fontSize.number+t.fontSize.unit:t.fontSize.number+"px";return[[t.fontStyle,e,t.fontWeight,r,n].join(" "),n,r]},t.prototype.renderTextNode=function(t,e){return r(this,void 0,void 0,(function(){var n,r,s,o=this;return i(this,(function(i){return n=this.createFontStyle(e),r=n[1],s=n[2],this.ctx.font=n[0],t.textBounds.forEach((function(t){o.ctx.fillStyle=oe(e.color),o.renderTextWithLetterSpacing(t,e.letterSpacing);var n=e.textShadow;n.length&&t.text.trim().length&&(n.slice(0).reverse().forEach((function(e){o.ctx.shadowColor=oe(e.color),o.ctx.shadowOffsetX=e.offsetX.number*o.options.scale,o.ctx.shadowOffsetY=e.offsetY.number*o.options.scale,o.ctx.shadowBlur=e.blur.number,o.ctx.fillText(t.text,t.bounds.left,t.bounds.top+t.bounds.height)})),o.ctx.shadowColor="",o.ctx.shadowOffsetX=0,o.ctx.shadowOffsetY=0,o.ctx.shadowBlur=0),e.textDecorationLine.length&&(o.ctx.fillStyle=oe(e.textDecorationColor||e.color),e.textDecorationLine.forEach((function(e){switch(e){case 1:var n=o.fontMetrics.getMetrics(r,s).baseline;o.ctx.fillRect(t.bounds.left,Math.round(t.bounds.top+n),t.bounds.width,1);break;case 2:o.ctx.fillRect(t.bounds.left,Math.round(t.bounds.top),t.bounds.width,1);break;case 3:var i=o.fontMetrics.getMetrics(r,s).middle;o.ctx.fillRect(t.bounds.left,Math.ceil(t.bounds.top+i),t.bounds.width,1)}})))})),[2]}))}))},t.prototype.renderReplacedElement=function(t,e,n){if(n&&t.intrinsicWidth>0&&t.intrinsicHeight>0){var r=os(t),i=Yi(e);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(n,0,0,t.intrinsicWidth,t.intrinsicHeight,r.left,r.top,r.width,r.height),this.ctx.restore()}},t.prototype.renderNodeContent=function(e){return r(this,void 0,void 0,(function(){var n,r,o,a,l,u,c,h,p,f,A,m,g;return i(this,(function(i){switch(i.label){case 0:this.applyEffects(e.effects,4),r=e.curves,o=(n=e.container).styles,a=0,l=n.textNodes,i.label=1;case 1:return a<l.length?[4,this.renderTextNode(l[a],o)]:[3,4];case 2:i.sent(),i.label=3;case 3:return a++,[3,1];case 4:if(!(n instanceof zr))return[3,8];i.label=5;case 5:return i.trys.push([5,7,,8]),[4,this.options.cache.match(n.src)];case 6:return A=i.sent(),this.renderReplacedElement(n,r,A),[3,8];case 7:return i.sent(),Ie.getInstance(this.options.id).error("Error loading image "+n.src),[3,8];case 8:if(n instanceof Qr&&this.renderReplacedElement(n,r,n.canvas),!(n instanceof Hr))return[3,12];i.label=9;case 9:return i.trys.push([9,11,,12]),[4,this.options.cache.match(n.svg)];case 10:return A=i.sent(),this.renderReplacedElement(n,r,A),[3,12];case 11:return i.sent(),Ie.getInstance(this.options.id).error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof Yr&&n.tree?[4,new t({id:this.options.id,scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,scrollX:0,scrollY:0,width:n.width,height:n.height,cache:this.options.cache,windowWidth:n.width,windowHeight:n.height}).render(n.tree)]:[3,14];case 13:u=i.sent(),n.width&&n.height&&this.ctx.drawImage(u,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),i.label=14;case 14:if(n instanceof Kr&&(c=Math.min(n.bounds.width,n.bounds.height),"checkbox"===n.type?n.checked&&(this.ctx.save(),this.path([new Vi(n.bounds.left+.39363*c,n.bounds.top+.79*c),new Vi(n.bounds.left+.16*c,n.bounds.top+.5549*c),new Vi(n.bounds.left+.27347*c,n.bounds.top+.44071*c),new Vi(n.bounds.left+.39694*c,n.bounds.top+.5649*c),new Vi(n.bounds.left+.72983*c,n.bounds.top+.23*c),new Vi(n.bounds.left+.84*c,n.bounds.top+.34085*c),new Vi(n.bounds.left+.39363*c,n.bounds.top+.79*c)]),this.ctx.fillStyle=oe(707406591),this.ctx.fill(),this.ctx.restore()):"radio"===n.type&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+c/2,n.bounds.top+c/2,c/4,0,2*Math.PI,!0),this.ctx.fillStyle=oe(707406591),this.ctx.fill(),this.ctx.restore())),As(n)&&n.value.length){switch(this.ctx.font=this.createFontStyle(o)[0],this.ctx.fillStyle=oe(o.color),this.ctx.textBaseline="middle",this.ctx.textAlign=gs(n.styles.textAlign),g=os(n),h=0,n.styles.textAlign){case $n.CENTER:h+=g.width/2;break;case $n.RIGHT:h+=g.width}p=g.add(h,0,0,-g.height/2+1),this.ctx.save(),this.path([new Vi(g.left,g.top),new Vi(g.left+g.width,g.top),new Vi(g.left+g.width,g.top+g.height),new Vi(g.left,g.top+g.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Dr(n.value,p),o.letterSpacing),this.ctx.restore(),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"}if(!_r(n.styles.display,2048))return[3,20];if(null===n.styles.listStyleImage)return[3,19];if((f=n.styles.listStyleImage).type!==me.URL)return[3,18];A=void 0,m=f.url,i.label=15;case 15:return i.trys.push([15,17,,18]),[4,this.options.cache.match(m)];case 16:return A=i.sent(),this.ctx.drawImage(A,n.bounds.left-(A.width+10),n.bounds.top),[3,18];case 17:return i.sent(),Ie.getInstance(this.options.id).error("Error loading list-style-image "+m),[3,18];case 18:return[3,20];case 19:e.listValue&&n.styles.listStyleType!==Tn.NONE&&(this.ctx.font=this.createFontStyle(o)[0],this.ctx.fillStyle=oe(o.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",g=new s(n.bounds.left,n.bounds.top+Zt(n.styles.paddingTop,n.bounds.width),n.bounds.width,function(t,e){return Pt(t)&&"normal"===t.value?1.2*e:t.type===d.NUMBER_TOKEN?e*t.number:Kt(t)?Zt(t,e):e}(o.lineHeight,o.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Dr(e.listValue,g),o.letterSpacing),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),i.label=20;case 20:return[2]}}))}))},t.prototype.renderStackContent=function(t){return r(this,void 0,void 0,(function(){var e,n,r,s,o,a,l,u,c,h,d,p,f,A;return i(this,(function(i){switch(i.label){case 0:return[4,this.renderNodeBackgroundAndBorders(t.element)];case 1:i.sent(),e=0,n=t.negativeZIndex,i.label=2;case 2:return e<n.length?[4,this.renderStack(n[e])]:[3,5];case 3:i.sent(),i.label=4;case 4:return e++,[3,2];case 5:return[4,this.renderNodeContent(t.element)];case 6:i.sent(),r=0,s=t.nonInlineLevel,i.label=7;case 7:return r<s.length?[4,this.renderNode(s[r])]:[3,10];case 8:i.sent(),i.label=9;case 9:return r++,[3,7];case 10:o=0,a=t.nonPositionedFloats,i.label=11;case 11:return o<a.length?[4,this.renderStack(a[o])]:[3,14];case 12:i.sent(),i.label=13;case 13:return o++,[3,11];case 14:l=0,u=t.nonPositionedInlineLevel,i.label=15;case 15:return l<u.length?[4,this.renderStack(u[l])]:[3,18];case 16:i.sent(),i.label=17;case 17:return l++,[3,15];case 18:c=0,h=t.inlineLevel,i.label=19;case 19:return c<h.length?[4,this.renderNode(h[c])]:[3,22];case 20:i.sent(),i.label=21;case 21:return c++,[3,19];case 22:d=0,p=t.zeroOrAutoZIndexOrTransformedOrOpacity,i.label=23;case 23:return d<p.length?[4,this.renderStack(p[d])]:[3,26];case 24:i.sent(),i.label=25;case 25:return d++,[3,23];case 26:f=0,A=t.positiveZIndex,i.label=27;case 27:return f<A.length?[4,this.renderStack(A[f])]:[3,30];case 28:i.sent(),i.label=29;case 29:return f++,[3,27];case 30:return[2]}}))}))},t.prototype.mask=function(t){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(t.slice(0).reverse()),this.ctx.closePath()},t.prototype.path=function(t){this.ctx.beginPath(),this.formatPath(t),this.ctx.closePath()},t.prototype.formatPath=function(t){var e=this;t.forEach((function(t,n){var r=Ki(t)?t.start:t;0===n?e.ctx.moveTo(r.x,r.y):e.ctx.lineTo(r.x,r.y),Ki(t)&&e.ctx.bezierCurveTo(t.startControl.x,t.startControl.y,t.endControl.x,t.endControl.y,t.end.x,t.end.y)}))},t.prototype.renderRepeat=function(t,e,n,r){this.path(t),this.ctx.fillStyle=e,this.ctx.translate(n,r),this.ctx.fill(),this.ctx.translate(-n,-r)},t.prototype.resizeImage=function(t,e,n){if(t.width===e&&t.height===n)return t;var r=this.canvas.ownerDocument.createElement("canvas");return r.width=e,r.height=n,r.getContext("2d").drawImage(t,0,0,t.width,t.height,0,0,e,n),r},t.prototype.renderBackgroundImage=function(t){return r(this,void 0,void 0,(function(){var e,n,r,s,o;return i(this,(function(a){switch(a.label){case 0:e=t.styles.backgroundImage.length-1,n=function(n){var s,o,a,l,u,c,h,d,p,f,A,m,g,y,w,b,v,x,_,C,S,E,B,k,N,I,F,T,R,O,D;return i(this,(function(i){switch(i.label){case 0:if(n.type!==me.URL)return[3,5];s=void 0,o=n.url,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,r.options.cache.match(o)];case 2:return s=i.sent(),[3,4];case 3:return i.sent(),Ie.getInstance(r.options.id).error("Error loading background-image "+o),[3,4];case 4:return s&&(a=as(t,e,[s.width,s.height,s.width/s.height]),b=a[0],E=a[1],B=a[2],y=r.ctx.createPattern(r.resizeImage(s,_=a[3],C=a[4]),"repeat"),r.renderRepeat(b,y,E,B)),[3,6];case 5:n.type===me.LINEAR_GRADIENT?(l=as(t,e,[null,null,null]),b=l[0],E=l[1],B=l[2],u=function(t,e,n){var r="number"==typeof t?t:function(t,e,n){var r=e/2,i=n/2,s=Zt(t[0],e)-r,o=i-Zt(t[1],n);return(Math.atan2(o,s)+2*Math.PI)%(2*Math.PI)}(t,e,n),i=Math.abs(e*Math.sin(r))+Math.abs(n*Math.cos(r)),s=e/2,o=n/2,a=i/2,l=Math.sin(r-Math.PI/2)*a,u=Math.cos(r-Math.PI/2)*a;return[i,s-u,s+u,o-l,o+l]}(n.angle,_=l[3],C=l[4]),c=u[0],h=u[1],d=u[2],p=u[3],f=u[4],(A=document.createElement("canvas")).width=_,A.height=C,m=A.getContext("2d"),g=m.createLinearGradient(h,p,d,f),xe(n.stops,c).forEach((function(t){return g.addColorStop(t.stop,oe(t.color))})),m.fillStyle=g,m.fillRect(0,0,_,C),_>0&&C>0&&(y=r.ctx.createPattern(A,"repeat"),r.renderRepeat(b,y,E,B))):n.type===me.RADIAL_GRADIENT&&(w=as(t,e,[null,null,null]),b=w[0],v=w[1],x=w[2],C=w[4],E=Zt((S=0===n.position.length?[Xt]:n.position)[0],_=w[3]),B=Zt(S[S.length-1],C),k=function(t,e,n,r,i){var s=0,o=0;switch(t.size){case ye.CLOSEST_SIDE:t.shape===ge.CIRCLE?s=o=Math.min(Math.abs(e),Math.abs(e-r),Math.abs(n),Math.abs(n-i)):t.shape===ge.ELLIPSE&&(s=Math.min(Math.abs(e),Math.abs(e-r)),o=Math.min(Math.abs(n),Math.abs(n-i)));break;case ye.CLOSEST_CORNER:if(t.shape===ge.CIRCLE)s=o=Math.min(_e(e,n),_e(e,n-i),_e(e-r,n),_e(e-r,n-i));else if(t.shape===ge.ELLIPSE){var a=Math.min(Math.abs(n),Math.abs(n-i))/Math.min(Math.abs(e),Math.abs(e-r)),l=Ce(r,i,e,n,!0);o=a*(s=_e(l[0]-e,(l[1]-n)/a))}break;case ye.FARTHEST_SIDE:t.shape===ge.CIRCLE?s=o=Math.max(Math.abs(e),Math.abs(e-r),Math.abs(n),Math.abs(n-i)):t.shape===ge.ELLIPSE&&(s=Math.max(Math.abs(e),Math.abs(e-r)),o=Math.max(Math.abs(n),Math.abs(n-i)));break;case ye.FARTHEST_CORNER:if(t.shape===ge.CIRCLE)s=o=Math.max(_e(e,n),_e(e,n-i),_e(e-r,n),_e(e-r,n-i));else if(t.shape===ge.ELLIPSE){a=Math.max(Math.abs(n),Math.abs(n-i))/Math.max(Math.abs(e),Math.abs(e-r));var u=Ce(r,i,e,n,!1);o=a*(s=_e(u[0]-e,(u[1]-n)/a))}}return Array.isArray(t.size)&&(s=Zt(t.size[0],r),o=2===t.size.length?Zt(t.size[1],i):s),[s,o]}(n,E,B,_,C),I=k[1],(N=k[0])>0&&N>0&&(F=r.ctx.createRadialGradient(v+E,x+B,0,v+E,x+B,N),xe(n.stops,2*N).forEach((function(t){return F.addColorStop(t.stop,oe(t.color))})),r.path(b),r.ctx.fillStyle=F,N!==I?(T=t.bounds.left+.5*t.bounds.width,R=t.bounds.top+.5*t.bounds.height,D=1/(O=I/N),r.ctx.save(),r.ctx.translate(T,R),r.ctx.transform(1,0,0,O,0,0),r.ctx.translate(-T,-R),r.ctx.fillRect(v,D*(x-R)+R,_,C*D),r.ctx.restore()):r.ctx.fill())),i.label=6;case 6:return e--,[2]}}))},r=this,s=0,o=t.styles.backgroundImage.slice(0).reverse(),a.label=1;case 1:return s<o.length?[5,n(o[s])]:[3,4];case 2:a.sent(),a.label=3;case 3:return s++,[3,1];case 4:return[2]}}))}))},t.prototype.renderBorder=function(t,e,n){return r(this,void 0,void 0,(function(){return i(this,(function(r){return this.path(function(t,e){switch(e){case 0:return is(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return is(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return is(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return is(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}}(n,e)),this.ctx.fillStyle=oe(t),this.ctx.fill(),[2]}))}))},t.prototype.renderNodeBackgroundAndBorders=function(t){return r(this,void 0,void 0,(function(){var e,n,r,s,o,a,l,u,c=this;return i(this,(function(i){switch(i.label){case 0:return this.applyEffects(t.effects,2),n=!se((e=t.container.styles).backgroundColor)||e.backgroundImage.length,r=[{style:e.borderTopStyle,color:e.borderTopColor},{style:e.borderRightStyle,color:e.borderRightColor},{style:e.borderBottomStyle,color:e.borderBottomColor},{style:e.borderLeftStyle,color:e.borderLeftColor}],s=ms(hs(e.backgroundClip,0),t.curves),n||e.boxShadow.length?(this.ctx.save(),this.path(s),this.ctx.clip(),se(e.backgroundColor)||(this.ctx.fillStyle=oe(e.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(t.container)]):[3,2];case 1:i.sent(),this.ctx.restore(),e.boxShadow.slice(0).reverse().forEach((function(e){c.ctx.save();var n,r,i,s,o=Xi(t.curves),a=e.inset?0:1e4,l=(n=(e.inset?1:-1)*e.spread.number-a,r=(e.inset?1:-1)*e.spread.number,i=e.spread.number*(e.inset?-2:2),s=e.spread.number*(e.inset?-2:2),o.map((function(t,e){switch(e){case 0:return t.add(n,r);case 1:return t.add(n+i,r);case 2:return t.add(n+i,r+s);case 3:return t.add(n,r+s)}return t})));e.inset?(c.path(o),c.ctx.clip(),c.mask(l)):(c.mask(o),c.ctx.clip(),c.path(l)),c.ctx.shadowOffsetX=e.offsetX.number+a,c.ctx.shadowOffsetY=e.offsetY.number,c.ctx.shadowColor=oe(e.color),c.ctx.shadowBlur=e.blur.number,c.ctx.fillStyle=e.inset?oe(e.color):"rgba(0,0,0,1)",c.ctx.fill(),c.ctx.restore()})),i.label=2;case 2:o=0,a=0,l=r,i.label=3;case 3:return a<l.length?(u=l[a]).style===Ye.NONE||se(u.color)?[3,5]:[4,this.renderBorder(u.color,o,t.curves)]:[3,7];case 4:i.sent(),i.label=5;case 5:o++,i.label=6;case 6:return a++,[3,3];case 7:return[2]}}))}))},t.prototype.render=function(t){return r(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=oe(this.options.backgroundColor),this.ctx.fillRect(this.options.x-this.options.scrollX,this.options.y-this.options.scrollY,this.options.width,this.options.height)),n=new es(t,[]),r=new ts(n),ns(n,r,r,i=[]),rs(n.container,i),[4,this.renderStack(r)];case 1:return e.sent(),this.applyEffects([],2),[2,this.canvas]}var n,r,i}))}))},t}(),As=function(t){return t instanceof Gr||t instanceof Wr||t instanceof Kr&&"radio"!==t.type&&"checkbox"!==t.type},ms=function(t,e){switch(t){case de.BORDER_BOX:return Xi(e);case de.CONTENT_BOX:return function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]}(e);case de.PADDING_BOX:default:return Yi(e)}},gs=function(t){switch(t){case $n.CENTER:return"center";case $n.RIGHT:return"right";case $n.LEFT:default:return"left"}},ys=function(){function t(t){this.canvas=t.canvas?t.canvas:document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.options=t,this.canvas.width=Math.floor(t.width*t.scale),this.canvas.height=Math.floor(t.height*t.scale),this.canvas.style.width=t.width+"px",this.canvas.style.height=t.height+"px",this.ctx.scale(this.options.scale,this.options.scale),this.ctx.translate(-t.x+t.scrollX,-t.y+t.scrollY),Ie.getInstance(t.id).debug("EXPERIMENTAL ForeignObject renderer initialized ("+t.width+"x"+t.height+" at "+t.x+","+t.y+") with scale "+t.scale)}return t.prototype.render=function(t){return r(this,void 0,void 0,(function(){var e,n;return i(this,(function(r){switch(r.label){case 0:return e=Be(Math.max(this.options.windowWidth,this.options.width)*this.options.scale,Math.max(this.options.windowHeight,this.options.height)*this.options.scale,this.options.scrollX*this.options.scale,this.options.scrollY*this.options.scale,t),[4,ws(e)];case 1:return n=r.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=oe(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(n,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}}))}))},t}(),ws=function(t){return new Promise((function(e,n){var r=new Image;r.onload=function(){e(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(t))}))},bs=function(t){return ie(Lt.create(t).parseComponentValue())};return Fe.setContext(window),function(t,e){return void 0===e&&(e={}),function(t,e){return r(void 0,void 0,void 0,(function(){var r,a,l,u,c,h,d,p,f,A,m,g,y,w,b,v,x,_,C,S,E,B,k;return i(this,(function(i){switch(i.label){case 0:if(!(r=t.ownerDocument))throw new Error("Element is not attached to a Document");if(!(a=r.defaultView))throw new Error("Document is not attached to a Window");return l=(Math.round(1e3*Math.random())+Date.now()).toString(16),u=hi(t)||"HTML"===t.tagName?function(t){var e=t.body,n=t.documentElement;if(!e||!n)throw new Error("Unable to get document size");var r=Math.max(Math.max(e.scrollWidth,n.scrollWidth),Math.max(e.offsetWidth,n.offsetWidth),Math.max(e.clientWidth,n.clientWidth)),i=Math.max(Math.max(e.scrollHeight,n.scrollHeight),Math.max(e.offsetHeight,n.offsetHeight),Math.max(e.clientHeight,n.clientHeight));return new s(0,0,r,i)}(r):o(t),c=u.width,h=u.height,d=u.left,p=u.top,f=n({},{allowTaint:!1,imageTimeout:15e3,proxy:void 0,useCORS:!1},e),A={backgroundColor:"#ffffff",cache:e.cache?e.cache:Fe.create(l,f),logging:!0,removeContainer:!0,foreignObjectRendering:!1,scale:a.devicePixelRatio||1,windowWidth:a.innerWidth,windowHeight:a.innerHeight,scrollX:a.pageXOffset,scrollY:a.pageYOffset,x:d,y:p,width:Math.ceil(c),height:Math.ceil(h),id:l},m=n({},A,f,e),g=new s(m.scrollX,m.scrollY,m.windowWidth,m.windowHeight),Ie.create({id:l,enabled:m.logging}),Ie.getInstance(l).debug("Starting document clone"),y=new Ii(t,{id:l,onclone:m.onclone,ignoreElements:m.ignoreElements,inlineImages:m.foreignObjectRendering,copyStyles:m.foreignObjectRendering}),(w=y.clonedReferenceElement)?[4,y.toIFrame(r,g)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return b=i.sent(),v=r.documentElement?bs(getComputedStyle(r.documentElement).backgroundColor):Ae.TRANSPARENT,x=r.body?bs(getComputedStyle(r.body).backgroundColor):Ae.TRANSPARENT,C="string"==typeof(_=e.backgroundColor)?bs(_):null===_?Ae.TRANSPARENT:4294967295,S=t===r.documentElement?se(v)?se(x)?C:x:v:C,E={id:l,cache:m.cache,canvas:m.canvas,backgroundColor:S,scale:m.scale,x:m.x,y:m.y,scrollX:m.scrollX,scrollY:m.scrollY,width:m.width,height:m.height,windowWidth:m.windowWidth,windowHeight:m.windowHeight},m.foreignObjectRendering?(Ie.getInstance(l).debug("Document cloned, using foreign object rendering"),[4,new ys(E).render(w)]):[3,3];case 2:return B=i.sent(),[3,5];case 3:return Ie.getInstance(l).debug("Document cloned, using computed rendering"),Fe.attachInstance(m.cache),Ie.getInstance(l).debug("Starting DOM parsing"),k=ei(w),Fe.detachInstance(),S===k.styles.backgroundColor&&(k.styles.backgroundColor=Ae.TRANSPARENT),Ie.getInstance(l).debug("Starting renderer"),[4,new fs(E).render(k)];case 4:B=i.sent(),i.label=5;case 5:return!0===m.removeContainer&&(Ii.destroy(b)||Ie.getInstance(l).error("Cannot detach cloned iframe as it is not in the DOM anymore")),Ie.getInstance(l).debug("Finished rendering"),Ie.destroy(l),Fe.destroy(l),[2,B]}}))}))}(t,e)}}()},xOOu:function(t,e,n){t.exports=function t(e,n,r){function i(o,a){if(!n[o]){if(!e[o]){if(s)return s(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[o]={exports:{}};e[o][0].call(u.exports,(function(t){return i(e[o][1][t]||t)}),u,u.exports,t,e,n,r)}return n[o].exports}for(var s=!1,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(t,e,n){"use strict";var r=t("./utils"),i=t("./support"),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(t){for(var e,n,i,o,a,l,u=[],c=0,h=t.length,d=h,p="string"!==r.getTypeOf(t);c<t.length;)d=h-c,i=p?(e=t[c++],n=c<h?t[c++]:0,c<h?t[c++]:0):(e=t.charCodeAt(c++),n=c<h?t.charCodeAt(c++):0,c<h?t.charCodeAt(c++):0),o=(3&e)<<4|n>>4,a=1<d?(15&n)<<2|i>>6:64,l=2<d?63&i:64,u.push(s.charAt(e>>2)+s.charAt(o)+s.charAt(a)+s.charAt(l));return u.join("")},n.decode=function(t){var e,n,r,o,a,l,u=0,c=0,h="data:";if(t.substr(0,h.length)===h)throw new Error("Invalid base64 input, it looks like a data url.");var d,p=3*(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(t.charAt(t.length-1)===s.charAt(64)&&p--,t.charAt(t.length-2)===s.charAt(64)&&p--,p%1!=0)throw new Error("Invalid base64 input, bad content length.");for(d=i.uint8array?new Uint8Array(0|p):new Array(0|p);u<t.length;)e=s.indexOf(t.charAt(u++))<<2|(o=s.indexOf(t.charAt(u++)))>>4,n=(15&o)<<4|(a=s.indexOf(t.charAt(u++)))>>2,r=(3&a)<<6|(l=s.indexOf(t.charAt(u++))),d[c++]=e,64!==a&&(d[c++]=n),64!==l&&(d[c++]=r);return d}},{"./support":30,"./utils":32}],2:[function(t,e,n){"use strict";var r=t("./external"),i=t("./stream/DataWorker"),s=t("./stream/DataLengthProbe"),o=t("./stream/Crc32Probe");function a(t,e,n,r,i){this.compressedSize=t,this.uncompressedSize=e,this.crc32=n,this.compression=r,this.compressedContent=i}s=t("./stream/DataLengthProbe"),a.prototype={getContentWorker:function(){var t=new i(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new s("data_length")),e=this;return t.on("end",(function(){if(this.streamInfo.data_length!==e.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),t},getCompressedWorker:function(){return new i(r.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},a.createWorkerFrom=function(t,e,n){return t.pipe(new o).pipe(new s("uncompressedSize")).pipe(e.compressWorker(n)).pipe(new s("compressedSize")).withStreamInfo("compression",e)},e.exports=a},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,e,n){"use strict";var r=t("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(t){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},n.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,e,n){"use strict";var r=t("./utils"),i=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();e.exports=function(t,e){return void 0!==t&&t.length?"string"!==r.getTypeOf(t)?function(t,e,n,r){var s=i,o=0+n;t^=-1;for(var a=0;a<o;a++)t=t>>>8^s[255&(t^e[a])];return-1^t}(0|e,t,t.length):function(t,e,n,r){var s=i,o=0+n;t^=-1;for(var a=0;a<o;a++)t=t>>>8^s[255&(t^e.charCodeAt(a))];return-1^t}(0|e,t,t.length):0}},{"./utils":32}],5:[function(t,e,n){"use strict";n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(t,e,n){"use strict";var r;r="undefined"!=typeof Promise?Promise:t("lie"),e.exports={Promise:r}},{lie:37}],7:[function(t,e,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,i=t("pako"),s=t("./utils"),o=t("./stream/GenericWorker"),a=r?"uint8array":"array";function l(t,e){o.call(this,"FlateWorker/"+t),this._pako=null,this._pakoAction=t,this._pakoOptions=e,this.meta={}}n.magic="\b\0",s.inherits(l,o),l.prototype.processChunk=function(t){this.meta=t.meta,null===this._pako&&this._createPako(),this._pako.push(s.transformTo(a,t.data),!1)},l.prototype.flush=function(){o.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},l.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this._pako=null},l.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var t=this;this._pako.onData=function(e){t.push({data:e,meta:t.meta})}},n.compressWorker=function(t){return new l("Deflate",t)},n.uncompressWorker=function(){return new l("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,e,n){"use strict";function r(t,e){var n,r="";for(n=0;n<e;n++)r+=String.fromCharCode(255&t),t>>>=8;return r}function i(t,e,n,i,o,c){var h,d,p=t.file,f=t.compression,A=c!==a.utf8encode,m=s.transformTo("string",c(p.name)),g=s.transformTo("string",a.utf8encode(p.name)),y=p.comment,w=s.transformTo("string",c(y)),b=s.transformTo("string",a.utf8encode(y)),v=g.length!==p.name.length,x=b.length!==y.length,_="",C="",S="",E=p.dir,B=p.date,k={crc32:0,compressedSize:0,uncompressedSize:0};e&&!n||(k.crc32=t.crc32,k.compressedSize=t.compressedSize,k.uncompressedSize=t.uncompressedSize);var N=0;e&&(N|=8),A||!v&&!x||(N|=2048);var I=0,F=0;E&&(I|=16),"UNIX"===o?(F=798,I|=function(t,e){var n=t;return t||(n=e?16893:33204),(65535&n)<<16}(p.unixPermissions,E)):(F=20,I|=function(t){return 63&(t||0)}(p.dosPermissions)),h=B.getUTCHours(),h<<=6,h|=B.getUTCMinutes(),h<<=5,h|=B.getUTCSeconds()/2,d=B.getUTCFullYear()-1980,d<<=4,d|=B.getUTCMonth()+1,d<<=5,d|=B.getUTCDate(),v&&(C=r(1,1)+r(l(m),4)+g,_+="up"+r(C.length,2)+C),x&&(S=r(1,1)+r(l(w),4)+b,_+="uc"+r(S.length,2)+S);var T="";return T+="\n\0",T+=r(N,2),T+=f.magic,T+=r(h,2),T+=r(d,2),T+=r(k.crc32,4),T+=r(k.compressedSize,4),T+=r(k.uncompressedSize,4),T+=r(m.length,2),T+=r(_.length,2),{fileRecord:u.LOCAL_FILE_HEADER+T+m+_,dirRecord:u.CENTRAL_FILE_HEADER+r(F,2)+T+r(w.length,2)+"\0\0\0\0"+r(I,4)+r(i,4)+m+_+w}}var s=t("../utils"),o=t("../stream/GenericWorker"),a=t("../utf8"),l=t("../crc32"),u=t("../signature");function c(t,e,n,r){o.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=e,this.zipPlatform=n,this.encodeFileName=r,this.streamFiles=t,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}s.inherits(c,o),c.prototype.push=function(t){var e=t.meta.percent||0,n=this.entriesCount,r=this._sources.length;this.accumulate?this.contentBuffer.push(t):(this.bytesWritten+=t.data.length,o.prototype.push.call(this,{data:t.data,meta:{currentFile:this.currentFile,percent:n?(e+100*(n-r-1))/n:100}}))},c.prototype.openedSource=function(t){this.currentSourceOffset=this.bytesWritten,this.currentFile=t.file.name;var e=this.streamFiles&&!t.file.dir;if(e){var n=i(t,e,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:n.fileRecord,meta:{percent:0}})}else this.accumulate=!0},c.prototype.closedSource=function(t){this.accumulate=!1;var e=this.streamFiles&&!t.file.dir,n=i(t,e,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(n.dirRecord),e)this.push({data:function(t){return u.DATA_DESCRIPTOR+r(t.crc32,4)+r(t.compressedSize,4)+r(t.uncompressedSize,4)}(t),meta:{percent:100}});else for(this.push({data:n.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},c.prototype.flush=function(){for(var t=this.bytesWritten,e=0;e<this.dirRecords.length;e++)this.push({data:this.dirRecords[e],meta:{percent:100}});var n=function(t,e,n,i,o){var a=s.transformTo("string",o(i));return u.CENTRAL_DIRECTORY_END+"\0\0\0\0"+r(t,2)+r(t,2)+r(e,4)+r(n,4)+r(a.length,2)+a}(this.dirRecords.length,this.bytesWritten-t,t,this.zipComment,this.encodeFileName);this.push({data:n,meta:{percent:100}})},c.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},c.prototype.registerPrevious=function(t){this._sources.push(t);var e=this;return t.on("data",(function(t){e.processChunk(t)})),t.on("end",(function(){e.closedSource(e.previous.streamInfo),e._sources.length?e.prepareNextSource():e.end()})),t.on("error",(function(t){e.error(t)})),this},c.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},c.prototype.error=function(t){var e=this._sources;if(!o.prototype.error.call(this,t))return!1;for(var n=0;n<e.length;n++)try{e[n].error(t)}catch(t){}return!0},c.prototype.lock=function(){o.prototype.lock.call(this);for(var t=this._sources,e=0;e<t.length;e++)t[e].lock()},e.exports=c},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,e,n){"use strict";var r=t("../compressions"),i=t("./ZipFileWorker");n.generateWorker=function(t,e,n){var s=new i(e.streamFiles,n,e.platform,e.encodeFileName),o=0;try{t.forEach((function(t,n){o++;var i=function(t,e){var n=t||e,i=r[n];if(!i)throw new Error(n+" is not a valid compression method !");return i}(n.options.compression,e.compression),a=n.dir,l=n.date;n._compressWorker(i,n.options.compressionOptions||e.compressionOptions||{}).withStreamInfo("file",{name:t,dir:a,date:l,comment:n.comment||"",unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions}).pipe(s)})),s.entriesCount=o}catch(t){s.error(t)}return s}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,e,n){"use strict";function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files={},this.comment=null,this.root="",this.clone=function(){var t=new r;for(var e in this)"function"!=typeof this[e]&&(t[e]=this[e]);return t}}(r.prototype=t("./object")).loadAsync=t("./load"),r.support=t("./support"),r.defaults=t("./defaults"),r.version="3.5.0",r.loadAsync=function(t,e){return(new r).loadAsync(t,e)},r.external=t("./external"),e.exports=r},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,e,n){"use strict";var r=t("./utils"),i=t("./external"),s=t("./utf8"),o=(r=t("./utils"),t("./zipEntries")),a=t("./stream/Crc32Probe"),l=t("./nodejsUtils");function u(t){return new i.Promise((function(e,n){var r=t.decompressed.getContentWorker().pipe(new a);r.on("error",(function(t){n(t)})).on("end",(function(){r.streamInfo.crc32!==t.decompressed.crc32?n(new Error("Corrupted zip : CRC32 mismatch")):e()})).resume()}))}e.exports=function(t,e){var n=this;return e=r.extend(e||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:s.utf8decode}),l.isNode&&l.isStream(t)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):r.prepareContent("the loaded zip file",t,!0,e.optimizedBinaryString,e.base64).then((function(t){var n=new o(e);return n.load(t),n})).then((function(t){var n=[i.Promise.resolve(t)],r=t.files;if(e.checkCRC32)for(var s=0;s<r.length;s++)n.push(u(r[s]));return i.Promise.all(n)})).then((function(t){for(var r=t.shift(),i=r.files,s=0;s<i.length;s++){var o=i[s];n.file(o.fileNameStr,o.decompressed,{binary:!0,optimizedBinaryString:!0,date:o.date,dir:o.dir,comment:o.fileCommentStr.length?o.fileCommentStr:null,unixPermissions:o.unixPermissions,dosPermissions:o.dosPermissions,createFolders:e.createFolders})}return r.zipComment.length&&(n.comment=r.zipComment),n}))}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,e,n){"use strict";var r=t("../utils"),i=t("../stream/GenericWorker");function s(t,e){i.call(this,"Nodejs stream input adapter for "+t),this._upstreamEnded=!1,this._bindStream(e)}r.inherits(s,i),s.prototype._bindStream=function(t){var e=this;(this._stream=t).pause(),t.on("data",(function(t){e.push({data:t,meta:{percent:0}})})).on("error",(function(t){e.isPaused?this.generatedError=t:e.error(t)})).on("end",(function(){e.isPaused?e._upstreamEnded=!0:e.end()}))},s.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},s.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},e.exports=s},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,e,n){"use strict";var r=t("readable-stream").Readable;function i(t,e,n){r.call(this,e),this._helper=t;var i=this;t.on("data",(function(t,e){i.push(t)||i._helper.pause(),n&&n(e)})).on("error",(function(t){i.emit("error",t)})).on("end",(function(){i.push(null)}))}t("../utils").inherits(i,r),i.prototype._read=function(){this._helper.resume()},e.exports=i},{"../utils":32,"readable-stream":16}],14:[function(t,e,n){"use strict";e.exports={isNode:"undefined"!=typeof Buffer,newBufferFrom:function(t,e){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(t,e);if("number"==typeof t)throw new Error('The "data" argument must not be a number');return new Buffer(t,e)},allocBuffer:function(t){if(Buffer.alloc)return Buffer.alloc(t);var e=new Buffer(t);return e.fill(0),e},isBuffer:function(t){return Buffer.isBuffer(t)},isStream:function(t){return t&&"function"==typeof t.on&&"function"==typeof t.pause&&"function"==typeof t.resume}}},{}],15:[function(t,e,n){"use strict";function r(t,e,n){var r,i,a=s.getTypeOf(e),h=s.extend(n||{},l);h.date=h.date||new Date,null!==h.compression&&(h.compression=h.compression.toUpperCase()),"string"==typeof h.unixPermissions&&(h.unixPermissions=parseInt(h.unixPermissions,8)),h.unixPermissions&&16384&h.unixPermissions&&(h.dir=!0),h.dosPermissions&&16&h.dosPermissions&&(h.dir=!0),h.dir&&(t=A(t)),h.createFolders&&(r=f(t))&&m.call(this,r,!0),n&&void 0!==n.binary||(h.binary=!("string"===a&&!1===h.binary&&!1===h.base64)),(e instanceof u&&0===e.uncompressedSize||h.dir||!e||0===e.length)&&(h.base64=!1,h.binary=!0,e="",h.compression="STORE",a="string"),i=e instanceof u||e instanceof o?e:d.isNode&&d.isStream(e)?new p(t,e):s.prepareContent(t,e,h.binary,h.optimizedBinaryString,h.base64);var g=new c(t,i,h);this.files[t]=g}var i=t("./utf8"),s=t("./utils"),o=t("./stream/GenericWorker"),a=t("./stream/StreamHelper"),l=t("./defaults"),u=t("./compressedObject"),c=t("./zipObject"),h=t("./generate"),d=t("./nodejsUtils"),p=t("./nodejs/NodejsStreamInputAdapter"),f=function(t){"/"===t.slice(-1)&&(t=t.substring(0,t.length-1));var e=t.lastIndexOf("/");return 0<e?t.substring(0,e):""},A=function(t){return"/"!==t.slice(-1)&&(t+="/"),t},m=function(t,e){return e=void 0!==e?e:l.createFolders,t=A(t),this.files[t]||r.call(this,t,null,{dir:!0,createFolders:e}),this.files[t]};function g(t){return"[object RegExp]"===Object.prototype.toString.call(t)}var y={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(t){var e,n,r;for(e in this.files)this.files.hasOwnProperty(e)&&(r=this.files[e],(n=e.slice(this.root.length,e.length))&&e.slice(0,this.root.length)===this.root&&t(n,r))},filter:function(t){var e=[];return this.forEach((function(n,r){t(n,r)&&e.push(r)})),e},file:function(t,e,n){if(1!==arguments.length)return r.call(this,t=this.root+t,e,n),this;if(g(t)){var i=t;return this.filter((function(t,e){return!e.dir&&i.test(t)}))}var s=this.files[this.root+t];return s&&!s.dir?s:null},folder:function(t){if(!t)return this;if(g(t))return this.filter((function(e,n){return n.dir&&t.test(e)}));var e=m.call(this,this.root+t),n=this.clone();return n.root=e.name,n},remove:function(t){var e=this.files[t=this.root+t];if(e||("/"!==t.slice(-1)&&(t+="/"),e=this.files[t]),e&&!e.dir)delete this.files[t];else for(var n=this.filter((function(e,n){return n.name.slice(0,t.length)===t})),r=0;r<n.length;r++)delete this.files[n[r].name];return this},generate:function(t){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(t){var e,n={};try{if((n=s.extend(t||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=n.type.toLowerCase(),n.compression=n.compression.toUpperCase(),"binarystring"===n.type&&(n.type="string"),!n.type)throw new Error("No output type specified.");s.checkSupport(n.type),"darwin"!==n.platform&&"freebsd"!==n.platform&&"linux"!==n.platform&&"sunos"!==n.platform||(n.platform="UNIX"),"win32"===n.platform&&(n.platform="DOS"),e=h.generateWorker(this,n,n.comment||this.comment||"")}catch(t){(e=new o("error")).error(t)}return new a(e,n.type||"string",n.mimeType)},generateAsync:function(t,e){return this.generateInternalStream(t).accumulate(e)},generateNodeStream:function(t,e){return(t=t||{}).type||(t.type="nodebuffer"),this.generateInternalStream(t).toNodejsStream(e)}};e.exports=y},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,e,n){e.exports=t("stream")},{stream:void 0}],17:[function(t,e,n){"use strict";var r=t("./DataReader");function i(t){r.call(this,t);for(var e=0;e<this.data.length;e++)t[e]=255&t[e]}t("../utils").inherits(i,r),i.prototype.byteAt=function(t){return this.data[this.zero+t]},i.prototype.lastIndexOfSignature=function(t){for(var e=t.charCodeAt(0),n=t.charCodeAt(1),r=t.charCodeAt(2),i=t.charCodeAt(3),s=this.length-4;0<=s;--s)if(this.data[s]===e&&this.data[s+1]===n&&this.data[s+2]===r&&this.data[s+3]===i)return s-this.zero;return-1},i.prototype.readAndCheckSignature=function(t){var e=t.charCodeAt(0),n=t.charCodeAt(1),r=t.charCodeAt(2),i=t.charCodeAt(3),s=this.readData(4);return e===s[0]&&n===s[1]&&r===s[2]&&i===s[3]},i.prototype.readData=function(t){if(this.checkOffset(t),0===t)return[];var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=i},{"../utils":32,"./DataReader":18}],18:[function(t,e,n){"use strict";var r=t("../utils");function i(t){this.data=t,this.length=t.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(t){this.checkIndex(this.index+t)},checkIndex:function(t){if(this.length<this.zero+t||t<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+t+"). Corrupted zip ?")},setIndex:function(t){this.checkIndex(t),this.index=t},skip:function(t){this.setIndex(this.index+t)},byteAt:function(t){},readInt:function(t){var e,n=0;for(this.checkOffset(t),e=this.index+t-1;e>=this.index;e--)n=(n<<8)+this.byteAt(e);return this.index+=t,n},readString:function(t){return r.transformTo("string",this.readData(t))},readData:function(t){},lastIndexOfSignature:function(t){},readAndCheckSignature:function(t){},readDate:function(){var t=this.readInt(4);return new Date(Date.UTC(1980+(t>>25&127),(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(31&t)<<1))}},e.exports=i},{"../utils":32}],19:[function(t,e,n){"use strict";var r=t("./Uint8ArrayReader");function i(t){r.call(this,t)}t("../utils").inherits(i,r),i.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=i},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,e,n){"use strict";var r=t("./DataReader");function i(t){r.call(this,t)}t("../utils").inherits(i,r),i.prototype.byteAt=function(t){return this.data.charCodeAt(this.zero+t)},i.prototype.lastIndexOfSignature=function(t){return this.data.lastIndexOf(t)-this.zero},i.prototype.readAndCheckSignature=function(t){return t===this.readData(4)},i.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=i},{"../utils":32,"./DataReader":18}],21:[function(t,e,n){"use strict";var r=t("./ArrayReader");function i(t){r.call(this,t)}t("../utils").inherits(i,r),i.prototype.readData=function(t){if(this.checkOffset(t),0===t)return new Uint8Array(0);var e=this.data.subarray(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=i},{"../utils":32,"./ArrayReader":17}],22:[function(t,e,n){"use strict";var r=t("../utils"),i=t("../support"),s=t("./ArrayReader"),o=t("./StringReader"),a=t("./NodeBufferReader"),l=t("./Uint8ArrayReader");e.exports=function(t){var e=r.getTypeOf(t);return r.checkSupport(e),"string"!==e||i.uint8array?"nodebuffer"===e?new a(t):i.uint8array?new l(r.transformTo("uint8array",t)):new s(r.transformTo("array",t)):new o(t)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,e,n){"use strict";n.LOCAL_FILE_HEADER="PK\x03\x04",n.CENTRAL_FILE_HEADER="PK\x01\x02",n.CENTRAL_DIRECTORY_END="PK\x05\x06",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x06\x07",n.ZIP64_CENTRAL_DIRECTORY_END="PK\x06\x06",n.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,e,n){"use strict";var r=t("./GenericWorker"),i=t("../utils");function s(t){r.call(this,"ConvertWorker to "+t),this.destType=t}i.inherits(s,r),s.prototype.processChunk=function(t){this.push({data:i.transformTo(this.destType,t.data),meta:t.meta})},e.exports=s},{"../utils":32,"./GenericWorker":28}],25:[function(t,e,n){"use strict";var r=t("./GenericWorker"),i=t("../crc32");function s(){r.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(s,r),s.prototype.processChunk=function(t){this.streamInfo.crc32=i(t.data,this.streamInfo.crc32||0),this.push(t)},e.exports=s},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,e,n){"use strict";var r=t("../utils"),i=t("./GenericWorker");function s(t){i.call(this,"DataLengthProbe for "+t),this.propName=t,this.withStreamInfo(t,0)}r.inherits(s,i),s.prototype.processChunk=function(t){t&&(this.streamInfo[this.propName]=(this.streamInfo[this.propName]||0)+t.data.length),i.prototype.processChunk.call(this,t)},e.exports=s},{"../utils":32,"./GenericWorker":28}],27:[function(t,e,n){"use strict";var r=t("../utils"),i=t("./GenericWorker");function s(t){i.call(this,"DataWorker");var e=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,t.then((function(t){e.dataIsReady=!0,e.data=t,e.max=t&&t.length||0,e.type=r.getTypeOf(t),e.isPaused||e._tickAndRepeat()}),(function(t){e.error(t)}))}r.inherits(s,i),s.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},s.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,r.delay(this._tickAndRepeat,[],this)),!0)},s.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(r.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var t=null,e=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":t=this.data.substring(this.index,e);break;case"uint8array":t=this.data.subarray(this.index,e);break;case"array":case"nodebuffer":t=this.data.slice(this.index,e)}return this.index=e,this.push({data:t,meta:{percent:this.max?this.index/this.max*100:0}})},e.exports=s},{"../utils":32,"./GenericWorker":28}],28:[function(t,e,n){"use strict";function r(t){this.name=t||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(t){this.emit("data",t)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(t){this.emit("error",t)}return!0},error:function(t){return!this.isFinished&&(this.isPaused?this.generatedError=t:(this.isFinished=!0,this.emit("error",t),this.previous&&this.previous.error(t),this.cleanUp()),!0)},on:function(t,e){return this._listeners[t].push(e),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(t,e){if(this._listeners[t])for(var n=0;n<this._listeners[t].length;n++)this._listeners[t][n].call(this,e)},pipe:function(t){return t.registerPrevious(this)},registerPrevious:function(t){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=t.streamInfo,this.mergeStreamInfo(),this.previous=t;var e=this;return t.on("data",(function(t){e.processChunk(t)})),t.on("end",(function(){e.end()})),t.on("error",(function(t){e.error(t)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var t=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),t=!0),this.previous&&this.previous.resume(),!t},flush:function(){},processChunk:function(t){this.push(t)},withStreamInfo:function(t,e){return this.extraStreamInfo[t]=e,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var t in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(t)&&(this.streamInfo[t]=this.extraStreamInfo[t])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var t="Worker "+this.name;return this.previous?this.previous+" -> "+t:t}},e.exports=r},{}],29:[function(t,e,n){"use strict";var r=t("../utils"),i=t("./ConvertWorker"),s=t("./GenericWorker"),o=t("../base64"),a=t("../support"),l=t("../external"),u=null;if(a.nodestream)try{u=t("../nodejs/NodejsStreamOutputAdapter")}catch(t){}function c(t,e,n){var o=e;switch(e){case"blob":case"arraybuffer":o="uint8array";break;case"base64":o="string"}try{this._internalType=o,this._outputType=e,this._mimeType=n,r.checkSupport(o),this._worker=t.pipe(new i(o)),t.lock()}catch(t){this._worker=new s("error"),this._worker.error(t)}}c.prototype={accumulate:function(t){return function(t,e){return new l.Promise((function(n,i){var s=[],a=t._internalType,l=t._outputType,u=t._mimeType;t.on("data",(function(t,n){s.push(t),e&&e(n)})).on("error",(function(t){s=[],i(t)})).on("end",(function(){try{var t=function(t,e,n){switch(t){case"blob":return r.newBlob(r.transformTo("arraybuffer",e),n);case"base64":return o.encode(e);default:return r.transformTo(t,e)}}(l,function(t,e){var n,r=0,i=null,s=0;for(n=0;n<e.length;n++)s+=e[n].length;switch(t){case"string":return e.join("");case"array":return Array.prototype.concat.apply([],e);case"uint8array":for(i=new Uint8Array(s),n=0;n<e.length;n++)i.set(e[n],r),r+=e[n].length;return i;case"nodebuffer":return Buffer.concat(e);default:throw new Error("concat : unsupported type '"+t+"'")}}(a,s),u);n(t)}catch(t){i(t)}s=[]})).resume()}))}(this,t)},on:function(t,e){var n=this;return this._worker.on(t,"data"===t?function(t){e.call(n,t.data,t.meta)}:function(){r.delay(e,arguments,n)}),this},resume:function(){return r.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(t){if(r.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new u(this,{objectMode:"nodebuffer"!==this._outputType},t)}},e.exports=c},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,e,n){"use strict";if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,n.nodebuffer="undefined"!=typeof Buffer,n.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)n.blob=!1;else{var r=new ArrayBuffer(0);try{n.blob=0===new Blob([r],{type:"application/zip"}).size}catch(t){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(r),n.blob=0===i.getBlob("application/zip").size}catch(t){n.blob=!1}}}try{n.nodestream=!!t("readable-stream").Readable}catch(t){n.nodestream=!1}},{"readable-stream":16}],31:[function(t,e,n){"use strict";for(var r=t("./utils"),i=t("./support"),s=t("./nodejsUtils"),o=t("./stream/GenericWorker"),a=new Array(256),l=0;l<256;l++)a[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;function u(){o.call(this,"utf-8 decode"),this.leftOver=null}function c(){o.call(this,"utf-8 encode")}a[254]=a[254]=1,n.utf8encode=function(t){return i.nodebuffer?s.newBufferFrom(t,"utf-8"):function(t){var e,n,r,s,o,a=t.length,l=0;for(s=0;s<a;s++)55296==(64512&(n=t.charCodeAt(s)))&&s+1<a&&56320==(64512&(r=t.charCodeAt(s+1)))&&(n=65536+(n-55296<<10)+(r-56320),s++),l+=n<128?1:n<2048?2:n<65536?3:4;for(e=i.uint8array?new Uint8Array(l):new Array(l),s=o=0;o<l;s++)55296==(64512&(n=t.charCodeAt(s)))&&s+1<a&&56320==(64512&(r=t.charCodeAt(s+1)))&&(n=65536+(n-55296<<10)+(r-56320),s++),n<128?e[o++]=n:(n<2048?e[o++]=192|n>>>6:(n<65536?e[o++]=224|n>>>12:(e[o++]=240|n>>>18,e[o++]=128|n>>>12&63),e[o++]=128|n>>>6&63),e[o++]=128|63&n);return e}(t)},n.utf8decode=function(t){return i.nodebuffer?r.transformTo("nodebuffer",t).toString("utf-8"):function(t){var e,n,i,s,o=t.length,l=new Array(2*o);for(e=n=0;e<o;)if((i=t[e++])<128)l[n++]=i;else if(4<(s=a[i]))l[n++]=65533,e+=s-1;else{for(i&=2===s?31:3===s?15:7;1<s&&e<o;)i=i<<6|63&t[e++],s--;1<s?l[n++]=65533:i<65536?l[n++]=i:(l[n++]=55296|(i-=65536)>>10&1023,l[n++]=56320|1023&i)}return l.length!==n&&(l.subarray?l=l.subarray(0,n):l.length=n),r.applyFromCharCode(l)}(t=r.transformTo(i.uint8array?"uint8array":"array",t))},r.inherits(u,o),u.prototype.processChunk=function(t){var e=r.transformTo(i.uint8array?"uint8array":"array",t.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var s=e;(e=new Uint8Array(s.length+this.leftOver.length)).set(this.leftOver,0),e.set(s,this.leftOver.length)}else e=this.leftOver.concat(e);this.leftOver=null}var o=function(t,e){var n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;0<=n&&128==(192&t[n]);)n--;return n<0||0===n?e:n+a[t[n]]>e?n:e}(e),l=e;o!==e.length&&(i.uint8array?(l=e.subarray(0,o),this.leftOver=e.subarray(o,e.length)):(l=e.slice(0,o),this.leftOver=e.slice(o,e.length))),this.push({data:n.utf8decode(l),meta:t.meta})},u.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=u,r.inherits(c,o),c.prototype.processChunk=function(t){this.push({data:n.utf8encode(t.data),meta:t.meta})},n.Utf8EncodeWorker=c},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,e,n){"use strict";var r=t("./support"),i=t("./base64"),s=t("./nodejsUtils"),o=t("set-immediate-shim"),a=t("./external");function l(t){return t}function u(t,e){for(var n=0;n<t.length;++n)e[n]=255&t.charCodeAt(n);return e}n.newBlob=function(e,r){n.checkSupport("blob");try{return new Blob([e],{type:r})}catch(t){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return i.append(e),i.getBlob(r)}catch(t){throw new Error("Bug : can't construct the Blob.")}}};var c={stringifyByChunk:function(t,e,n){var r=[],i=0,s=t.length;if(s<=n)return String.fromCharCode.apply(null,t);for(;i<s;)r.push(String.fromCharCode.apply(null,"array"===e||"nodebuffer"===e?t.slice(i,Math.min(i+n,s)):t.subarray(i,Math.min(i+n,s)))),i+=n;return r.join("")},stringifyByChar:function(t){for(var e="",n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},applyCanBeUsed:{uint8array:function(){try{return r.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(t){return!1}}(),nodebuffer:function(){try{return r.nodebuffer&&1===String.fromCharCode.apply(null,s.allocBuffer(1)).length}catch(t){return!1}}()}};function h(t){var e=65536,r=n.getTypeOf(t),i=!0;if("uint8array"===r?i=c.applyCanBeUsed.uint8array:"nodebuffer"===r&&(i=c.applyCanBeUsed.nodebuffer),i)for(;1<e;)try{return c.stringifyByChunk(t,r,e)}catch(t){e=Math.floor(e/2)}return c.stringifyByChar(t)}function d(t,e){for(var n=0;n<t.length;n++)e[n]=t[n];return e}n.applyFromCharCode=h;var p={};p.string={string:l,array:function(t){return u(t,new Array(t.length))},arraybuffer:function(t){return p.string.uint8array(t).buffer},uint8array:function(t){return u(t,new Uint8Array(t.length))},nodebuffer:function(t){return u(t,s.allocBuffer(t.length))}},p.array={string:h,array:l,arraybuffer:function(t){return new Uint8Array(t).buffer},uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return s.newBufferFrom(t)}},p.arraybuffer={string:function(t){return h(new Uint8Array(t))},array:function(t){return d(new Uint8Array(t),new Array(t.byteLength))},arraybuffer:l,uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return s.newBufferFrom(new Uint8Array(t))}},p.uint8array={string:h,array:function(t){return d(t,new Array(t.length))},arraybuffer:function(t){return t.buffer},uint8array:l,nodebuffer:function(t){return s.newBufferFrom(t)}},p.nodebuffer={string:h,array:function(t){return d(t,new Array(t.length))},arraybuffer:function(t){return p.nodebuffer.uint8array(t).buffer},uint8array:function(t){return d(t,new Uint8Array(t.length))},nodebuffer:l},n.transformTo=function(t,e){if(e=e||"",!t)return e;n.checkSupport(t);var r=n.getTypeOf(e);return p[r][t](e)},n.getTypeOf=function(t){return"string"==typeof t?"string":"[object Array]"===Object.prototype.toString.call(t)?"array":r.nodebuffer&&s.isBuffer(t)?"nodebuffer":r.uint8array&&t instanceof Uint8Array?"uint8array":r.arraybuffer&&t instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(t){if(!r[t.toLowerCase()])throw new Error(t+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(t){var e,n,r="";for(n=0;n<(t||"").length;n++)r+="\\x"+((e=t.charCodeAt(n))<16?"0":"")+e.toString(16).toUpperCase();return r},n.delay=function(t,e,n){o((function(){t.apply(n||null,e||[])}))},n.inherits=function(t,e){function n(){}n.prototype=e.prototype,t.prototype=new n},n.extend=function(){var t,e,n={};for(t=0;t<arguments.length;t++)for(e in arguments[t])arguments[t].hasOwnProperty(e)&&void 0===n[e]&&(n[e]=arguments[t][e]);return n},n.prepareContent=function(t,e,s,o,l){return a.Promise.resolve(e).then((function(t){return r.blob&&(t instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(t)))&&"undefined"!=typeof FileReader?new a.Promise((function(e,n){var r=new FileReader;r.onload=function(t){e(t.target.result)},r.onerror=function(t){n(t.target.error)},r.readAsArrayBuffer(t)})):t})).then((function(e){var c=n.getTypeOf(e);return c?("arraybuffer"===c?e=n.transformTo("uint8array",e):"string"===c&&(l?e=i.decode(e):s&&!0!==o&&(e=function(t){return u(t,r.uint8array?new Uint8Array(t.length):new Array(t.length))}(e))),e):a.Promise.reject(new Error("Can't read the data of '"+t+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,"set-immediate-shim":54}],33:[function(t,e,n){"use strict";var r=t("./reader/readerFor"),i=t("./utils"),s=t("./signature"),o=t("./zipEntry"),a=(t("./utf8"),t("./support"));function l(t){this.files=[],this.loadOptions=t}l.prototype={checkSignature:function(t){if(!this.reader.readAndCheckSignature(t)){this.reader.index-=4;var e=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(e)+", expected "+i.pretty(t)+")")}},isSignature:function(t,e){var n=this.reader.index;this.reader.setIndex(t);var r=this.reader.readString(4)===e;return this.reader.setIndex(n),r},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var t=this.reader.readData(this.zipCommentLength),e=i.transformTo(a.uint8array?"uint8array":"array",t);this.zipComment=this.loadOptions.decodeFileName(e)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var t,e,n,r=this.zip64EndOfCentralSize-44;0<r;)t=this.reader.readInt(2),e=this.reader.readInt(4),n=this.reader.readData(e),this.zip64ExtensibleData[t]={id:t,length:e,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var t,e;for(t=0;t<this.files.length;t++)this.reader.setIndex((e=this.files[t]).localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),e.readLocalPart(this.reader),e.handleUTF8(),e.processAttributes()},readCentralDir:function(){var t;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(s.CENTRAL_FILE_HEADER);)(t=new o({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(t);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var t=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(t<0)throw this.isSignature(0,s.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(t);var e=t;if(this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(t=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(t),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,s.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var r=e-n;if(0<r)this.isSignature(e,s.CENTRAL_FILE_HEADER)||(this.reader.zero=r);else if(r<0)throw new Error("Corrupted zip: missing "+Math.abs(r)+" bytes.")},prepareReader:function(t){this.reader=r(t)},load:function(t){this.prepareReader(t),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},e.exports=l},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utf8":31,"./utils":32,"./zipEntry":34}],34:[function(t,e,n){"use strict";var r=t("./reader/readerFor"),i=t("./utils"),s=t("./compressedObject"),o=t("./crc32"),a=t("./utf8"),l=t("./compressions"),u=t("./support");function c(t,e){this.options=t,this.loadOptions=e}c.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(t){var e,n;if(t.skip(22),this.fileNameLength=t.readInt(2),n=t.readInt(2),this.fileName=t.readData(this.fileNameLength),t.skip(n),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(e=function(t){for(var e in l)if(l.hasOwnProperty(e)&&l[e].magic===t)return l[e];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new s(this.compressedSize,this.uncompressedSize,this.crc32,e,t.readData(this.compressedSize))},readCentralPart:function(t){this.versionMadeBy=t.readInt(2),t.skip(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4);var e=t.readInt(2);if(this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");t.skip(e),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var t=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==t&&(this.dosPermissions=63&this.externalFileAttributes),3==t&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(t){if(this.extraFields[1]){var e=r(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(t){var e,n,r,i=t.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});t.index+4<i;)e=t.readInt(2),n=t.readInt(2),r=t.readData(n),this.extraFields[e]={id:e,length:n,value:r};t.setIndex(i)},handleUTF8:function(){var t=u.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=a.utf8decode(this.fileName),this.fileCommentStr=a.utf8decode(this.fileComment);else{var e=this.findExtraFieldUnicodePath();if(null!==e)this.fileNameStr=e;else{var n=i.transformTo(t,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var r=this.findExtraFieldUnicodeComment();if(null!==r)this.fileCommentStr=r;else{var s=i.transformTo(t,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(s)}}},findExtraFieldUnicodePath:function(){var t=this.extraFields[28789];if(t){var e=r(t.value);return 1!==e.readInt(1)||o(this.fileName)!==e.readInt(4)?null:a.utf8decode(e.readData(t.length-5))}return null},findExtraFieldUnicodeComment:function(){var t=this.extraFields[25461];if(t){var e=r(t.value);return 1!==e.readInt(1)||o(this.fileComment)!==e.readInt(4)?null:a.utf8decode(e.readData(t.length-5))}return null}},e.exports=c},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,e,n){"use strict";function r(t,e,n){this.name=t,this.dir=n.dir,this.date=n.date,this.comment=n.comment,this.unixPermissions=n.unixPermissions,this.dosPermissions=n.dosPermissions,this._data=e,this._dataBinary=n.binary,this.options={compression:n.compression,compressionOptions:n.compressionOptions}}var i=t("./stream/StreamHelper"),s=t("./stream/DataWorker"),o=t("./utf8"),a=t("./compressedObject"),l=t("./stream/GenericWorker");r.prototype={internalStream:function(t){var e=null,n="string";try{if(!t)throw new Error("No output type specified.");var r="string"===(n=t.toLowerCase())||"text"===n;"binarystring"!==n&&"text"!==n||(n="string"),e=this._decompressWorker();var s=!this._dataBinary;s&&!r&&(e=e.pipe(new o.Utf8EncodeWorker)),!s&&r&&(e=e.pipe(new o.Utf8DecodeWorker))}catch(t){(e=new l("error")).error(t)}return new i(e,n,"")},async:function(t,e){return this.internalStream(t).accumulate(e)},nodeStream:function(t,e){return this.internalStream(t||"nodebuffer").toNodejsStream(e)},_compressWorker:function(t,e){if(this._data instanceof a&&this._data.compression.magic===t.magic)return this._data.getCompressedWorker();var n=this._decompressWorker();return this._dataBinary||(n=n.pipe(new o.Utf8EncodeWorker)),a.createWorkerFrom(n,t,e)},_decompressWorker:function(){return this._data instanceof a?this._data.getContentWorker():this._data instanceof l?this._data:new s(this._data)}};for(var u=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],c=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},h=0;h<u.length;h++)r.prototype[u[h]]=c;e.exports=r},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,e,n){(function(t){"use strict";var n,r,i=t.MutationObserver||t.WebKitMutationObserver;if(i){var s=0,o=new i(c),a=t.document.createTextNode("");o.observe(a,{characterData:!0}),n=function(){a.data=s=++s%2}}else if(t.setImmediate||void 0===t.MessageChannel)n="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){c(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(c,0)};else{var l=new t.MessageChannel;l.port1.onmessage=c,n=function(){l.port2.postMessage(0)}}var u=[];function c(){var t,e;r=!0;for(var n=u.length;n;){for(e=u,u=[],t=-1;++t<n;)e[t]();n=u.length}r=!1}e.exports=function(t){1!==u.push(t)||r||n()}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(t,e,n){"use strict";var r=t("immediate");function i(){}var s={},o=["REJECTED"],a=["FULFILLED"],l=["PENDING"];function u(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,t!==i&&p(this,t)}function c(t,e,n){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function h(t,e,n){r((function(){var r;try{r=e(n)}catch(r){return s.reject(t,r)}r===t?s.reject(t,new TypeError("Cannot resolve promise with itself")):s.resolve(t,r)}))}function d(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function p(t,e){var n=!1;function r(e){n||(n=!0,s.reject(t,e))}function i(e){n||(n=!0,s.resolve(t,e))}var o=f((function(){e(i,r)}));"error"===o.status&&r(o.value)}function f(t,e){var n={};try{n.value=t(e),n.status="success"}catch(t){n.status="error",n.value=t}return n}(e.exports=u).prototype.finally=function(t){if("function"!=typeof t)return this;var e=this.constructor;return this.then((function(n){return e.resolve(t()).then((function(){return n}))}),(function(n){return e.resolve(t()).then((function(){throw n}))}))},u.prototype.catch=function(t){return this.then(null,t)},u.prototype.then=function(t,e){if("function"!=typeof t&&this.state===a||"function"!=typeof e&&this.state===o)return this;var n=new this.constructor(i);return this.state!==l?h(n,this.state===a?t:e,this.outcome):this.queue.push(new c(n,t,e)),n},c.prototype.callFulfilled=function(t){s.resolve(this.promise,t)},c.prototype.otherCallFulfilled=function(t){h(this.promise,this.onFulfilled,t)},c.prototype.callRejected=function(t){s.reject(this.promise,t)},c.prototype.otherCallRejected=function(t){h(this.promise,this.onRejected,t)},s.resolve=function(t,e){var n=f(d,e);if("error"===n.status)return s.reject(t,n.value);var r=n.value;if(r)p(t,r);else{t.state=a,t.outcome=e;for(var i=-1,o=t.queue.length;++i<o;)t.queue[i].callFulfilled(e)}return t},s.reject=function(t,e){t.state=o,t.outcome=e;for(var n=-1,r=t.queue.length;++n<r;)t.queue[n].callRejected(e);return t},u.resolve=function(t){return t instanceof this?t:s.resolve(new this(i),t)},u.reject=function(t){var e=new this(i);return s.reject(e,t)},u.all=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,r=!1;if(!n)return this.resolve([]);for(var o=new Array(n),a=0,l=-1,u=new this(i);++l<n;)c(t[l],l);return u;function c(t,i){e.resolve(t).then((function(t){o[i]=t,++a!==n||r||(r=!0,s.resolve(u,o))}),(function(t){r||(r=!0,s.reject(u,t))}))}},u.race=function(t){if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var e=t.length,n=!1;if(!e)return this.resolve([]);for(var r=-1,o=new this(i);++r<e;)this.resolve(t[r]).then((function(t){n||(n=!0,s.resolve(o,t))}),(function(t){n||(n=!0,s.reject(o,t))}));return o}},{immediate:36}],38:[function(t,e,n){"use strict";var r={};(0,t("./lib/utils/common").assign)(r,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),e.exports=r},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,e,n){"use strict";var r=t("./zlib/deflate"),i=t("./utils/common"),s=t("./utils/strings"),o=t("./zlib/messages"),a=t("./zlib/zstream"),l=Object.prototype.toString;function u(t){if(!(this instanceof u))return new u(t);this.options=i.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},t||{});var e=this.options;e.raw&&0<e.windowBits?e.windowBits=-e.windowBits:e.gzip&&0<e.windowBits&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var n=r.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(0!==n)throw new Error(o[n]);if(e.header&&r.deflateSetHeader(this.strm,e.header),e.dictionary){var c;if(c="string"==typeof e.dictionary?s.string2buf(e.dictionary):"[object ArrayBuffer]"===l.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,0!==(n=r.deflateSetDictionary(this.strm,c)))throw new Error(o[n]);this._dict_set=!0}}function c(t,e){var n=new u(e);if(n.push(t,!0),n.err)throw n.msg||o[n.err];return n.result}u.prototype.push=function(t,e){var n,o,a=this.strm,u=this.options.chunkSize;if(this.ended)return!1;o=e===~~e?e:!0===e?4:0,a.input="string"==typeof t?s.string2buf(t):"[object ArrayBuffer]"===l.call(t)?new Uint8Array(t):t,a.next_in=0,a.avail_in=a.input.length;do{if(0===a.avail_out&&(a.output=new i.Buf8(u),a.next_out=0,a.avail_out=u),1!==(n=r.deflate(a,o))&&0!==n)return this.onEnd(n),!(this.ended=!0);0!==a.avail_out&&(0!==a.avail_in||4!==o&&2!==o)||this.onData("string"===this.options.to?s.buf2binstring(i.shrinkBuf(a.output,a.next_out)):i.shrinkBuf(a.output,a.next_out))}while((0<a.avail_in||0===a.avail_out)&&1!==n);return 4===o?(n=r.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,0===n):2!==o||(this.onEnd(0),!(a.avail_out=0))},u.prototype.onData=function(t){this.chunks.push(t)},u.prototype.onEnd=function(t){0===t&&(this.result="string"===this.options.to?this.chunks.join(""):i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},n.Deflate=u,n.deflate=c,n.deflateRaw=function(t,e){return(e=e||{}).raw=!0,c(t,e)},n.gzip=function(t,e){return(e=e||{}).gzip=!0,c(t,e)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,e,n){"use strict";var r=t("./zlib/inflate"),i=t("./utils/common"),s=t("./utils/strings"),o=t("./zlib/constants"),a=t("./zlib/messages"),l=t("./zlib/zstream"),u=t("./zlib/gzheader"),c=Object.prototype.toString;function h(t){if(!(this instanceof h))return new h(t);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&0<=e.windowBits&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(0<=e.windowBits&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),15<e.windowBits&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var n=r.inflateInit2(this.strm,e.windowBits);if(n!==o.Z_OK)throw new Error(a[n]);this.header=new u,r.inflateGetHeader(this.strm,this.header)}function d(t,e){var n=new h(e);if(n.push(t,!0),n.err)throw n.msg||a[n.err];return n.result}h.prototype.push=function(t,e){var n,a,l,u,h,d,p=this.strm,f=this.options.chunkSize,A=this.options.dictionary,m=!1;if(this.ended)return!1;a=e===~~e?e:!0===e?o.Z_FINISH:o.Z_NO_FLUSH,p.input="string"==typeof t?s.binstring2buf(t):"[object ArrayBuffer]"===c.call(t)?new Uint8Array(t):t,p.next_in=0,p.avail_in=p.input.length;do{if(0===p.avail_out&&(p.output=new i.Buf8(f),p.next_out=0,p.avail_out=f),(n=r.inflate(p,o.Z_NO_FLUSH))===o.Z_NEED_DICT&&A&&(d="string"==typeof A?s.string2buf(A):"[object ArrayBuffer]"===c.call(A)?new Uint8Array(A):A,n=r.inflateSetDictionary(this.strm,d)),n===o.Z_BUF_ERROR&&!0===m&&(n=o.Z_OK,m=!1),n!==o.Z_STREAM_END&&n!==o.Z_OK)return this.onEnd(n),!(this.ended=!0);p.next_out&&(0!==p.avail_out&&n!==o.Z_STREAM_END&&(0!==p.avail_in||a!==o.Z_FINISH&&a!==o.Z_SYNC_FLUSH)||("string"===this.options.to?(l=s.utf8border(p.output,p.next_out),u=p.next_out-l,h=s.buf2string(p.output,l),p.next_out=u,p.avail_out=f-u,u&&i.arraySet(p.output,p.output,l,u,0),this.onData(h)):this.onData(i.shrinkBuf(p.output,p.next_out)))),0===p.avail_in&&0===p.avail_out&&(m=!0)}while((0<p.avail_in||0===p.avail_out)&&n!==o.Z_STREAM_END);return n===o.Z_STREAM_END&&(a=o.Z_FINISH),a===o.Z_FINISH?(n=r.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===o.Z_OK):a!==o.Z_SYNC_FLUSH||(this.onEnd(o.Z_OK),!(p.avail_out=0))},h.prototype.onData=function(t){this.chunks.push(t)},h.prototype.onEnd=function(t){t===o.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},n.Inflate=h,n.inflate=d,n.inflateRaw=function(t,e){return(e=e||{}).raw=!0,d(t,e)},n.ungzip=d},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,e,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var n=e.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])}}return t},n.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var i={arraySet:function(t,e,n,r,i){if(e.subarray&&t.subarray)t.set(e.subarray(n,n+r),i);else for(var s=0;s<r;s++)t[i+s]=e[n+s]},flattenChunks:function(t){var e,n,r,i,s,o;for(e=r=0,n=t.length;e<n;e++)r+=t[e].length;for(o=new Uint8Array(r),e=i=0,n=t.length;e<n;e++)o.set(s=t[e],i),i+=s.length;return o}},s={arraySet:function(t,e,n,r,i){for(var s=0;s<r;s++)t[i+s]=e[n+s]},flattenChunks:function(t){return[].concat.apply([],t)}};n.setTyped=function(t){t?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,i)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,s))},n.setTyped(r)},{}],42:[function(t,e,n){"use strict";var r=t("./common"),i=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(t){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){s=!1}for(var o=new r.Buf8(256),a=0;a<256;a++)o[a]=252<=a?6:248<=a?5:240<=a?4:224<=a?3:192<=a?2:1;function l(t,e){if(e<65537&&(t.subarray&&s||!t.subarray&&i))return String.fromCharCode.apply(null,r.shrinkBuf(t,e));for(var n="",o=0;o<e;o++)n+=String.fromCharCode(t[o]);return n}o[254]=o[254]=1,n.string2buf=function(t){var e,n,i,s,o,a=t.length,l=0;for(s=0;s<a;s++)55296==(64512&(n=t.charCodeAt(s)))&&s+1<a&&56320==(64512&(i=t.charCodeAt(s+1)))&&(n=65536+(n-55296<<10)+(i-56320),s++),l+=n<128?1:n<2048?2:n<65536?3:4;for(e=new r.Buf8(l),s=o=0;o<l;s++)55296==(64512&(n=t.charCodeAt(s)))&&s+1<a&&56320==(64512&(i=t.charCodeAt(s+1)))&&(n=65536+(n-55296<<10)+(i-56320),s++),n<128?e[o++]=n:(n<2048?e[o++]=192|n>>>6:(n<65536?e[o++]=224|n>>>12:(e[o++]=240|n>>>18,e[o++]=128|n>>>12&63),e[o++]=128|n>>>6&63),e[o++]=128|63&n);return e},n.buf2binstring=function(t){return l(t,t.length)},n.binstring2buf=function(t){for(var e=new r.Buf8(t.length),n=0,i=e.length;n<i;n++)e[n]=t.charCodeAt(n);return e},n.buf2string=function(t,e){var n,r,i,s,a=e||t.length,u=new Array(2*a);for(n=r=0;n<a;)if((i=t[n++])<128)u[r++]=i;else if(4<(s=o[i]))u[r++]=65533,n+=s-1;else{for(i&=2===s?31:3===s?15:7;1<s&&n<a;)i=i<<6|63&t[n++],s--;1<s?u[r++]=65533:i<65536?u[r++]=i:(u[r++]=55296|(i-=65536)>>10&1023,u[r++]=56320|1023&i)}return l(u,r)},n.utf8border=function(t,e){var n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;0<=n&&128==(192&t[n]);)n--;return n<0||0===n?e:n+o[t[n]]>e?n:e}},{"./common":41}],43:[function(t,e,n){"use strict";e.exports=function(t,e,n,r){for(var i=65535&t|0,s=t>>>16&65535|0,o=0;0!==n;){for(n-=o=2e3<n?2e3:n;s=s+(i=i+e[r++]|0)|0,--o;);i%=65521,s%=65521}return i|s<<16|0}},{}],44:[function(t,e,n){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,e,n){"use strict";var r=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();e.exports=function(t,e,n,i){var s=r,o=i+n;t^=-1;for(var a=i;a<o;a++)t=t>>>8^s[255&(t^e[a])];return-1^t}},{}],46:[function(t,e,n){"use strict";var r,i=t("../utils/common"),s=t("./trees"),o=t("./adler32"),a=t("./crc32"),l=t("./messages"),u=-2,c=258,h=262,d=113;function p(t,e){return t.msg=l[e],e}function f(t){return(t<<1)-(4<t?9:0)}function A(t){for(var e=t.length;0<=--e;)t[e]=0}function m(t){var e=t.state,n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(i.arraySet(t.output,e.pending_buf,e.pending_out,n,t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))}function g(t,e){s._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,m(t.strm)}function y(t,e){t.pending_buf[t.pending++]=e}function w(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function b(t,e){var n,r,i=t.max_chain_length,s=t.strstart,o=t.prev_length,a=t.nice_match,l=t.strstart>t.w_size-h?t.strstart-(t.w_size-h):0,u=t.window,d=t.w_mask,p=t.prev,f=t.strstart+c,A=u[s+o-1],m=u[s+o];t.prev_length>=t.good_match&&(i>>=2),a>t.lookahead&&(a=t.lookahead);do{if(u[(n=e)+o]===m&&u[n+o-1]===A&&u[n]===u[s]&&u[++n]===u[s+1]){s+=2,n++;do{}while(u[++s]===u[++n]&&u[++s]===u[++n]&&u[++s]===u[++n]&&u[++s]===u[++n]&&u[++s]===u[++n]&&u[++s]===u[++n]&&u[++s]===u[++n]&&u[++s]===u[++n]&&s<f);if(r=c-(f-s),s=f-c,o<r){if(t.match_start=e,a<=(o=r))break;A=u[s+o-1],m=u[s+o]}}}while((e=p[e&d])>l&&0!=--i);return o<=t.lookahead?o:t.lookahead}function v(t){var e,n,r,s,l,u,c,d,p,f,A=t.w_size;do{if(s=t.window_size-t.lookahead-t.strstart,t.strstart>=A+(A-h)){for(i.arraySet(t.window,t.window,A,A,0),t.match_start-=A,t.strstart-=A,t.block_start-=A,e=n=t.hash_size;r=t.head[--e],t.head[e]=A<=r?r-A:0,--n;);for(e=n=A;r=t.prev[--e],t.prev[e]=A<=r?r-A:0,--n;);s+=A}if(0===t.strm.avail_in)break;if(c=t.window,d=t.strstart+t.lookahead,f=void 0,(p=s)<(f=(u=t.strm).avail_in)&&(f=p),n=0===f?0:(u.avail_in-=f,i.arraySet(c,u.input,u.next_in,f,d),1===u.state.wrap?u.adler=o(u.adler,c,f,d):2===u.state.wrap&&(u.adler=a(u.adler,c,f,d)),u.next_in+=f,u.total_in+=f,f),t.lookahead+=n,t.lookahead+t.insert>=3)for(t.ins_h=t.window[l=t.strstart-t.insert],t.ins_h=(t.ins_h<<t.hash_shift^t.window[l+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[l+3-1])&t.hash_mask,t.prev[l&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=l,l++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<h&&0!==t.strm.avail_in)}function x(t,e){for(var n,r;;){if(t.lookahead<h){if(v(t),t.lookahead<h&&0===e)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-h&&(t.match_length=b(t,n)),t.match_length>=3)if(r=s._tr_tally(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,0!=--t.match_length;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else r=s._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(g(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,4===e?(g(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(g(t,!1),0===t.strm.avail_out)?1:2}function _(t,e){for(var n,r,i;;){if(t.lookahead<h){if(v(t),t.lookahead<h&&0===e)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-h&&(t.match_length=b(t,n),t.match_length<=5&&(1===t.strategy||3===t.match_length&&4096<t.strstart-t.match_start)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){for(i=t.strstart+t.lookahead-3,r=s._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!=--t.prev_length;);if(t.match_available=0,t.match_length=2,t.strstart++,r&&(g(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((r=s._tr_tally(t,0,t.window[t.strstart-1]))&&g(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=s._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,4===e?(g(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(g(t,!1),0===t.strm.avail_out)?1:2}function C(t,e,n,r,i){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=r,this.func=i}function S(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(1146),this.dyn_dtree=new i.Buf16(122),this.bl_tree=new i.Buf16(78),A(this.dyn_ltree),A(this.dyn_dtree),A(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(16),this.heap=new i.Buf16(573),A(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(573),A(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function E(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=2,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:d,t.adler=2===e.wrap?0:1,e.last_flush=0,s._tr_init(e),0):p(t,u)}function B(t){var e=E(t);return 0===e&&function(t){t.window_size=2*t.w_size,A(t.head),t.max_lazy_match=r[t.level].max_lazy,t.good_match=r[t.level].good_length,t.nice_match=r[t.level].nice_length,t.max_chain_length=r[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0}(t.state),e}function k(t,e,n,r,s,o){if(!t)return u;var a=1;if(-1===e&&(e=6),r<0?(a=0,r=-r):15<r&&(a=2,r-=16),s<1||9<s||8!==n||r<8||15<r||e<0||9<e||o<0||4<o)return p(t,u);8===r&&(r=9);var l=new S;return(t.state=l).strm=t,l.wrap=a,l.gzhead=null,l.w_bits=r,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=s+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+3-1)/3),l.window=new i.Buf8(2*l.w_size),l.head=new i.Buf16(l.hash_size),l.prev=new i.Buf16(l.w_size),l.lit_bufsize=1<<s+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new i.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=e,l.strategy=o,l.method=n,B(t)}r=[new C(0,0,0,0,(function(t,e){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(v(t),0===t.lookahead&&0===e)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var r=t.block_start+n;if((0===t.strstart||t.strstart>=r)&&(t.lookahead=t.strstart-r,t.strstart=r,g(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-h&&(g(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(g(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&g(t,!1),1)})),new C(4,4,8,4,x),new C(4,5,16,8,x),new C(4,6,32,32,x),new C(4,4,16,16,_),new C(8,16,32,32,_),new C(8,16,128,128,_),new C(8,32,128,256,_),new C(32,128,258,1024,_),new C(32,258,258,4096,_)],n.deflateInit=function(t,e){return k(t,e,8,15,8,0)},n.deflateInit2=k,n.deflateReset=B,n.deflateResetKeep=E,n.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?u:(t.state.gzhead=e,0):u},n.deflate=function(t,e){var n,i,o,l;if(!t||!t.state||5<e||e<0)return t?p(t,u):u;if(i=t.state,!t.output||!t.input&&0!==t.avail_in||666===i.status&&4!==e)return p(t,0===t.avail_out?-5:u);if(i.strm=t,n=i.last_flush,i.last_flush=e,42===i.status)if(2===i.wrap)t.adler=0,y(i,31),y(i,139),y(i,8),i.gzhead?(y(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),y(i,255&i.gzhead.time),y(i,i.gzhead.time>>8&255),y(i,i.gzhead.time>>16&255),y(i,i.gzhead.time>>24&255),y(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),y(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(y(i,255&i.gzhead.extra.length),y(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=a(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(y(i,0),y(i,0),y(i,0),y(i,0),y(i,0),y(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),y(i,3),i.status=d);else{var h=8+(i.w_bits-8<<4)<<8;h|=(2<=i.strategy||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(h|=32),h+=31-h%31,i.status=d,w(i,h),0!==i.strstart&&(w(i,t.adler>>>16),w(i,65535&t.adler)),t.adler=1}if(69===i.status)if(i.gzhead.extra){for(o=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>o&&(t.adler=a(t.adler,i.pending_buf,i.pending-o,o)),m(t),o=i.pending,i.pending!==i.pending_buf_size));)y(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>o&&(t.adler=a(t.adler,i.pending_buf,i.pending-o,o)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){o=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>o&&(t.adler=a(t.adler,i.pending_buf,i.pending-o,o)),m(t),o=i.pending,i.pending===i.pending_buf_size)){l=1;break}l=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,y(i,l)}while(0!==l);i.gzhead.hcrc&&i.pending>o&&(t.adler=a(t.adler,i.pending_buf,i.pending-o,o)),0===l&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){o=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>o&&(t.adler=a(t.adler,i.pending_buf,i.pending-o,o)),m(t),o=i.pending,i.pending===i.pending_buf_size)){l=1;break}l=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,y(i,l)}while(0!==l);i.gzhead.hcrc&&i.pending>o&&(t.adler=a(t.adler,i.pending_buf,i.pending-o,o)),0===l&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&m(t),i.pending+2<=i.pending_buf_size&&(y(i,255&t.adler),y(i,t.adler>>8&255),t.adler=0,i.status=d)):i.status=d),0!==i.pending){if(m(t),0===t.avail_out)return i.last_flush=-1,0}else if(0===t.avail_in&&f(e)<=f(n)&&4!==e)return p(t,-5);if(666===i.status&&0!==t.avail_in)return p(t,-5);if(0!==t.avail_in||0!==i.lookahead||0!==e&&666!==i.status){var b=2===i.strategy?function(t,e){for(var n;;){if(0===t.lookahead&&(v(t),0===t.lookahead)){if(0===e)return 1;break}if(t.match_length=0,n=s._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(g(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(g(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(g(t,!1),0===t.strm.avail_out)?1:2}(i,e):3===i.strategy?function(t,e){for(var n,r,i,o,a=t.window;;){if(t.lookahead<=c){if(v(t),t.lookahead<=c&&0===e)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&0<t.strstart&&(r=a[i=t.strstart-1])===a[++i]&&r===a[++i]&&r===a[++i]){o=t.strstart+c;do{}while(r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&i<o);t.match_length=c-(o-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(n=s._tr_tally(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=s._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(g(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(g(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(g(t,!1),0===t.strm.avail_out)?1:2}(i,e):r[i.level].func(i,e);if(3!==b&&4!==b||(i.status=666),1===b||3===b)return 0===t.avail_out&&(i.last_flush=-1),0;if(2===b&&(1===e?s._tr_align(i):5!==e&&(s._tr_stored_block(i,0,0,!1),3===e&&(A(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),m(t),0===t.avail_out))return i.last_flush=-1,0}return 4!==e?0:i.wrap<=0?1:(2===i.wrap?(y(i,255&t.adler),y(i,t.adler>>8&255),y(i,t.adler>>16&255),y(i,t.adler>>24&255),y(i,255&t.total_in),y(i,t.total_in>>8&255),y(i,t.total_in>>16&255),y(i,t.total_in>>24&255)):(w(i,t.adler>>>16),w(i,65535&t.adler)),m(t),0<i.wrap&&(i.wrap=-i.wrap),0!==i.pending?0:1)},n.deflateEnd=function(t){var e;return t&&t.state?42!==(e=t.state.status)&&69!==e&&73!==e&&91!==e&&103!==e&&e!==d&&666!==e?p(t,u):(t.state=null,e===d?p(t,-3):0):u},n.deflateSetDictionary=function(t,e){var n,r,s,a,l,c,h,d,p=e.length;if(!t||!t.state)return u;if(2===(a=(n=t.state).wrap)||1===a&&42!==n.status||n.lookahead)return u;for(1===a&&(t.adler=o(t.adler,e,p,0)),n.wrap=0,p>=n.w_size&&(0===a&&(A(n.head),n.strstart=0,n.block_start=0,n.insert=0),d=new i.Buf8(n.w_size),i.arraySet(d,e,p-n.w_size,n.w_size,0),e=d,p=n.w_size),l=t.avail_in,c=t.next_in,h=t.input,t.avail_in=p,t.next_in=0,t.input=e,v(n);n.lookahead>=3;){for(r=n.strstart,s=n.lookahead-2;n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+3-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++,--s;);n.strstart=r,n.lookahead=2,v(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,t.next_in=c,t.input=h,t.avail_in=l,n.wrap=a,0},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,e,n){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,e,n){"use strict";e.exports=function(t,e){var n,r,i,s,o,a,l,u,c,h,d,p,f,A,m,g,y,w,b,v,x,_,C,S,E;S=t.input,i=(r=t.next_in)+(t.avail_in-5),E=t.output,o=(s=t.next_out)-(e-t.avail_out),a=s+(t.avail_out-257),l=(n=t.state).dmax,u=n.wsize,c=n.whave,h=n.wnext,d=n.window,p=n.hold,f=n.bits,A=n.lencode,m=n.distcode,g=(1<<n.lenbits)-1,y=(1<<n.distbits)-1;t:do{f<15&&(p+=S[r++]<<f,p+=S[r++]<<(f+=8),f+=8),w=A[p&g];e:for(;;){if(p>>>=b=w>>>24,f-=b,0==(b=w>>>16&255))E[s++]=65535&w;else{if(!(16&b)){if(0==(64&b)){w=A[(65535&w)+(p&(1<<b)-1)];continue e}if(32&b){n.mode=12;break t}t.msg="invalid literal/length code",n.mode=30;break t}v=65535&w,(b&=15)&&(f<b&&(p+=S[r++]<<f,f+=8),v+=p&(1<<b)-1,p>>>=b,f-=b),f<15&&(p+=S[r++]<<f,p+=S[r++]<<(f+=8),f+=8),w=m[p&y];n:for(;;){if(p>>>=b=w>>>24,f-=b,!(16&(b=w>>>16&255))){if(0==(64&b)){w=m[(65535&w)+(p&(1<<b)-1)];continue n}t.msg="invalid distance code",n.mode=30;break t}if(x=65535&w,f<(b&=15)&&(p+=S[r++]<<f,(f+=8)<b&&(p+=S[r++]<<f,f+=8)),l<(x+=p&(1<<b)-1)){t.msg="invalid distance too far back",n.mode=30;break t}if(p>>>=b,f-=b,(b=s-o)<x){if(c<(b=x-b)&&n.sane){t.msg="invalid distance too far back",n.mode=30;break t}if(C=d,(_=0)===h){if(_+=u-b,b<v){for(v-=b;E[s++]=d[_++],--b;);_=s-x,C=E}}else if(h<b){if(_+=u+h-b,(b-=h)<v){for(v-=b;E[s++]=d[_++],--b;);if(_=0,h<v){for(v-=b=h;E[s++]=d[_++],--b;);_=s-x,C=E}}}else if(_+=h-b,b<v){for(v-=b;E[s++]=d[_++],--b;);_=s-x,C=E}for(;2<v;)E[s++]=C[_++],E[s++]=C[_++],E[s++]=C[_++],v-=3;v&&(E[s++]=C[_++],1<v&&(E[s++]=C[_++]))}else{for(_=s-x;E[s++]=E[_++],E[s++]=E[_++],E[s++]=E[_++],2<(v-=3););v&&(E[s++]=E[_++],1<v&&(E[s++]=E[_++]))}break}}break}}while(r<i&&s<a);r-=v=f>>3,p&=(1<<(f-=v<<3))-1,t.next_in=r,t.next_out=s,t.avail_in=r<i?i-r+5:5-(r-i),t.avail_out=s<a?a-s+257:257-(s-a),n.hold=p,n.bits=f}},{}],49:[function(t,e,n){"use strict";var r=t("../utils/common"),i=t("./adler32"),s=t("./crc32"),o=t("./inffast"),a=t("./inftrees"),l=-2;function u(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function c(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function h(t){var e;return t&&t.state?(t.total_in=t.total_out=(e=t.state).total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new r.Buf32(852),e.distcode=e.distdyn=new r.Buf32(592),e.sane=1,e.back=-1,0):l}function d(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,h(t)):l}function p(t,e){var n,r;return t&&t.state?(r=t.state,e<0?(n=0,e=-e):(n=1+(e>>4),e<48&&(e&=15)),e&&(e<8||15<e)?l:(null!==r.window&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,d(t))):l}function f(t,e){var n,r;return t?(r=new c,(t.state=r).window=null,0!==(n=p(t,e))&&(t.state=null),n):l}var A,m,g=!0;function y(t){if(g){var e;for(A=new r.Buf32(512),m=new r.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(a(1,t.lens,0,288,A,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;a(2,t.lens,0,32,m,0,t.work,{bits:5}),g=!1}t.lencode=A,t.lenbits=9,t.distcode=m,t.distbits=5}function w(t,e,n,i){var s,o=t.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new r.Buf8(o.wsize)),i>=o.wsize?(r.arraySet(o.window,e,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(i<(s=o.wsize-o.wnext)&&(s=i),r.arraySet(o.window,e,n-i,s,o.wnext),(i-=s)?(r.arraySet(o.window,e,n-i,i,0),o.wnext=i,o.whave=o.wsize):(o.wnext+=s,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=s))),0}n.inflateReset=d,n.inflateReset2=p,n.inflateResetKeep=h,n.inflateInit=function(t){return f(t,15)},n.inflateInit2=f,n.inflate=function(t,e){var n,c,h,d,p,f,A,m,g,b,v,x,_,C,S,E,B,k,N,I,F,T,R,O,D=0,L=new r.Buf8(4),M=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return l;12===(n=t.state).mode&&(n.mode=13),p=t.next_out,h=t.output,d=t.next_in,c=t.input,m=n.hold,g=n.bits,b=f=t.avail_in,v=A=t.avail_out,T=0;t:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;g<16;){if(0===f)break t;f--,m+=c[d++]<<g,g+=8}if(2&n.wrap&&35615===m){L[n.check=0]=255&m,L[1]=m>>>8&255,n.check=s(n.check,L,2,0),g=m=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&m)<<8)+(m>>8))%31){t.msg="incorrect header check",n.mode=30;break}if(8!=(15&m)){t.msg="unknown compression method",n.mode=30;break}if(g-=4,F=8+(15&(m>>>=4)),0===n.wbits)n.wbits=F;else if(F>n.wbits){t.msg="invalid window size",n.mode=30;break}n.dmax=1<<F,t.adler=n.check=1,n.mode=512&m?10:12,g=m=0;break;case 2:for(;g<16;){if(0===f)break t;f--,m+=c[d++]<<g,g+=8}if(n.flags=m,8!=(255&n.flags)){t.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=m>>8&1),512&n.flags&&(L[0]=255&m,L[1]=m>>>8&255,n.check=s(n.check,L,2,0)),g=m=0,n.mode=3;case 3:for(;g<32;){if(0===f)break t;f--,m+=c[d++]<<g,g+=8}n.head&&(n.head.time=m),512&n.flags&&(L[0]=255&m,L[1]=m>>>8&255,L[2]=m>>>16&255,L[3]=m>>>24&255,n.check=s(n.check,L,4,0)),g=m=0,n.mode=4;case 4:for(;g<16;){if(0===f)break t;f--,m+=c[d++]<<g,g+=8}n.head&&(n.head.xflags=255&m,n.head.os=m>>8),512&n.flags&&(L[0]=255&m,L[1]=m>>>8&255,n.check=s(n.check,L,2,0)),g=m=0,n.mode=5;case 5:if(1024&n.flags){for(;g<16;){if(0===f)break t;f--,m+=c[d++]<<g,g+=8}n.length=m,n.head&&(n.head.extra_len=m),512&n.flags&&(L[0]=255&m,L[1]=m>>>8&255,n.check=s(n.check,L,2,0)),g=m=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(f<(x=n.length)&&(x=f),x&&(n.head&&(F=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),r.arraySet(n.head.extra,c,d,x,F)),512&n.flags&&(n.check=s(n.check,c,x,d)),f-=x,d+=x,n.length-=x),n.length))break t;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===f)break t;for(x=0;F=c[d+x++],n.head&&F&&n.length<65536&&(n.head.name+=String.fromCharCode(F)),F&&x<f;);if(512&n.flags&&(n.check=s(n.check,c,x,d)),f-=x,d+=x,F)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===f)break t;for(x=0;F=c[d+x++],n.head&&F&&n.length<65536&&(n.head.comment+=String.fromCharCode(F)),F&&x<f;);if(512&n.flags&&(n.check=s(n.check,c,x,d)),f-=x,d+=x,F)break t}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;g<16;){if(0===f)break t;f--,m+=c[d++]<<g,g+=8}if(m!==(65535&n.check)){t.msg="header crc mismatch",n.mode=30;break}g=m=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=12;break;case 10:for(;g<32;){if(0===f)break t;f--,m+=c[d++]<<g,g+=8}t.adler=n.check=u(m),g=m=0,n.mode=11;case 11:if(0===n.havedict)return t.next_out=p,t.avail_out=A,t.next_in=d,t.avail_in=f,n.hold=m,n.bits=g,2;t.adler=n.check=1,n.mode=12;case 12:if(5===e||6===e)break t;case 13:if(n.last){m>>>=7&g,g-=7&g,n.mode=27;break}for(;g<3;){if(0===f)break t;f--,m+=c[d++]<<g,g+=8}switch(n.last=1&m,g-=1,3&(m>>>=1)){case 0:n.mode=14;break;case 1:if(y(n),n.mode=20,6!==e)break;m>>>=2,g-=2;break t;case 2:n.mode=17;break;case 3:t.msg="invalid block type",n.mode=30}m>>>=2,g-=2;break;case 14:for(m>>>=7&g,g-=7&g;g<32;){if(0===f)break t;f--,m+=c[d++]<<g,g+=8}if((65535&m)!=(m>>>16^65535)){t.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&m,g=m=0,n.mode=15,6===e)break t;case 15:n.mode=16;case 16:if(x=n.length){if(f<x&&(x=f),A<x&&(x=A),0===x)break t;r.arraySet(h,c,d,x,p),f-=x,d+=x,A-=x,p+=x,n.length-=x;break}n.mode=12;break;case 17:for(;g<14;){if(0===f)break t;f--,m+=c[d++]<<g,g+=8}if(n.nlen=257+(31&m),g-=5,n.ndist=1+(31&(m>>>=5)),g-=5,n.ncode=4+(15&(m>>>=5)),m>>>=4,g-=4,286<n.nlen||30<n.ndist){t.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;g<3;){if(0===f)break t;f--,m+=c[d++]<<g,g+=8}n.lens[M[n.have++]]=7&m,m>>>=3,g-=3}for(;n.have<19;)n.lens[M[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,T=a(0,n.lens,0,19,n.lencode,0,n.work,R={bits:n.lenbits}),n.lenbits=R.bits,T){t.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;E=(D=n.lencode[m&(1<<n.lenbits)-1])>>>16&255,B=65535&D,!((S=D>>>24)<=g);){if(0===f)break t;f--,m+=c[d++]<<g,g+=8}if(B<16)m>>>=S,g-=S,n.lens[n.have++]=B;else{if(16===B){for(O=S+2;g<O;){if(0===f)break t;f--,m+=c[d++]<<g,g+=8}if(m>>>=S,g-=S,0===n.have){t.msg="invalid bit length repeat",n.mode=30;break}F=n.lens[n.have-1],x=3+(3&m),m>>>=2,g-=2}else if(17===B){for(O=S+3;g<O;){if(0===f)break t;f--,m+=c[d++]<<g,g+=8}g-=S,F=0,x=3+(7&(m>>>=S)),m>>>=3,g-=3}else{for(O=S+7;g<O;){if(0===f)break t;f--,m+=c[d++]<<g,g+=8}g-=S,F=0,x=11+(127&(m>>>=S)),m>>>=7,g-=7}if(n.have+x>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=30;break}for(;x--;)n.lens[n.have++]=F}}if(30===n.mode)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,T=a(1,n.lens,0,n.nlen,n.lencode,0,n.work,R={bits:n.lenbits}),n.lenbits=R.bits,T){t.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,T=a(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,R={bits:n.distbits}),n.distbits=R.bits,T){t.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===e)break t;case 20:n.mode=21;case 21:if(6<=f&&258<=A){t.next_out=p,t.avail_out=A,t.next_in=d,t.avail_in=f,n.hold=m,n.bits=g,o(t,v),p=t.next_out,h=t.output,A=t.avail_out,d=t.next_in,c=t.input,f=t.avail_in,m=n.hold,g=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;E=(D=n.lencode[m&(1<<n.lenbits)-1])>>>16&255,B=65535&D,!((S=D>>>24)<=g);){if(0===f)break t;f--,m+=c[d++]<<g,g+=8}if(E&&0==(240&E)){for(k=S,N=E,I=B;E=(D=n.lencode[I+((m&(1<<k+N)-1)>>k)])>>>16&255,B=65535&D,!(k+(S=D>>>24)<=g);){if(0===f)break t;f--,m+=c[d++]<<g,g+=8}m>>>=k,g-=k,n.back+=k}if(m>>>=S,g-=S,n.back+=S,n.length=B,0===E){n.mode=26;break}if(32&E){n.back=-1,n.mode=12;break}if(64&E){t.msg="invalid literal/length code",n.mode=30;break}n.extra=15&E,n.mode=22;case 22:if(n.extra){for(O=n.extra;g<O;){if(0===f)break t;f--,m+=c[d++]<<g,g+=8}n.length+=m&(1<<n.extra)-1,m>>>=n.extra,g-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;E=(D=n.distcode[m&(1<<n.distbits)-1])>>>16&255,B=65535&D,!((S=D>>>24)<=g);){if(0===f)break t;f--,m+=c[d++]<<g,g+=8}if(0==(240&E)){for(k=S,N=E,I=B;E=(D=n.distcode[I+((m&(1<<k+N)-1)>>k)])>>>16&255,B=65535&D,!(k+(S=D>>>24)<=g);){if(0===f)break t;f--,m+=c[d++]<<g,g+=8}m>>>=k,g-=k,n.back+=k}if(m>>>=S,g-=S,n.back+=S,64&E){t.msg="invalid distance code",n.mode=30;break}n.offset=B,n.extra=15&E,n.mode=24;case 24:if(n.extra){for(O=n.extra;g<O;){if(0===f)break t;f--,m+=c[d++]<<g,g+=8}n.offset+=m&(1<<n.extra)-1,m>>>=n.extra,g-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===A)break t;if(n.offset>(x=v-A)){if((x=n.offset-x)>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=30;break}_=x>n.wnext?n.wsize-(x-=n.wnext):n.wnext-x,x>n.length&&(x=n.length),C=n.window}else C=h,_=p-n.offset,x=n.length;for(A<x&&(x=A),A-=x,n.length-=x;h[p++]=C[_++],--x;);0===n.length&&(n.mode=21);break;case 26:if(0===A)break t;h[p++]=n.length,A--,n.mode=21;break;case 27:if(n.wrap){for(;g<32;){if(0===f)break t;f--,m|=c[d++]<<g,g+=8}if(t.total_out+=v-=A,n.total+=v,v&&(t.adler=n.check=n.flags?s(n.check,h,v,p-v):i(n.check,h,v,p-v)),v=A,(n.flags?m:u(m))!==n.check){t.msg="incorrect data check",n.mode=30;break}g=m=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;g<32;){if(0===f)break t;f--,m+=c[d++]<<g,g+=8}if(m!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=30;break}g=m=0}n.mode=29;case 29:T=1;break t;case 30:T=-3;break t;case 31:return-4;case 32:default:return l}return t.next_out=p,t.avail_out=A,t.next_in=d,t.avail_in=f,n.hold=m,n.bits=g,(n.wsize||v!==t.avail_out&&n.mode<30&&(n.mode<27||4!==e))&&w(t,t.output,t.next_out,v-t.avail_out)?(n.mode=31,-4):(v-=t.avail_out,t.total_in+=b-=t.avail_in,t.total_out+=v,n.total+=v,n.wrap&&v&&(t.adler=n.check=n.flags?s(n.check,h,v,t.next_out-v):i(n.check,h,v,t.next_out-v)),t.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0==b&&0===v||4===e)&&0===T&&(T=-5),T)},n.inflateEnd=function(t){if(!t||!t.state)return l;var e=t.state;return e.window&&(e.window=null),t.state=null,0},n.inflateGetHeader=function(t,e){var n;return t&&t.state?0==(2&(n=t.state).wrap)?l:((n.head=e).done=!1,0):l},n.inflateSetDictionary=function(t,e){var n,r=e.length;return t&&t.state?0!==(n=t.state).wrap&&11!==n.mode?l:11===n.mode&&i(1,e,r,0)!==n.check?-3:w(t,e,r,r)?(n.mode=31,-4):(n.havedict=1,0):l},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,e,n){"use strict";var r=t("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,n,l,u,c,h,d){var p,f,A,m,g,y,w,b,v,x=d.bits,_=0,C=0,S=0,E=0,B=0,k=0,N=0,I=0,F=0,T=0,R=null,O=0,D=new r.Buf16(16),L=new r.Buf16(16),M=null,U=0;for(_=0;_<=15;_++)D[_]=0;for(C=0;C<l;C++)D[e[n+C]]++;for(B=x,E=15;1<=E&&0===D[E];E--);if(E<B&&(B=E),0===E)return u[c++]=20971520,u[c++]=20971520,d.bits=1,0;for(S=1;S<E&&0===D[S];S++);for(B<S&&(B=S),_=I=1;_<=15;_++)if(I<<=1,(I-=D[_])<0)return-1;if(0<I&&(0===t||1!==E))return-1;for(L[1]=0,_=1;_<15;_++)L[_+1]=L[_]+D[_];for(C=0;C<l;C++)0!==e[n+C]&&(h[L[e[n+C]]++]=C);if(y=0===t?(R=M=h,19):1===t?(R=i,O-=257,M=s,U-=257,256):(R=o,M=a,-1),_=S,g=c,N=C=T=0,A=-1,m=(F=1<<(k=B))-1,1===t&&852<F||2===t&&592<F)return 1;for(;;){for(w=_-N,v=h[C]<y?(b=0,h[C]):h[C]>y?(b=M[U+h[C]],R[O+h[C]]):(b=96,0),p=1<<_-N,S=f=1<<k;u[g+(T>>N)+(f-=p)]=w<<24|b<<16|v|0,0!==f;);for(p=1<<_-1;T&p;)p>>=1;if(0!==p?(T&=p-1,T+=p):T=0,C++,0==--D[_]){if(_===E)break;_=e[n+h[C]]}if(B<_&&(T&m)!==A){for(0===N&&(N=B),g+=S,I=1<<(k=_-N);k+N<E&&!((I-=D[k+N])<=0);)k++,I<<=1;if(F+=1<<k,1===t&&852<F||2===t&&592<F)return 1;u[A=T&m]=B<<24|k<<16|g-c|0}}return 0!==T&&(u[g+T]=_-N<<24|64<<16|0),d.bits=B,0}},{"../utils/common":41}],51:[function(t,e,n){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,e,n){"use strict";var r=t("../utils/common");function i(t){for(var e=t.length;0<=--e;)t[e]=0}var s=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],o=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],l=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],u=new Array(576);i(u);var c=new Array(60);i(c);var h=new Array(512);i(h);var d=new Array(256);i(d);var p=new Array(29);i(p);var f,A,m,g=new Array(30);function y(t,e,n,r,i){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=t&&t.length}function w(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function b(t){return t<256?h[t]:h[256+(t>>>7)]}function v(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function x(t,e,n){t.bi_valid>16-n?(t.bi_buf|=e<<t.bi_valid&65535,v(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=n-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)}function _(t,e,n){x(t,n[2*e],n[2*e+1])}function C(t,e){for(var n=0;n|=1&t,t>>>=1,n<<=1,0<--e;);return n>>>1}function S(t,e,n){var r,i,s=new Array(16),o=0;for(r=1;r<=15;r++)s[r]=o=o+n[r-1]<<1;for(i=0;i<=e;i++){var a=t[2*i+1];0!==a&&(t[2*i]=C(s[a]++,a))}}function E(t){var e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function B(t){8<t.bi_valid?v(t,t.bi_buf):0<t.bi_valid&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function k(t,e,n,r){var i=2*e,s=2*n;return t[i]<t[s]||t[i]===t[s]&&r[e]<=r[n]}function N(t,e,n){for(var r=t.heap[n],i=n<<1;i<=t.heap_len&&(i<t.heap_len&&k(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!k(e,r,t.heap[i],t.depth));)t.heap[n]=t.heap[i],n=i,i<<=1;t.heap[n]=r}function I(t,e,n){var r,i,a,l,u=0;if(0!==t.last_lit)for(;r=t.pending_buf[t.d_buf+2*u]<<8|t.pending_buf[t.d_buf+2*u+1],i=t.pending_buf[t.l_buf+u],u++,0===r?_(t,i,e):(_(t,(a=d[i])+256+1,e),0!==(l=s[a])&&x(t,i-=p[a],l),_(t,a=b(--r),n),0!==(l=o[a])&&x(t,r-=g[a],l)),u<t.last_lit;);_(t,256,e)}function F(t,e){var n,r,i,s=e.dyn_tree,o=e.stat_desc.static_tree,a=e.stat_desc.has_stree,l=e.stat_desc.elems,u=-1;for(t.heap_len=0,t.heap_max=573,n=0;n<l;n++)0!==s[2*n]?(t.heap[++t.heap_len]=u=n,t.depth[n]=0):s[2*n+1]=0;for(;t.heap_len<2;)s[2*(i=t.heap[++t.heap_len]=u<2?++u:0)]=1,t.depth[i]=0,t.opt_len--,a&&(t.static_len-=o[2*i+1]);for(e.max_code=u,n=t.heap_len>>1;1<=n;n--)N(t,s,n);for(i=l;n=t.heap[1],t.heap[1]=t.heap[t.heap_len--],N(t,s,1),r=t.heap[1],t.heap[--t.heap_max]=n,t.heap[--t.heap_max]=r,s[2*i]=s[2*n]+s[2*r],t.depth[i]=(t.depth[n]>=t.depth[r]?t.depth[n]:t.depth[r])+1,s[2*n+1]=s[2*r+1]=i,t.heap[1]=i++,N(t,s,1),2<=t.heap_len;);t.heap[--t.heap_max]=t.heap[1],function(t,e){var n,r,i,s,o,a,l=e.dyn_tree,u=e.max_code,c=e.stat_desc.static_tree,h=e.stat_desc.has_stree,d=e.stat_desc.extra_bits,p=e.stat_desc.extra_base,f=e.stat_desc.max_length,A=0;for(s=0;s<=15;s++)t.bl_count[s]=0;for(l[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;n<573;n++)f<(s=l[2*l[2*(r=t.heap[n])+1]+1]+1)&&(s=f,A++),l[2*r+1]=s,u<r||(t.bl_count[s]++,o=0,p<=r&&(o=d[r-p]),t.opt_len+=(a=l[2*r])*(s+o),h&&(t.static_len+=a*(c[2*r+1]+o)));if(0!==A){do{for(s=f-1;0===t.bl_count[s];)s--;t.bl_count[s]--,t.bl_count[s+1]+=2,t.bl_count[f]--,A-=2}while(0<A);for(s=f;0!==s;s--)for(r=t.bl_count[s];0!==r;)u<(i=t.heap[--n])||(l[2*i+1]!==s&&(t.opt_len+=(s-l[2*i+1])*l[2*i],l[2*i+1]=s),r--)}}(t,e),S(s,u,t.bl_count)}function T(t,e,n){var r,i,s=-1,o=e[1],a=0,l=7,u=4;for(0===o&&(l=138,u=3),e[2*(n+1)+1]=65535,r=0;r<=n;r++)i=o,o=e[2*(r+1)+1],++a<l&&i===o||(a<u?t.bl_tree[2*i]+=a:0!==i?(i!==s&&t.bl_tree[2*i]++,t.bl_tree[32]++):a<=10?t.bl_tree[34]++:t.bl_tree[36]++,s=i,u=(a=0)===o?(l=138,3):i===o?(l=6,3):(l=7,4))}function R(t,e,n){var r,i,s=-1,o=e[1],a=0,l=7,u=4;for(0===o&&(l=138,u=3),r=0;r<=n;r++)if(i=o,o=e[2*(r+1)+1],!(++a<l&&i===o)){if(a<u)for(;_(t,i,t.bl_tree),0!=--a;);else 0!==i?(i!==s&&(_(t,i,t.bl_tree),a--),_(t,16,t.bl_tree),x(t,a-3,2)):a<=10?(_(t,17,t.bl_tree),x(t,a-3,3)):(_(t,18,t.bl_tree),x(t,a-11,7));s=i,u=(a=0)===o?(l=138,3):i===o?(l=6,3):(l=7,4)}}i(g);var O=!1;function D(t,e,n,i){x(t,0+(i?1:0),3),function(t,e,n,i){B(t),v(t,n),v(t,~n),r.arraySet(t.pending_buf,t.window,e,n,t.pending),t.pending+=n}(t,e,n)}n._tr_init=function(t){O||(function(){var t,e,n,r,i,l=new Array(16);for(r=n=0;r<28;r++)for(p[r]=n,t=0;t<1<<s[r];t++)d[n++]=r;for(d[n-1]=r,r=i=0;r<16;r++)for(g[r]=i,t=0;t<1<<o[r];t++)h[i++]=r;for(i>>=7;r<30;r++)for(g[r]=i<<7,t=0;t<1<<o[r]-7;t++)h[256+i++]=r;for(e=0;e<=15;e++)l[e]=0;for(t=0;t<=143;)u[2*t+1]=8,t++,l[8]++;for(;t<=255;)u[2*t+1]=9,t++,l[9]++;for(;t<=279;)u[2*t+1]=7,t++,l[7]++;for(;t<=287;)u[2*t+1]=8,t++,l[8]++;for(S(u,287,l),t=0;t<30;t++)c[2*t+1]=5,c[2*t]=C(t,5);f=new y(u,s,257,286,15),A=new y(c,o,0,30,15),m=new y(new Array(0),a,0,19,7)}(),O=!0),t.l_desc=new w(t.dyn_ltree,f),t.d_desc=new w(t.dyn_dtree,A),t.bl_desc=new w(t.bl_tree,m),t.bi_buf=0,t.bi_valid=0,E(t)},n._tr_stored_block=D,n._tr_flush_block=function(t,e,n,r){var i,s,o=0;0<t.level?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),F(t,t.l_desc),F(t,t.d_desc),o=function(t){var e;for(T(t,t.dyn_ltree,t.l_desc.max_code),T(t,t.dyn_dtree,t.d_desc.max_code),F(t,t.bl_desc),e=18;3<=e&&0===t.bl_tree[2*l[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),(s=t.static_len+3+7>>>3)<=(i=t.opt_len+3+7>>>3)&&(i=s)):i=s=n+5,n+4<=i&&-1!==e?D(t,e,n,r):4===t.strategy||s===i?(x(t,2+(r?1:0),3),I(t,u,c)):(x(t,4+(r?1:0),3),function(t,e,n,r){var i;for(x(t,e-257,5),x(t,n-1,5),x(t,r-4,4),i=0;i<r;i++)x(t,t.bl_tree[2*l[i]+1],3);R(t,t.dyn_ltree,e-1),R(t,t.dyn_dtree,n-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,o+1),I(t,t.dyn_ltree,t.dyn_dtree)),E(t),r&&B(t)},n._tr_tally=function(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(d[n]+256+1)]++,t.dyn_dtree[2*b(e)]++),t.last_lit===t.lit_bufsize-1},n._tr_align=function(t){x(t,2,3),_(t,256,u),function(t){16===t.bi_valid?(v(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):8<=t.bi_valid&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},{"../utils/common":41}],53:[function(t,e,n){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,e,n){"use strict";e.exports="function"==typeof setImmediate?setImmediate:function(){var t=[].slice.apply(arguments);t.splice(1,0,0),setTimeout.apply(null,t)}},{}]},{},[10])(10)},yuCN:function(t,e,n){(function(t){var r;!function(t,i,s){function o(t){var e=this;e.next=function(){var t,n,r=e.x,i=e.i;return t=r[i],n=(t^=t>>>7)^t<<24,n^=(t=r[i+1&7])^t>>>10,n^=(t=r[i+3&7])^t>>>3,n^=(t=r[i+4&7])^t<<7,t=r[i+7&7],r[i]=n^=(t^=t<<13)^t<<9,e.i=i+1&7,n},function(t,e){var n,r=[];if(e===(0|e))r[0]=e;else for(e=""+e,n=0;n<e.length;++n)r[7&n]=r[7&n]<<15^e.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n&&(r[7]=-1),t.x=r,t.i=0,n=256;n>0;--n)t.next()}(e,t)}function a(t,e){return e.x=t.x.slice(),e.i=t.i,e}function l(t,e){null==t&&(t=+new Date);var n=new o(t),r=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=n.next,i.quick=i,r&&(r.x&&a(r,n),i.state=function(){return a(n,{})}),i}i&&i.exports?i.exports=l:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return l}).call(e,n,e,i))||(i.exports=r):this.xorshift7=l}(0,t,n("B9Yq"))}).call(this,n("YuTi")(t))},zUnb:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.r(e);let i=!1;const s={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else i&&console.log("RxJS: Back to a better error behavior. Thank you. <3");i=t},get useDeprecatedSynchronousErrorHandling(){return i}};function o(t){setTimeout(()=>{throw t},0)}const a={closed:!0,next(t){},error(t){if(s.useDeprecatedSynchronousErrorHandling)throw t;o(t)},complete(){}},l=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))();function u(t){return null!==t&&"object"==typeof t}const c=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let h=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_unsubscribe:i,_subscriptions:s}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(r(i))try{i.call(this)}catch(o){e=o instanceof c?d(o.errors):[o]}if(l(s)){let t=-1,n=s.length;for(;++t<n;){const n=s[t];if(u(n))try{n.unsubscribe()}catch(o){e=e||[],o instanceof c?e=e.concat(d(o.errors)):e.push(o)}}}if(e)throw new c(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}return t.EMPTY=function(t){return t.closed=!0,t}(new t),t})();function d(t){return t.reduce((t,e)=>t.concat(e instanceof c?e.errors:e),[])}const p=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())();class f extends h{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=a;break;case 1:if(!t){this.destination=a;break}if("object"==typeof t){t instanceof f?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new A(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new A(this,t,e,n)}}[p](){return this}static create(t,e,n){const r=new f(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class A extends f{constructor(t,e,n,i){let s;super(),this._parentSubscriber=t;let o=this;r(e)?s=e:e&&(s=e.next,n=e.error,i=e.complete,e!==a&&(o=Object.create(e),r(o.unsubscribe)&&this.add(o.unsubscribe.bind(o)),o.unsubscribe=this.unsubscribe.bind(this))),this._context=o,this._next=s,this._error=n,this._complete=i}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;s.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=s;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):o(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;o(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);s.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),s.useDeprecatedSynchronousErrorHandling)throw n;o(n)}}__tryOrSetError(t,e,n){if(!s.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return s.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(o(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}const m=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")();function g(t){return t}let y=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:r}=this,i=function(t,e,n){if(t){if(t instanceof f)return t;if(t[p])return t[p]()}return t||e||n?new f(t,e,n):new f(a)}(t,e,n);if(i.add(r?r.call(i,this.source):this.source||s.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),s.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i}_trySubscribe(t){try{return this._subscribe(t)}catch(e){s.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:r}=t;if(e||r)return!1;t=n&&n instanceof f?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=w(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[m](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?g:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=w(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function w(t){if(t||(t=s.Promise||Promise),!t)throw new Error("no Promise impl found");return t}const b=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})();class v extends h{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}class x extends f{constructor(t){super(t),this.destination=t}}let _=(()=>{class t extends y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[p](){return new x(this)}lift(t){const e=new C(this,this);return e.operator=t,e}next(t){if(this.closed)throw new b;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new b;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new b;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new b;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new b;return this.hasError?(t.error(this.thrownError),h.EMPTY):this.isStopped?(t.complete(),h.EMPTY):(this.observers.push(t),new v(this,t))}asObservable(){const t=new y;return t.source=this,t}}return t.create=(t,e)=>new C(t,e),t})();class C extends _{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):h.EMPTY}}function S(t){return t&&"function"==typeof t.schedule}class E extends f{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}const B=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()};function k(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}const N=k(),I=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function F(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}const T=t=>{if(t&&"function"==typeof t[m])return r=t,t=>{const e=r[m]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(I(t))return B(t);if(F(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,o),t);if(t&&"function"==typeof t[N])return e=t,t=>{const n=e[N]();for(;;){const e=n.next();if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=u(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,r};function R(t,e,n,r,i=new E(t,n,r)){if(!i.closed)return e instanceof y?e.subscribe(i):T(e)(i)}class O extends f{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}function D(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new L(t,e))}}class L{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new M(t,this.project,this.thisArg))}}class M extends f{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}function U(t,e){return new y(n=>{const r=new h;let i=0;return r.add(e.schedule((function(){i!==t.length?(n.next(t[i++]),n.closed||r.add(this.schedule())):n.complete()}))),r})}function P(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[m]}(t))return function(t,e){return new y(n=>{const r=new h;return r.add(e.schedule(()=>{const i=t[m]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(F(t))return function(t,e){return new y(n=>{const r=new h;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(I(t))return U(t,e);if(function(t){return t&&"function"==typeof t[N]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new y(n=>{const r=new h;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[N](),r.add(e.schedule((function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())})))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof y?t:new y(T(t))}function z(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?r=>r.pipe(z((n,r)=>P(t(n,r)).pipe(D((t,i)=>e(n,t,r,i))),n)):("number"==typeof e&&(n=e),e=>e.lift(new Q(t,n)))}class Q{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new H(t,this.project,this.concurrent))}}class H extends O{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e,t,n)}_innerSub(t,e,n){const r=new E(this,e,n),i=this.destination;i.add(r);const s=R(this,t,void 0,void 0,r);s!==r&&i.add(s)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t,e,n,r,i){this.destination.next(e)}notifyComplete(t){const e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function $(t=Number.POSITIVE_INFINITY){return z(g,t)}function V(t,e){return e?U(t,e):new y(B(t))}function q(...t){let e=Number.POSITIVE_INFINITY,n=null,r=t[t.length-1];return S(r)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof r&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof y?t[0]:$(e)(V(t,n))}function j(){return function(t){return t.lift(new K(t))}}class K{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new W(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class W extends f{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}class G extends y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new h,t.add(this.source.subscribe(new Y(this.getSubject(),this))),t.closed&&(this._connection=null,t=h.EMPTY)),t}refCount(){return j()(this)}}const X=(()=>{const t=G.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class Y extends x{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function J(){return new _}function Z(){return t=>{return j()((e=J,function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,X);return r.source=t,r.subjectFactory=n,r})(t));var e}}function tt(t){return{toString:t}.toString()}function et(t,e,n){return tt(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty("__parameters__")?t.__parameters__:Object.defineProperty(t,"__parameters__",{value:[]}).__parameters__;for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}const nt=et("Inject",t=>({token:t})),rt=et("Optional"),it=et("Self"),st=et("SkipSelf");var ot=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});function at(t){for(let e in t)if(t[e]===at)return e;throw Error("Could not find renamed property on target object.")}function lt(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function ut(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ct(t){return{factory:t.factory,providers:t.providers||[],imports:t.imports||[]}}function ht(t){return dt(t,t[ft])||dt(t,t[gt])}function dt(t,e){return e&&e.token===t?e:null}function pt(t){return t&&(t.hasOwnProperty(At)||t.hasOwnProperty(yt))?t[At]:null}const ft=at({"\u0275prov":at}),At=at({"\u0275inj":at}),mt=at({"\u0275provFallback":at}),gt=at({ngInjectableDef:at}),yt=at({ngInjectorDef:at});function wt(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(wt).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return""+t.overriddenName;if(t.name)return""+t.name;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function bt(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const vt=at({__forward_ref__:at});function xt(t){return t.__forward_ref__=xt,t.toString=function(){return wt(this())},t}function _t(t){return Ct(t)?t():t}function Ct(t){return"function"==typeof t&&t.hasOwnProperty(vt)&&t.__forward_ref__===xt}const St="undefined"!=typeof globalThis&&globalThis,Et="undefined"!=typeof window&&window,Bt="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,kt="undefined"!=typeof global&&global,Nt=St||kt||Et||Bt,It=at({"\u0275cmp":at}),Ft=at({"\u0275dir":at}),Tt=at({"\u0275pipe":at}),Rt=at({"\u0275mod":at}),Ot=at({"\u0275loc":at}),Dt=at({"\u0275fac":at}),Lt=at({__NG_ELEMENT_ID__:at});class Mt{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=ut({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return"InjectionToken "+this._desc}}const Ut=new Mt("INJECTOR",-1),Pt={},zt=/\n/gm,Qt=at({provide:String,useValue:at});let Ht,$t=void 0;function Vt(t){const e=$t;return $t=t,e}function qt(t){const e=Ht;return Ht=t,e}function jt(t,e=ot.Default){if(void 0===$t)throw new Error("inject() must be called from an injection context");return null===$t?Gt(t,void 0,e):$t.get(t,e&ot.Optional?null:void 0,e)}function Kt(t,e=ot.Default){return(Ht||jt)(_t(t),e)}const Wt=Kt;function Gt(t,e,n){const r=ht(t);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&ot.Optional)return null;if(void 0!==e)return e;throw new Error(`Injector: NOT_FOUND [${wt(t)}]`)}function Xt(t){const e=[];for(let n=0;n<t.length;n++){const r=_t(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t=void 0,n=ot.Default;for(let e=0;e<r.length;e++){const i=r[e];i instanceof rt||"Optional"===i.ngMetadataName||i===rt?n|=ot.Optional:i instanceof st||"SkipSelf"===i.ngMetadataName||i===st?n|=ot.SkipSelf:i instanceof it||"Self"===i.ngMetadataName||i===it?n|=ot.Self:t=i instanceof nt||i===nt?i.token:i}e.push(Kt(t,n))}else e.push(Kt(r))}return e}class Yt{get(t,e=Pt){if(e===Pt){const e=new Error(`NullInjectorError: No provider for ${wt(t)}!`);throw e.name="NullInjectorError",e}return e}}class Jt{}class Zt{}function te(t,e){t.forEach(t=>Array.isArray(t)?te(t,e):e(t))}function ee(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function ne(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function re(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}function ie(t,e,n){let r=oe(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function se(t,e){const n=oe(t,e);if(n>=0)return t[1|n]}function oe(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),s=t[n<<1];if(e===s)return n<<1;s>e?i=n:r=n+1}return~(i<<1)}(t,e)}var ae=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),le=function(t){return t[t.Emulated=0]="Emulated",t[t.Native=1]="Native",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const ue={},ce=[];let he=0;function de(t){return tt(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===ae.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||ce,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||le.Emulated,id:"c",styles:t.styles||ce,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,s=t.pipes;return n.id+=he++,n.inputs=ge(t.inputs,e),n.outputs=ge(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(pe):null,n.pipeDefs=s?()=>("function"==typeof s?s():s).map(fe):null,n})}function pe(t){return be(t)||function(t){return t[Ft]||null}(t)}function fe(t){return function(t){return t[Tt]||null}(t)}const Ae={};function me(t){const e={type:t.type,bootstrap:t.bootstrap||ce,declarations:t.declarations||ce,imports:t.imports||ce,exports:t.exports||ce,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&tt(()=>{Ae[t.id]=t.type}),e}function ge(t,e){if(null==t)return ue;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,e&&(e[i]=s)}return n}const ye=de;function we(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function be(t){return t[It]||null}function ve(t,e){return t.hasOwnProperty(Dt)?t[Dt]:null}function xe(t,e){const n=t[Rt]||null;if(!n&&!0===e)throw new Error(`Type ${wt(t)} does not have '\u0275mod' property.`);return n}function _e(t){return Array.isArray(t)&&"object"==typeof t[1]}function Ce(t){return Array.isArray(t)&&!0===t[1]}function Se(t){return 0!=(8&t.flags)}function Ee(t){return 2==(2&t.flags)}function Be(t){return 1==(1&t.flags)}function ke(t){return null!==t.template}function Ne(t){return 0!=(512&t[2])}class Ie{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function Fe(){return Te}function Te(t){return t.type.prototype.ngOnChanges&&(t.setInput=Oe),Re}function Re(){const t=De(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===ue)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function Oe(t,e,n,r){const i=De(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:ue,current:null}),s=i.current||(i.current={}),o=i.previous,a=this.declaredInputs[n],l=o[a];s[a]=new Ie(l&&l.currentValue,e,o===ue),t[r]=e}function De(t){return t.__ngSimpleChanges__||null}Fe.ngInherit=!0;let Le=void 0;function Me(t){return!!t.listen}const Ue={createRenderer:(t,e)=>void 0!==Le?Le:"undefined"!=typeof document?document:void 0};function Pe(t){for(;Array.isArray(t);)t=t[0];return t}function ze(t,e){return Pe(e[t+20])}function Qe(t,e){return Pe(e[t.index])}function He(t,e){return t.data[e+20]}function $e(t,e){return t[e+20]}function Ve(t,e){const n=e[t];return _e(n)?n:n[0]}function qe(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function je(t){return 4==(4&t[2])}function Ke(t){return 128==(128&t[2])}function We(t,e){return null===t||null==e?null:t[e]}function Ge(t){t[18]=0}function Xe(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const Ye={lFrame:wn(null),bindingsEnabled:!0,checkNoChangesMode:!1};function Je(){return Ye.bindingsEnabled}function Ze(){return Ye.lFrame.lView}function tn(){return Ye.lFrame.tView}function en(t){Ye.lFrame.contextLView=t}function nn(){return Ye.lFrame.previousOrParentTNode}function rn(t,e){Ye.lFrame.previousOrParentTNode=t,Ye.lFrame.isParent=e}function sn(){return Ye.lFrame.isParent}function on(){Ye.lFrame.isParent=!1}function an(){return Ye.checkNoChangesMode}function ln(t){Ye.checkNoChangesMode=t}function un(){const t=Ye.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function cn(){return Ye.lFrame.bindingIndex++}function hn(t){const e=Ye.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function dn(t,e){const n=Ye.lFrame;n.bindingIndex=n.bindingRootIndex=t,pn(e)}function pn(t){Ye.lFrame.currentDirectiveIndex=t}function fn(){return Ye.lFrame.currentQueryIndex}function An(t){Ye.lFrame.currentQueryIndex=t}function mn(t,e){const n=yn();Ye.lFrame=n,n.previousOrParentTNode=e,n.lView=t}function gn(t,e){const n=yn(),r=t[1];Ye.lFrame=n,n.previousOrParentTNode=e,n.lView=t,n.tView=r,n.contextLView=t,n.bindingIndex=r.bindingStartIndex}function yn(){const t=Ye.lFrame,e=null===t?null:t.child;return null===e?wn(t):e}function wn(t){const e={previousOrParentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:0,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null};return null!==t&&(t.child=e),e}function bn(){const t=Ye.lFrame;return Ye.lFrame=t.parent,t.previousOrParentTNode=null,t.lView=null,t}const vn=bn;function xn(){const t=bn();t.isParent=!0,t.tView=null,t.selectedIndex=0,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function _n(){return Ye.lFrame.selectedIndex}function Cn(t){Ye.lFrame.selectedIndex=t}function Sn(){const t=Ye.lFrame;return He(t.tView,t.selectedIndex)}function En(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:s,ngAfterViewChecked:o,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),s&&(t.viewHooks||(t.viewHooks=[])).push(-n,s),o&&((t.viewHooks||(t.viewHooks=[])).push(n,o),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,o)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function Bn(t,e,n){In(t,e,3,n)}function kn(t,e,n,r){(3&t[2])===n&&In(t,e,n,r)}function Nn(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function In(t,e,n,r){const i=null!=r?r:-1;let s=0;for(let o=void 0!==r?65535&t[18]:0;o<e.length;o++)if("number"==typeof e[o+1]){if(s=e[o],null!=r&&s>=r)break}else e[o]<0&&(t[18]+=65536),(s<i||-1==i)&&(Fn(t,n,e,o),t[18]=(4294901760&t[18])+o+2),o++}function Fn(t,e,n,r){const i=n[r]<0,s=n[r+1],o=t[i?-n[r]:n[r]];i?t[2]>>11<t[18]>>16&&(3&t[2])===e&&(t[2]+=2048,s.call(o)):s.call(o)}class Tn{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function Rn(t,e,n){const r=Me(t);let i=0;for(;i<n.length;){const s=n[i];if("number"==typeof s){if(0!==s)break;i++;const o=n[i++],a=n[i++],l=n[i++];r?t.setAttribute(e,a,l,o):e.setAttributeNS(o,a,l)}else{const o=s,a=n[++i];Dn(o)?r&&t.setProperty(e,o,a):r?t.setAttribute(e,o,a):e.setAttribute(o,a),i++}}return i}function On(t){return 3===t||4===t||6===t}function Dn(t){return 64===t.charCodeAt(0)}function Ln(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Mn(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Mn(t,e,n,r,i){let s=0,o=t.length;if(-1===e)o=-1;else for(;s<t.length;){const n=t[s++];if("number"==typeof n){if(n===e){o=-1;break}if(n>e){o=s-1;break}}}for(;s<t.length;){const e=t[s];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[s+1]=i));if(r===t[s+1])return void(t[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),null!==r&&t.splice(s++,0,r),null!==i&&t.splice(s++,0,i)}function Un(t){return-1!==t}function Pn(t){return 32767&t}function zn(t){return t>>16}function Qn(t,e){let n=zn(t),r=e;for(;n>0;)r=r[15],n--;return r}function Hn(t){return"string"==typeof t?t:null==t?"":""+t}function $n(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Hn(t)}const Vn=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Nt))();function qn(t){return t instanceof Function?t():t}let jn=!0;function Kn(t){const e=jn;return jn=t,e}let Wn=0;function Gn(t,e){const n=Yn(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Xn(r.data,t),Xn(e,null),Xn(r.blueprint,null));const i=Jn(t,e),s=t.injectorIndex;if(Un(i)){const t=Pn(i),n=Qn(i,e),r=n[1].data;for(let i=0;i<8;i++)e[s+i]=n[t+i]|r[t+i]}return e[s+8]=i,s}function Xn(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Yn(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null==e[t.injectorIndex+8]?-1:t.injectorIndex}function Jn(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=e[6],r=1;for(;n&&-1===n.injectorIndex;)n=(e=e[15])?e[6]:null,r++;return n?n.injectorIndex|r<<16:-1}function Zn(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Lt)&&(r=n[Lt]),null==r&&(r=n[Lt]=Wn++);const i=255&r,s=1<<i,o=64&i,a=32&i,l=e.data;128&i?o?a?l[t+7]|=s:l[t+6]|=s:a?l[t+5]|=s:l[t+4]|=s:o?a?l[t+3]|=s:l[t+2]|=s:a?l[t+1]|=s:l[t]|=s}(t,e,n)}function tr(t,e,n,r=ot.Default,i){if(null!==t){const i=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Lt)?t[Lt]:void 0;return"number"==typeof e&&e>0?255&e:e}(n);if("function"==typeof i){mn(e,t);try{const t=i();if(null!=t||r&ot.Optional)return t;throw new Error(`No provider for ${$n(n)}!`)}finally{vn()}}else if("number"==typeof i){if(-1===i)return new ar(t,e);let s=null,o=Yn(t,e),a=-1,l=r&ot.Host?e[16][6]:null;for((-1===o||r&ot.SkipSelf)&&(a=-1===o?Jn(t,e):e[o+8],or(r,!1)?(s=e[1],o=Pn(a),e=Qn(a,e)):o=-1);-1!==o;){a=e[o+8];const t=e[1];if(sr(i,o,t.data)){const t=nr(o,e,n,s,r,l);if(t!==er)return t}or(r,e[1].data[o+8]===l)&&sr(i,o,e)?(s=t,o=Pn(a),e=Qn(a,e)):o=-1}}}if(r&ot.Optional&&void 0===i&&(i=null),0==(r&(ot.Self|ot.Host))){const t=e[9],s=qt(void 0);try{return t?t.get(n,i,r&ot.Optional):Gt(n,i,r&ot.Optional)}finally{qt(s)}}if(r&ot.Optional)return i;throw new Error(`NodeInjector: NOT_FOUND [${$n(n)}]`)}const er={};function nr(t,e,n,r,i,s){const o=e[1],a=o.data[t+8],l=rr(a,o,n,null==r?Ee(a)&&jn:r!=o&&3===a.type,i&ot.Host&&s===a);return null!==l?ir(e,o,l,a):er}function rr(t,e,n,r,i){const s=t.providerIndexes,o=e.data,a=1048575&s,l=t.directiveStart,u=s>>20,c=i?a+u:t.directiveEnd;for(let h=r?a:a+u;h<c;h++){const t=o[h];if(h<l&&n===t||h>=l&&t.type===n)return h}if(i){const t=o[l];if(t&&ke(t)&&t.type===n)return l}return null}function ir(t,e,n,r){let i=t[n];const s=e.data;if(i instanceof Tn){const o=i;if(o.resolving)throw new Error("Circular dep for "+$n(s[n]));const a=Kn(o.canSeeViewProviders);let l;o.resolving=!0,o.injectImpl&&(l=qt(o.injectImpl)),mn(t,r);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const r=Te(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),s&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,s))}(n,s[n],e)}finally{o.injectImpl&&qt(l),Kn(a),o.resolving=!1,vn()}}return i}function sr(t,e,n){const r=64&t,i=32&t;let s;return s=128&t?r?i?n[e+7]:n[e+6]:i?n[e+5]:n[e+4]:r?i?n[e+3]:n[e+2]:i?n[e+1]:n[e],!!(s&1<<t)}function or(t,e){return!(t&ot.Self||t&ot.Host&&e)}class ar{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return tr(this._tNode,this._lView,t,void 0,e)}}function lr(t){const e=t;if(Ct(t))return()=>{const t=lr(_t(e));return t?t():null};let n=ve(e);if(null===n){const t=pt(e);n=t&&t.factory}return n||null}function ur(t){return tt(()=>{const e=t.prototype.constructor,n=e[Dt]||lr(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[Dt]||lr(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function cr(t){return t.ngDebugContext}function hr(t){return t.ngOriginalError}function dr(t,...e){t.error(...e)}class pr{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||dr}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?cr(t)?cr(t):this._findContext(hr(t)):null}_findOriginalError(t){let e=hr(t);for(;e&&hr(e);)e=hr(e);return e}}class fr{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"}}class Ar extends fr{getTypeName(){return"HTML"}}class mr extends fr{getTypeName(){return"Style"}}class gr extends fr{getTypeName(){return"Script"}}class yr extends fr{getTypeName(){return"URL"}}class wr extends fr{getTypeName(){return"ResourceURL"}}function br(t){return t instanceof fr?t.changingThisBreaksApplicationSecurity:t}function vr(t,e){const n=xr(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see http://g.co/ng/security#xss)`)}return n===e}function xr(t){return t instanceof fr&&t.getTypeName()||null}let _r=!0,Cr=!1;function Sr(){return Cr=!0,_r}class Er{getInertBodyElement(t){t="<body><remove></remove>"+t+"</body>";try{const e=(new window.DOMParser).parseFromString(t,"text/html").body;return e.removeChild(e.firstChild),e}catch(e){return null}}}class Br{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=t,e;const n=this.inertDocument.createElement("body");return n.innerHTML=t,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const kr=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,Nr=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Ir(t){return(t=String(t)).match(kr)||t.match(Nr)?t:(Sr()&&console.warn(`WARNING: sanitizing unsafe URL value ${t} (see http://g.co/ng/security#xss)`),"unsafe:"+t)}function Fr(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Tr(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const Rr=Fr("area,br,col,hr,img,wbr"),Or=Fr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Dr=Fr("rp,rt"),Lr=Tr(Dr,Or),Mr=Tr(Rr,Tr(Or,Fr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Tr(Dr,Fr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Lr),Ur=Fr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Pr=Fr("srcset"),zr=Tr(Ur,Pr,Fr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Fr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Qr=Fr("script,style,template");class Hr{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!Mr.hasOwnProperty(e))return this.sanitizedSomething=!0,!Qr.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,s=e.toLowerCase();if(!zr.hasOwnProperty(s)){this.sanitizedSomething=!0;continue}let o=t.value;Ur[s]&&(o=Ir(o)),Pr[s]&&(r=o,o=(r=String(r)).split(",").map(t=>Ir(t.trim())).join(", ")),this.buf.push(" ",e,'="',qr(o),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();Mr.hasOwnProperty(e)&&!Rr.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(qr(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: "+t.outerHTML);return e}}const $r=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Vr=/([^\#-~ |!])/g;function qr(t){return t.replace(/&/g,"&amp;").replace($r,(function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"})).replace(Vr,(function(t){return"&#"+t.charCodeAt(0)+";"})).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let jr;function Kr(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var Wr=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function Gr(t){const e=function(){const t=Ze();return t&&t[12]}();return e?e.sanitize(Wr.URL,t)||"":vr(t,"URL")?br(t):Ir(Hn(t))}function Xr(t,e){t.__ngContext__=e}function Yr(t){throw new Error("Multiple components match node with tagname "+t.tagName)}function Jr(){throw new Error("Cannot mix multi providers and regular providers")}function Zr(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}function ti(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==Zr(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function ei(t){return 0===t.type&&"ng-template"!==t.tagName}function ni(t,e,n){return e===(0!==t.type||n?t.tagName:"ng-template")}function ri(t,e,n){let r=4;const i=t.attrs||[],s=function(t){for(let e=0;e<t.length;e++)if(On(t[e]))return e;return t.length}(i);let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&r){if(r=2|1&r,""!==l&&!ni(t,l,n)||""===l&&1===e.length){if(ii(r))return!1;o=!0}}else{const u=8&r?l:e[++a];if(8&r&&null!==t.attrs){if(!ti(t.attrs,u,n)){if(ii(r))return!1;o=!0}continue}const c=si(8&r?"class":l,i,ei(t),n);if(-1===c){if(ii(r))return!1;o=!0;continue}if(""!==u){let t;t=c>s?"":i[c+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==Zr(e,u,0)||2&r&&u!==t){if(ii(r))return!1;o=!0}}}}else{if(!o&&!ii(r)&&!ii(l))return!1;if(o&&ii(l))continue;o=!1,r=l|1&r}}return ii(r)||o}function ii(t){return 0==(1&t)}function si(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function oi(t,e,n=!1){for(let r=0;r<e.length;r++)if(ri(t,e[r],n))return!0;return!1}function ai(t,e){t:for(let n=0;n<e.length;n++){const r=e[n];if(t.length===r.length){for(let e=0;e<t.length;e++)if(t[e]!==r[e])continue t;return!0}}return!1}function li(t,e){return t?":not("+e.trim()+")":e}function ui(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&r){const e=t[++n];i+="["+o+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""===i||ii(o)||(e+=li(s,i),i=""),r=o,s=s||!ii(r);n++}return""!==i&&(e+=li(s,i)),e}const ci={};function hi(t){const e=t[3];return Ce(e)?e[3]:e}function di(t){return fi(t[13])}function pi(t){return fi(t[4])}function fi(t){for(;null!==t&&!Ce(t);)t=t[4];return t}function Ai(t){mi(tn(),Ze(),_n()+t,an())}function mi(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&Bn(e,r,n)}else{const r=t.preOrderHooks;null!==r&&kn(e,r,0,n)}Cn(n)}function gi(t,e){return t<<17|e<<2}function yi(t){return t>>17&32767}function wi(t){return 2|t}function bi(t){return(131068&t)>>2}function vi(t,e){return-131069&t|e<<2}function xi(t){return 1|t}function _i(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],s=n[r+1];if(-1!==s){const n=t.data[s];An(i),n.contentQueries(2,e[s],s)}}}function Ci(t,e,n){return Me(e)?e.createElement(t,n):null===n?e.createElement(t):e.createElementNS(n,t)}function Si(t,e,n,r,i,s,o,a,l,u){const c=e.blueprint.slice();return c[0]=i,c[2]=140|r,Ge(c),c[3]=c[15]=t,c[8]=n,c[10]=o||t&&t[10],c[11]=a||t&&t[11],c[12]=l||t&&t[12]||null,c[9]=u||t&&t[9]||null,c[6]=s,c[16]=2==e.type?t[16]:c,c}function Ei(t,e,n,r,i,s){const o=n+20,a=t.data[o]||function(t,e,n,r,i,s){const o=nn(),a=sn(),l=a?o:o&&o.parent,u=t.data[n]=Mi(0,l&&l!==e?l:null,r,n,i,s);return null===t.firstChild&&(t.firstChild=u),o&&(!a||null!=o.child||null===u.parent&&2!==o.type?a||(o.next=u):o.child=u),u}(t,e,o,r,i,s);return rn(a,!0),a}function Bi(t,e,n){gn(e,e[6]);try{const r=t.viewQuery;null!==r&&ss(1,r,n);const i=t.template;null!==i&&Ii(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&_i(t,e),t.staticViewQueries&&ss(2,t.viewQuery,n);const s=t.components;null!==s&&function(t,e){for(let n=0;n<e.length;n++)ts(t,e[n])}(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,xn()}}function ki(t,e,n,r){const i=e[2];if(256==(256&i))return;gn(e,e[6]);const s=an();try{Ge(e),Ye.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&Ii(t,e,n,2,r);const o=3==(3&i);if(!s)if(o){const n=t.preOrderCheckHooks;null!==n&&Bn(e,n,null)}else{const n=t.preOrderHooks;null!==n&&kn(e,n,0,null),Nn(e,0)}if(function(t){for(let e=di(t);null!==e;e=pi(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&Xe(r,1),n[2]|=1024}}}(e),function(t){for(let e=di(t);null!==e;e=pi(e))for(let t=10;t<e.length;t++){const n=e[t],r=n[1];Ke(n)&&ki(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&_i(t,e),!s)if(o){const n=t.contentCheckHooks;null!==n&&Bn(e,n)}else{const n=t.contentHooks;null!==n&&kn(e,n,1),Nn(e,1)}!function(t,e){try{const n=t.expandoInstructions;if(null!==n){let r=t.expandoStartIndex,i=-1,s=-1;for(let t=0;t<n.length;t++){const o=n[t];"number"==typeof o?o<=0?(s=0-o,Cn(s),r+=9+n[++t],i=r):r+=o:(null!==o&&(dn(r,i),o(2,e[i])),i++)}}}finally{Cn(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)Zi(t,e[n])}(e,a);const l=t.viewQuery;if(null!==l&&ss(2,l,r),!s)if(o){const n=t.viewCheckHooks;null!==n&&Bn(e,n)}else{const n=t.viewHooks;null!==n&&kn(e,n,2),Nn(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),s||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Xe(e[3],-1))}finally{xn()}}function Ni(t,e,n,r){const i=e[10],s=!an(),o=je(e);try{s&&!o&&i.begin&&i.begin(),o&&Bi(t,e,r),ki(t,e,n,r)}finally{s&&!o&&i.end&&i.end()}}function Ii(t,e,n,r,i){const s=_n();try{Cn(-1),2&r&&e.length>20&&mi(t,e,0,an()),n(r,i)}finally{Cn(s)}}function Fi(t,e,n){if(Se(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}function Ti(t,e,n){Je()&&(function(t,e,n,r){const i=n.directiveStart,s=n.directiveEnd;t.firstCreatePass||Gn(n,e),Xr(r,e);const o=n.initialInputs;for(let a=i;a<s;a++){const r=t.data[a],s=ke(r);s&&Gi(e,n,r);const l=ir(e,t,a,n);Xr(l,e),null!==o&&Xi(0,a-i,l,r,0,o),s&&(Ve(n.index,e)[8]=l)}}(t,e,n,Qe(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,s=t.expandoInstructions,o=t.firstCreatePass,a=n.index-20,l=Ye.lFrame.currentDirectiveIndex;try{Cn(a);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];pn(n),null!==r.hostBindings||0!==r.hostVars||null!==r.hostAttrs?$i(r,i):o&&s.push(null)}}finally{Cn(-1),pn(l)}}(t,e,n))}function Ri(t,e,n=Qe){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(e,t):t[o];t[i++]=a}}}function Oi(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Di(1,-1,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Di(t,e,n,r,i,s,o,a,l,u){const c=20+r,h=c+i,d=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:ci);return n}(c,h);return d[1]={type:t,id:e,blueprint:d,template:n,queries:null,viewQuery:a,node:null,data:d.slice().fill(null,c),bindingStartIndex:c,expandoStartIndex:h,expandoInstructions:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:u,incompleteFirstPass:!1}}function Li(t,e,n,r){const i=as(e);i.push(n),t.firstCreatePass&&function(t){return t.cleanup||(t.cleanup=[])}(t).push(r,i.length-1)}function Mi(t,e,n,r,i,s){return{type:n,index:r,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,tagName:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Ui(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function Pi(t,e,n,r,i,s,o,a){const l=Qe(e,n);let u,c=e.inputs;!a&&null!=c&&(u=c[r])?(us(t,n,u,r,i),Ee(e)&&function(t,e){const n=Ve(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3===e.type&&(r=function(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=o?o(i,e.tagName||"",r):i,Me(s)?s.setProperty(l,r,i):Dn(r)||(l.setProperty?l.setProperty(r,i):l[r]=i))}function zi(t,e,n,r){let i=!1;if(Je()){const s=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let s=0;s<r.length;s++){const o=r[s];oi(n,o.selectors,!1)&&(i||(i=[]),Zn(Gn(n,e),t,o.type),ke(o)?(2&n.flags&&Yr(n),qi(t,n),i.unshift(o)):i.push(o))}return i}(t,e,n),o=null===r?null:{"":-1};if(null!==s){let r=0;i=!0,Ki(n,t.data.length,s.length);for(let t=0;t<s.length;t++){const e=s[t];e.providersResolver&&e.providersResolver(e)}Vi(t,n,s.length);let a=!1,l=!1;for(let i=0;i<s.length;i++){const u=s[i];n.mergedAttrs=Ln(n.mergedAttrs,u.hostAttrs),Wi(t,e,u),ji(t.data.length-1,u,o),null!==u.contentQueries&&(n.flags|=8),null===u.hostBindings&&null===u.hostAttrs&&0===u.hostVars||(n.flags|=128);const c=u.type.prototype;!a&&(c.ngOnChanges||c.ngOnInit||c.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index-20),a=!0),l||!c.ngOnChanges&&!c.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index-20),l=!0),Qi(t,u),r+=u.hostVars}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,s=[];let o=null,a=null;for(let l=e.directiveStart;l<n;l++){const t=r[l],n=t.inputs,u=null===i||ei(e)?null:Yi(n,i);s.push(u),o=Ui(n,l,o),a=Ui(t.outputs,l,a)}null!==o&&(o.hasOwnProperty("class")&&(e.flags|=16),o.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=s,e.inputs=o,e.outputs=a}(t,n),Hi(t,e,r)}o&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new Error(`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,o)}return n.mergedAttrs=Ln(n.mergedAttrs,n.attrs),i}function Qi(t,e){const n=t.expandoInstructions;n.push(e.hostBindings),0!==e.hostVars&&n.push(e.hostVars)}function Hi(t,e,n){for(let r=0;r<n;r++)e.push(ci),t.blueprint.push(ci),t.data.push(null)}function $i(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Vi(t,e,n){const r=20-e.index,i=t.data.length-(1048575&e.providerIndexes);(t.expandoInstructions||(t.expandoInstructions=[])).push(r,i,n)}function qi(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function ji(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;ke(e)&&(n[""]=t)}}function Ki(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Wi(t,e,n){t.data.push(n);const r=n.factory||(n.factory=ve(n.type)),i=new Tn(r,ke(n),null);t.blueprint.push(i),e.push(i)}function Gi(t,e,n){const r=Qe(e,t),i=Oi(n),s=t[10],o=es(t,Si(t,i,null,n.onPush?64:16,r,e,s,s.createRenderer(r,n)));t[e.index]=o}function Xi(t,e,n,r,i,s){const o=s[e];if(null!==o){const t=r.setInput;for(let e=0;e<o.length;){const i=o[e++],s=o[e++],a=o[e++];null!==t?r.setInput(n,a,i,s):n[s]=a}}}function Yi(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function Ji(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function Zi(t,e){const n=Ve(e,t);if(Ke(n)){const t=n[1];80&n[2]?ki(t,n,t.template,n[8]):n[5]>0&&function t(e){for(let r=di(e);null!==r;r=pi(r))for(let e=10;e<r.length;e++){const n=r[e];if(1024&n[2]){const t=n[1];ki(t,n,t.template,n[8])}else n[5]>0&&t(n)}const n=e[1].components;if(null!==n)for(let r=0;r<n.length;r++){const i=Ve(n[r],e);Ke(i)&&i[5]>0&&t(i)}}(n)}}function ts(t,e){const n=Ve(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),Bi(r,n,n[8])}function es(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function ns(t){for(;t;){t[2]|=64;const e=hi(t);if(Ne(t)&&!e)return t;t=e}return null}function rs(t,e,n){const r=e[10];r.begin&&r.begin();try{ki(t,e,t.template,n)}catch(i){throw ls(e,i),i}finally{r.end&&r.end()}}function is(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=qe(n),i=r[1];Ni(i,r,i.template,n)}}(t[8])}function ss(t,e,n){An(0),e(t,n)}const os=(()=>Promise.resolve(null))();function as(t){return t[7]||(t[7]=[])}function ls(t,e){const n=t[9],r=n?n.get(pr,null):null;r&&r.handleError(e)}function us(t,e,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++],l=e[o],u=t.data[o];null!==u.setInput?u.setInput(l,i,r,a):l[a]=i}}function cs(t,e){const n=e[3];return-1===t.index?Ce(n)?n:null:n}function hs(t,e){const n=cs(t,e);return n?_s(e[11],n[7]):null}function ds(t,e,n,r,i){if(null!=r){let s,o=!1;Ce(r)?s=r:_e(r)&&(o=!0,r=r[0]);const a=Pe(r);0===t&&null!==n?null==i?vs(e,n,a):bs(e,n,a,i||null):1===t&&null!==n?bs(e,n,a,i||null):2===t?function(t,e,n){const r=_s(t,e);r&&function(t,e,n,r){Me(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,o):3===t&&e.destroyNode(a),null!=s&&function(t,e,n,r,i){const s=n[7];s!==Pe(n)&&ds(e,t,r,s,i);for(let o=10;o<n.length;o++){const i=n[o];ks(i[1],i,t,e,r,s)}}(e,t,s,n,i)}}function ps(t,e,n,r){const i=hs(t.node,e);i&&ks(t,e,e[11],n?1:2,i,r)}function fs(t,e){const n=t[9],r=n.indexOf(e);1024&e[2]&&Xe(e[3],-1),n.splice(r,1)}function As(t,e){if(t.length<=10)return;const n=10+e,r=t[n];if(r){const i=r[17];null!==i&&i!==t&&fs(i,r),e>0&&(t[n-1][4]=r[4]);const s=ne(t,10+e);ps(r[1],r,!1,null);const o=s[19];null!==o&&o.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}function ms(t,e){if(!(256&e[2])){const n=e[11];Me(n)&&n.destroyNode&&ks(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return ys(t[1],t);for(;e;){let n=null;if(_e(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)_e(e)&&ys(e[1],e),e=gs(e,t);null===e&&(e=t),_e(e)&&ys(e[1],e),n=e&&e[4]}e=n}}(e)}}function gs(t,e){let n;return _e(t)&&(n=t[6])&&2===n.type?cs(n,t):t[3]===e?null:t[3]}function ys(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof Tn)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2)e[n+1].call(t[e[n]]);else e.call(t)}}}(t,e),function(t,e){const n=t.cleanup;if(null!==n){const t=e[7];for(let r=0;r<n.length-1;r+=2)if("string"==typeof n[r]){const i=n[r+1],s="function"==typeof i?i(e):Pe(e[i]),o=t[n[r+2]],a=n[r+3];"boolean"==typeof a?s.removeEventListener(n[r],o,a):a>=0?t[a]():t[-a].unsubscribe(),r+=2}else n[r].call(t[n[r+1]]);e[7]=null}}(t,e);const n=e[6];n&&3===n.type&&Me(e[11])&&e[11].destroy();const r=e[17];if(null!==r&&Ce(e[3])){r!==e[3]&&fs(r,e);const n=e[19];null!==n&&n.detachView(t)}}}function ws(t,e,n){let r=e.parent;for(;null!=r&&(4===r.type||5===r.type);)r=(e=r).parent;if(null==r){const t=n[6];return 2===t.type?hs(t,n):n[0]}if(e&&5===e.type&&4&e.flags)return Qe(e,n).parentNode;if(2&r.flags){const e=t.data,n=e[e[r.index].directiveStart].encapsulation;if(n!==le.ShadowDom&&n!==le.Native)return null}return Qe(r,n)}function bs(t,e,n,r){Me(t)?t.insertBefore(e,n,r):e.insertBefore(n,r,!0)}function vs(t,e,n){Me(t)?t.appendChild(e,n):e.appendChild(n)}function xs(t,e,n,r){null!==r?bs(t,e,n,r):vs(t,e,n)}function _s(t,e){return Me(t)?t.parentNode(e):e.parentNode}function Cs(t,e){if(2===t.type){const n=cs(t,e);return null===n?null:Es(n.indexOf(e,10)-10,n)}return 4===t.type||5===t.type?Qe(t,e):null}function Ss(t,e,n,r){const i=ws(t,r,e);if(null!=i){const t=e[11],s=Cs(r.parent||e[6],e);if(Array.isArray(n))for(let e=0;e<n.length;e++)xs(t,i,n[e],s);else xs(t,i,n,s)}}function Es(t,e){const n=10+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return function t(e,n){if(null!==n){const r=n.type;if(3===r)return Qe(n,e);if(0===r)return Es(-1,e[n.index]);if(4===r||5===r){const r=n.child;if(null!==r)return t(e,r);{const t=e[n.index];return Ce(t)?Es(-1,t):Pe(t)}}{const r=e[16],i=r[6],s=hi(r),o=i.projection[n.projection];return null!=o?t(s,o):t(e,n.next)}}return null}(t,r)}return e[7]}function Bs(t,e,n,r,i,s,o){for(;null!=n;){const a=r[n.index],l=n.type;o&&0===e&&(a&&Xr(Pe(a),r),n.flags|=4),64!=(64&n.flags)&&(4===l||5===l?(Bs(t,e,n.child,r,i,s,!1),ds(e,t,i,a,s)):1===l?Ns(t,e,r,n,i,s):ds(e,t,i,a,s)),n=o?n.projectionNext:n.next}}function ks(t,e,n,r,i,s){Bs(n,r,t.node.child,e,i,s,!1)}function Ns(t,e,n,r,i,s){const o=n[16],a=o[6].projection[r.projection];if(Array.isArray(a))for(let l=0;l<a.length;l++)ds(e,t,i,a[l],s);else Bs(t,e,a,o[3],i,s,!0)}function Is(t,e,n){Me(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Fs(t,e,n){Me(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}class Ts{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._viewContainerRef=null}get rootNodes(){const t=this._lView;return null==t[0]?function t(e,n,r,i,s=!1){for(;null!==r;){const o=n[r.index];if(null!==o&&i.push(Pe(o)),Ce(o))for(let e=10;e<o.length;e++){const n=o[e],r=n[1].firstChild;null!==r&&t(n[1],n,r,i)}const a=r.type;if(4===a||5===a)t(e,n,r.child,i);else if(1===a){const e=n[16],s=e[6].projection[r.projection];if(Array.isArray(s))i.push(...s);else{const n=hi(e);t(n[1],n,s,i,!0)}}r=s?r.projectionNext:r.next}return i}(t[1],t,t[6].child,[]):[]}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._viewContainerRef){const t=this._viewContainerRef.indexOf(this);t>-1&&this._viewContainerRef.detach(t),this._viewContainerRef=null}ms(this._lView[1],this._lView)}onDestroy(t){Li(this._lView[1],this._lView,null,t)}markForCheck(){ns(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){rs(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){ln(!0);try{rs(t,e,n)}finally{ln(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t}detachFromAppRef(){var t;this._appRef=null,ks(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class Rs extends Ts{constructor(t){super(t),this._view=t}detectChanges(){is(this._view)}checkNoChanges(){!function(t){ln(!0);try{is(t)}finally{ln(!1)}}(this._view)}get context(){return null}}let Os,Ds,Ls;function Ms(t,e,n){return Os||(Os=class extends t{}),new Os(Qe(e,n))}function Us(t,e,n,r){return Ds||(Ds=class extends t{constructor(t,e,n){super(),this._declarationView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=Si(this._declarationView,e,t,16,null,e.node);n[17]=this._declarationView[this._declarationTContainer.index];const r=this._declarationView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),Bi(e,n,t),new Ts(n)}}),0===n.type?new Ds(r,n,Ms(e,n,r)):null}function Ps(t,e,n,r){let i;Ls||(Ls=class extends t{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostView=n}get element(){return Ms(e,this._hostTNode,this._hostView)}get injector(){return new ar(this._hostTNode,this._hostView)}get parentInjector(){const t=Jn(this._hostTNode,this._hostView),e=Qn(t,this._hostView),n=function(t,e,n){if(n.parent&&-1!==n.parent.injectorIndex){const t=n.parent.injectorIndex;let e=n.parent;for(;null!=e.parent&&t==e.parent.injectorIndex;)e=e.parent;return e}let r=zn(t),i=e,s=e[6];for(;r>1;)i=i[15],s=i[6],r--;return s}(t,this._hostView,this._hostTNode);return Un(t)&&null!=n?new ar(n,e):new ar(null,this._hostView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){return null!==this._lContainer[8]&&this._lContainer[8][t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const s=n||this.parentInjector;if(!i&&null==t.ngModule&&s){const t=s.get(Jt,null);t&&(i=t)}const o=t.create(s,r,void 0,i);return this.insert(o.hostView,e),o}insert(t,e){const n=t._lView,r=n[1];if(t.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");if(this.allocateContainerIfNeeded(),Ce(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new Ls(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e);return function(t,e,n,r){const i=10+r,s=n.length;r>0&&(n[i-1][4]=e),r<s-10?(e[4]=n[i],ee(n,10+r,e)):(n.push(e),e[4]=null),e[3]=n;const o=e[17];null!==o&&n!==o&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,this._lContainer,i),ps(r,n,!0,Es(i,this._lContainer)),t.attachToViewContainerRef(this),ee(this._lContainer[8],i,t),t}move(t,e){if(t.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");return this.insert(t,e)}indexOf(t){const e=this._lContainer[8];return null!==e?e.indexOf(t):-1}remove(t){this.allocateContainerIfNeeded();const e=this._adjustIndex(t,-1);!function(t,e){const n=As(t,e);n&&ms(n[1],n)}(this._lContainer,e),ne(this._lContainer[8],e)}detach(t){this.allocateContainerIfNeeded();const e=this._adjustIndex(t,-1),n=As(this._lContainer,e);return n&&null!=ne(this._lContainer[8],e)?new Ts(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}allocateContainerIfNeeded(){null===this._lContainer[8]&&(this._lContainer[8]=[])}});const s=r[n.index];if(Ce(s))i=s;else{let t;if(4===n.type)t=Pe(s);else if(t=r[11].createComment(""),Ne(r)){const e=r[11],i=Qe(n,r);bs(e,_s(e,i),t,function(t,e){return Me(t)?t.nextSibling(e):e.nextSibling}(e,i))}else Ss(r[1],r,t,n);r[n.index]=i=Ji(s,r,t,n),es(r,i)}return new Ls(i,n,r)}let zs=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Qs(),t})();const Qs=function(t=!1){return function(t,e,n){if(!n&&Ee(t)){const n=Ve(t.index,e);return new Ts(n,n)}return 3===t.type||0===t.type||4===t.type||5===t.type?new Ts(e[16],e):null}(nn(),Ze(),t)},Hs=Function,$s=new Mt("Set Injector scope."),Vs={},qs={},js=[];let Ks=void 0;function Ws(){return void 0===Ks&&(Ks=new Yt),Ks}function Gs(t,e=null,n=null,r){return new Xs(t,n,e||Ws(),r)}class Xs{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&te(e,n=>this.processProvider(n,t,e)),te([t],t=>this.processInjectorType(t,[],i)),this.records.set(Ut,Zs(void 0,this));const s=this.records.get($s);this.scope=null!=s?s.value:null,this.source=r||("object"==typeof t?null:wt(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=Pt,n=ot.Default){this.assertNotDestroyed();const r=Vt(this);try{if(!(n&ot.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof Mt)&&ht(t);e=n&&this.injectableDefInScope(n)?Zs(Ys(t),Vs):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&ot.Self?Ws():this.parent).get(t,e=n&ot.Optional&&e===Pt?null:e)}catch(s){if("NullInjectorError"===s.name){if((s.ngTempTokenPath=s.ngTempTokenPath||[]).unshift(wt(t)),r)throw s;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e.__source&&i.unshift(e.__source),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=wt(e);if(Array.isArray(e))i=e.map(wt).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):wt(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(zt,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(s,t,"R3InjectorError",this.source)}throw s}finally{Vt(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(wt(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=_t(t)))return!1;let r=pt(t);const i=null==r&&t.ngModule||void 0,s=void 0===i?t:i,o=-1!==n.indexOf(s);if(void 0!==i&&(r=pt(i)),null==r)return!1;if(null!=r.imports&&!o){let t;n.push(s);try{te(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];te(r,t=>this.processProvider(t,n,r||js))}}this.injectorDefTypes.add(s),this.records.set(s,Zs(r.factory,Vs));const a=r.providers;if(null!=a&&!o){const e=t;te(a,t=>this.processProvider(t,e,a))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=eo(t=_t(t))?t:_t(t&&t.provide);const i=function(t,e,n){return to(t)?Zs(void 0,t.useValue):Zs(Js(t,e,n),Vs)}(t,e,n);if(eo(t)||!0!==t.multi){const t=this.records.get(r);t&&void 0!==t.multi&&Jr()}else{let e=this.records.get(r);e?void 0===e.multi&&Jr():(e=Zs(void 0,Vs,!0),e.factory=()=>Xt(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===qs?function(t){throw new Error("Cannot instantiate cyclic dependency! "+t)}(wt(t)):e.value===Vs&&(e.value=qs,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function Ys(t){const e=ht(t),n=null!==e?e.factory:ve(t);if(null!==n)return n;const r=pt(t);if(null!==r)return r.factory;if(t instanceof Mt)throw new Error(`Token ${wt(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=re(e,"?");throw new Error(`Can't resolve all parameters for ${wt(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[ft]||t[gt]||t[mt]&&t[mt]());if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function Js(t,e,n){let r=void 0;if(eo(t)){const e=_t(t);return ve(e)||Ys(e)}if(to(t))r=()=>_t(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...Xt(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>Kt(_t(t.useExisting));else{const i=_t(t&&(t.useClass||t.provide));if(i||function(t,e,n){let r="";throw t&&e&&(r=` - only instances of Provider and Type are allowed, got: [${e.map(t=>t==n?"?"+n+"?":"...").join(", ")}]`),new Error(`Invalid provider for the NgModule '${wt(t)}'`+r)}(e,n,t),!function(t){return!!t.deps}(t))return ve(i)||Ys(i);r=()=>new i(...Xt(t.deps))}var i;return r}function Zs(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function to(t){return null!==t&&"object"==typeof t&&Qt in t}function eo(t){return"function"==typeof t}const no=function(t,e,n){return function(t,e=null,n=null,r){const i=Gs(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let ro=(()=>{class t{static create(t,e){return Array.isArray(t)?no(t,e,""):no(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=Pt,t.NULL=new Yt,t.\u0275prov=ut({token:t,providedIn:"any",factory:()=>Kt(Ut)}),t.__NG_ELEMENT_ID__=-1,t})();const io=new Mt("AnalyzeForEntryComponents");function so(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const t=e[o];"number"==typeof t?s=t:1==s?i=bt(i,t):2==s&&(r=bt(r,t+": "+e[++o]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}let oo=null;function ao(){if(!oo){const t=Nt.Symbol;if(t&&t.iterator)oo=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(oo=n)}}}return oo}class lo{constructor(t){this.wrapped=t}static wrap(t){return new lo(t)}static unwrap(t){return lo.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof lo}}function uo(t){return!!co(t)&&(Array.isArray(t)||!(t instanceof Map)&&ao()in t)}function co(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function ho(t,e,n){return t[e]=n}function po(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function fo(t,e,n,r){const i=Ze();return po(i,cn(),e)&&(tn(),function(t,e,n,r,i,s){const o=Qe(t,e),a=e[11];if(null==r)Me(a)?a.removeAttribute(o,n,s):o.removeAttribute(n);else{const e=null==i?Hn(r):i(r,t.tagName||"",n);Me(a)?a.setAttribute(o,n,e,s):s?o.setAttributeNS(s,n,e):o.setAttribute(n,e)}}(Sn(),i,t,e,n,r)),fo}function Ao(t,e,n,r){return po(t,cn(),n)?e+Hn(n)+r:ci}function mo(t,e,n,r,i,s,o,a){const l=Ze(),u=tn(),c=t+20,h=u.firstCreatePass?function(t,e,n,r,i,s,o,a,l){const u=e.consts,c=Ei(e,n[6],t,0,o||null,We(u,a));zi(e,n,c,We(u,l)),En(e,c);const h=c.tViews=Di(2,-1,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u),d=Mi(0,null,2,-1,null,null);return d.injectorIndex=c.injectorIndex,h.node=d,null!==e.queries&&(e.queries.template(e,c),h.queries=e.queries.embeddedTView(c)),c}(t,u,l,e,n,r,i,s,o):u.data[c];rn(h,!1);const d=l[11].createComment("");Ss(u,l,d,h),Xr(d,l),es(l,l[c]=Ji(d,l,d,h)),Be(h)&&Ti(u,l,h),null!=o&&Ri(l,h,a)}function go(t){return $e(Ye.lFrame.contextLView,t)}function yo(t,e=ot.Default){const n=Ze();return null==n?Kt(t,e):tr(nn(),n,_t(t),e)}function wo(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(On(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(nn(),t)}function bo(t,e,n){const r=Ze();return po(r,cn(),e)&&Pi(tn(),Sn(),r,t,e,r[11],n,!1),bo}function vo(t,e,n,r,i){const s=i?"class":"style";us(t,n,e.inputs[s],s,r)}function xo(t,e,n,r){const i=Ze(),s=tn(),o=20+t,a=i[11],l=i[o]=Ci(e,a,Ye.lFrame.currentNamespace),u=s.firstCreatePass?function(t,e,n,r,i,s,o){const a=e.consts,l=We(a,s),u=Ei(e,n[6],t,3,i,l);return zi(e,n,u,We(a,o)),null!==u.attrs&&so(u,u.attrs,!1),null!==u.mergedAttrs&&so(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(t,s,i,0,e,n,r):s.data[o];rn(u,!0);const c=u.mergedAttrs;null!==c&&Rn(a,l,c);const h=u.classes;null!==h&&Fs(a,l,h);const d=u.styles;null!==d&&Is(a,l,d),Ss(s,i,l,u),0===Ye.lFrame.elementDepthCount&&Xr(l,i),Ye.lFrame.elementDepthCount++,Be(u)&&(Ti(s,i,u),Fi(s,u,i)),null!==r&&Ri(i,u)}function _o(){let t=nn();sn()?on():(t=t.parent,rn(t,!1));const e=t;Ye.lFrame.elementDepthCount--;const n=tn();n.firstCreatePass&&(En(n,t),Se(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&vo(n,e,Ze(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&vo(n,e,Ze(),e.stylesWithoutHost,!1)}function Co(t,e,n,r){xo(t,e,n,r),_o()}function So(t,e,n){const r=Ze(),i=tn(),s=t+20,o=i.firstCreatePass?function(t,e,n,r,i){const s=e.consts,o=We(s,r),a=Ei(e,n[6],t,4,"ng-container",o);return null!==o&&so(a,o,!0),zi(e,n,a,We(s,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(t,i,r,e,n):i.data[s];rn(o,!0);const a=r[s]=r[11].createComment("");Ss(i,r,a,o),Xr(a,r),Be(o)&&(Ti(i,r,o),Fi(i,o,r)),null!=n&&Ri(r,o)}function Eo(){let t=nn();const e=tn();sn()?on():(t=t.parent,rn(t,!1)),e.firstCreatePass&&(En(e,t),Se(t)&&e.queries.elementEnd(t))}function Bo(t,e,n){So(t,e,n),Eo()}function ko(){return Ze()}function No(t){return!!t&&"function"==typeof t.then}function Io(t){return!!t&&"function"==typeof t.subscribe}function Fo(t,e,n=!1,r){const i=Ze(),s=tn(),o=nn();return function(t,e,n,r,i,s,o=!1,a){const l=Be(r),u=t.firstCreatePass&&(t.cleanup||(t.cleanup=[])),c=as(e);let h=!0;if(3===r.type){const d=Qe(r,e),p=a?a(d):ue,f=p.target||d,A=c.length,m=a?t=>a(Pe(t[r.index])).target:r.index;if(Me(n)){let o=null;if(!a&&l&&(o=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const t=i[s];if(t===n&&i[s+1]===r){const t=e[7],n=i[s+2];return t.length>n?t[n]:null}"string"==typeof t&&(s+=2)}return null}(t,e,i,r.index)),null!==o)(o.__ngLastListenerFn__||o).__ngNextListenerFn__=s,o.__ngLastListenerFn__=s,h=!1;else{s=Ro(r,e,s,!1);const t=n.listen(p.name||f,i,s);c.push(s,t),u&&u.push(i,m,A,A+1)}}else s=Ro(r,e,s,!0),f.addEventListener(i,s,o),c.push(s),u&&u.push(i,m,A,o)}const d=r.outputs;let p;if(h&&null!==d&&(p=d[i])){const t=p.length;if(t)for(let n=0;n<t;n+=2){const t=e[p[n]][p[n+1]].subscribe(s),o=c.length;c.push(s,t),u&&u.push(i,r.index,o,-(o+1))}}}(s,i,i[11],o,t,e,n,r),Fo}function To(t,e,n){try{return!1!==e(n)}catch(r){return ls(t,r),!1}}function Ro(t,e,n,r){return function i(s){if(s===Function)return n;const o=2&t.flags?Ve(t.index,e):e;0==(32&e[2])&&ns(o);let a=To(e,n,s),l=i.__ngNextListenerFn__;for(;l;)a=To(e,l,s)&&a,l=l.__ngNextListenerFn__;return r&&!1===a&&(s.preventDefault(),s.returnValue=!1),a}}function Oo(t=1){return function(t){return(Ye.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Ye.lFrame.contextLView))[8]}(t)}function Do(t,e){let n=null;const r=function(t){const e=t.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(t);for(let i=0;i<e.length;i++){const s=e[i];if("*"!==s){if(null===r?oi(t,s,!0):ai(r,s))return i}else n=i}return n}function Lo(t){const e=Ze()[16][6];if(!e.projection){const n=e.projection=re(t?t.length:1,null),r=n.slice();let i=e.child;for(;null!==i;){const e=t?Do(i,t):0;null!==e&&(r[e]?r[e].projectionNext=i:n[e]=i,r[e]=i),i=i.next}}}function Mo(t,e=0,n){const r=Ze(),i=tn(),s=Ei(i,r[6],t,1,null,n||null);null===s.projection&&(s.projection=e),on(),function(t,e,n){Ns(e[11],0,e,n,ws(t,n,e),Cs(n.parent||e[6],e))}(i,r,s)}const Uo=[];function Po(t,e,n,r,i){const s=t[n+1],o=null===e;let a=r?yi(s):bi(s),l=!1;for(;0!==a&&(!1===l||o);){const n=t[a+1];zo(t[a],e)&&(l=!0,t[a+1]=r?xi(n):wi(n)),a=r?yi(n):bi(n)}l&&(t[n+1]=r?wi(s):xi(s))}function zo(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&oe(t,e)>=0}const Qo={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Ho(t){return t.substring(Qo.key,Qo.keyEnd)}function $o(t,e){const n=Qo.textEnd;return n===e?-1:(e=Qo.keyEnd=function(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,Qo.key=e,n),Vo(t,e,n))}function Vo(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function qo(t,e,n){return Wo(t,e,n,!1),qo}function jo(t,e){return Wo(t,e,null,!0),jo}function Ko(t,e){for(let n=function(t){return function(t){Qo.key=0,Qo.keyEnd=0,Qo.value=0,Qo.valueEnd=0,Qo.textEnd=t.length}(t),$o(t,Vo(t,0,Qo.textEnd))}(e);n>=0;n=$o(e,n))ie(t,Ho(e),!0)}function Wo(t,e,n,r){const i=Ze(),s=tn(),o=hn(2);s.firstUpdatePass&&Xo(s,t,o,r),e!==ci&&po(i,o,e)&&Zo(s,s.data[_n()+20],i,i[11],t,i[o+1]=function(t,e){return null==t||("string"==typeof e?t+=e:"object"==typeof t&&(t=wt(br(t)))),t}(e,n),r,o)}function Go(t,e){return e>=t.expandoStartIndex}function Xo(t,e,n,r){const i=t.data;if(null===i[n+1]){const s=i[_n()+20],o=Go(t,n);na(s,r)&&null===e&&!o&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=Ye.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=Jo(n=Yo(null,t,e,n,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||t[o]!==i)if(n=Yo(i,t,e,n,r),null===s){let n=function(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==bi(r))return t[yi(r)]}(t,e,r);void 0!==n&&Array.isArray(n)&&(n=Yo(null,t,e,n[1],r),n=Jo(n,e.attrs,r),function(t,e,n,r){t[yi(n?e.classBindings:e.styleBindings)]=r}(t,e,r,n))}else s=function(t,e,n){let r=void 0;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=Jo(r,t[s].hostAttrs,n);return Jo(r,e.attrs,n)}(t,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),n}(i,s,e,r),function(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=yi(o),l=bi(o);t[r]=n;let u,c=!1;if(Array.isArray(n)){const t=n;u=t[1],(null===u||oe(t,u)>0)&&(c=!0)}else u=n;if(i)if(0!==l){const e=yi(t[a+1]);t[r+1]=gi(e,a),0!==e&&(t[e+1]=vi(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=gi(a,0),0!==a&&(t[a+1]=vi(t[a+1],r)),a=r;else t[r+1]=gi(l,0),0===a?a=r:t[l+1]=vi(t[l+1],r),l=r;c&&(t[r+1]=wi(t[r+1])),Po(t,u,r,!0),Po(t,u,r,!1),function(t,e,n,r,i){const s=i?t.residualClasses:t.residualStyles;null!=s&&"string"==typeof e&&oe(s,e)>=0&&(n[r+1]=xi(n[r+1]))}(e,u,t,r,s),o=gi(a,l),s?e.classBindings=o:e.styleBindings=o}(i,s,e,n,o,r)}}function Yo(t,e,n,r,i){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=e[a],r=Jo(r,s.hostAttrs,i),s!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Jo(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),ie(t,o,!!n||e[++s]))}return void 0===t?null:t}function Zo(t,e,n,r,i,s,o,a){if(3!==e.type)return;const l=t.data,u=l[a+1];ea(1==(1&u)?ta(l,e,n,i,bi(u),o):void 0)||(ea(s)||function(t){return 2==(2&t)}(u)&&(s=ta(l,null,n,i,a,o)),function(t,e,n,r,i){const s=Me(t);if(e)i?s?t.addClass(n,r):n.classList.add(r):s?t.removeClass(n,r):n.classList.remove(r);else{const e=-1==r.indexOf("-")?void 0:2;null==i?s?t.removeStyle(n,r,e):n.style.removeProperty(r):s?t.setStyle(n,r,i,e):n.style.setProperty(r,i)}}(r,o,ze(_n(),n),i,s))}function ta(t,e,n,r,i,s){const o=null===e;let a=void 0;for(;i>0;){const e=t[i],s=Array.isArray(e),l=s?e[1]:e,u=null===l;let c=n[i+1];c===ci&&(c=u?Uo:void 0);let h=u?se(c,r):l===r?c:void 0;if(s&&!ea(h)&&(h=se(e,r)),ea(h)&&(a=h,o))return a;const d=t[i+1];i=o?yi(d):bi(d)}if(null!==e){let t=s?e.residualClasses:e.residualStyles;null!=t&&(a=se(t,r))}return a}function ea(t){return void 0!==t}function na(t,e){return 0!=(t.flags&(e?16:32))}function ra(t,e=""){const n=Ze(),r=tn(),i=t+20,s=r.firstCreatePass?Ei(r,n[6],t,3,null,null):r.data[i],o=n[i]=function(t,e){return Me(e)?e.createText(t):e.createTextNode(t)}(e,n[11]);Ss(r,n,o,s),rn(s,!1)}function ia(t){return sa("",t,""),ia}function sa(t,e,n){const r=Ze(),i=Ao(r,t,e,n);return i!==ci&&function(t,e,n){const r=ze(e,t),i=t[11];Me(i)?i.setValue(r,n):r.textContent=n}(r,_n(),i),sa}function oa(t,e,n){const r=Ze();return po(r,cn(),e)&&Pi(tn(),Sn(),r,t,e,r[11],n,!0),oa}function aa(t,e){const n=qe(t)[1],r=n.data.length-1;En(n,{directiveStart:r,directiveEnd:r+1})}function la(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i=void 0;if(ke(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=ua(t.inputs),e.declaredInputs=ua(t.declaredInputs),e.outputs=ua(t.outputs);const n=i.hostBindings;n&&da(t,n);const s=i.viewQuery,o=i.contentQueries;if(s&&ca(t,s),o&&ha(t,o),lt(t.inputs,i.inputs),lt(t.declaredInputs,i.declaredInputs),lt(t.outputs,i.outputs),ke(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===la&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ln(i.hostAttrs,n=Ln(n,i.hostAttrs))}}(r)}function ua(t){return t===ue?{}:t===ce?[]:t}function ca(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function ha(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function da(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}function pa(t,e,n,r,i){if(t=_t(t),Array.isArray(t))for(let s=0;s<t.length;s++)pa(t[s],e,n,r,i);else{const s=tn(),o=Ze();let a=eo(t)?t:_t(t.provide),l=Js(t);const u=nn(),c=1048575&u.providerIndexes,h=u.directiveStart,d=u.providerIndexes>>20;if(eo(t)||!t.multi){const r=new Tn(l,i,yo),p=ma(a,e,i?c:c+d,h);-1===p?(Zn(Gn(u,o),s,a),fa(s,t,e.length),e.push(a),u.directiveStart++,u.directiveEnd++,i&&(u.providerIndexes+=1048576),n.push(r),o.push(r)):(n[p]=r,o[p]=r)}else{const p=ma(a,e,c+d,h),f=ma(a,e,c,c+d),A=p>=0&&n[p],m=f>=0&&n[f];if(i&&!m||!i&&!A){Zn(Gn(u,o),s,a);const c=function(t,e,n,r,i){const s=new Tn(t,n,yo);return s.multi=[],s.index=e,s.componentProviders=0,Aa(s,i,r&&!n),s}(i?ya:ga,n.length,i,r,l);!i&&m&&(n[f].providerFactory=c),fa(s,t,e.length,0),e.push(a),u.directiveStart++,u.directiveEnd++,i&&(u.providerIndexes+=1048576),n.push(c),o.push(c)}else fa(s,t,p>-1?p:f,Aa(n[i?f:p],l,!i&&r));!i&&r&&m&&n[f].componentProviders++}}}function fa(t,e,n,r){const i=eo(e);if(i||e.useClass){const s=(e.useClass||e).prototype.ngOnDestroy;if(s){const o=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=o.indexOf(n);-1===t?o.push(n,[r,s]):o[t+1].push(r,s)}else o.push(n,s)}}}function Aa(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function ma(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function ga(t,e,n,r){return wa(this.multi,[])}function ya(t,e,n,r){const i=this.multi;let s;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=ir(n,n[1],this.providerFactory.index,r);s=e.slice(0,t),wa(i,s);for(let n=t;n<e.length;n++)s.push(e[n])}else s=[],wa(i,s);return s}function wa(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function ba(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=tn();if(r.firstCreatePass){const i=ke(t);pa(n,r.data,r.blueprint,i,!0),pa(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class va{}class xa{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${wt(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let _a=(()=>{class t{}return t.NULL=new xa,t})(),Ca=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=()=>Sa(t),t})();const Sa=function(t){return Ms(t,nn(),Ze())};class Ea{}var Ba=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});let ka=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Na(),t})();const Na=function(){const t=Ze(),e=Ve(nn().index,t);return function(t){const e=t[11];if(Me(e))return e;throw new Error("Cannot inject Renderer2 when the application uses Renderer3!")}(_e(e)?e:t)};let Ia=(()=>{class t{}return t.\u0275prov=ut({token:t,providedIn:"root",factory:()=>null}),t})();class Fa{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Ta=new Fa("10.0.8");class Ra{constructor(){}supports(t){return uo(t)}create(t){return new Da(t)}}const Oa=(t,e)=>e;class Da{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Oa}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const s=!n||e&&e.currentIndex<Pa(n,r,i)?e:n,o=Pa(s,r,i),a=s.currentIndex;if(s===n)r--,n=n._nextRemoved;else if(e=e._next,null==s.previousIndex)r++;else{i||(i=[]);const t=o-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,s=r+n;e<=s&&s<t&&(i[n]=r+1)}i[s.previousIndex]=e-t}}o!==a&&t(s,o,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!uo(t))throw new Error(`Error trying to diff '${wt(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,s=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),s=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[ao()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),s=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t,e;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=e)t.previousIndex=t.currentIndex,e=t._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):t=this._addAfter(new La(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Ua),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ua),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class La{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Ma{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class Ua{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new Ma,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Pa(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class za{constructor(){}supports(t){return t instanceof Map||co(t)}create(){return new Qa}}class Qa{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||co(t)))throw new Error(`Error trying to diff '${wt(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new Ha(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class Ha{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}let $a=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new st,new rt]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=ut({token:t,providedIn:"root",factory:()=>new t([new Ra])}),t})(),Va=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new st,new rt]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=ut({token:t,providedIn:"root",factory:()=>new t([new za])}),t})();const qa=[new za],ja=new $a([new Ra]),Ka=new Va(qa);let Wa=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Ga(t,Ca),t})();const Ga=function(t,e){return Us(t,e,nn(),Ze())};let Xa=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Ya(t,Ca),t})();const Ya=function(t,e){return Ps(t,e,nn(),Ze())},Ja={};class Za extends _a{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=be(t);return new nl(e,this.ngModule)}}function tl(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const el=new Mt("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Vn});class nl extends va{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(ui).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return tl(this.componentDef.inputs)}get outputs(){return tl(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const s=t.get(n,Ja,i);return s!==Ja||r===Ja?s:e.get(n,r,i)}}}(t,r.injector):t,s=i.get(Ea,Ue),o=i.get(Ia,null),a=s.createRenderer(null,this.componentDef),l=this.componentDef.selectors[0][0]||"div",u=n?function(t,e,n){if(Me(t))return t.selectRootElement(e,n===le.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Ci(l,s.createRenderer(null,this.componentDef),function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(l)),c=this.componentDef.onPush?576:528,h={components:[],scheduler:Vn,clean:os,playerHandler:null,flags:0},d=Di(0,-1,null,1,0,null,null,null,null,null),p=Si(null,d,h,c,null,null,s,a,o,i);let f,A;gn(p,null);try{const t=function(t,e,n,r,i,s){const o=n[1];n[20]=t;const a=Ei(o,null,0,3,null,null),l=a.mergedAttrs=e.hostAttrs;null!==l&&(so(a,l,!0),null!==t&&(Rn(i,t,l),null!==a.classes&&Fs(i,t,a.classes),null!==a.styles&&Is(i,t,a.styles)));const u=r.createRenderer(t,e),c=Si(n,Oi(e),null,e.onPush?64:16,n[20],a,r,u,void 0);return o.firstCreatePass&&(Zn(Gn(a,n),o,e.type),qi(o,a),Ki(a,n.length,1)),es(n,c),n[20]=c}(u,this.componentDef,p,s,a);if(u)if(n)Rn(a,u,["ng-version",Ta.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let s=t[r];if("string"==typeof s)2===i?""!==s&&e.push(s,t[++r]):8===i&&n.push(s);else{if(!ii(i))break;i=s}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&Rn(a,u,t),e&&e.length>0&&Fs(a,u,e.join(" "))}if(A=He(d,0),void 0!==e){const t=A.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}f=function(t,e,n,r,i){const s=n[1],o=function(t,e,n){const r=nn();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Vi(t,r,1),Wi(t,e,n));const i=ir(e,t,e.length-1,r);Xr(i,e);const s=Qe(r,e);return s&&Xr(s,e),i}(s,n,e);r.components.push(o),t[8]=o,i&&i.forEach(t=>t(o,e)),e.contentQueries&&e.contentQueries(1,o,n.length-1);const a=nn();if(s.firstCreatePass&&(null!==e.hostBindings||null!==e.hostAttrs)){Cn(a.index-20);const t=n[1];Qi(t,e),Hi(t,n,e.hostVars),$i(e,o)}return o}(t,this.componentDef,p,h,[aa]),Bi(d,p,null)}finally{xn()}const m=new rl(this.componentType,f,Ms(Ca,A,p),p,A);return d.node.child=A,m}}class rl extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.destroyCbs=[],this.instance=e,this.hostView=this.changeDetectorRef=new Rs(r),function(t,e,n,r){let i=t.node;null==i&&(t.node=i=Mi(0,null,2,-1,null,null)),r[6]=i}(r[1],0,0,r),this.componentType=t}get injector(){return new ar(this._tNode,this._rootLView)}destroy(){this.destroyCbs&&(this.destroyCbs.forEach(t=>t()),this.destroyCbs=null,!this.hostView.destroyed&&this.hostView.destroy())}onDestroy(t){this.destroyCbs&&this.destroyCbs.push(t)}}const il=void 0;var sl=["en",[["a","p"],["AM","PM"],il],[["AM","PM"],il,il],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],il,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],il,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",il,"{1} 'at' {0}",il],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let ol={};function al(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=ll(e);if(n)return n;const r=e.split("-")[0];if(n=ll(r),n)return n;if("en"===r)return sl;throw new Error(`Missing locale data for the locale "${t}".`)}function ll(t){return t in ol||(ol[t]=Nt.ng&&Nt.ng.common&&Nt.ng.common.locales&&Nt.ng.common.locales[t]),ol[t]}var ul=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});let cl="en-US";function hl(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error("ASSERTION ERROR: "+t+` [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(cl=t.toLowerCase().replace(/_/g,"-"))}const dl=new Map;class pl extends Jt{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Za(this);const n=xe(t),r=t[Ot]||null;r&&hl(r),this._bootstrapComponents=qn(n.bootstrap),this._r3Injector=Gs(t,e,[{provide:Jt,useValue:this},{provide:_a,useValue:this.componentFactoryResolver}],wt(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=ro.THROW_IF_NOT_FOUND,n=ot.Default){return t===ro||t===Jt||t===Ut?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class fl extends Zt{constructor(t){super(),this.moduleType=t,null!==xe(t)&&function t(e){if(null!==e.\u0275mod.id){const t=e.\u0275mod.id;(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${wt(e)} vs ${wt(e.name)}`)})(t,dl.get(t),e),dl.set(t,e)}let n=e.\u0275mod.imports;n instanceof Function&&(n=n()),n&&n.forEach(e=>t(e))}(t)}create(t){return new pl(this.moduleType,t)}}function Al(t,e,n){const r=un()+t,i=Ze();return i[r]===ci?ho(i,r,n?e.call(n):e()):function(t,e){return t[e]}(i,r)}function ml(t,e,n,r){return gl(Ze(),un(),t,e,n,r)}function gl(t,e,n,r,i,s){const o=e+n;return po(t,o,i)?ho(t,o+1,s?r.call(s,i):r(i)):function(t,e){const n=t[e];return n===ci?void 0:n}(t,o+1)}function yl(t,e){const n=tn();let r;const i=t+20;n.firstCreatePass?(r=function(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}throw new Error(`The pipe '${t}' could not be found!`)}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(i,r.onDestroy)):r=n.data[i];const s=r.factory||(r.factory=ve(r.type)),o=qt(yo),a=Kn(!1),l=s();return Kn(a),qt(o),function(t,e,n,r){const i=n+20;i>=t.data.length&&(t.data[i]=null,t.blueprint[i]=null),e[i]=r}(n,Ze(),t,l),l}function wl(t,e,n){const r=Ze(),i=$e(r,t);return function(t,e){return lo.isWrapped(e)&&(e=lo.unwrap(e),t[Ye.lFrame.bindingIndex]=ci),e}(r,function(t,e){return t[1].data[e+20].pure}(r,t)?gl(r,un(),e,i.transform,n,i):i.transform(n))}const bl=class extends _{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r,i=t=>null,s=()=>null;t&&"object"==typeof t?(r=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(i=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(s=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(r=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(i=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(s=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const o=super.subscribe(r,i,s);return t instanceof h&&t.add(o),o}};function vl(){return this._results[ao()]()}class xl{constructor(){this.dirty=!0,this._results=[],this.changes=new bl,this.length=0;const t=ao(),e=xl.prototype;e[t]||(e[t]=vl)}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t){this._results=function t(e,n){void 0===n&&(n=e);for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?(n===e&&(n=e.slice(0,r)),t(i,n)):n!==e&&n.push(i)}return n}(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}notifyOnChanges(){this.changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class _l{constructor(t){this.queryList=t,this.matches=null}clone(){return new _l(this.queryList)}setDirty(){this.queryList.setDirty()}}class Cl{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new Cl(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==Ql(t,e).matches&&this.queries[e].setDirty()}}class Sl{constructor(t,e,n,r=null){this.predicate=t,this.descendants=e,this.isStatic=n,this.read=r}}class El{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new El(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Bl{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new Bl(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&!1===this.metadata.descendants){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&4===n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){if(Array.isArray(this.metadata.predicate)){const n=this.metadata.predicate;for(let r=0;r<n.length;r++)this.matchTNodeWithReadOption(t,e,kl(e,n[r]))}else{const n=this.metadata.predicate;n===Wa?0===e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,rr(e,t,n,!1,!1))}}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===Ca||r===Xa||r===Wa&&0===e.type)this.addMatch(e.index,-2);else{const n=rr(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function kl(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function Nl(t,e,n,r){return-1===n?function(t,e){return 3===t.type||4===t.type?Ms(Ca,t,e):0===t.type?Us(Wa,Ca,t,e):null}(e,t):-2===n?function(t,e,n){return n===Ca?Ms(Ca,e,t):n===Wa?Us(Wa,Ca,e,t):n===Xa?Ps(Xa,Ca,e,t):void 0}(t,e,r):ir(t,t[1],n,e)}function Il(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,s=n.matches,o=[];for(let t=0;t<s.length;t+=2){const i=s[t];o.push(i<0?null:Nl(e,r[i],s[t+1],n.metadata.read))}i.matches=o}return i.matches}function Fl(t){const e=Ze(),n=tn(),r=fn();An(r+1);const i=Ql(n,r);if(t.dirty&&je(e)===i.metadata.isStatic){if(null===i.matches)t.reset([]);else{const s=i.crossesNgTemplate?function t(e,n,r,i){const s=e.queries.getByIndex(r),o=s.matches;if(null!==o){const a=Il(e,n,s,r);for(let e=0;e<o.length;e+=2){const r=o[e];if(r>0)i.push(a[e/2]);else{const s=o[e+1],a=n[-r];for(let e=10;e<a.length;e++){const n=a[e];n[17]===n[3]&&t(n[1],n,s,i)}if(null!==a[9]){const e=a[9];for(let n=0;n<e.length;n++){const r=e[n];t(r[1],r,s,i)}}}}}return i}(n,e,r,[]):Il(n,e,i,r);t.reset(s),t.notifyOnChanges()}return!0}return!1}function Tl(t,e,n){Ol(tn(),Ze(),t,e,n,!0)}function Rl(t,e,n){Ol(tn(),Ze(),t,e,n,!1)}function Ol(t,e,n,r,i,s){t.firstCreatePass&&(zl(t,new Sl(n,r,s,i),-1),s&&(t.staticViewQueries=!0)),Pl(t,e)}function Dl(t,e,n,r){Ml(tn(),Ze(),e,n,r,!1,nn(),t)}function Ll(t,e,n,r){Ml(tn(),Ze(),e,n,r,!0,nn(),t)}function Ml(t,e,n,r,i,s,o,a){t.firstCreatePass&&(zl(t,new Sl(n,r,s,i),o.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(t.contentQueries.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(t,a),s&&(t.staticContentQueries=!0)),Pl(t,e)}function Ul(){return t=Ze(),e=fn(),t[19].queries[e].queryList;var t,e}function Pl(t,e){const n=new xl;Li(t,e,n,n.destroy),null===e[19]&&(e[19]=new Cl),e[19].queries.push(new _l(n))}function zl(t,e,n){null===t.queries&&(t.queries=new El),t.queries.track(new Bl(e,n))}function Ql(t,e){return t.queries.getByIndex(e)}function Hl(t,e){return Us(Wa,Ca,t,e)}const $l=new Mt("Application Initializer");let Vl=(()=>{class t{constructor(t){this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();No(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(Kt($l,8))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();const ql=new Mt("AppId"),jl={provide:ql,useFactory:function(){return`${Kl()}${Kl()}${Kl()}`},deps:[]};function Kl(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Wl=new Mt("Platform Initializer"),Gl=new Mt("Platform ID"),Xl=new Mt("appBootstrapListener");let Yl=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();const Jl=new Mt("LocaleId"),Zl=new Mt("DefaultCurrencyCode");class tu{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const eu=function(t){return new fl(t)},nu=eu,ru=function(t){return Promise.resolve(eu(t))},iu=function(t){const e=eu(t),n=qn(xe(t).declarations).reduce((t,e)=>{const n=be(e);return n&&t.push(new nl(n)),t},[]);return new tu(e,n)},su=iu,ou=function(t){return Promise.resolve(iu(t))};let au=(()=>{class t{constructor(){this.compileModuleSync=nu,this.compileModuleAsync=ru,this.compileModuleAndAllComponentsSync=su,this.compileModuleAndAllComponentsAsync=ou}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();const lu=(()=>Promise.resolve(0))();function uu(t){"undefined"==typeof Zone?lu.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class cu{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new bl(!1),this.onMicrotaskEmpty=new bl(!1),this.onStable=new bl(!1),this.onError=new bl(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),this.shouldCoalesceEventChangeDetection=e,this.lastRequestAnimationFrameId=-1,this.nativeRequestAnimationFrame=function(){let t=Nt.requestAnimationFrame,e=Nt.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=!!t.shouldCoalesceEventChangeDetection&&t.nativeRequestAnimationFrame&&(()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Nt,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,fu(t),pu(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),fu(t))}(t)});t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0,maybeDelayChangeDetection:e},onInvokeTask:(n,r,i,s,o,a)=>{try{return Au(t),n.invokeTask(i,s,o,a)}finally{e&&"eventTask"===s.type&&e(),mu(t)}},onInvoke:(e,n,r,i,s,o,a)=>{try{return Au(t),e.invoke(r,i,s,o,a)}finally{mu(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,fu(t),pu(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(this)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!cu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(cu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+r,t,du,hu,hu);try{return i.runTask(s,e,n)}finally{i.cancelTask(s)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}function hu(){}const du={};function pu(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function fu(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||t.shouldCoalesceEventChangeDetection&&-1!==t.lastRequestAnimationFrameId)}function Au(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function mu(t){t._nesting--,pu(t)}class gu{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new bl,this.onMicrotaskEmpty=new bl,this.onStable=new bl,this.onError=new bl}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let yu=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{cu.assertNotInAngularZone(),uu(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())uu(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(Kt(cu))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),wu=(()=>{class t{constructor(){this._applications=new Map,xu.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return xu.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();class bu{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}let vu,xu=new bu;const _u=new Mt("AllowMultipleToken");class Cu{constructor(t,e){this.name=t,this.token=e}}function Su(t,e,n=[]){const r="Platform: "+e,i=new Mt(r);return(e=[])=>{let s=Eu();if(!s||s.injector.get(_u,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:$s,useValue:"platform"});!function(t){if(vu&&!vu.destroyed&&!vu.injector.get(_u,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");vu=t.get(Bu);const e=t.get(Wl,null);e&&e.forEach(t=>t())}(ro.create({providers:t,name:r}))}return function(t){const e=Eu();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function Eu(){return vu&&!vu.destroyed?vu:null}let Bu=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new gu:("zone.js"===t?void 0:t)||new cu({enableLongStackTrace:Sr(),shouldCoalesceEventChangeDetection:e}),n}(e?e.ngZone:void 0,e&&e.ngZoneEventCoalescing||!1),r=[{provide:cu,useValue:n}];return n.run(()=>{const e=ro.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),s=i.injector.get(pr,null);if(!s)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return i.onDestroy(()=>Iu(this._modules,i)),n.runOutsideAngular(()=>n.onError.subscribe({next:t=>{s.handleError(t)}})),function(t,e,n){try{const r=n();return No(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(s,n,()=>{const t=i.injector.get(Vl);return t.runInitializers(),t.donePromise.then(()=>(hl(i.injector.get(Jl,"en-US")||"en-US"),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=ku({},e);return function(t,e,n){const r=new fl(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(Nu);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${wt(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(Kt(ro))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();function ku(t,e){return Array.isArray(e)?e.reduce(ku,t):Object.assign(Object.assign({},t),e)}let Nu=(()=>{class t{constructor(t,e,n,r,i,s){this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=s,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=Sr(),this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new y(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),a=new y(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{cu.assertNotInAngularZone(),uu(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{cu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=q(o,a.pipe(Z()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof va?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(Jt),i=n.create(ro.NULL,[],e||n.selector,r);i.onDestroy(()=>{this._unloadComponent(i)});const s=i.injector.get(yu,null);return s&&i.injector.get(wu).registerApplication(i.location.nativeElement,s),this._loadComponent(i),Sr()&&this._console.log("Angular is running in development mode. Call enableProdMode() to enable production mode."),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges();if(this._enforceNoNewChanges)for(let t of this._views)t.checkNoChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Iu(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Xl,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}_unloadComponent(t){this.detachView(t.hostView),Iu(this.components,t)}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy())}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(Kt(cu),Kt(Yl),Kt(ro),Kt(pr),Kt(_a),Kt(Vl))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();function Iu(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Fu{}class Tu{}const Ru={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Ou=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||Ru}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>Du(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>Du(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(Kt(au),Kt(Tu,8))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();function Du(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const Lu=Su(null,"core",[{provide:Gl,useValue:"unknown"},{provide:Bu,deps:[ro]},{provide:wu,deps:[]},{provide:Yl,deps:[]}]),Mu=[{provide:Nu,useClass:Nu,deps:[cu,Yl,ro,pr,_a,Vl]},{provide:el,deps:[cu],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:Vl,useClass:Vl,deps:[[new rt,$l]]},{provide:au,useClass:au,deps:[]},jl,{provide:$a,useFactory:function(){return ja},deps:[]},{provide:Va,useFactory:function(){return Ka},deps:[]},{provide:Jl,useFactory:function(t){return hl(t=t||"undefined"!=typeof $localize&&$localize.locale||"en-US"),t},deps:[[new nt(Jl),new rt,new st]]},{provide:Zl,useValue:"USD"}];let Uu=(()=>{class t{constructor(t){}}return t.\u0275mod=me({type:t}),t.\u0275inj=ct({factory:function(e){return new(e||t)(Kt(Nu))},providers:Mu}),t})(),Pu=null;function zu(){return Pu}const Qu=new Mt("DocumentToken");let Hu=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({factory:$u,token:t,providedIn:"platform"}),t})();function $u(){return Kt(qu)}const Vu=new Mt("Location Initialized");let qu=(()=>{class t extends Hu{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=zu().getLocation(),this._history=zu().getHistory()}getBaseHrefFromDOM(){return zu().getBaseHref(this._doc)}onPopState(t){zu().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){zu().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){ju()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){ju()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(Kt(Qu))},t.\u0275prov=ut({factory:Ku,token:t,providedIn:"platform"}),t})();function ju(){return!!window.history.pushState}function Ku(){return new qu(Kt(Qu))}function Wu(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function Gu(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function Xu(t){return t&&"?"!==t[0]?"?"+t:t}let Yu=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({factory:Ju,token:t,providedIn:"root"}),t})();function Ju(t){const e=Kt(Qu).location;return new tc(Kt(Hu),e&&e.origin||"")}const Zu=new Mt("appBaseHref");let tc=(()=>{class t extends Yu{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Wu(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+Xu(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+Xu(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+Xu(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(Kt(Hu),Kt(Zu,8))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),ec=(()=>{class t extends Yu{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=Wu(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+Xu(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+Xu(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(Kt(Hu),Kt(Zu,8))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),nc=(()=>{class t{constructor(t,e){this._subject=new bl,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=Gu(ic(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+Xu(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,ic(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Xu(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Xu(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(Kt(Yu),Kt(Hu))},t.normalizeQueryParams=Xu,t.joinWithSlash=Wu,t.stripTrailingSlash=Gu,t.\u0275prov=ut({factory:rc,token:t,providedIn:"root"}),t})();function rc(){return new nc(Kt(Yu),Kt(Hu))}function ic(t){return t.replace(/\/index.html$/,"")}var sc=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({}),oc=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}({}),ac=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}({}),lc=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}({}),uc=function(t){return t[t.Decimal=0]="Decimal",t[t.Group=1]="Group",t[t.List=2]="List",t[t.PercentSign=3]="PercentSign",t[t.PlusSign=4]="PlusSign",t[t.MinusSign=5]="MinusSign",t[t.Exponential=6]="Exponential",t[t.SuperscriptingExponent=7]="SuperscriptingExponent",t[t.PerMille=8]="PerMille",t[t[1/0]=9]="Infinity",t[t.NaN=10]="NaN",t[t.TimeSeparator=11]="TimeSeparator",t[t.CurrencyDecimal=12]="CurrencyDecimal",t[t.CurrencyGroup=13]="CurrencyGroup",t}({});function cc(t,e){return Ac(al(t)[ul.DateFormat],e)}function hc(t,e){return Ac(al(t)[ul.TimeFormat],e)}function dc(t,e){return Ac(al(t)[ul.DateTimeFormat],e)}function pc(t,e){const n=al(t),r=n[ul.NumberSymbols][e];if(void 0===r){if(e===uc.CurrencyDecimal)return n[ul.NumberSymbols][uc.Decimal];if(e===uc.CurrencyGroup)return n[ul.NumberSymbols][uc.Group]}return r}function fc(t){if(!t[ul.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[ul.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Ac(t,e){for(let n=e;n>-1;n--)if(void 0!==t[n])return t[n];throw new Error("Locale data API: locale data undefined")}function mc(t){const[e,n]=t.split(":");return{hours:+e,minutes:+n}}const gc=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,yc={},wc=/((?:[^GyMLwWdEabBhHmsSzZO']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var bc=function(t){return t[t.Short=0]="Short",t[t.ShortGMT=1]="ShortGMT",t[t.Long=2]="Long",t[t.Extended=3]="Extended",t}({}),vc=function(t){return t[t.FullYear=0]="FullYear",t[t.Month=1]="Month",t[t.Date=2]="Date",t[t.Hours=3]="Hours",t[t.Minutes=4]="Minutes",t[t.Seconds=5]="Seconds",t[t.FractionalSeconds=6]="FractionalSeconds",t[t.Day=7]="Day",t}({}),xc=function(t){return t[t.DayPeriods=0]="DayPeriods",t[t.Days=1]="Days",t[t.Months=2]="Months",t[t.Eras=3]="Eras",t}({});function _c(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,(function(t,n){return null!=e&&n in e?e[n]:t}))),t}function Cc(t,e,n="-",r,i){let s="";(t<0||i&&t<=0)&&(i?t=1-t:(t=-t,s=n));let o=String(t);for(;o.length<e;)o="0"+o;return r&&(o=o.substr(o.length-e)),s+o}function Sc(t,e,n=0,r=!1,i=!1){return function(s,o){let a=function(t,e){switch(t){case vc.FullYear:return e.getFullYear();case vc.Month:return e.getMonth();case vc.Date:return e.getDate();case vc.Hours:return e.getHours();case vc.Minutes:return e.getMinutes();case vc.Seconds:return e.getSeconds();case vc.FractionalSeconds:return e.getMilliseconds();case vc.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}(t,s);if((n>0||a>-n)&&(a+=n),t===vc.Hours)0===a&&-12===n&&(a=12);else if(t===vc.FractionalSeconds)return l=e,Cc(a,3).substr(0,l);var l;const u=pc(o,uc.MinusSign);return Cc(a,e,u,r,i)}}function Ec(t,e,n=oc.Format,r=!1){return function(i,s){return function(t,e,n,r,i,s){switch(n){case xc.Months:return function(t,e,n){const r=al(t),i=Ac([r[ul.MonthsFormat],r[ul.MonthsStandalone]],e);return Ac(i,n)}(e,i,r)[t.getMonth()];case xc.Days:return function(t,e,n){const r=al(t),i=Ac([r[ul.DaysFormat],r[ul.DaysStandalone]],e);return Ac(i,n)}(e,i,r)[t.getDay()];case xc.DayPeriods:const o=t.getHours(),a=t.getMinutes();if(s){const t=function(t){const e=al(t);return fc(e),(e[ul.ExtraData][2]||[]).map(t=>"string"==typeof t?mc(t):[mc(t[0]),mc(t[1])])}(e),n=function(t,e,n){const r=al(t);fc(r);const i=Ac([r[ul.ExtraData][0],r[ul.ExtraData][1]],e)||[];return Ac(i,n)||[]}(e,i,r),s=t.findIndex(t=>{if(Array.isArray(t)){const[e,n]=t,r=o>=e.hours&&a>=e.minutes,i=o<n.hours||o===n.hours&&a<n.minutes;if(e.hours<n.hours){if(r&&i)return!0}else if(r||i)return!0}else if(t.hours===o&&t.minutes===a)return!0;return!1});if(-1!==s)return n[s]}return function(t,e,n){const r=al(t),i=Ac([r[ul.DayPeriodsFormat],r[ul.DayPeriodsStandalone]],e);return Ac(i,n)}(e,i,r)[o<12?0:1];case xc.Eras:return function(t,e){return Ac(al(t)[ul.Eras],e)}(e,r)[t.getFullYear()<=0?0:1];default:throw new Error("unexpected translation type "+n)}}(i,s,t,e,n,r)}}function Bc(t){return function(e,n,r){const i=-1*r,s=pc(n,uc.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case bc.Short:return(i>=0?"+":"")+Cc(o,2,s)+Cc(Math.abs(i%60),2,s);case bc.ShortGMT:return"GMT"+(i>=0?"+":"")+Cc(o,1,s);case bc.Long:return"GMT"+(i>=0?"+":"")+Cc(o,2,s)+":"+Cc(Math.abs(i%60),2,s);case bc.Extended:return 0===r?"Z":(i>=0?"+":"")+Cc(o,2,s)+":"+Cc(Math.abs(i%60),2,s);default:throw new Error(`Unknown zone width "${t}"`)}}}function kc(t,e=!1){return function(n,r){let i;if(e){const t=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,e=n.getDate();i=1+Math.floor((e+t)/7)}else{const t=function(t){const e=new Date(t,0,1).getDay();return new Date(t,0,1+(e<=4?4:11)-e)}(n.getFullYear()),e=(s=n,new Date(s.getFullYear(),s.getMonth(),s.getDate()+(4-s.getDay()))).getTime()-t.getTime();i=1+Math.round(e/6048e5)}var s;return Cc(i,t,pc(r,uc.MinusSign))}}const Nc={};function Ic(t,e){t=t.replace(/:/g,"");const n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function Fc(t){return t instanceof Date&&!isNaN(t.valueOf())}class Tc{}let Rc=(()=>{class t extends Tc{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(function(t){return al(t)[ul.PluralCase]}(e||this.locale)(t)){case sc.Zero:return"zero";case sc.One:return"one";case sc.Two:return"two";case sc.Few:return"few";case sc.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(Kt(Jl))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),Oc=(()=>{class t{constructor(t,e,n,r){this._iterableDiffers=t,this._keyValueDiffers=e,this._ngEl=n,this._renderer=r,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(uo(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachChangedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachRemovedItem(t=>{t.previousValue&&this._toggleClass(t.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(t=>{if("string"!=typeof t.item)throw new Error("NgClass can only toggle CSS classes expressed as strings, got "+wt(t.item));this._toggleClass(t.item,!0)}),t.forEachRemovedItem(t=>this._toggleClass(t.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!0)):Object.keys(t).forEach(e=>this._toggleClass(e,!!t[e])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!1)):Object.keys(t).forEach(t=>this._toggleClass(t,!1)))}_toggleClass(t,e){(t=t.trim())&&t.split(/\s+/g).forEach(t=>{e?this._renderer.addClass(this._ngEl.nativeElement,t):this._renderer.removeClass(this._ngEl.nativeElement,t)})}}return t.\u0275fac=function(e){return new(e||t)(yo($a),yo(Va),yo(Ca),yo(ka))},t.\u0275dir=ye({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),t})();class Dc{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Lc=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){Sr()&&null!=t&&"function"!=typeof t&&console&&console.warn&&console.warn(`trackBy must be a function, but received ${JSON.stringify(t)}. See https://angular.io/api/common/NgForOf#change-propagation for more information.`),this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new Dc(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new Mc(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const s=new Mc(t,i);e.push(s)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(yo(Xa),yo(Wa),yo($a))},t.\u0275dir=ye({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class Mc{constructor(t,e){this.record=t,this.view=e}}let Uc=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new Pc,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){zc("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){zc("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(yo(Xa),yo(Wa))},t.\u0275dir=ye({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class Pc{constructor(){this.$implicit=null,this.ngIf=null}}function zc(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${wt(e)}'.`)}class Qc{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let Hc=(()=>{class t{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const e=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||e,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),e}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let e=0;e<this._defaultViews.length;e++)this._defaultViews[e].enforceState(t)}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=ye({type:t,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),t})(),$c=(()=>{class t{constructor(t,e,n){this.ngSwitch=n,n._addCase(),this._view=new Qc(t,e)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return t.\u0275fac=function(e){return new(e||t)(yo(Xa),yo(Wa),yo(Hc,1))},t.\u0275dir=ye({type:t,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),t})(),Vc=(()=>{class t{constructor(t,e,n){n._addDefault(new Qc(t,e))}}return t.\u0275fac=function(e){return new(e||t)(yo(Xa),yo(Wa),yo(Hc,1))},t.\u0275dir=ye({type:t,selectors:[["","ngSwitchDefault",""]]}),t})(),qc=(()=>{class t{constructor(t,e,n){this._ngEl=t,this._differs=e,this._renderer=n,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,e){const[n,r]=t.split(".");null!=(e=null!=e&&r?`${e}${r}`:e)?this._renderer.setStyle(this._ngEl.nativeElement,n,e):this._renderer.removeStyle(this._ngEl.nativeElement,n)}_applyChanges(t){t.forEachRemovedItem(t=>this._setStyle(t.key,null)),t.forEachAddedItem(t=>this._setStyle(t.key,t.currentValue)),t.forEachChangedItem(t=>this._setStyle(t.key,t.currentValue))}}return t.\u0275fac=function(e){return new(e||t)(yo(Ca),yo(Va),yo(ka))},t.\u0275dir=ye({type:t,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),t})(),jc=(()=>{class t{constructor(t){this.locale=t}transform(e,n="mediumDate",r,i){if(null==e||""===e||e!=e)return null;try{return function(t,e,n,r){let i=function(t){if(Fc(t))return t;if("number"==typeof t&&!isNaN(t))return new Date(t);if("string"==typeof t){t=t.trim();const e=parseFloat(t);if(!isNaN(t-e))return new Date(e);if(/^(\d{4}-\d{1,2}-\d{1,2})$/.test(t)){const[e,n,r]=t.split("-").map(t=>+t);return new Date(e,n-1,r)}let n;if(n=t.match(gc))return function(t){const e=new Date(0);let n=0,r=0;const i=t[8]?e.setUTCFullYear:e.setFullYear,s=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));const o=Number(t[4]||0)-n,a=Number(t[5]||0)-r,l=Number(t[6]||0),u=Math.round(1e3*parseFloat("0."+(t[7]||0)));return s.call(e,o,a,l,u),e}(n)}const e=new Date(t);if(!Fc(e))throw new Error(`Unable to convert "${t}" into a date`);return e}(t);e=function t(e,n){const r=function(t){return al(t)[ul.LocaleId]}(e);if(yc[r]=yc[r]||{},yc[r][n])return yc[r][n];let i="";switch(n){case"shortDate":i=cc(e,lc.Short);break;case"mediumDate":i=cc(e,lc.Medium);break;case"longDate":i=cc(e,lc.Long);break;case"fullDate":i=cc(e,lc.Full);break;case"shortTime":i=hc(e,lc.Short);break;case"mediumTime":i=hc(e,lc.Medium);break;case"longTime":i=hc(e,lc.Long);break;case"fullTime":i=hc(e,lc.Full);break;case"short":const n=t(e,"shortTime"),r=t(e,"shortDate");i=_c(dc(e,lc.Short),[n,r]);break;case"medium":const s=t(e,"mediumTime"),o=t(e,"mediumDate");i=_c(dc(e,lc.Medium),[s,o]);break;case"long":const a=t(e,"longTime"),l=t(e,"longDate");i=_c(dc(e,lc.Long),[a,l]);break;case"full":const u=t(e,"fullTime"),c=t(e,"fullDate");i=_c(dc(e,lc.Full),[u,c])}return i&&(yc[r][n]=i),i}(n,e)||e;let s,o=[];for(;e;){if(s=wc.exec(e),!s){o.push(e);break}{o=o.concat(s.slice(1));const t=o.pop();if(!t)break;e=t}}let a=i.getTimezoneOffset();r&&(a=Ic(r,a),i=function(t,e,n){const r=t.getTimezoneOffset();return function(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t}(t,-1*(Ic(e,r)-r))}(i,r));let l="";return o.forEach(t=>{const e=function(t){if(Nc[t])return Nc[t];let e;switch(t){case"G":case"GG":case"GGG":e=Ec(xc.Eras,ac.Abbreviated);break;case"GGGG":e=Ec(xc.Eras,ac.Wide);break;case"GGGGG":e=Ec(xc.Eras,ac.Narrow);break;case"y":e=Sc(vc.FullYear,1,0,!1,!0);break;case"yy":e=Sc(vc.FullYear,2,0,!0,!0);break;case"yyy":e=Sc(vc.FullYear,3,0,!1,!0);break;case"yyyy":e=Sc(vc.FullYear,4,0,!1,!0);break;case"M":case"L":e=Sc(vc.Month,1,1);break;case"MM":case"LL":e=Sc(vc.Month,2,1);break;case"MMM":e=Ec(xc.Months,ac.Abbreviated);break;case"MMMM":e=Ec(xc.Months,ac.Wide);break;case"MMMMM":e=Ec(xc.Months,ac.Narrow);break;case"LLL":e=Ec(xc.Months,ac.Abbreviated,oc.Standalone);break;case"LLLL":e=Ec(xc.Months,ac.Wide,oc.Standalone);break;case"LLLLL":e=Ec(xc.Months,ac.Narrow,oc.Standalone);break;case"w":e=kc(1);break;case"ww":e=kc(2);break;case"W":e=kc(1,!0);break;case"d":e=Sc(vc.Date,1);break;case"dd":e=Sc(vc.Date,2);break;case"E":case"EE":case"EEE":e=Ec(xc.Days,ac.Abbreviated);break;case"EEEE":e=Ec(xc.Days,ac.Wide);break;case"EEEEE":e=Ec(xc.Days,ac.Narrow);break;case"EEEEEE":e=Ec(xc.Days,ac.Short);break;case"a":case"aa":case"aaa":e=Ec(xc.DayPeriods,ac.Abbreviated);break;case"aaaa":e=Ec(xc.DayPeriods,ac.Wide);break;case"aaaaa":e=Ec(xc.DayPeriods,ac.Narrow);break;case"b":case"bb":case"bbb":e=Ec(xc.DayPeriods,ac.Abbreviated,oc.Standalone,!0);break;case"bbbb":e=Ec(xc.DayPeriods,ac.Wide,oc.Standalone,!0);break;case"bbbbb":e=Ec(xc.DayPeriods,ac.Narrow,oc.Standalone,!0);break;case"B":case"BB":case"BBB":e=Ec(xc.DayPeriods,ac.Abbreviated,oc.Format,!0);break;case"BBBB":e=Ec(xc.DayPeriods,ac.Wide,oc.Format,!0);break;case"BBBBB":e=Ec(xc.DayPeriods,ac.Narrow,oc.Format,!0);break;case"h":e=Sc(vc.Hours,1,-12);break;case"hh":e=Sc(vc.Hours,2,-12);break;case"H":e=Sc(vc.Hours,1);break;case"HH":e=Sc(vc.Hours,2);break;case"m":e=Sc(vc.Minutes,1);break;case"mm":e=Sc(vc.Minutes,2);break;case"s":e=Sc(vc.Seconds,1);break;case"ss":e=Sc(vc.Seconds,2);break;case"S":e=Sc(vc.FractionalSeconds,1);break;case"SS":e=Sc(vc.FractionalSeconds,2);break;case"SSS":e=Sc(vc.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Bc(bc.Short);break;case"ZZZZZ":e=Bc(bc.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Bc(bc.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Bc(bc.Long);break;default:return null}return Nc[t]=e,e}(t);l+=e?e(i,n,a):"''"===t?"'":t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}(e,n,i||this.locale,r)}catch(s){throw function(t,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${wt(t)}'`)}(t,s.message)}}}return t.\u0275fac=function(e){return new(e||t)(yo(Jl))},t.\u0275pipe=we({name:"date",type:t,pure:!0}),t})(),Kc=(()=>{class t{transform(t){return JSON.stringify(t,null,2)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=we({name:"json",type:t,pure:!1}),t})(),Wc=(()=>{class t{}return t.\u0275mod=me({type:t}),t.\u0275inj=ct({factory:function(e){return new(e||t)},providers:[{provide:Tc,useClass:Rc}]}),t})(),Gc=(()=>{class t{}return t.\u0275prov=ut({token:t,providedIn:"root",factory:()=>new Xc(Kt(Qu),window,Kt(pr))}),t})();class Xc{constructor(t,e,n){this.document=t,this.window=e,this.errorHandler=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportScrollRestoration()?[this.window.scrollX,this.window.scrollY]:[0,0]}scrollToPosition(t){this.supportScrollRestoration()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(this.supportScrollRestoration()){t=this.window.CSS&&this.window.CSS.escape?this.window.CSS.escape(t):t.replace(/(\"|\'\ |:|\.|\[|\]|,|=)/g,"\\$1");try{const e=this.document.querySelector("#"+t);if(e)return void this.scrollToElement(e);const n=this.document.querySelector(`[name='${t}']`);if(n)return void this.scrollToElement(n)}catch(e){this.errorHandler.handleError(e)}}}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}supportScrollRestoration(){try{return!!this.window&&!!this.window.scrollTo}catch(t){return!1}}}class Yc extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new Yc,Pu||(Pu=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=Zc||(Zc=document.querySelector("base"),Zc)?Zc.getAttribute("href"):null;return null==e?null:(n=e,Jc||(Jc=document.createElement("a")),Jc.setAttribute("href",n),"/"===Jc.pathname.charAt(0)?Jc.pathname:"/"+Jc.pathname);var n}resetBaseElement(){Zc=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return function(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}(document.cookie,t)}}let Jc,Zc=null;const th=new Mt("TRANSITION_ID"),eh=[{provide:$l,useFactory:function(t,e,n){return()=>{n.get(Vl).donePromise.then(()=>{const n=zu();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[th,Qu,ro],multi:!0}];class nh{static init(){var t;t=new nh,xu=t}addToWindow(t){Nt.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},Nt.getAllAngularTestabilities=()=>t.getAllTestabilities(),Nt.getAllAngularRootElements=()=>t.getAllRootElements(),Nt.frameworkStabilizers||(Nt.frameworkStabilizers=[]),Nt.frameworkStabilizers.push(t=>{const e=Nt.getAllAngularTestabilities();let n=e.length,r=!1;const i=function(e){r=r||e,n--,0==n&&t(r)};e.forEach((function(t){t.whenStable(i)}))})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?zu().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const rh=new Mt("EventManagerPlugins");let ih=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error("No event manager plugin found for event "+t)}}return t.\u0275fac=function(e){return new(e||t)(Kt(rh),Kt(cu))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();class sh{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=zu().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let oh=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),ah=(()=>{class t extends oh{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>zu().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(Kt(Qu))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();const lh={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},uh=/%COMP%/g;function ch(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?ch(t,i,n):(i=i.replace(uh,t),n.push(i))}return n}function hh(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let dh=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new ph(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case le.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new fh(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case le.Native:case le.ShadowDom:return new Ah(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=ch(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(Kt(ih),Kt(ah),Kt(ql))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();class ph{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(lh[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=lh[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=lh[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,r){r&Ba.DashCase?t.style.setProperty(e,n,r&Ba.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&Ba.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,hh(n)):this.eventManager.addEventListener(t,e,hh(n))}}class fh extends ph{constructor(t,e,n,r){super(t),this.component=n;const i=ch(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(uh,r+"-"+n.id),this.hostAttr=function(t){return"_nghost-%COMP%".replace(uh,t)}(r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class Ah extends ph{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.component=r,this.shadowRoot=r.encapsulation===le.ShadowDom?n.attachShadow({mode:"open"}):n.createShadowRoot(),this.sharedStylesHost.addHost(this.shadowRoot);const i=ch(r.id,r.styles,[]);for(let s=0;s<i.length;s++){const t=document.createElement("style");t.textContent=i[s],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let mh=(()=>{class t extends sh{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(Kt(Qu))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();const gh=["alt","control","meta","shift"],yh={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},wh={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},bh={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let vh=(()=>{class t extends sh{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),s=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>zu().onAndCancel(e,i.domEventName,s))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let s="";if(gh.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),s+=t+".")}),s+=i,0!=n.length||0===i.length)return null;const o={};return o.domEventName=r,o.fullKey=s,o}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&wh.hasOwnProperty(e)&&(e=wh[e]))}return yh[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),gh.forEach(r=>{r!=n&&(0,bh[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(Kt(Qu))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),xh=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({factory:function(){return Kt(_h)},token:t,providedIn:"root"}),t})(),_h=(()=>{class t extends xh{constructor(t){super(),this._doc=t}sanitize(t,e){if(null==e)return null;switch(t){case Wr.NONE:return e;case Wr.HTML:return vr(e,"HTML")?br(e):function(t,e){let n=null;try{jr=jr||function(t){return function(){try{return!!(new window.DOMParser).parseFromString("","text/html")}catch(t){return!1}}()?new Er:new Br(t)}(t);let r=e?String(e):"";n=jr.getInertBodyElement(r);let i=5,s=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=n.innerHTML,n=jr.getInertBodyElement(r)}while(r!==s);const o=new Hr,a=o.sanitizeChildren(Kr(n)||n);return Sr()&&o.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"),a}finally{if(n){const t=Kr(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}(this._doc,String(e));case Wr.STYLE:return vr(e,"Style")?br(e):e;case Wr.SCRIPT:if(vr(e,"Script"))return br(e);throw new Error("unsafe value used in a script context");case Wr.URL:return xr(e),vr(e,"URL")?br(e):Ir(String(e));case Wr.RESOURCE_URL:if(vr(e,"ResourceURL"))return br(e);throw new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see http://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return new Ar(t)}bypassSecurityTrustStyle(t){return new mr(t)}bypassSecurityTrustScript(t){return new gr(t)}bypassSecurityTrustUrl(t){return new yr(t)}bypassSecurityTrustResourceUrl(t){return new wr(t)}}return t.\u0275fac=function(e){return new(e||t)(Kt(Qu))},t.\u0275prov=ut({factory:function(){return t=Kt(Ut),new _h(t.get(Qu));var t},token:t,providedIn:"root"}),t})();const Ch=Su(Lu,"browser",[{provide:Gl,useValue:"browser"},{provide:Wl,useValue:function(){Yc.makeCurrent(),nh.init()},multi:!0},{provide:Qu,useFactory:function(){return function(t){Le=t}(document),document},deps:[]}]),Sh=[[],{provide:$s,useValue:"root"},{provide:pr,useFactory:function(){return new pr},deps:[]},{provide:rh,useClass:mh,multi:!0,deps:[Qu,cu,Gl]},{provide:rh,useClass:vh,multi:!0,deps:[Qu]},[],{provide:dh,useClass:dh,deps:[ih,ah,ql]},{provide:Ea,useExisting:dh},{provide:oh,useExisting:ah},{provide:ah,useClass:ah,deps:[Qu]},{provide:yu,useClass:yu,deps:[cu]},{provide:ih,useClass:ih,deps:[rh,cu]},[]];let Eh=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:ql,useValue:e.appId},{provide:th,useExisting:ql},eh]}}}return t.\u0275mod=me({type:t}),t.\u0275inj=ct({factory:function(e){return new(e||t)(Kt(t,12))},providers:Sh,imports:[Wc,Uu]}),t})();function Bh(...t){let e=t[t.length-1];return S(e)?(t.pop(),U(t,e)):V(t)}"undefined"!=typeof window&&window;class kh extends _{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new b;return this._value}next(t){super.next(this._value=t)}}const Nh=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})(),Ih={};class Fh{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new Th(t,this.resultSelector))}}class Th extends O{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(Ih),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++){const e=t[n];this.add(R(this,e,e,n))}}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n,r,i){const s=this.values,o=this.toRespond?s[n]===Ih?--this.toRespond:this.toRespond:0;s[n]=e,0===o&&(this.resultSelector?this._tryResultSelector(s):this.destination.next(s.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const Rh=new y(t=>t.complete());function Oh(t){return t?function(t){return new y(e=>t.schedule(()=>e.complete()))}(t):Rh}function Dh(t){return new y(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?P(n):Oh()).subscribe(e)})}function Lh(){return $(1)}function Mh(t,e){return function(n){return n.lift(new Uh(t,e))}}class Uh{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new Ph(t,this.predicate,this.thisArg))}}class Ph extends f{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}const zh=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function Qh(t){return function(e){return 0===t?Oh():e.lift(new Hh(t))}}class Hh{constructor(t){if(this.total=t,this.total<0)throw new zh}call(t,e){return e.subscribe(new $h(t,this.total))}}class $h extends f{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}function Vh(t=Kh){return e=>e.lift(new qh(t))}class qh{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new jh(t,this.errorFactory))}}class jh extends f{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function Kh(){return new Nh}function Wh(t=null){return e=>e.lift(new Gh(t))}class Gh{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new Xh(t,this.defaultValue))}}class Xh extends f{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function Yh(t){return function(e){const n=new Jh(t),r=e.lift(n);return n.caught=r}}class Jh{constructor(t){this.selector=t}call(t,e){return e.subscribe(new Zh(t,this.selector,this.caught))}}class Zh extends O{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new E(this,void 0,void 0);this.add(r);const i=R(this,n,void 0,void 0,r);i!==r&&this.add(i)}}}function td(t){return e=>0===t?Oh():e.lift(new ed(t))}class ed{constructor(t){if(this.total=t,this.total<0)throw new zh}call(t,e){return e.subscribe(new nd(t,this.total))}}class nd extends f{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function rd(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Mh((e,n)=>t(e,n,r)):g,td(1),n?Wh(e):Vh(()=>new Nh))}function id(){}function sd(t,e,n){return function(r){return r.lift(new od(t,e,n))}}class od{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new ad(t,this.nextOrObserver,this.error,this.complete))}}class ad extends f{constructor(t,e,n,i){super(t),this._tapNext=id,this._tapError=id,this._tapComplete=id,this._tapError=n||id,this._tapComplete=i||id,r(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||id,this._tapError=e.error||id,this._tapComplete=e.complete||id)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}class ld{constructor(t,e,n){this.predicate=t,this.thisArg=e,this.source=n}call(t,e){return e.subscribe(new ud(t,this.predicate,this.thisArg,this.source))}}class ud extends f{constructor(t,e,n,r){super(t),this.predicate=e,this.thisArg=n,this.source=r,this.index=0,this.thisArg=n||this}notifyComplete(t){this.destination.next(t),this.destination.complete()}_next(t){let e=!1;try{e=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(n){return void this.destination.error(n)}e||this.notifyComplete(!1)}_complete(){this.notifyComplete(!0)}}function cd(t,e){return"function"==typeof e?n=>n.pipe(cd((n,r)=>P(t(n,r)).pipe(D((t,i)=>e(n,t,r,i))))):e=>e.lift(new hd(t))}class hd{constructor(t){this.project=t}call(t,e){return e.subscribe(new dd(t,this.project))}}class dd extends O{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e,t,n)}_innerSub(t,e,n){const r=this.innerSubscription;r&&r.unsubscribe();const i=new E(this,e,n),s=this.destination;s.add(i),this.innerSubscription=R(this,t,void 0,void 0,i),this.innerSubscription!==i&&s.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=null}notifyComplete(t){this.destination.remove(t),this.innerSubscription=null,this.isStopped&&super._complete()}notifyNext(t,e,n,r,i){this.destination.next(e)}}function pd(...t){return Lh()(Bh(...t))}function fd(...t){const e=t[t.length-1];return S(e)?(t.pop(),n=>pd(t,n,e)):e=>pd(t,e)}class Ad{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new md(t,this.accumulator,this.seed,this.hasSeed))}}class md extends f{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function gd(t,e){return z(t,e,1)}function yd(t){return e=>e.lift(new wd(t))}class wd{constructor(t){this.callback=t}call(t,e){return e.subscribe(new bd(t,this.callback))}}class bd extends f{constructor(t,e){super(t),this.add(new h(e))}}class vd{constructor(t,e){this.id=t,this.url=e}}class xd extends vd{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class _d extends vd{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Cd extends vd{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Sd extends vd{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ed extends vd{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Bd extends vd{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class kd extends vd{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Nd extends vd{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Id extends vd{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fd{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Td{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Rd{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Od{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Dd{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ld{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Md{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Ud{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Pd(t){return new Ud(t)}function zd(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function Qd(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let s=0;s<r.length;s++){const e=r[s],n=t[s];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Hd(t,e){const n=Object.keys(t),r=Object.keys(e);if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!$d(t[i],e[i]))return!1;return!0}function $d(t,e){return Array.isArray(t)&&Array.isArray(e)?t.length==e.length&&t.every(t=>e.indexOf(t)>-1):t===e}function Vd(t){return Array.prototype.concat.apply([],t)}function qd(t){return t.length>0?t[t.length-1]:null}function jd(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function Kd(t){return Io(t)?t:No(t)?P(Promise.resolve(t)):Bh(t)}function Wd(t,e,n){return n?function(t,e){return Hd(t,e)}(t.queryParams,e.queryParams)&&function t(e,n){if(!Jd(e.segments,n.segments))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(const r in n.children){if(!e.children[r])return!1;if(!t(e.children[r],n.children[r]))return!1}return!0}(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>$d(t[n],e[n]))}(t.queryParams,e.queryParams)&&function t(e,n){return function e(n,r,i){if(n.segments.length>i.length)return!!Jd(n.segments.slice(0,i.length),i)&&!r.hasChildren();if(n.segments.length===i.length){if(!Jd(n.segments,i))return!1;for(const e in r.children){if(!n.children[e])return!1;if(!t(n.children[e],r.children[e]))return!1}return!0}{const t=i.slice(0,n.segments.length),s=i.slice(n.segments.length);return!!Jd(n.segments,t)&&!!n.children.primary&&e(n.children.primary,r,s)}}(e,n,n.segments)}(t.root,e.root)}class Gd{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Pd(this.queryParams)),this._queryParamMap}toString(){return np.serialize(this)}}class Xd{constructor(t,e){this.segments=t,this.children=e,this.parent=null,jd(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return rp(this)}}class Yd{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Pd(this.parameters)),this._parameterMap}toString(){return up(this)}}function Jd(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}function Zd(t,e){let n=[];return jd(t.children,(t,r)=>{"primary"===r&&(n=n.concat(e(t,r)))}),jd(t.children,(t,r)=>{"primary"!==r&&(n=n.concat(e(t,r)))}),n}class tp{}class ep{parse(t){const e=new fp(t);return new Gd(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){return`${"/"+function t(e,n){if(!e.hasChildren())return rp(e);if(n){const n=e.children.primary?t(e.children.primary,!1):"",r=[];return jd(e.children,(e,n)=>{"primary"!==n&&r.push(`${n}:${t(e,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=Zd(e,(n,r)=>"primary"===r?[t(e.children.primary,!1)]:[`${r}:${t(n,!1)}`]);return`${rp(e)}/(${n.join("//")})`}}(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${sp(e)}=${sp(t)}`).join("&"):`${sp(e)}=${sp(n)}`});return e.length?"?"+e.join("&"):""}(t.queryParams)}${"string"==typeof t.fragment?"#"+encodeURI(t.fragment):""}`}}const np=new ep;function rp(t){return t.segments.map(t=>up(t)).join("/")}function ip(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function sp(t){return ip(t).replace(/%3B/gi,";")}function op(t){return ip(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ap(t){return decodeURIComponent(t)}function lp(t){return ap(t.replace(/\+/g,"%20"))}function up(t){return`${op(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${op(t)}=${op(e[t])}`).join("")}`;var e}const cp=/^[^\/()?;=#]+/;function hp(t){const e=t.match(cp);return e?e[0]:""}const dp=/^[^=?&#]+/,pp=/^[^?&#]+/;class fp{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Xd([],{}):new Xd([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new Xd(t,e)),n}parseSegment(){const t=hp(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new Yd(ap(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=hp(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=hp(this.remaining);t&&(n=t,this.capture(n))}t[ap(e)]=ap(n)}parseQueryParam(t){const e=function(t){const e=t.match(dp);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(pp);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=lp(e),i=lp(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=hp(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i="primary");const s=this.parseChildren();e[i]=1===Object.keys(s).length?s.primary:new Xd([],s),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class Ap{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=mp(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=mp(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=gp(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return gp(t,this._root).map(t=>t.value)}}function mp(t,e){if(t===e.value)return e;for(const n of e.children){const e=mp(t,n);if(e)return e}return null}function gp(t,e){if(t===e.value)return[e];for(const n of e.children){const r=gp(t,n);if(r.length)return r.unshift(e),r}return[]}class yp{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function wp(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class bp extends Ap{constructor(t,e){super(t),this.snapshot=e,Ep(this,t)}toString(){return this.snapshot.toString()}}function vp(t,e){const n=function(t,e){const n=new Cp([],{},{},"",{},"primary",e,null,t.root,-1,{});return new Sp("",new yp(n,[]))}(t,e),r=new kh([new Yd("",{})]),i=new kh({}),s=new kh({}),o=new kh({}),a=new kh(""),l=new xp(r,i,o,a,s,"primary",e,n.root);return l.snapshot=n.root,new bp(new yp(l,[]),n)}class xp{constructor(t,e,n,r,i,s,o,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=s,this.component=o,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(D(t=>Pd(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(D(t=>Pd(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function _p(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Cp{constructor(t,e,n,r,i,s,o,a,l,u,c){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=s,this.component=o,this.routeConfig=a,this._urlSegment=l,this._lastPathIndex=u,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Pd(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Pd(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Sp extends Ap{constructor(t,e){super(e),this.url=t,Ep(this,e)}toString(){return Bp(this._root)}}function Ep(t,e){e.value._routerState=t,e.children.forEach(e=>Ep(t,e))}function Bp(t){const e=t.children.length>0?` { ${t.children.map(Bp).join(", ")} } `:"";return`${t.value}${e}`}function kp(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Hd(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),Hd(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Hd(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),Hd(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Np(t,e){var n,r;return Hd(t.params,e.params)&&Jd(n=t.url,r=e.url)&&n.every((t,e)=>Hd(t.parameters,r[e].parameters))&&!(!t.parent!=!e.parent)&&(!t.parent||Np(t.parent,e.parent))}function Ip(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Fp(t,e,n,r,i){let s={};return r&&jd(r,(t,e)=>{s[e]=Array.isArray(t)?t.map(t=>""+t):""+t}),new Gd(n.root===t?e:function t(e,n,r){const i={};return jd(e.children,(e,s)=>{i[s]=e===n?r:t(e,n,r)}),new Xd(e.segments,i)}(n.root,t,e),s,i)}class Tp{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Ip(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(t=>"object"==typeof t&&null!=t&&t.outlets);if(r&&r!==qd(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Rp{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function Op(t){return"object"==typeof t&&null!=t&&t.outlets?t.outlets.primary:""+t}function Dp(t,e,n){if(t||(t=new Xd([],{})),0===t.segments.length&&t.hasChildren())return Lp(t,e,n);const r=function(t,e,n){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;const e=t.segments[i],o=Op(n[r]),a=r<n.length-1?n[r+1]:null;if(i>0&&void 0===o)break;if(o&&a&&"object"==typeof a&&void 0===a.outlets){if(!zp(o,a,e))return s;r+=2}else{if(!zp(o,{},e))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new Xd(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new Xd(t.segments.slice(r.pathIndex),t.children),Lp(e,0,i)}return r.match&&0===i.length?new Xd(t.segments,{}):r.match&&!t.hasChildren()?Mp(t,e,n):r.match?Lp(t,0,i):Mp(t,e,n)}function Lp(t,e,n){if(0===n.length)return new Xd(t.segments,{});{const r=function(t){return"object"==typeof t[0]&&null!==t[0]&&t[0].outlets?t[0].outlets:{primary:t}}(n),i={};return jd(r,(n,r)=>{null!==n&&(i[r]=Dp(t.children[r],e,n))}),jd(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new Xd(t.segments,i)}}function Mp(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){if("object"==typeof n[i]&&null!==n[i]&&void 0!==n[i].outlets){const t=Up(n[i].outlets);return new Xd(r,t)}if(0===i&&Ip(n[0])){r.push(new Yd(t.segments[e].path,n[0])),i++;continue}const s=Op(n[i]),o=i<n.length-1?n[i+1]:null;s&&o&&Ip(o)?(r.push(new Yd(s,Pp(o))),i+=2):(r.push(new Yd(s,{})),i++)}return new Xd(r,{})}function Up(t){const e={};return jd(t,(t,n)=>{null!==t&&(e[n]=Mp(new Xd([],{}),0,t))}),e}function Pp(t){const e={};return jd(t,(t,n)=>e[n]=""+t),e}function zp(t,e,n){return t==n.path&&Hd(e,n.parameters)}class Qp{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),kp(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=wp(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),jd(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet);if(n){const r=wp(t),i=t.value.component?n.children:e;jd(r,(t,e)=>this.deactivateRouteAndItsChildren(t,i)),n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}}activateChildRoutes(t,e,n){const r=wp(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new Ld(t.value.snapshot))}),t.children.length&&this.forwardEvent(new Od(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(kp(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),Hp(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function Hp(t){kp(t.value),t.children.forEach(Hp)}class $p{constructor(t,e){this.routes=t,this.module=e}}function Vp(t){return"function"==typeof t}function qp(t){return t instanceof Gd}class jp{constructor(t){this.segmentGroup=t||null}}class Kp{constructor(t){this.urlTree=t}}function Wp(t){return new y(e=>e.error(new jp(t)))}function Gp(t){return new y(e=>e.error(new Kp(t)))}function Xp(t){return new y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class Yp{constructor(t,e,n,r,i){this.configLoader=e,this.urlSerializer=n,this.urlTree=r,this.config=i,this.allowRedirects=!0,this.ngModule=t.get(Jt)}apply(){return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,"primary").pipe(D(t=>this.createUrlTree(t,this.urlTree.queryParams,this.urlTree.fragment))).pipe(Yh(t=>{if(t instanceof Kp)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof jp)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,"primary").pipe(D(e=>this.createUrlTree(e,t.queryParams,t.fragment))).pipe(Yh(t=>{if(t instanceof jp)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new Xd([],{primary:t}):t;return new Gd(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(D(t=>new Xd([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){return function(t,e){if(0===Object.keys(t).length)return Bh({});const n=[],r=[],i={};return jd(t,(t,s)=>{const o=e(s,t).pipe(D(t=>i[s]=t));"primary"===s?n.push(o):r.push(o)}),Bh.apply(null,n.concat(r)).pipe(Lh(),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Mh((e,n)=>t(e,n,r)):g,Qh(1),n?Wh(e):Vh(()=>new Nh))}(),D(()=>i))}(n.children,(n,r)=>this.expandSegmentGroup(t,e,r,n))}expandSegment(t,e,n,r,i,s){return Bh(...n).pipe(D(o=>this.expandSegmentAgainstRoute(t,e,n,o,r,i,s).pipe(Yh(t=>{if(t instanceof jp)return Bh(null);throw t}))),Lh(),rd(t=>!!t),Yh((t,n)=>{if(t instanceof Nh||"EmptyError"===t.name){if(this.noLeftoversInUrl(e,r,i))return Bh(new Xd([],{}));throw new jp(e)}throw t}))}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}expandSegmentAgainstRoute(t,e,n,r,i,s,o){return ef(r)!==s?Wp(e):void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s):Wp(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,s):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Gp(i):this.lineralizeSegments(n,i).pipe(z(n=>{const i=new Xd(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s){const{matched:o,consumedSegments:a,lastChild:l,positionalParamSegments:u}=Jp(e,r,i);if(!o)return Wp(e);const c=this.applyRedirectCommands(a,r.redirectTo,u);return r.redirectTo.startsWith("/")?Gp(c):this.lineralizeSegments(r,c).pipe(z(r=>this.expandSegment(t,e,n,r.concat(i.slice(l)),s,!1)))}matchSegmentAgainstRoute(t,e,n,r){if("**"===n.path)return n.loadChildren?this.configLoader.load(t.injector,n).pipe(D(t=>(n._loadedConfig=t,new Xd(r,{})))):Bh(new Xd(r,{}));const{matched:i,consumedSegments:s,lastChild:o}=Jp(e,n,r);if(!i)return Wp(e);const a=r.slice(o);return this.getChildConfig(t,n,r).pipe(z(t=>{const n=t.module,r=t.routes,{segmentGroup:i,slicedSegments:o}=function(t,e,n,r){return n.length>0&&function(t,e,n){return n.some(n=>tf(t,e,n)&&"primary"!==ef(n))}(t,n,r)?{segmentGroup:Zp(new Xd(e,function(t,e){const n={};n.primary=e;for(const r of t)""===r.path&&"primary"!==ef(r)&&(n[ef(r)]=new Xd([],{}));return n}(r,new Xd(n,t.children)))),slicedSegments:[]}:0===n.length&&function(t,e,n){return n.some(n=>tf(t,e,n))}(t,n,r)?{segmentGroup:Zp(new Xd(t.segments,function(t,e,n,r){const i={};for(const s of n)tf(t,e,s)&&!r[ef(s)]&&(i[ef(s)]=new Xd([],{}));return Object.assign(Object.assign({},r),i)}(t,n,r,t.children))),slicedSegments:n}:{segmentGroup:t,slicedSegments:n}}(e,s,a,r);return 0===o.length&&i.hasChildren()?this.expandChildren(n,r,i).pipe(D(t=>new Xd(s,t))):0===r.length&&0===o.length?Bh(new Xd(s,{})):this.expandSegment(n,i,r,o,"primary",!0).pipe(D(t=>new Xd(s.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Bh(new $p(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Bh(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(z(n=>n?this.configLoader.load(t.injector,e).pipe(D(t=>(e._loadedConfig=t,t))):function(t){return new y(e=>e.error(zd(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Bh(new $p([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;return r&&0!==r.length?P(r).pipe(D(r=>{const i=t.get(r);let s;if(function(t){return t&&Vp(t.canLoad)}(i))s=i.canLoad(e,n);else{if(!Vp(i))throw new Error("Invalid CanLoad guard");s=i(e,n)}return Kd(s)})).pipe(Lh(),sd(t=>{if(!qp(t))return;const e=zd(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),(i=t=>!0===t,t=>t.lift(new ld(i,void 0,t)))):Bh(!0);var i}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Bh(n);if(r.numberOfChildren>1||!r.children.primary)return Xp(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new Gd(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return jd(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let s={};return jd(e.children,(e,i)=>{s[i]=this.createSegmentGroup(t,e,n,r)}),new Xd(i,s)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function Jp(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};const r=(e.matcher||Qd)(n,t,e);return r?{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,positionalParamSegments:r.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function Zp(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new Xd(t.segments.concat(e.segments),e.children)}return t}function tf(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}function ef(t){return t.outlet||"primary"}class nf{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class rf{constructor(t,e){this.component=t,this.route=e}}function sf(t,e,n){const r=t._root;return function t(e,n,r,i,s={canDeactivateChecks:[],canActivateChecks:[]}){const o=wp(n);return e.children.forEach(e=>{!function(e,n,r,i,s={canDeactivateChecks:[],canActivateChecks:[]}){const o=e.value,a=n?n.value:null,l=r?r.getContext(e.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Jd(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Jd(t.url,e.url)||!Hd(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Np(t,e)||!Hd(t.queryParams,e.queryParams);case"paramsChange":default:return!Np(t,e)}}(a,o,o.routeConfig.runGuardsAndResolvers);u?s.canActivateChecks.push(new nf(i)):(o.data=a.data,o._resolvedData=a._resolvedData),t(e,n,o.component?l?l.children:null:r,i,s),u&&s.canDeactivateChecks.push(new rf(l&&l.outlet&&l.outlet.component||null,a))}else a&&af(n,l,s),s.canActivateChecks.push(new nf(i)),t(e,null,o.component?l?l.children:null:r,i,s)}(e,o[e.value.outlet],r,i.concat([e.value]),s),delete o[e.value.outlet]}),jd(o,(t,e)=>af(t,r.getContext(e),s)),s}(r,e?e._root:null,n,[r.value])}function of(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function af(t,e,n){const r=wp(t),i=t.value;jd(r,(t,r)=>{af(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new rf(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}const lf=Symbol("INITIAL_VALUE");function uf(){return cd(t=>function(...t){let e=null,n=null;return S(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&l(t[0])&&(t=t[0]),V(t,n).lift(new Fh(e))}(...t.map(t=>t.pipe(td(1),fd(lf)))).pipe(function(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new Ad(t,e,n))}}((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==lf)return t;if(r===lf&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||qp(r))return r}return t},t)},lf),Mh(t=>t!==lf),D(t=>qp(t)?t:!0===t),td(1)))}function cf(t,e){return null!==t&&e&&e(new Dd(t)),Bh(!0)}function hf(t,e){return null!==t&&e&&e(new Rd(t)),Bh(!0)}function df(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;return r&&0!==r.length?Bh(r.map(r=>Dh(()=>{const i=of(r,e,n);let s;if(function(t){return t&&Vp(t.canActivate)}(i))s=Kd(i.canActivate(e,t));else{if(!Vp(i))throw new Error("Invalid CanActivate guard");s=Kd(i(e,t))}return s.pipe(rd())}))).pipe(uf()):Bh(!0)}function pf(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>Dh(()=>Bh(e.guards.map(i=>{const s=of(i,e.node,n);let o;if(function(t){return t&&Vp(t.canActivateChild)}(s))o=Kd(s.canActivateChild(r,t));else{if(!Vp(s))throw new Error("Invalid CanActivateChild guard");o=Kd(s(r,t))}return o.pipe(rd())})).pipe(uf())));return Bh(i).pipe(uf())}class ff{}class Af{constructor(t,e,n,r,i,s){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=s}recognize(){try{const t=yf(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,"primary"),n=new Cp([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},"primary",this.rootComponentType,null,this.urlTree.root,-1,{}),r=new yp(n,e),i=new Sp(this.url,r);return this.inheritParamsAndData(i._root),Bh(i)}catch(t){return new y(e=>e.error(t))}}inheritParamsAndData(t){const e=t.value,n=_p(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=Zd(e,(e,n)=>this.processSegmentGroup(t,e,n));return function(t){const e={};t.forEach(t=>{const n=e[t.value.outlet];if(n){const e=n.url.map(t=>t.toString()).join("/"),r=t.value.url.map(t=>t.toString()).join("/");throw new Error(`Two segments cannot have the same outlet name: '${e}' and '${r}'.`)}e[t.value.outlet]=t.value})}(n),n.sort((t,e)=>"primary"===t.value.outlet?-1:"primary"===e.value.outlet?1:t.value.outlet.localeCompare(e.value.outlet)),n}processSegment(t,e,n,r){for(const s of t)try{return this.processSegmentAgainstRoute(s,e,n,r)}catch(i){if(!(i instanceof ff))throw i}if(this.noLeftoversInUrl(e,n,r))return[];throw new ff}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo)throw new ff;if((t.outlet||"primary")!==r)throw new ff;let i,s=[],o=[];if("**"===t.path){const s=n.length>0?qd(n).parameters:{};i=new Cp(n,s,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,vf(t),r,t.component,t,mf(e),gf(e)+n.length,xf(t))}else{const a=function(t,e,n){if(""===e.path){if("full"===e.pathMatch&&(t.hasChildren()||n.length>0))throw new ff;return{consumedSegments:[],lastChild:0,parameters:{}}}const r=(e.matcher||Qd)(n,t,e);if(!r)throw new ff;const i={};jd(r.posParams,(t,e)=>{i[e]=t.path});const s=r.consumed.length>0?Object.assign(Object.assign({},i),r.consumed[r.consumed.length-1].parameters):i;return{consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:s}}(e,t,n);s=a.consumedSegments,o=n.slice(a.lastChild),i=new Cp(s,a.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,vf(t),r,t.component,t,mf(e),gf(e)+s.length,xf(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:l,slicedSegments:u}=yf(e,s,o,a,this.relativeLinkResolution);if(0===u.length&&l.hasChildren()){const t=this.processChildren(a,l);return[new yp(i,t)]}if(0===a.length&&0===u.length)return[new yp(i,[])];const c=this.processSegment(a,l,u,"primary");return[new yp(i,c)]}}function mf(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function gf(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function yf(t,e,n,r,i){if(n.length>0&&function(t,e,n){return n.some(n=>wf(t,e,n)&&"primary"!==bf(n))}(t,n,r)){const i=new Xd(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const s of n)if(""===s.path&&"primary"!==bf(s)){const n=new Xd([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[bf(s)]=n}return i}(t,e,r,new Xd(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>wf(t,e,n))}(t,n,r)){const s=new Xd(t.segments,function(t,e,n,r,i,s){const o={};for(const a of r)if(wf(t,n,a)&&!i[bf(a)]){const n=new Xd([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===s?t.segments.length:e.length,o[bf(a)]=n}return Object.assign(Object.assign({},i),o)}(t,e,n,r,t.children,i));return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}const s=new Xd(t.segments,t.children);return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}function wf(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function bf(t){return t.outlet||"primary"}function vf(t){return t.data||{}}function xf(t){return t.resolve||{}}function _f(t){return function(e){return e.pipe(cd(e=>{const n=t(e);return n?P(n).pipe(D(()=>e)):P([e])}))}}class Cf{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}let Sf=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=de({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&Co(0,"router-outlet")},directives:function(){return[Qf]},encapsulation:2}),t})();function Ef(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];Bf(r,kf(e,r))}}function Bf(t,e){if(!t)throw new Error(`\n      Invalid configuration of route '${e}': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    `);if(Array.isArray(t))throw new Error(`Invalid configuration of route '${e}': Array cannot be specified`);if(!t.component&&!t.children&&!t.loadChildren&&t.outlet&&"primary"!==t.outlet)throw new Error(`Invalid configuration of route '${e}': a componentless route without children or loadChildren cannot have a named outlet set`);if(t.redirectTo&&t.children)throw new Error(`Invalid configuration of route '${e}': redirectTo and children cannot be used together`);if(t.redirectTo&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': redirectTo and loadChildren cannot be used together`);if(t.children&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': children and loadChildren cannot be used together`);if(t.redirectTo&&t.component)throw new Error(`Invalid configuration of route '${e}': redirectTo and component cannot be used together`);if(t.path&&t.matcher)throw new Error(`Invalid configuration of route '${e}': path and matcher cannot be used together`);if(void 0===t.redirectTo&&!t.component&&!t.children&&!t.loadChildren)throw new Error(`Invalid configuration of route '${e}'. One of the following must be provided: component, redirectTo, children or loadChildren`);if(void 0===t.path&&void 0===t.matcher)throw new Error(`Invalid configuration of route '${e}': routes must have either a path or a matcher specified`);if("string"==typeof t.path&&"/"===t.path.charAt(0))throw new Error(`Invalid configuration of route '${e}': path cannot start with a slash`);if(""===t.path&&void 0!==t.redirectTo&&void 0===t.pathMatch)throw new Error(`Invalid configuration of route '{path: "${e}", redirectTo: "${t.redirectTo}"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.`);if(void 0!==t.pathMatch&&"full"!==t.pathMatch&&"prefix"!==t.pathMatch)throw new Error(`Invalid configuration of route '${e}': pathMatch can only be set to 'prefix' or 'full'`);t.children&&Ef(t.children,e)}function kf(t,e){return e?t||e.path?t&&!e.path?t+"/":!t&&e.path?e.path:`${t}/${e.path}`:"":t}function Nf(t){const e=t.children&&t.children.map(Nf),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&"primary"!==n.outlet&&(n.component=Sf),n}const If=new Mt("ROUTES");class Ff{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){return this.onLoadStartListener&&this.onLoadStartListener(e),this.loadModuleFactory(e.loadChildren).pipe(D(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const r=n.create(t);return new $p(Vd(r.injector.get(If)).map(Nf),r)}))}loadModuleFactory(t){return"string"==typeof t?P(this.loader.load(t)):Kd(t()).pipe(z(t=>t instanceof Zt?Bh(t):P(this.compiler.compileModuleAsync(t))))}}class Tf{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Rf,this.attachRef=null}}class Rf{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new Tf,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class Of{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function Df(t){throw t}function Lf(t,e,n){return e.parse("/")}function Mf(t,e){return Bh(null)}let Uf=(()=>{class t{constructor(t,e,n,r,i,s,o,a){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=r,this.config=a,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new _,this.errorHandler=Df,this.malformedUriErrorHandler=Lf,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Mf,afterPreactivation:Mf},this.urlHandlingStrategy=new Of,this.routeReuseStrategy=new Cf,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=i.get(Jt),this.console=i.get(Yl);const l=i.get(cu);this.isNgZoneEnabled=l instanceof cu,this.resetConfig(a),this.currentUrlTree=new Gd(new Xd([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Ff(s,o,t=>this.triggerEvent(new Fd(t)),t=>this.triggerEvent(new Td(t))),this.routerState=vp(this.currentUrlTree,this.rootComponentType),this.transitions=new kh({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(Mh(t=>0!==t.id),D(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),cd(t=>{let n=!1,r=!1;return Bh(t).pipe(sd(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),cd(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Bh(t).pipe(cd(t=>{const n=this.transitions.getValue();return e.next(new xd(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?Rh:[t]}),cd(t=>Promise.resolve(t)),(r=this.ngModule.injector,i=this.configLoader,s=this.urlSerializer,o=this.config,function(t){return t.pipe(cd(t=>function(t,e,n,r,i){return new Yp(t,e,n,r,i).apply()}(r,i,s,t.extractedUrl,o).pipe(D(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e})))))}),sd(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return function(s){return s.pipe(z(s=>function(t,e,n,r,i="emptyOnly",s="legacy"){return new Af(t,e,n,r,i,s).recognize()}(t,e,s.urlAfterRedirects,n(s.urlAfterRedirects),r,i).pipe(D(t=>Object.assign(Object.assign({},s),{targetSnapshot:t})))))}}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),sd(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),sd(t=>{const n=new Ed(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,s,o;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:s,extras:o}=t,a=new xd(n,this.serializeUrl(r),i,s);e.next(a);const l=vp(r,this.rootComponentType).snapshot;return Bh(Object.assign(Object.assign({},t),{targetSnapshot:l,urlAfterRedirects:r,extras:Object.assign(Object.assign({},o),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),Rh}),_f(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:o}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!o})}),sd(t=>{const e=new Bd(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),D(t=>Object.assign(Object.assign({},t),{guards:sf(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return function(n){return n.pipe(z(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?Bh(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return P(t).pipe(z(t=>function(t,e,n,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?Bh(s.map(s=>{const o=of(s,e,i);let a;if(function(t){return t&&Vp(t.canDeactivate)}(o))a=Kd(o.canDeactivate(t,e,n,r));else{if(!Vp(o))throw new Error("Invalid CanDeactivate guard");a=Kd(o(t,e,n,r))}return a.pipe(rd())})).pipe(uf()):Bh(!0)}(t.component,t.route,n,e,r)),rd(t=>!0!==t,!0))}(o,r,i,t).pipe(z(n=>n&&"boolean"==typeof n?function(t,e,n,r){return P(e).pipe(gd(e=>P([hf(e.route.parent,r),cf(e.route,r),pf(t,e.path,n),df(t,e.route,n)]).pipe(Lh(),rd(t=>!0!==t,!0))),rd(t=>!0!==t,!0))}(r,s,t,e):Bh(n)),D(t=>Object.assign(Object.assign({},n),{guardsResult:t})))}))}}(this.ngModule.injector,t=>this.triggerEvent(t)),sd(t=>{if(qp(t.guardsResult)){const e=zd(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}}),sd(t=>{const e=new kd(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),Mh(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new Cd(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),_f(t=>{if(t.guards.canActivateChecks.length)return Bh(t).pipe(sd(t=>{const e=new Nd(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),cd(t=>{let n=!1;return Bh(t).pipe((r=this.paramsInheritanceStrategy,i=this.ngModule.injector,function(t){return t.pipe(z(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return Bh(t);let s=0;return P(n).pipe(gd(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Bh({});const s={};return P(i).pipe(z(i=>function(t,e,n,r){const i=of(t,e,r);return Kd(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(sd(t=>{s[i]=t}))),Qh(1),z(()=>Object.keys(s).length===i.length?Bh(s):Rh))}(t._resolve,t,e,r).pipe(D(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),_p(t,n).resolve),null)))}(t.route,e,r,i)),sd(()=>s++),Qh(1),z(e=>s===n.length?Bh(t):Rh))}))}),sd({next:()=>n=!0,complete:()=>{if(!n){const n=new Cd(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var r,i}),sd(t=>{const e=new Id(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),_f(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:o}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!o})}),D(t=>{const e=function(t,e,n){const r=function t(e,n,r){if(r&&e.shouldReuseRoute(n.value,r.value.snapshot)){const i=r.value;i._futureSnapshot=n.value;const s=function(e,n,r){return n.children.map(n=>{for(const i of r.children)if(e.shouldReuseRoute(i.value.snapshot,n.value))return t(e,n,i);return t(e,n)})}(e,n,r);return new yp(i,s)}{const r=e.retrieve(n.value);if(r){const t=r.route;return function t(e,n){if(e.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=e.value;for(let r=0;r<e.children.length;++r)t(e.children[r],n.children[r])}(n,t),t}{const r=new xp(new kh((i=n.value).url),new kh(i.params),new kh(i.queryParams),new kh(i.fragment),new kh(i.data),i.outlet,i.component,i),s=n.children.map(n=>t(e,n));return new yp(r,s)}}var i}(t,e._root,n?n._root:void 0);return new bp(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),sd(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(i=this.rootContexts,s=this.routeReuseStrategy,o=t=>this.triggerEvent(t),D(t=>(new Qp(s,t.targetRouterState,t.currentRouterState,o).activate(i),t))),sd({next(){n=!0},complete(){n=!0}}),yd(()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new Cd(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null}),Yh(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=qp(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new Cd(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);return this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new Sd(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(s){t.reject(s)}}var i;return Rh}));var i,s,o}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{let e=this.parseUrl(t.url);const n="popstate"===t.type?"popstate":"hashchange",r=t.state&&t.state.navigationId?t.state:null;setTimeout(()=>{this.scheduleNavigation(e,n,r,{replaceUrl:!0})},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Ef(t),this.config=t.map(Nf),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,preserveQueryParams:s,queryParamsHandling:o,preserveFragment:a}=e;Sr()&&s&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");const l=n||this.routerState.root,u=a?this.currentUrlTree.fragment:i;let c=null;if(o)switch(o){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}else c=s?this.currentUrlTree.queryParams:r||null;return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,i){if(0===n.length)return Fp(e.root,e.root,e,r,i);const s=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Tp(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return jd(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new Tp(n,e,r)}(n);if(s.toRoot())return Fp(e.root,new Xd([],{}),e,r,i);const o=function(t,e,n){if(t.isAbsolute)return new Rp(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new Rp(t,t===e.root,0)}const r=Ip(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Rp(r,!1,i-s)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(s,e,t),a=o.processChildren?Lp(o.segmentGroup,o.index,s.commands):Dp(o.segmentGroup,o.index,s.commands);return Fp(o.segmentGroup,a,e,r,i)}(l,this.currentUrlTree,t,c,u)}navigateByUrl(t,e={skipLocationChange:!1}){Sr()&&this.isNgZoneEnabled&&!cu.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");const n=qp(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(n){e=this.malformedUriErrorHandler(n,this.urlSerializer,t)}return e}isActive(t,e){if(qp(t))return Wd(this.currentUrlTree,t,e);const n=this.parseUrl(t);return Wd(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new _d(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){const s=this.getTransition();if(s&&"imperative"!==e&&"imperative"===s.source&&s.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(s&&"hashchange"==e&&"popstate"===s.source&&s.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(s&&"popstate"==e&&"hashchange"===s.source&&s.rawUrl.toString()===t.toString())return Promise.resolve(!0);let o,a,l;i?(o=i.resolve,a=i.reject,l=i.promise):l=new Promise((t,e)=>{o=t,a=e});const u=++this.navigationId;return this.setTransition({id:u,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:o,reject:a,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(Kt(Hs),Kt(tp),Kt(Rf),Kt(nc),Kt(ro),Kt(Fu),Kt(au),Kt(void 0))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),Pf=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.route=e,this.commands=[],null==n&&r.setAttribute(i.nativeElement,"tabindex","0")}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}set preserveQueryParams(t){Sr()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated!, use queryParamsHandling instead."),this.preserve=t}onClick(){const t={skipLocationChange:zf(this.skipLocationChange),replaceUrl:zf(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:zf(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:zf(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(yo(Uf),yo(xp),wo("tabindex"),yo(ka),yo(Ca))},t.\u0275dir=ye({type:t,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,e){1&t&&Fo("click",(function(){return e.onClick()}))},inputs:{routerLink:"routerLink",preserveQueryParams:"preserveQueryParams",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state"}}),t})();function zf(t){return""===t||!!t}let Qf=(()=>{class t{constructor(t,e,n,r,i){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=i,this.activated=null,this._activatedRoute=null,this.activateEvents=new bl,this.deactivateEvents=new bl,this.name=r||"primary",t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new Hf(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(yo(Rf),yo(Xa),yo(_a),wo("name"),yo(zs))},t.\u0275dir=ye({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class Hf{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===xp?this.route:t===Rf?this.childContexts:this.parent.get(t,e)}}class $f{}class Vf{preload(t,e){return Bh(null)}}let qf=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new Ff(e,n,e=>t.triggerEvent(new Fd(e)),e=>t.triggerEvent(new Td(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(Mh(t=>t instanceof _d),gd(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(Jt);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return P(n).pipe($(),D(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>this.loader.load(t.injector,e).pipe(z(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(Kt(Uf),Kt(Fu),Kt(au),Kt(ro),Kt($f))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),jf=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof xd?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof _d&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Md&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new Md(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(Kt(Uf),Kt(Gc),Kt(void 0))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();const Kf=new Mt("ROUTER_CONFIGURATION"),Wf=new Mt("ROUTER_FORROOT_GUARD"),Gf=[nc,{provide:tp,useClass:ep},{provide:Uf,useFactory:function(t,e,n,r,i,s,o,a={},l,u){const c=new Uf(null,t,e,n,r,i,s,Vd(o));if(l&&(c.urlHandlingStrategy=l),u&&(c.routeReuseStrategy=u),a.errorHandler&&(c.errorHandler=a.errorHandler),a.malformedUriErrorHandler&&(c.malformedUriErrorHandler=a.malformedUriErrorHandler),a.enableTracing){const t=zu();c.events.subscribe(e=>{t.logGroup("Router Event: "+e.constructor.name),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return a.onSameUrlNavigation&&(c.onSameUrlNavigation=a.onSameUrlNavigation),a.paramsInheritanceStrategy&&(c.paramsInheritanceStrategy=a.paramsInheritanceStrategy),a.urlUpdateStrategy&&(c.urlUpdateStrategy=a.urlUpdateStrategy),a.relativeLinkResolution&&(c.relativeLinkResolution=a.relativeLinkResolution),c},deps:[tp,Rf,nc,ro,Fu,au,If,Kf,[class{},new rt],[class{},new rt]]},Rf,{provide:xp,useFactory:function(t){return t.routerState.root},deps:[Uf]},{provide:Fu,useClass:Ou},qf,Vf,class{preload(t,e){return e().pipe(Yh(()=>Bh(null)))}},{provide:Kf,useValue:{enableTracing:!1}}];function Xf(){return new Cu("Router",Uf)}let Yf=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[Gf,eA(e),{provide:Wf,useFactory:tA,deps:[[Uf,new rt,new st]]},{provide:Kf,useValue:n||{}},{provide:Yu,useFactory:Zf,deps:[Hu,[new nt(Zu),new rt],Kf]},{provide:jf,useFactory:Jf,deps:[Uf,Gc,Kf]},{provide:$f,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Vf},{provide:Cu,multi:!0,useFactory:Xf},[nA,{provide:$l,multi:!0,useFactory:rA,deps:[nA]},{provide:sA,useFactory:iA,deps:[nA]},{provide:Xl,multi:!0,useExisting:sA}]]}}static forChild(e){return{ngModule:t,providers:[eA(e)]}}}return t.\u0275mod=me({type:t}),t.\u0275inj=ct({factory:function(e){return new(e||t)(Kt(Wf,8),Kt(Uf,8))}}),t})();function Jf(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new jf(t,e,n)}function Zf(t,e,n={}){return n.useHash?new ec(t,e):new tc(t,e)}function tA(t){if(t)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function eA(t){return[{provide:io,multi:!0,useValue:t},{provide:If,multi:!0,useValue:t}]}let nA=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new _}appInitializer(){return this.injector.get(Vu,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(Uf),r=this.injector.get(Kf);if(this.isLegacyDisabled(r)||this.isLegacyEnabled(r))t(!0);else if("disabled"===r.initialNavigation)n.setUpLocationChangeListener(),t(!0);else{if("enabled"!==r.initialNavigation)throw new Error(`Invalid initialNavigation options: '${r.initialNavigation}'`);n.hooks.afterPreactivation=()=>this.initNavigation?Bh(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()}return e})}bootstrapListener(t){const e=this.injector.get(Kf),n=this.injector.get(qf),r=this.injector.get(jf),i=this.injector.get(Uf),s=this.injector.get(Nu);t===s.components[0]&&(this.isLegacyEnabled(e)?i.initialNavigation():this.isLegacyDisabled(e)&&i.setUpLocationChangeListener(),n.setUpPreloading(),r.init(),i.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}isLegacyEnabled(t){return"legacy_enabled"===t.initialNavigation||!0===t.initialNavigation||void 0===t.initialNavigation}isLegacyDisabled(t){return"legacy_disabled"===t.initialNavigation||!1===t.initialNavigation}}return t.\u0275fac=function(e){return new(e||t)(Kt(ro))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();function rA(t){return t.appInitializer.bind(t)}function iA(t){return t.bootstrapListener.bind(t)}const sA=new Mt("Router Initializer"),oA=[{examName:"Checkbox AI trainer",lastModified:new Date,id:"checkboxtrainer"},{examName:"Demo Exam",lastModified:new Date,id:"nongeneratedid1"}];var aA="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),lA=new Uint8Array(16);function uA(){if(!aA)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return aA(lA)}for(var cA=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,hA=function(t){return"string"==typeof t&&cA.test(t)},dA=[],pA=0;pA<256;++pA)dA.push((pA+256).toString(16).substr(1));var fA=function(t,e,n){var r=(t=t||{}).random||(t.rng||uA)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){n=n||0;for(var i=0;i<16;++i)e[n+i]=r[i];return e}return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(dA[t[e+0]]+dA[t[e+1]]+dA[t[e+2]]+dA[t[e+3]]+"-"+dA[t[e+4]]+dA[t[e+5]]+"-"+dA[t[e+6]]+dA[t[e+7]]+"-"+dA[t[e+8]]+dA[t[e+9]]+"-"+dA[t[e+10]]+dA[t[e+11]]+dA[t[e+12]]+dA[t[e+13]]+dA[t[e+14]]+dA[t[e+15]]).toLowerCase();if(!hA(n))throw TypeError("Stringified UUID is invalid");return n}(r)};let AA;try{AA="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(xE){AA=!1}let mA,gA=(()=>{class t{constructor(t){this._platformId=t,this.isBrowser=this._platformId?"browser"===this._platformId:"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!AA)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return t.\u0275fac=function(e){return new(e||t)(Kt(Gl))},t.\u0275prov=ut({factory:function(){return new t(Kt(Gl))},token:t,providedIn:"root"}),t})(),yA=(()=>{class t{}return t.\u0275mod=me({type:t}),t.\u0275inj=ct({factory:function(e){return new(e||t)}}),t})();const wA=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function bA(){if(mA)return mA;if("object"!=typeof document||!document)return mA=new Set(wA),mA;let t=document.createElement("input");return mA=new Set(wA.filter(e=>(t.setAttribute("type",e),t.type===e))),mA}let vA,xA;function _A(t){return function(){if(null==vA&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>vA=!0}))}finally{vA=vA||!1}return vA}()?t:!!t.capture}function CA(t,...e){return e.length?e.some(e=>t[e]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}class SA extends h{constructor(t,e){super()}schedule(t,e=0){return this}}class EA extends SA{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n=!1,r=void 0;try{this.work(t)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}let BA=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class kA extends BA{constructor(t,e=BA.now){super(t,()=>kA.delegate&&kA.delegate!==this?kA.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return kA.delegate&&kA.delegate!==this?kA.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}const NA=new kA(EA);function IA(t,e=NA){return n=>n.lift(new FA(t,e))}class FA{constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new TA(t,this.dueTime,this.scheduler))}}class TA extends f{constructor(t,e,n){super(t),this.dueTime=e,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(RA,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function RA(t){t.debouncedNext()}function OA(t){return null!=t&&""+t!="false"}function DA(t,e=0){return function(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}(t)?Number(t):e}function LA(t){return Array.isArray(t)?t:[t]}function MA(t){return null==t?"":"string"==typeof t?t:t+"px"}function UA(t){return t instanceof Ca?t.nativeElement:t}let PA=(()=>{class t{create(t){return"undefined"==typeof MutationObserver?null:new MutationObserver(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({factory:function(){return new t},token:t,providedIn:"root"}),t})(),zA=(()=>{class t{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,e)=>this._cleanupObserver(e))}observe(t){const e=UA(t);return new y(t=>{const n=this._observeElement(e).subscribe(t);return()=>{n.unsubscribe(),this._unobserveElement(e)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const e=new _,n=this._mutationObserverFactory.create(t=>e.next(t));n&&n.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:n,stream:e,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:e,stream:n}=this._observedElements.get(t);e&&e.disconnect(),n.complete(),this._observedElements.delete(t)}}}return t.\u0275fac=function(e){return new(e||t)(Kt(PA))},t.\u0275prov=ut({factory:function(){return new t(Kt(PA))},token:t,providedIn:"root"}),t})(),QA=(()=>{class t{constructor(t,e,n){this._contentObserver=t,this._elementRef=e,this._ngZone=n,this.event=new bl,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=OA(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=DA(t),this._subscribe()}ngAfterContentInit(){this._currentSubscription||this.disabled||this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(IA(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){this._currentSubscription&&this._currentSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(yo(zA),yo(Ca),yo(cu))},t.\u0275dir=ye({type:t,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),t})(),HA=(()=>{class t{}return t.\u0275mod=me({type:t}),t.\u0275inj=ct({factory:function(e){return new(e||t)},providers:[PA]}),t})();class $A extends class{constructor(t){this._items=t,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new _,this._typeaheadSubscription=h.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=t=>t.disabled,this._pressedLetters=[],this.tabOut=new _,this.change=new _,t instanceof xl&&t.changes.subscribe(t=>{if(this._activeItem){const e=t.toArray().indexOf(this._activeItem);e>-1&&e!==this._activeItemIndex&&(this._activeItemIndex=e)}})}skipPredicate(t){return this._skipPredicateFn=t,this}withWrap(t=!0){return this._wrap=t,this}withVerticalOrientation(t=!0){return this._vertical=t,this}withHorizontalOrientation(t){return this._horizontal=t,this}withAllowedModifierKeys(t){return this._allowedModifierKeys=t,this}withTypeAhead(t=200){if(this._items.length&&this._items.some(t=>"function"!=typeof t.getLabel))throw Error("ListKeyManager items in typeahead mode must implement the `getLabel` method.");return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(sd(t=>this._pressedLetters.push(t)),IA(t),Mh(()=>this._pressedLetters.length>0),D(()=>this._pressedLetters.join(""))).subscribe(t=>{const e=this._getItemsArray();for(let n=1;n<e.length+1;n++){const r=(this._activeItemIndex+n)%e.length,i=e[r];if(!this._skipPredicateFn(i)&&0===i.getLabel().toUpperCase().trim().indexOf(t)){this.setActiveItem(r);break}}this._pressedLetters=[]}),this}withHomeAndEnd(){return this._homeAndEnd=!0,this}setActiveItem(t){const e=this._activeItem;this.updateActiveItem(t),this._activeItem!==e&&this.change.next(this._activeItemIndex)}onKeydown(t){const e=t.keyCode,n=["altKey","ctrlKey","metaKey","shiftKey"].every(e=>!t[e]||this._allowedModifierKeys.indexOf(e)>-1);switch(e){case 9:return void this.tabOut.next();case 40:if(this._vertical&&n){this.setNextItemActive();break}return;case 38:if(this._vertical&&n){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&n){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&n){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&n){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&n){this.setLastItemActive();break}return;default:return void((n||CA(t,"shiftKey"))&&(t.key&&1===t.key.length?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))))}this._pressedLetters=[],t.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(t){const e=this._getItemsArray(),n="number"==typeof t?t:e.indexOf(t),r=e[n];this._activeItem=null==r?null:r,this._activeItemIndex=n}_setActiveItemByDelta(t){this._wrap?this._setActiveInWrapMode(t):this._setActiveInDefaultMode(t)}_setActiveInWrapMode(t){const e=this._getItemsArray();for(let n=1;n<=e.length;n++){const r=(this._activeItemIndex+t*n+e.length)%e.length;if(!this._skipPredicateFn(e[r]))return void this.setActiveItem(r)}}_setActiveInDefaultMode(t){this._setActiveItemByIndex(this._activeItemIndex+t,t)}_setActiveItemByIndex(t,e){const n=this._getItemsArray();if(n[t]){for(;this._skipPredicateFn(n[t]);)if(!n[t+=e])return;this.setActiveItem(t)}}_getItemsArray(){return this._items instanceof xl?this._items.toArray():this._items}}{setActiveItem(t){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(t),this.activeItem&&this.activeItem.setActiveStyles()}}"undefined"!=typeof Element&&Element;const VA=new Mt("liveAnnouncerElement",{providedIn:"root",factory:function(){return null}}),qA=new Mt("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let jA=(()=>{class t{constructor(t,e,n,r){this._ngZone=e,this._defaultOptions=r,this._document=n,this._liveElement=t||this._createLiveElement()}announce(t,...e){const n=this._defaultOptions;let r,i;return 1===e.length&&"number"==typeof e[0]?i=e[0]:[r,i]=e,this.clear(),clearTimeout(this._previousTimeout),r||(r=n&&n.politeness?n.politeness:"polite"),null==i&&n&&(i=n.duration),this._liveElement.setAttribute("aria-live",r),this._ngZone.runOutsideAngular(()=>new Promise(e=>{clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=t,e(),"number"==typeof i&&(this._previousTimeout=setTimeout(()=>this.clear(),i))},100)}))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement&&this._liveElement.parentNode&&(this._liveElement.parentNode.removeChild(this._liveElement),this._liveElement=null)}_createLiveElement(){const t=this._document.getElementsByClassName("cdk-live-announcer-element"),e=this._document.createElement("div");for(let n=0;n<t.length;n++)t[n].parentNode.removeChild(t[n]);return e.classList.add("cdk-live-announcer-element"),e.classList.add("cdk-visually-hidden"),e.setAttribute("aria-atomic","true"),e.setAttribute("aria-live","polite"),this._document.body.appendChild(e),e}}return t.\u0275fac=function(e){return new(e||t)(Kt(VA,8),Kt(cu),Kt(Qu),Kt(qA,8))},t.\u0275prov=ut({factory:function(){return new t(Kt(VA,8),Kt(cu),Kt(Qu),Kt(qA,8))},token:t,providedIn:"root"}),t})();function KA(t){return 0===t.buttons}const WA=new Mt("cdk-focus-monitor-default-options"),GA=_A({passive:!0,capture:!0});let XA=(()=>{class t{constructor(t,e,n,r){this._ngZone=t,this._platform=e,this._origin=null,this._windowFocused=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._documentKeydownListener=()=>{this._lastTouchTarget=null,this._setOriginForCurrentEventQueue("keyboard")},this._documentMousedownListener=t=>{if(!this._lastTouchTarget){const e=KA(t)?"keyboard":"mouse";this._setOriginForCurrentEventQueue(e)}},this._documentTouchstartListener=t=>{null!=this._touchTimeoutId&&clearTimeout(this._touchTimeoutId),this._lastTouchTarget=YA(t),this._touchTimeoutId=setTimeout(()=>this._lastTouchTarget=null,650)},this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._rootNodeFocusAndBlurListener=t=>{const e=YA(t),n="focus"===t.type?this._onFocus:this._onBlur;for(let r=e;r;r=r.parentElement)n.call(this,t,r)},this._document=n,this._detectionMode=(null==r?void 0:r.detectionMode)||0}monitor(t,e=!1){if(!this._platform.isBrowser)return Bh(null);const n=UA(t),r=function(t){if(function(){if(null==xA){const t="undefined"!=typeof document?document.head:null;xA=!(!t||!t.createShadowRoot&&!t.attachShadow)}return xA}()){const e=t.getRootNode?t.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(n)||this._getDocument(),i=this._elementInfo.get(n);if(i)return e&&(i.checkChildren=!0),i.subject.asObservable();const s={checkChildren:e,subject:new _,rootNode:r};return this._elementInfo.set(n,s),this._registerGlobalListeners(s),s.subject.asObservable()}stopMonitoring(t){const e=UA(t),n=this._elementInfo.get(e);n&&(n.subject.complete(),this._setClasses(e),this._elementInfo.delete(e),this._removeGlobalListeners(n))}focusVia(t,e,n){const r=UA(t);this._setOriginForCurrentEventQueue(e),"function"==typeof r.focus&&r.focus(n)}ngOnDestroy(){this._elementInfo.forEach((t,e)=>this.stopMonitoring(e))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_toggleClass(t,e,n){n?t.classList.add(e):t.classList.remove(e)}_getFocusOrigin(t){return this._origin?this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:this._wasCausedByTouch(t)?"touch":"program"}_setClasses(t,e){this._toggleClass(t,"cdk-focused",!!e),this._toggleClass(t,"cdk-touch-focused","touch"===e),this._toggleClass(t,"cdk-keyboard-focused","keyboard"===e),this._toggleClass(t,"cdk-mouse-focused","mouse"===e),this._toggleClass(t,"cdk-program-focused","program"===e)}_setOriginForCurrentEventQueue(t){this._ngZone.runOutsideAngular(()=>{this._origin=t,0===this._detectionMode&&(this._originTimeoutId=setTimeout(()=>this._origin=null,1))})}_wasCausedByTouch(t){const e=YA(t);return this._lastTouchTarget instanceof Node&&e instanceof Node&&(e===this._lastTouchTarget||e.contains(this._lastTouchTarget))}_onFocus(t,e){const n=this._elementInfo.get(e);if(!n||!n.checkChildren&&e!==YA(t))return;const r=this._getFocusOrigin(t);this._setClasses(e,r),this._emitOrigin(n.subject,r),this._lastFocusOrigin=r}_onBlur(t,e){const n=this._elementInfo.get(e);!n||n.checkChildren&&t.relatedTarget instanceof Node&&e.contains(t.relatedTarget)||(this._setClasses(e),this._emitOrigin(n.subject,null))}_emitOrigin(t,e){this._ngZone.run(()=>t.next(e))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const e=t.rootNode,n=this._rootNodeFocusListenerCount.get(e)||0;n||this._ngZone.runOutsideAngular(()=>{e.addEventListener("focus",this._rootNodeFocusAndBlurListener,GA),e.addEventListener("blur",this._rootNodeFocusAndBlurListener,GA)}),this._rootNodeFocusListenerCount.set(e,n+1),1==++this._monitoredElementCount&&this._ngZone.runOutsideAngular(()=>{const t=this._getDocument(),e=this._getWindow();t.addEventListener("keydown",this._documentKeydownListener,GA),t.addEventListener("mousedown",this._documentMousedownListener,GA),t.addEventListener("touchstart",this._documentTouchstartListener,GA),e.addEventListener("focus",this._windowFocusListener)})}_removeGlobalListeners(t){const e=t.rootNode;if(this._rootNodeFocusListenerCount.has(e)){const t=this._rootNodeFocusListenerCount.get(e);t>1?this._rootNodeFocusListenerCount.set(e,t-1):(e.removeEventListener("focus",this._rootNodeFocusAndBlurListener,GA),e.removeEventListener("blur",this._rootNodeFocusAndBlurListener,GA),this._rootNodeFocusListenerCount.delete(e))}if(!--this._monitoredElementCount){const t=this._getDocument(),e=this._getWindow();t.removeEventListener("keydown",this._documentKeydownListener,GA),t.removeEventListener("mousedown",this._documentMousedownListener,GA),t.removeEventListener("touchstart",this._documentTouchstartListener,GA),e.removeEventListener("focus",this._windowFocusListener),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._touchTimeoutId),clearTimeout(this._originTimeoutId)}}}return t.\u0275fac=function(e){return new(e||t)(Kt(cu),Kt(gA),Kt(Qu,8),Kt(WA,8))},t.\u0275prov=ut({factory:function(){return new t(Kt(cu),Kt(gA),Kt(Qu,8),Kt(WA,8))},token:t,providedIn:"root"}),t})();function YA(t){return t.composedPath?t.composedPath()[0]:t.target}let JA=(()=>{class t{constructor(t,e){this._platform=t,this._document=e}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const e=this._document.defaultView||window,n=e&&e.getComputedStyle?e.getComputedStyle(t):null,r=(n&&n.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(t),r){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove("cdk-high-contrast-active"),t.remove("cdk-high-contrast-black-on-white"),t.remove("cdk-high-contrast-white-on-black");const e=this.getHighContrastMode();1===e?(t.add("cdk-high-contrast-active"),t.add("cdk-high-contrast-black-on-white")):2===e&&(t.add("cdk-high-contrast-active"),t.add("cdk-high-contrast-white-on-black"))}}}return t.\u0275fac=function(e){return new(e||t)(Kt(gA),Kt(Qu))},t.\u0275prov=ut({factory:function(){return new t(Kt(gA),Kt(Qu))},token:t,providedIn:"root"}),t})();const ZA=new Mt("cdk-dir-doc",{providedIn:"root",factory:function(){return Wt(Qu)}});let tm=(()=>{class t{constructor(t){if(this.value="ltr",this.change=new bl,t){const e=t.documentElement?t.documentElement.dir:null,n=(t.body?t.body.dir:null)||e;this.value="ltr"===n||"rtl"===n?n:"ltr"}}ngOnDestroy(){this.change.complete()}}return t.\u0275fac=function(e){return new(e||t)(Kt(ZA,8))},t.\u0275prov=ut({factory:function(){return new t(Kt(ZA,8))},token:t,providedIn:"root"}),t})(),em=(()=>{class t{}return t.\u0275mod=me({type:t}),t.\u0275inj=ct({factory:function(e){return new(e||t)}}),t})();const nm=new Fa("10.1.2");class rm{}function im(t,e){return{type:7,name:t,definitions:e,options:{}}}function sm(t,e=null){return{type:4,styles:e,timings:t}}function om(t,e=null){return{type:2,steps:t,options:e}}function am(t){return{type:6,styles:t,offset:null}}function lm(t,e,n){return{type:0,name:t,styles:e,options:n}}function um(t,e,n=null){return{type:1,expr:t,animation:e,options:n}}function cm(t=null){return{type:9,options:t}}function hm(t,e,n=null){return{type:11,selector:t,animation:e,options:n}}function dm(t){Promise.resolve(null).then(t)}class pm{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){dm(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){}setPosition(t){}getPosition(){return 0}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class fm{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,r=0;const i=this.players.length;0==i?dm(()=>this._onFinish()):this.players.forEach(t=>{t.onDone(()=>{++e==i&&this._onFinish()}),t.onDestroy(()=>{++n==i&&this._onDestroy()}),t.onStart(()=>{++r==i&&this._onStart()})}),this.totalTime=this.players.reduce((t,e)=>Math.max(t,e.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(t=>{const n=t.totalTime?Math.min(1,e/t.totalTime):1;t.setPosition(n)})}getPosition(){let t=0;return this.players.forEach(e=>{const n=e.getPosition();t=Math.min(n,t)}),t}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}function Am(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function mm(t){switch(t.length){case 0:return new pm;case 1:return t[0];default:return new fm(t)}}function gm(t,e,n,r,i={},s={}){const o=[],a=[];let l=-1,u=null;if(r.forEach(t=>{const n=t.offset,r=n==l,c=r&&u||{};Object.keys(t).forEach(n=>{let r=n,a=t[n];if("offset"!==n)switch(r=e.normalizePropertyName(r,o),a){case"!":a=i[n];break;case"*":a=s[n];break;default:a=e.normalizeStyleValue(n,r,a,o)}c[r]=a}),r||a.push(c),u=c,l=n}),o.length){const t="\n - ";throw new Error(`Unable to animate due to the following errors:${t}${o.join(t)}`)}return a}function ym(t,e,n,r){switch(e){case"start":t.onStart(()=>r(n&&wm(n,"start",t)));break;case"done":t.onDone(()=>r(n&&wm(n,"done",t)));break;case"destroy":t.onDestroy(()=>r(n&&wm(n,"destroy",t)))}}function wm(t,e,n){const r=n.totalTime,i=bm(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,null==r?t.totalTime:r,!!n.disabled),s=t._data;return null!=s&&(i._data=s),i}function bm(t,e,n,r,i="",s=0,o){return{element:t,triggerName:e,fromState:n,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function vm(t,e,n){let r;return t instanceof Map?(r=t.get(e),r||t.set(e,r=n)):(r=t[e],r||(r=t[e]=n)),r}function xm(t){const e=t.indexOf(":");return[t.substring(1,e),t.substr(e+1)]}let _m=(t,e)=>!1,Cm=(t,e)=>!1,Sm=(t,e,n)=>[];const Em=Am();(Em||"undefined"!=typeof Element)&&(_m=(t,e)=>t.contains(e),Cm=(()=>{if(Em||Element.prototype.matches)return(t,e)=>t.matches(e);{const t=Element.prototype,e=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return e?(t,n)=>e.apply(t,[n]):Cm}})(),Sm=(t,e,n)=>{let r=[];if(n)r.push(...t.querySelectorAll(e));else{const n=t.querySelector(e);n&&r.push(n)}return r});let Bm=null,km=!1;function Nm(t){Bm||(Bm=("undefined"!=typeof document?document.body:null)||{},km=!!Bm.style&&"WebkitAppearance"in Bm.style);let e=!0;return Bm.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&(e=t in Bm.style,!e&&km)&&(e="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in Bm.style),e}const Im=Cm,Fm=_m,Tm=Sm;function Rm(t){const e={};return Object.keys(t).forEach(n=>{const r=n.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=t[n]}),e}let Om=(()=>{class t{validateStyleProperty(t){return Nm(t)}matchesElement(t,e){return Im(t,e)}containsElement(t,e){return Fm(t,e)}query(t,e,n){return Tm(t,e,n)}computeStyle(t,e,n){return n||""}animate(t,e,n,r,i,s=[],o){return new pm(n,r)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),Dm=(()=>{class t{}return t.NOOP=new Om,t})();function Lm(t){if("number"==typeof t)return t;const e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Mm(parseFloat(e[1]),e[2])}function Mm(t,e){switch(e){case"s":return 1e3*t;default:return t}}function Um(t,e,n){return t.hasOwnProperty("duration")?t:function(t,e,n){let r,i=0,s="";if("string"==typeof t){const n=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===n)return e.push(`The provided timing value "${t}" is invalid.`),{duration:0,delay:0,easing:""};r=Mm(parseFloat(n[1]),n[2]);const o=n[3];null!=o&&(i=Mm(parseFloat(o),n[4]));const a=n[5];a&&(s=a)}else r=t;if(!n){let n=!1,s=e.length;r<0&&(e.push("Duration values below 0 are not allowed for this animation step."),n=!0),i<0&&(e.push("Delay values below 0 are not allowed for this animation step."),n=!0),n&&e.splice(s,0,`The provided timing value "${t}" is invalid.`)}return{duration:r,delay:i,easing:s}}(t,e,n)}function Pm(t,e={}){return Object.keys(t).forEach(n=>{e[n]=t[n]}),e}function zm(t,e,n={}){if(e)for(let r in t)n[r]=t[r];else Pm(t,n);return n}function Qm(t,e,n){return n?e+":"+n+";":""}function Hm(t){let e="";for(let n=0;n<t.style.length;n++){const r=t.style.item(n);e+=Qm(0,r,t.style.getPropertyValue(r))}for(const n in t.style)t.style.hasOwnProperty(n)&&!n.startsWith("_")&&(e+=Qm(0,n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),t.style[n]));t.setAttribute("style",e)}function $m(t,e,n){t.style&&(Object.keys(e).forEach(r=>{const i=Ym(r);n&&!n.hasOwnProperty(r)&&(n[r]=t.style[i]),t.style[i]=e[r]}),Am()&&Hm(t))}function Vm(t,e){t.style&&(Object.keys(e).forEach(e=>{const n=Ym(e);t.style[n]=""}),Am()&&Hm(t))}function qm(t){return Array.isArray(t)?1==t.length?t[0]:om(t):t}const jm=new RegExp("{{\\s*(.+?)\\s*}}","g");function Km(t){let e=[];if("string"==typeof t){let n;for(;n=jm.exec(t);)e.push(n[1]);jm.lastIndex=0}return e}function Wm(t,e,n){const r=t.toString(),i=r.replace(jm,(t,r)=>{let i=e[r];return e.hasOwnProperty(r)||(n.push("Please provide a value for the animation param "+r),i=""),i.toString()});return i==r?t:i}function Gm(t){const e=[];let n=t.next();for(;!n.done;)e.push(n.value),n=t.next();return e}const Xm=/-+([a-z0-9])/g;function Ym(t){return t.replace(Xm,(...t)=>t[1].toUpperCase())}function Jm(t,e){return 0===t||0===e}function Zm(t,e,n){const r=Object.keys(n);if(r.length&&e.length){let s=e[0],o=[];if(r.forEach(t=>{s.hasOwnProperty(t)||o.push(t),s[t]=n[t]}),o.length)for(var i=1;i<e.length;i++){let n=e[i];o.forEach((function(e){n[e]=eg(t,e)}))}}return e}function tg(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw new Error("Unable to resolve animation metadata node #"+e.type)}}function eg(t,e){return window.getComputedStyle(t)[e]}function ng(t,e){const n=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(t=>function(t,e,n){if(":"==t[0]){const r=function(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,e)=>parseFloat(e)>parseFloat(t);case":decrement":return(t,e)=>parseFloat(e)<parseFloat(t);default:return e.push(`The transition alias value "${t}" is not supported`),"* => *"}}(t,n);if("function"==typeof r)return void e.push(r);t=r}const r=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return n.push(`The provided transition expression "${t}" is not supported`),e;const i=r[1],s=r[2],o=r[3];e.push(sg(i,o)),"<"!=s[0]||"*"==i&&"*"==o||e.push(sg(o,i))}(t,n,e)):n.push(t),n}const rg=new Set(["true","1"]),ig=new Set(["false","0"]);function sg(t,e){const n=rg.has(t)||ig.has(t),r=rg.has(e)||ig.has(e);return(i,s)=>{let o="*"==t||t==i,a="*"==e||e==s;return!o&&n&&"boolean"==typeof i&&(o=i?rg.has(t):ig.has(t)),!a&&r&&"boolean"==typeof s&&(a=s?rg.has(e):ig.has(e)),o&&a}}const og=new RegExp("s*:selfs*,?","g");function ag(t,e,n){return new lg(t).build(e,n)}class lg{constructor(t){this._driver=t}build(t,e){const n=new ug(e);return this._resetContextStyleTimingState(n),tg(this,qm(t),n)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,r=e.depCount=0;const i=[],s=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(t=>{if(this._resetContextStyleTimingState(e),0==t.type){const n=t,r=n.name;r.toString().split(/\s*,\s*/).forEach(t=>{n.name=t,i.push(this.visitState(n,e))}),n.name=r}else if(1==t.type){const i=this.visitTransition(t,e);n+=i.queryCount,r+=i.depCount,s.push(i)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:i,transitions:s,queryCount:n,depCount:r,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){const i=new Set,s=r||{};if(n.styles.forEach(t=>{if(cg(t)){const e=t;Object.keys(e).forEach(t=>{Km(e[t]).forEach(t=>{s.hasOwnProperty(t)||i.add(t)})})}}),i.size){const n=Gm(i.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${n.join(", ")}`)}}return{type:0,name:t.name,style:n,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=tg(this,qm(t.animation),e);return{type:1,matchers:ng(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:hg(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(t=>tg(this,t,e)),options:hg(t.options)}}visitGroup(t,e){const n=e.currentTime;let r=0;const i=t.steps.map(t=>{e.currentTime=n;const i=tg(this,t,e);return r=Math.max(r,e.currentTime),i});return e.currentTime=r,{type:3,steps:i,options:hg(t.options)}}visitAnimate(t,e){const n=function(t,e){let n=null;if(t.hasOwnProperty("duration"))n=t;else if("number"==typeof t)return dg(Um(t,e).duration,0,"");const r=t;if(r.split(/\s+/).some(t=>"{"==t.charAt(0)&&"{"==t.charAt(1))){const t=dg(0,0,"");return t.dynamic=!0,t.strValue=r,t}return n=n||Um(r,e),dg(n.duration,n.delay,n.easing)}(t.timings,e.errors);let r;e.currentAnimateTimings=n;let i=t.styles?t.styles:am({});if(5==i.type)r=this.visitKeyframes(i,e);else{let i=t.styles,s=!1;if(!i){s=!0;const t={};n.easing&&(t.easing=n.easing),i=am(t)}e.currentTime+=n.duration+n.delay;const o=this.visitStyle(i,e);o.isEmptyStep=s,r=o}return e.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[];Array.isArray(t.styles)?t.styles.forEach(t=>{"string"==typeof t?"*"==t?n.push(t):e.errors.push(`The provided style string value ${t} is not allowed.`):n.push(t)}):n.push(t.styles);let r=!1,i=null;return n.forEach(t=>{if(cg(t)){const e=t,n=e.easing;if(n&&(i=n,delete e.easing),!r)for(let t in e)if(e[t].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:n,easing:i,offset:t.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let r=e.currentTime,i=e.currentTime;n&&i>0&&(i-=n.duration+n.delay),t.styles.forEach(t=>{"string"!=typeof t&&Object.keys(t).forEach(n=>{if(!this._driver.validateStyleProperty(n))return void e.errors.push(`The provided animation property "${n}" is not a supported CSS property for animations`);const s=e.collectedStyles[e.currentQuerySelector],o=s[n];let a=!0;o&&(i!=r&&i>=o.startTime&&r<=o.endTime&&(e.errors.push(`The CSS property "${n}" that exists between the times of "${o.startTime}ms" and "${o.endTime}ms" is also being animated in a parallel animation between the times of "${i}ms" and "${r}ms"`),a=!1),i=o.startTime),a&&(s[n]={startTime:i,endTime:r}),e.options&&function(t,e,n){const r=e.params||{},i=Km(t);i.length&&i.forEach(t=>{r.hasOwnProperty(t)||n.push(`Unable to resolve the local animation param ${t} in the given list of values`)})}(t[n],e.options,e.errors)})})}visitKeyframes(t,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),n;let r=0;const i=[];let s=!1,o=!1,a=0;const l=t.steps.map(t=>{const n=this._makeStyleAst(t,e);let l=null!=n.offset?n.offset:function(t){if("string"==typeof t)return null;let e=null;if(Array.isArray(t))t.forEach(t=>{if(cg(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}});else if(cg(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}return e}(n.styles),u=0;return null!=l&&(r++,u=n.offset=l),o=o||u<0||u>1,s=s||u<a,a=u,i.push(u),n});o&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),s&&e.errors.push("Please ensure that all keyframe offsets are in order");const u=t.steps.length;let c=0;r>0&&r<u?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==r&&(c=1/(u-1));const h=u-1,d=e.currentTime,p=e.currentAnimateTimings,f=p.duration;return l.forEach((t,r)=>{const s=c>0?r==h?1:c*r:i[r],o=s*f;e.currentTime=d+p.delay+o,p.duration=o,this._validateStyleAst(t,e),t.offset=s,n.styles.push(t)}),n}visitReference(t,e){return{type:8,animation:tg(this,qm(t.animation),e),options:hg(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:hg(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:hg(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[i,s]=function(t){const e=!!t.split(/\s*,\s*/).find(t=>":self"==t);return e&&(t=t.replace(og,"")),[t=t.replace(/@\*/g,".ng-trigger").replace(/@\w+/g,t=>".ng-trigger-"+t.substr(1)).replace(/:animating/g,".ng-animating"),e]}(t.selector);e.currentQuerySelector=n.length?n+" "+i:i,vm(e.collectedStyles,e.currentQuerySelector,{});const o=tg(this,qm(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:i,limit:r.limit||0,optional:!!r.optional,includeSelf:s,animation:o,originalSelector:t.selector,options:hg(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:Um(t.timings,e.errors,!0);return{type:12,animation:tg(this,qm(t.animation),e),timings:n,options:null}}}class ug{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function cg(t){return!Array.isArray(t)&&"object"==typeof t}function hg(t){var e;return t?(t=Pm(t)).params&&(t.params=(e=t.params)?Pm(e):null):t={},t}function dg(t,e,n){return{duration:t,delay:e,easing:n}}function pg(t,e,n,r,i,s,o=null,a=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}class fg{constructor(){this._map=new Map}consume(t){let e=this._map.get(t);return e?this._map.delete(t):e=[],e}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const Ag=new RegExp(":enter","g"),mg=new RegExp(":leave","g");function gg(t,e,n,r,i,s={},o={},a,l,u=[]){return(new yg).buildKeyframes(t,e,n,r,i,s,o,a,l,u)}class yg{buildKeyframes(t,e,n,r,i,s,o,a,l,u=[]){l=l||new fg;const c=new bg(t,e,l,r,i,u,[]);c.options=a,c.currentTimeline.setStyles([s],null,c.errors,a),tg(this,n,c);const h=c.timelines.filter(t=>t.containsAnimation());if(h.length&&Object.keys(o).length){const t=h[h.length-1];t.allowOnlyTimelineStyles()||t.setStyles([o],null,c.errors,a)}return h.length?h.map(t=>t.buildKeyframes()):[pg(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.consume(e.element);if(n){const r=e.createSubContext(t.options),i=e.currentTimeline.currentTime,s=this._visitSubInstructions(n,r,r.options);i!=s&&e.transformIntoNewTimeline(s)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,n){let r=e.currentTimeline.currentTime;const i=null!=n.duration?Lm(n.duration):null,s=null!=n.delay?Lm(n.delay):null;return 0!==i&&t.forEach(t=>{const n=e.appendInstructionToTimeline(t,i,s);r=Math.max(r,n.duration+n.delay)}),r}visitReference(t,e){e.updateOptions(t.options,!0),tg(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let r=e;const i=t.options;if(i&&(i.params||i.delay)&&(r=e.createSubContext(i),r.transformIntoNewTimeline(),null!=i.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=wg);const t=Lm(i.delay);r.delayNextStep(t)}t.steps.length&&(t.steps.forEach(t=>tg(this,t,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let r=e.currentTimeline.currentTime;const i=t.options&&t.options.delay?Lm(t.options.delay):0;t.steps.forEach(s=>{const o=e.createSubContext(t.options);i&&o.delayNextStep(i),tg(this,s,o),r=Math.max(r,o.currentTimeline.currentTime),n.push(o.currentTimeline)}),n.forEach(t=>e.currentTimeline.mergeTimelineCollectedStyles(t)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return Um(e.params?Wm(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());const i=t.style;5==i.type?this.visitKeyframes(i,e):(e.incrementTime(n.duration),this.visitStyle(i,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();const i=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(i):n.setStyles(t.styles,i,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,r=e.currentTimeline.duration,i=n.duration,s=e.createSubContext().currentTimeline;s.easing=n.easing,t.styles.forEach(t=>{s.forwardTime((t.offset||0)*i),s.setStyles(t.styles,t.easing,e.errors,e.options),s.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(s),e.transformIntoNewTimeline(r+i),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,r=t.options||{},i=r.delay?Lm(r.delay):0;i&&(6===e.previousNode.type||0==n&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=wg);let s=n;const o=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=o.length;let a=null;o.forEach((n,r)=>{e.currentQueryIndex=r;const o=e.createSubContext(t.options,n);i&&o.delayNextStep(i),n===e.element&&(a=o.currentTimeline),tg(this,t.animation,o),o.currentTimeline.applyStylesToKeyframe(),s=Math.max(s,o.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(s),a&&(e.currentTimeline.mergeTimelineCollectedStyles(a),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,r=e.currentTimeline,i=t.timings,s=Math.abs(i.duration),o=s*(e.currentQueryTotal-1);let a=s*e.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":a=o-a;break;case"full":a=n.currentStaggerTime}const l=e.currentTimeline;a&&l.delayNextStep(a);const u=l.currentTime;tg(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-u+(r.startTime-n.currentTimeline.startTime)}}const wg={};class bg{constructor(t,e,n,r,i,s,o,a){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=i,this.errors=s,this.timelines=o,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=wg,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=a||new vg(this._driver,e,0),o.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let r=this.options;null!=n.duration&&(r.duration=Lm(n.duration)),null!=n.delay&&(r.delay=Lm(n.delay));const i=n.params;if(i){let t=r.params;t||(t=this.options.params={}),Object.keys(i).forEach(n=>{e&&t.hasOwnProperty(n)||(t[n]=Wm(i[n],t,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(t=>{n[t]=e[t]})}}return t}createSubContext(t=null,e,n){const r=e||this.element,i=new bg(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return i.previousNode=this.previousNode,i.currentAnimateTimings=this.currentAnimateTimings,i.options=this._copyOptions(),i.updateOptions(t),i.currentQueryIndex=this.currentQueryIndex,i.currentQueryTotal=this.currentQueryTotal,i.parentContext=this,this.subContextCount++,i}transformIntoNewTimeline(t){return this.previousNode=wg,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const r={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},i=new xg(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(i),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,r,i,s){let o=[];if(r&&o.push(this.element),t.length>0){t=(t=t.replace(Ag,"."+this._enterClassName)).replace(mg,"."+this._leaveClassName);let e=this._driver.query(this.element,t,1!=n);0!==n&&(e=n<0?e.slice(e.length+n,e.length):e.slice(0,n)),o.push(...e)}return i||0!=o.length||s.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),o}}class vg{constructor(t,e,n,r){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new vg(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||"*",this._currentKeyframe[t]="*"}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,r){e&&(this._previousKeyframe.easing=e);const i=r&&r.params||{},s=function(t,e){const n={};let r;return t.forEach(t=>{"*"===t?(r=r||Object.keys(e),r.forEach(t=>{n[t]="*"})):zm(t,!1,n)}),n}(t,this._globalTimelineStyles);Object.keys(s).forEach(t=>{const e=Wm(s[t],i,n);this._pendingStyles[t]=e,this._localTimelineStyles.hasOwnProperty(t)||(this._backFill[t]=this._globalTimelineStyles.hasOwnProperty(t)?this._globalTimelineStyles[t]:"*"),this._updateStyle(t,e)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(e=>{this._currentKeyframe[e]=t[e]}),Object.keys(this._localTimelineStyles).forEach(t=>{this._currentKeyframe.hasOwnProperty(t)||(this._currentKeyframe[t]=this._localTimelineStyles[t])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const n=this._styleSummary[e],r=t._styleSummary[e];(!n||r.time>n.time)&&this._updateStyle(e,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((i,s)=>{const o=zm(i,!0);Object.keys(o).forEach(n=>{const r=o[n];"!"==r?t.add(n):"*"==r&&e.add(n)}),n||(o.offset=s/this.duration),r.push(o)});const i=t.size?Gm(t.values()):[],s=e.size?Gm(e.values()):[];if(n){const t=r[0],e=Pm(t);t.offset=0,e.offset=1,r=[t,e]}return pg(this.element,r,i,s,this.duration,this.startTime,this.easing,!1)}}class xg extends vg{constructor(t,e,n,r,i,s,o=!1){super(t,e,s.delay),this.element=e,this.keyframes=n,this.preStyleProps=r,this.postStyleProps=i,this._stretchStartingKeyframe=o,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const i=[],s=n+e,o=e/s,a=zm(t[0],!1);a.offset=0,i.push(a);const l=zm(t[0],!1);l.offset=_g(o),i.push(l);const u=t.length-1;for(let r=1;r<=u;r++){let o=zm(t[r],!1);o.offset=_g((e+o.offset*n)/s),i.push(o)}n=s,e=0,r="",t=i}return pg(this.element,t,this.preStyleProps,this.postStyleProps,n,e,r,!0)}}function _g(t,e=3){const n=Math.pow(10,e-1);return Math.round(t*n)/n}class Cg{}class Sg extends Cg{normalizePropertyName(t,e){return Ym(t)}normalizeStyleValue(t,e,n,r){let i="";const s=n.toString().trim();if(Eg[e]&&0!==n&&"0"!==n)if("number"==typeof n)i="px";else{const e=n.match(/^[+-]?[\d\.]+([a-z]*)$/);e&&0==e[1].length&&r.push(`Please provide a CSS unit value for ${t}:${n}`)}return s+i}}const Eg=(()=>function(t){const e={};return t.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function Bg(t,e,n,r,i,s,o,a,l,u,c,h,d){return{type:0,element:t,triggerName:e,isRemovalTransition:i,fromState:n,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:l,preStyleProps:u,postStyleProps:c,totalTime:h,errors:d}}const kg={};class Ng{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,r){return function(t,e,n,r,i){return t.some(t=>t(e,n,r,i))}(this.ast.matchers,t,e,n,r)}buildStyles(t,e,n){const r=this._stateStyles["*"],i=this._stateStyles[t],s=r?r.buildStyles(e,n):{};return i?i.buildStyles(e,n):s}build(t,e,n,r,i,s,o,a,l,u){const c=[],h=this.ast.options&&this.ast.options.params||kg,d=this.buildStyles(n,o&&o.params||kg,c),p=a&&a.params||kg,f=this.buildStyles(r,p,c),A=new Set,m=new Map,g=new Map,y="void"===r,w={params:Object.assign(Object.assign({},h),p)},b=u?[]:gg(t,e,this.ast.animation,i,s,d,f,w,l,c);let v=0;if(b.forEach(t=>{v=Math.max(t.duration+t.delay,v)}),c.length)return Bg(e,this._triggerName,n,r,y,d,f,[],[],m,g,v,c);b.forEach(t=>{const n=t.element,r=vm(m,n,{});t.preStyleProps.forEach(t=>r[t]=!0);const i=vm(g,n,{});t.postStyleProps.forEach(t=>i[t]=!0),n!==e&&A.add(n)});const x=Gm(A.values());return Bg(e,this._triggerName,n,r,y,d,f,b,x,m,g,v)}}class Ig{constructor(t,e){this.styles=t,this.defaultParams=e}buildStyles(t,e){const n={},r=Pm(this.defaultParams);return Object.keys(t).forEach(e=>{const n=t[e];null!=n&&(r[e]=n)}),this.styles.styles.forEach(t=>{if("string"!=typeof t){const i=t;Object.keys(i).forEach(t=>{let s=i[t];s.length>1&&(s=Wm(s,r,e)),n[t]=s})}}),n}}class Fg{constructor(t,e){this.name=t,this.ast=e,this.transitionFactories=[],this.states={},e.states.forEach(t=>{this.states[t.name]=new Ig(t.style,t.options&&t.options.params||{})}),Tg(this.states,"true","1"),Tg(this.states,"false","0"),e.transitions.forEach(e=>{this.transitionFactories.push(new Ng(t,e,this.states))}),this.fallbackTransition=new Ng(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[(t,e)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,r){return this.transitionFactories.find(i=>i.match(t,e,n,r))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function Tg(t,e,n){t.hasOwnProperty(e)?t.hasOwnProperty(n)||(t[n]=t[e]):t.hasOwnProperty(n)&&(t[e]=t[n])}const Rg=new fg;class Og{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(t,e){const n=[],r=ag(this._driver,e,n);if(n.length)throw new Error("Unable to build the animation due to the following errors: "+n.join("\n"));this._animations[t]=r}_buildPlayer(t,e,n){const r=t.element,i=gm(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(r,i,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){const r=[],i=this._animations[t];let s;const o=new Map;if(i?(s=gg(this._driver,e,i,"ng-enter","ng-leave",{},{},n,Rg,r),s.forEach(t=>{const e=vm(o,t.element,{});t.postStyleProps.forEach(t=>e[t]=null)})):(r.push("The requested animation doesn't exist or has already been destroyed"),s=[]),r.length)throw new Error("Unable to create the animation due to the following errors: "+r.join("\n"));o.forEach((t,e)=>{Object.keys(t).forEach(n=>{t[n]=this._driver.computeStyle(e,n,"*")})});const a=mm(s.map(t=>{const e=o.get(t.element);return this._buildPlayer(t,{},e)}));return this._playersById[t]=a,a.onDestroy(()=>this.destroy(t)),this.players.push(a),a}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error("Unable to find the timeline player referenced by "+t);return e}listen(t,e,n,r){const i=bm(e,"","","");return ym(this._getPlayer(t),n,i,r),()=>{}}command(t,e,n,r){if("register"==n)return void this.register(t,r[0]);if("create"==n)return void this.create(t,e,r[0]||{});const i=this._getPlayer(t);switch(n){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const Dg=[],Lg={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Mg={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0};class Ug{constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=null!=(r=n?t.value:t)?r:null,n){const e=Pm(t);delete e.value,this.options=e}else this.options={};var r;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const t=this.options.params;Object.keys(e).forEach(n=>{null==t[n]&&(t[n]=e[n])})}}}const Pg=new Ug("void");class zg{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Kg(e,this._hostClassName)}listen(t,e,n,r){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${e}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if("start"!=(i=n)&&"done"!=i)throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${e}" is not supported!`);var i;const s=vm(this._elementListeners,t,[]),o={name:e,phase:n,callback:r};s.push(o);const a=vm(this._engine.statesByElement,t,{});return a.hasOwnProperty(e)||(Kg(t,"ng-trigger"),Kg(t,"ng-trigger-"+e),a[e]=Pg),()=>{this._engine.afterFlush(()=>{const t=s.indexOf(o);t>=0&&s.splice(t,1),this._triggers[e]||delete a[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,n,r=!0){const i=this._getTrigger(e),s=new Hg(this.id,e,t);let o=this._engine.statesByElement.get(t);o||(Kg(t,"ng-trigger"),Kg(t,"ng-trigger-"+e),this._engine.statesByElement.set(t,o={}));let a=o[e];const l=new Ug(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&a&&l.absorbOptions(a.options),o[e]=l,a||(a=Pg),"void"!==l.value&&a.value===l.value){if(!function(t,e){const n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(let i=0;i<n.length;i++){const r=n[i];if(!e.hasOwnProperty(r)||t[r]!==e[r])return!1}return!0}(a.params,l.params)){const e=[],n=i.matchStyles(a.value,a.params,e),r=i.matchStyles(l.value,l.params,e);e.length?this._engine.reportError(e):this._engine.afterFlush(()=>{Vm(t,n),$m(t,r)})}return}const u=vm(this._engine.playersByElement,t,[]);u.forEach(t=>{t.namespaceId==this.id&&t.triggerName==e&&t.queued&&t.destroy()});let c=i.matchTransition(a.value,l.value,t,l.params),h=!1;if(!c){if(!r)return;c=i.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:c,fromState:a,toState:l,player:s,isFallbackTransition:h}),h||(Kg(t,"ng-animate-queued"),s.onStart(()=>{Wg(t,"ng-animate-queued")})),s.onDone(()=>{let e=this.players.indexOf(s);e>=0&&this.players.splice(e,1);const n=this._engine.playersByElement.get(t);if(n){let t=n.indexOf(s);t>=0&&n.splice(t,1)}}),this.players.push(s),u.push(s),s}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,n)=>{delete e[t]}),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(e=>e.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(t=>t.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const n=this._engine.driver.query(t,".ng-trigger",!0);n.forEach(t=>{if(t.__ng_removed)return;const n=this._engine.fetchNamespacesByElement(t);n.size?n.forEach(n=>n.triggerLeaveAnimation(t,e,!1,!0)):this.clearElementCache(t)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(t=>this.clearElementCache(t)))}triggerLeaveAnimation(t,e,n,r){const i=this._engine.statesByElement.get(t);if(i){const s=[];if(Object.keys(i).forEach(e=>{if(this._triggers[e]){const n=this.trigger(t,e,"void",r);n&&s.push(n)}}),s.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),n&&mm(s).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t);if(e){const n=new Set;e.forEach(e=>{const r=e.name;if(n.has(r))return;n.add(r);const i=this._triggers[r].fallbackTransition,s=this._engine.statesByElement.get(t)[r]||Pg,o=new Ug("void"),a=new Hg(this.id,r,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:r,transition:i,fromState:s,toState:o,player:a,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(n.totalAnimations){const e=n.players.length?n.playersByQueriedElement.get(t):[];if(e&&e.length)r=!0;else{let e=t;for(;e=e.parentNode;)if(n.statesByElement.get(e)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)n.markElementAsRemoved(this.id,t,!1,e);else{const r=t.__ng_removed;r&&r!==Lg||(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}}insertNode(t,e){Kg(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const i=n.element,s=this._elementListeners.get(i);s&&s.forEach(e=>{if(e.name==n.triggerName){const r=bm(i,n.triggerName,n.fromState.value,n.toState.value);r._data=t,ym(n.player,e.phase,r,e.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(n)}),this._queue=[],e.sort((t,e)=>{const n=t.transition.ast.depCount,r=e.transition.ast.depCount;return 0==n||0==r?n-r:this._engine.driver.containsElement(t.element,e.element)?1:-1})}destroy(t){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(e=>e.element===t)||e,e}}class Qg{constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(t,e)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(e=>{e.queued&&t.push(e)})}),t}createNamespace(t,e){const n=new zg(t,e,this);return e.parentNode?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList.length-1;if(n>=0){let r=!1;for(let i=n;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,e)){this._namespaceList.splice(i+1,0,t),r=!0;break}r||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++}destroy(t,e){if(!t)return;const n=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[t];const e=this._namespaceList.indexOf(n);e>=0&&this._namespaceList.splice(e,1)}),this.afterFlushAnimationsDone(()=>n.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n){const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=n[t[r]].namespaceId;if(i){const t=this._fetchNamespace(i);t&&e.add(t)}}}return e}trigger(t,e,n,r){if($g(e)){const i=this._fetchNamespace(t);if(i)return i.trigger(e,n,r),!0}return!1}insertNode(t,e,n,r){if(!$g(e))return;const i=e.__ng_removed;if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;const t=this.collectedLeaveElements.indexOf(e);t>=0&&this.collectedLeaveElements.splice(t,1)}if(t){const r=this._fetchNamespace(t);r&&r.insertNode(e,n)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Kg(t,"ng-animate-disabled")):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),Wg(t,"ng-animate-disabled"))}removeNode(t,e,n,r){if($g(e)){const i=t?this._fetchNamespace(t):null;if(i?i.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),n){const n=this.namespacesByHostElement.get(e);n&&n.id!==t&&n.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,n,r){this.collectedLeaveElements.push(e),e.__ng_removed={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}}listen(t,e,n,r,i){return $g(e)?this._fetchNamespace(t).listen(e,n,r,i):()=>{}}_buildInstruction(t,e,n,r,i){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e,i)}destroyInnerAnimations(t){let e=this.driver.query(t,".ng-trigger",!0);e.forEach(t=>this.destroyActiveAnimationsForElement(t)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,".ng-animating",!0),e.forEach(t=>this.finishActiveQueriedAnimationOnElement(t)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(t=>{t.queued?t.markedForDestroy=!0:t.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(t=>t.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return mm(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t.__ng_removed;if(e&&e.setForRemoval){if(t.__ng_removed=Lg,e.namespaceId){this.destroyInnerAnimations(t);const n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}this.driver.matchesElement(t,".ng-animate-disabled")&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(t=>{this.markElementAsDisabled(t,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((t,e)=>this._balanceNamespaceList(t,e)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)Kg(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let t=0;t<n.length;t++)n[t]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(t=>t()),this._flushFns=[],this._whenQuietFns.length){const t=this._whenQuietFns;this._whenQuietFns=[],e.length?mm(e).onDone(()=>{t.forEach(t=>t())}):t.forEach(t=>t())}}reportError(t){throw new Error("Unable to process animations due to the following failed trigger transitions\n "+t.join("\n"))}_flushAnimations(t,e){const n=new fg,r=[],i=new Map,s=[],o=new Map,a=new Map,l=new Map,u=new Set;this.disabledNodes.forEach(t=>{u.add(t);const e=this.driver.query(t,".ng-animate-queued",!0);for(let n=0;n<e.length;n++)u.add(e[n])});const c=this.bodyNode,h=Array.from(this.statesByElement.keys()),d=jg(h,this.collectedEnterElements),p=new Map;let f=0;d.forEach((t,e)=>{const n="ng-enter"+f++;p.set(e,n),t.forEach(t=>Kg(t,n))});const A=[],m=new Set,g=new Set;for(let I=0;I<this.collectedLeaveElements.length;I++){const t=this.collectedLeaveElements[I],e=t.__ng_removed;e&&e.setForRemoval&&(A.push(t),m.add(t),e.hasAnimation?this.driver.query(t,".ng-star-inserted",!0).forEach(t=>m.add(t)):g.add(t))}const y=new Map,w=jg(h,Array.from(m));w.forEach((t,e)=>{const n="ng-leave"+f++;y.set(e,n),t.forEach(t=>Kg(t,n))}),t.push(()=>{d.forEach((t,e)=>{const n=p.get(e);t.forEach(t=>Wg(t,n))}),w.forEach((t,e)=>{const n=y.get(e);t.forEach(t=>Wg(t,n))}),A.forEach(t=>{this.processLeaveNode(t)})});const b=[],v=[];for(let I=this._namespaceList.length-1;I>=0;I--)this._namespaceList[I].drainQueuedTransitions(e).forEach(t=>{const e=t.player,i=t.element;if(b.push(e),this.collectedEnterElements.length){const t=i.__ng_removed;if(t&&t.setForMove)return void e.destroy()}const u=!c||!this.driver.containsElement(c,i),h=y.get(i),d=p.get(i),f=this._buildInstruction(t,n,d,h,u);if(f.errors&&f.errors.length)v.push(f);else{if(u)return e.onStart(()=>Vm(i,f.fromStyles)),e.onDestroy(()=>$m(i,f.toStyles)),void r.push(e);if(t.isFallbackTransition)return e.onStart(()=>Vm(i,f.fromStyles)),e.onDestroy(()=>$m(i,f.toStyles)),void r.push(e);f.timelines.forEach(t=>t.stretchStartingKeyframe=!0),n.append(i,f.timelines),s.push({instruction:f,player:e,element:i}),f.queriedElements.forEach(t=>vm(o,t,[]).push(e)),f.preStyleProps.forEach((t,e)=>{const n=Object.keys(t);if(n.length){let t=a.get(e);t||a.set(e,t=new Set),n.forEach(e=>t.add(e))}}),f.postStyleProps.forEach((t,e)=>{const n=Object.keys(t);let r=l.get(e);r||l.set(e,r=new Set),n.forEach(t=>r.add(t))})}});if(v.length){const t=[];v.forEach(e=>{t.push(`@${e.triggerName} has failed due to:\n`),e.errors.forEach(e=>t.push(`- ${e}\n`))}),b.forEach(t=>t.destroy()),this.reportError(t)}const x=new Map,_=new Map;s.forEach(t=>{const e=t.element;n.has(e)&&(_.set(e,e),this._beforeAnimationBuild(t.player.namespaceId,t.instruction,x))}),r.forEach(t=>{const e=t.element;this._getPreviousPlayers(e,!1,t.namespaceId,t.triggerName,null).forEach(t=>{vm(x,e,[]).push(t),t.destroy()})});const C=A.filter(t=>Xg(t,a,l)),S=new Map;qg(S,this.driver,g,l,"*").forEach(t=>{Xg(t,a,l)&&C.push(t)});const E=new Map;d.forEach((t,e)=>{qg(E,this.driver,new Set(t),a,"!")}),C.forEach(t=>{const e=S.get(t),n=E.get(t);S.set(t,Object.assign(Object.assign({},e),n))});const B=[],k=[],N={};s.forEach(t=>{const{element:e,player:s,instruction:o}=t;if(n.has(e)){if(u.has(e))return s.onDestroy(()=>$m(e,o.toStyles)),s.disabled=!0,s.overrideTotalTime(o.totalTime),void r.push(s);let t=N;if(_.size>1){let n=e;const r=[];for(;n=n.parentNode;){const e=_.get(n);if(e){t=e;break}r.push(n)}r.forEach(e=>_.set(e,t))}const n=this._buildAnimation(s.namespaceId,o,x,i,E,S);if(s.setRealPlayer(n),t===N)B.push(s);else{const e=this.playersByElement.get(t);e&&e.length&&(s.parentPlayer=mm(e)),r.push(s)}}else Vm(e,o.fromStyles),s.onDestroy(()=>$m(e,o.toStyles)),k.push(s),u.has(e)&&r.push(s)}),k.forEach(t=>{const e=i.get(t.element);if(e&&e.length){const n=mm(e);t.setRealPlayer(n)}}),r.forEach(t=>{t.parentPlayer?t.syncPlayerEvents(t.parentPlayer):t.destroy()});for(let I=0;I<A.length;I++){const t=A[I],e=t.__ng_removed;if(Wg(t,"ng-leave"),e&&e.hasAnimation)continue;let n=[];if(o.size){let e=o.get(t);e&&e.length&&n.push(...e);let r=this.driver.query(t,".ng-animating",!0);for(let t=0;t<r.length;t++){let e=o.get(r[t]);e&&e.length&&n.push(...e)}}const r=n.filter(t=>!t.destroyed);r.length?Gg(this,t,r):this.processLeaveNode(t)}return A.length=0,B.forEach(t=>{this.players.push(t),t.onDone(()=>{t.destroy();const e=this.players.indexOf(t);this.players.splice(e,1)}),t.play()}),B}elementContainsData(t,e){let n=!1;const r=e.__ng_removed;return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,r,i){let s=[];if(e){const e=this.playersByQueriedElement.get(t);e&&(s=e)}else{const e=this.playersByElement.get(t);if(e){const t=!i||"void"==i;e.forEach(e=>{e.queued||(t||e.triggerName==r)&&s.push(e)})}}return(n||r)&&(s=s.filter(t=>!(n&&n!=t.namespaceId||r&&r!=t.triggerName))),s}_beforeAnimationBuild(t,e,n){const r=e.element,i=e.isRemovalTransition?void 0:t,s=e.isRemovalTransition?void 0:e.triggerName;for(const o of e.timelines){const t=o.element,a=t!==r,l=vm(n,t,[]);this._getPreviousPlayers(t,a,i,s,e.toState).forEach(t=>{const e=t.getRealPlayer();e.beforeDestroy&&e.beforeDestroy(),t.destroy(),l.push(t)})}Vm(r,e.fromStyles)}_buildAnimation(t,e,n,r,i,s){const o=e.triggerName,a=e.element,l=[],u=new Set,c=new Set,h=e.timelines.map(e=>{const h=e.element;u.add(h);const d=h.__ng_removed;if(d&&d.removedBeforeQueried)return new pm(e.duration,e.delay);const p=h!==a,f=function(t){const e=[];return function t(e,n){for(let r=0;r<e.length;r++){const i=e[r];i instanceof fm?t(i.players,n):n.push(i)}}(t,e),e}((n.get(h)||Dg).map(t=>t.getRealPlayer())).filter(t=>!!t.element&&t.element===h),A=i.get(h),m=s.get(h),g=gm(0,this._normalizer,0,e.keyframes,A,m),y=this._buildPlayer(e,g,f);if(e.subTimeline&&r&&c.add(h),p){const e=new Hg(t,o,h);e.setRealPlayer(y),l.push(e)}return y});l.forEach(t=>{vm(this.playersByQueriedElement,t.element,[]).push(t),t.onDone(()=>function(t,e,n){let r;if(t instanceof Map){if(r=t.get(e),r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&t.delete(e)}}else if(r=t[e],r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&delete t[e]}return r}(this.playersByQueriedElement,t.element,t))}),u.forEach(t=>Kg(t,"ng-animating"));const d=mm(h);return d.onDestroy(()=>{u.forEach(t=>Wg(t,"ng-animating")),$m(a,e.toStyles)}),c.forEach(t=>{vm(r,t,[]).push(d)}),d}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new pm(t.duration,t.delay)}}class Hg{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new pm,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(n=>ym(t,e,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){vm(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function $g(t){return t&&1===t.nodeType}function Vg(t,e){const n=t.style.display;return t.style.display=null!=e?e:"none",n}function qg(t,e,n,r,i){const s=[];n.forEach(t=>s.push(Vg(t)));const o=[];r.forEach((n,r)=>{const s={};n.forEach(t=>{const n=s[t]=e.computeStyle(r,t,i);n&&0!=n.length||(r.__ng_removed=Mg,o.push(r))}),t.set(r,s)});let a=0;return n.forEach(t=>Vg(t,s[a++])),o}function jg(t,e){const n=new Map;if(t.forEach(t=>n.set(t,[])),0==e.length)return n;const r=new Set(e),i=new Map;return e.forEach(t=>{const e=function t(e){if(!e)return 1;let s=i.get(e);if(s)return s;const o=e.parentNode;return s=n.has(o)?o:r.has(o)?1:t(o),i.set(e,s),s}(t);1!==e&&n.get(e).push(t)}),n}function Kg(t,e){if(t.classList)t.classList.add(e);else{let n=t.$$classes;n||(n=t.$$classes={}),n[e]=!0}}function Wg(t,e){if(t.classList)t.classList.remove(e);else{let n=t.$$classes;n&&delete n[e]}}function Gg(t,e,n){mm(n).onDone(()=>t.processLeaveNode(e))}function Xg(t,e,n){const r=n.get(t);if(!r)return!1;let i=e.get(t);return i?r.forEach(t=>i.add(t)):e.set(t,r),n.delete(t),!0}class Yg{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._triggerCache={},this.onRemovalComplete=(t,e)=>{},this._transitionEngine=new Qg(t,e,n),this._timelineEngine=new Og(t,e,n),this._transitionEngine.onRemovalComplete=(t,e)=>this.onRemovalComplete(t,e)}registerTrigger(t,e,n,r,i){const s=t+"-"+r;let o=this._triggerCache[s];if(!o){const t=[],e=ag(this._driver,i,t);if(t.length)throw new Error(`The animation trigger "${r}" has failed to build due to the following errors:\n - ${t.join("\n - ")}`);o=function(t,e){return new Fg(t,e)}(r,e),this._triggerCache[s]=o}this._transitionEngine.registerTrigger(e,r,o)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)}onRemove(t,e,n,r){this._transitionEngine.removeNode(t,e,r||!1,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,r){if("@"==n.charAt(0)){const[t,i]=xm(n);this._timelineEngine.command(t,e,i,r)}else this._transitionEngine.trigger(t,e,n,r)}listen(t,e,n,r,i){if("@"==n.charAt(0)){const[t,r]=xm(n);return this._timelineEngine.listen(t,e,r,i)}return this._transitionEngine.listen(t,e,n,r,i)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function Jg(t,e){let n=null,r=null;return Array.isArray(e)&&e.length?(n=ty(e[0]),e.length>1&&(r=ty(e[e.length-1]))):e&&(n=ty(e)),n||r?new Zg(t,n,r):null}let Zg=(()=>{class t{constructor(e,n,r){this._element=e,this._startStyles=n,this._endStyles=r,this._state=0;let i=t.initialStylesByElement.get(e);i||t.initialStylesByElement.set(e,i={}),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&$m(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&($m(this._element,this._initialStyles),this._endStyles&&($m(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&(Vm(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Vm(this._element,this._endStyles),this._endStyles=null),$m(this._element,this._initialStyles),this._state=3)}}return t.initialStylesByElement=new WeakMap,t})();function ty(t){let e=null;const n=Object.keys(t);for(let r=0;r<n.length;r++){const i=n[r];ey(i)&&(e=e||{},e[i]=t[i])}return e}function ey(t){return"display"===t||"position"===t}class ny{constructor(t,e,n,r,i,s,o){this._element=t,this._name=e,this._duration=n,this._delay=r,this._easing=i,this._fillMode=s,this._onDoneFn=o,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=t=>this._handleCallback(t)}apply(){!function(t,e){const n=ly(t,"").trim();n.length&&(function(t,e){let n=0;for(let r=0;r<t.length;r++)","===t.charAt(r)&&n++}(n),e=`${n}, ${e}`),ay(t,"",e)}(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),oy(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){ry(this._element,this._name,"paused")}resume(){ry(this._element,this._name,"running")}setPosition(t){const e=iy(this._element,this._name);this._position=t*this._duration,ay(this._element,"Delay",`-${this._position}ms`,e)}getPosition(){return this._position}_handleCallback(t){const e=t._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),oy(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(t,e){const n=ly(t,"").split(","),r=sy(n,e);r>=0&&(n.splice(r,1),ay(t,"",n.join(",")))}(this._element,this._name))}}function ry(t,e,n){ay(t,"PlayState",n,iy(t,e))}function iy(t,e){const n=ly(t,"");return n.indexOf(",")>0?sy(n.split(","),e):sy([n],e)}function sy(t,e){for(let n=0;n<t.length;n++)if(t[n].indexOf(e)>=0)return n;return-1}function oy(t,e,n){n?t.removeEventListener("animationend",e):t.addEventListener("animationend",e)}function ay(t,e,n,r){const i="animation"+e;if(null!=r){const e=t.style[i];if(e.length){const t=e.split(",");t[r]=n,n=t.join(",")}}t.style[i]=n}function ly(t,e){return t.style["animation"+e]}class uy{constructor(t,e,n,r,i,s,o,a){this.element=t,this.keyframes=e,this.animationName=n,this._duration=r,this._delay=i,this._finalStyles=o,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this.currentSnapshot={},this._state=0,this.easing=s||"linear",this.totalTime=r+i,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new ny(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const e=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(t[n]=e?this._finalStyles[n]:eg(this.element,n))})}this.currentSnapshot=t}}class cy extends pm{constructor(t,e){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=Rm(e)}init(){!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){this._startingStyles&&(Object.keys(this._startingStyles).forEach(t=>{const e=this._startingStyles[t];e?this.element.style.setProperty(t,e):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}class hy{constructor(){this._count=0,this._head=document.querySelector("head"),this._warningIssued=!1}validateStyleProperty(t){return Nm(t)}matchesElement(t,e){return Im(t,e)}containsElement(t,e){return Fm(t,e)}query(t,e,n){return Tm(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}buildKeyframeElement(t,e,n){n=n.map(t=>Rm(t));let r=`@keyframes ${e} {\n`,i="";n.forEach(t=>{i=" ";const e=parseFloat(t.offset);r+=`${i}${100*e}% {\n`,i+=" ",Object.keys(t).forEach(e=>{const n=t[e];switch(e){case"offset":return;case"easing":return void(n&&(r+=`${i}animation-timing-function: ${n};\n`));default:return void(r+=`${i}${e}: ${n};\n`)}}),r+=i+"}\n"}),r+="}\n";const s=document.createElement("style");return s.innerHTML=r,s}animate(t,e,n,r,i,s=[],o){o&&this._notifyFaultyScrubber();const a=s.filter(t=>t instanceof uy),l={};Jm(n,r)&&a.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>l[t]=e[t])});const u=function(t){let e={};return t&&(Array.isArray(t)?t:[t]).forEach(t=>{Object.keys(t).forEach(n=>{"offset"!=n&&"easing"!=n&&(e[n]=t[n])})}),e}(e=Zm(t,e,l));if(0==n)return new cy(t,u);const c="gen_css_kf_"+this._count++,h=this.buildKeyframeElement(t,c,e);document.querySelector("head").appendChild(h);const d=Jg(t,e),p=new uy(t,e,c,n,r,i,u,d);return p.onDestroy(()=>{var t;(t=h).parentNode.removeChild(t)}),p}_notifyFaultyScrubber(){this._warningIssued||(console.warn("@angular/animations: please load the web-animations.js polyfill to allow programmatic access...\n","  visit http://bit.ly/IWukam to learn more about using the web-animation-js polyfill."),this._warningIssued=!0)}}class dy{constructor(t,e,n,r){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,n){return t.animate(e,n)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(e=>{"offset"!=e&&(t[e]=this._finished?this._finalKeyframe[e]:eg(this.element,e))}),this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class py{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(fy().toString()),this._cssKeyframesDriver=new hy}validateStyleProperty(t){return Nm(t)}matchesElement(t,e){return Im(t,e)}containsElement(t,e){return Fm(t,e)}query(t,e,n){return Tm(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,e,n,r,i,s=[],o){if(!o&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,n,r,i,s);const a={duration:n,delay:r,fill:0==r?"both":"forwards"};i&&(a.easing=i);const l={},u=s.filter(t=>t instanceof dy);Jm(n,r)&&u.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>l[t]=e[t])});const c=Jg(t,e=Zm(t,e=e.map(t=>zm(t,!1)),l));return new dy(t,e,a,c)}}function fy(){return"undefined"!=typeof window&&void 0!==window.document&&Element.prototype.animate||{}}let Ay=(()=>{class t extends rm{constructor(t,e){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(e.body,{id:"0",encapsulation:le.None,styles:[],data:{animation:[]}})}build(t){const e=this._nextAnimationId.toString();this._nextAnimationId++;const n=Array.isArray(t)?om(t):t;return yy(this._renderer,null,e,"register",[n]),new my(e,this._renderer)}}return t.\u0275fac=function(e){return new(e||t)(Kt(Ea),Kt(Qu))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();class my extends class{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new gy(this._id,t,e||{},this._renderer)}}class gy{constructor(t,e,n,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return yy(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset")}setPosition(t){this._command("setPosition",t)}getPosition(){return 0}}function yy(t,e,n,r,i){return t.setProperty(e,`@@${n}:${r}`,i)}let wy=(()=>{class t{constructor(t,e,n){this.delegate=t,this.engine=e,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),e.onRemovalComplete=(t,e)=>{e&&e.parentNode(t)&&e.removeChild(t.parentNode,t)}}createRenderer(t,e){const n=this.delegate.createRenderer(t,e);if(!(t&&e&&e.data&&e.data.animation)){let t=this._rendererCache.get(n);return t||(t=new by("",n,this.engine),this._rendererCache.set(n,t)),t}const r=e.id,i=e.id+"-"+this._currentId;this._currentId++,this.engine.register(i,t);const s=e=>{Array.isArray(e)?e.forEach(s):this.engine.registerTrigger(r,i,t,e.name,e)};return e.data.animation.forEach(s),new vy(this,i,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,n){t>=0&&t<this._microtaskId?this._zone.run(()=>e(n)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(t=>{const[e,n]=t;e(n)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([e,n]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return t.\u0275fac=function(e){return new(e||t)(Kt(Ea),Kt(Yg),Kt(cu))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();class by{constructor(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?t=>e.destroyNode(t):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,!0)}removeChild(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,r){this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){"@"==e.charAt(0)&&"@.disabled"==e?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class vy extends by{constructor(t,e,n,r){super(e,n,r),this.factory=t,this.namespaceId=e}setProperty(t,e,n){"@"==e.charAt(0)?"."==e.charAt(1)&&"@.disabled"==e?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if("@"==e.charAt(0)){const r=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(t);let i=e.substr(1),s="";return"@"!=i.charAt(0)&&([i,s]=function(t){const e=t.indexOf(".");return[t.substring(0,e),t.substr(e+1)]}(i)),this.engine.listen(this.namespaceId,r,i,s,t=>{this.factory.scheduleListenerCallback(t._data||-1,n,t)})}return this.delegate.listen(t,e,n)}}let xy=(()=>{class t extends Yg{constructor(t,e,n){super(t.body,e,n)}}return t.\u0275fac=function(e){return new(e||t)(Kt(Qu),Kt(Dm),Kt(Cg))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();const _y=new Mt("AnimationModuleType"),Cy=[{provide:Dm,useFactory:function(){return"function"==typeof fy()?new py:new hy}},{provide:_y,useValue:"BrowserAnimations"},{provide:rm,useClass:Ay},{provide:Cg,useFactory:function(){return new Sg}},{provide:Yg,useClass:xy},{provide:Ea,useFactory:function(t,e,n){return new wy(t,e,n)},deps:[dh,Yg,cu]}];let Sy=(()=>{class t{}return t.\u0275mod=me({type:t}),t.\u0275inj=ct({factory:function(e){return new(e||t)},providers:Cy,imports:[Eh]}),t})();function Ey(t,e){if(1&t&&Co(0,"mat-pseudo-checkbox",3),2&t){const t=Oo();bo("state",t.selected?"checked":"unchecked")("disabled",t.disabled)}}const By=["*"],ky=new Fa("10.1.2"),Ny=new Mt("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let Iy,Fy=(()=>{class t{constructor(t,e,n){this._hasDoneGlobalChecks=!1,this._document=n,t._applyBodyHighContrastModeCssClasses(),this._sanityChecks=e,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_getDocument(){const t=this._document||document;return"object"==typeof t&&t?t:null}_getWindow(){const t=this._getDocument(),e=(null==t?void 0:t.defaultView)||window;return"object"==typeof e&&e?e:null}_checksAreEnabled(){return Sr()&&!this._isTestEnv()}_isTestEnv(){const t=this._getWindow();return t&&(t.__karma__||t.jasmine)}_checkDoctypeIsDefined(){const t=this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.doctype),e=this._getDocument();t&&e&&!e.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){const t=!this._checksAreEnabled()||!1===this._sanityChecks||!this._sanityChecks.theme,e=this._getDocument();if(t||!e||!e.body||"function"!=typeof getComputedStyle)return;const n=e.createElement("div");n.classList.add("mat-theme-loaded-marker"),e.body.appendChild(n);const r=getComputedStyle(n);r&&"none"!==r.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),e.body.removeChild(n)}_checkCdkVersionMatch(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.version)&&ky.full!==nm.full&&console.warn("The Angular Material version ("+ky.full+") does not match the Angular CDK version ("+nm.full+").\nPlease ensure the versions of these two packages exactly match.")}}return t.\u0275mod=me({type:t}),t.\u0275inj=ct({factory:function(e){return new(e||t)(Kt(JA),Kt(Ny,8),Kt(Qu,8))},imports:[[em],em]}),t})();function Ty(t){return class extends t{constructor(...t){super(...t),this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=OA(t)}}}function Ry(t,e){return class extends t{constructor(...t){super(...t),this.color=e}get color(){return this._color}set color(t){const n=t||e;n!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove("mat-"+this._color),n&&this._elementRef.nativeElement.classList.add("mat-"+n),this._color=n)}}}function Oy(t){return class extends t{constructor(...t){super(...t),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=OA(t)}}}function Dy(t,e=0){return class extends t{constructor(...t){super(...t),this._tabIndex=e}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?DA(t):e}}}function Ly(t){return class extends t{constructor(...t){super(...t),this.errorState=!1,this.stateChanges=new _}updateErrorState(){const t=this.errorState,e=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);e!==t&&(this.errorState=e,this.stateChanges.next())}}}try{Iy="undefined"!=typeof Intl}catch(xE){Iy=!1}let My=(()=>{class t{isErrorState(t,e){return!!(t&&t.invalid&&(t.touched||e&&e.submitted))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({factory:function(){return new t},token:t,providedIn:"root"}),t})();class Uy{constructor(t,e,n){this._renderer=t,this.element=e,this.config=n,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const Py={enterDuration:450,exitDuration:400},zy=_A({passive:!0}),Qy=["mousedown","touchstart"],Hy=["mouseup","mouseleave","touchend","touchcancel"];class $y{constructor(t,e,n,r){this._target=t,this._ngZone=e,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=UA(n))}fadeInRipple(t,e,n={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),i=Object.assign(Object.assign({},Py),n.animation);n.centered&&(t=r.left+r.width/2,e=r.top+r.height/2);const s=n.radius||function(t,e,n){const r=Math.max(Math.abs(t-n.left),Math.abs(t-n.right)),i=Math.max(Math.abs(e-n.top),Math.abs(e-n.bottom));return Math.sqrt(r*r+i*i)}(t,e,r),o=t-r.left,a=e-r.top,l=i.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=o-s+"px",u.style.top=a-s+"px",u.style.height=2*s+"px",u.style.width=2*s+"px",null!=n.color&&(u.style.backgroundColor=n.color),u.style.transitionDuration=l+"ms",this._containerElement.appendChild(u),window.getComputedStyle(u).getPropertyValue("opacity"),u.style.transform="scale(1)";const c=new Uy(this,u,n);return c.state=0,this._activeRipples.add(c),n.persistent||(this._mostRecentTransientRipple=c),this._runTimeoutOutsideZone(()=>{const t=c===this._mostRecentTransientRipple;c.state=1,n.persistent||t&&this._isPointerDown||c.fadeOut()},l),c}fadeOutRipple(t){const e=this._activeRipples.delete(t);if(t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!e)return;const n=t.element,r=Object.assign(Object.assign({},Py),t.config.animation);n.style.transitionDuration=r.exitDuration+"ms",n.style.opacity="0",t.state=2,this._runTimeoutOutsideZone(()=>{t.state=3,n.parentNode.removeChild(n)},r.exitDuration)}fadeOutAll(){this._activeRipples.forEach(t=>t.fadeOut())}setupTriggerEvents(t){const e=UA(t);e&&e!==this._triggerElement&&(this._removeTriggerEvents(),this._triggerElement=e,this._registerEvents(Qy))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(Hy),this._pointerUpEventsRegistered=!0)}_onMousedown(t){const e=KA(t),n=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;this._target.rippleDisabled||e||n||(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;for(let t=0;t<e.length;t++)this.fadeInRipple(e[t].clientX,e[t].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._activeRipples.forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_runTimeoutOutsideZone(t,e=0){this._ngZone.runOutsideAngular(()=>setTimeout(t,e))}_registerEvents(t){this._ngZone.runOutsideAngular(()=>{t.forEach(t=>{this._triggerElement.addEventListener(t,this,zy)})})}_removeTriggerEvents(){this._triggerElement&&(Qy.forEach(t=>{this._triggerElement.removeEventListener(t,this,zy)}),this._pointerUpEventsRegistered&&Hy.forEach(t=>{this._triggerElement.removeEventListener(t,this,zy)}))}}const Vy=new Mt("mat-ripple-global-options");let qy=(()=>{class t{constructor(t,e,n,r,i){this._elementRef=t,this._animationMode=i,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=r||{},this._rippleRenderer=new $y(this,e,t,n)}get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,e=0,n){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,e,Object.assign(Object.assign({},this.rippleConfig),n)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),t))}}return t.\u0275fac=function(e){return new(e||t)(yo(Ca),yo(cu),yo(gA),yo(Vy,8),yo(_y,8))},t.\u0275dir=ye({type:t,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,e){2&t&&jo("mat-ripple-unbounded",e.unbounded)},inputs:{radius:["matRippleRadius","radius"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"],color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],animation:["matRippleAnimation","animation"]},exportAs:["matRipple"]}),t})(),jy=(()=>{class t{}return t.\u0275mod=me({type:t}),t.\u0275inj=ct({factory:function(e){return new(e||t)},imports:[[Fy,yA],Fy]}),t})(),Ky=(()=>{class t{constructor(t){this._animationMode=t,this.state="unchecked",this.disabled=!1}}return t.\u0275fac=function(e){return new(e||t)(yo(_y,8))},t.\u0275cmp=de({type:t,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(t,e){2&t&&jo("mat-pseudo-checkbox-indeterminate","indeterminate"===e.state)("mat-pseudo-checkbox-checked","checked"===e.state)("mat-pseudo-checkbox-disabled",e.disabled)("_mat-animation-noopable","NoopAnimations"===e._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(t,e){},styles:['.mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:transparent}._mat-animation-noopable.mat-pseudo-checkbox{transition:none;animation:none}._mat-animation-noopable.mat-pseudo-checkbox::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}\n'],encapsulation:2,changeDetection:0}),t})(),Wy=(()=>{class t{}return t.\u0275mod=me({type:t}),t.\u0275inj=ct({factory:function(e){return new(e||t)}}),t})();class Gy{}const Xy=Ty(Gy);let Yy=0,Jy=(()=>{class t extends Xy{constructor(){super(...arguments),this._labelId="mat-optgroup-label-"+Yy++}}return t.\u0275fac=function(e){return Zy(e||t)},t.\u0275dir=ye({type:t,inputs:{label:"label"},features:[la]}),t})();const Zy=ur(Jy),tw=new Mt("MatOptgroup");let ew=0;class nw{constructor(t,e=!1){this.source=t,this.isUserInput=e}}const rw=new Mt("MAT_OPTION_PARENT_COMPONENT");let iw=(()=>{class t{constructor(t,e,n,r){this._element=t,this._changeDetectorRef=e,this._parent=n,this.group=r,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+ew++,this.onSelectionChange=new bl,this._stateChanges=new _}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(t){this._disabled=OA(t)}get disableRipple(){return this._parent&&this._parent.disableRipple}get active(){return this._active}get viewValue(){return(this._getHostElement().textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(t,e){const n=this._getHostElement();"function"==typeof n.focus&&n.focus(e)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(t){13!==t.keyCode&&32!==t.keyCode||CA(t)||(this._selectViaInteraction(),t.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const t=this.viewValue;t!==this._mostRecentViewValue&&(this._mostRecentViewValue=t,this._stateChanges.next())}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(t=!1){this.onSelectionChange.emit(new nw(this,t))}}return t.\u0275fac=function(e){return new(e||t)(yo(Ca),yo(zs),yo(void 0),yo(Jy))},t.\u0275dir=ye({type:t,inputs:{id:"id",disabled:"disabled",value:"value"},outputs:{onSelectionChange:"onSelectionChange"}}),t})(),sw=(()=>{class t extends iw{constructor(t,e,n,r){super(t,e,n,r)}}return t.\u0275fac=function(e){return new(e||t)(yo(Ca),yo(zs),yo(rw,8),yo(tw,8))},t.\u0275cmp=de({type:t,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-option","mat-focus-indicator"],hostVars:12,hostBindings:function(t,e){1&t&&Fo("click",(function(){return e._selectViaInteraction()}))("keydown",(function(t){return e._handleKeydown(t)})),2&t&&(oa("id",e.id),fo("tabindex",e._getTabIndex())("aria-selected",e._getAriaSelected())("aria-disabled",e.disabled.toString()),jo("mat-selected",e.selected)("mat-option-multiple",e.multiple)("mat-active",e.active)("mat-option-disabled",e.disabled))},exportAs:["matOption"],features:[la],ngContentSelectors:By,decls:4,vars:3,consts:[["class","mat-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mat-option-text"],["mat-ripple","",1,"mat-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-option-pseudo-checkbox",3,"state","disabled"]],template:function(t,e){1&t&&(Lo(),mo(0,Ey,1,2,"mat-pseudo-checkbox",0),xo(1,"span",1),Mo(2),_o(),Co(3,"div",2)),2&t&&(bo("ngIf",e.multiple),Ai(3),bo("matRippleTrigger",e._getHostElement())("matRippleDisabled",e.disabled||e.disableRipple))},directives:[Uc,qy,Ky],styles:[".mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative;cursor:pointer;outline:none;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center;-webkit-tap-highlight-color:transparent}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px;vertical-align:middle}.mat-option .mat-icon svg{vertical-align:top}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}.cdk-high-contrast-active .mat-option{margin:0 1px}.cdk-high-contrast-active .mat-option.mat-active{border:solid 1px currentColor;margin:0}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option .mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.cdk-high-contrast-active .mat-option .mat-option-ripple{opacity:.5}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}\n"],encapsulation:2,changeDetection:0}),t})();function ow(t,e,n){if(n.length){let r=e.toArray(),i=n.toArray(),s=0;for(let e=0;e<t+1;e++)r[e].group&&r[e].group===i[s]&&s++;return s}return 0}let aw=(()=>{class t{}return t.\u0275mod=me({type:t}),t.\u0275inj=ct({factory:function(e){return new(e||t)},imports:[[jy,Wc,Wy]]}),t})();const lw=new Mt("mat-label-global-options"),uw=["mat-button",""],cw=["*"],hw=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"];class dw{constructor(t){this._elementRef=t}}const pw=Ry(Ty(Oy(dw)));let fw=(()=>{class t extends pw{constructor(t,e,n){super(t),this._focusMonitor=e,this._animationMode=n,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const r of hw)this._hasHostAttributes(r)&&this._getHostElement().classList.add(r);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t="program",e){this._focusMonitor.focusVia(this._getHostElement(),t,e)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(t=>this._getHostElement().hasAttribute(t))}}return t.\u0275fac=function(e){return new(e||t)(yo(Ca),yo(XA),yo(_y,8))},t.\u0275cmp=de({type:t,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,e){var n;1&t&&Rl(qy,!0),2&t&&Fl(n=Ul())&&(e.ripple=n.first)},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,e){2&t&&(fo("disabled",e.disabled||null),jo("_mat-animation-noopable","NoopAnimations"===e._animationMode)("mat-button-disabled",e.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[la],attrs:uw,ngContentSelectors:cw,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,e){1&t&&(Lo(),xo(0,"span",0),Mo(1),_o(),Co(2,"div",1),Co(3,"div",2)),2&t&&(Ai(2),jo("mat-button-ripple-round",e.isRoundButton||e.isIconButton),bo("matRippleDisabled",e._isRippleDisabled())("matRippleCentered",e.isIconButton)("matRippleTrigger",e._getHostElement()))},directives:[qy],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.cdk-high-contrast-active .mat-button-focus-overlay{background-color:#fff}.cdk-high-contrast-black-on-white .mat-button-focus-overlay{background-color:#000}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:block;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}\n"],encapsulation:2,changeDetection:0}),t})(),Aw=(()=>{class t{}return t.\u0275mod=me({type:t}),t.\u0275inj=ct({factory:function(e){return new(e||t)},imports:[[jy,Fy],Fy]}),t})();function mw(t){return t&&"function"==typeof t.connect}class gw{constructor(t=!1,e,n=!0){this._multiple=t,this._emitChanges=n,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new _,e&&e.length&&(t?e.forEach(t=>this._markSelected(t)):this._markSelected(e[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...t){this._verifyValueAssignment(t),t.forEach(t=>this._markSelected(t)),this._emitChangeEvent()}deselect(...t){this._verifyValueAssignment(t),t.forEach(t=>this._unmarkSelected(t)),this._emitChangeEvent()}toggle(t){this.isSelected(t)?this.deselect(t):this.select(t)}clear(){this._unmarkAll(),this._emitChangeEvent()}isSelected(t){return this._selection.has(t)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(t){this._multiple&&this.selected&&this._selected.sort(t)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(t){this.isSelected(t)||(this._multiple||this._unmarkAll(),this._selection.add(t),this._emitChanges&&this._selectedToEmit.push(t))}_unmarkSelected(t){this.isSelected(t)&&(this._selection.delete(t),this._emitChanges&&this._deselectedToEmit.push(t))}_unmarkAll(){this.isEmpty()||this._selection.forEach(t=>this._unmarkSelected(t))}_verifyValueAssignment(t){if(t.length>1&&!this._multiple)throw Error("Cannot pass multiple values into SelectionModel with single-value mode.")}}function yw(t){return e=>e.lift(new ww(t))}class ww{constructor(t){this.notifier=t}call(t,e){const n=new bw(t),r=R(n,this.notifier);return r&&!n.seenValue?(n.add(r),e.subscribe(n)):n}}class bw extends O{constructor(t){super(t),this.seenValue=!1}notifyNext(t,e,n,r,i){this.seenValue=!0,this.complete()}notifyComplete(){}}const vw=[[["caption"]],[["colgroup"],["col"]]],xw=["caption","colgroup, col"];function _w(t){return class extends t{constructor(...t){super(...t),this._sticky=!1,this._hasStickyChanged=!1}get sticky(){return this._sticky}set sticky(t){const e=this._sticky;this._sticky=OA(t),this._hasStickyChanged=e!==this._sticky}hasStickyChanged(){const t=this._hasStickyChanged;return this._hasStickyChanged=!1,t}resetStickyChanged(){this._hasStickyChanged=!1}}}const Cw=new Mt("CDK_TABLE");let Sw=(()=>{class t{constructor(t){this.template=t}}return t.\u0275fac=function(e){return new(e||t)(yo(Wa))},t.\u0275dir=ye({type:t,selectors:[["","cdkCellDef",""]]}),t})(),Ew=(()=>{class t{constructor(t){this.template=t}}return t.\u0275fac=function(e){return new(e||t)(yo(Wa))},t.\u0275dir=ye({type:t,selectors:[["","cdkHeaderCellDef",""]]}),t})(),Bw=(()=>{class t{constructor(t){this.template=t}}return t.\u0275fac=function(e){return new(e||t)(yo(Wa))},t.\u0275dir=ye({type:t,selectors:[["","cdkFooterCellDef",""]]}),t})();class kw{}const Nw=_w(kw);let Iw=(()=>{class t extends Nw{constructor(t){super(),this._table=t,this._stickyEnd=!1}get name(){return this._name}set name(t){t&&(this._name=t,this.cssClassFriendlyName=t.replace(/[^a-z0-9_-]/gi,"-"))}get stickyEnd(){return this._stickyEnd}set stickyEnd(t){const e=this._stickyEnd;this._stickyEnd=OA(t),this._hasStickyChanged=e!==this._stickyEnd}}return t.\u0275fac=function(e){return new(e||t)(yo(Cw,8))},t.\u0275dir=ye({type:t,selectors:[["","cdkColumnDef",""]],contentQueries:function(t,e,n){var r;1&t&&(Dl(n,Sw,!0),Dl(n,Ew,!0),Dl(n,Bw,!0)),2&t&&(Fl(r=Ul())&&(e.cell=r.first),Fl(r=Ul())&&(e.headerCell=r.first),Fl(r=Ul())&&(e.footerCell=r.first))},inputs:{sticky:"sticky",name:["cdkColumnDef","name"],stickyEnd:"stickyEnd"},features:[ba([{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:t}]),la]}),t})();class Fw{constructor(t,e){e.nativeElement.classList.add("cdk-column-"+t.cssClassFriendlyName)}}let Tw=(()=>{class t extends Fw{constructor(t,e){super(t,e)}}return t.\u0275fac=function(e){return new(e||t)(yo(Iw),yo(Ca))},t.\u0275dir=ye({type:t,selectors:[["cdk-header-cell"],["th","cdk-header-cell",""]],hostAttrs:["role","columnheader",1,"cdk-header-cell"],features:[la]}),t})(),Rw=(()=>{class t extends Fw{constructor(t,e){super(t,e)}}return t.\u0275fac=function(e){return new(e||t)(yo(Iw),yo(Ca))},t.\u0275dir=ye({type:t,selectors:[["cdk-cell"],["td","cdk-cell",""]],hostAttrs:["role","gridcell",1,"cdk-cell"],features:[la]}),t})();class Ow{constructor(){this.tasks=[],this.endTasks=[]}}let Dw=(()=>{class t{constructor(t){this._ngZone=t,this._currentSchedule=null,this._destroyed=new _}schedule(t){this._createScheduleIfNeeded(),this._currentSchedule.tasks.push(t)}scheduleEnd(t){this._createScheduleIfNeeded(),this._currentSchedule.endTasks.push(t)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_createScheduleIfNeeded(){this._currentSchedule||(this._currentSchedule=new Ow,this._ngZone.onStable.pipe(td(1),yw(this._destroyed)).subscribe(()=>{const t=this._currentSchedule;this._currentSchedule=null;for(const e of t.tasks)e();for(const e of t.endTasks)e()}))}}return t.\u0275fac=function(e){return new(e||t)(Kt(cu))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),Lw=(()=>{class t{constructor(t,e){this.template=t,this._differs=e}ngOnChanges(t){if(!this._columnsDiffer){const e=t.columns&&t.columns.currentValue||[];this._columnsDiffer=this._differs.find(e).create(),this._columnsDiffer.diff(e)}}getColumnsDiff(){return this._columnsDiffer.diff(this.columns)}extractCellTemplate(t){return this instanceof Pw?t.headerCell.template:this instanceof Hw?t.footerCell.template:t.cell.template}}return t.\u0275fac=function(e){return new(e||t)(yo(Wa),yo($a))},t.\u0275dir=ye({type:t,features:[Fe]}),t})();class Mw extends Lw{}const Uw=_w(Mw);let Pw=(()=>{class t extends Uw{constructor(t,e,n){super(t,e),this._table=n}ngOnChanges(t){super.ngOnChanges(t)}}return t.\u0275fac=function(e){return new(e||t)(yo(Wa),yo($a),yo(Cw,8))},t.\u0275dir=ye({type:t,selectors:[["","cdkHeaderRowDef",""]],inputs:{columns:["cdkHeaderRowDef","columns"],sticky:["cdkHeaderRowDefSticky","sticky"]},features:[la,Fe]}),t})();class zw extends Lw{}const Qw=_w(zw);let Hw=(()=>{class t extends Qw{constructor(t,e,n){super(t,e),this._table=n}ngOnChanges(t){super.ngOnChanges(t)}}return t.\u0275fac=function(e){return new(e||t)(yo(Wa),yo($a),yo(Cw,8))},t.\u0275dir=ye({type:t,selectors:[["","cdkFooterRowDef",""]],inputs:{columns:["cdkFooterRowDef","columns"],sticky:["cdkFooterRowDefSticky","sticky"]},features:[la,Fe]}),t})(),$w=(()=>{class t extends Lw{constructor(t,e,n){super(t,e),this._table=n}}return t.\u0275fac=function(e){return new(e||t)(yo(Wa),yo($a),yo(Cw,8))},t.\u0275dir=ye({type:t,selectors:[["","cdkRowDef",""]],inputs:{columns:["cdkRowDefColumns","columns"],when:["cdkRowDefWhen","when"]},features:[la]}),t})(),Vw=(()=>{class t{constructor(e){this._viewContainer=e,t.mostRecentCellOutlet=this}ngOnDestroy(){t.mostRecentCellOutlet===this&&(t.mostRecentCellOutlet=null)}}return t.\u0275fac=function(e){return new(e||t)(yo(Xa))},t.\u0275dir=ye({type:t,selectors:[["","cdkCellOutlet",""]]}),t.mostRecentCellOutlet=null,t})(),qw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=de({type:t,selectors:[["cdk-header-row"],["tr","cdk-header-row",""]],hostAttrs:["role","row",1,"cdk-header-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,e){1&t&&Bo(0,0)},directives:[Vw],encapsulation:2}),t})(),jw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=de({type:t,selectors:[["cdk-row"],["tr","cdk-row",""]],hostAttrs:["role","row",1,"cdk-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,e){1&t&&Bo(0,0)},directives:[Vw],encapsulation:2}),t})(),Kw=(()=>{class t{constructor(t){this.templateRef=t}}return t.\u0275fac=function(e){return new(e||t)(yo(Wa))},t.\u0275dir=ye({type:t,selectors:[["ng-template","cdkNoDataRow",""]]}),t})();const Ww=["top","bottom","left","right"];class Gw{constructor(t,e,n,r,i=!0){this._isNativeHtmlTable=t,this._stickCellCss=e,this.direction=n,this._coalescedStyleScheduler=r,this._isBrowser=i}clearStickyPositioning(t,e){const n=[];for(const r of t)if(r.nodeType===r.ELEMENT_NODE){n.push(r);for(let t=0;t<r.children.length;t++)n.push(r.children[t])}this._coalescedStyleScheduler.schedule(()=>{for(const t of n)this._removeStickyStyle(t,e)})}updateStickyColumns(t,e,n){if(!t.length||!this._isBrowser||!e.some(t=>t)&&!n.some(t=>t))return;const r=t[0],i=r.children.length,s=this._getCellWidths(r),o=this._getStickyStartColumnPositions(s,e),a=this._getStickyEndColumnPositions(s,n);this._coalescedStyleScheduler.schedule(()=>{const r="rtl"===this.direction,s=r?"right":"left",l=r?"left":"right";for(const u of t)for(let t=0;t<i;t++){const r=u.children[t];e[t]&&this._addStickyStyle(r,s,o[t]),n[t]&&this._addStickyStyle(r,l,a[t])}})}stickRows(t,e,n){if(!this._isBrowser)return;const r="bottom"===n?t.slice().reverse():t,i="bottom"===n?e.slice().reverse():e,s=[],o=[];for(let a=0,l=0;a<r.length;a++){if(s[a]=l,!i[a])continue;const t=r[a];o[a]=this._isNativeHtmlTable?Array.from(t.children):[t],a!==r.length-1&&(l+=t.getBoundingClientRect().height)}this._coalescedStyleScheduler.schedule(()=>{for(let t=0;t<r.length;t++){if(!i[t])continue;const e=s[t];for(const r of o[t])this._addStickyStyle(r,n,e)}})}updateStickyFooterContainer(t,e){if(!this._isNativeHtmlTable)return;const n=t.querySelector("tfoot");this._coalescedStyleScheduler.schedule(()=>{e.some(t=>!t)?this._removeStickyStyle(n,["bottom"]):this._addStickyStyle(n,"bottom",0)})}_removeStickyStyle(t,e){for(const n of e)t.style[n]="";t.style.zIndex=this._getCalculatedZIndex(t),Ww.some(e=>!!t.style[e])||(t.style.position="",t.classList.remove(this._stickCellCss))}_addStickyStyle(t,e,n){t.classList.add(this._stickCellCss),t.style[e]=n+"px",t.style.cssText+="position: -webkit-sticky; position: sticky; ",t.style.zIndex=this._getCalculatedZIndex(t)}_getCalculatedZIndex(t){const e={top:100,bottom:10,left:1,right:1};let n=0;for(const r of Ww)t.style[r]&&(n+=e[r]);return n?""+n:""}_getCellWidths(t){const e=[],n=t.children;for(let r=0;r<n.length;r++)e.push(n[r].getBoundingClientRect().width);return e}_getStickyStartColumnPositions(t,e){const n=[];let r=0;for(let i=0;i<t.length;i++)e[i]&&(n[i]=r,r+=t[i]);return n}_getStickyEndColumnPositions(t,e){const n=[];let r=0;for(let i=t.length;i>0;i--)e[i]&&(n[i]=r,r+=t[i]);return n}}function Xw(t){return Error(`Could not find column with id "${t}".`)}let Yw=(()=>{class t{constructor(t,e){this.viewContainer=t,this.elementRef=e}}return t.\u0275fac=function(e){return new(e||t)(yo(Xa),yo(Ca))},t.\u0275dir=ye({type:t,selectors:[["","rowOutlet",""]]}),t})(),Jw=(()=>{class t{constructor(t,e){this.viewContainer=t,this.elementRef=e}}return t.\u0275fac=function(e){return new(e||t)(yo(Xa),yo(Ca))},t.\u0275dir=ye({type:t,selectors:[["","headerRowOutlet",""]]}),t})(),Zw=(()=>{class t{constructor(t,e){this.viewContainer=t,this.elementRef=e}}return t.\u0275fac=function(e){return new(e||t)(yo(Xa),yo(Ca))},t.\u0275dir=ye({type:t,selectors:[["","footerRowOutlet",""]]}),t})(),tb=(()=>{class t{constructor(t,e){this.viewContainer=t,this.elementRef=e}}return t.\u0275fac=function(e){return new(e||t)(yo(Xa),yo(Ca))},t.\u0275dir=ye({type:t,selectors:[["","noDataRowOutlet",""]]}),t})(),eb=(()=>{class t{constructor(t,e,n,r,i,s,o,a){this._differs=t,this._changeDetectorRef=e,this._coalescedStyleScheduler=n,this._elementRef=r,this._dir=s,this._platform=a,this._onDestroy=new _,this._columnDefsByName=new Map,this._customColumnDefs=new Set,this._customRowDefs=new Set,this._customHeaderRowDefs=new Set,this._customFooterRowDefs=new Set,this._headerRowDefChanged=!0,this._footerRowDefChanged=!0,this._cachedRenderRowsMap=new Map,this.stickyCssClass="cdk-table-sticky",this._isShowingNoDataRow=!1,this._multiTemplateDataRows=!1,this.viewChange=new kh({start:0,end:Number.MAX_VALUE}),i||this._elementRef.nativeElement.setAttribute("role","grid"),this._document=o,this._isNativeHtmlTable="TABLE"===this._elementRef.nativeElement.nodeName}get trackBy(){return this._trackByFn}set trackBy(t){Sr()&&null!=t&&"function"!=typeof t&&console&&console.warn&&console.warn(`trackBy must be a function, but received ${JSON.stringify(t)}.`),this._trackByFn=t}get dataSource(){return this._dataSource}set dataSource(t){this._dataSource!==t&&this._switchDataSource(t)}get multiTemplateDataRows(){return this._multiTemplateDataRows}set multiTemplateDataRows(t){this._multiTemplateDataRows=OA(t),this._rowOutlet&&this._rowOutlet.viewContainer.length&&(this._forceRenderDataRows(),this.updateStickyColumnStyles())}ngOnInit(){this._setupStickyStyler(),this._isNativeHtmlTable&&this._applyNativeTableSections(),this._dataDiffer=this._differs.find([]).create((t,e)=>this.trackBy?this.trackBy(e.dataIndex,e.data):e)}ngAfterContentChecked(){if(this._cacheRowDefs(),this._cacheColumnDefs(),!this._headerRowDefs.length&&!this._footerRowDefs.length&&!this._rowDefs.length)throw Error("Missing definitions for header, footer, and row; cannot determine which columns should be rendered.");const t=this._renderUpdatedColumns()||this._headerRowDefChanged||this._footerRowDefChanged;this._headerRowDefChanged&&(this._forceRenderHeaderRows(),this._headerRowDefChanged=!1),this._footerRowDefChanged&&(this._forceRenderFooterRows(),this._footerRowDefChanged=!1),this.dataSource&&this._rowDefs.length>0&&!this._renderChangeSubscription?this._observeRenderChanges():t&&this.updateStickyColumnStyles(),this._checkStickyStates()}ngOnDestroy(){this._rowOutlet.viewContainer.clear(),this._noDataRowOutlet.viewContainer.clear(),this._headerRowOutlet.viewContainer.clear(),this._footerRowOutlet.viewContainer.clear(),this._cachedRenderRowsMap.clear(),this._onDestroy.next(),this._onDestroy.complete(),mw(this.dataSource)&&this.dataSource.disconnect(this)}renderRows(){this._renderRows=this._getAllRenderRows();const t=this._dataDiffer.diff(this._renderRows);if(!t)return void this._updateNoDataRow();const e=this._rowOutlet.viewContainer;t.forEachOperation((t,n,r)=>{if(null==t.previousIndex)this._insertRow(t.item,r);else if(null==r)e.remove(n);else{const t=e.get(n);e.move(t,r)}}),this._updateRowIndexContext(),t.forEachIdentityChange(t=>{e.get(t.currentIndex).context.$implicit=t.item.data}),this._updateNoDataRow(),this.updateStickyColumnStyles()}addColumnDef(t){this._customColumnDefs.add(t)}removeColumnDef(t){this._customColumnDefs.delete(t)}addRowDef(t){this._customRowDefs.add(t)}removeRowDef(t){this._customRowDefs.delete(t)}addHeaderRowDef(t){this._customHeaderRowDefs.add(t),this._headerRowDefChanged=!0}removeHeaderRowDef(t){this._customHeaderRowDefs.delete(t),this._headerRowDefChanged=!0}addFooterRowDef(t){this._customFooterRowDefs.add(t),this._footerRowDefChanged=!0}removeFooterRowDef(t){this._customFooterRowDefs.delete(t),this._footerRowDefChanged=!0}updateStickyHeaderRowStyles(){const t=this._getRenderedRows(this._headerRowOutlet),e=this._elementRef.nativeElement.querySelector("thead");e&&(e.style.display=t.length?"":"none");const n=this._headerRowDefs.map(t=>t.sticky);this._stickyStyler.clearStickyPositioning(t,["top"]),this._stickyStyler.stickRows(t,n,"top"),this._headerRowDefs.forEach(t=>t.resetStickyChanged())}updateStickyFooterRowStyles(){const t=this._getRenderedRows(this._footerRowOutlet),e=this._elementRef.nativeElement.querySelector("tfoot");e&&(e.style.display=t.length?"":"none");const n=this._footerRowDefs.map(t=>t.sticky);this._stickyStyler.clearStickyPositioning(t,["bottom"]),this._stickyStyler.stickRows(t,n,"bottom"),this._stickyStyler.updateStickyFooterContainer(this._elementRef.nativeElement,n),this._footerRowDefs.forEach(t=>t.resetStickyChanged())}updateStickyColumnStyles(){const t=this._getRenderedRows(this._headerRowOutlet),e=this._getRenderedRows(this._rowOutlet),n=this._getRenderedRows(this._footerRowOutlet);this._stickyStyler.clearStickyPositioning([...t,...e,...n],["left","right"]),t.forEach((t,e)=>{this._addStickyColumnStyles([t],this._headerRowDefs[e])}),this._rowDefs.forEach(t=>{const n=[];for(let r=0;r<e.length;r++)this._renderRows[r].rowDef===t&&n.push(e[r]);this._addStickyColumnStyles(n,t)}),n.forEach((t,e)=>{this._addStickyColumnStyles([t],this._footerRowDefs[e])}),Array.from(this._columnDefsByName.values()).forEach(t=>t.resetStickyChanged())}_getAllRenderRows(){const t=[],e=this._cachedRenderRowsMap;this._cachedRenderRowsMap=new Map;for(let n=0;n<this._data.length;n++){let r=this._data[n];const i=this._getRenderRowsForData(r,n,e.get(r));this._cachedRenderRowsMap.has(r)||this._cachedRenderRowsMap.set(r,new WeakMap);for(let e=0;e<i.length;e++){let n=i[e];const r=this._cachedRenderRowsMap.get(n.data);r.has(n.rowDef)?r.get(n.rowDef).push(n):r.set(n.rowDef,[n]),t.push(n)}}return t}_getRenderRowsForData(t,e,n){return this._getRowDefs(t,e).map(r=>{const i=n&&n.has(r)?n.get(r):[];if(i.length){const t=i.shift();return t.dataIndex=e,t}return{data:t,rowDef:r,dataIndex:e}})}_cacheColumnDefs(){this._columnDefsByName.clear(),nb(this._getOwnDefs(this._contentColumnDefs),this._customColumnDefs).forEach(t=>{if(this._columnDefsByName.has(t.name))throw function(t){return Error(`Duplicate column definition name provided: "${t}".`)}(t.name);this._columnDefsByName.set(t.name,t)})}_cacheRowDefs(){this._headerRowDefs=nb(this._getOwnDefs(this._contentHeaderRowDefs),this._customHeaderRowDefs),this._footerRowDefs=nb(this._getOwnDefs(this._contentFooterRowDefs),this._customFooterRowDefs),this._rowDefs=nb(this._getOwnDefs(this._contentRowDefs),this._customRowDefs);const t=this._rowDefs.filter(t=>!t.when);if(!this.multiTemplateDataRows&&t.length>1)throw Error("There can only be one default row without a when predicate function.");this._defaultRowDef=t[0]}_renderUpdatedColumns(){const t=(t,e)=>t||!!e.getColumnsDiff(),e=this._rowDefs.reduce(t,!1);e&&this._forceRenderDataRows();const n=this._headerRowDefs.reduce(t,!1);n&&this._forceRenderHeaderRows();const r=this._footerRowDefs.reduce(t,!1);return r&&this._forceRenderFooterRows(),e||n||r}_switchDataSource(t){this._data=[],mw(this.dataSource)&&this.dataSource.disconnect(this),this._renderChangeSubscription&&(this._renderChangeSubscription.unsubscribe(),this._renderChangeSubscription=null),t||(this._dataDiffer&&this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear()),this._dataSource=t}_observeRenderChanges(){if(!this.dataSource)return;let t;if(mw(this.dataSource)?t=this.dataSource.connect(this):(e=this.dataSource)&&(e instanceof y||"function"==typeof e.lift&&"function"==typeof e.subscribe)?t=this.dataSource:Array.isArray(this.dataSource)&&(t=Bh(this.dataSource)),void 0===t)throw Error("Provided data source did not match an array, Observable, or DataSource");var e;this._renderChangeSubscription=t.pipe(yw(this._onDestroy)).subscribe(t=>{this._data=t||[],this.renderRows()})}_forceRenderHeaderRows(){this._headerRowOutlet.viewContainer.length>0&&this._headerRowOutlet.viewContainer.clear(),this._headerRowDefs.forEach((t,e)=>this._renderRow(this._headerRowOutlet,t,e)),this.updateStickyHeaderRowStyles()}_forceRenderFooterRows(){this._footerRowOutlet.viewContainer.length>0&&this._footerRowOutlet.viewContainer.clear(),this._footerRowDefs.forEach((t,e)=>this._renderRow(this._footerRowOutlet,t,e)),this.updateStickyFooterRowStyles()}_addStickyColumnStyles(t,e){const n=Array.from(e.columns||[]).map(t=>{const e=this._columnDefsByName.get(t);if(!e)throw Xw(t);return e}),r=n.map(t=>t.sticky),i=n.map(t=>t.stickyEnd);this._stickyStyler.updateStickyColumns(t,r,i)}_getRenderedRows(t){const e=[];for(let n=0;n<t.viewContainer.length;n++){const r=t.viewContainer.get(n);e.push(r.rootNodes[0])}return e}_getRowDefs(t,e){if(1==this._rowDefs.length)return[this._rowDefs[0]];let n=[];if(this.multiTemplateDataRows)n=this._rowDefs.filter(n=>!n.when||n.when(e,t));else{let r=this._rowDefs.find(n=>n.when&&n.when(e,t))||this._defaultRowDef;r&&n.push(r)}if(!n.length)throw function(t){return Error("Could not find a matching row definition for theprovided row data: "+JSON.stringify(t))}(t);return n}_insertRow(t,e){this._renderRow(this._rowOutlet,t.rowDef,e,{$implicit:t.data})}_renderRow(t,e,n,r={}){t.viewContainer.createEmbeddedView(e.template,r,n);for(let i of this._getCellTemplates(e))Vw.mostRecentCellOutlet&&Vw.mostRecentCellOutlet._viewContainer.createEmbeddedView(i,r);this._changeDetectorRef.markForCheck()}_updateRowIndexContext(){const t=this._rowOutlet.viewContainer;for(let e=0,n=t.length;e<n;e++){const r=t.get(e).context;r.count=n,r.first=0===e,r.last=e===n-1,r.even=e%2==0,r.odd=!r.even,this.multiTemplateDataRows?(r.dataIndex=this._renderRows[e].dataIndex,r.renderIndex=e):r.index=this._renderRows[e].dataIndex}}_getCellTemplates(t){return t&&t.columns?Array.from(t.columns,e=>{const n=this._columnDefsByName.get(e);if(!n)throw Xw(e);return t.extractCellTemplate(n)}):[]}_applyNativeTableSections(){const t=this._document.createDocumentFragment(),e=[{tag:"thead",outlets:[this._headerRowOutlet]},{tag:"tbody",outlets:[this._rowOutlet,this._noDataRowOutlet]},{tag:"tfoot",outlets:[this._footerRowOutlet]}];for(const n of e){const e=this._document.createElement(n.tag);e.setAttribute("role","rowgroup");for(const t of n.outlets)e.appendChild(t.elementRef.nativeElement);t.appendChild(e)}this._elementRef.nativeElement.appendChild(t)}_forceRenderDataRows(){this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear(),this.renderRows()}_checkStickyStates(){const t=(t,e)=>t||e.hasStickyChanged();this._headerRowDefs.reduce(t,!1)&&this.updateStickyHeaderRowStyles(),this._footerRowDefs.reduce(t,!1)&&this.updateStickyFooterRowStyles(),Array.from(this._columnDefsByName.values()).reduce(t,!1)&&this.updateStickyColumnStyles()}_setupStickyStyler(){this._stickyStyler=new Gw(this._isNativeHtmlTable,this.stickyCssClass,this._dir?this._dir.value:"ltr",this._coalescedStyleScheduler,this._platform.isBrowser),(this._dir?this._dir.change:Bh()).pipe(yw(this._onDestroy)).subscribe(t=>{this._stickyStyler.direction=t,this.updateStickyColumnStyles()})}_getOwnDefs(t){return t.filter(t=>!t._table||t._table===this)}_updateNoDataRow(){if(this._noDataRow){const t=0===this._rowOutlet.viewContainer.length;if(t!==this._isShowingNoDataRow){const e=this._noDataRowOutlet.viewContainer;t?e.createEmbeddedView(this._noDataRow.templateRef):e.clear(),this._isShowingNoDataRow=t}}}}return t.\u0275fac=function(e){return new(e||t)(yo($a),yo(zs),yo(Dw),yo(Ca),wo("role"),yo(tm,8),yo(Qu),yo(gA))},t.\u0275cmp=de({type:t,selectors:[["cdk-table"],["table","cdk-table",""]],contentQueries:function(t,e,n){var r;1&t&&(Dl(n,Kw,!0),Dl(n,Iw,!0),Dl(n,$w,!0),Dl(n,Pw,!0),Dl(n,Hw,!0)),2&t&&(Fl(r=Ul())&&(e._noDataRow=r.first),Fl(r=Ul())&&(e._contentColumnDefs=r),Fl(r=Ul())&&(e._contentRowDefs=r),Fl(r=Ul())&&(e._contentHeaderRowDefs=r),Fl(r=Ul())&&(e._contentFooterRowDefs=r))},viewQuery:function(t,e){var n;1&t&&(Tl(Yw,!0),Tl(Jw,!0),Tl(Zw,!0),Tl(tb,!0)),2&t&&(Fl(n=Ul())&&(e._rowOutlet=n.first),Fl(n=Ul())&&(e._headerRowOutlet=n.first),Fl(n=Ul())&&(e._footerRowOutlet=n.first),Fl(n=Ul())&&(e._noDataRowOutlet=n.first))},hostAttrs:[1,"cdk-table"],inputs:{trackBy:"trackBy",dataSource:"dataSource",multiTemplateDataRows:"multiTemplateDataRows"},exportAs:["cdkTable"],features:[ba([{provide:Cw,useExisting:t},Dw])],ngContentSelectors:xw,decls:6,vars:0,consts:[["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(t,e){1&t&&(Lo(vw),Mo(0),Mo(1,1),Bo(2,0),Bo(3,1),Bo(4,2),Bo(5,3))},directives:[Jw,Yw,tb,Zw],encapsulation:2}),t})();function nb(t,e){return t.concat(Array.from(e))}let rb=(()=>{class t{}return t.\u0275mod=me({type:t}),t.\u0275inj=ct({factory:function(e){return new(e||t)}}),t})();const ib=[[["caption"]],[["colgroup"],["col"]]],sb=["caption","colgroup, col"];let ob=(()=>{class t extends eb{constructor(){super(...arguments),this.stickyCssClass="mat-table-sticky"}}return t.\u0275fac=function(e){return ab(e||t)},t.\u0275cmp=de({type:t,selectors:[["mat-table"],["table","mat-table",""]],hostAttrs:[1,"mat-table"],exportAs:["matTable"],features:[ba([{provide:eb,useExisting:t},{provide:Cw,useExisting:t},Dw]),la],ngContentSelectors:sb,decls:6,vars:0,consts:[["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(t,e){1&t&&(Lo(ib),Mo(0),Mo(1,1),Bo(2,0),Bo(3,1),Bo(4,2),Bo(5,3))},directives:[Jw,Yw,tb,Zw],styles:['mat-table{display:block}mat-header-row{min-height:56px}mat-row,mat-footer-row{min-height:48px}mat-row,mat-header-row,mat-footer-row{display:flex;border-width:0;border-bottom-width:1px;border-style:solid;align-items:center;box-sizing:border-box}mat-row::after,mat-header-row::after,mat-footer-row::after{display:inline-block;min-height:inherit;content:""}mat-cell:first-of-type,mat-header-cell:first-of-type,mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] mat-cell:first-of-type,[dir=rtl] mat-header-cell:first-of-type,[dir=rtl] mat-footer-cell:first-of-type{padding-left:0;padding-right:24px}mat-cell:last-of-type,mat-header-cell:last-of-type,mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] mat-cell:last-of-type,[dir=rtl] mat-header-cell:last-of-type,[dir=rtl] mat-footer-cell:last-of-type{padding-right:0;padding-left:24px}mat-cell,mat-header-cell,mat-footer-cell{flex:1;display:flex;align-items:center;overflow:hidden;word-wrap:break-word;min-height:inherit}table.mat-table{border-spacing:0}tr.mat-header-row{height:56px}tr.mat-row,tr.mat-footer-row{height:48px}th.mat-header-cell{text-align:left}[dir=rtl] th.mat-header-cell{text-align:right}th.mat-header-cell,td.mat-cell,td.mat-footer-cell{padding:0;border-bottom-width:1px;border-bottom-style:solid}th.mat-header-cell:first-of-type,td.mat-cell:first-of-type,td.mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] th.mat-header-cell:first-of-type,[dir=rtl] td.mat-cell:first-of-type,[dir=rtl] td.mat-footer-cell:first-of-type{padding-left:0;padding-right:24px}th.mat-header-cell:last-of-type,td.mat-cell:last-of-type,td.mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] th.mat-header-cell:last-of-type,[dir=rtl] td.mat-cell:last-of-type,[dir=rtl] td.mat-footer-cell:last-of-type{padding-right:0;padding-left:24px}\n'],encapsulation:2}),t})();const ab=ur(ob);let lb=(()=>{class t extends Sw{}return t.\u0275fac=function(e){return ub(e||t)},t.\u0275dir=ye({type:t,selectors:[["","matCellDef",""]],features:[ba([{provide:Sw,useExisting:t}]),la]}),t})();const ub=ur(lb);let cb=(()=>{class t extends Ew{}return t.\u0275fac=function(e){return hb(e||t)},t.\u0275dir=ye({type:t,selectors:[["","matHeaderCellDef",""]],features:[ba([{provide:Ew,useExisting:t}]),la]}),t})();const hb=ur(cb);let db=(()=>{class t extends Iw{}return t.\u0275fac=function(e){return pb(e||t)},t.\u0275dir=ye({type:t,selectors:[["","matColumnDef",""]],inputs:{sticky:"sticky",name:["matColumnDef","name"]},features:[ba([{provide:Iw,useExisting:t},{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:t}]),la]}),t})();const pb=ur(db);let fb=(()=>{class t extends Tw{constructor(t,e){super(t,e),e.nativeElement.classList.add("mat-column-"+t.cssClassFriendlyName)}}return t.\u0275fac=function(e){return new(e||t)(yo(Iw),yo(Ca))},t.\u0275dir=ye({type:t,selectors:[["mat-header-cell"],["th","mat-header-cell",""]],hostAttrs:["role","columnheader",1,"mat-header-cell"],features:[la]}),t})(),Ab=(()=>{class t extends Rw{constructor(t,e){super(t,e),e.nativeElement.classList.add("mat-column-"+t.cssClassFriendlyName)}}return t.\u0275fac=function(e){return new(e||t)(yo(Iw),yo(Ca))},t.\u0275dir=ye({type:t,selectors:[["mat-cell"],["td","mat-cell",""]],hostAttrs:["role","gridcell",1,"mat-cell"],features:[la]}),t})(),mb=(()=>{class t extends Pw{}return t.\u0275fac=function(e){return gb(e||t)},t.\u0275dir=ye({type:t,selectors:[["","matHeaderRowDef",""]],inputs:{columns:["matHeaderRowDef","columns"],sticky:["matHeaderRowDefSticky","sticky"]},features:[ba([{provide:Pw,useExisting:t}]),la]}),t})();const gb=ur(mb);let yb=(()=>{class t extends $w{}return t.\u0275fac=function(e){return wb(e||t)},t.\u0275dir=ye({type:t,selectors:[["","matRowDef",""]],inputs:{columns:["matRowDefColumns","columns"],when:["matRowDefWhen","when"]},features:[ba([{provide:$w,useExisting:t}]),la]}),t})();const wb=ur(yb);let bb=(()=>{class t extends qw{}return t.\u0275fac=function(e){return vb(e||t)},t.\u0275cmp=de({type:t,selectors:[["mat-header-row"],["tr","mat-header-row",""]],hostAttrs:["role","row",1,"mat-header-row"],exportAs:["matHeaderRow"],features:[ba([{provide:qw,useExisting:t}]),la],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,e){1&t&&Bo(0,0)},directives:[Vw],encapsulation:2}),t})();const vb=ur(bb);let xb=(()=>{class t extends jw{}return t.\u0275fac=function(e){return _b(e||t)},t.\u0275cmp=de({type:t,selectors:[["mat-row"],["tr","mat-row",""]],hostAttrs:["role","row",1,"mat-row"],exportAs:["matRow"],features:[ba([{provide:jw,useExisting:t}]),la],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,e){1&t&&Bo(0,0)},directives:[Vw],encapsulation:2}),t})();const _b=ur(xb);let Cb=(()=>{class t{}return t.\u0275mod=me({type:t}),t.\u0275inj=ct({factory:function(e){return new(e||t)},imports:[[rb,Fy],Fy]}),t})();function Sb(t,e){1&t&&(xo(0,"th",9),ra(1,"Name"),_o())}function Eb(t,e){if(1&t&&(xo(0,"td",10),ra(1),_o()),2&t){const t=e.$implicit;Ai(1),sa(" ",t.examName," ")}}function Bb(t,e){1&t&&(xo(0,"th",9),ra(1,"Last Modified"),_o())}function kb(t,e){if(1&t&&(xo(0,"td",10),ra(1),yl(2,"date"),_o()),2&t){const t=e.$implicit;Ai(1),sa(" ",wl(2,1,t.lastModified)," ")}}function Nb(t,e){1&t&&(xo(0,"th",9),ra(1,"ID"),_o())}function Ib(t,e){if(1&t&&(xo(0,"td",10),ra(1),_o()),2&t){const t=e.$implicit;Ai(1),sa(" ",t.id," ")}}function Fb(t,e){1&t&&Co(0,"tr",11)}const Tb=function(t){return[t]};function Rb(t,e){1&t&&Co(0,"tr",12),2&t&&bo("routerLink",ml(1,Tb,"/exam/"+e.$implicit.id))}let Ob=(()=>{class t{constructor(t){this.router=t,this.exams=[],this.loadedExams=[],this.columnsToDisplay=["examName","lastModified","id"]}ngOnInit(){this.loadExamsFromStorage()}loadExamsFromStorage(){this.exams=JSON.parse(localStorage.getItem("exams")),this.exams?this.loadedExams=this.exams:this.exams=oA}createNew(){let t={examName:"New Exam",id:fA(),lastModified:new Date};this.loadedExams.push(t),localStorage.setItem("exams",JSON.stringify(this.loadedExams)),this.router.navigateByUrl("/exam/"+t.id)}}return t.\u0275fac=function(e){return new(e||t)(yo(Uf))},t.\u0275cmp=de({type:t,selectors:[["app-exam-list"]],decls:14,vars:3,consts:[["mat-button","",3,"click"],["mat-table","",3,"dataSource"],["matColumnDef","examName"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","lastModified"],["matColumnDef","id"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"routerLink",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row","",3,"routerLink"]],template:function(t,e){1&t&&(xo(0,"button",0),Fo("click",(function(){return e.createNew()})),ra(1,"Create New Exam"),_o(),xo(2,"table",1),So(3,2),mo(4,Sb,2,0,"th",3),mo(5,Eb,2,1,"td",4),Eo(),So(6,5),mo(7,Bb,2,0,"th",3),mo(8,kb,3,3,"td",4),Eo(),So(9,6),mo(10,Nb,2,0,"th",3),mo(11,Ib,2,1,"td",4),Eo(),mo(12,Fb,1,0,"tr",7),mo(13,Rb,1,3,"tr",8),_o()),2&t&&(Ai(2),bo("dataSource",e.exams),Ai(10),bo("matHeaderRowDef",e.columnsToDisplay),Ai(1),bo("matRowDefColumns",e.columnsToDisplay))},directives:[fw,ob,db,cb,lb,mb,yb,fb,Ab,bb,xb,Pf],pipes:[jc],styles:["[_nghost-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:center;margin-top:50px}table[_ngcontent-%COMP%]{width:80%}"]}),t})();new Date;const Db={id:"fullexam",date:new Date,title:"Demo Exam",questions:[{points:10,elements:[{question:"Subquestion A",answer:!0},{question:"Subquestion B",answer:!0},{question:"Subquestion C",answer:!0},{question:"Subquestion D",answer:!0},{question:"Subquestion E",answer:!0},{question:"Subquestion F",answer:!0},{question:"Subquestion G",answer:!0},{question:"Subquestion H",answer:!0},{question:"Subquestion I",answer:!0},{question:"Subquestion J",answer:!0}]},{points:10,elements:[{question:"Subquestion A",answer:!0},{question:"Subquestion B",answer:!0},{question:"Subquestion C",answer:!0},{question:"Subquestion D",answer:!0},{question:"Subquestion E",answer:!0},{question:"Subquestion F",answer:!0},{question:"Subquestion G",answer:!0},{question:"Subquestion H",answer:!0},{question:"Subquestion I",answer:!0},{question:"Subquestion J",answer:!0}]},{points:10,elements:[{question:"Subquestion A",answer:!0},{question:"Subquestion B",answer:!0},{question:"Subquestion C",answer:!0},{question:"Subquestion D",answer:!0},{question:"Subquestion E",answer:!0},{question:"Subquestion F",answer:!0},{question:"Subquestion G",answer:!0},{question:"Subquestion H",answer:!0},{question:"Subquestion I",answer:!0},{question:"Subquestion J",answer:!0}]},{points:10,elements:[{question:"Subquestion A",answer:!0},{question:"Subquestion B",answer:!0},{question:"Subquestion C",answer:!0},{question:"Subquestion D",answer:!0},{question:"Subquestion E",answer:!0},{question:"Subquestion F",answer:!0},{question:"Subquestion G",answer:!0},{question:"Subquestion H",answer:!0},{question:"Subquestion I",answer:!0},{question:"Subquestion J",answer:!0}]},{points:10,elements:[{question:"Subquestion A",answer:!0},{question:"Subquestion B",answer:!0},{question:"Subquestion C",answer:!0},{question:"Subquestion D",answer:!0},{question:"Subquestion E",answer:!0},{question:"Subquestion F",answer:!0},{question:"Subquestion G",answer:!0},{question:"Subquestion H",answer:!0},{question:"Subquestion I",answer:!0},{question:"Subquestion J",answer:!0}]},{points:10,elements:[{question:"Subquestion A",answer:!0},{question:"Subquestion B",answer:!0},{question:"Subquestion C",answer:!0},{question:"Subquestion D",answer:!0},{question:"Subquestion E",answer:!0},{question:"Subquestion F",answer:!0},{question:"Subquestion G",answer:!0},{question:"Subquestion H",answer:!0},{question:"Subquestion I",answer:!0},{question:"Subquestion J",answer:!0}]},{points:10,elements:[{question:"Subquestion A",answer:!0},{question:"Subquestion B",answer:!0},{question:"Subquestion C",answer:!0},{question:"Subquestion D",answer:!0},{question:"Subquestion E",answer:!0},{question:"Subquestion F",answer:!0},{question:"Subquestion G",answer:!0},{question:"Subquestion H",answer:!0},{question:"Subquestion I",answer:!0},{question:"Subquestion J",answer:!0}]},{points:10,elements:[{question:"Subquestion A",answer:!0},{question:"Subquestion B",answer:!0},{question:"Subquestion C",answer:!0},{question:"Subquestion D",answer:!0},{question:"Subquestion E",answer:!0},{question:"Subquestion F",answer:!0},{question:"Subquestion G",answer:!0},{question:"Subquestion H",answer:!0},{question:"Subquestion I",answer:!0},{question:"Subquestion J",answer:!0}]},{points:10,elements:[{question:"Subquestion A",answer:!0},{question:"Subquestion B",answer:!0},{question:"Subquestion C",answer:!0},{question:"Subquestion D",answer:!0},{question:"Subquestion E",answer:!0},{question:"Subquestion F",answer:!0},{question:"Subquestion G",answer:!0},{question:"Subquestion H",answer:!0},{question:"Subquestion I",answer:!0},{question:"Subquestion J",answer:!0}]},{points:10,elements:[{question:"Subquestion A",answer:!0},{question:"Subquestion B",answer:!0},{question:"Subquestion C",answer:!0},{question:"Subquestion D",answer:!0},{question:"Subquestion E",answer:!0},{question:"Subquestion F",answer:!0},{question:"Subquestion G",answer:!0},{question:"Subquestion H",answer:!0},{question:"Subquestion I",answer:!0},{question:"Subquestion J",answer:!0}]}]};let Lb=(()=>{class t{constructor(){this.modified=!1,this.exam=Db,this.verticalFactor=40,this.horizontalFactor=40,this.verticalOffset=200,this.horizontalLabelOffset=100,this.horizontalMarkOffset=this.horizontalLabelOffset+100}static styleForCoordWithOffset(t,e){return{position:"absolute",left:t.x+e.x+"px",top:t.y+e.y+"px"}}styleForCoord(e,n=!0){return t.styleForCoordWithOffset(e,{x:0,y:n?0:this.verticalFactor})}styleForTruthLabel(t,e){return this.styleForCoord({x:this.horizontalLabelOffset+20,y:(t*=3)*this.verticalFactor+this.verticalOffset},e)}styleForMarkLabel(t,e){return this.styleForCoord({x:e*this.horizontalFactor+this.horizontalMarkOffset,y:(t=3*t-.6)*this.verticalFactor+this.verticalOffset},!0)}styleForQuestionLabel(t){return this.styleForCoord({x:this.horizontalLabelOffset,y:(t=3*t-.6)*this.verticalFactor+this.verticalOffset},!0)}getCharOfElem(t,e){let n=0;for(let r=0;r<t.elements.length;r++){if(r===e)return this.getChar(n);let i=t.elements[r];"object"==typeof i&&"question"in i&&n++}return this.getChar(0)}getChar(t){return String.fromCharCode("a".charCodeAt(0)+t)}calculateMarkPositions(){console.log("calculating mark positions.");let t=[];for(let e=0;e<this.exam.questions.length;e++){const n=this.exam.questions[e],r=3*e*this.verticalFactor+this.verticalOffset;let i=[],s=0;for(const t of n.elements)"object"==typeof t&&"question"in t&&(i.push({x:s*this.horizontalFactor+this.horizontalMarkOffset,y:r}),s++);t.push(i)}return console.log(t),t}loadExam(t){this.exam=JSON.parse(localStorage.getItem(t)),this.exam||this.generateNewExam(t)}save(){localStorage.setItem(this.exam.id,JSON.stringify(this.exam)),this.modified=!1}generateNewExam(t){console.log("generating new exam"),this.exam={id:t,date:new Date,questions:[],title:"New Exam"}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Mb(t,e,n,i){return r(n)&&(i=n,n=void 0),i?Mb(t,e,n).pipe(D(t=>l(t)?i(...t):i(t))):new y(r=>{!function t(e,n,r,i,s){let o;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(e)){const t=e;e.addEventListener(n,r,s),o=()=>t.removeEventListener(n,r,s)}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(e)){const t=e;e.on(n,r),o=()=>t.off(n,r)}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(e)){const t=e;e.addListener(n,r),o=()=>t.removeListener(n,r)}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(let o=0,a=e.length;o<a;o++)t(e[o],n,r,i,s)}i.add(o)}(t,e,(function(t){r.next(arguments.length>1?Array.prototype.slice.call(arguments):t)}),r,n)})}const Ub=["underline"],Pb=["connectionContainer"],zb=["inputContainer"],Qb=["label"];function Hb(t,e){1&t&&(So(0),xo(1,"div",14),Co(2,"div",15),Co(3,"div",16),Co(4,"div",17),_o(),xo(5,"div",18),Co(6,"div",15),Co(7,"div",16),Co(8,"div",17),_o(),Eo())}function $b(t,e){1&t&&(xo(0,"div",19),Mo(1,1),_o())}function Vb(t,e){if(1&t&&(So(0),Mo(1,2),xo(2,"span"),ra(3),_o(),Eo()),2&t){const t=Oo(2);Ai(3),ia(t._control.placeholder)}}function qb(t,e){1&t&&Mo(0,3,["*ngSwitchCase","true"])}function jb(t,e){1&t&&(xo(0,"span",23),ra(1," *"),_o())}function Kb(t,e){if(1&t){const t=ko();xo(0,"label",20,21),Fo("cdkObserveContent",(function(){return en(t),Oo().updateOutlineGap()})),mo(2,Vb,4,1,"ng-container",12),mo(3,qb,1,0,"ng-content",12),mo(4,jb,2,0,"span",22),_o()}if(2&t){const t=Oo();jo("mat-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-form-field-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-accent","accent"==t.color)("mat-warn","warn"==t.color),bo("cdkObserveContentDisabled","outline"!=t.appearance)("id",t._labelId)("ngSwitch",t._hasLabel()),fo("for",t._control.id)("aria-owns",t._control.id),Ai(2),bo("ngSwitchCase",!1),Ai(1),bo("ngSwitchCase",!0),Ai(1),bo("ngIf",!t.hideRequiredMarker&&t._control.required&&!t._control.disabled)}}function Wb(t,e){1&t&&(xo(0,"div",24),Mo(1,4),_o())}function Gb(t,e){if(1&t&&(xo(0,"div",25,26),Co(2,"span",27),_o()),2&t){const t=Oo();Ai(2),jo("mat-accent","accent"==t.color)("mat-warn","warn"==t.color)}}function Xb(t,e){1&t&&(xo(0,"div"),Mo(1,5),_o()),2&t&&bo("@transitionMessages",Oo()._subscriptAnimationState)}function Yb(t,e){if(1&t&&(xo(0,"div",31),ra(1),_o()),2&t){const t=Oo(2);bo("id",t._hintLabelId),Ai(1),ia(t.hintLabel)}}function Jb(t,e){if(1&t&&(xo(0,"div",28),mo(1,Yb,2,2,"div",29),Mo(2,6),Co(3,"div",30),Mo(4,7),_o()),2&t){const t=Oo();bo("@transitionMessages",t._subscriptAnimationState),Ai(1),bo("ngIf",t.hintLabel)}}const Zb=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],tv=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],ev=new Mt("MatError"),nv={transitionMessages:im("transitionMessages",[lm("enter",am({opacity:1,transform:"translateY(0%)"})),um("void => enter",[am({opacity:0,transform:"translateY(-100%)"}),sm("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let rv=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=ye({type:t}),t})();function iv(t){return Error(`A hint was already declared for 'align="${t}"'.`)}const sv=new Mt("MatHint");let ov=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=ye({type:t,selectors:[["mat-label"]]}),t})(),av=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=ye({type:t,selectors:[["mat-placeholder"]]}),t})();const lv=new Mt("MatPrefix"),uv=new Mt("MatSuffix");let cv=0;class hv{constructor(t){this._elementRef=t}}const dv=Ry(hv,"primary"),pv=new Mt("MAT_FORM_FIELD_DEFAULT_OPTIONS"),fv=new Mt("MatFormField");let Av=(()=>{class t extends dv{constructor(t,e,n,r,i,s,o,a){super(t),this._elementRef=t,this._changeDetectorRef=e,this._dir=r,this._defaults=i,this._platform=s,this._ngZone=o,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new _,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+cv++,this._labelId="mat-form-field-label-"+cv++,this._labelOptions=n||{},this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==a,this.appearance=i&&i.appearance?i.appearance:"legacy",this._hideRequiredMarker=!(!i||null==i.hideRequiredMarker)&&i.hideRequiredMarker}get appearance(){return this._appearance}set appearance(t){const e=this._appearance;this._appearance=t||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&e!==t&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=OA(t)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(t){this._explicitFormFieldControl=t}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add("mat-form-field-type-"+t.controlType),t.stateChanges.pipe(fd(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(yw(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.asObservable().pipe(yw(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),q(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(fd(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(fd(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(yw(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(t){const e=this._control?this._control.ngControl:null;return e&&e[t]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,Mb(this._label.nativeElement,"transitionend").pipe(td(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){if(this._control.placeholder&&this._placeholderChild)throw Error("Placeholder attribute and child element were both specified.")}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){if(this._hintChildren){let t,e;this._hintChildren.forEach(n=>{if("start"===n.align){if(t||this.hintLabel)throw iv("start");t=n}else if("end"===n.align){if(e)throw iv("end");e=n}})}}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||this._labelOptions.float||"auto"}_syncDescribedByIds(){if(this._control){let t=[];if("hint"===this._getDisplayedMessages()){const e=this._hintChildren?this._hintChildren.find(t=>"start"===t.align):null,n=this._hintChildren?this._hintChildren.find(t=>"end"===t.align):null;e?t.push(e.id):this._hintLabel&&t.push(this._hintLabelId),n&&t.push(n.id)}else this._errorChildren&&(t=this._errorChildren.map(t=>t.id));this._control.setDescribedByIds(t)}}_validateControlChild(){if(!this._control)throw Error("mat-form-field must contain a MatFormFieldControl.")}updateOutlineGap(){const t=this._label?this._label.nativeElement:null;if("outline"!==this.appearance||!t||!t.children.length||!t.textContent.trim())return;if(!this._platform.isBrowser)return;if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let e=0,n=0;const r=this._connectionContainerRef.nativeElement,i=r.querySelectorAll(".mat-form-field-outline-start"),s=r.querySelectorAll(".mat-form-field-outline-gap");if(this._label&&this._label.nativeElement.children.length){const i=r.getBoundingClientRect();if(0===i.width&&0===i.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const s=this._getStartEnd(i),o=t.children,a=this._getStartEnd(o[0].getBoundingClientRect());let l=0;for(let t=0;t<o.length;t++)l+=o[t].offsetWidth;e=Math.abs(a-s)-5,n=l>0?.75*l+10:0}for(let o=0;o<i.length;o++)i[o].style.width=e+"px";for(let o=0;o<s.length;o++)s[o].style.width=n+"px";this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(t){return this._dir&&"rtl"===this._dir.value?t.right:t.left}_isAttachedToDOM(){const t=this._elementRef.nativeElement;if(t.getRootNode){const e=t.getRootNode();return e&&e!==t}return document.documentElement.contains(t)}}return t.\u0275fac=function(e){return new(e||t)(yo(Ca),yo(zs),yo(lw,8),yo(tm,8),yo(pv,8),yo(gA),yo(cu),yo(_y,8))},t.\u0275cmp=de({type:t,selectors:[["mat-form-field"]],contentQueries:function(t,e,n){var r;1&t&&(Dl(n,rv,!0),Ll(n,rv,!0),Dl(n,ov,!0),Ll(n,ov,!0),Dl(n,av,!0),Dl(n,ev,!0),Dl(n,sv,!0),Dl(n,lv,!0),Dl(n,uv,!0)),2&t&&(Fl(r=Ul())&&(e._controlNonStatic=r.first),Fl(r=Ul())&&(e._controlStatic=r.first),Fl(r=Ul())&&(e._labelChildNonStatic=r.first),Fl(r=Ul())&&(e._labelChildStatic=r.first),Fl(r=Ul())&&(e._placeholderChild=r.first),Fl(r=Ul())&&(e._errorChildren=r),Fl(r=Ul())&&(e._hintChildren=r),Fl(r=Ul())&&(e._prefixChildren=r),Fl(r=Ul())&&(e._suffixChildren=r))},viewQuery:function(t,e){var n;1&t&&(Rl(Ub,!0),Tl(Pb,!0),Rl(zb,!0),Rl(Qb,!0)),2&t&&(Fl(n=Ul())&&(e.underlineRef=n.first),Fl(n=Ul())&&(e._connectionContainerRef=n.first),Fl(n=Ul())&&(e._inputContainerRef=n.first),Fl(n=Ul())&&(e._label=n.first))},hostAttrs:[1,"mat-form-field"],hostVars:44,hostBindings:function(t,e){2&t&&jo("mat-form-field-appearance-standard","standard"==e.appearance)("mat-form-field-appearance-fill","fill"==e.appearance)("mat-form-field-appearance-outline","outline"==e.appearance)("mat-form-field-appearance-legacy","legacy"==e.appearance)("mat-form-field-invalid",e._control.errorState)("mat-form-field-can-float",e._canLabelFloat())("mat-form-field-should-float",e._shouldLabelFloat())("mat-form-field-has-label",e._hasFloatingLabel())("mat-form-field-hide-placeholder",e._hideControlPlaceholder())("mat-form-field-disabled",e._control.disabled)("mat-form-field-autofilled",e._control.autofilled)("mat-focused",e._control.focused)("mat-accent","accent"==e.color)("mat-warn","warn"==e.color)("ng-untouched",e._shouldForward("untouched"))("ng-touched",e._shouldForward("touched"))("ng-pristine",e._shouldForward("pristine"))("ng-dirty",e._shouldForward("dirty"))("ng-valid",e._shouldForward("valid"))("ng-invalid",e._shouldForward("invalid"))("ng-pending",e._shouldForward("pending"))("_mat-animation-noopable",!e._animationsEnabled)},inputs:{color:"color",floatLabel:"floatLabel",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[ba([{provide:fv,useExisting:t}]),la],ngContentSelectors:tv,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],["underline",""],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(t,e){1&t&&(Lo(Zb),xo(0,"div",0),xo(1,"div",1,2),Fo("click",(function(t){return e._control.onContainerClick&&e._control.onContainerClick(t)})),mo(3,Hb,9,0,"ng-container",3),mo(4,$b,2,0,"div",4),xo(5,"div",5,6),Mo(7),xo(8,"span",7),mo(9,Kb,5,16,"label",8),_o(),_o(),mo(10,Wb,2,0,"div",9),_o(),mo(11,Gb,3,4,"div",10),xo(12,"div",11),mo(13,Xb,2,1,"div",12),mo(14,Jb,5,2,"div",13),_o(),_o()),2&t&&(Ai(3),bo("ngIf","outline"==e.appearance),Ai(1),bo("ngIf",e._prefixChildren.length),Ai(5),bo("ngIf",e._hasFloatingLabel()),Ai(1),bo("ngIf",e._suffixChildren.length),Ai(1),bo("ngIf","outline"!=e.appearance),Ai(1),bo("ngSwitch",e._getDisplayedMessages()),Ai(1),bo("ngSwitchCase","error"),Ai(1),bo("ngSwitchCase","hint"))},directives:[Uc,Hc,$c,QA],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:scaleX(1);transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element::-ms-clear,.mat-input-element::-ms-reveal{display:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-moz-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-ms-expand{display:none}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}select.mat-input-element::-ms-value{color:inherit;background:none}.mat-focused .cdk-high-contrast-active select.mat-input-element::-ms-value{color:inherit}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px);-ms-transform:none}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[nv.transitionMessages]},changeDetection:0}),t})(),mv=(()=>{class t{}return t.\u0275mod=me({type:t}),t.\u0275inj=ct({factory:function(e){return new(e||t)},imports:[[Wc,Fy,HA],Fy]}),t})();class gv{constructor(t){this.durationSelector=t}call(t,e){return e.subscribe(new yv(t,this.durationSelector))}}class yv extends O{constructor(t,e){super(t),this.durationSelector=e,this.hasValue=!1}_next(t){if(this.value=t,this.hasValue=!0,!this.throttled){let n;try{const{durationSelector:e}=this;n=e(t)}catch(e){return this.destination.error(e)}const r=R(this,n);!r||r.closed?this.clearThrottle():this.add(this.throttled=r)}}clearThrottle(){const{value:t,hasValue:e,throttled:n}=this;n&&(this.remove(n),this.throttled=null,n.unsubscribe()),e&&(this.value=null,this.hasValue=!1,this.destination.next(t))}notifyNext(t,e,n,r){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}function wv(t){return!l(t)&&t-parseFloat(t)+1>=0}function bv(t){const{index:e,period:n,subscriber:r}=t;if(r.next(e),!r.closed){if(-1===n)return r.complete();t.index=e+1,this.schedule(t,n)}}function vv(t,e=NA){return n=()=>function(t=0,e,n){let r=-1;return wv(e)?r=Number(e)<1?1:Number(e):S(e)&&(n=e),S(n)||(n=NA),new y(e=>{const i=wv(t)?t:+t-n.now();return n.schedule(bv,i,{index:0,period:r,subscriber:e})})}(t,e),function(t){return t.lift(new gv(n))};var n}const xv=_A({passive:!0});let _v=(()=>{class t{constructor(t,e){this._platform=t,this._ngZone=e,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return Rh;const e=UA(t),n=this._monitoredElements.get(e);if(n)return n.subject.asObservable();const r=new _,i="cdk-text-field-autofilled",s=t=>{"cdk-text-field-autofill-start"!==t.animationName||e.classList.contains(i)?"cdk-text-field-autofill-end"===t.animationName&&e.classList.contains(i)&&(e.classList.remove(i),this._ngZone.run(()=>r.next({target:t.target,isAutofilled:!1}))):(e.classList.add(i),this._ngZone.run(()=>r.next({target:t.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{e.addEventListener("animationstart",s,xv),e.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(e,{subject:r,unlisten:()=>{e.removeEventListener("animationstart",s,xv)}}),r.asObservable()}stopMonitoring(t){const e=UA(t),n=this._monitoredElements.get(e);n&&(n.unlisten(),n.subject.complete(),e.classList.remove("cdk-text-field-autofill-monitored"),e.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(e))}ngOnDestroy(){this._monitoredElements.forEach((t,e)=>this.stopMonitoring(e))}}return t.\u0275fac=function(e){return new(e||t)(Kt(gA),Kt(cu))},t.\u0275prov=ut({factory:function(){return new t(Kt(gA),Kt(cu))},token:t,providedIn:"root"}),t})(),Cv=(()=>{class t{}return t.\u0275mod=me({type:t}),t.\u0275inj=ct({factory:function(e){return new(e||t)},imports:[[yA]]}),t})();function Sv(...t){if(1===t.length){const e=t[0];if(l(e))return Ev(e,null);if(u(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return Ev(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return Ev(t=1===t.length&&l(t[0])?t[0]:t,null).pipe(D(t=>e(...t)))}return Ev(t,null)}function Ev(t,e){return new y(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let s=0,o=0;for(let a=0;a<r;a++){const l=P(t[a]);let u=!1;n.add(l.subscribe({next:t=>{u||(u=!0,o++),i[a]=t},error:t=>n.error(t),complete:()=>{s++,s!==r&&u||(o===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}const Bv=new Mt("NgValueAccessor"),kv={provide:Bv,useExisting:xt(()=>Nv),multi:!0};let Nv=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"checked",t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(yo(ka),yo(Ca))},t.\u0275dir=ye({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,e){1&t&&Fo("change",(function(t){return e.onChange(t.target.checked)}))("blur",(function(){return e.onTouched()}))},features:[ba([kv])]}),t})();const Iv={provide:Bv,useExisting:xt(()=>Tv),multi:!0},Fv=new Mt("CompositionEventMode");let Tv=(()=>{class t{constructor(t,e,n){this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=t=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=zu()?zu().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(yo(ka),yo(Ca),yo(Fv,8))},t.\u0275dir=ye({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&Fo("input",(function(t){return e._handleInput(t.target.value)}))("blur",(function(){return e.onTouched()}))("compositionstart",(function(){return e._compositionStart()}))("compositionend",(function(t){return e._compositionEnd(t.target.value)}))},features:[ba([Iv])]}),t})(),Rv=(()=>{class t{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=ye({type:t}),t})(),Ov=(()=>{class t extends Rv{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(e){return Dv(e||t)},t.\u0275dir=ye({type:t,features:[la]}),t})();const Dv=ur(Ov);function Lv(){throw new Error("unimplemented")}class Mv extends Rv{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null,this._rawValidators=[],this._rawAsyncValidators=[]}get validator(){return Lv()}get asyncValidator(){return Lv()}}let Uv=(()=>{class t extends class{constructor(t){this._cd=t}get ngClassUntouched(){return!!this._cd.control&&this._cd.control.untouched}get ngClassTouched(){return!!this._cd.control&&this._cd.control.touched}get ngClassPristine(){return!!this._cd.control&&this._cd.control.pristine}get ngClassDirty(){return!!this._cd.control&&this._cd.control.dirty}get ngClassValid(){return!!this._cd.control&&this._cd.control.valid}get ngClassInvalid(){return!!this._cd.control&&this._cd.control.invalid}get ngClassPending(){return!!this._cd.control&&this._cd.control.pending}}{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(yo(Mv,2))},t.\u0275dir=ye({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&jo("ng-untouched",e.ngClassUntouched)("ng-touched",e.ngClassTouched)("ng-pristine",e.ngClassPristine)("ng-dirty",e.ngClassDirty)("ng-valid",e.ngClassValid)("ng-invalid",e.ngClassInvalid)("ng-pending",e.ngClassPending)},features:[la]}),t})();function Pv(t){return null==t||0===t.length}function zv(t){return null!=t&&"number"==typeof t.length}const Qv=new Mt("NgValidators"),Hv=new Mt("NgAsyncValidators"),$v=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Vv{static min(t){return e=>{if(Pv(e.value)||Pv(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}static max(t){return e=>{if(Pv(e.value)||Pv(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}static required(t){return Pv(t.value)?{required:!0}:null}static requiredTrue(t){return!0===t.value?null:{required:!0}}static email(t){return Pv(t.value)||$v.test(t.value)?null:{email:!0}}static minLength(t){return e=>Pv(e.value)||!zv(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}static maxLength(t){return e=>zv(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}static pattern(t){if(!t)return Vv.nullValidator;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),t=>{if(Pv(t.value))return null;const r=t.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}static nullValidator(t){return null}static compose(t){if(!t)return null;const e=t.filter(qv);return 0==e.length?null:function(t){return Kv(function(t,e){return e.map(e=>e(t))}(t,e))}}static composeAsync(t){if(!t)return null;const e=t.filter(qv);return 0==e.length?null:function(t){return Sv(function(t,e){return e.map(e=>e(t))}(t,e).map(jv)).pipe(D(Kv))}}}function qv(t){return null!=t}function jv(t){const e=No(t)?P(t):t;if(!Io(e))throw new Error("Expected validator to return Promise or Observable.");return e}function Kv(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function Wv(t){return t.validate?e=>t.validate(e):t}function Gv(t){return t.validate?e=>t.validate(e):t}const Xv={provide:Bv,useExisting:xt(()=>Yv),multi:!0};let Yv=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(yo(ka),yo(Ca))},t.\u0275dir=ye({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,e){1&t&&Fo("input",(function(t){return e.onChange(t.target.value)}))("blur",(function(){return e.onTouched()}))},features:[ba([Xv])]}),t})();const Jv={provide:Bv,useExisting:xt(()=>tx),multi:!0};let Zv=(()=>{class t{constructor(){this._accessors=[]}add(t,e){this._accessors.push([t,e])}remove(t){for(let e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)}select(t){this._accessors.forEach(e=>{this._isSameGroup(e,t)&&e[1]!==t&&e[1].fireUncheck(t.value)})}_isSameGroup(t,e){return!!t[0].control&&t[0]._parent===e._control._parent&&t[1].name===e.name}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),tx=(()=>{class t{constructor(t,e,n,r){this._renderer=t,this._elementRef=e,this._registry=n,this._injector=r,this.onChange=()=>{},this.onTouched=()=>{}}ngOnInit(){this._control=this._injector.get(Mv),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}fireUncheck(t){this.writeValue(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_checkName(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)}_throwNameError(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')}}return t.\u0275fac=function(e){return new(e||t)(yo(ka),yo(Ca),yo(Zv),yo(ro))},t.\u0275dir=ye({type:t,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(t,e){1&t&&Fo("change",(function(){return e.onChange()}))("blur",(function(){return e.onTouched()}))},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[ba([Jv])]}),t})();const ex={provide:Bv,useExisting:xt(()=>nx),multi:!0};let nx=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(t))}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(yo(ka),yo(Ca))},t.\u0275dir=ye({type:t,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(t,e){1&t&&Fo("change",(function(t){return e.onChange(t.target.value)}))("input",(function(t){return e.onChange(t.target.value)}))("blur",(function(){return e.onTouched()}))},features:[ba([ex])]}),t})();const rx='\n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });',ix='\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',sx='\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>',ox={provide:Bv,useExisting:xt(()=>ax),multi:!0};let ax=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){if("function"!=typeof t)throw new Error("compareWith must be a function, but received "+JSON.stringify(t));this._compareWith=t}writeValue(t){this.value=t;const e=this._getOptionId(t);null==e&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const n=function(t,e){return null==t?""+e:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}(e,t);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}registerOnChange(t){this.onChange=e=>{this.value=this._getOptionValue(e),t(this.value)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e),t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}}return t.\u0275fac=function(e){return new(e||t)(yo(ka),yo(Ca))},t.\u0275dir=ye({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,e){1&t&&Fo("change",(function(t){return e.onChange(t.target.value)}))("blur",(function(){return e.onTouched()}))},inputs:{compareWith:"compareWith"},features:[ba([ox])]}),t})();const lx={provide:Bv,useExisting:xt(()=>ux),multi:!0};let ux=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){if("function"!=typeof t)throw new Error("compareWith must be a function, but received "+JSON.stringify(t));this._compareWith=t}writeValue(t){let e;if(this.value=t,Array.isArray(t)){const n=t.map(t=>this._getOptionId(t));e=(t,e)=>{t._setSelected(n.indexOf(e.toString())>-1)}}else e=(t,e)=>{t._setSelected(!1)};this._optionMap.forEach(e)}registerOnChange(t){this.onChange=e=>{const n=[];if(void 0!==e.selectedOptions){const t=e.selectedOptions;for(let e=0;e<t.length;e++){const r=t.item(e),i=this._getOptionValue(r.value);n.push(i)}}else{const t=e.options;for(let e=0;e<t.length;e++){const r=t.item(e);if(r.selected){const t=this._getOptionValue(r.value);n.push(t)}}}this.value=n,t(n)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(t){const e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e)._value,t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}}return t.\u0275fac=function(e){return new(e||t)(yo(ka),yo(Ca))},t.\u0275dir=ye({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,e){1&t&&Fo("change",(function(t){return e.onChange(t.target)}))("blur",(function(){return e.onTouched()}))},inputs:{compareWith:"compareWith"},features:[ba([lx])]}),t})();function cx(t,e){return[...e.path,t]}function hx(t,e){t||Ax(e,"Cannot find control with"),e.valueAccessor||Ax(e,"No value accessor for form control with"),t.validator=Vv.compose([t.validator,e.validator]),t.asyncValidator=Vv.composeAsync([t.asyncValidator,e.asyncValidator]),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&dx(t,e)})}(t,e),function(t,e){t.registerOnChange((t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&dx(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),e.valueAccessor.setDisabledState&&t.registerOnDisabledChange(t=>{e.valueAccessor.setDisabledState(t)}),e._rawValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(()=>t.updateValueAndValidity())}),e._rawAsyncValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(()=>t.updateValueAndValidity())})}function dx(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function px(t,e){null==t&&Ax(e,"Cannot find control with"),t.validator=Vv.compose([t.validator,e.validator]),t.asyncValidator=Vv.composeAsync([t.asyncValidator,e.asyncValidator])}function fx(t){return Ax(t,"There is no FormControl instance attached to form control element with")}function Ax(t,e){let n;throw n=t.path.length>1?`path: '${t.path.join(" -> ")}'`:t.path[0]?`name: '${t.path}'`:"unspecified name attribute",new Error(`${e} ${n}`)}function mx(t){return null!=t?Vv.compose(t.map(Wv)):null}function gx(t){return null!=t?Vv.composeAsync(t.map(Gv)):null}const yx=[Nv,nx,Yv,ax,ux,tx];function wx(t,e){t._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)})}function bx(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function vx(t){const e=_x(t)?t.validators:t;return Array.isArray(e)?mx(e):e||null}function xx(t,e){const n=_x(e)?e.asyncValidators:t;return Array.isArray(n)?gx(n):n||null}function _x(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class Cx{constructor(t,e){this.validator=t,this.asyncValidator=e,this._onCollectionChange=()=>{},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}get parent(){return this._parent}get valid(){return"VALID"===this.status}get invalid(){return"INVALID"===this.status}get pending(){return"PENDING"==this.status}get disabled(){return"DISABLED"===this.status}get enabled(){return"DISABLED"!==this.status}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this.validator=vx(t)}setAsyncValidators(t){this.asyncValidator=xx(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status="PENDING",!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status="DISABLED",this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status="VALID",this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),"VALID"!==this.status&&"PENDING"!==this.status||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status="PENDING";const e=jv(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>this.setErrors(e,{emitEvent:t}))}}_cancelExistingSubscription(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof Ex?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof Bx&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new bl,this.statusChanges=new bl}_calculateStatus(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){_x(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&this._parent&&this._parent.dirty&&!this._parent._anyControlsDirty()}}class Sx extends Cx{constructor(t=null,e,n){super(vx(e),xx(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this._initObservables()}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_clearChangeFns(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=()=>{}}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class Ex extends Cx{constructor(t,e,n){super(vx(e),xx(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof Sx?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>t(this.controls[e],e))}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class Bx extends Cx{constructor(t,e,n){super(vx(e),xx(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof Sx?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error("Cannot find form control at index "+t)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const kx={provide:Ov,useExisting:xt(()=>Ix)},Nx=(()=>Promise.resolve(null))();let Ix=(()=>{class t extends Ov{constructor(t,e){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new bl,this.form=new Ex({},mx(t),gx(e))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Nx.then(()=>{const e=this._findContainer(t.path);t.control=e.registerControl(t.name,t.control),hx(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Nx.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name),bx(this._directives,t)})}addFormGroup(t){Nx.then(()=>{const e=this._findContainer(t.path),n=new Ex({});px(n,t),e.registerControl(t.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Nx.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,e){Nx.then(()=>{this.form.get(t.path).setValue(e)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,wx(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return t.\u0275fac=function(e){return new(e||t)(yo(Qv,10),yo(Hv,10))},t.\u0275dir=ye({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,e){1&t&&Fo("submit",(function(t){return e.onSubmit(t)}))("reset",(function(){return e.onReset()}))},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[ba([kx]),la]}),t})(),Fx=(()=>{class t extends Ov{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return cx(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return mx(this._validators)}get asyncValidator(){return gx(this._asyncValidators)}_checkParentType(){}}return t.\u0275fac=function(e){return Tx(e||t)},t.\u0275dir=ye({type:t,features:[la]}),t})();const Tx=ur(Fx);class Rx{static modelParentException(){throw new Error(`\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup's partner directive "formControlName" instead.  Example:\n\n      ${rx}\n\n      Or, if you'd like to avoid registering this form control, indicate that it's standalone in ngModelOptions:\n\n      Example:\n\n      \n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  `)}static formGroupNameException(){throw new Error(`\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      ${ix}\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      ${sx}`)}static missingNameException(){throw new Error('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')}static modelGroupParentException(){throw new Error(`\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      ${ix}\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      ${sx}`)}}const Ox={provide:Ov,useExisting:xt(()=>Dx)};let Dx=(()=>{class t extends Fx{constructor(t,e,n){super(),this._parent=t,this._validators=e,this._asyncValidators=n}_checkParentType(){this._parent instanceof t||this._parent instanceof Ix||Rx.modelGroupParentException()}}return t.\u0275fac=function(e){return new(e||t)(yo(Ov,5),yo(Qv,10),yo(Hv,10))},t.\u0275dir=ye({type:t,selectors:[["","ngModelGroup",""]],inputs:{name:["ngModelGroup","name"]},exportAs:["ngModelGroup"],features:[ba([Ox]),la]}),t})();const Lx={provide:Mv,useExisting:xt(()=>Ux)},Mx=(()=>Promise.resolve(null))();let Ux=(()=>{class t extends Mv{constructor(t,e,n,r){super(),this.control=new Sx,this._registered=!1,this.update=new bl,this._parent=t,this._rawValidators=e||[],this._rawAsyncValidators=n||[],this.valueAccessor=function(t,e){if(!e)return null;Array.isArray(e)||Ax(t,"Value accessor was not provided as an array for form control with");let n=void 0,r=void 0,i=void 0;return e.forEach(e=>{var s;e.constructor===Tv?n=e:(s=e,yx.some(t=>s.constructor===t)?(r&&Ax(t,"More than one built-in value accessor matches form control with"),r=e):(i&&Ax(t,"More than one custom value accessor matches form control with"),i=e))}),i||r||n||(Ax(t,"No valid value accessor for form control with"),null)}(this,r)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?cx(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return mx(this._rawValidators)}get asyncValidator(){return gx(this._rawAsyncValidators)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){hx(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){!(this._parent instanceof Dx)&&this._parent instanceof Fx?Rx.formGroupNameException():this._parent instanceof Dx||this._parent instanceof Ix||Rx.modelParentException()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()||this.name||Rx.missingNameException()}_updateValue(t){Mx.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const e=t.isDisabled.currentValue,n=""===e||e&&"false"!==e;Mx.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return t.\u0275fac=function(e){return new(e||t)(yo(Ov,9),yo(Qv,10),yo(Hv,10),yo(Bv,10))},t.\u0275dir=ye({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[ba([Lx]),la,Fe]}),t})();const Px={provide:Ov,useExisting:xt(()=>zx)};let zx=(()=>{class t extends Ov{constructor(t,e){super(),this._validators=t,this._asyncValidators=e,this.submitted=!1,this.directives=[],this.form=null,this.ngSubmit=new bl}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations())}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const e=this.form.get(t.path);return hx(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e}getControl(t){return this.form.get(t.path)}removeControl(t){bx(this.directives,t)}addFormGroup(t){const e=this.form.get(t.path);px(e,t),e.updateValueAndValidity({emitEvent:!1})}removeFormGroup(t){}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){const e=this.form.get(t.path);px(e,t),e.updateValueAndValidity({emitEvent:!1})}removeFormArray(t){}getFormArray(t){return this.form.get(t.path)}updateModel(t,e){this.form.get(t.path).setValue(e)}onSubmit(t){return this.submitted=!0,wx(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const e=this.form.get(t.path);t.control!==e&&(function(t,e){e.valueAccessor.registerOnChange(()=>fx(e)),e.valueAccessor.registerOnTouched(()=>fx(e)),e._rawValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(null)}),e._rawAsyncValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(null)}),t&&t._clearChangeFns()}(t.control,t),e&&hx(e,t),t.control=e)}),this.form._updateTreeValidity({emitEvent:!1})}_updateRegistrations(){this.form._registerOnCollectionChange(()=>this._updateDomValue()),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{}),this._oldForm=this.form}_updateValidators(){const t=mx(this._validators);this.form.validator=Vv.compose([this.form.validator,t]);const e=gx(this._asyncValidators);this.form.asyncValidator=Vv.composeAsync([this.form.asyncValidator,e])}_checkFormPresent(){this.form||class{static controlParentException(){throw new Error("formControlName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+rx)}static ngModelGroupException(){throw new Error(`formControlName cannot be used with an ngModelGroup parent. It is only compatible with parents\n       that also have a "form" prefix: formGroupName, formArrayName, or formGroup.\n\n       Option 1:  Update the parent to be formGroupName (reactive form strategy)\n\n        ${ix}\n\n        Option 2: Use ngModel instead of formControlName (template-driven strategy)\n\n        ${sx}`)}static missingFormException(){throw new Error("formGroup expects a FormGroup instance. Please pass one in.\n\n       Example:\n\n       "+rx)}static groupParentException(){throw new Error("formGroupName must be used with a parent formGroup directive.  You'll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+ix)}static arrayParentException(){throw new Error('formArrayName must be used with a parent formGroup directive.  You\'ll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n        Example:\n\n        \n    <div [formGroup]="myGroup">\n      <div formArrayName="cities">\n        <div *ngFor="let city of cityArray.controls; index as i">\n          <input [formControlName]="i">\n        </div>\n      </div>\n    </div>\n\n    In your class:\n\n    this.cityArray = new FormArray([new FormControl(\'SF\')]);\n    this.myGroup = new FormGroup({\n      cities: this.cityArray\n    });')}static disabledAttrWarning(){console.warn("\n      It looks like you're using the disabled attribute with a reactive form directive. If you set disabled to true\n      when you set up this control in your component class, the disabled attribute will actually be set in the DOM for\n      you. We recommend using this approach to avoid 'changed after checked' errors.\n\n      Example:\n      form = new FormGroup({\n        first: new FormControl({value: 'Nancy', disabled: true}, Validators.required),\n        last: new FormControl('Drew', Validators.required)\n      });\n    ")}static ngModelWarning(t){console.warn(`\n    It looks like you're using ngModel on the same form field as ${t}.\n    Support for using the ngModel input property and ngModelChange event with\n    reactive form directives has been deprecated in Angular v6 and will be removed\n    in a future version of Angular.\n\n    For more information on this, see our API docs here:\n    https://angular.io/api/forms/${"formControl"===t?"FormControlDirective":"FormControlName"}#use-with-ngmodel\n    `)}}.missingFormException()}}return t.\u0275fac=function(e){return new(e||t)(yo(Qv,10),yo(Hv,10))},t.\u0275dir=ye({type:t,selectors:[["","formGroup",""]],hostBindings:function(t,e){1&t&&Fo("submit",(function(t){return e.onSubmit(t)}))("reset",(function(){return e.onReset()}))},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[ba([Px]),la,Fe]}),t})(),Qx=(()=>{class t{}return t.\u0275mod=me({type:t}),t.\u0275inj=ct({factory:function(e){return new(e||t)}}),t})(),Hx=(()=>{class t{}return t.\u0275mod=me({type:t}),t.\u0275inj=ct({factory:function(e){return new(e||t)},providers:[Zv],imports:[Qx]}),t})();const $x=new Mt("MAT_INPUT_VALUE_ACCESSOR"),Vx=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let qx=0;class jx{constructor(t,e,n,r){this._defaultErrorStateMatcher=t,this._parentForm=e,this._parentFormGroup=n,this.ngControl=r}}const Kx=Ly(jx);let Wx=(()=>{class t extends Kx{constructor(t,e,n,r,i,s,o,a,l,u){super(s,r,i,n),this._elementRef=t,this._platform=e,this.ngControl=n,this._autofillMonitor=a,this._formField=u,this._uid="mat-input-"+qx++,this.focused=!1,this.stateChanges=new _,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._required=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(t=>bA().has(t));const c=this._elementRef.nativeElement,h=c.nodeName.toLowerCase();this._inputValueAccessor=o||c,this._previousNativeValue=this.value,this.id=this.id,e.IOS&&l.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",t=>{let e=t.target;e.value||e.selectionStart||e.selectionEnd||(e.setSelectionRange(1,1),e.setSelectionRange(0,0))})}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===h,this._isTextarea="textarea"===h,this._isNativeSelect&&(this.controlType=c.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=OA(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){return this._required}set required(t){this._required=OA(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&bA().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=OA(t)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}_focusChanged(t){t===this.focused||this.readonly&&t||(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){const t=this._formField,e=t&&t._hideControlPlaceholder()?null:this.placeholder;if(e!==this._previousPlaceholder){const t=this._elementRef.nativeElement;this._previousPlaceholder=e,e?t.setAttribute("placeholder",e):t.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_validateType(){if(Vx.indexOf(this._type)>-1)throw Error(`Input type "${this._type}" isn't supported by matInput.`)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,e=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&e&&e.label)}return this.focused||!this.empty}setDescribedByIds(t){this._ariaDescribedby=t.join(" ")}onContainerClick(){this.focused||this.focus()}}return t.\u0275fac=function(e){return new(e||t)(yo(Ca),yo(gA),yo(Mv,10),yo(Ix,8),yo(zx,8),yo(My),yo($x,10),yo(_v),yo(cu),yo(Av,8))},t.\u0275dir=ye({type:t,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:10,hostBindings:function(t,e){1&t&&Fo("focus",(function(){return e._focusChanged(!0)}))("blur",(function(){return e._focusChanged(!1)}))("input",(function(){return e._onInput()})),2&t&&(oa("disabled",e.disabled)("required",e.required),fo("id",e.id)("data-placeholder",e.placeholder)("readonly",e.readonly&&!e._isNativeSelect||null)("aria-describedby",e._ariaDescribedby||null)("aria-invalid",e.errorState)("aria-required",e.required.toString()),jo("mat-input-server",e._isServer))},inputs:{id:"id",disabled:"disabled",required:"required",type:"type",value:"value",readonly:"readonly",placeholder:"placeholder",errorStateMatcher:"errorStateMatcher"},exportAs:["matInput"],features:[ba([{provide:rv,useExisting:t}]),la,Fe]}),t})(),Gx=(()=>{class t{}return t.\u0275mod=me({type:t}),t.\u0275inj=ct({factory:function(e){return new(e||t)},providers:[My],imports:[[Cv,mv],Cv,mv]}),t})();const Xx=["*",[["mat-card-footer"]]],Yx=["*","mat-card-footer"],Jx=[[["","mat-card-avatar",""],["","matCardAvatar",""]],[["mat-card-title"],["mat-card-subtitle"],["","mat-card-title",""],["","mat-card-subtitle",""],["","matCardTitle",""],["","matCardSubtitle",""]],"*"],Zx=["[mat-card-avatar], [matCardAvatar]","mat-card-title, mat-card-subtitle,\n      [mat-card-title], [mat-card-subtitle],\n      [matCardTitle], [matCardSubtitle]","*"];let t_=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=ye({type:t,selectors:[["mat-card-content"],["","mat-card-content",""],["","matCardContent",""]],hostAttrs:[1,"mat-card-content"]}),t})(),e_=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=ye({type:t,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-card-title"]}),t})(),n_=(()=>{class t{constructor(){this.align="start"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=ye({type:t,selectors:[["mat-card-actions"]],hostAttrs:[1,"mat-card-actions"],hostVars:2,hostBindings:function(t,e){2&t&&jo("mat-card-actions-align-end","end"===e.align)},inputs:{align:"align"},exportAs:["matCardActions"]}),t})(),r_=(()=>{class t{constructor(t){this._animationMode=t}}return t.\u0275fac=function(e){return new(e||t)(yo(_y,8))},t.\u0275cmp=de({type:t,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(t,e){2&t&&jo("_mat-animation-noopable","NoopAnimations"===e._animationMode)},exportAs:["matCard"],ngContentSelectors:Yx,decls:2,vars:0,template:function(t,e){1&t&&(Lo(Xx),Mo(0),Mo(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}._mat-animation-noopable.mat-card{transition:none;animation:none}.mat-card .mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card .mat-divider-horizontal{left:auto;right:0}.mat-card .mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card .mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions .mat-button:first-child,.mat-card-actions .mat-raised-button:first-child,.mat-card-actions .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}\n"],encapsulation:2,changeDetection:0}),t})(),i_=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=de({type:t,selectors:[["mat-card-header"]],hostAttrs:[1,"mat-card-header"],ngContentSelectors:Zx,decls:4,vars:0,consts:[[1,"mat-card-header-text"]],template:function(t,e){1&t&&(Lo(Jx),Mo(0),xo(1,"div",0),Mo(2,1),_o(),Mo(3,2))},encapsulation:2,changeDetection:0}),t})(),s_=(()=>{class t{}return t.\u0275mod=me({type:t}),t.\u0275inj=ct({factory:function(e){return new(e||t)},imports:[[Fy],Fy]}),t})();class o_{}class a_{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(t=>{const e=t.indexOf(":");if(e>0){const n=t.slice(0,e),r=n.toLowerCase(),i=t.slice(e+1).trim();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(i):this.headers.set(r,[i])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const r=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof a_?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new a_;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof a_?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const i=t.value;if(i){let t=this.headers.get(e);if(!t)return;t=t.filter(t=>-1===i.indexOf(t)),0===t.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,t)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class l_{encodeKey(t){return u_(t)}encodeValue(t){return u_(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}function u_(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}class c_{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new l_,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const n=new Map;return t.length>0&&t.split("&").forEach(t=>{const r=t.indexOf("="),[i,s]=-1==r?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,r)),e.decodeValue(t.slice(r+1))],o=n.get(i)||[];o.push(s),n.set(i,o)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(t=>e+"="+this.encoder.encodeValue(t)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new c_({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat([t]),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(t.value),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let e=this.map.get(t.param)||[];const n=e.indexOf(t.value);-1!==n&&e.splice(n,1),e.length>0?this.map.set(t.param,e):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}function h_(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function d_(t){return"undefined"!=typeof Blob&&t instanceof Blob}function p_(t){return"undefined"!=typeof FormData&&t instanceof FormData}class f_{constructor(t,e,n,r){let i;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.params&&(this.params=i.params)),this.headers||(this.headers=new a_),this.params){const t=this.params.toString();if(0===t.length)this.urlWithParams=e;else{const n=e.indexOf("?");this.urlWithParams=e+(-1===n?"?":n<e.length-1?"&":"")+t}}else this.params=new c_,this.urlWithParams=e}serializeBody(){return null===this.body?null:h_(this.body)||d_(this.body)||p_(this.body)||"string"==typeof this.body?this.body:this.body instanceof c_?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||p_(this.body)?null:d_(this.body)?this.body.type||null:h_(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof c_?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}clone(t={}){const e=t.method||this.method,n=t.url||this.url,r=t.responseType||this.responseType,i=void 0!==t.body?t.body:this.body,s=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,o=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let a=t.headers||this.headers,l=t.params||this.params;return void 0!==t.setHeaders&&(a=Object.keys(t.setHeaders).reduce((e,n)=>e.set(n,t.setHeaders[n]),a)),t.setParams&&(l=Object.keys(t.setParams).reduce((e,n)=>e.set(n,t.setParams[n]),l)),new f_(e,n,i,{params:l,headers:a,reportProgress:o,responseType:r,withCredentials:s})}}var A_=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}({});class m_ extends class{constructor(t,e=200,n="OK"){this.headers=t.headers||new a_,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}{constructor(t={}){super(t),this.type=A_.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new m_({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}function g_(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let y_=(()=>{class t{constructor(t){this.handler=t}request(t,e,n={}){let r;if(t instanceof f_)r=t;else{let i=void 0;i=n.headers instanceof a_?n.headers:new a_(n.headers);let s=void 0;n.params&&(s=n.params instanceof c_?n.params:new c_({fromObject:n.params})),r=new f_(t,e,void 0!==n.body?n.body:null,{headers:i,params:s,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const i=Bh(r).pipe(gd(t=>this.handler.handle(t)));if(t instanceof f_||"events"===n.observe)return i;const s=i.pipe(Mh(t=>t instanceof m_));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return s.pipe(D(t=>{if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return s.pipe(D(t=>{if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return s.pipe(D(t=>{if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return s.pipe(D(t=>t.body))}case"response":return s;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(t,e={}){return this.request("DELETE",t,e)}get(t,e={}){return this.request("GET",t,e)}head(t,e={}){return this.request("HEAD",t,e)}jsonp(t,e){return this.request("JSONP",t,{params:(new c_).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,e={}){return this.request("OPTIONS",t,e)}patch(t,e,n={}){return this.request("PATCH",t,g_(n,e))}post(t,e,n={}){return this.request("POST",t,g_(n,e))}put(t,e,n={}){return this.request("PUT",t,g_(n,e))}}return t.\u0275fac=function(e){return new(e||t)(Kt(o_))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();const w_=["*"];function b_(t){return Error(`Unable to find icon with the name "${t}"`)}function v_(t){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${t}".`)}function x_(t){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${t}".`)}class __{constructor(t,e){this.options=e,t.nodeName?this.svgElement=t:this.url=t}}let C_=(()=>{class t{constructor(t,e,n,r){this._httpClient=t,this._sanitizer=e,this._errorHandler=r,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._defaultFontSetClass="material-icons",this._document=n}addSvgIcon(t,e,n){return this.addSvgIconInNamespace("",t,e,n)}addSvgIconLiteral(t,e,n){return this.addSvgIconLiteralInNamespace("",t,e,n)}addSvgIconInNamespace(t,e,n,r){return this._addSvgIconConfig(t,e,new __(n,r))}addSvgIconLiteralInNamespace(t,e,n,r){const i=this._sanitizer.sanitize(Wr.HTML,n);if(!i)throw x_(n);const s=this._createSvgElementForSingleIcon(i,r);return this._addSvgIconConfig(t,e,new __(s,r))}addSvgIconSet(t,e){return this.addSvgIconSetInNamespace("",t,e)}addSvgIconSetLiteral(t,e){return this.addSvgIconSetLiteralInNamespace("",t,e)}addSvgIconSetInNamespace(t,e,n){return this._addSvgIconSetConfig(t,new __(e,n))}addSvgIconSetLiteralInNamespace(t,e,n){const r=this._sanitizer.sanitize(Wr.HTML,e);if(!r)throw x_(e);const i=this._svgElementFromString(r);return this._addSvgIconSetConfig(t,new __(i,n))}registerFontClassAlias(t,e=t){return this._fontCssClassesByAlias.set(t,e),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const e=this._sanitizer.sanitize(Wr.RESOURCE_URL,t);if(!e)throw v_(t);const n=this._cachedIconsByUrl.get(e);return n?Bh(S_(n)):this._loadSvgIconFromConfig(new __(t)).pipe(sd(t=>this._cachedIconsByUrl.set(e,t)),D(t=>S_(t)))}getNamedSvgIcon(t,e=""){const n=E_(e,t),r=this._svgIconConfigs.get(n);if(r)return this._getSvgFromConfig(r);const i=this._iconSetConfigs.get(e);return i?this._getSvgFromIconSetConfigs(t,i):(s=b_(n),new y(t=>t.error(s)));var s}ngOnDestroy(){this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgElement?Bh(S_(t.svgElement)):this._loadSvgIconFromConfig(t).pipe(sd(e=>t.svgElement=e),D(t=>S_(t)))}_getSvgFromIconSetConfigs(t,e){const n=this._extractIconWithNameFromAnySet(t,e);return n?Bh(n):Sv(e.filter(t=>!t.svgElement).map(t=>this._loadSvgIconSetFromConfig(t).pipe(Yh(e=>{const n=this._sanitizer.sanitize(Wr.RESOURCE_URL,t.url);return this._errorHandler.handleError(new Error(`Loading icon set URL: ${n} failed: ${e.message}`)),Bh(null)})))).pipe(D(()=>{const n=this._extractIconWithNameFromAnySet(t,e);if(!n)throw b_(t);return n}))}_extractIconWithNameFromAnySet(t,e){for(let n=e.length-1;n>=0;n--){const r=e[n];if(r.svgElement){const e=this._extractSvgIconFromSet(r.svgElement,t,r.options);if(e)return e}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(D(e=>this._createSvgElementForSingleIcon(e,t.options)))}_loadSvgIconSetFromConfig(t){return t.svgElement?Bh(t.svgElement):this._fetchIcon(t).pipe(D(e=>(t.svgElement||(t.svgElement=this._svgElementFromString(e)),t.svgElement)))}_createSvgElementForSingleIcon(t,e){const n=this._svgElementFromString(t);return this._setSvgAttributes(n,e),n}_extractSvgIconFromSet(t,e,n){const r=t.querySelector(`[id="${e}"]`);if(!r)return null;const i=r.cloneNode(!0);if(i.removeAttribute("id"),"svg"===i.nodeName.toLowerCase())return this._setSvgAttributes(i,n);if("symbol"===i.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(i),n);const s=this._svgElementFromString("<svg></svg>");return s.appendChild(i),this._setSvgAttributes(s,n)}_svgElementFromString(t){const e=this._document.createElement("DIV");e.innerHTML=t;const n=e.querySelector("svg");if(!n)throw Error("<svg> tag not found");return n}_toSvgElement(t){const e=this._svgElementFromString("<svg></svg>"),n=t.attributes;for(let r=0;r<n.length;r++){const{name:t,value:i}=n[r];"id"!==t&&e.setAttribute(t,i)}for(let r=0;r<t.childNodes.length;r++)t.childNodes[r].nodeType===this._document.ELEMENT_NODE&&e.appendChild(t.childNodes[r].cloneNode(!0));return e}_setSvgAttributes(t,e){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),e&&e.viewBox&&t.setAttribute("viewBox",e.viewBox),t}_fetchIcon(t){var e;const{url:n,options:r}=t,i=null!==(e=null==r?void 0:r.withCredentials)&&void 0!==e&&e;if(!this._httpClient)throw Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.");if(null==n)throw Error(`Cannot fetch icon from URL "${n}".`);const s=this._sanitizer.sanitize(Wr.RESOURCE_URL,n);if(!s)throw v_(n);const o=this._inProgressUrlFetches.get(s);if(o)return o;const a=this._httpClient.get(s,{responseType:"text",withCredentials:i}).pipe(yd(()=>this._inProgressUrlFetches.delete(s)),Z());return this._inProgressUrlFetches.set(s,a),a}_addSvgIconConfig(t,e,n){return this._svgIconConfigs.set(E_(t,e),n),this}_addSvgIconSetConfig(t,e){const n=this._iconSetConfigs.get(t);return n?n.push(e):this._iconSetConfigs.set(t,[e]),this}}return t.\u0275fac=function(e){return new(e||t)(Kt(y_,8),Kt(xh),Kt(Qu,8),Kt(pr))},t.\u0275prov=ut({factory:function(){return new t(Kt(y_,8),Kt(xh),Kt(Qu,8),Kt(pr))},token:t,providedIn:"root"}),t})();function S_(t){return t.cloneNode(!0)}function E_(t,e){return t+":"+e}class B_{constructor(t){this._elementRef=t}}const k_=Ry(B_),N_=new Mt("mat-icon-location",{providedIn:"root",factory:function(){const t=Wt(Qu),e=t?t.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),I_=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],F_=I_.map(t=>`[${t}]`).join(", "),T_=/^url\(['"]?#(.*?)['"]?\)$/;let R_=(()=>{class t extends k_{constructor(t,e,n,r,i){super(t),this._iconRegistry=e,this._location=r,this._errorHandler=i,this._inline=!1,this._currentIconFetch=h.EMPTY,n||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=OA(t)}get fontSet(){return this._fontSet}set fontSet(t){this._fontSet=this._cleanupFontValue(t)}get fontIcon(){return this._fontIcon}set fontIcon(t){this._fontIcon=this._cleanupFontValue(t)}_splitIconName(t){if(!t)return["",""];const e=t.split(":");switch(e.length){case 1:return["",e[0]];case 2:return e;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnChanges(t){const e=t.svgIcon;if(e)if(this._currentIconFetch.unsubscribe(),this.svgIcon){const[t,e]=this._splitIconName(this.svgIcon);this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(e,t).pipe(td(1)).subscribe(t=>this._setSvgElement(t),n=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${t}:${e}! ${n.message}`))})}else e.previousValue&&this._clearSvgElement();this._usingFontIcon()&&this._updateFontIconClasses()}ngOnInit(){this._usingFontIcon()&&this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const t=this._location.getPathname();t!==this._previousPath&&(this._previousPath=t,this._prependPathToReferences(t))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const e=t.querySelectorAll("style");for(let r=0;r<e.length;r++)e[r].textContent+=" ";const n=this._location.getPathname();this._previousPath=n,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(n),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let e=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();e--;){const n=t.childNodes[e];1===n.nodeType&&"svg"!==n.nodeName.toLowerCase()||t.removeChild(n)}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,e=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();e!=this._previousFontSetClass&&(this._previousFontSetClass&&t.classList.remove(this._previousFontSetClass),e&&t.classList.add(e),this._previousFontSetClass=e),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const e=this._elementsWithExternalReferences;e&&e.forEach((e,n)=>{e.forEach(e=>{n.setAttribute(e.name,`url('${t}#${e.value}')`)})})}_cacheChildrenWithExternalReferences(t){const e=t.querySelectorAll(F_),n=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let r=0;r<e.length;r++)I_.forEach(t=>{const i=e[r],s=i.getAttribute(t),o=s?s.match(T_):null;if(o){let e=n.get(i);e||(e=[],n.set(i,e)),e.push({name:t,value:o[1]})}})}}return t.\u0275fac=function(e){return new(e||t)(yo(Ca),yo(C_),wo("aria-hidden"),yo(N_),yo(pr))},t.\u0275cmp=de({type:t,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:4,hostBindings:function(t,e){2&t&&jo("mat-icon-inline",e.inline)("mat-icon-no-color","primary"!==e.color&&"accent"!==e.color&&"warn"!==e.color)},inputs:{color:"color",inline:"inline",fontSet:"fontSet",fontIcon:"fontIcon",svgIcon:"svgIcon"},exportAs:["matIcon"],features:[la,Fe],ngContentSelectors:w_,decls:1,vars:0,template:function(t,e){1&t&&(Lo(),Mo(0))},styles:[".mat-icon{background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),t})(),O_=(()=>{class t{}return t.\u0275mod=me({type:t}),t.\u0275inj=ct({factory:function(e){return new(e||t)},imports:[[Fy],Fy]}),t})();var D_=function(t){return t[t.Text=0]="Text",t[t.Image=1]="Image",t[t.Subquestion=2]="Subquestion",t}({});class L_{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new M_(t,this.compare,this.keySelector))}}class M_ extends f{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}let U_=(()=>{class t{constructor(t,e,n){this._ngZone=t,this._platform=e,this._scrolled=new _,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=n}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const e=this.scrollContainers.get(t);e&&(e.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new y(e=>{this._globalSubscription||this._addGlobalListener();const n=t>0?this._scrolled.pipe(vv(t)).subscribe(e):this._scrolled.subscribe(e);return this._scrolledCount++,()=>{n.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Bh()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,e)=>this.deregister(e)),this._scrolled.complete()}ancestorScrolled(t,e){const n=this.getAncestorScrollContainers(t);return this.scrolled(e).pipe(Mh(t=>!t||n.indexOf(t)>-1))}getAncestorScrollContainers(t){const e=[];return this.scrollContainers.forEach((n,r)=>{this._scrollableContainsElement(r,t)&&e.push(r)}),e}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_scrollableContainsElement(t,e){let n=e.nativeElement,r=t.getElementRef().nativeElement;do{if(n==r)return!0}while(n=n.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Mb(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return t.\u0275fac=function(e){return new(e||t)(Kt(cu),Kt(gA),Kt(Qu,8))},t.\u0275prov=ut({factory:function(){return new t(Kt(cu),Kt(gA),Kt(Qu,8))},token:t,providedIn:"root"}),t})(),P_=(()=>{class t{constructor(t,e,n){this._platform=t,this._change=new _,this._changeListener=t=>{this._change.next(t)},this._document=n,e.runOutsideAngular(()=>{if(t.isBrowser){const t=this._getWindow();t.addEventListener("resize",this._changeListener),t.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._updateViewportSize())})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:e,height:n}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+n,right:t.left+e,height:n,width:e}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._getDocument(),e=this._getWindow(),n=t.documentElement,r=n.getBoundingClientRect();return{top:-r.top||t.body.scrollTop||e.scrollY||n.scrollTop||0,left:-r.left||t.body.scrollLeft||e.scrollX||n.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(vv(t)):this._change}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return t.\u0275fac=function(e){return new(e||t)(Kt(gA),Kt(cu),Kt(Qu,8))},t.\u0275prov=ut({factory:function(){return new t(Kt(gA),Kt(cu),Kt(Qu,8))},token:t,providedIn:"root"}),t})(),z_=(()=>{class t{}return t.\u0275mod=me({type:t}),t.\u0275inj=ct({factory:function(e){return new(e||t)}}),t})(),Q_=(()=>{class t{}return t.\u0275mod=me({type:t}),t.\u0275inj=ct({factory:function(e){return new(e||t)},imports:[[em,yA,z_],em,z_]}),t})();function H_(){throw Error("Host already has a portal attached")}class $_{attach(t){return null==t&&function(){throw Error("Attempting to attach a portal to a null PortalOutlet")}(),t.hasAttached()&&H_(),this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null==t?function(){throw Error("Attempting to detach a portal that is not attached to a host")}():(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class V_ extends $_{constructor(t,e,n,r){super(),this.component=t,this.viewContainerRef=e,this.injector=n,this.componentFactoryResolver=r}}class q_ extends $_{constructor(t,e,n){super(),this.templateRef=t,this.viewContainerRef=e,this.context=n}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class j_ extends $_{constructor(t){super(),this.element=t instanceof Ca?t.nativeElement:t}}class K_ extends class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t||function(){throw Error("Must provide a portal to attach")}(),this.hasAttached()&&H_(),this._isDisposed&&function(){throw Error("This PortalOutlet has already been disposed")}(),t instanceof V_?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof q_?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof j_?(this._attachedPortal=t,this.attachDomPortal(t)):void function(){throw Error("Attempting to attach an unknown Portal type. BasePortalOutlet accepts either a ComponentPortal or a TemplatePortal.")}()}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}{constructor(t,e,n,r,i){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=n,this._defaultInjector=r,this.attachDomPortal=t=>{if(!this._document)throw Error("Cannot attach DOM portal without _document constructor parameter");const e=t.element;if(!e.parentNode)throw Error("DOM portal content must be attached to a parent node.");const n=this._document.createComment("dom-portal");e.parentNode.insertBefore(n,e),this.outletElement.appendChild(e),super.setDisposeFn(()=>{n.parentNode&&n.parentNode.replaceChild(e,n)})},this._document=i}attachComponentPortal(t){const e=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let n;return t.viewContainerRef?(n=t.viewContainerRef.createComponent(e,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector),this.setDisposeFn(()=>n.destroy())):(n=e.create(t.injector||this._defaultInjector),this._appRef.attachView(n.hostView),this.setDisposeFn(()=>{this._appRef.detachView(n.hostView),n.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(n)),n}attachTemplatePortal(t){let e=t.viewContainerRef,n=e.createEmbeddedView(t.templateRef,t.context);return n.rootNodes.forEach(t=>this.outletElement.appendChild(t)),n.detectChanges(),this.setDisposeFn(()=>{let t=e.indexOf(n);-1!==t&&e.remove(t)}),n}dispose(){super.dispose(),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let W_=(()=>{class t{}return t.\u0275mod=me({type:t}),t.\u0275inj=ct({factory:function(e){return new(e||t)}}),t})();class G_{constructor(t,e){this.predicate=t,this.inclusive=e}call(t,e){return e.subscribe(new X_(t,this.predicate,this.inclusive))}}class X_ extends f{constructor(t,e,n){super(t),this.predicate=e,this.inclusive=n,this.index=0}_next(t){const e=this.destination;let n;try{n=this.predicate(t,this.index++)}catch(r){return void e.error(r)}this.nextOrComplete(t,n)}nextOrComplete(t,e){const n=this.destination;Boolean(e)?n.next(t):(this.inclusive&&n.next(t),n.complete())}}class Y_{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=MA(-this._previousScrollPosition.left),t.style.top=MA(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,e=t.style,n=this._document.body.style,r=e.scrollBehavior||"",i=n.scrollBehavior||"";this._isEnabled=!1,e.left=this._previousHTMLStyles.left,e.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),e.scrollBehavior=n.scrollBehavior="auto",window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),e.scrollBehavior=r,n.scrollBehavior=i}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,e=this._viewportRuler.getViewportSize();return t.scrollHeight>e.height||t.scrollWidth>e.width}}function J_(){return Error("Scroll strategy has already been attached.")}class Z_{constructor(t,e,n,r){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=n,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){if(this._overlayRef)throw J_();this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class tC{enable(){}disable(){}attach(){}}function eC(t,e){return e.some(e=>t.bottom<e.top||t.top>e.bottom||t.right<e.left||t.left>e.right)}function nC(t,e){return e.some(e=>t.top<e.top||t.bottom>e.bottom||t.left<e.left||t.right>e.right)}class rC{constructor(t,e,n,r){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=n,this._config=r,this._scrollSubscription=null}attach(t){if(this._overlayRef)throw J_();this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:e,height:n}=this._viewportRuler.getViewportSize();eC(t,[{width:e,height:n,bottom:n,right:e,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let iC=(()=>{class t{constructor(t,e,n,r){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=n,this.noop=()=>new tC,this.close=t=>new Z_(this._scrollDispatcher,this._ngZone,this._viewportRuler,t),this.block=()=>new Y_(this._viewportRuler,this._document),this.reposition=t=>new rC(this._scrollDispatcher,this._viewportRuler,this._ngZone,t),this._document=r}}return t.\u0275fac=function(e){return new(e||t)(Kt(U_),Kt(P_),Kt(cu),Kt(Qu))},t.\u0275prov=ut({factory:function(){return new t(Kt(U_),Kt(P_),Kt(cu),Kt(Qu))},token:t,providedIn:"root"}),t})();class sC{constructor(t){if(this.scrollStrategy=new tC,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,this.excludeFromOutsideClick=[],t){const e=Object.keys(t);for(const n of e)void 0!==t[n]&&(this[n]=t[n])}}}class oC{constructor(t,e,n,r,i){this.offsetX=n,this.offsetY=r,this.panelClass=i,this.originX=t.originX,this.originY=t.originY,this.overlayX=e.overlayX,this.overlayY=e.overlayY}}class aC{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}function lC(t,e){if("top"!==e&&"bottom"!==e&&"center"!==e)throw Error(`ConnectedPosition: Invalid ${t} "${e}". Expected "top", "bottom" or "center".`)}function uC(t,e){if("start"!==e&&"end"!==e&&"center"!==e)throw Error(`ConnectedPosition: Invalid ${t} "${e}". Expected "start", "end" or "center".`)}let cC=(()=>{class t{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const e=this._attachedOverlays.indexOf(t);e>-1&&this._attachedOverlays.splice(e,1),0===this._attachedOverlays.length&&this.detach()}}return t.\u0275fac=function(e){return new(e||t)(Kt(Qu))},t.\u0275prov=ut({factory:function(){return new t(Kt(Qu))},token:t,providedIn:"root"}),t})(),hC=(()=>{class t extends cC{constructor(t){super(t),this._keydownListener=t=>{const e=this._attachedOverlays;for(let n=e.length-1;n>-1;n--)if(e[n]._keydownEvents.observers.length>0){e[n]._keydownEvents.next(t);break}}}add(t){super.add(t),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return t.\u0275fac=function(e){return new(e||t)(Kt(Qu))},t.\u0275prov=ut({factory:function(){return new t(Kt(Qu))},token:t,providedIn:"root"}),t})(),dC=(()=>{class t extends cC{constructor(t,e){super(t),this._platform=e,this._cursorStyleIsSet=!1,this._clickListener=t=>{const e=t.composedPath?t.composedPath()[0]:t.target,n=this._attachedOverlays;for(let r=n.length-1;r>-1;r--){const i=n[r];if(!(i._outsidePointerEvents.observers.length<1)){if([...i.getConfig().excludeFromOutsideClick,i.overlayElement].some(t=>t.contains(e)))break;i._outsidePointerEvents.next(t)}}}}add(t){super.add(t),this._isAttached||(this._document.body.addEventListener("click",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=this._document.body.style.cursor,this._document.body.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("click",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(this._document.body.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1)}}return t.\u0275fac=function(e){return new(e||t)(Kt(Qu),Kt(gA))},t.\u0275prov=ut({factory:function(){return new t(Kt(Qu),Kt(gA))},token:t,providedIn:"root"}),t})();const pC=!("undefined"==typeof window||!window||!window.__karma__&&!window.jasmine);let fC=(()=>{class t{constructor(t,e){this._platform=e,this._document=t}ngOnDestroy(){const t=this._containerElement;t&&t.parentNode&&t.parentNode.removeChild(t)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t=this._platform?this._platform.isBrowser:"undefined"!=typeof window;if(t||pC){const t=this._document.querySelectorAll('.cdk-overlay-container[platform="server"], .cdk-overlay-container[platform="test"]');for(let e=0;e<t.length;e++)t[e].parentNode.removeChild(t[e])}const e=this._document.createElement("div");e.classList.add("cdk-overlay-container"),pC?e.setAttribute("platform","test"):t||e.setAttribute("platform","server"),this._document.body.appendChild(e),this._containerElement=e}}return t.\u0275fac=function(e){return new(e||t)(Kt(Qu),Kt(gA))},t.\u0275prov=ut({factory:function(){return new t(Kt(Qu),Kt(gA))},token:t,providedIn:"root"}),t})();class AC{constructor(t,e,n,r,i,s,o,a,l){this._portalOutlet=t,this._host=e,this._pane=n,this._config=r,this._ngZone=i,this._keyboardDispatcher=s,this._document=o,this._location=a,this._outsideClickDispatcher=l,this._backdropElement=null,this._backdropClick=new _,this._attachments=new _,this._detachments=new _,this._locationChanges=h.EMPTY,this._backdropClickHandler=t=>this._backdropClick.next(t),this._keydownEvents=new _,this._outsidePointerEvents=new _,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){let e=this._portalOutlet.attach(t);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.asObservable().pipe(td(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&this._location&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher&&this._outsideClickDispatcher.add(this),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher&&this._outsideClickDispatcher.remove(this),t}dispose(){const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this.detachBackdrop(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher&&this._outsideClickDispatcher.remove(this),this._host&&this._host.parentNode&&(this._host.parentNode.removeChild(this._host),this._host=null),this._previousHostParent=this._pane=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick.asObservable()}attachments(){return this._attachments.asObservable()}detachments(){return this._detachments.asObservable()}keydownEvents(){return this._keydownEvents.asObservable()}outsidePointerEvents(){return this._outsidePointerEvents.asObservable()}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=Object.assign(Object.assign({},this._config),t),this._updateElementSize()}setDirection(t){this._config=Object.assign(Object.assign({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=MA(this._config.width),t.height=MA(this._config.height),t.minWidth=MA(this._config.minWidth),t.minHeight=MA(this._config.minHeight),t.maxWidth=MA(this._config.maxWidth),t.maxHeight=MA(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"auto":"none"}_attachBackdrop(){this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add("cdk-overlay-backdrop-showing")})}):this._backdropElement.classList.add("cdk-overlay-backdrop-showing")}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let t,e=this._backdropElement;if(!e)return;let n=()=>{e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",n),e.parentNode&&e.parentNode.removeChild(e)),this._backdropElement==e&&(this._backdropElement=null),this._config.backdropClass&&this._toggleClasses(e,this._config.backdropClass,!1),clearTimeout(t)};e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",n)}),e.style.pointerEvents="none",t=this._ngZone.runOutsideAngular(()=>setTimeout(n,500))}_toggleClasses(t,e,n){const r=t.classList;LA(e).forEach(t=>{t&&(n?r.add(t):r.remove(t))})}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.asObservable().pipe(yw(q(this._attachments,this._detachments))).subscribe(()=>{this._pane&&this._host&&0!==this._pane.children.length||(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._previousHostParent.removeChild(this._host)),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}}const mC=/([A-Za-z%]+)$/;class gC{constructor(t,e,n,r,i){this._viewportRuler=e,this._document=n,this._platform=r,this._overlayContainer=i,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new _,this._resizeSubscription=h.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges.asObservable(),this.setOrigin(t)}get positions(){return this._preferredPositions}attach(t){if(this._overlayRef&&t!==this._overlayRef)throw Error("This position strategy is already attached to an overlay");this._validatePositions(),t.hostElement.classList.add("cdk-overlay-connected-position-bounding-box"),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const t=this._originRect,e=this._overlayRect,n=this._viewportRect,r=[];let i;for(let s of this._preferredPositions){let o=this._getOriginPoint(t,s),a=this._getOverlayPoint(o,e,s),l=this._getOverlayFit(a,e,n,s);if(l.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(s,o);this._canFitWithFlexibleDimensions(l,a,n)?r.push({position:s,origin:o,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(o,s)}):(!i||i.overlayFit.visibleArea<l.visibleArea)&&(i={overlayFit:l,overlayPoint:a,originPoint:o,position:s,overlayRect:e})}if(r.length){let t=null,e=-1;for(const n of r){const r=n.boundingBoxRect.width*n.boundingBoxRect.height*(n.position.weight||1);r>e&&(e=r,t=n)}return this._isPushed=!1,void this._applyPosition(t.position,t.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(i.position,i.originPoint);this._applyPosition(i.position,i.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&yC(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove("cdk-overlay-connected-position-bounding-box"),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const t=this._lastPosition||this._preferredPositions[0],e=this._getOriginPoint(this._originRect,t);this._applyPosition(t,e)}}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e){let n,r;if("center"==e.originX)n=t.left+t.width/2;else{const r=this._isRtl()?t.right:t.left,i=this._isRtl()?t.left:t.right;n="start"==e.originX?r:i}return r="center"==e.originY?t.top+t.height/2:"top"==e.originY?t.top:t.bottom,{x:n,y:r}}_getOverlayPoint(t,e,n){let r,i;return r="center"==n.overlayX?-e.width/2:"start"===n.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,i="center"==n.overlayY?-e.height/2:"top"==n.overlayY?0:-e.height,{x:t.x+r,y:t.y+i}}_getOverlayFit(t,e,n,r){let{x:i,y:s}=t,o=this._getOffset(r,"x"),a=this._getOffset(r,"y");o&&(i+=o),a&&(s+=a);let l=0-s,u=s+e.height-n.height,c=this._subtractOverflows(e.width,0-i,i+e.width-n.width),h=this._subtractOverflows(e.height,l,u),d=c*h;return{visibleArea:d,isCompletelyWithinViewport:e.width*e.height===d,fitsInViewportVertically:h===e.height,fitsInViewportHorizontally:c==e.width}}_canFitWithFlexibleDimensions(t,e,n){if(this._hasFlexibleDimensions){const r=n.bottom-e.y,i=n.right-e.x,s=wC(this._overlayRef.getConfig().minHeight),o=wC(this._overlayRef.getConfig().minWidth),a=t.fitsInViewportHorizontally||null!=o&&o<=i;return(t.fitsInViewportVertically||null!=s&&s<=r)&&a}return!1}_pushOverlayOnScreen(t,e,n){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const r=this._viewportRect,i=Math.max(t.x+e.width-r.right,0),s=Math.max(t.y+e.height-r.bottom,0),o=Math.max(r.top-n.top-t.y,0),a=Math.max(r.left-n.left-t.x,0);let l=0,u=0;return l=e.width<=r.width?a||-i:t.x<this._viewportMargin?r.left-n.left-t.x:0,u=e.height<=r.height?o||-s:t.y<this._viewportMargin?r.top-n.top-t.y:0,this._previousPushAmount={x:l,y:u},{x:t.x+l,y:t.y+u}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const e=this._getScrollVisibility(),n=new aC(t,e);this._positionChanges.next(n)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let n,r=t.overlayY;n="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let i=0;i<e.length;i++)e[i].style.transformOrigin=`${n} ${r}`}_calculateBoundingBoxRect(t,e){const n=this._viewportRect,r=this._isRtl();let i,s,o,a,l,u;if("top"===e.overlayY)s=t.y,i=n.height-s+this._viewportMargin;else if("bottom"===e.overlayY)o=n.height-t.y+2*this._viewportMargin,i=n.height-o+this._viewportMargin;else{const e=Math.min(n.bottom-t.y+n.top,t.y),r=this._lastBoundingBoxSize.height;i=2*e,s=t.y-e,i>r&&!this._isInitialRender&&!this._growAfterOpen&&(s=t.y-r/2)}if("end"===e.overlayX&&!r||"start"===e.overlayX&&r)u=n.width-t.x+this._viewportMargin,a=t.x-this._viewportMargin;else if("start"===e.overlayX&&!r||"end"===e.overlayX&&r)l=t.x,a=n.right-t.x;else{const e=Math.min(n.right-t.x+n.left,t.x),r=this._lastBoundingBoxSize.width;a=2*e,l=t.x-e,a>r&&!this._isInitialRender&&!this._growAfterOpen&&(l=t.x-r/2)}return{top:s,left:l,bottom:o,right:u,width:a,height:i}}_setBoundingBoxStyles(t,e){const n=this._calculateBoundingBoxRect(t,e);this._isInitialRender||this._growAfterOpen||(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const t=this._overlayRef.getConfig().maxHeight,i=this._overlayRef.getConfig().maxWidth;r.height=MA(n.height),r.top=MA(n.top),r.bottom=MA(n.bottom),r.width=MA(n.width),r.left=MA(n.left),r.right=MA(n.right),r.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",r.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",t&&(r.maxHeight=MA(t)),i&&(r.maxWidth=MA(i))}this._lastBoundingBoxSize=n,yC(this._boundingBox.style,r)}_resetBoundingBoxStyles(){yC(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){yC(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const n={},r=this._hasExactPosition(),i=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(r){const r=this._viewportRuler.getViewportScrollPosition();yC(n,this._getExactOverlayY(e,t,r)),yC(n,this._getExactOverlayX(e,t,r))}else n.position="static";let o="",a=this._getOffset(e,"x"),l=this._getOffset(e,"y");a&&(o+=`translateX(${a}px) `),l&&(o+=`translateY(${l}px)`),n.transform=o.trim(),s.maxHeight&&(r?n.maxHeight=MA(s.maxHeight):i&&(n.maxHeight="")),s.maxWidth&&(r?n.maxWidth=MA(s.maxWidth):i&&(n.maxWidth="")),yC(this._pane.style,n)}_getExactOverlayY(t,e,n){let r={top:"",bottom:""},i=this._getOverlayPoint(e,this._overlayRect,t);this._isPushed&&(i=this._pushOverlayOnScreen(i,this._overlayRect,n));let s=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return i.y-=s,"bottom"===t.overlayY?r.bottom=this._document.documentElement.clientHeight-(i.y+this._overlayRect.height)+"px":r.top=MA(i.y),r}_getExactOverlayX(t,e,n){let r,i={left:"",right:""},s=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,n)),r=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===r?i.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":i.left=MA(s.x),i}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),n=this._scrollables.map(t=>t.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:nC(t,n),isOriginOutsideView:eC(t,n),isOverlayClipped:nC(e,n),isOverlayOutsideView:eC(e,n)}}_subtractOverflows(t,...e){return e.reduce((t,e)=>t-Math.max(e,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+t-this._viewportMargin,bottom:n.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?null==t.offsetX?this._offsetX:t.offsetX:null==t.offsetY?this._offsetY:t.offsetY}_validatePositions(){if(!this._preferredPositions.length)throw Error("FlexibleConnectedPositionStrategy: At least one position is required.");this._preferredPositions.forEach(t=>{uC("originX",t.originX),lC("originY",t.originY),uC("overlayX",t.overlayX),lC("overlayY",t.overlayY)})}_addPanelClasses(t){this._pane&&LA(t).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof Ca)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,n=t.height||0;return{top:t.y,bottom:t.y+n,left:t.x,right:t.x+e,height:n,width:e}}}function yC(t,e){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function wC(t){if("number"!=typeof t&&null!=t){const[e,n]=t.split(mC);return n&&"px"!==n?null:parseFloat(e)}return t||null}class bC{constructor(t,e,n,r,i,s,o){this._preferredPositions=[],this._positionStrategy=new gC(n,r,i,s,o).withFlexibleDimensions(!1).withPush(!1).withViewportMargin(0),this.withFallbackPosition(t,e)}get onPositionChange(){return this._positionStrategy.positionChanges}get positions(){return this._preferredPositions}attach(t){this._overlayRef=t,this._positionStrategy.attach(t),this._direction&&(t.setDirection(this._direction),this._direction=null)}dispose(){this._positionStrategy.dispose()}detach(){this._positionStrategy.detach()}apply(){this._positionStrategy.apply()}recalculateLastPosition(){this._positionStrategy.reapplyLastPosition()}withScrollableContainers(t){this._positionStrategy.withScrollableContainers(t)}withFallbackPosition(t,e,n,r){const i=new oC(t,e,n,r);return this._preferredPositions.push(i),this._positionStrategy.withPositions(this._preferredPositions),this}withDirection(t){return this._overlayRef?this._overlayRef.setDirection(t):this._direction=t,this}withOffsetX(t){return this._positionStrategy.withDefaultOffsetX(t),this}withOffsetY(t){return this._positionStrategy.withDefaultOffsetY(t),this}withLockedPosition(t){return this._positionStrategy.withLockedPosition(t),this}withPositions(t){return this._preferredPositions=t.slice(),this._positionStrategy.withPositions(this._preferredPositions),this}setOrigin(t){return this._positionStrategy.setOrigin(t),this}}class vC{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add("cdk-global-overlay-wrapper"),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._rightOffset="",this._leftOffset=t,this._justifyContent="flex-start",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._leftOffset="",this._rightOffset=t,this._justifyContent="flex-end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._justifyContent="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig(),{width:r,height:i,maxWidth:s,maxHeight:o}=n,a=!("100%"!==r&&"100vw"!==r||s&&"100%"!==s&&"100vw"!==s),l=!("100%"!==i&&"100vh"!==i||o&&"100%"!==o&&"100vh"!==o);t.position=this._cssPosition,t.marginLeft=a?"0":this._leftOffset,t.marginTop=l?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=this._rightOffset,a?e.justifyContent="flex-start":"center"===this._justifyContent?e.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?e.justifyContent="flex-end":"flex-end"===this._justifyContent&&(e.justifyContent="flex-start"):e.justifyContent=this._justifyContent,e.alignItems=l?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,n=e.style;e.classList.remove("cdk-global-overlay-wrapper"),n.justifyContent=n.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let xC=(()=>{class t{constructor(t,e,n,r){this._viewportRuler=t,this._document=e,this._platform=n,this._overlayContainer=r}global(){return new vC}connectedTo(t,e,n){return new bC(e,n,t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}flexibleConnectedTo(t){return new gC(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return t.\u0275fac=function(e){return new(e||t)(Kt(P_),Kt(Qu),Kt(gA),Kt(fC))},t.\u0275prov=ut({factory:function(){return new t(Kt(P_),Kt(Qu),Kt(gA),Kt(fC))},token:t,providedIn:"root"}),t})(),_C=0,CC=(()=>{class t{constructor(t,e,n,r,i,s,o,a,l,u,c){this.scrollStrategies=t,this._overlayContainer=e,this._componentFactoryResolver=n,this._positionBuilder=r,this._keyboardDispatcher=i,this._injector=s,this._ngZone=o,this._document=a,this._directionality=l,this._location=u,this._outsideClickDispatcher=c}create(t){const e=this._createHostElement(),n=this._createPaneElement(e),r=this._createPortalOutlet(n),i=new sC(t);return i.direction=i.direction||this._directionality.value,new AC(r,e,n,i,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(t){const e=this._document.createElement("div");return e.id="cdk-overlay-"+_C++,e.classList.add("cdk-overlay-pane"),t.appendChild(e),e}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(Nu)),new K_(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return t.\u0275fac=function(e){return new(e||t)(Kt(iC),Kt(fC),Kt(_a),Kt(xC),Kt(hC),Kt(ro),Kt(cu),Kt(Qu),Kt(tm),Kt(nc,8),Kt(dC,8))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();const SC=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],EC=new Mt("cdk-connected-overlay-scroll-strategy");let BC=(()=>{class t{constructor(t){this.elementRef=t}}return t.\u0275fac=function(e){return new(e||t)(yo(Ca))},t.\u0275dir=ye({type:t,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]}),t})(),kC=(()=>{class t{constructor(t,e,n,r,i){this._overlay=t,this._dir=i,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=h.EMPTY,this._attachSubscription=h.EMPTY,this._detachSubscription=h.EMPTY,this._positionSubscription=h.EMPTY,this.viewportMargin=0,this.open=!1,this.backdropClick=new bl,this.positionChange=new bl,this.attach=new bl,this.detach=new bl,this.overlayKeydown=new bl,this.overlayOutsideClick=new bl,this._templatePortal=new q_(e,n),this._scrollStrategyFactory=r,this.scrollStrategy=this._scrollStrategyFactory()}get offsetX(){return this._offsetX}set offsetX(t){this._offsetX=t,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(t){this._offsetY=t,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(t){this._hasBackdrop=OA(t)}get lockPosition(){return this._lockPosition}set lockPosition(t){this._lockPosition=OA(t)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(t){this._flexibleDimensions=OA(t)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(t){this._growAfterOpen=OA(t)}get push(){return this._push}set push(t){this._push=OA(t)}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(t){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),t.origin&&this.open&&this._position.apply()),t.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){this.positions&&this.positions.length||(this.positions=SC);const t=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=t.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=t.detachments().subscribe(()=>this.detach.emit()),t.keydownEvents().subscribe(t=>{this.overlayKeydown.next(t),27!==t.keyCode||CA(t)||(t.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(t=>{this.overlayOutsideClick.next(t)})}_buildConfig(){const t=this._position=this.positionStrategy||this._createPositionStrategy(),e=new sC({direction:this._dir,positionStrategy:t,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(e.width=this.width),(this.height||0===this.height)&&(e.height=this.height),(this.minWidth||0===this.minWidth)&&(e.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(e.minHeight=this.minHeight),this.backdropClass&&(e.backdropClass=this.backdropClass),this.panelClass&&(e.panelClass=this.panelClass),e}_updatePositionStrategy(t){const e=this.positions.map(t=>({originX:t.originX,originY:t.originY,overlayX:t.overlayX,overlayY:t.overlayY,offsetX:t.offsetX||this.offsetX,offsetY:t.offsetY||this.offsetY,panelClass:t.panelClass||void 0}));return t.setOrigin(this.origin.elementRef).withPositions(e).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const t=this._overlay.position().flexibleConnectedTo(this.origin.elementRef);return this._updatePositionStrategy(t),t}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(t=>{this.backdropClick.emit(t)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(function(t,e=!1){return n=>n.lift(new G_(t,e))}(()=>this.positionChange.observers.length>0)).subscribe(t=>{this.positionChange.emit(t),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(yo(CC),yo(Wa),yo(Xa),yo(EC),yo(tm,8))},t.\u0275dir=ye({type:t,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],open:["cdkConnectedOverlayOpen","open"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"],positions:["cdkConnectedOverlayPositions","positions"],origin:["cdkConnectedOverlayOrigin","origin"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[Fe]}),t})();const NC={provide:EC,deps:[CC],useFactory:function(t){return()=>t.scrollStrategies.reposition()}};let IC=(()=>{class t{}return t.\u0275mod=me({type:t}),t.\u0275inj=ct({factory:function(e){return new(e||t)},providers:[CC,NC],imports:[[em,W_,Q_],Q_]}),t})();const FC=["trigger"],TC=["panel"];function RC(t,e){if(1&t&&(xo(0,"span",8),ra(1),_o()),2&t){const t=Oo();Ai(1),ia(t.placeholder||"\xa0")}}function OC(t,e){if(1&t&&(xo(0,"span"),ra(1),_o()),2&t){const t=Oo(2);Ai(1),ia(t.triggerValue||"\xa0")}}function DC(t,e){1&t&&Mo(0,0,["*ngSwitchCase","true"])}function LC(t,e){1&t&&(xo(0,"span",9),mo(1,OC,2,1,"span",10),mo(2,DC,1,0,"ng-content",11),_o()),2&t&&(bo("ngSwitch",!!Oo().customTrigger),Ai(2),bo("ngSwitchCase",!0))}function MC(t,e){if(1&t){const t=ko();xo(0,"div",12),xo(1,"div",13,14),Fo("@transformPanel.done",(function(e){return en(t),Oo()._panelDoneAnimatingStream.next(e.toState)}))("keydown",(function(e){return en(t),Oo()._handleKeydown(e)})),Mo(3,1),_o(),_o()}if(2&t){const t=Oo();bo("@transformPanelWrap",void 0),Ai(1),n="mat-select-panel ",r=t._getPanelTheme(),i="",function(t,e,n,r){const i=tn(),s=hn(2);i.firstUpdatePass&&Xo(i,null,s,!0);const o=Ze();if(n!==ci&&po(o,s,n)){const r=i.data[_n()+20];if(na(r,!0)&&!Go(i,s)){let t=r.classesWithoutHost;null!==t&&(n=bt(t,n||"")),vo(i,r,o,n,!0)}else!function(t,e,n,r,i,s,o,a){i===ci&&(i=Uo);let l=0,u=0,c=0<i.length?i[0]:null,h=0<s.length?s[0]:null;for(;null!==c||null!==h;){const o=l<i.length?i[l+1]:void 0,d=u<s.length?s[u+1]:void 0;let p=null,f=void 0;c===h?(l+=2,u+=2,o!==d&&(p=h,f=d)):null===h||null!==c&&c<h?(l+=2,p=c):(u+=2,p=h,f=d),null!==p&&Zo(t,e,n,r,p,f,!0,a),c=l<i.length?i[l]:null,h=u<s.length?s[u]:null}}(i,r,o,o[11],o[s+1],o[s+1]=function(t,e,n){if(null==n||""===n)return Uo;const r=[],i=br(n);if(Array.isArray(i))for(let s=0;s<i.length;s++)t(r,i[s],!0);else if("object"==typeof i)for(const s in i)i.hasOwnProperty(s)&&t(r,s,i[s]);else"string"==typeof i&&e(r,i);return r}(t,e,n),0,s)}}(ie,Ko,Ao(Ze(),n,r,i)),qo("transform-origin",t._transformOrigin)("font-size",t._triggerFontSize,"px"),bo("ngClass",t.panelClass)("@transformPanel",t.multiple?"showing-multiple":"showing"),fo("id",t.id+"-panel")}var n,r,i}const UC=[[["mat-select-trigger"]],"*"],PC=["mat-select-trigger","*"],zC={transformPanelWrap:im("transformPanelWrap",[um("* => void",hm("@transformPanel",[cm()],{optional:!0}))]),transformPanel:im("transformPanel",[lm("void",am({transform:"scaleY(0.8)",minWidth:"100%",opacity:0})),lm("showing",am({opacity:1,minWidth:"calc(100% + 32px)",transform:"scaleY(1)"})),lm("showing-multiple",am({opacity:1,minWidth:"calc(100% + 64px)",transform:"scaleY(1)"})),um("void => *",sm("120ms cubic-bezier(0, 0, 0.2, 1)")),um("* => void",sm("100ms 25ms linear",am({opacity:0})))])};let QC=0;const HC=new Mt("mat-select-scroll-strategy"),$C=new Mt("MAT_SELECT_CONFIG"),VC={provide:HC,deps:[CC],useFactory:function(t){return()=>t.scrollStrategies.reposition()}};class qC{constructor(t,e){this.source=t,this.value=e}}class jC{constructor(t,e,n,r,i){this._elementRef=t,this._defaultErrorStateMatcher=e,this._parentForm=n,this._parentFormGroup=r,this.ngControl=i}}const KC=Oy(Dy(Ty(Ly(jC)))),WC=new Mt("MatSelectTrigger");let GC=(()=>{class t extends KC{constructor(t,e,n,r,i,s,o,a,l,u,c,h,d,p){super(i,r,o,a,u),this._viewportRuler=t,this._changeDetectorRef=e,this._ngZone=n,this._dir=s,this._parentFormField=l,this.ngControl=u,this._liveAnnouncer=d,this._panelOpen=!1,this._required=!1,this._scrollTop=0,this._multiple=!1,this._compareWith=(t,e)=>t===e,this._uid="mat-select-"+QC++,this._destroy=new _,this._triggerFontSize=0,this._onChange=()=>{},this._onTouched=()=>{},this._optionIds="",this._transformOrigin="top",this._panelDoneAnimatingStream=new _,this._offsetY=0,this._positions=[{originX:"start",originY:"top",overlayX:"start",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"start",overlayY:"bottom"}],this._disableOptionCentering=!1,this._focused=!1,this.controlType="mat-select",this.ariaLabel="",this.optionSelectionChanges=Dh(()=>{const t=this.options;return t?t.changes.pipe(fd(t),cd(()=>q(...t.map(t=>t.onSelectionChange)))):this._ngZone.onStable.asObservable().pipe(td(1),cd(()=>this.optionSelectionChanges))}),this.openedChange=new bl,this._openedStream=this.openedChange.pipe(Mh(t=>t),D(()=>{})),this._closedStream=this.openedChange.pipe(Mh(t=>!t),D(()=>{})),this.selectionChange=new bl,this.valueChange=new bl,this.ngControl&&(this.ngControl.valueAccessor=this),this._scrollStrategyFactory=h,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(c)||0,this.id=this.id,p&&(null!=p.disableOptionCentering&&(this.disableOptionCentering=p.disableOptionCentering),null!=p.typeaheadDebounceInterval&&(this.typeaheadDebounceInterval=p.typeaheadDebounceInterval))}get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(t){this._placeholder=t,this.stateChanges.next()}get required(){return this._required}set required(t){this._required=OA(t),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(t){if(this._selectionModel)throw Error("Cannot change `multiple` mode of select after initialization.");this._multiple=OA(t)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(t){this._disableOptionCentering=OA(t)}get compareWith(){return this._compareWith}set compareWith(t){if("function"!=typeof t)throw Error("`compareWith` must be a function.");this._compareWith=t,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(t){t!==this._value&&(this.options&&this._setSelectionByValue(t),this._value=t)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(t){this._typeaheadDebounceInterval=DA(t)}get id(){return this._id}set id(t){this._id=t||this._uid,this.stateChanges.next()}ngOnInit(){this._selectionModel=new gw(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(t=>t.lift(new L_(void 0,void 0)),yw(this._destroy)).subscribe(()=>{this.panelOpen?(this._scrollTop=0,this.openedChange.emit(!0)):(this.openedChange.emit(!1),this.overlayDir.offsetX=0,this._changeDetectorRef.markForCheck())}),this._viewportRuler.change().pipe(yw(this._destroy)).subscribe(()=>{this._panelOpen&&(this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._changeDetectorRef.markForCheck())})}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe(yw(this._destroy)).subscribe(t=>{t.added.forEach(t=>t.select()),t.removed.forEach(t=>t.deselect())}),this.options.changes.pipe(fd(null),yw(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){this.ngControl&&this.updateErrorState()}ngOnChanges(t){t.disabled&&this.stateChanges.next(),t.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){!this.disabled&&this.options&&this.options.length&&!this._panelOpen&&(this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._triggerFontSize=parseInt(getComputedStyle(this.trigger.nativeElement).fontSize||"0"),this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._calculateOverlayPosition(),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck(),this._ngZone.onStable.asObservable().pipe(td(1)).subscribe(()=>{this._triggerFontSize&&this.overlayDir.overlayRef&&this.overlayDir.overlayRef.overlayElement&&(this.overlayDir.overlayRef.overlayElement.style.fontSize=this._triggerFontSize+"px")}))}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(t){this.value=t}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel.selected:this._selectionModel.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const t=this._selectionModel.selected.map(t=>t.viewValue);return this._isRtl()&&t.reverse(),t.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(t){this.disabled||(this.panelOpen?this._handleOpenKeydown(t):this._handleClosedKeydown(t))}_handleClosedKeydown(t){const e=t.keyCode,n=40===e||38===e||37===e||39===e,r=13===e||32===e,i=this._keyManager;if(!i.isTyping()&&r&&!CA(t)||(this.multiple||t.altKey)&&n)t.preventDefault(),this.open();else if(!this.multiple){const n=this.selected;36===e||35===e?(36===e?i.setFirstItemActive():i.setLastItemActive(),t.preventDefault()):i.onKeydown(t);const r=this.selected;r&&n!==r&&this._liveAnnouncer.announce(r.viewValue,1e4)}}_handleOpenKeydown(t){const e=this._keyManager,n=t.keyCode,r=40===n||38===n,i=e.isTyping();if(36===n||35===n)t.preventDefault(),36===n?e.setFirstItemActive():e.setLastItemActive();else if(r&&t.altKey)t.preventDefault(),this.close();else if(i||13!==n&&32!==n||!e.activeItem||CA(t))if(!i&&this._multiple&&65===n&&t.ctrlKey){t.preventDefault();const e=this.options.some(t=>!t.disabled&&!t.selected);this.options.forEach(t=>{t.disabled||(e?t.select():t.deselect())})}else{const n=e.activeItemIndex;e.onKeydown(t),this._multiple&&r&&t.shiftKey&&e.activeItem&&e.activeItemIndex!==n&&e.activeItem._selectViaInteraction()}else t.preventDefault(),e.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,this.disabled||this.panelOpen||(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this.overlayDir.positionChange.pipe(td(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._calculateOverlayOffsetX(),this.panel.nativeElement.scrollTop=this._scrollTop})}_getPanelTheme(){return this._parentFormField?"mat-"+this._parentFormField.color:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this._setSelectionByValue(this.ngControl?this.ngControl.value:this._value),this.stateChanges.next()})}_setSelectionByValue(t){if(this.multiple&&t){if(!Array.isArray(t))throw Error("Value must be an array in multiple-selection mode.");this._selectionModel.clear(),t.forEach(t=>this._selectValue(t)),this._sortValues()}else{this._selectionModel.clear();const e=this._selectValue(t);e?this._keyManager.updateActiveItem(e):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectValue(t){const e=this.options.find(e=>{try{return null!=e.value&&this._compareWith(e.value,t)}catch(n){return Sr()&&console.warn(n),!1}});return e&&this._selectionModel.select(e),e}_initKeyManager(){this._keyManager=new $A(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.pipe(yw(this._destroy)).subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.pipe(yw(this._destroy)).subscribe(()=>{this._panelOpen&&this.panel?this._scrollActiveOptionIntoView():this._panelOpen||this.multiple||!this._keyManager.activeItem||this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const t=q(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(yw(t)).subscribe(t=>{this._onSelect(t.source,t.isUserInput),t.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),q(...this.options.map(t=>t._stateChanges)).pipe(yw(t)).subscribe(()=>{this._changeDetectorRef.markForCheck(),this.stateChanges.next()}),this._setOptionIds()}_onSelect(t,e){const n=this._selectionModel.isSelected(t);null!=t.value||this._multiple?(n!==t.selected&&(t.selected?this._selectionModel.select(t):this._selectionModel.deselect(t)),e&&this._keyManager.setActiveItem(t),this.multiple&&(this._sortValues(),e&&this.focus())):(t.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(t.value)),n!==this._selectionModel.isSelected(t)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const t=this.options.toArray();this._selectionModel.sort((e,n)=>this.sortComparator?this.sortComparator(e,n,t):t.indexOf(e)-t.indexOf(n)),this.stateChanges.next()}}_propagateChanges(t){let e=null;e=this.multiple?this.selected.map(t=>t.value):this.selected?this.selected.value:t,this._value=e,this.valueChange.emit(e),this._onChange(e),this.selectionChange.emit(new qC(this,e)),this._changeDetectorRef.markForCheck()}_setOptionIds(){this._optionIds=this.options.map(t=>t.id).join(" ")}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_scrollActiveOptionIntoView(){const t=this._keyManager.activeItemIndex||0,e=ow(t,this.options,this.optionGroups);this.panel.nativeElement.scrollTop=function(t,e,n,r){const i=t*e;return i<n?i:i+e>n+256?Math.max(0,i-256+e):n}(t+e,this._getItemHeight(),this.panel.nativeElement.scrollTop)}focus(t){this._elementRef.nativeElement.focus(t)}_getOptionIndex(t){return this.options.reduce((e,n,r)=>void 0!==e?e:t===n?r:void 0,void 0)}_calculateOverlayPosition(){const t=this._getItemHeight(),e=this._getItemCount(),n=Math.min(e*t,256),r=e*t-n;let i=this.empty?0:this._getOptionIndex(this._selectionModel.selected[0]);i+=ow(i,this.options,this.optionGroups);const s=n/2;this._scrollTop=this._calculateOverlayScroll(i,s,r),this._offsetY=this._calculateOverlayOffsetY(i,s,r),this._checkOverlayWithinViewport(r)}_calculateOverlayScroll(t,e,n){const r=this._getItemHeight();return Math.min(Math.max(0,r*t-e+r/2),n)}_getAriaLabel(){return this.ariaLabelledby?null:this.ariaLabel||this.placeholder}_getAriaLabelledby(){return this.ariaLabelledby?this.ariaLabelledby:this._parentFormField&&this._parentFormField._hasFloatingLabel()&&!this._getAriaLabel()&&this._parentFormField._labelId||null}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_calculateOverlayOffsetX(){const t=this.overlayDir.overlayRef.overlayElement.getBoundingClientRect(),e=this._viewportRuler.getViewportSize(),n=this._isRtl(),r=this.multiple?56:32;let i;if(this.multiple)i=40;else{let t=this._selectionModel.selected[0]||this.options.first;i=t&&t.group?32:16}n||(i*=-1);const s=0-(t.left+i-(n?r:0)),o=t.right+i-e.width+(n?0:r);s>0?i+=s+8:o>0&&(i-=o+8),this.overlayDir.offsetX=Math.round(i),this.overlayDir.overlayRef.updatePosition()}_calculateOverlayOffsetY(t,e,n){const r=this._getItemHeight(),i=(r-this._triggerRect.height)/2,s=Math.floor(256/r);let o;return this._disableOptionCentering?0:(o=0===this._scrollTop?t*r:this._scrollTop===n?(t-(this._getItemCount()-s))*r+(r-(this._getItemCount()*r-256)%r):e-r/2,Math.round(-1*o-i))}_checkOverlayWithinViewport(t){const e=this._getItemHeight(),n=this._viewportRuler.getViewportSize(),r=this._triggerRect.top-8,i=n.height-this._triggerRect.bottom-8,s=Math.abs(this._offsetY),o=Math.min(this._getItemCount()*e,256)-s-this._triggerRect.height;o>i?this._adjustPanelUp(o,i):s>r?this._adjustPanelDown(s,r,t):this._transformOrigin=this._getOriginBasedOnOption()}_adjustPanelUp(t,e){const n=Math.round(t-e);this._scrollTop-=n,this._offsetY-=n,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop<=0&&(this._scrollTop=0,this._offsetY=0,this._transformOrigin="50% bottom 0px")}_adjustPanelDown(t,e,n){const r=Math.round(t-e);if(this._scrollTop+=r,this._offsetY+=r,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop>=n)return this._scrollTop=n,this._offsetY=0,void(this._transformOrigin="50% top 0px")}_getOriginBasedOnOption(){const t=this._getItemHeight(),e=(t-this._triggerRect.height)/2;return`50% ${Math.abs(this._offsetY)-e+t/2}px 0px`}_getItemCount(){return this.options.length+this.optionGroups.length}_getItemHeight(){return 3*this._triggerFontSize}setDescribedByIds(t){this._ariaDescribedby=t.join(" ")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty}}return t.\u0275fac=function(e){return new(e||t)(yo(P_),yo(zs),yo(cu),yo(My),yo(Ca),yo(tm,8),yo(Ix,8),yo(zx,8),yo(fv,8),yo(Mv,10),wo("tabindex"),yo(HC),yo(jA),yo($C,8))},t.\u0275cmp=de({type:t,selectors:[["mat-select"]],contentQueries:function(t,e,n){var r;1&t&&(Dl(n,WC,!0),Dl(n,sw,!0),Dl(n,tw,!0)),2&t&&(Fl(r=Ul())&&(e.customTrigger=r.first),Fl(r=Ul())&&(e.options=r),Fl(r=Ul())&&(e.optionGroups=r))},viewQuery:function(t,e){var n;1&t&&(Rl(FC,!0),Rl(TC,!0),Rl(kC,!0)),2&t&&(Fl(n=Ul())&&(e.trigger=n.first),Fl(n=Ul())&&(e.panel=n.first),Fl(n=Ul())&&(e.overlayDir=n.first))},hostAttrs:["role","listbox",1,"mat-select"],hostVars:19,hostBindings:function(t,e){1&t&&Fo("keydown",(function(t){return e._handleKeydown(t)}))("focus",(function(){return e._onFocus()}))("blur",(function(){return e._onBlur()})),2&t&&(fo("id",e.id)("tabindex",e.tabIndex)("aria-label",e._getAriaLabel())("aria-labelledby",e._getAriaLabelledby())("aria-required",e.required.toString())("aria-disabled",e.disabled.toString())("aria-invalid",e.errorState)("aria-owns",e.panelOpen?e._optionIds:null)("aria-multiselectable",e.multiple)("aria-describedby",e._ariaDescribedby||null)("aria-activedescendant",e._getAriaActiveDescendant()),jo("mat-select-disabled",e.disabled)("mat-select-invalid",e.errorState)("mat-select-required",e.required)("mat-select-empty",e.empty))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex",ariaLabel:["aria-label","ariaLabel"],id:"id",disableOptionCentering:"disableOptionCentering",typeaheadDebounceInterval:"typeaheadDebounceInterval",placeholder:"placeholder",required:"required",multiple:"multiple",compareWith:"compareWith",value:"value",panelClass:"panelClass",ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",sortComparator:"sortComparator"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},exportAs:["matSelect"],features:[ba([{provide:rv,useExisting:t},{provide:rw,useExisting:t}]),la,Fe],ngContentSelectors:PC,decls:9,vars:9,consts:[["cdk-overlay-origin","","aria-hidden","true",1,"mat-select-trigger",3,"click"],["origin","cdkOverlayOrigin","trigger",""],[1,"mat-select-value",3,"ngSwitch"],["class","mat-select-placeholder",4,"ngSwitchCase"],["class","mat-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayMinWidth","cdkConnectedOverlayOffsetY","backdropClick","attach","detach"],[1,"mat-select-placeholder"],[1,"mat-select-value-text",3,"ngSwitch"],[4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-select-panel-wrap"],[3,"ngClass","keydown"],["panel",""]],template:function(t,e){if(1&t&&(Lo(UC),xo(0,"div",0,1),Fo("click",(function(){return e.toggle()})),xo(3,"div",2),mo(4,RC,2,1,"span",3),mo(5,LC,3,2,"span",4),_o(),xo(6,"div",5),Co(7,"div",6),_o(),_o(),mo(8,MC,4,11,"ng-template",7),Fo("backdropClick",(function(){return e.close()}))("attach",(function(){return e._onAttached()}))("detach",(function(){return e.close()}))),2&t){const t=go(1);Ai(3),bo("ngSwitch",e.empty),Ai(1),bo("ngSwitchCase",!0),Ai(1),bo("ngSwitchCase",!1),Ai(3),bo("cdkConnectedOverlayScrollStrategy",e._scrollStrategy)("cdkConnectedOverlayOrigin",t)("cdkConnectedOverlayOpen",e.panelOpen)("cdkConnectedOverlayPositions",e._positions)("cdkConnectedOverlayMinWidth",null==e._triggerRect?null:e._triggerRect.width)("cdkConnectedOverlayOffsetY",e._offsetY)}},directives:[BC,Hc,$c,kC,Vc,Oc],styles:[".mat-select{display:inline-block;width:100%;outline:none}.mat-select-trigger{display:inline-table;cursor:pointer;position:relative;box-sizing:border-box}.mat-select-disabled .mat-select-trigger{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.mat-select-value{display:table-cell;max-width:0;width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-select-arrow-wrapper{display:table-cell;vertical-align:middle}.mat-form-field-appearance-fill .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-outline .mat-select-arrow-wrapper{transform:translateY(-25%)}.mat-form-field-appearance-standard.mat-form-field-has-label .mat-select:not(.mat-select-empty) .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:none}.mat-select-arrow{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;margin:0 4px}.mat-select-panel-wrap{flex-basis:100%}.mat-select-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;padding-top:0;padding-bottom:0;max-height:256px;min-width:100%;border-radius:4px}.cdk-high-contrast-active .mat-select-panel{outline:solid 1px}.mat-select-panel .mat-optgroup-label,.mat-select-panel .mat-option{font-size:inherit;line-height:3em;height:3em}.mat-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-form-field-flex{cursor:pointer}.mat-form-field-type-mat-select .mat-form-field-label{width:calc(100% - 18px)}.mat-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-select-placeholder{color:transparent;-webkit-text-fill-color:transparent;transition:none;display:block}\n"],encapsulation:2,data:{animation:[zC.transformPanelWrap,zC.transformPanel]},changeDetection:0}),t})(),XC=(()=>{class t{}return t.\u0275mod=me({type:t}),t.\u0275inj=ct({factory:function(e){return new(e||t)},providers:[VC],imports:[[Wc,IC,aw,Fy],z_,mv,aw,Fy]}),t})();const YC=["input"],JC=function(){return{enterDuration:150}},ZC=["*"],tS=new Mt("mat-checkbox-default-options",{providedIn:"root",factory:function(){return{color:"accent",clickAction:"check-indeterminate"}}}),eS=new Mt("mat-checkbox-click-action");let nS=0;const rS={provide:Bv,useExisting:xt(()=>aS),multi:!0};class iS{}class sS{constructor(t){this._elementRef=t}}const oS=Dy(Ry(Oy(Ty(sS))));let aS=(()=>{class t extends oS{constructor(t,e,n,r,i,s,o,a){super(t),this._changeDetectorRef=e,this._focusMonitor=n,this._ngZone=r,this._clickAction=s,this._animationMode=o,this._options=a,this.ariaLabel="",this.ariaLabelledby=null,this._uniqueId="mat-checkbox-"+ ++nS,this.id=this._uniqueId,this.labelPosition="after",this.name=null,this.change=new bl,this.indeterminateChange=new bl,this._onTouched=()=>{},this._currentAnimationClass="",this._currentCheckState=0,this._controlValueAccessorChangeFn=()=>{},this._checked=!1,this._disabled=!1,this._indeterminate=!1,this._options=this._options||{},this._options.color&&(this.color=this._options.color),this.tabIndex=parseInt(i)||0,this._clickAction=this._clickAction||this._options.clickAction}get inputId(){return(this.id||this._uniqueId)+"-input"}get required(){return this._required}set required(t){this._required=OA(t)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{t||Promise.resolve().then(()=>{this._onTouched(),this._changeDetectorRef.markForCheck()})}),this._syncIndeterminate(this._indeterminate)}ngAfterViewChecked(){}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}get checked(){return this._checked}set checked(t){t!=this.checked&&(this._checked=t,this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(t){const e=OA(t);e!==this.disabled&&(this._disabled=e,this._changeDetectorRef.markForCheck())}get indeterminate(){return this._indeterminate}set indeterminate(t){const e=t!=this._indeterminate;this._indeterminate=OA(t),e&&(this._transitionCheckState(this._indeterminate?3:this.checked?1:2),this.indeterminateChange.emit(this._indeterminate)),this._syncIndeterminate(this._indeterminate)}_isRippleDisabled(){return this.disableRipple||this.disabled}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}writeValue(t){this.checked=!!t}registerOnChange(t){this._controlValueAccessorChangeFn=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t}_getAriaChecked(){return this.checked?"true":this.indeterminate?"mixed":"false"}_transitionCheckState(t){let e=this._currentCheckState,n=this._elementRef.nativeElement;if(e!==t&&(this._currentAnimationClass.length>0&&n.classList.remove(this._currentAnimationClass),this._currentAnimationClass=this._getAnimationClassForCheckStateTransition(e,t),this._currentCheckState=t,this._currentAnimationClass.length>0)){n.classList.add(this._currentAnimationClass);const t=this._currentAnimationClass;this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{n.classList.remove(t)},1e3)})}}_emitChangeEvent(){const t=new iS;t.source=this,t.checked=this.checked,this._controlValueAccessorChangeFn(this.checked),this.change.emit(t)}toggle(){this.checked=!this.checked}_onInputClick(t){t.stopPropagation(),this.disabled||"noop"===this._clickAction?this.disabled||"noop"!==this._clickAction||(this._inputElement.nativeElement.checked=this.checked,this._inputElement.nativeElement.indeterminate=this.indeterminate):(this.indeterminate&&"check"!==this._clickAction&&Promise.resolve().then(()=>{this._indeterminate=!1,this.indeterminateChange.emit(this._indeterminate)}),this.toggle(),this._transitionCheckState(this._checked?1:2),this._emitChangeEvent())}focus(t="keyboard",e){this._focusMonitor.focusVia(this._inputElement,t,e)}_onInteractionEvent(t){t.stopPropagation()}_getAnimationClassForCheckStateTransition(t,e){if("NoopAnimations"===this._animationMode)return"";let n="";switch(t){case 0:if(1===e)n="unchecked-checked";else{if(3!=e)return"";n="unchecked-indeterminate"}break;case 2:n=1===e?"unchecked-checked":"unchecked-indeterminate";break;case 1:n=2===e?"checked-unchecked":"checked-indeterminate";break;case 3:n=1===e?"indeterminate-checked":"indeterminate-unchecked"}return"mat-checkbox-anim-"+n}_syncIndeterminate(t){const e=this._inputElement;e&&(e.nativeElement.indeterminate=t)}}return t.\u0275fac=function(e){return new(e||t)(yo(Ca),yo(zs),yo(XA),yo(cu),wo("tabindex"),yo(eS,8),yo(_y,8),yo(tS,8))},t.\u0275cmp=de({type:t,selectors:[["mat-checkbox"]],viewQuery:function(t,e){var n;1&t&&(Rl(YC,!0),Rl(qy,!0)),2&t&&(Fl(n=Ul())&&(e._inputElement=n.first),Fl(n=Ul())&&(e.ripple=n.first))},hostAttrs:[1,"mat-checkbox"],hostVars:12,hostBindings:function(t,e){2&t&&(oa("id",e.id),fo("tabindex",null),jo("mat-checkbox-indeterminate",e.indeterminate)("mat-checkbox-checked",e.checked)("mat-checkbox-disabled",e.disabled)("mat-checkbox-label-before","before"==e.labelPosition)("_mat-animation-noopable","NoopAnimations"===e._animationMode))},inputs:{disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],id:"id",labelPosition:"labelPosition",name:"name",required:"required",checked:"checked",disabled:"disabled",indeterminate:"indeterminate",ariaDescribedby:["aria-describedby","ariaDescribedby"],value:"value"},outputs:{change:"change",indeterminateChange:"indeterminateChange"},exportAs:["matCheckbox"],features:[ba([rS]),la],ngContentSelectors:ZC,decls:17,vars:20,consts:[[1,"mat-checkbox-layout"],["label",""],[1,"mat-checkbox-inner-container"],["type","checkbox",1,"mat-checkbox-input","cdk-visually-hidden",3,"id","required","checked","disabled","tabIndex","change","click"],["input",""],["matRipple","",1,"mat-checkbox-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleRadius","matRippleCentered","matRippleAnimation"],[1,"mat-ripple-element","mat-checkbox-persistent-ripple"],[1,"mat-checkbox-frame"],[1,"mat-checkbox-background"],["version","1.1","focusable","false","viewBox","0 0 24 24",0,"xml","space","preserve",1,"mat-checkbox-checkmark"],["fill","none","stroke","white","d","M4.1,12.7 9,17.6 20.3,6.3",1,"mat-checkbox-checkmark-path"],[1,"mat-checkbox-mixedmark"],[1,"mat-checkbox-label",3,"cdkObserveContent"],["checkboxLabel",""],[2,"display","none"]],template:function(t,e){if(1&t&&(Lo(),xo(0,"label",0,1),xo(2,"div",2),xo(3,"input",3,4),Fo("change",(function(t){return e._onInteractionEvent(t)}))("click",(function(t){return e._onInputClick(t)})),_o(),xo(5,"div",5),Co(6,"div",6),_o(),Co(7,"div",7),xo(8,"div",8),Ye.lFrame.currentNamespace="http://www.w3.org/2000/svg",xo(9,"svg",9),Co(10,"path",10),_o(),Ye.lFrame.currentNamespace=null,Co(11,"div",11),_o(),_o(),xo(12,"span",12,13),Fo("cdkObserveContent",(function(){return e._onLabelTextChange()})),xo(14,"span",14),ra(15,"\xa0"),_o(),Mo(16),_o(),_o()),2&t){const t=go(1),n=go(13);fo("for",e.inputId),Ai(2),jo("mat-checkbox-inner-container-no-side-margin",!n.textContent||!n.textContent.trim()),Ai(1),bo("id",e.inputId)("required",e.required)("checked",e.checked)("disabled",e.disabled)("tabIndex",e.tabIndex),fo("value",e.value)("name",e.name)("aria-label",e.ariaLabel||null)("aria-labelledby",e.ariaLabelledby)("aria-checked",e._getAriaChecked())("aria-describedby",e.ariaDescribedby),Ai(2),bo("matRippleTrigger",t)("matRippleDisabled",e._isRippleDisabled())("matRippleRadius",20)("matRippleCentered",!0)("matRippleAnimation",Al(19,JC))}},directives:[qy,QA],styles:["@keyframes mat-checkbox-fade-in-background{0%{opacity:0}50%{opacity:1}}@keyframes mat-checkbox-fade-out-background{0%,50%{opacity:1}100%{opacity:0}}@keyframes mat-checkbox-unchecked-checked-checkmark-path{0%,50%{stroke-dashoffset:22.910259}50%{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1)}100%{stroke-dashoffset:0}}@keyframes mat-checkbox-unchecked-indeterminate-mixedmark{0%,68.2%{transform:scaleX(0)}68.2%{animation-timing-function:cubic-bezier(0, 0, 0, 1)}100%{transform:scaleX(1)}}@keyframes mat-checkbox-checked-unchecked-checkmark-path{from{animation-timing-function:cubic-bezier(0.4, 0, 1, 1);stroke-dashoffset:0}to{stroke-dashoffset:-22.910259}}@keyframes mat-checkbox-checked-indeterminate-checkmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1);opacity:1;transform:rotate(0deg)}to{opacity:0;transform:rotate(45deg)}}@keyframes mat-checkbox-indeterminate-checked-checkmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);opacity:0;transform:rotate(45deg)}to{opacity:1;transform:rotate(360deg)}}@keyframes mat-checkbox-checked-indeterminate-mixedmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1);opacity:0;transform:rotate(-45deg)}to{opacity:1;transform:rotate(0deg)}}@keyframes mat-checkbox-indeterminate-checked-mixedmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);opacity:1;transform:rotate(0deg)}to{opacity:0;transform:rotate(315deg)}}@keyframes mat-checkbox-indeterminate-unchecked-mixedmark{0%{animation-timing-function:linear;opacity:1;transform:scaleX(1)}32.8%,100%{opacity:0;transform:scaleX(0)}}.mat-checkbox-background,.mat-checkbox-frame{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:2px;box-sizing:border-box;pointer-events:none}.mat-checkbox{transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);cursor:pointer;-webkit-tap-highlight-color:transparent}._mat-animation-noopable.mat-checkbox{transition:none;animation:none}.mat-checkbox .mat-ripple-element:not(.mat-checkbox-persistent-ripple){opacity:.16}.mat-checkbox-layout{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:inherit;align-items:baseline;vertical-align:middle;display:inline-flex;white-space:nowrap}.mat-checkbox-label{-webkit-user-select:auto;-moz-user-select:auto;-ms-user-select:auto;user-select:auto}.mat-checkbox-inner-container{display:inline-block;height:16px;line-height:0;margin:auto;margin-right:8px;order:0;position:relative;vertical-align:middle;white-space:nowrap;width:16px;flex-shrink:0}[dir=rtl] .mat-checkbox-inner-container{margin-left:8px;margin-right:auto}.mat-checkbox-inner-container-no-side-margin{margin-left:0;margin-right:0}.mat-checkbox-frame{background-color:transparent;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1);border-width:2px;border-style:solid}._mat-animation-noopable .mat-checkbox-frame{transition:none}.cdk-high-contrast-active .mat-checkbox.cdk-keyboard-focused .mat-checkbox-frame{border-style:dotted}.mat-checkbox-background{align-items:center;display:inline-flex;justify-content:center;transition:background-color 90ms cubic-bezier(0, 0, 0.2, 0.1),opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}._mat-animation-noopable .mat-checkbox-background{transition:none}.cdk-high-contrast-active .mat-checkbox .mat-checkbox-background{background:none}.mat-checkbox-persistent-ripple{width:100%;height:100%;transform:none}.mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{opacity:.04}.mat-checkbox.cdk-keyboard-focused .mat-checkbox-persistent-ripple{opacity:.12}.mat-checkbox-persistent-ripple,.mat-checkbox.mat-checkbox-disabled .mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{opacity:0}@media(hover: none){.mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{display:none}}.mat-checkbox-checkmark{top:0;left:0;right:0;bottom:0;position:absolute;width:100%}.mat-checkbox-checkmark-path{stroke-dashoffset:22.910259;stroke-dasharray:22.910259;stroke-width:2.1333333333px}.cdk-high-contrast-black-on-white .mat-checkbox-checkmark-path{stroke:#000 !important}.mat-checkbox-mixedmark{width:calc(100% - 6px);height:2px;opacity:0;transform:scaleX(0) rotate(0deg);border-radius:2px}.cdk-high-contrast-active .mat-checkbox-mixedmark{height:0;border-top:solid 2px;margin-top:2px}.mat-checkbox-label-before .mat-checkbox-inner-container{order:1;margin-left:8px;margin-right:auto}[dir=rtl] .mat-checkbox-label-before .mat-checkbox-inner-container{margin-left:auto;margin-right:8px}.mat-checkbox-checked .mat-checkbox-checkmark{opacity:1}.mat-checkbox-checked .mat-checkbox-checkmark-path{stroke-dashoffset:0}.mat-checkbox-checked .mat-checkbox-mixedmark{transform:scaleX(1) rotate(-45deg)}.mat-checkbox-indeterminate .mat-checkbox-checkmark{opacity:0;transform:rotate(45deg)}.mat-checkbox-indeterminate .mat-checkbox-checkmark-path{stroke-dashoffset:0}.mat-checkbox-indeterminate .mat-checkbox-mixedmark{opacity:1;transform:scaleX(1) rotate(0deg)}.mat-checkbox-unchecked .mat-checkbox-background{background-color:transparent}.mat-checkbox-disabled{cursor:default}.cdk-high-contrast-active .mat-checkbox-disabled{opacity:.5}.mat-checkbox-anim-unchecked-checked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-in-background}.mat-checkbox-anim-unchecked-checked .mat-checkbox-checkmark-path{animation:180ms linear 0ms mat-checkbox-unchecked-checked-checkmark-path}.mat-checkbox-anim-unchecked-indeterminate .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-in-background}.mat-checkbox-anim-unchecked-indeterminate .mat-checkbox-mixedmark{animation:90ms linear 0ms mat-checkbox-unchecked-indeterminate-mixedmark}.mat-checkbox-anim-checked-unchecked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-out-background}.mat-checkbox-anim-checked-unchecked .mat-checkbox-checkmark-path{animation:90ms linear 0ms mat-checkbox-checked-unchecked-checkmark-path}.mat-checkbox-anim-checked-indeterminate .mat-checkbox-checkmark{animation:90ms linear 0ms mat-checkbox-checked-indeterminate-checkmark}.mat-checkbox-anim-checked-indeterminate .mat-checkbox-mixedmark{animation:90ms linear 0ms mat-checkbox-checked-indeterminate-mixedmark}.mat-checkbox-anim-indeterminate-checked .mat-checkbox-checkmark{animation:500ms linear 0ms mat-checkbox-indeterminate-checked-checkmark}.mat-checkbox-anim-indeterminate-checked .mat-checkbox-mixedmark{animation:500ms linear 0ms mat-checkbox-indeterminate-checked-mixedmark}.mat-checkbox-anim-indeterminate-unchecked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-out-background}.mat-checkbox-anim-indeterminate-unchecked .mat-checkbox-mixedmark{animation:300ms linear 0ms mat-checkbox-indeterminate-unchecked-mixedmark}.mat-checkbox-input{bottom:0;left:50%}.mat-checkbox .mat-checkbox-ripple{position:absolute;left:calc(50% - 20px);top:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}\n"],encapsulation:2,changeDetection:0}),t})(),lS=(()=>{class t{}return t.\u0275mod=me({type:t}),t.\u0275inj=ct({factory:function(e){return new(e||t)}}),t})(),uS=(()=>{class t{}return t.\u0275mod=me({type:t}),t.\u0275inj=ct({factory:function(e){return new(e||t)},imports:[[jy,Fy,HA,lS],Fy,lS]}),t})();function cS(t,e){if(1&t&&(xo(0,"mat-option",7),ra(1),_o()),2&t){const t=e.$implicit,n=Oo();bo("value",t),Ai(1),ia(n.types[t])}}function hS(t,e){if(1&t){const t=ko();So(0),xo(1,"mat-form-field",8),xo(2,"mat-label"),ra(3,"Question Text"),_o(),xo(4,"textarea",9),Fo("ngModelChange",(function(e){en(t);const n=Oo();return n.question.elements[n.elementIndex]=e})),_o(),_o(),xo(5,"span"),ra(6),_o(),Eo()}if(2&t){const t=Oo();Ai(4),bo("ngModel",t.question.elements[t.elementIndex]),Ai(2),ia(t.question.elements[t.elementIndex])}}function dS(t,e){if(1&t&&(So(0),xo(1,"span"),ra(2,"An image:"),_o(),xo(3,"span"),ra(4),yl(5,"json"),_o(),Eo()),2&t){const t=Oo();Ai(4),ia(wl(5,1,t.question.elements[t.elementIndex]))}}function pS(t,e){if(1&t){const t=ko();So(0),xo(1,"mat-form-field"),xo(2,"mat-label"),ra(3,"Prompt"),_o(),xo(4,"input",10),Fo("ngModelChange",(function(e){en(t);const n=Oo();return n.question.elements[n.elementIndex].question=e}))("change",(function(){return en(t),Oo().examManager.modified=!0})),_o(),_o(),xo(5,"mat-checkbox",11),Fo("ngModelChange",(function(e){en(t);const n=Oo();return n.question.elements[n.elementIndex].answer=e}))("change",(function(){return en(t),Oo().examManager.modified=!0})),ra(6,"Answer"),_o(),Eo()}if(2&t){const t=Oo();Ai(4),bo("ngModel",t.question.elements[t.elementIndex].question),Ai(1),bo("ngModel",t.question.elements[t.elementIndex].answer)}}let fS=(()=>{class t{constructor(t){this.examManager=t,this.types=D_,this.question={elements:[],points:0},this.elementIndex=0}ngOnInit(){}getElemTypes(){return Object.keys(this.types).filter(t=>!isNaN(Number(t))).map(t=>Number(t))}getCurrentType(){return"string"==typeof this.question.elements[this.elementIndex]?this.types.Text:"object"==typeof this.question.elements[this.elementIndex]&&"base64string"in this.question.elements[this.elementIndex]?this.types.Image:"object"==typeof this.question.elements[this.elementIndex]&&"question"in this.question.elements[this.elementIndex]?this.types.Subquestion:void 0}move(t){0===this.elementIndex&&-1===t||this.elementIndex===this.question.elements.length-1&&1===t||([this.question.elements[this.elementIndex],this.question.elements[this.elementIndex+t]]=[this.question.elements[this.elementIndex+t],this.question.elements[this.elementIndex]],this.examManager.modified=!0)}remove(){this.examManager.modified=!0}changeType(t){const e=Number(t),n=this.getCurrentType();if(console.log("selecting type:",e,"current:",n),n!==e){switch(e){case this.types.Text:this.question.elements[this.elementIndex]="Your text goes here";break;case this.types.Image:this.question.elements[this.elementIndex]={base64string:void 0};break;default:this.question.elements[this.elementIndex]={answer:!1,question:"How are you?"}}this.examManager.modified=!0}}}return t.\u0275fac=function(e){return new(e||t)(yo(Lb))},t.\u0275cmp=de({type:t,selectors:[["app-element-editor"]],inputs:{question:"question",elementIndex:"elementIndex"},decls:17,vars:6,consts:[[1,"element-card"],[3,"ngModel","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"ngSwitch"],[4,"ngSwitchCase"],["mat-button","",3,"click"],["mat-button",""],[3,"value"],["appearance","fill"],["matInput","",3,"ngModel","ngModelChange"],["matInput","","type","text",3,"ngModel","ngModelChange","change"],[3,"ngModel","ngModelChange","change"]],template:function(t,e){1&t&&(xo(0,"mat-card",0),xo(1,"mat-form-field"),xo(2,"mat-label"),ra(3,"Element Type"),_o(),xo(4,"mat-select",1),Fo("selectionChange",(function(t){return e.changeType(t.value)})),mo(5,cS,2,2,"mat-option",2),_o(),_o(),So(6,3),mo(7,hS,7,2,"ng-container",4),mo(8,dS,6,3,"ng-container",4),mo(9,pS,7,2,"ng-container",4),Eo(),xo(10,"mat-card-actions"),xo(11,"button",5),Fo("click",(function(){return e.move(-1)})),ra(12,"Move up"),_o(),xo(13,"button",5),Fo("click",(function(){return e.move(1)})),ra(14,"Move down"),_o(),xo(15,"button",6),ra(16,"Remove"),_o(),_o(),_o()),2&t&&(Ai(4),bo("ngModel",e.getCurrentType()),Ai(1),bo("ngForOf",e.getElemTypes()),Ai(1),bo("ngSwitch",e.getCurrentType()),Ai(1),bo("ngSwitchCase",e.types.Text),Ai(1),bo("ngSwitchCase",e.types.Image),Ai(1),bo("ngSwitchCase",e.types.Subquestion))},directives:[r_,Av,ov,GC,Uv,Ux,Lc,Hc,$c,n_,fw,sw,Wx,Tv,aS],pipes:[Kc],styles:[".element-card[_ngcontent-%COMP%]{display:flex;flex-direction:column}"]}),t})();function AS(t,e){if(1&t&&Co(0,"app-element-editor",9),2&t){const t=e.index,n=Oo(2);bo("elementIndex",t)("question",n.question)}}function mS(t,e){if(1&t){const t=ko();xo(0,"mat-card-content",5),xo(1,"mat-form-field",6),xo(2,"mat-label"),ra(3,"Points"),_o(),xo(4,"input",7),Fo("ngModelChange",(function(e){return en(t),Oo().question.points=e})),_o(),_o(),xo(5,"label"),ra(6,"Question body:"),_o(),mo(7,AS,1,2,"app-element-editor",8),_o()}if(2&t){const t=Oo();Ai(4),bo("ngModel",t.question.points),Ai(3),bo("ngForOf",t.question.elements)("ngForTrackBy",t.trackByFn)}}let gS=(()=>{class t{constructor(){this.question={elements:[],points:0},this.index=-1,this.visible=!0}trackByFn(t,e){return t}ngOnInit(){}changeElementType(t,e){this.question.elements[e]=t}addElement(){this.question.elements.push("Some more text")}collapse(){this.visible=!this.visible}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=de({type:t,selectors:[["app-question-editor"]],inputs:{question:"question",index:"index"},decls:14,vars:2,consts:[[1,"question-card-header"],[3,"click"],["class","question-card-content",4,"ngIf"],["mat-button",""],["mat-button","",3,"click"],[1,"question-card-content"],["appearance","fill"],["matInput","","max","1000","min","0","type","number",3,"ngModel","ngModelChange"],[3,"elementIndex","question",4,"ngFor","ngForOf","ngForTrackBy"],[3,"elementIndex","question"]],template:function(t,e){1&t&&(xo(0,"mat-card"),xo(1,"mat-card-header",0),xo(2,"mat-icon",1),Fo("click",(function(){return e.collapse()})),ra(3,"remove_red_eye"),_o(),xo(4,"mat-card-title"),ra(5),_o(),_o(),mo(6,mS,8,3,"mat-card-content",2),xo(7,"mat-card-actions"),xo(8,"button",3),ra(9,"Move up"),_o(),xo(10,"button",3),ra(11,"Move down"),_o(),xo(12,"button",4),Fo("click",(function(){return e.addElement()})),ra(13,"Add Element"),_o(),_o(),_o()),2&t&&(Ai(5),sa("Question ",e.index+1,""),Ai(1),bo("ngIf",e.visible))},directives:[r_,i_,R_,e_,Uc,n_,fw,t_,Av,ov,Wx,Yv,Tv,Uv,Ux,Lc,fS],styles:[".question-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.question-card-header[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}"]}),t})();function yS(t,e){if(1&t&&Co(0,"app-question-editor",4),2&t){const t=e.$implicit;bo("index",e.index)("question",t)}}let wS=(()=>{class t{constructor(t){this.examManager=t}ngOnInit(){}createQuestion(){this.examManager.exam.questions.push({elements:["Your question body goes here (with Latex)"],points:5}),this.examManager.modified=!0}trackByFn(t,e){return t}}return t.\u0275fac=function(e){return new(e||t)(yo(Lb))},t.\u0275cmp=de({type:t,selectors:[["app-document-editor"]],decls:9,vars:4,consts:[["color","primary","mat-button","",3,"disabled","click"],["matInput","",3,"ngModel","change","ngModelChange"],["mat-button","",3,"click"],[3,"index","question",4,"ngFor","ngForOf","ngForTrackBy"],[3,"index","question"]],template:function(t,e){1&t&&(xo(0,"button",0),Fo("click",(function(){return e.examManager.save()})),ra(1,"Save"),_o(),xo(2,"mat-form-field"),xo(3,"mat-label"),ra(4,"Exam Name"),_o(),xo(5,"input",1),Fo("change",(function(){return e.examManager.modified=!0}))("ngModelChange",(function(t){return e.examManager.exam.title=t})),_o(),_o(),xo(6,"button",2),Fo("click",(function(){return e.createQuestion()})),ra(7,"New Question"),_o(),mo(8,yS,1,2,"app-question-editor",3)),2&t&&(bo("disabled",!e.examManager.modified),Ai(5),bo("ngModel",e.examManager.exam.title),Ai(3),bo("ngForOf",e.examManager.exam.questions)("ngForTrackBy",e.trackByFn))},directives:[fw,Av,ov,Wx,Tv,Uv,Ux,Lc,gS],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;width:30%;overflow-x:hidden}"]}),t})();function bS(t,e,n,r){return new(n||(n=Promise))((function(i,s){function o(t){try{l(r.next(t))}catch(e){s(e)}}function a(t){try{l(r.throw(t))}catch(e){s(e)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}l((r=r.apply(t,e||[])).next())}))}var vS=n("wOnQ"),xS=n.n(vS),_S=n("5RHE"),CS=n.n(_S),SS=n("jtGA"),ES=n("5ZxK"),BS=n.n(ES),kS=function(t){return t[t.CORRECT=0]="CORRECT",t[t.WRONG=1]="WRONG",t[t.EMPTY=2]="EMPTY",t}({}),NS=n("xOOu"),IS=n("Iab2"),FS=n("CA5I");let TS=(()=>{class t{constructor(){this.url="https://teachablemachine.withgoogle.com/models/iXG3cCLQQ/"}initialize(){return bS(this,void 0,void 0,(function*(){const t=this.url+"model.json",e=this.url+"metadata.json";console.log("starting tf-image load"),this.model=yield FS.load(t,e),console.log("loaded tf-image"),this.maxPredictions=this.model.getTotalClasses()}))}predict(t){return bS(this,void 0,void 0,(function*(){const e=yield this.model.predict(t);for(let t=0;t<this.maxPredictions;t++){const n=e[t].className+": "+e[t].probability.toFixed(2);if(console.log(n),"marked"===e[t].className)return e[t].probability}return 0}))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var RS=n("wCX4"),OS=n.n(RS);const DS=["topLeftArucoMarker"],LS=["topRightArucoMarker"],MS=["bottomLeftArucoMarker"],US=["bottomRightArucoMarker"];function PS(t,e){if(1&t&&(xo(0,"div",17),xo(1,"label"),ra(2),_o(),xo(3,"label"),ra(4,"True"),_o(),xo(5,"label"),ra(6,"False"),_o(),_o()),2&t){const t=e.index;Ai(2),sa("Question ",t+1,":")}}function zS(t,e){if(1&t&&(xo(0,"div",20),xo(1,"label"),ra(2),_o(),Co(3,"mat-checkbox"),Co(4,"mat-checkbox"),_o()),2&t){const t=e.index,n=Oo(2);Ai(2),sa("(",n.examManager.getChar(t),")")}}function QS(t,e){if(1&t&&(xo(0,"div",18),mo(1,zS,5,1,"div",19),_o()),2&t){const t=e.$implicit;Ai(1),bo("ngForOf",t)}}let HS=(()=>{class t{constructor(t){this.examManager=t}ngOnInit(){}ngAfterViewInit(){this.topLeftArucoMarker.nativeElement.innerHTML=new OS.a(1).toSVG("50px"),this.topRightArucoMarker.nativeElement.innerHTML=new OS.a(2).toSVG("50px"),this.bottomLeftArucoMarker.nativeElement.innerHTML=new OS.a(3).toSVG("50px"),this.bottomRightArucoMarker.nativeElement.innerHTML=new OS.a(4).toSVG("50px")}}return t.\u0275fac=function(e){return new(e||t)(yo(Lb))},t.\u0275cmp=de({type:t,selectors:[["app-marking-sheet"]],viewQuery:function(t,e){var n;1&t&&(Rl(DS,!0),Rl(LS,!0),Rl(MS,!0),Rl(US,!0)),2&t&&(Fl(n=Ul())&&(e.topLeftArucoMarker=n.first),Fl(n=Ul())&&(e.topRightArucoMarker=n.first),Fl(n=Ul())&&(e.bottomLeftArucoMarker=n.first),Fl(n=Ul())&&(e.bottomRightArucoMarker=n.first))},decls:28,vars:3,consts:[[1,"content-wrapper","debug-border"],[1,"aruco-marker","aruco-top","aruco-left"],["topLeftArucoMarker",""],[1,"aruco-marker","aruco-top","aruco-right"],["topRightArucoMarker",""],[1,"aruco-marker","aruco-bottom","aruco-left"],["bottomLeftArucoMarker",""],[1,"aruco-marker","aruco-bottom","aruco-right"],["bottomRightArucoMarker",""],[1,"inner-content-wrapper","debug-border"],[1,"exam-header","debug-border"],[1,"spacer","debug-border"],[1,"mark-container","debug-border"],[1,"question-labels","debug-border"],["class","question-row debug-border",4,"ngFor","ngForOf"],[1,"marks","debug-border"],["class","mark-slices debug-border",4,"ngFor","ngForOf"],[1,"question-row","debug-border"],[1,"mark-slices","debug-border"],["class","mark-slice",4,"ngFor","ngForOf"],[1,"mark-slice"]],template:function(t,e){1&t&&(xo(0,"div",0),Co(1,"div",1,2),Co(3,"div",3,4),Co(5,"div",5,6),Co(7,"div",7,8),xo(9,"div",9),xo(10,"div",10),xo(11,"h1"),ra(12),_o(),xo(13,"table"),xo(14,"tr"),xo(15,"th"),ra(16,"Name"),_o(),xo(17,"th"),ra(18,"Immatriculation Number"),_o(),_o(),xo(19,"tr"),Co(20,"td"),Co(21,"td"),_o(),_o(),_o(),Co(22,"div",11),xo(23,"div",12),xo(24,"div",13),mo(25,PS,7,1,"div",14),_o(),xo(26,"div",15),mo(27,QS,2,1,"div",16),_o(),_o(),_o(),_o()),2&t&&(Ai(12),ia(e.examManager.exam.title),Ai(13),bo("ngForOf",e.examManager.exam.questions),Ai(2),bo("ngForOf",e.examManager.calculateMarkPositions()))},directives:[Lc,aS],styles:["[_nghost-%COMP%]{display:flex;position:relative;width:1050px;height:1485px;background:#fff;margin-bottom:10px}.debug-border[_ngcontent-%COMP%]{outline:0 solid #d3d3d3}.content-wrapper[_ngcontent-%COMP%]   .inner-content-wrapper[_ngcontent-%COMP%]{left:50px;right:50px;top:50px;bottom:50px;position:absolute;display:flex;flex-direction:column}.content-wrapper[_ngcontent-%COMP%]   .inner-content-wrapper[_ngcontent-%COMP%]   .exam-header[_ngcontent-%COMP%]{height:150px;display:flex;flex-direction:column}.content-wrapper[_ngcontent-%COMP%]   .inner-content-wrapper[_ngcontent-%COMP%]   .exam-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{height:30px}.content-wrapper[_ngcontent-%COMP%]   .inner-content-wrapper[_ngcontent-%COMP%]   .exam-header[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{border-collapse:collapse;width:100%}.content-wrapper[_ngcontent-%COMP%]   .inner-content-wrapper[_ngcontent-%COMP%]   .exam-header[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .content-wrapper[_ngcontent-%COMP%]   .inner-content-wrapper[_ngcontent-%COMP%]   .exam-header[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:1px solid #ddd;text-align:left;padding:5px;height:20px;width:50%}.content-wrapper[_ngcontent-%COMP%]   .inner-content-wrapper[_ngcontent-%COMP%]   .spacer[_ngcontent-%COMP%]{height:10px}.content-wrapper[_ngcontent-%COMP%]   .inner-content-wrapper[_ngcontent-%COMP%]   .mark-container[_ngcontent-%COMP%]{flex-grow:1;display:flex;flex-direction:row}.question-labels[_ngcontent-%COMP%]{width:100px;display:flex;flex-direction:column}.question-labels[_ngcontent-%COMP%]   .question-row[_ngcontent-%COMP%]{margin-bottom:10px;height:100px}.marks[_ngcontent-%COMP%], .question-labels[_ngcontent-%COMP%]   .question-row[_ngcontent-%COMP%]{display:flex;flex-direction:column}.marks[_ngcontent-%COMP%]   .mark-slices[_ngcontent-%COMP%]{display:flex;flex-direction:row;height:100px;margin-bottom:10px}.marks[_ngcontent-%COMP%]   .mark-slices[_ngcontent-%COMP%]   .mark-slice[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-right:10px}.marks[_ngcontent-%COMP%]   .mark-slices[_ngcontent-%COMP%]   .mark-slice[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{height:20px;width:20px}.aruco-marker[_ngcontent-%COMP%]{position:absolute;display:block;width:50px;height:50px}.aruco-left[_ngcontent-%COMP%]{left:0}.aruco-right[_ngcontent-%COMP%]{right:0}.aruco-top[_ngcontent-%COMP%]{top:0}.aruco-bottom[_ngcontent-%COMP%]{bottom:0}"]}),t})(),$S=(()=>{class t{constructor(t){this.examManager=t}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(yo(Lb))},t.\u0275cmp=de({type:t,selectors:[["app-page-header"]],decls:5,vars:4,template:function(t,e){1&t&&(xo(0,"label"),ra(1),_o(),xo(2,"label"),ra(3),yl(4,"date"),_o()),2&t&&(Ai(1),ia(e.examManager.exam.title),Ai(2),ia(wl(4,2,e.examManager.exam.date)))},pipes:[jc],styles:["[_nghost-%COMP%]{width:100%;display:flex;flex-direction:row;justify-content:space-between;padding-top:20px;padding-left:80px;padding-right:80px;color:grey}"]}),t})();var VS=n("QtUI"),qS=n("Oy/b");const jS=function(t){return{displayMode:t}};function KS(t,e){if(1&t&&Co(0,"ng-katex",3),2&t){const t=Oo().$implicit;bo("equation",t.raw)("options",ml(2,jS,"display"===t.type))}}function WS(t,e){1&t&&ra(0),2&t&&ia(Oo().$implicit.value)}function GS(t,e){if(1&t&&(So(0),mo(1,KS,1,4,"ng-katex",1),mo(2,WS,1,1,"ng-template",null,2,Hl),Eo()),2&t){const t=e.$implicit,n=go(3);Ai(1),bo("ngIf",t.math)("ngIfElse",n)}}let XS=(()=>{class t{constructor(){this.onError=new bl}hasError(t){this.onError.emit(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=de({type:t,selectors:[["ng-katex"]],inputs:{equation:"equation",options:"options"},outputs:{onError:"onError"},decls:1,vars:2,consts:[[3,"katex","katex-options","someEvent"]],template:function(t,e){1&t&&(xo(0,"span",0),Fo("someEvent",(function(t){return e.hasError(t)})),_o()),2&t&&bo("katex",e.equation)("katex-options",e.options)},directives:function(){return[ZS]},encapsulation:2}),t})(),YS=(()=>{class t{get segments(){return Object(VS.extractMath)(this.paragraph)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=de({type:t,selectors:[["ng-katex-paragraph"]],inputs:{paragraph:"paragraph"},decls:2,vars:1,consts:[[4,"ngFor","ngForOf"],[3,"equation","options",4,"ngIf","ngIfElse"],["text",""],[3,"equation","options"]],template:function(t,e){1&t&&(xo(0,"p"),mo(1,GS,4,2,"ng-container",0),_o()),2&t&&(Ai(1),bo("ngForOf",e.segments))},directives:[Lc,Uc,XS],encapsulation:2,changeDetection:0}),t})(),JS=(()=>{class t{render(t,e,n){return Object(qS.render)(t,e.nativeElement,n)}renderToString(t,e){return Object(qS.renderToString)(t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),ZS=(()=>{class t{constructor(t,e){this.el=t,this.katexService=e,this.onError=new bl}ngOnChanges(){try{this.katexService.render(this.equation,this.el,this.options)}catch(t){this.onError.emit(t)}}}return t.\u0275fac=function(e){return new(e||t)(yo(Ca),yo(JS))},t.\u0275dir=ye({type:t,selectors:[["","katex",""]],inputs:{equation:["katex","equation"],options:["katex-options","options"]},outputs:{onError:"onError"},features:[Fe]}),t})(),tE=(()=>{class t{}return t.\u0275mod=me({type:t}),t.\u0275inj=ct({factory:function(e){return new(e||t)},providers:[JS],imports:[[Wc]]}),t})();const eE=["pages"],nE=["TmpCanvas"],rE=["markAnalyzer"];function iE(t,e){if(1&t&&(So(0),Co(1,"ng-katex-paragraph",17),Eo()),2&t){const t=Oo().$implicit;Ai(1),bo("paragraph",t)}}function sE(t,e){1&t&&Co(0,"img",18),2&t&&bo("src",Oo().$implicit.base64string,Gr)}function oE(t,e){if(1&t&&(xo(0,"div",19),xo(1,"span"),ra(2),_o(),Co(3,"ng-katex-paragraph",17),_o()),2&t){const t=Oo(),e=t.index,n=t.$implicit,r=Oo().$implicit,i=Oo();Ai(2),sa("",i.examManager.getCharOfElem(r,e),")"),Ai(1),bo("paragraph",n.question)}}function aE(t,e){if(1&t&&(xo(0,"div"),mo(1,iE,2,1,"ng-container",14),mo(2,sE,1,1,"img",15),mo(3,oE,4,2,"div",16),_o()),2&t){const t=e.$implicit,n=Oo(2);Ai(1),bo("ngIf",n.isText(t)),Ai(1),bo("ngIf",n.isImage(t)),Ai(1),bo("ngIf",n.isQuestion(t))}}function lE(t,e){if(1&t&&(So(0,9),xo(1,"div",10),Co(2,"app-page-header"),xo(3,"div",11),xo(4,"h1"),ra(5),_o(),mo(6,aE,4,3,"div",12),_o(),Co(7,"div",13),_o(),Eo()),2&t){const t=e.$implicit,n=e.index,r=Oo();Ai(5),sa("Question ",n+1,":"),Ai(1),bo("ngForOf",t.elements)("ngForTrackBy",r.trackByFn)}}let uE=(()=>{class t{constructor(t,e,n){this.elRef=t,this.examManager=e,this.tfEval=n,this.canvWidth=50,this.canvHeight=50,this.batchResult={sheets:{}},this.isText=t=>"string"==typeof t,this.isImage=t=>"object"==typeof t&&"base64string"in t,this.isQuestion=t=>"object"==typeof t&&"question"in t}static flattenPoints(t){const e=[];for(const n of t)e.push(n.x,n.y);return e}ngOnInit(){}sleep(t=1){return bS(this,void 0,void 0,(function*(){yield new Promise(e=>setTimeout(e,1e3*t))}))}downloadPdf(t){return bS(this,void 0,void 0,(function*(){console.log("downloading pdf");let t=new CS.a;const e=this.pages.nativeElement.children;for(let n=0;n<e.length;n++){const r=e.item(n),i=(yield xS()(r,{removeContainer:!0,scale:2})).toDataURL("image/jpeg");n>0&&t.addPage(),t.setPage(n+1),yield t.addImage(i,"JPEG",0,0,210,297)}t.save("test.pdf")}))}getImgCorners(t,e){return bS(this,void 0,void 0,(function*(){let n=new SS.AR.Detector;const r=[],i=[],s=t.width/4,o=t.height/4;this.canvWidth=s,this.canvHeight=o,e.canvas.width=s,e.canvas.height=o,e.drawImage(t,0,0,s,o,0,0,s,o);let a=n.detect(e.getImageData(0,0,s,o))[0],l=Object.assign({},a.corners[0]);return i.push(a.corners),r.push(l),e.drawImage(t,3*s,0,s,o,0,0,s,o),a=n.detect(e.getImageData(0,0,s,o))[0],l=Object.assign({},a.corners[1]),l.x+=3*s,i.push(a.corners),r.push(l),e.drawImage(t,0,3*o,s,o,0,0,s,o),a=n.detect(e.getImageData(0,0,s,o))[0],l=Object.assign({},a.corners[3]),l.y+=3*o,i.push(a.corners),r.push(l),e.drawImage(t,3*s,3*o,s,o,0,0,s,o),a=n.detect(e.getImageData(0,0,s,o))[0],l=Object.assign({},a.corners[2]),l.x+=3*s,l.y+=3*o,i.push(a.corners),r.push(l),r}))}processImage(e,n,r){return bS(this,void 0,void 0,(function*(){const i=t.flattenPoints([{x:0,y:0},{x:1030,y:0},{x:0,y:1465},{x:1030,y:1465}]),s=yield this.getImgCorners(e,n),o=t.flattenPoints(s),a=BS()(i,o);this.canvWidth=e.width,this.canvHeight=e.height,n.canvas.width=this.canvWidth,n.canvas.height=this.canvHeight,n.clearRect(0,0,n.canvas.width,n.canvas.height),n.drawImage(e,0,0);const l=a.transform(520,0)[0]-a.transform(500,0)[0],u=a.transform(0,520)[1]-a.transform(0,500)[1],c=this.markAnalyzerCanvas.nativeElement.getContext("2d"),h=[],d=[];let p=new NS;for(let t=0;t<this.examManager.exam.questions.length;t++){h.push([]),d.push([]);const r=this.examManager.exam.questions[t];let i=0;for(const s of r.elements)if("object"==typeof s&&"question"in s){const r=this.markToPx(t,i,!0),s=this.markToPx(t,i,!1),o=a.transform(r.x,r.y),f={x:o[0]-5,y:o[1]+5},A=a.transform(s.x,s.y),m={x:A[0]-5,y:A[1]+5};c.drawImage(e,f.x,f.y,l,u,0,0,32,32);const g=yield this.tfEval.predict(c.canvas);p.file("mark"+t+"_"+i+"_true.png",c.canvas.toDataURL().replace("data:image/png;base64,",""),{base64:!0}),c.drawImage(e,m.x,m.y,l,u,0,0,32,32);const y=yield this.tfEval.predict(c.canvas);p.file("mark"+t+"_"+i+"_false.png",c.canvas.toDataURL().replace("data:image/png;base64,",""),{base64:!0}),h[t].push(g),d[t].push(y),n.fillStyle=g>.95?"rgba(0, 200, 200, .3)":"rgba(0, 0, 200, .2)",n.fillRect(f.x,f.y,l,u),n.fillStyle=y>.95?"rgba(0, 200, 200, .3)":"rgba(0, 0, 200, .2)",n.fillRect(m.x,m.y,l,u),i++}}p.generateAsync({type:"blob"}).then((function(t){IS.saveAs(t,r.name+".zip")})),this.batchResult.sheets[r.name]={trueCheckedCertainties:h,falseCheckedCertainties:d}}))}addImageSrc(t,e){return bS(this,void 0,void 0,(function*(){return new Promise((n,r)=>{t.onload=()=>n(t.height),t.onerror=r,t.src=e})}))}importImages(t){return bS(this,void 0,void 0,(function*(){yield this.tfEval.initialize(),this.batchResult={sheets:{}};const e=new Image(1240,1745),n=this.canvas.nativeElement,r=n.getContext("2d");n.width=50,n.height=50;for(let i=0;i<t.length;i++){const n=t.item(i);yield this.addImageSrc(e,URL.createObjectURL(n)),yield this.processImage(e,r,n)}for(const t of Object.keys(this.batchResult.sheets))yield this.evaluateSheet(this.batchResult.sheets[t]);console.log(this.batchResult)}))}getCanvasStyle(){return{width:this.canvWidth+"px",height:this.canvHeight+"px"}}trackByFn(t,e){return t}markToPx(t,e,n){return{x:150+30*e,y:210+110*t+20+(n?0:20)}}evaluateSheet(t){t.answerStates=[];for(let e=0;e<this.examManager.exam.questions.length;e++){t.answerStates.push([]);let n=this.examManager.exam.questions[e],r=0;for(const i of n.elements)if("object"==typeof i&&"question"in i){if(1===t.trueCheckedCertainties[e][r]&&1===t.falseCheckedCertainties[e][r])t.answerStates[e].push(kS.WRONG);else if(0===t.trueCheckedCertainties[e][r]&&0===t.falseCheckedCertainties[e][r])t.answerStates[e].push(kS.EMPTY);else{let n=void 0;1===t.trueCheckedCertainties[e][r]?n=!0:1===t.falseCheckedCertainties[e][r]&&(n=!1),t.answerStates[e].push(n===i.answer?kS.CORRECT:kS.WRONG)}r++}}}}return t.\u0275fac=function(e){return new(e||t)(yo(Ca),yo(Lb),yo(TS))},t.\u0275cmp=de({type:t,selectors:[["app-document-preview"]],viewQuery:function(t,e){var n;1&t&&(Rl(eE,!0),Rl(nE,!0),Rl(rE,!0)),2&t&&(Fl(n=Ul())&&(e.pages=n.first),Fl(n=Ul())&&(e.canvas=n.first),Fl(n=Ul())&&(e.markAnalyzerCanvas=n.first))},decls:11,vars:3,consts:[["mat-button","",3,"click"],["multiple","","type","file",3,"change"],[3,"ngStyle"],["TmpCanvas",""],["height","32","width","32",1,"mark-analyzer"],["markAnalyzer",""],["id","pages"],["pages",""],["class","page",4,"ngFor","ngForOf","ngForTrackBy"],[1,"page"],[1,"content-wrapper"],[1,"inner-content-wrapper"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"space-consumer"],[4,"ngIf"],[3,"src",4,"ngIf"],["class","question-wrapper",4,"ngIf"],[3,"paragraph"],[3,"src"],[1,"question-wrapper"]],template:function(t,e){1&t&&(xo(0,"button",0),Fo("click",(function(t){return e.downloadPdf(t)})),ra(1,"Download"),_o(),xo(2,"input",1),Fo("change",(function(t){return e.importImages(t.target.files)})),_o(),Co(3,"canvas",2,3),Co(5,"canvas",4,5),xo(7,"div",6,7),Co(9,"app-marking-sheet"),mo(10,lE,8,3,"ng-container",8),_o()),2&t&&(Ai(3),bo("ngStyle",e.getCanvasStyle()),Ai(7),bo("ngForOf",e.examManager.exam.questions)("ngForTrackBy",e.trackByFn))},directives:[fw,qc,HS,Lc,$S,Uc,YS],styles:["[_nghost-%COMP%]{width:70%;height:100%;max-height:100%;overflow-x:hidden;align-items:flex-end;overflow-y:hidden}.content-wrapper[_ngcontent-%COMP%], [_nghost-%COMP%]{display:flex;flex-direction:column}.content-wrapper[_ngcontent-%COMP%]{width:1050px;height:1485px;margin-bottom:10px;background:#fff;position:relative}.content-wrapper[_ngcontent-%COMP%]   .inner-content-wrapper[_ngcontent-%COMP%]{left:100px;right:100px;top:50px;bottom:50px;position:absolute;display:flex;flex-direction:column}#pages[_ngcontent-%COMP%]{display:flex;height:100%;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;overflow-x:hidden;overflow-y:scroll;flex-direction:column}.mark-analyzer[_ngcontent-%COMP%]{width:64px;height:64px}.space-consumer[_ngcontent-%COMP%]{flex:1}.question-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row}.question-wrapper[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:first-child{margin-left:20px;margin-right:5px}"]}),t})();const cE=[{path:"",redirectTo:"exams",pathMatch:"full"},{path:"exams",component:Ob},{path:"exam/:id",component:(()=>{class t{constructor(t,e){this.route=t,this.examManager=e,this.examId=void 0}ngOnInit(){this.route.queryParams.subscribe(t=>{this.examId=t.id,this.examManager.loadExam(this.examId)})}}return t.\u0275fac=function(e){return new(e||t)(yo(xp),yo(Lb))},t.\u0275cmp=de({type:t,selectors:[["app-exam-editor"]],decls:3,vars:0,consts:[[1,"main-container"]],template:function(t,e){1&t&&(xo(0,"div",0),Co(1,"app-document-editor"),Co(2,"app-document-preview"),_o())},directives:[wS,uE],styles:["[_nghost-%COMP%]{width:100%;height:95%;display:block}.main-container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:row}"]}),t})()}];let hE=(()=>{class t{}return t.\u0275mod=me({type:t}),t.\u0275inj=ct({factory:function(e){return new(e||t)},imports:[[Yf.forRoot(cE)],Yf]}),t})();const dE=["*",[["mat-toolbar-row"]]],pE=["*","mat-toolbar-row"];class fE{constructor(t){this._elementRef=t}}const AE=Ry(fE);let mE=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=ye({type:t,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),t})(),gE=(()=>{class t extends AE{constructor(t,e,n){super(t),this._platform=e,this._document=n}ngAfterViewInit(){Sr()&&this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){this._toolbarRows.length&&Array.from(this._elementRef.nativeElement.childNodes).filter(t=>!(t.classList&&t.classList.contains("mat-toolbar-row"))).filter(t=>t.nodeType!==(this._document?this._document.COMMENT_NODE:8)).some(t=>!(!t.textContent||!t.textContent.trim()))&&function(){throw Error("MatToolbar: Attempting to combine different toolbar modes. Either specify multiple `<mat-toolbar-row>` elements explicitly or just place content inside of a `<mat-toolbar>` for a single row.")}()}}return t.\u0275fac=function(e){return new(e||t)(yo(Ca),yo(gA),yo(Qu))},t.\u0275cmp=de({type:t,selectors:[["mat-toolbar"]],contentQueries:function(t,e,n){var r;1&t&&Dl(n,mE,!0),2&t&&Fl(r=Ul())&&(e._toolbarRows=r)},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(t,e){2&t&&jo("mat-toolbar-multiple-rows",e._toolbarRows.length>0)("mat-toolbar-single-row",0===e._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[la],ngContentSelectors:pE,decls:2,vars:0,template:function(t,e){1&t&&(Lo(dE),Mo(0),Mo(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}\n"],encapsulation:2,changeDetection:0}),t})(),yE=(()=>{class t{}return t.\u0275mod=me({type:t}),t.\u0275inj=ct({factory:function(e){return new(e||t)},imports:[[Fy],Fy]}),t})();const wE=function(){return["/"]};let bE=(()=>{class t{constructor(){this.title="exam-grader"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=de({type:t,selectors:[["app-root"]],decls:7,vars:2,consts:[["color","primary",1,"main-toolbar"],["mat-icon-button","",3,"routerLink"]],template:function(t,e){1&t&&(xo(0,"mat-toolbar",0),xo(1,"button",1),xo(2,"mat-icon"),ra(3,"home"),_o(),_o(),xo(4,"span"),ra(5,"Exam Grader"),_o(),_o(),Co(6,"router-outlet")),2&t&&(Ai(1),bo("routerLink",Al(1,wE)))},directives:[gE,fw,Pf,R_,Qf],styles:[".main-toolbar[_ngcontent-%COMP%]{height:5%}"]}),t})(),vE=(()=>{class t{}return t.\u0275mod=me({type:t,bootstrap:[bE]}),t.\u0275inj=ct({factory:function(e){return new(e||t)},providers:[],imports:[[Eh,hE,Sy,Aw,uS,yE,O_,Cb,Gx,Hx,s_,XC,tE]]}),t})();(function(){if(Cr)throw new Error("Cannot enable prod mode after platform setup.");_r=!1})(),Ch().bootstrapModule(vE).catch(t=>console.error(t))},zhpf:function(t,e,n){"use strict";n.r(e),n.d(e,"AdadeltaOptimizer",(function(){return Zp})),n.d(e,"AdagradOptimizer",(function(){return tf})),n.d(e,"AdamOptimizer",(function(){return ef})),n.d(e,"AdamaxOptimizer",(function(){return nf})),n.d(e,"MomentumOptimizer",(function(){return sf})),n.d(e,"Optimizer",(function(){return Jp})),n.d(e,"RMSPropOptimizer",(function(){return of})),n.d(e,"SGDOptimizer",(function(){return rf})),n.d(e,"Tensor",(function(){return ue})),n.d(e,"TensorBuffer",(function(){return se})),n.d(e,"Variable",(function(){return ce})),n.d(e,"Rank",(function(){return he})),n.d(e,"sumOutType",(function(){return ye})),n.d(e,"upcastType",(function(){return ge})),n.d(e,"abs",(function(){return lc})),n.d(e,"acos",(function(){return uc})),n.d(e,"acosh",(function(){return cc})),n.d(e,"add",(function(){return $i})),n.d(e,"addN",(function(){return hc})),n.d(e,"all",(function(){return dc})),n.d(e,"any",(function(){return pc})),n.d(e,"argMax",(function(){return fc})),n.d(e,"argMin",(function(){return Ac})),n.d(e,"asin",(function(){return mc})),n.d(e,"asinh",(function(){return gc})),n.d(e,"atan",(function(){return yc})),n.d(e,"atan2",(function(){return wc})),n.d(e,"atanh",(function(){return bc})),n.d(e,"avgPool",(function(){return vc})),n.d(e,"avgPool3d",(function(){return xc})),n.d(e,"basicLSTMCell",(function(){return Cc})),n.d(e,"batchToSpaceND",(function(){return Pa})),n.d(e,"batchNorm",(function(){return Ec})),n.d(e,"batchNorm2d",(function(){return Bc})),n.d(e,"batchNorm3d",(function(){return kc})),n.d(e,"batchNorm4d",(function(){return Nc})),n.d(e,"broadcastTo",(function(){return Ic})),n.d(e,"buffer",(function(){return Fc})),n.d(e,"cast",(function(){return bi})),n.d(e,"ceil",(function(){return Tc})),n.d(e,"clipByValue",(function(){return Rc})),n.d(e,"clone",(function(){return ia})),n.d(e,"complex",(function(){return $o})),n.d(e,"concat",(function(){return Va})),n.d(e,"concat1d",(function(){return Oc})),n.d(e,"concat2d",(function(){return Dc})),n.d(e,"concat3d",(function(){return Lc})),n.d(e,"concat4d",(function(){return Mc})),n.d(e,"conv1d",(function(){return Uc})),n.d(e,"conv2d",(function(){return Ps})),n.d(e,"conv2dTranspose",(function(){return Pc})),n.d(e,"conv3d",(function(){return zc})),n.d(e,"conv3dTranspose",(function(){return Qc})),n.d(e,"cos",(function(){return ma})),n.d(e,"cosh",(function(){return ya})),n.d(e,"cumsum",(function(){return Gs})),n.d(e,"depthToSpace",(function(){return Hc})),n.d(e,"depthwiseConv2d",(function(){return $c})),n.d(e,"diag",(function(){return Vc})),n.d(e,"dilation2d",(function(){return qc})),n.d(e,"div",(function(){return Si})),n.d(e,"divNoNan",(function(){return jc})),n.d(e,"dot",(function(){return Kc})),n.d(e,"elu",(function(){return Wc})),n.d(e,"equal",(function(){return Bo})),n.d(e,"erf",(function(){return Gc})),n.d(e,"exp",(function(){return ro})),n.d(e,"expandDims",(function(){return il})),n.d(e,"expm1",(function(){return Xc})),n.d(e,"eye",(function(){return Yc})),n.d(e,"fft",(function(){return Jc})),n.d(e,"fill",(function(){return Zc})),n.d(e,"floor",(function(){return Po})),n.d(e,"floorDiv",(function(){return Ci})),n.d(e,"gather",(function(){return dl})),n.d(e,"greater",(function(){return Mo})),n.d(e,"greaterEqual",(function(){return ks})),n.d(e,"ifft",(function(){return th})),n.d(e,"imag",(function(){return eh})),n.d(e,"irfft",(function(){return rh})),n.d(e,"isFinite",(function(){return ih})),n.d(e,"isInf",(function(){return sh})),n.d(e,"isNaN",(function(){return oh})),n.d(e,"leakyRelu",(function(){return ah})),n.d(e,"less",(function(){return Io})),n.d(e,"lessEqual",(function(){return Ns})),n.d(e,"linspace",(function(){return lh})),n.d(e,"localResponseNormalization",(function(){return uh})),n.d(e,"log",(function(){return Wo})),n.d(e,"log1p",(function(){return ch})),n.d(e,"logSigmoid",(function(){return yh})),n.d(e,"logSoftmax",(function(){return bh})),n.d(e,"logSumExp",(function(){return vh})),n.d(e,"logicalAnd",(function(){return Is})),n.d(e,"logicalNot",(function(){return ua})),n.d(e,"logicalOr",(function(){return xh})),n.d(e,"logicalXor",(function(){return _h})),n.d(e,"matMul",(function(){return vs})),n.d(e,"max",(function(){return wh})),n.d(e,"maxPool",(function(){return Ch})),n.d(e,"maxPool3d",(function(){return Sh})),n.d(e,"maxPoolWithArgmax",(function(){return Eh})),n.d(e,"maximum",(function(){return pl})),n.d(e,"mean",(function(){return Bh})),n.d(e,"min",(function(){return kh})),n.d(e,"minimum",(function(){return Nh})),n.d(e,"mod",(function(){return Ih})),n.d(e,"moments",(function(){return Fh})),n.d(e,"mul",(function(){return vi})),n.d(e,"multiRNNCell",(function(){return Th})),n.d(e,"multinomial",(function(){return Rh})),n.d(e,"neg",(function(){return Ei})),n.d(e,"notEqual",(function(){return Oh})),n.d(e,"oneHot",(function(){return gu})),n.d(e,"ones",(function(){return Ya})),n.d(e,"onesLike",(function(){return Dh})),n.d(e,"outerProduct",(function(){return Lh})),n.d(e,"pad",(function(){return ba})),n.d(e,"pad1d",(function(){return Mh})),n.d(e,"pad2d",(function(){return Uh})),n.d(e,"pad3d",(function(){return Ph})),n.d(e,"pad4d",(function(){return zh})),n.d(e,"pool",(function(){return Qh})),n.d(e,"pow",(function(){return Go})),n.d(e,"prelu",(function(){return Hh})),n.d(e,"print",(function(){return $h})),n.d(e,"prod",(function(){return Vh})),n.d(e,"rand",(function(){return qh})),n.d(e,"randomGamma",(function(){return Xh})),n.d(e,"randomNormal",(function(){return Yh})),n.d(e,"randomUniform",(function(){return Jh})),n.d(e,"range",(function(){return td})),n.d(e,"real",(function(){return nh})),n.d(e,"reciprocal",(function(){return ed})),n.d(e,"relu",(function(){return nd})),n.d(e,"relu6",(function(){return rd})),n.d(e,"reshape",(function(){return qi})),n.d(e,"reverse",(function(){return sa})),n.d(e,"reverse1d",(function(){return id})),n.d(e,"reverse2d",(function(){return sd})),n.d(e,"reverse3d",(function(){return od})),n.d(e,"reverse4d",(function(){return ad})),n.d(e,"rfft",(function(){return ld})),n.d(e,"round",(function(){return ud})),n.d(e,"rsqrt",(function(){return uo})),n.d(e,"scalar",(function(){return ki})),n.d(e,"selu",(function(){return cd})),n.d(e,"separableConv2d",(function(){return hd})),n.d(e,"setdiff1dAsync",(function(){return dd})),n.d(e,"sigmoid",(function(){return Ma})),n.d(e,"sign",(function(){return pd})),n.d(e,"sin",(function(){return Vs})),n.d(e,"sinh",(function(){return js})),n.d(e,"slice",(function(){return el})),n.d(e,"slice1d",(function(){return fd})),n.d(e,"slice2d",(function(){return Ad})),n.d(e,"slice3d",(function(){return md})),n.d(e,"slice4d",(function(){return gd})),n.d(e,"softmax",(function(){return yd})),n.d(e,"softplus",(function(){return wd})),n.d(e,"spaceToBatchND",(function(){return _s})),n.d(e,"split",(function(){return Os})),n.d(e,"sqrt",(function(){return Ni})),n.d(e,"square",(function(){return Ii})),n.d(e,"squaredDifference",(function(){return bd})),n.d(e,"squeeze",(function(){return vd})),n.d(e,"stack",(function(){return sl})),n.d(e,"step",(function(){return xi})),n.d(e,"stridedSlice",(function(){return xd})),n.d(e,"sub",(function(){return Fi})),n.d(e,"sum",(function(){return ts})),n.d(e,"tan",(function(){return _d})),n.d(e,"tanh",(function(){return _c})),n.d(e,"tensor",(function(){return $a})),n.d(e,"tensor1d",(function(){return Zh})),n.d(e,"tensor2d",(function(){return Cd})),n.d(e,"tensor3d",(function(){return wu})),n.d(e,"tensor4d",(function(){return Sd})),n.d(e,"tensor5d",(function(){return Ed})),n.d(e,"tensor6d",(function(){return Bd})),n.d(e,"tile",(function(){return co})),n.d(e,"topk",(function(){return kd})),n.d(e,"truncatedNormal",(function(){return Nd})),n.d(e,"unsortedSegmentSum",(function(){return po})),n.d(e,"unstack",(function(){return Id})),n.d(e,"variable",(function(){return Fd})),n.d(e,"where",(function(){return Fs})),n.d(e,"whereAsync",(function(){return Rd})),n.d(e,"zeros",(function(){return Vo})),n.d(e,"zerosLike",(function(){return Pi})),n.d(e,"booleanMaskAsync",(function(){return Od})),n.d(e,"equalStrict",(function(){return Dd})),n.d(e,"greaterEqualStrict",(function(){return Ld})),n.d(e,"greaterStrict",(function(){return Md})),n.d(e,"lessEqualStrict",(function(){return Ud})),n.d(e,"lessStrict",(function(){return Pd})),n.d(e,"notEqualStrict",(function(){return zd})),n.d(e,"addStrict",(function(){return Qd})),n.d(e,"divStrict",(function(){return Hd})),n.d(e,"maximumStrict",(function(){return $d})),n.d(e,"minimumStrict",(function(){return Vd})),n.d(e,"modStrict",(function(){return qd})),n.d(e,"mulStrict",(function(){return jd})),n.d(e,"powStrict",(function(){return Kd})),n.d(e,"squaredDifferenceStrict",(function(){return Wd})),n.d(e,"subStrict",(function(){return Gd})),n.d(e,"transpose",(function(){return Ws})),n.d(e,"norm",(function(){return Xd})),n.d(e,"movingAverage",(function(){return Yd})),n.d(e,"scatterND",(function(){return Jd})),n.d(e,"sparseToDense",(function(){return Zd})),n.d(e,"gatherND",(function(){return tp})),n.d(e,"dropout",(function(){return ep})),n.d(e,"enclosingPowerOfTwo",(function(){return np})),n.d(e,"cosineWindow",(function(){return rp})),n.d(e,"inTopKAsync",(function(){return ip})),n.d(e,"op",(function(){return wi})),n.d(e,"image",(function(){return Gp})),n.d(e,"linalg",(function(){return Xp})),n.d(e,"losses",(function(){return Yp})),n.d(e,"spectral",(function(){return Kp})),n.d(e,"fused",(function(){return A})),n.d(e,"signal",(function(){return Wp})),n.d(e,"Reduction",(function(){return Mp})),n.d(e,"train",(function(){return lf})),n.d(e,"enableProdMode",(function(){return Qu})),n.d(e,"enableDebugMode",(function(){return Hu})),n.d(e,"disableDeprecationWarnings",(function(){return $u})),n.d(e,"deprecationWarn",(function(){return Vu})),n.d(e,"disposeVariables",(function(){return qu})),n.d(e,"engine",(function(){return ju})),n.d(e,"memory",(function(){return Ku})),n.d(e,"profile",(function(){return Wu})),n.d(e,"tidy",(function(){return Gu})),n.d(e,"dispose",(function(){return Xu})),n.d(e,"keep",(function(){return Yu})),n.d(e,"time",(function(){return Ju})),n.d(e,"setBackend",(function(){return Zu})),n.d(e,"ready",(function(){return tc})),n.d(e,"getBackend",(function(){return ec})),n.d(e,"removeBackend",(function(){return nc})),n.d(e,"findBackend",(function(){return rc})),n.d(e,"findBackendFactory",(function(){return ic})),n.d(e,"registerBackend",(function(){return sc})),n.d(e,"backend",(function(){return oc})),n.d(e,"setPlatform",(function(){return ac})),n.d(e,"getKernel",(function(){return Y})),n.d(e,"getGradient",(function(){return J})),n.d(e,"getKernelsForBackend",(function(){return Z})),n.d(e,"registerKernel",(function(){return tt})),n.d(e,"registerGradient",(function(){return et})),n.d(e,"unregisterKernel",(function(){return nt})),n.d(e,"unregisterGradient",(function(){return rt})),n.d(e,"customGrad",(function(){return mh})),n.d(e,"grad",(function(){return hh})),n.d(e,"grads",(function(){return dh})),n.d(e,"valueAndGrad",(function(){return ph})),n.d(e,"valueAndGrads",(function(){return fh})),n.d(e,"variableGrads",(function(){return Ah})),n.d(e,"Environment",(function(){return $})),n.d(e,"env",(function(){return V})),n.d(e,"ENV",(function(){return j})),n.d(e,"version_core",(function(){return zu})),n.d(e,"nextFrame",(function(){return cf})),n.d(e,"browser",(function(){return c})),n.d(e,"io",(function(){return l})),n.d(e,"math",(function(){return u})),n.d(e,"serialization",(function(){return p})),n.d(e,"test_util",(function(){return f})),n.d(e,"util",(function(){return r})),n.d(e,"backend_util",(function(){return g})),n.d(e,"tensor_util",(function(){return i})),n.d(e,"slice_util",(function(){return o})),n.d(e,"gather_util",(function(){return h})),n.d(e,"scatter_util",(function(){return d})),n.d(e,"device_util",(function(){return s})),n.d(e,"kernel_impls",(function(){return y})),n.d(e,"KernelBackend",(function(){return zf})),n.d(e,"DataStorage",(function(){return Pf})),n.d(e,"Abs",(function(){return Ne})),n.d(e,"Acos",(function(){return Ie})),n.d(e,"Acosh",(function(){return Fe})),n.d(e,"Add",(function(){return Te})),n.d(e,"AddN",(function(){return Re})),n.d(e,"All",(function(){return Oe})),n.d(e,"Any",(function(){return De})),n.d(e,"ArgMax",(function(){return Le})),n.d(e,"ArgMin",(function(){return Me})),n.d(e,"Asin",(function(){return Ue})),n.d(e,"Asinh",(function(){return Pe})),n.d(e,"Atan",(function(){return ze})),n.d(e,"Atanh",(function(){return Qe})),n.d(e,"Atan2",(function(){return He})),n.d(e,"AvgPool",(function(){return $e})),n.d(e,"AvgPoolBackprop",(function(){return Ve})),n.d(e,"AvgPool3D",(function(){return qe})),n.d(e,"AvgPool3DBackprop",(function(){return je})),n.d(e,"BatchMatMul",(function(){return Ke})),n.d(e,"BatchToSpaceND",(function(){return We})),n.d(e,"BroadcastTo",(function(){return Ge})),n.d(e,"Cast",(function(){return Xe})),n.d(e,"Ceil",(function(){return Ye})),n.d(e,"ClipByValue",(function(){return Je})),n.d(e,"Complex",(function(){return Ze})),n.d(e,"Concat",(function(){return tn})),n.d(e,"Conv2D",(function(){return en})),n.d(e,"Conv2DBackpropFilter",(function(){return nn})),n.d(e,"Conv2DBackpropInput",(function(){return rn})),n.d(e,"Conv3D",(function(){return sn})),n.d(e,"Conv3DBackpropFilterV2",(function(){return on})),n.d(e,"Conv3DBackpropInputV2",(function(){return an})),n.d(e,"Cos",(function(){return ln})),n.d(e,"Cosh",(function(){return un})),n.d(e,"Cumsum",(function(){return cn})),n.d(e,"CropAndResize",(function(){return hn})),n.d(e,"DepthToSpace",(function(){return dn})),n.d(e,"DepthwiseConv2dNative",(function(){return pn})),n.d(e,"DepthwiseConv2dNativeBackpropFilter",(function(){return fn})),n.d(e,"DepthwiseConv2dNativeBackpropInput",(function(){return An})),n.d(e,"Diag",(function(){return mn})),n.d(e,"Dilation2D",(function(){return gn})),n.d(e,"Dilation2DBackpropInput",(function(){return yn})),n.d(e,"Dilation2DBackpropFilter",(function(){return wn})),n.d(e,"Div",(function(){return bn})),n.d(e,"Elu",(function(){return vn})),n.d(e,"EluGrad",(function(){return xn})),n.d(e,"Erf",(function(){return _n})),n.d(e,"Equal",(function(){return Cn})),n.d(e,"Exp",(function(){return Sn})),n.d(e,"Expm1",(function(){return En})),n.d(e,"FFT",(function(){return Bn})),n.d(e,"Floor",(function(){return kn})),n.d(e,"FloorDiv",(function(){return Nn})),n.d(e,"Fill",(function(){return In})),n.d(e,"FusedBatchNorm",(function(){return Fn})),n.d(e,"GatherV2",(function(){return Tn})),n.d(e,"GatherNd",(function(){return Rn})),n.d(e,"Greater",(function(){return On})),n.d(e,"GreaterEqual",(function(){return Dn})),n.d(e,"Identity",(function(){return Ln})),n.d(e,"IFFT",(function(){return Mn})),n.d(e,"Imag",(function(){return Un})),n.d(e,"IsFinite",(function(){return Pn})),n.d(e,"IsInf",(function(){return zn})),n.d(e,"IsNan",(function(){return Qn})),n.d(e,"Less",(function(){return Hn})),n.d(e,"LessEqual",(function(){return $n})),n.d(e,"LinSpace",(function(){return Vn})),n.d(e,"Log",(function(){return qn})),n.d(e,"Log1p",(function(){return jn})),n.d(e,"LogicalAnd",(function(){return Kn})),n.d(e,"LogicalNot",(function(){return Wn})),n.d(e,"LogicalOr",(function(){return Gn})),n.d(e,"LogSoftmax",(function(){return Xn})),n.d(e,"LRN",(function(){return Yn})),n.d(e,"LRNBackprop",(function(){return Jn})),n.d(e,"Max",(function(){return Zn})),n.d(e,"Maximum",(function(){return tr})),n.d(e,"MaxPool",(function(){return er})),n.d(e,"MaxPoolBackprop",(function(){return nr})),n.d(e,"MaxPool3D",(function(){return rr})),n.d(e,"MaxPool3DBackprop",(function(){return ir})),n.d(e,"MaxPoolWithArgmax",(function(){return sr})),n.d(e,"Mean",(function(){return or})),n.d(e,"Min",(function(){return ar})),n.d(e,"Minimum",(function(){return lr})),n.d(e,"Mod",(function(){return ur})),n.d(e,"Multiply",(function(){return cr})),n.d(e,"Negate",(function(){return hr})),n.d(e,"NotEqual",(function(){return dr})),n.d(e,"NonMaxSuppressionV3",(function(){return pr})),n.d(e,"NonMaxSuppressionV4",(function(){return fr})),n.d(e,"NonMaxSuppressionV5",(function(){return Ar})),n.d(e,"OnesLike",(function(){return mr})),n.d(e,"OneHot",(function(){return gr})),n.d(e,"PadV2",(function(){return yr})),n.d(e,"Pool",(function(){return wr})),n.d(e,"Pow",(function(){return br})),n.d(e,"Prelu",(function(){return vr})),n.d(e,"Prod",(function(){return xr})),n.d(e,"Range",(function(){return _r})),n.d(e,"Real",(function(){return Cr})),n.d(e,"Reciprocal",(function(){return Sr})),n.d(e,"Relu",(function(){return Er})),n.d(e,"Reshape",(function(){return Br})),n.d(e,"ResizeNearestNeighbor",(function(){return kr})),n.d(e,"ResizeNearestNeighborGrad",(function(){return Nr})),n.d(e,"ResizeBilinear",(function(){return Ir})),n.d(e,"ResizeBilinearGrad",(function(){return Fr})),n.d(e,"Relu6",(function(){return Tr})),n.d(e,"Reverse",(function(){return Rr})),n.d(e,"Round",(function(){return Or})),n.d(e,"Rsqrt",(function(){return Dr})),n.d(e,"ScatterNd",(function(){return Lr})),n.d(e,"SelectV2",(function(){return Mr})),n.d(e,"Selu",(function(){return Ur})),n.d(e,"Slice",(function(){return Pr})),n.d(e,"Sin",(function(){return zr})),n.d(e,"Sinh",(function(){return Qr})),n.d(e,"Sign",(function(){return Hr})),n.d(e,"Sigmoid",(function(){return $r})),n.d(e,"Softplus",(function(){return Vr})),n.d(e,"Sqrt",(function(){return qr})),n.d(e,"Sum",(function(){return jr})),n.d(e,"SpaceToBatchND",(function(){return Kr})),n.d(e,"SplitV",(function(){return Wr})),n.d(e,"Softmax",(function(){return Gr})),n.d(e,"SquaredDifference",(function(){return Xr})),n.d(e,"Square",(function(){return Yr})),n.d(e,"Sub",(function(){return Jr})),n.d(e,"SparseToDense",(function(){return Zr})),n.d(e,"StridedSlice",(function(){return ti})),n.d(e,"Tan",(function(){return ei})),n.d(e,"Tanh",(function(){return ni})),n.d(e,"Tile",(function(){return ri})),n.d(e,"TopK",(function(){return ii})),n.d(e,"Transpose",(function(){return si})),n.d(e,"Unpack",(function(){return oi})),n.d(e,"UnsortedSegmentSum",(function(){return ai})),n.d(e,"ZerosLike",(function(){return li})),n.d(e,"Step",(function(){return ui})),n.d(e,"FromPixels",(function(){return ci})),n.d(e,"RotateWithOffset",(function(){return hi})),n.d(e,"_FusedMatMul",(function(){return di})),n.d(e,"FusedConv2D",(function(){return pi})),n.d(e,"FusedDepthwiseConv2D",(function(){return fi})),n.d(e,"CallbackList",(function(){return fg})),n.d(e,"CustomCallback",(function(){return gg})),n.d(e,"History",(function(){return mg})),n.d(e,"Callback",(function(){return nx})),n.d(e,"callbacks",(function(){return ox})),n.d(e,"EarlyStopping",(function(){return sx})),n.d(e,"InputSpec",(function(){return ng})),n.d(e,"SymbolicTensor",(function(){return rg})),n.d(e,"LayersModel",(function(){return by})),n.d(e,"input",(function(){return Ey})),n.d(e,"loadLayersModel",(function(){return Sy})),n.d(e,"model",(function(){return _y})),n.d(e,"registerCallbackConstructor",(function(){return By})),n.d(e,"sequential",(function(){return Cy})),n.d(e,"RNN",(function(){return hb})),n.d(e,"Sequential",(function(){return xy})),n.d(e,"LayerVariable",(function(){return Zm})),n.d(e,"version_layers",(function(){return Gg})),n.d(e,"constraints",(function(){return w})),n.d(e,"initializers",(function(){return b})),n.d(e,"layers",(function(){return v})),n.d(e,"metrics",(function(){return x})),n.d(e,"models",(function(){return _})),n.d(e,"regularizers",(function(){return C})),n.d(e,"GraphModel",(function(){return a_})),n.d(e,"loadGraphModel",(function(){return l_})),n.d(e,"deregisterOp",(function(){return dx})),n.d(e,"registerOp",(function(){return cx})),n.d(e,"version_converter",(function(){return u_})),n.d(e,"data",(function(){return Q})),n.d(e,"version",(function(){return ck}));var r={};n.r(r),n.d(r,"shuffle",(function(){return st})),n.d(r,"clamp",(function(){return ot})),n.d(r,"nearestLargerEven",(function(){return at})),n.d(r,"sum",(function(){return lt})),n.d(r,"randUniform",(function(){return ut})),n.d(r,"distSquared",(function(){return ct})),n.d(r,"assert",(function(){return ht})),n.d(r,"assertShapesMatch",(function(){return dt})),n.d(r,"assertNonNull",(function(){return pt})),n.d(r,"flatten",(function(){return ft})),n.d(r,"sizeFromShape",(function(){return At})),n.d(r,"isScalarShape",(function(){return mt})),n.d(r,"arraysEqual",(function(){return gt})),n.d(r,"isInt",(function(){return yt})),n.d(r,"tanh",(function(){return wt})),n.d(r,"sizeToSquarishShape",(function(){return bt})),n.d(r,"createShuffledIndices",(function(){return vt})),n.d(r,"rightPad",(function(){return xt})),n.d(r,"repeatedTry",(function(){return _t})),n.d(r,"inferFromImplicitShape",(function(){return Ct})),n.d(r,"parseAxisParam",(function(){return St})),n.d(r,"squeezeShape",(function(){return Et})),n.d(r,"getTypedArrayFromDType",(function(){return Bt})),n.d(r,"getArrayFromDType",(function(){return kt})),n.d(r,"checkConversionForErrors",(function(){return Nt})),n.d(r,"isValidDtype",(function(){return It})),n.d(r,"hasEncodingLoss",(function(){return Ft})),n.d(r,"isTypedArray",(function(){return Tt})),n.d(r,"bytesPerElement",(function(){return Rt})),n.d(r,"bytesFromStringArray",(function(){return Ot})),n.d(r,"isString",(function(){return Dt})),n.d(r,"isBoolean",(function(){return Lt})),n.d(r,"isNumber",(function(){return Mt})),n.d(r,"inferDtype",(function(){return Ut})),n.d(r,"isFunction",(function(){return Pt})),n.d(r,"nearestDivisor",(function(){return zt})),n.d(r,"computeStrides",(function(){return Qt})),n.d(r,"toTypedArray",(function(){return Ht})),n.d(r,"toNestedArray",(function(){return $t})),n.d(r,"makeOnesTypedArray",(function(){return Vt})),n.d(r,"makeZerosTypedArray",(function(){return qt})),n.d(r,"makeZerosNestedTypedArray",(function(){return jt})),n.d(r,"now",(function(){return Kt})),n.d(r,"assertNonNegativeIntegerDimensions",(function(){return Wt})),n.d(r,"fetch",(function(){return Gt})),n.d(r,"encodeString",(function(){return Xt})),n.d(r,"decodeString",(function(){return Yt})),n.d(r,"locToIndex",(function(){return Jt})),n.d(r,"indexToLoc",(function(){return Zt}));var i={};n.r(i),n.d(i,"makeTypesMatch",(function(){return we})),n.d(i,"assertTypesMatch",(function(){return be})),n.d(i,"isTensorInList",(function(){return ve})),n.d(i,"getTensorsInContainer",(function(){return xe}));var s={};n.r(s),n.d(s,"isMobile",(function(){return Ee})),n.d(s,"isBrowser",(function(){return Be}));var o={};n.r(o),n.d(o,"assertParamsValid",(function(){return va})),n.d(o,"maskToAxes",(function(){return xa})),n.d(o,"computeOutShape",(function(){return _a})),n.d(o,"stridesWithElidedDims",(function(){return Ca})),n.d(o,"startIndicesWithElidedDims",(function(){return Ba})),n.d(o,"stopIndicesWithElidedDims",(function(){return ka})),n.d(o,"stridesForAxis",(function(){return Na})),n.d(o,"startForAxis",(function(){return Ia})),n.d(o,"stopForAxis",(function(){return Fa})),n.d(o,"isSliceContinous",(function(){return Ta})),n.d(o,"computeFlatOffset",(function(){return Ra})),n.d(o,"parseSliceParams",(function(){return Oa}));var a={};n.r(a),n.d(a,"segOpComputeOptimalWindowSize",(function(){return ul})),n.d(a,"computeOutShape",(function(){return cl})),n.d(a,"collectGatherOpShapeInfo",(function(){return hl}));var l={};n.r(l),n.d(l,"copyModel",(function(){return Ll})),n.d(l,"listModels",(function(){return Ol})),n.d(l,"moveModel",(function(){return Ml})),n.d(l,"removeModel",(function(){return Dl})),n.d(l,"browserFiles",(function(){return ru})),n.d(l,"browserHTTPRequest",(function(){return du})),n.d(l,"concatenateArrayBuffers",(function(){return xl})),n.d(l,"decodeWeights",(function(){return yl})),n.d(l,"encodeWeights",(function(){return gl})),n.d(l,"fromMemory",(function(){return Au})),n.d(l,"getLoadHandlers",(function(){return Il})),n.d(l,"getModelArtifactsInfoForJSON",(function(){return Cl})),n.d(l,"getSaveHandlers",(function(){return Nl})),n.d(l,"http",(function(){return hu})),n.d(l,"isHTTPScheme",(function(){return uu})),n.d(l,"loadWeights",(function(){return ou})),n.d(l,"registerLoadRouter",(function(){return kl})),n.d(l,"registerSaveRouter",(function(){return Bl})),n.d(l,"weightsLoaderFactory",(function(){return au})),n.d(l,"withSaveHandler",(function(){return mu}));var u={};n.r(u),n.d(u,"confusionMatrix",(function(){return yu}));var c={};n.r(c),n.d(c,"toPixels",(function(){return vu})),n.d(c,"fromPixels",(function(){return xu}));var h={};n.r(h),n.d(h,"prepareAndValidate",(function(){return _u}));var d={};n.r(d),n.d(d,"validateUpdateShape",(function(){return Cu})),n.d(d,"validateInput",(function(){return Su})),n.d(d,"calculateShapes",(function(){return Eu}));var p={};n.r(p),n.d(p,"Serializable",(function(){return Bu})),n.d(p,"SerializationMap",(function(){return ku})),n.d(p,"registerClass",(function(){return Nu}));var f={};n.r(f),n.d(f,"TEST_EPSILON_FLOAT16",(function(){return Iu})),n.d(f,"expectArraysClose",(function(){return Fu})),n.d(f,"testEpsilon",(function(){return Tu})),n.d(f,"expectPromiseToFail",(function(){return Ou})),n.d(f,"expectArraysEqual",(function(){return Du})),n.d(f,"expectNumbersClose",(function(){return Lu})),n.d(f,"expectValuesInRange",(function(){return Uu})),n.d(f,"expectArrayBuffersEqual",(function(){return Pu}));var A={};n.r(A),n.d(A,"conv2d",(function(){return up})),n.d(A,"depthwiseConv2d",(function(){return cp})),n.d(A,"matMul",(function(){return hp}));var m={};n.r(m),n.d(m,"abs",(function(){return lc})),n.d(m,"acos",(function(){return uc})),n.d(m,"acosh",(function(){return cc})),n.d(m,"add",(function(){return $i})),n.d(m,"addN",(function(){return hc})),n.d(m,"all",(function(){return dc})),n.d(m,"any",(function(){return pc})),n.d(m,"argMax",(function(){return fc})),n.d(m,"argMin",(function(){return Ac})),n.d(m,"asin",(function(){return mc})),n.d(m,"asinh",(function(){return gc})),n.d(m,"atan",(function(){return yc})),n.d(m,"atan2",(function(){return wc})),n.d(m,"atanh",(function(){return bc})),n.d(m,"avgPool",(function(){return vc})),n.d(m,"avgPool3d",(function(){return xc})),n.d(m,"basicLSTMCell",(function(){return Cc})),n.d(m,"batchToSpaceND",(function(){return Pa})),n.d(m,"batchNorm",(function(){return Ec})),n.d(m,"batchNorm2d",(function(){return Bc})),n.d(m,"batchNorm3d",(function(){return kc})),n.d(m,"batchNorm4d",(function(){return Nc})),n.d(m,"broadcastTo",(function(){return Ic})),n.d(m,"buffer",(function(){return Fc})),n.d(m,"cast",(function(){return bi})),n.d(m,"ceil",(function(){return Tc})),n.d(m,"clipByValue",(function(){return Rc})),n.d(m,"clone",(function(){return ia})),n.d(m,"complex",(function(){return $o})),n.d(m,"concat",(function(){return Va})),n.d(m,"concat1d",(function(){return Oc})),n.d(m,"concat2d",(function(){return Dc})),n.d(m,"concat3d",(function(){return Lc})),n.d(m,"concat4d",(function(){return Mc})),n.d(m,"conv1d",(function(){return Uc})),n.d(m,"conv2d",(function(){return Ps})),n.d(m,"conv2dTranspose",(function(){return Pc})),n.d(m,"conv3d",(function(){return zc})),n.d(m,"conv3dTranspose",(function(){return Qc})),n.d(m,"cos",(function(){return ma})),n.d(m,"cosh",(function(){return ya})),n.d(m,"cumsum",(function(){return Gs})),n.d(m,"depthToSpace",(function(){return Hc})),n.d(m,"depthwiseConv2d",(function(){return $c})),n.d(m,"diag",(function(){return Vc})),n.d(m,"dilation2d",(function(){return qc})),n.d(m,"div",(function(){return Si})),n.d(m,"divNoNan",(function(){return jc})),n.d(m,"dot",(function(){return Kc})),n.d(m,"elu",(function(){return Wc})),n.d(m,"equal",(function(){return Bo})),n.d(m,"erf",(function(){return Gc})),n.d(m,"exp",(function(){return ro})),n.d(m,"expandDims",(function(){return il})),n.d(m,"expm1",(function(){return Xc})),n.d(m,"eye",(function(){return Yc})),n.d(m,"fft",(function(){return Jc})),n.d(m,"fill",(function(){return Zc})),n.d(m,"floor",(function(){return Po})),n.d(m,"floorDiv",(function(){return Ci})),n.d(m,"gather",(function(){return dl})),n.d(m,"greater",(function(){return Mo})),n.d(m,"greaterEqual",(function(){return ks})),n.d(m,"ifft",(function(){return th})),n.d(m,"imag",(function(){return eh})),n.d(m,"irfft",(function(){return rh})),n.d(m,"isFinite",(function(){return ih})),n.d(m,"isInf",(function(){return sh})),n.d(m,"isNaN",(function(){return oh})),n.d(m,"leakyRelu",(function(){return ah})),n.d(m,"less",(function(){return Io})),n.d(m,"lessEqual",(function(){return Ns})),n.d(m,"linspace",(function(){return lh})),n.d(m,"localResponseNormalization",(function(){return uh})),n.d(m,"log",(function(){return Wo})),n.d(m,"log1p",(function(){return ch})),n.d(m,"logSigmoid",(function(){return yh})),n.d(m,"logSoftmax",(function(){return bh})),n.d(m,"logSumExp",(function(){return vh})),n.d(m,"logicalAnd",(function(){return Is})),n.d(m,"logicalNot",(function(){return ua})),n.d(m,"logicalOr",(function(){return xh})),n.d(m,"logicalXor",(function(){return _h})),n.d(m,"matMul",(function(){return vs})),n.d(m,"max",(function(){return wh})),n.d(m,"maxPool",(function(){return Ch})),n.d(m,"maxPool3d",(function(){return Sh})),n.d(m,"maxPoolWithArgmax",(function(){return Eh})),n.d(m,"maximum",(function(){return pl})),n.d(m,"mean",(function(){return Bh})),n.d(m,"min",(function(){return kh})),n.d(m,"minimum",(function(){return Nh})),n.d(m,"mod",(function(){return Ih})),n.d(m,"moments",(function(){return Fh})),n.d(m,"mul",(function(){return vi})),n.d(m,"multiRNNCell",(function(){return Th})),n.d(m,"multinomial",(function(){return Rh})),n.d(m,"neg",(function(){return Ei})),n.d(m,"notEqual",(function(){return Oh})),n.d(m,"oneHot",(function(){return gu})),n.d(m,"ones",(function(){return Ya})),n.d(m,"onesLike",(function(){return Dh})),n.d(m,"outerProduct",(function(){return Lh})),n.d(m,"pad",(function(){return ba})),n.d(m,"pad1d",(function(){return Mh})),n.d(m,"pad2d",(function(){return Uh})),n.d(m,"pad3d",(function(){return Ph})),n.d(m,"pad4d",(function(){return zh})),n.d(m,"pool",(function(){return Qh})),n.d(m,"pow",(function(){return Go})),n.d(m,"prelu",(function(){return Hh})),n.d(m,"print",(function(){return $h})),n.d(m,"prod",(function(){return Vh})),n.d(m,"rand",(function(){return qh})),n.d(m,"randomGamma",(function(){return Xh})),n.d(m,"randomNormal",(function(){return Yh})),n.d(m,"randomUniform",(function(){return Jh})),n.d(m,"range",(function(){return td})),n.d(m,"real",(function(){return nh})),n.d(m,"reciprocal",(function(){return ed})),n.d(m,"relu",(function(){return nd})),n.d(m,"relu6",(function(){return rd})),n.d(m,"reshape",(function(){return qi})),n.d(m,"reverse",(function(){return sa})),n.d(m,"reverse1d",(function(){return id})),n.d(m,"reverse2d",(function(){return sd})),n.d(m,"reverse3d",(function(){return od})),n.d(m,"reverse4d",(function(){return ad})),n.d(m,"rfft",(function(){return ld})),n.d(m,"round",(function(){return ud})),n.d(m,"rsqrt",(function(){return uo})),n.d(m,"scalar",(function(){return ki})),n.d(m,"selu",(function(){return cd})),n.d(m,"separableConv2d",(function(){return hd})),n.d(m,"setdiff1dAsync",(function(){return dd})),n.d(m,"sigmoid",(function(){return Ma})),n.d(m,"sign",(function(){return pd})),n.d(m,"sin",(function(){return Vs})),n.d(m,"sinh",(function(){return js})),n.d(m,"slice",(function(){return el})),n.d(m,"slice1d",(function(){return fd})),n.d(m,"slice2d",(function(){return Ad})),n.d(m,"slice3d",(function(){return md})),n.d(m,"slice4d",(function(){return gd})),n.d(m,"softmax",(function(){return yd})),n.d(m,"softplus",(function(){return wd})),n.d(m,"spaceToBatchND",(function(){return _s})),n.d(m,"split",(function(){return Os})),n.d(m,"sqrt",(function(){return Ni})),n.d(m,"square",(function(){return Ii})),n.d(m,"squaredDifference",(function(){return bd})),n.d(m,"squeeze",(function(){return vd})),n.d(m,"stack",(function(){return sl})),n.d(m,"step",(function(){return xi})),n.d(m,"stridedSlice",(function(){return xd})),n.d(m,"sub",(function(){return Fi})),n.d(m,"sum",(function(){return ts})),n.d(m,"tan",(function(){return _d})),n.d(m,"tanh",(function(){return _c})),n.d(m,"tensor",(function(){return $a})),n.d(m,"tensor1d",(function(){return Zh})),n.d(m,"tensor2d",(function(){return Cd})),n.d(m,"tensor3d",(function(){return wu})),n.d(m,"tensor4d",(function(){return Sd})),n.d(m,"tensor5d",(function(){return Ed})),n.d(m,"tensor6d",(function(){return Bd})),n.d(m,"tile",(function(){return co})),n.d(m,"topk",(function(){return kd})),n.d(m,"truncatedNormal",(function(){return Nd})),n.d(m,"unsortedSegmentSum",(function(){return po})),n.d(m,"unstack",(function(){return Id})),n.d(m,"variable",(function(){return Fd})),n.d(m,"where",(function(){return Fs})),n.d(m,"whereAsync",(function(){return Rd})),n.d(m,"zeros",(function(){return Vo})),n.d(m,"zerosLike",(function(){return Pi})),n.d(m,"booleanMaskAsync",(function(){return Od})),n.d(m,"equalStrict",(function(){return Dd})),n.d(m,"greaterEqualStrict",(function(){return Ld})),n.d(m,"greaterStrict",(function(){return Md})),n.d(m,"lessEqualStrict",(function(){return Ud})),n.d(m,"lessStrict",(function(){return Pd})),n.d(m,"notEqualStrict",(function(){return zd})),n.d(m,"addStrict",(function(){return Qd})),n.d(m,"divStrict",(function(){return Hd})),n.d(m,"maximumStrict",(function(){return $d})),n.d(m,"minimumStrict",(function(){return Vd})),n.d(m,"modStrict",(function(){return qd})),n.d(m,"mulStrict",(function(){return jd})),n.d(m,"powStrict",(function(){return Kd})),n.d(m,"squaredDifferenceStrict",(function(){return Wd})),n.d(m,"subStrict",(function(){return Gd})),n.d(m,"transpose",(function(){return Ws})),n.d(m,"norm",(function(){return Xd})),n.d(m,"movingAverage",(function(){return Yd})),n.d(m,"scatterND",(function(){return Jd})),n.d(m,"sparseToDense",(function(){return Zd})),n.d(m,"gatherND",(function(){return tp})),n.d(m,"dropout",(function(){return ep})),n.d(m,"enclosingPowerOfTwo",(function(){return np})),n.d(m,"cosineWindow",(function(){return rp})),n.d(m,"inTopKAsync",(function(){return ip})),n.d(m,"op",(function(){return wi})),n.d(m,"image",(function(){return Gp})),n.d(m,"linalg",(function(){return Xp})),n.d(m,"losses",(function(){return Yp})),n.d(m,"spectral",(function(){return Kp})),n.d(m,"fused",(function(){return A})),n.d(m,"signal",(function(){return Wp}));var g={};n.r(g),n.d(g,"axesAreInnerMostDims",(function(){return ji})),n.d(g,"combineLocations",(function(){return Ki})),n.d(g,"computeOutAndReduceShapes",(function(){return Wi})),n.d(g,"expandShapeToKeepDim",(function(){return Gi})),n.d(g,"assertAxesAreInnerMostDims",(function(){return Xi})),n.d(g,"getAxesPermutation",(function(){return Yi})),n.d(g,"getUndoAxesPermutation",(function(){return Ji})),n.d(g,"getInnerMostAxes",(function(){return Zi})),n.d(g,"getBroadcastDims",(function(){return Oi})),n.d(g,"getReductionAxes",(function(){return Di})),n.d(g,"assertAndGetBroadcastShape",(function(){return Li})),n.d(g,"assertParamsConsistent",(function(){return Qa})),n.d(g,"computeOutShape",(function(){return Ha})),n.d(g,"computeDilation2DInfo",(function(){return is})),n.d(g,"computePool2DInfo",(function(){return ss})),n.d(g,"computePool3DInfo",(function(){return os})),n.d(g,"computeConv2DInfo",(function(){return as})),n.d(g,"computeConv3DInfo",(function(){return ls})),n.d(g,"computeDefaultPad",(function(){return us})),n.d(g,"tupleValuesAreOne",(function(){return fs})),n.d(g,"eitherStridesOrDilationsAreOne",(function(){return As})),n.d(g,"convertConv2DDataFormat",(function(){return ms})),n.d(g,"getFusedDyActivation",(function(){return sp})),n.d(g,"getFusedBiasGradient",(function(){return op})),n.d(g,"applyActivation",(function(){return ap})),n.d(g,"shouldFuse",(function(){return lp})),n.d(g,"PARALLELIZE_THRESHOLD",(function(){return al})),n.d(g,"computeOptimalWindowSize",(function(){return ll})),n.d(g,"upcastType",(function(){return ge})),n.d(g,"getImageCenter",(function(){return hf})),n.d(g,"getReshaped",(function(){return df})),n.d(g,"getPermuted",(function(){return pf})),n.d(g,"getReshapedPermuted",(function(){return ff})),n.d(g,"getSliceBeginCoords",(function(){return Af})),n.d(g,"getSliceSize",(function(){return mf})),n.d(g,"prepareAndValidate",(function(){return _u})),n.d(g,"validateUpdateShape",(function(){return Cu})),n.d(g,"validateInput",(function(){return Su})),n.d(g,"calculateShapes",(function(){return Eu})),n.d(g,"SELU_SCALEALPHA",(function(){return ha})),n.d(g,"SELU_SCALE",(function(){return da})),n.d(g,"ERF_P",(function(){return gf})),n.d(g,"ERF_A1",(function(){return yf})),n.d(g,"ERF_A2",(function(){return wf})),n.d(g,"ERF_A3",(function(){return bf})),n.d(g,"ERF_A4",(function(){return vf})),n.d(g,"ERF_A5",(function(){return xf})),n.d(g,"warn",(function(){return _f})),n.d(g,"log",(function(){return Cf})),n.d(g,"mergeRealAndImagArrays",(function(){return Sf})),n.d(g,"splitRealAndImagArrays",(function(){return Ef})),n.d(g,"complexWithEvenIndex",(function(){return Bf})),n.d(g,"complexWithOddIndex",(function(){return kf})),n.d(g,"getComplexWithIndex",(function(){return Nf})),n.d(g,"assignToTypedArray",(function(){return If})),n.d(g,"exponents",(function(){return Ff})),n.d(g,"exponent",(function(){return Tf})),n.d(g,"prepareSplitSize",(function(){return Rs})),n.d(g,"segment_util",(function(){return a})),n.d(g,"castTensor",(function(){return Rf})),n.d(g,"reshapeTensor",(function(){return Of})),n.d(g,"linspaceImpl",(function(){return Df}));var y={};n.r(y),n.d(y,"nonMaxSuppressionV3Impl",(function(){return xp})),n.d(y,"nonMaxSuppressionV4Impl",(function(){return _p})),n.d(y,"nonMaxSuppressionV5Impl",(function(){return Cp})),n.d(y,"split",(function(){return Lf})),n.d(y,"tile",(function(){return Mf})),n.d(y,"topkImpl",(function(){return Uf})),n.d(y,"whereImpl",(function(){return Td}));var w={};n.r(w),n.d(w,"maxNorm",(function(){return xA})),n.d(w,"unitNorm",(function(){return _A})),n.d(w,"nonNeg",(function(){return CA})),n.d(w,"minMaxNorm",(function(){return SA}));var b={};n.r(b),n.d(b,"zeros",(function(){return Nm})),n.d(b,"ones",(function(){return Im})),n.d(b,"constant",(function(){return Fm})),n.d(b,"randomUniform",(function(){return Tm})),n.d(b,"randomNormal",(function(){return Rm})),n.d(b,"truncatedNormal",(function(){return Om})),n.d(b,"identity",(function(){return Dm})),n.d(b,"varianceScaling",(function(){return Lm})),n.d(b,"glorotUniform",(function(){return Mm})),n.d(b,"glorotNormal",(function(){return Um})),n.d(b,"heNormal",(function(){return Pm})),n.d(b,"heUniform",(function(){return zm})),n.d(b,"leCunNormal",(function(){return Qm})),n.d(b,"leCunUniform",(function(){return Hm})),n.d(b,"orthogonal",(function(){return $m}));var v={};n.r(v),n.d(v,"inputLayer",(function(){return Cb})),n.d(v,"elu",(function(){return Sb})),n.d(v,"reLU",(function(){return Eb})),n.d(v,"leakyReLU",(function(){return Bb})),n.d(v,"prelu",(function(){return kb})),n.d(v,"softmax",(function(){return Nb})),n.d(v,"thresholdedReLU",(function(){return Ib})),n.d(v,"conv1d",(function(){return Fb})),n.d(v,"conv2d",(function(){return Tb})),n.d(v,"conv2dTranspose",(function(){return Rb})),n.d(v,"conv3d",(function(){return Ob})),n.d(v,"separableConv2d",(function(){return Db})),n.d(v,"cropping2D",(function(){return Lb})),n.d(v,"upSampling2d",(function(){return Mb})),n.d(v,"depthwiseConv2d",(function(){return Ub})),n.d(v,"activation",(function(){return Pb})),n.d(v,"dense",(function(){return zb})),n.d(v,"dropout",(function(){return Qb})),n.d(v,"spatialDropout1d",(function(){return Hb})),n.d(v,"flatten",(function(){return $b})),n.d(v,"repeatVector",(function(){return Vb})),n.d(v,"reshape",(function(){return qb})),n.d(v,"permute",(function(){return jb})),n.d(v,"embedding",(function(){return Kb})),n.d(v,"add",(function(){return Wb})),n.d(v,"average",(function(){return Gb})),n.d(v,"concatenate",(function(){return Xb})),n.d(v,"maximum",(function(){return Yb})),n.d(v,"minimum",(function(){return Jb})),n.d(v,"multiply",(function(){return Zb})),n.d(v,"dot",(function(){return tv})),n.d(v,"batchNormalization",(function(){return ev})),n.d(v,"layerNormalization",(function(){return nv})),n.d(v,"zeroPadding2d",(function(){return rv})),n.d(v,"averagePooling1d",(function(){return iv})),n.d(v,"avgPool1d",(function(){return sv})),n.d(v,"avgPooling1d",(function(){return ov})),n.d(v,"averagePooling2d",(function(){return av})),n.d(v,"avgPool2d",(function(){return lv})),n.d(v,"avgPooling2d",(function(){return uv})),n.d(v,"averagePooling3d",(function(){return cv})),n.d(v,"avgPool3d",(function(){return hv})),n.d(v,"avgPooling3d",(function(){return dv})),n.d(v,"globalAveragePooling1d",(function(){return pv})),n.d(v,"globalAveragePooling2d",(function(){return fv})),n.d(v,"globalMaxPooling1d",(function(){return Av})),n.d(v,"globalMaxPooling2d",(function(){return mv})),n.d(v,"maxPooling1d",(function(){return gv})),n.d(v,"maxPooling2d",(function(){return yv})),n.d(v,"maxPooling3d",(function(){return wv})),n.d(v,"gru",(function(){return bv})),n.d(v,"gruCell",(function(){return vv})),n.d(v,"lstm",(function(){return xv})),n.d(v,"lstmCell",(function(){return _v})),n.d(v,"simpleRNN",(function(){return Cv})),n.d(v,"simpleRNNCell",(function(){return Sv})),n.d(v,"rnn",(function(){return Ev})),n.d(v,"stackedRNNCells",(function(){return Bv})),n.d(v,"bidirectional",(function(){return kv})),n.d(v,"timeDistributed",(function(){return Nv})),n.d(v,"globalMaxPool1d",(function(){return Iv})),n.d(v,"globalMaxPool2d",(function(){return Fv})),n.d(v,"maxPool1d",(function(){return Tv})),n.d(v,"maxPool2d",(function(){return Rv})),n.d(v,"Layer",(function(){return ag})),n.d(v,"RNN",(function(){return hb})),n.d(v,"RNNCell",(function(){return db})),n.d(v,"input",(function(){return Ey})),n.d(v,"gaussianNoise",(function(){return Ov})),n.d(v,"gaussianDropout",(function(){return Dv})),n.d(v,"alphaDropout",(function(){return Lv})),n.d(v,"masking",(function(){return Mv}));var x={};n.r(x),n.d(x,"binaryAccuracy",(function(){return Uv})),n.d(x,"binaryCrossentropy",(function(){return Pv})),n.d(x,"sparseCategoricalAccuracy",(function(){return zv})),n.d(x,"categoricalAccuracy",(function(){return Qv})),n.d(x,"categoricalCrossentropy",(function(){return Hv})),n.d(x,"precision",(function(){return $v})),n.d(x,"recall",(function(){return Vv})),n.d(x,"cosineProximity",(function(){return qv})),n.d(x,"meanAbsoluteError",(function(){return jv})),n.d(x,"meanAbsolutePercentageError",(function(){return Kv})),n.d(x,"MAPE",(function(){return Wv})),n.d(x,"mape",(function(){return Gv})),n.d(x,"meanSquaredError",(function(){return Xv})),n.d(x,"MSE",(function(){return Yv})),n.d(x,"mse",(function(){return Jv}));var _={};n.r(_),n.d(_,"modelFromJSON",(function(){return vy}));var C={};n.r(C),n.d(C,"l1l2",(function(){return Zv})),n.d(C,"l1",(function(){return tx})),n.d(C,"l2",(function(){return ex}));var S={};n.r(S),n.d(S,"json",(function(){return wx}));var E={};n.r(E),n.d(E,"json",(function(){return bx}));var B={};n.r(B),n.d(B,"json",(function(){return vx}));var k={};n.r(k),n.d(k,"json",(function(){return xx}));var N={};n.r(N),n.d(N,"json",(function(){return _x}));var I={};n.r(I),n.d(I,"json",(function(){return Cx}));var F={};n.r(F),n.d(F,"json",(function(){return Sx}));var T={};n.r(T),n.d(T,"json",(function(){return Ex}));var R={};n.r(R),n.d(R,"json",(function(){return Bx}));var O={};n.r(O),n.d(O,"json",(function(){return kx}));var D={};n.r(D),n.d(D,"json",(function(){return Nx}));var L={};n.r(L),n.d(L,"json",(function(){return Ix}));var M={};n.r(M),n.d(M,"json",(function(){return Fx}));var U={};n.r(U),n.d(U,"json",(function(){return Tx}));var P={};n.r(P),n.d(P,"json",(function(){return Rx}));var z={};n.r(z),n.d(z,"json",(function(){return Ox}));var Q={};n.r(Q),n.d(Q,"array",(function(){return P_})),n.d(Q,"Dataset",(function(){return M_})),n.d(Q,"zip",(function(){return z_})),n.d(Q,"CSVDataset",(function(){return W_})),n.d(Q,"TextLineDataset",(function(){return H_})),n.d(Q,"csv",(function(){return lC})),n.d(Q,"func",(function(){return uC})),n.d(Q,"generator",(function(){return cC})),n.d(Q,"microphone",(function(){return dC})),n.d(Q,"webcam",(function(){return hC})),n.d(Q,"FileDataSource",(function(){return oC})),n.d(Q,"URLDataSource",(function(){return aC})),n.d(Q,"version_data",(function(){return pC}));var H={};n.r(H),n.d(H,"maxImpl",(function(){return fC})),n.d(H,"transposeImpl",(function(){return AC}));class ${constructor(t){this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}setPlatform(t,e){null!=this.platform&&console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`),this.platformName=t,this.platform=e}registerFlag(t,e,n){if(this.flagRegistry[t]={evaluationFn:e,setHook:n},null!=this.urlFlags[t]){const e=this.urlFlags[t];console.warn(`Setting feature override from URL ${t}: ${e}.`),this.set(t,e)}}async getAsync(t){return t in this.flags||(this.flags[t]=await this.evaluateFlag(t)),this.flags[t]}get(t){if(t in this.flags)return this.flags[t];const e=this.evaluateFlag(t);if(e instanceof Promise)throw new Error(`Flag ${t} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[t]=e,this.flags[t]}getNumber(t){return this.get(t)}getBool(t){return this.get(t)}getFlags(){return this.flags}get features(){return this.flags}set(t,e){if(null==this.flagRegistry[t])throw new Error(`Cannot set flag ${t} as it has not been registered.`);this.flags[t]=e,null!=this.flagRegistry[t].setHook&&this.flagRegistry[t].setHook(e)}evaluateFlag(t){if(null==this.flagRegistry[t])throw new Error(`Cannot evaluate flag '${t}': no evaluation function found.`);return this.flagRegistry[t].evaluationFn()}setFlags(t){this.flags=Object.assign({},t)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(void 0===this.global||void 0===this.global.location||void 0===this.global.location.search)return;const t=function(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(t,...n)=>(function(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}(e,n[0],n[1]),n.join("="))),e}(this.global.location.search);"tfjsflags"in t&&t.tfjsflags.split(",").forEach(t=>{const[e,n]=t.split(":");this.urlFlags[e]=function(t,e){if("true"===(e=e.toLowerCase())||"false"===e)return"true"===e;if(""+ +e===e)return+e;throw new Error(`Could not parse value flag value ${e} for flag ${t}.`)}(e,n)})}}function V(){return j}let q,j=null;function K(){if(null==q){let t;if("undefined"!=typeof window)t=window;else if("undefined"!=typeof global)t=global;else if("undefined"!=typeof process)t=process;else{if("undefined"==typeof self)throw new Error("Could not find a global object");t=self}q=t}return q}function W(t,e){const n=function(){const t=K();return null==t._tfGlobals&&(t._tfGlobals=new Map),t._tfGlobals}();if(n.has(t))return n.get(t);{const r=e();return n.set(t,r),n.get(t)}}const G=W("kernelRegistry",()=>new Map),X=W("gradRegistry",()=>new Map);function Y(t,e){const n=it(t,e);return G.get(n)}function J(t){return X.get(t)}function Z(t){const e=G.entries(),n=[];for(;;){const{done:r,value:i}=e.next();if(r)break;const[s,o]=i,[a]=s.split("_");a===t&&n.push(o)}return n}function tt(t){const{kernelName:e,backendName:n}=t,r=it(e,n);G.has(r)&&console.warn(`The kernel '${e}' for backend '${n}' is already registered`),G.set(r,t)}function et(t){const{kernelName:e}=t;X.has(e)&&V().getBool("DEBUG")&&console.warn(`Overriding the gradient for '${e}'`),X.set(e,t)}function nt(t,e){const n=it(t,e);if(!G.has(n))throw new Error(`The kernel '${t}' for backend '${e}' is not registered`);G.delete(n)}function rt(t){if(!X.has(t))throw new Error(`The gradient '${t}' for backend is not registered`);X.delete(t)}function it(t,e){return`${e}_${t}`}function st(t){let e=t.length,n=0,r=0;for(;e>0;)r=Math.random()*e|0,e--,n=t[e],t[e]=t[r],t[r]=n}function ot(t,e,n){return Math.max(t,Math.min(e,n))}function at(t){return t%2==0?t:t+1}function lt(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}function ut(t,e){const n=Math.random();return e*n+(1-n)*t}function ct(t,e){let n=0;for(let r=0;r<t.length;r++){const i=Number(t[r])-Number(e[r]);n+=i*i}return n}function ht(t,e){if(!t)throw new Error("string"==typeof e?e:e())}function dt(t,e,n=""){ht(gt(t,e),()=>n+` Shapes ${t} and ${e} must match`)}function pt(t){ht(null!=t,()=>"The input to the tensor constructor must be a non-null value.")}function ft(t,e=[],n=!1){if(null==e&&(e=[]),Array.isArray(t)||Tt(t)&&!n)for(let r=0;r<t.length;++r)ft(t[r],e,n);else e.push(t);return e}function At(t){if(0===t.length)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function mt(t){return 0===t.length}function gt(t,e){if(t===e)return!0;if(null==t||null==e)return!1;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function yt(t){return t%1==0}function wt(t){if(null!=Math.tanh)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;{const e=Math.exp(2*t);return(e-1)/(e+1)}}function bt(t){const e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function vt(t){const e=new Uint32Array(t);for(let n=0;n<t;++n)e[n]=n;return st(e),e}function xt(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function _t(t,e=(t=>0),n){return new Promise((r,i)=>{let s=0;const o=()=>{if(t())return void r();s++;const a=e(s);null!=n&&s>=n?i():setTimeout(o,a)};o()})}function Ct(t,e){let n=1,r=-1;for(let s=0;s<t.length;++s)if(t[s]>=0)n*=t[s];else if(-1===t[s]){if(-1!==r)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${s}`);r=s}else if(t[s]<0)throw Error(`Shapes can not be < 0. Found ${t[s]} at dim ${s}`);if(-1===r){if(e>0&&e!==n)throw Error(`Size(${e}) must match the product of shape ${t}`);return t}if(0===n)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(e%n!=0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${n}`);const i=t.slice();return i[r]=e/n,i}function St(t,e){const n=e.length;return ht((t=null==t?e.map((t,e)=>e):[].concat(t)).every(t=>t>=-n&&t<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis `+t),ht(t.every(t=>yt(t)),()=>"All values in axis param must be integers but got axis "+t),t.map(t=>t<0?n+t:t)}function Et(t,e){const n=[],r=[],i=null!=e&&Array.isArray(e)&&0===e.length,s=null==e||i?null:St(e,t).sort();let o=0;for(let a=0;a<t.length;++a){if(null!=s){if(s[o]===a&&1!==t[a])throw new Error(`Can't squeeze axis ${a} since its dim '${t[a]}' is not 1`);(null==s[o]||s[o]>a)&&1===t[a]&&(n.push(t[a]),r.push(a)),s[o]<=a&&o++}1!==t[a]&&(n.push(t[a]),r.push(a))}return{newShape:n,keptDims:r}}function Bt(t,e){let n=null;if(null==t||"float32"===t)n=new Float32Array(e);else if("int32"===t)n=new Int32Array(e);else{if("bool"!==t)throw new Error("Unknown data type "+t);n=new Uint8Array(e)}return n}function kt(t,e){let n=null;if(null==t||"float32"===t)n=new Float32Array(e);else if("int32"===t)n=new Int32Array(e);else if("bool"===t)n=new Uint8Array(e);else{if("string"!==t)throw new Error("Unknown data type "+t);n=new Array(e)}return n}function Nt(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${e} being uploaded contains ${r}.`)}}function It(t){return"bool"===t||"complex64"===t||"float32"===t||"int32"===t||"string"===t}function Ft(t,e){return!("complex64"===e||"float32"===e&&"complex64"!==t||"int32"===e&&"float32"!==t&&"complex64"!==t||"bool"===e&&"bool"===t)}function Tt(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array}function Rt(t){if("float32"===t||"int32"===t)return 4;if("complex64"===t)return 8;if("bool"===t)return 1;throw new Error("Unknown dtype "+t)}function Ot(t){if(null==t)return 0;let e=0;return t.forEach(t=>e+=t.length),e}function Dt(t){return"string"==typeof t||t instanceof String}function Lt(t){return"boolean"==typeof t}function Mt(t){return"number"==typeof t}function Ut(t){return Array.isArray(t)?Ut(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array?"int32":Mt(t)?"float32":Dt(t)?"string":Lt(t)?"bool":"float32"}function Pt(t){return!!(t&&t.constructor&&t.call&&t.apply)}function zt(t,e){for(let n=e;n<t;++n)if(t%n==0)return n;return t}function Qt(t){const e=t.length;if(e<2)return[];const n=new Array(e-1);n[e-2]=t[e-1];for(let r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function Ht(t,e){if("string"===e)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=ft(t)),V().getBool("DEBUG")&&Nt(t,e),function(t,e){return t instanceof Float32Array&&"float32"===e||t instanceof Int32Array&&"int32"===e||t instanceof Uint8Array&&"bool"===e}(t,e))return t;if(null==e||"float32"===e||"complex64"===e)return new Float32Array(t);if("int32"===e)return new Int32Array(t);if("bool"===e){const e=new Uint8Array(t.length);for(let n=0;n<e.length;++n)0!==Math.round(t[n])&&(e[n]=1);return e}throw new Error("Unknown data type "+e)}function $t(t,e){if(0===t.length)return e[0];const n=t.reduce((t,e)=>t*e);if(0===n)return[];if(n!==e.length)throw new Error(`[${t}] does not match the input size ${e.length}.`);return function t(e,n,r){const i=new Array;if(1===n.length){const t=n[0];for(let n=0;n<t;n++)i[n]=r[e+n]}else{const s=n[0],o=n.slice(1),a=o.reduce((t,e)=>t*e);for(let n=0;n<s;n++)i[n]=t(e+n*a,o,r)}return i}(0,t,e)}function Vt(t,e){const n=qt(t,e);for(let r=0;r<n.length;r++)n[r]=1;return n}function qt(t,e){if(null==e||"float32"===e||"complex64"===e)return new Float32Array(t);if("int32"===e)return new Int32Array(t);if("bool"===e)return new Uint8Array(t);throw new Error("Unknown data type "+e)}function jt(t,e){const n=t.reduce((t,e)=>t*e,1);if(null==e||"float32"===e)return $t(t,new Float32Array(n));if("int32"===e)return $t(t,new Int32Array(n));if("bool"===e)return $t(t,new Uint8Array(n));throw new Error("Unknown data type "+e)}function Kt(){return V().platform.now()}function Wt(t){t.forEach(e=>{ht(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function Gt(t,e){return V().platform.fetch(t,e)}function Xt(t,e="utf-8"){return e=e||"utf-8",V().platform.encode(t,e)}function Yt(t,e="utf-8"){return e=e||"utf-8",V().platform.decode(t,e)}function Jt(t,e,n){if(0===e)return 0;if(1===e)return t[0];let r=t[t.length-1];for(let i=0;i<t.length-1;++i)r+=n[i]*t[i];return r}function Zt(t,e,n){if(0===e)return[];if(1===e)return[t];const r=new Array(e);for(let i=0;i<r.length-1;++i)r[i]=Math.floor(t/n[i]),t-=r[i]*n[i];return r[r.length-1]=t,r}class te{constructor(t,e){this.backendTimer=t,this.logger=e,null==e&&(this.logger=new ee)}profileKernel(t,e,n){let r;const i=this.backendTimer.time(()=>{r=n()});return r.map(e=>{e.data().then(n=>{!function(t,e,n){if("float32"!==e)return!1;for(let r=0;r<t.length;r++){const e=t[r];if(isNaN(e)||!isFinite(e))return console.warn(`Found ${e} in the result of '${n}'`),!0}}(n,e.dtype,t)})}),{kernelName:t,outputs:r,inputs:e,timeMs:i.then(t=>t.kernelMs),extraInfo:i.then(t=>null!=t.getExtraProfileInfo?t.getExtraProfileInfo():"")}}logKernelProfile(t){const{kernelName:e,outputs:n,timeMs:r,inputs:i,extraInfo:s}=t;n.forEach(t=>{Promise.all([t.data(),r,s]).then(n=>{this.logger.logKernelProfile(e,t,n[0],n[1],i,n[2])})})}}class ee{logKernelProfile(t,e,n,r,i,s){const o="number"==typeof r?xt(r+"ms",9):r.error,a=xt(t,25),l=e.rank,u=e.size,c=xt(e.shape.toString(),14);let h="";for(const d in i){const t=i[d].shape||e.shape,n=t.length;h+=`${d}: ${n}D ${n>0?t:""} `}console.log(`%c${a}\t%c${o}\t%c${l}D ${c}\t%c${u}\t%c${h}\t%c${s}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}function ne(t,e,n){let r;return r=Array.isArray(t)?parseFloat(t[0].toFixed(7))+" + "+parseFloat(t[1].toFixed(7))+"j":Dt(t)?`'${t}'`:"bool"===n?re(t):parseFloat(t.toFixed(7)).toString(),xt(r,e)}function re(t){return 0===t?"false":"true"}function ie(t){const e=[];for(let n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}class se{constructor(t,e,n){if(this.dtype=e,this.shape=t.slice(),this.size=At(t),null!=n){const t=n.length;ht(t===this.size,()=>`Length of values '${t}' does not match the size inferred by the shape '${this.size}'.`)}if("complex64"===e)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||kt(e,this.size),this.strides=Qt(t)}set(t,...e){0===e.length&&(e=[0]),ht(e.length===this.rank,()=>`The number of provided coordinates (${e.length}) must match the rank (${this.rank})`);const n=this.locToIndex(e);this.values[n]=t}get(...t){0===t.length&&(t=[0]);let e=0;for(const r of t){if(r<0||r>=this.shape[e])throw new Error(`Requested out of range element at ${t}.   Buffer shape=`+this.shape);e++}let n=t[t.length-1];for(let r=0;r<t.length-1;++r)n+=this.strides[r]*t[r];return this.values[n]}locToIndex(t){if(0===this.rank)return 0;if(1===this.rank)return t[0];let e=t[t.length-1];for(let n=0;n<t.length-1;++n)e+=this.strides[n]*t[n];return e}indexToLoc(t){if(0===this.rank)return[];if(1===this.rank)return[t];const e=new Array(this.shape.length);for(let n=0;n<e.length-1;++n)e[n]=Math.floor(t/this.strides[n]),t-=e[n]*this.strides[n];return e[e.length-1]=t,e}get rank(){return this.shape.length}toTensor(){return oe().makeTensor(this.values,this.shape,this.dtype)}}let oe=null,ae=null,le=null;class ue{constructor(t,e,n,r){this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=e||"float32",this.size=At(t),this.strides=Qt(t),this.dataId=n,this.id=r,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const t=await this.data();return ae.buffer(this.shape,this.dtype,t)}bufferSync(){return ae.buffer(this.shape,this.dtype,this.dataSync())}async array(){const t=await this.data();return $t(this.shape,t)}arraySync(){return $t(this.shape,this.dataSync())}async data(){this.throwIfDisposed();const t=oe().read(this.dataId);if("string"===this.dtype){const n=await t;try{return n.map(t=>Yt(t))}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return t}dataSync(){this.throwIfDisposed();const t=oe().readSync(this.dataId);if("string"===this.dtype)try{return t.map(t=>Yt(t))}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return t}async bytes(){this.throwIfDisposed();const t=await oe().read(this.dataId);return"string"===this.dtype?t:new Uint8Array(t.buffer)}dispose(){this.isDisposed||(oe().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(t=!1){return ae.print(this,t)}clone(){return this.throwIfDisposed(),ae.clone(this)}toString(t=!1){return function(t,e,n,r){const i=Qt(e),s=function(t,e,n,r){const i=At(e),s=r[r.length-1],o=new Array(s).fill(0),a=e.length,l="complex64"===n?ie(t):t;if(a>1)for(let u=0;u<i/s;u++){const t=u*s;for(let e=0;e<s;e++)o[e]=Math.max(o[e],ne(l[t+e],0,n).length)}return o}(t,e,n,i),o=e.length,a=function t(e,n,r,i,s,o=!0){const a="complex64"===r?2:1,l=n[0],u=n.length;if(0===u)return"complex64"===r?[ne(ie(e)[0],0,r)]:"bool"===r?[re(e[0])]:[e[0].toString()];if(1===u){if(l>20){let t=Array.from(e.slice(0,3*a)),n=Array.from(e.slice((l-3)*a,l*a));return"complex64"===r&&(t=ie(t),n=ie(n)),["["+t.map((t,e)=>ne(t,s[e],r)).join(", ")+", ..., "+n.map((t,e)=>ne(t,s[l-3+e],r)).join(", ")+"]"]}return["["+("complex64"===r?ie(e):Array.from(e)).map((t,e)=>ne(t,s[e],r)).join(", ")+"]"]}const c=n.slice(1),h=i.slice(1),d=i[0]*a,p=[];if(l>20){for(let n=0;n<3;n++){const i=n*d;p.push(...t(e.slice(i,i+d),c,r,h,s,!1))}p.push("...");for(let n=l-3;n<l;n++){const i=n*d;p.push(...t(e.slice(i,i+d),c,r,h,s,n===l-1))}}else for(let m=0;m<l;m++){const n=m*d;p.push(...t(e.slice(n,n+d),c,r,h,s,m===l-1))}const f=2===u?",":"";p[0]="["+p[0]+f;for(let m=1;m<p.length-1;m++)p[m]=" "+p[m]+f;let A=",\n";for(let m=2;m<u;m++)A+="\n";return p[p.length-1]=" "+p[p.length-1]+"]"+(o?"":A),p}(t,e,n,i,s),l=["Tensor"];return r&&(l.push("  dtype: "+n),l.push("  rank: "+o),l.push(`  shape: [${e}]`),l.push("  values:")),l.push(a.map(t=>"    "+t).join("\n")),l.join("\n")}(this.dataSync(),this.shape,this.dtype,t)}cast(t){return this.throwIfDisposed(),ae.cast(this,t)}variable(t=!0,e,n){return this.throwIfDisposed(),oe().makeVariable(this,t,e,n)}}Object.defineProperty(ue,Symbol.hasInstance,{value:t=>!!t&&null!=t.dataId&&null!=t.shape&&null!=t.dtype});class ce extends ue{constructor(t,e,n,r){super(t.shape,t.dtype,t.dataId,r),this.trainable=e,this.name=n}assign(t){if(t.dtype!==this.dtype)throw new Error(`dtype of the new value (${t.dtype}) and previous value (${this.dtype}) must match`);if(!gt(t.shape,this.shape))throw new Error(`shape of the new value (${t.shape}) and previous value (${this.shape}) must match`);oe().disposeTensor(this),this.dataId=t.dataId,oe().incRef(this,null)}dispose(){oe().disposeVariable(this),this.isDisposedInternal=!0}}var he,de,pe,fe,Ae;Object.defineProperty(ce,Symbol.hasInstance,{value:t=>t instanceof ue&&null!=t.assign&&t.assign instanceof Function}),function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"}(he||(he={})),function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"}(de||(de={})),function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"}(pe||(pe={})),function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"}(fe||(fe={})),function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"}(Ae||(Ae={}));const me={float32:fe,int32:de,bool:pe,complex64:Ae};function ge(t,e){if("string"===t||"string"===e){if("string"===t&&"string"===e)return"string";throw new Error(`Can not upcast ${t} with ${e}`)}return me[t][e]}function ye(t){return ge(t,"int32")}function we(t,e){if(t.dtype===e.dtype)return[t,e];const n=ge(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function be(t,e){ht(t.dtype===e.dtype,()=>`The dtypes of the first(${t.dtype}) and second(${e.dtype}) input must match`)}function ve(t,e){return e.some(e=>e.id===t.id)}function xe(t){const e=[];return function t(e,n,r){if(null==e)return;if(e instanceof ue)return void n.push(e);if(i=e,!Array.isArray(i)&&"object"!=typeof i)return;var i;const s=e;for(const o in s){const e=s[o];r.has(e)||(r.add(e),t(e,n,r))}}(t,e,new Set),e}class _e{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}dispose(){for(const t in this.registeredVariables)this.registeredVariables[t].dispose()}}class Ce{constructor(t){this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new _e}async ready(){if(null!=this.pendingBackendInit)return this.pendingBackendInit.then(()=>{});if(null!=this.backendInstance)return;const t=this.getSortedBackends();for(let e=0;e<t.length;e++){const n=t[e];if(await this.initializeBackend(n).success)return void(await this.setBackend(n))}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(null!=this.pendingBackendInit)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(null==this.backendInstance){const{name:t,asyncInit:e}=this.initializeBackendsAndReturnBest();if(e)throw new Error(`The highest priority backend '${t}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(t)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(t){if(!(t in this.registry)){if(!(t in this.registryFactory))return null;{const{asyncInit:e}=this.initializeBackend(t);if(e)return null}}return this.registry[t]}findBackendFactory(t){return t in this.registryFactory?this.registryFactory[t].factory:null}registerBackend(t,e,n=1){return t in this.registryFactory?(console.warn(t+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[t]={factory:e,priority:n},!0)}async setBackend(t){if(null==this.registryFactory[t])throw new Error(`Backend name '${t}' not found in registry`);if(this.backendName=t,null==this.registry[t]){this.backendInstance=null;const{success:e,asyncInit:n}=this.initializeBackend(t);if(!(n?await e:e))return!1}return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new te(this.backendInstance),!0}setupRegisteredKernels(){Z(this.backendName).forEach(t=>{null!=t.setupFunc&&t.setupFunc(this.backendInstance)})}disposeRegisteredKernels(t){Z(t).forEach(e=>{null!=e.disposeFunc&&e.disposeFunc(this.registry[t])})}initializeBackend(t){const e=this.registryFactory[t];if(null==e)throw new Error(`Cannot initialize backend ${t}, no registration found.`);try{const n=e.factory();if(Promise.resolve(n)===n){const e=++this.pendingBackendInitId,r=n.then(n=>!(e<this.pendingBackendInitId||(this.registry[t]=n,this.pendingBackendInit=null,0))).catch(n=>(e<this.pendingBackendInitId||(this.pendingBackendInit=null,console.warn(`Initialization of backend ${t} failed`),console.warn(n.stack||n.message)),!1));return this.pendingBackendInit=r,{success:r,asyncInit:!0}}return this.registry[t]=n,{success:!0,asyncInit:!1}}catch(n){return console.warn(`Initialization of backend ${t} failed`),console.warn(n.stack||n.message),{success:!1,asyncInit:!1}}}removeBackend(t){if(!(t in this.registryFactory))throw new Error(t+" backend not found in registry");this.backendName===t&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,t in this.registry&&(this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t]),delete this.registryFactory[t],this.backendName===t&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((t,e)=>this.registryFactory[e].priority-this.registryFactory[t].priority)}initializeBackendsAndReturnBest(){const t=this.getSortedBackends();for(let e=0;e<t.length;e++){const n=t[e],{success:r,asyncInit:i}=this.initializeBackend(n);if(i||r)return{name:n,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(t,e){const n=this.state.tensorInfo.get(e),r=n.backend,i=this.readSync(e);r.disposeData(e),n.backend=t,t.move(e,i,n.shape,n.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(t,e){let n,r=null;if(null==e){if("function"!=typeof t)throw new Error("Please provide a function to tidy()");e=t}else{if("string"!=typeof t&&!(t instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof e)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=t}return this.scopedRun(()=>this.startScope(r),()=>this.endScope(n),()=>(n=e(),n instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n))}scopedRun(t,e,n){t();try{const t=n();return e(),t}catch(r){throw e(),r}}nextTensorId(){return Ce.nextTensorId++}nextVariableId(){return Ce.nextVariableId++}clone(t){const e=this.makeTensorFromDataId(t.dataId,t.shape,t.dtype);return this.addTapeNode(this.state.activeScope.name,{x:t},[e],t=>({x:()=>t.toFloat()}),[],{}),e}runKernel(t,e,n,r,i){return this.runKernelFunc(null,e,null,t,n,r,i)}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(t,e,n){const r=this.backend.numDataIds();let i=0;n.forEach(t=>{i+="complex64"===t.dtype?3:1});const s=r-e-i-this.state.numDataMovesStack[this.state.numDataMovesStack.length-1];if(s>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${s} data ids) after running '${t}'`)}runKernelFunc(t,e,n,r,i,s,o){let a,l=[];const u=this.isTapeOn();null==r&&(r=null!=this.state.activeScope?this.state.activeScope.name:"");const c=this.state.numBytes,h=this.state.numTensors;let d;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);const p=Y(r,this.backendName);let f;if(null!=p)d=()=>{const t=this.backend.numDataIds();f=p.kernelFunc({inputs:e,attrs:i,backend:this.backend});const n=Array.isArray(f)?f:[f];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(r,t,n);const a=n.map(({dataId:t,shape:e,dtype:n})=>this.makeTensorFromDataId(t,e,n));if(u){let t=this.getTensorsForGradient(r,e,a);if(null==t){null==o&&(o=[]);const e=a.filter((t,e)=>o[e]);t=(s||[]).slice().concat(e)}l=this.saveTensorsForBackwardMode(t)}return a};else{const e=t=>{u&&(l=t.map(t=>this.keep(this.clone(t))))};d=()=>{const n=this.backend.numDataIds();f=this.tidy(()=>t(this.backend,e));const i=Array.isArray(f)?f:[f];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(r,n,i),i}}return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{if(this.ENV.getBool("DEBUG")){let t;t=this.profiler.profileKernel(r,e,()=>d()),this.profiler.logKernelProfile(t),a=t.outputs}else a=d()}),u&&this.addTapeNode(r,e,a,n,l,i),this.state.profiling&&this.state.activeProfile.kernels.push({name:r,bytesAdded:this.state.numBytes-c,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-h,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(e).map(t=>null!=e[t]?e[t].shape:null),outputShapes:a.map(t=>t.shape)}),Array.isArray(f)?a:a[0]}saveTensorsForBackwardMode(t){return t.map(t=>this.keep(this.clone(t)))}getTensorsForGradient(t,e,n){const r=J(t);if(null!=r){const t=r.inputsToSave||[],i=r.outputsToSave||[];let s;r.saveAllInputs?(ht(Array.isArray(e),()=>"saveAllInputs is true, expected inputs to be an array."),s=Object.keys(e).map(t=>e[t])):s=t.map(t=>e[t]);const o=n.filter((t,e)=>i[e]);return s.concat(o)}return null}makeTensor(t,e,n,r){if(null==t)throw new Error("Values passed to engine.makeTensor() are null");r=r||this.backend;let i=t;"string"===(n=n||"float32")&&Dt(t[0])&&(i=t.map(t=>Xt(t)));const s=r.write(i,e,n),o=new ue(e,n,s,this.nextTensorId());if(this.incRef(o,r),"string"===n){const t=this.state.tensorInfo.get(s),e=Ot(i);this.state.numBytes+=e-t.bytes,t.bytes=e}return o}makeTensorFromDataId(t,e,n,r){const i=new ue(e,n=n||"float32",t,this.nextTensorId());return this.incRef(i,r),i}makeVariable(t,e=!0,n,r){n=n||this.nextVariableId().toString(),null!=r&&r!==t.dtype&&(t=t.cast(r));const i=new ce(t,e,n,this.nextTensorId());if(null!=this.state.registeredVariables[i.name])throw new Error(`Variable with name ${i.name} was already registered`);return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i}incRef(t,e){const n=this.state.tensorInfo.has(t.dataId)?this.state.tensorInfo.get(t.dataId).refCount:0;if(this.state.numTensors++,"string"===t.dtype&&this.state.numStringTensors++,0===n){this.state.numDataBuffers++;let n=0;"complex64"!==t.dtype&&"string"!==t.dtype&&(n=t.size*Rt(t.dtype)),this.state.tensorInfo.set(t.dataId,{backend:e||this.backend,dtype:t.dtype,shape:t.shape,bytes:n,refCount:0}),this.state.numBytes+=n}this.state.tensorInfo.get(t.dataId).refCount++,t instanceof ce||this.track(t)}disposeTensor(t){if(!this.state.tensorInfo.has(t.dataId))return;this.state.numTensors--,"string"===t.dtype&&this.state.numStringTensors--;const e=this.state.tensorInfo.get(t.dataId);e.refCount<=1?("complex64"!==t.dtype&&(this.state.numBytes-=e.bytes),this.state.numDataBuffers--,e.backend.disposeData(t.dataId),this.state.tensorInfo.delete(t.dataId)):this.state.tensorInfo.get(t.dataId).refCount--}disposeVariables(){for(const t in this.state.registeredVariables)this.disposeVariable(this.state.registeredVariables[t])}disposeVariable(t){this.disposeTensor(t),null!=this.state.registeredVariables[t.name]&&delete this.state.registeredVariables[t.name]}memory(){const t=this.backend.memory();return t.numTensors=this.state.numTensors,t.numDataBuffers=this.state.numDataBuffers,t.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(t.unreliable=!0,null==t.reasons&&(t.reasons=[]),t.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),t}async profile(t){this.state.profiling=!0;const e=this.state.numBytes,n=this.state.numTensors;return this.state.activeProfile.kernels=[],this.state.activeProfile.result=await t(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(t=>t.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-e,this.state.activeProfile.newTensors=this.state.numTensors-n,this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}addTapeNode(t,e,n,r,i,s){const o={id:this.state.nextTapeNodeId++,kernelName:t,inputs:e,outputs:n,saved:i},a=J(t);null!=a&&(r=a.gradFunc),null!=r&&(o.gradient=t=>(t=t.map((t,e)=>{if(null==t){const t=n[e],r=qt(t.size,t.dtype);return this.makeTensor(r,t.shape,t.dtype)}return t}),r(t.length>1?t:t[0],i,s))),this.state.activeTape.push(o)}keep(t){return t.kept=!0,t}startTape(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(t){const e={track:[],name:"unnamed scope",id:this.state.nextScopeId++};t&&(e.name=t),this.state.scopeStack.push(e),this.state.activeScope=e}endScope(t){const e=xe(t),n=new Set(e.map(t=>t.id));for(let i=0;i<this.state.activeScope.track.length;i++){const t=this.state.activeScope.track[i];t.kept||n.has(t.id)||t.dispose()}const r=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],e.forEach(t=>{t.kept||t.scopeId!==r.id||this.track(t)})}gradients(t,e,n,r=!1){if(ht(e.length>0,()=>"gradients() received an empty list of xs."),null!=n&&"float32"!==n.dtype)throw new Error(`dy must have 'float32' dtype, but has '${n.dtype}'`);const i=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",t));ht(i instanceof ue,()=>"The result y returned by f() must be a tensor.");const s=function(t,e,n){const r={},i={};for(let l=0;l<e.length;l++)r[e[l].id]=!0;for(let l=0;l<t.length;l++){const n=t[l],s=n.inputs;for(const t in s){const o=s[t];let a=!1;for(let t=0;t<e.length;t++)if(r[o.id]){n.outputs.forEach(t=>r[t.id]=!0),a=!0,i[n.id]=!0;break}if(a)break}}const s={};s[n.id]=!0;const o={};for(let l=t.length-1;l>=0;l--){const e=t[l],n=e.inputs;for(let t=0;t<e.outputs.length;t++)if(s[e.outputs[t].id]){for(const t in n)s[n[t].id]=!0,o[e.id]=!0;break}}const a=[];for(let l=0;l<t.length;l++){const e=t[l];if(i[e.id]&&o[e.id]){const t={};for(const i in e.inputs){const n=e.inputs[i];r[n.id]&&(t[i]=n)}const n=Object.assign({},e);n.inputs=t,n.outputs=e.outputs,a.push(n)}}return a}(this.state.activeTape,e,i);if(!r&&0===s.length&&e.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const t={};t[i.id]=null==n?function(t){const e=Vt(At(t),"float32");return Se.makeTensor(e,t,"float32")}(i.shape):n,function(t,e,n){for(let r=e.length-1;r>=0;r--){const i=e[r],s=[];if(i.outputs.forEach(e=>{const n=t[e.id];s.push(null!=n?n:null)}),null==i.gradient)throw new Error(`Cannot compute gradient: gradient function not found for ${i.kernelName}.`);const o=i.gradient(s);for(const e in i.inputs){if(!(e in o))throw new Error(`Cannot backprop through input ${e}. Available gradients found: ${Object.keys(o)}.`);const r=n(()=>o[e]());if("float32"!==r.dtype)throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input ${e} must have 'float32' dtype, but has '${r.dtype}'`);const s=i.inputs[e];if(!gt(r.shape,s.shape))throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input '${e}' has shape '${r.shape}', which does not match the shape of the input '${s.shape}'`);if(null==t[s.id])t[s.id]=r;else{const e=t[s.id];t[s.id]=e.add(r),e.dispose()}}}}(t,s,t=>this.tidy(t));const r=e.map(e=>t[e.id]);return 0===this.state.gradientDepth&&(this.state.activeTape.forEach(t=>{for(const e of t.saved)e.dispose()}),this.state.activeTape=null),{value:i,grads:r}})}customGrad(t){return ht(Pt(t),()=>"The f passed in customGrad(f) must be a function."),(...e)=>{let n;ht(e.every(t=>t instanceof ue),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");const r={};return e.forEach((t,e)=>{r[e]=t}),this.runKernelFunc((r,i)=>(n=t(...e,i),ht(n.value instanceof ue,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),ht(Pt(n.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),n.value),r,(t,r)=>{const i=n.gradFunc(t,r),s=Array.isArray(i)?i:[i];ht(s.length===e.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),ht(s.every(t=>t instanceof ue),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const o={};return s.forEach((t,e)=>{o[e]=()=>t}),o})}}readSync(t){return this.state.tensorInfo.get(t).backend.readSync(t)}read(t){return this.state.tensorInfo.get(t).backend.read(t)}async time(t){const e=Kt(),n=await this.backend.time(t);return n.wallMs=Kt()-e,n}track(t){return null!=this.state.activeScope&&(t.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(t)),t}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new _e;for(const t in this.registry)this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}Ce.nextTensorId=0,Ce.nextVariableId=0;const Se=function(){const t=K();if(null==t._tfengine){const e=new $(t);t._tfengine=new Ce(e)}return j=t._tfengine.ENV,oe=()=>t._tfengine,t._tfengine}();function Ee(){if("undefined"!=typeof navigator&&null!=navigator){const t=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function Be(){return"undefined"!=typeof window&&null!=window.document||"undefined"!=typeof WorkerGlobalScope}const ke=V();ke.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),ke.registerFlag("IS_BROWSER",()=>Be()),ke.registerFlag("IS_NODE",()=>"undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.node),ke.registerFlag("IS_CHROME",()=>"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)),ke.registerFlag("PROD",()=>!1),ke.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>ke.getBool("DEBUG")),ke.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0),ke.registerFlag("IS_TEST",()=>!1);const Ne="Abs",Ie="Acos",Fe="Acosh",Te="Add",Re="AddN",Oe="All",De="Any",Le="ArgMax",Me="ArgMin",Ue="Asin",Pe="Asinh",ze="Atan",Qe="Atanh",He="Atan2",$e="AvgPool",Ve="AvgPoolBackprop",qe="AvgPool3D",je="AvgPool3DBackprop",Ke="BatchMatMul",We="BatchToSpaceND",Ge="BroadcastTo",Xe="Cast",Ye="Ceil",Je="ClipByValue",Ze="Complex",tn="Concat",en="Conv2D",nn="Conv2DBackpropFilter",rn="Conv2DBackpropInput",sn="Conv3D",on="Conv3DBackpropFilterV2",an="Conv3DBackpropInputV2",ln="Cos",un="Cosh",cn="Cumsum",hn="CropAndResize",dn="DepthToSpace",pn="DepthwiseConv2dNative",fn="DepthwiseConv2dNativeBackpropFilter",An="DepthwiseConv2dNativeBackpropInput",mn="Diag",gn="Dilation2D",yn="Dilation2DBackpropInput",wn="Dilation2DBackpropFilter",bn="Div",vn="Elu",xn="EluGrad",_n="Erf",Cn="Equal",Sn="Exp",En="Expm1",Bn="FFT",kn="Floor",Nn="FloorDiv",In="Fill",Fn="FusedBatchNorm",Tn="GatherV2",Rn="GatherNd",On="Greater",Dn="GreaterEqual",Ln="Identity",Mn="IFFT",Un="Imag",Pn="IsFinite",zn="IsInf",Qn="IsNan",Hn="Less",$n="LessEqual",Vn="LinSpace",qn="Log",jn="Log1p",Kn="LogicalAnd",Wn="LogicalNot",Gn="LogicalOr",Xn="LogSoftmax",Yn="LRN",Jn="LRNBackprop",Zn="Max",tr="Maximum",er="MaxPool",nr="MaxPoolBackprop",rr="MaxPool3D",ir="MaxPool3DBackprop",sr="MaxPoolWithArgmax",or="Mean",ar="Min",lr="Minimum",ur="Mod",cr="Multiply",hr="Negate",dr="NotEqual",pr="NonMaxSuppressionV3",fr="NonMaxSuppressionV4",Ar="NonMaxSuppressionV5",mr="OnesLike",gr="OneHot",yr="PadV2",wr="Pool",br="Pow",vr="Prelu",xr="Prod",_r="Range",Cr="Real",Sr="Reciprocal",Er="Relu",Br="Reshape",kr="ResizeNearestNeighbor",Nr="ResizeNearestNeighborGrad",Ir="ResizeBilinear",Fr="ResizeBilinearGrad",Tr="Relu6",Rr="Reverse",Or="Round",Dr="Rsqrt",Lr="ScatterNd",Mr="SelectV2",Ur="Selu",Pr="Slice",zr="Sin",Qr="Sinh",Hr="Sign",$r="Sigmoid",Vr="Softplus",qr="Sqrt",jr="Sum",Kr="SpaceToBatchND",Wr="SplitV",Gr="Softmax",Xr="SquaredDifference",Yr="Square",Jr="Sub",Zr="SparseToDense",ti="StridedSlice",ei="Tan",ni="Tanh",ri="Tile",ii="TopK",si="Transpose",oi="Unpack",ai="UnsortedSegmentSum",li="ZerosLike",ui="Step",ci="FromPixels",hi="RotateWithOffset",di="_FusedMatMul",pi="FusedConv2D",fi="FusedDepthwiseConv2D";function Ai(t,e){let n=t;if(Tt(t))return"string"===e?[]:[t.length];if(!Array.isArray(t))return[];const r=[];for(;Array.isArray(n)||Tt(n)&&"string"!==e;)r.push(n.length),n=n[0];return Array.isArray(t)&&V().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function t(e,n,r){if(r=r||[],!Array.isArray(e)&&!Tt(e))return void ht(0===n.length,()=>`Element arr[${r.join("][")}] is a primitive, but should be an array/TypedArray of ${n[0]} elements`);ht(n.length>0,()=>`Element arr[${r.join("][")}] should be a primitive, but is an array of ${e.length} elements`),ht(e.length===n[0],()=>`Element arr[${r.join("][")}] should have ${n[0]} elements, but has ${e.length} elements`);const i=n.slice(1);for(let s=0;s<e.length;++s)t(e[s],i,r.concat(s))}(t,r,[]),r}function mi(t,e,n,r){if(null!=t&&("numeric"!==t&&t!==e||"numeric"===t&&"string"===e))throw new Error(`Argument '${n}' passed to '${r}' must be ${t} tensor, but got ${e} tensor`)}function gi(t,e,n,r="numeric"){if(t instanceof ue)return mi(r,t.dtype,e,n),t;let i=Ut(t);if("string"!==i&&["bool","int32","float32"].indexOf(r)>=0&&(i=r),mi(r,i,e,n),null==t||!Tt(t)&&!Array.isArray(t)&&"number"!=typeof t&&"boolean"!=typeof t&&"string"!=typeof t)throw new Error(`Argument '${e}' passed to '${n}' must be a Tensor or TensorLike, but got '${null==t?"null":t.constructor.name}'`);const s=Ai(t,i);Tt(t)||Array.isArray(t)||(t=[t]);const o="string"!==i?Ht(t,i):ft(t,[],!0);return Se.makeTensor(o,s,i)}function yi(t,e,n,r="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${e} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((t,r)=>gi(t,`${e}[${r}]`,n),r)}function wi(t){const e=Object.keys(t);if(1!==e.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+e.length+" keys.");let n=e[0];const r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1));const i=(...t)=>{Se.startScope(n);try{const e=r(...t);return e instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),Se.endScope(e),e}catch(e){throw Se.endScope(null),e}};return Object.defineProperty(i,"name",{value:n,configurable:!0}),i}const bi=wi({cast_:function(t,e){const n=gi(t,"x","cast");if(!It(e))throw new Error("Failed to cast to unknown dtype "+e);if("string"===e&&"string"!==n.dtype||"string"!==e&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");return Se.runKernelFunc(t=>t.cast(n,e),{x:n},null,Xe,{dtype:e})}}),vi=wi({mul_:function(t,e){let n=gi(t,"a","mul"),r=gi(e,"b","mul");return[n,r]=we(n,r),Se.runKernelFunc((t,e)=>{const i=t.multiply(n,r);return e([n,r]),i},{a:n,b:r},null,cr)}}),xi=wi({step_:function(t,e=0){const n=gi(t,"x","step");return Se.runKernelFunc(t=>t.step(n,e),{x:n},null,ui,{alpha:e})}}),_i={kernelName:Ne,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>vi(t,xi(bi(n,"float32"),-1))}}},Ci=wi({floorDiv_:function(t,e){let n=gi(t,"a","floorDiv"),r=gi(e,"b","floorDiv");return[n,r]=we(n,r),Se.runKernelFunc((t,e)=>{const i=t.floorDiv(n,r);return e([n,r]),i},{a:n,b:r},null,Nn)}}),Si=wi({div_:function(t,e){let n=gi(t,"a","div"),r=gi(e,"b","div");return[n,r]=we(n,r),"int32"===n.dtype&&"int32"===r.dtype?Ci(n,r):Se.runKernelFunc((t,e)=>{const i=t.realDivide(n,r);return e([n,r]),i},{a:n,b:r},null,bn,{})}}),Ei=wi({neg_:function(t){const e=gi(t,"x","neg");return Se.runKernelFunc(t=>t.neg(e),{x:e},null,hr)}});function Bi(t,e,n,r){if(null==r&&(r=Ut(t)),"complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!Tt(t)&&!Array.isArray(t)&&"number"!=typeof t&&"boolean"!=typeof t&&"string"!=typeof t)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=e){Wt(e);const t=At(e),r=At(n);ht(t===r,()=>`Based on the provided shape, [${e}], the tensor should have ${t} values but has ${r}`);for(let i=0;i<n.length;++i){const t=n[i],r=i!==n.length-1||t!==At(e.slice(i));ht(n[i]===e[i]||!r,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${e}). `)}}return Tt(t)||Array.isArray(t)||(t=[t]),e=e||n,t="string"!==r?Ht(t,r):ft(t,[],!0),Se.makeTensor(t,e,r)}function ki(t,e){if((Tt(t)&&"string"!==e||Array.isArray(t))&&"complex64"!==e)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===e&&Tt(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Bi(t,[],[],e)}const Ni=wi({sqrt_:function(t){const e=gi(t,"x","sqrt");return Se.runKernelFunc((t,n)=>{const r=t.sqrt(e);return n([e]),r},{x:e},null,qr)}}),Ii=wi({square_:function(t){const e=gi(t,"x","square");return Se.runKernelFunc((t,n)=>(n([e]),t.square(e)),{x:e},null,"Square",{},[e],[])}}),Fi=wi({sub_:function(t,e){let n=gi(t,"a","sub"),r=gi(e,"b","sub");return[n,r]=we(n,r),Se.runKernelFunc((t,e)=>{const i=t.subtract(n,r);return e([n,r]),i},{a:n,b:r},null,Jr)}}),Ti={kernelName:Ie,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const e=Ii(bi(n,"float32")),r=Ni(Fi(ki(1),e));return Ei(Si(t,r))}}}},Ri={kernelName:Fe,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const e=Ni(Fi(Ii(bi(n,"float32")),1));return Si(t,e)}}}};function Oi(t,e){const n=t.length,r=[];for(let i=0;i<n;i++){const s=n-1-i,o=t[s]||1;(e[e.length-1-i]||1)>1&&1===o&&r.unshift(s)}return r}function Di(t,e){const n=[];for(let r=0;r<e.length;r++){const i=t[t.length-r-1],s=e.length-r-1,o=e[s];(null==i||1===i&&o>1)&&n.unshift(s)}return n}function Li(t,e){const n=[],r=Math.max(t.length,e.length);for(let i=0;i<r;i++){let r=t[t.length-i-1];null==r&&(r=1);let s=e[e.length-i-1];if(null==s&&(s=1),1===r)n.unshift(s);else if(1===s)n.unshift(r);else{if(r!==s)throw Error(`Operands could not be broadcast together with shapes ${t} and ${e}.`);n.unshift(r)}}return n}const Mi={kernelName:Te,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=Li(n.shape,r.shape);return{a:()=>{let e=t;const r=Di(n.shape,i);return r.length>0&&(e=e.sum(r)),e.reshape(n.shape)},b:()=>{let e=t;const n=Di(r.shape,i);return n.length>0&&(e=e.sum(n)),e.reshape(r.shape)}}}},Ui={kernelName:Re,saveAllInputs:!0,gradFunc:(t,e)=>{const n={};return e.forEach((e,r)=>{n[r]=()=>t.clone()}),n}},Pi=wi({zerosLike_:function(t){const e=gi(t,"x","zerosLike");return Se.runKernelFunc(t=>t.zerosLike(e),{x:e},null,li)}}),zi={kernelName:Le,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Pi(n)}}},Qi={kernelName:Me,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Pi(n)}}},Hi={kernelName:Ue,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Si(t,Ni(Fi(ki(1),Ii(bi(n,"float32")))))}}},$i=wi({add_:function(t,e){let n=gi(t,"a","add"),r=gi(e,"b","add");return[n,r]=we(n,r),Se.runKernelFunc((t,e)=>{const i=t.add(n,r);return e([n,r]),i},{a:n,b:r},null,Te)}}),Vi={kernelName:Pe,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const e=Ni($i(ki(1),Ii(bi(n,"float32"))));return Si(t,e)}}}},qi=wi({reshape_:function(t,e){const n=gi(t,"x","reshape",null);return e=Ct(e,n.size),ht(n.size===At(e),()=>"new shape and old shape must have the same number of elements."),Se.runKernelFunc((t,r)=>(r([n]),t.reshape(n,e)),{x:n},null,Br,{shape:e})}});function ji(t,e){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function Ki(t,e,n){const r=t.length+e.length,i=[];let s=0,o=0;for(let a=0;a<r;a++)-1===n.indexOf(a)?i.push(t[s++]):i.push(e[o++]);return i}function Wi(t,e){const n=[],r=t.length;for(let i=0;i<r;i++)-1===e.indexOf(i)&&n.push(t[i]);return[n,e.map(e=>t[e])]}function Gi(t,e){return Ki(t,e.map(t=>1),e)}function Xi(t,e,n){ht(ji(e,n),()=>t+" supports only inner-most axes for now. "+`Got axes ${e} and rank-${n} input.`)}function Yi(t,e){if(ji(t,e))return null;const n=[];for(let r=0;r<e;++r)-1===t.indexOf(r)&&n.push(r);return t.forEach(t=>n.push(t)),n}function Ji(t){return t.map((t,e)=>[e,t]).sort((t,e)=>t[1]-e[1]).map(t=>t[0])}function Zi(t,e){const n=[];for(let r=e-t;r<e;++r)n.push(r);return n}const ts=wi({sum_:function(t,e=null,n=!1){let r=gi(t,"x","sum");return"bool"===r.dtype&&(r=r.toInt()),Se.runKernelFunc((t,i)=>{i([r]);const s=St(e,r.shape),o=Yi(s,r.rank);let a=s,l=r;null!=o&&(l=r.transpose(o),a=Zi(a.length,r.rank));let u=t.sum(l,a);if(n){const t=Gi(u.shape,s);u=u.reshape(t)}return u},{x:r},null,jr,{axis:e,keepDims:n})}}),es={kernelName:He,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=Li(n.shape,r.shape);return{a:()=>{const e=$i(Ii(n),Ii(r));let s=vi(t,Si(r,e));const o=Di(n.shape,i);return o.length>0&&(s=ts(s,o)),qi(s,n.shape)},b:()=>{const e=$i(Ii(n),Ii(r));let s=Ei(vi(t,Si(n,e)));const o=Di(r.shape,i);return o.length>0&&(s=ts(s,o)),qi(s,r.shape)}}}},ns={kernelName:ze,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Si(t,$i(Ii(bi(n,"float32")),1))}}},rs={kernelName:Qe,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Si(t,Fi(ki(1),Ii(bi(n,"float32"))))}}};function is(t,e,n,r,i="NHWC",s){return as(t,[...e,t[3]],n,s,r,null,null,ms(i))}function ss(t,e,n,r,i,s,o="channelsLast"){const[a,l]=cs(e);let u;if("channelsLast"===o)u=[a,l,t[3],t[3]];else{if("channelsFirst"!==o)throw new Error("Unknown dataFormat "+o);u=[a,l,t[1],t[1]]}return as(t,u,n,r,i,s,!1,o)}function os(t,e,n,r,i,s,o="NDHWC"){const[a,l,u]=hs(e);let c,h;if("NDHWC"===o)h="channelsLast",c=[a,l,u,t[4],t[4]];else{if("NCDHW"!==o)throw new Error("Unknown dataFormat "+o);h="channelsFirst",c=[a,l,u,t[1],t[1]]}return ls(t,c,n,r,i,!1,h,s)}function as(t,e,n,r,i,s,o=!1,a="channelsLast"){let[l,u,c,h]=[-1,-1,-1,-1];if("channelsLast"===a)[l,u,c,h]=t;else{if("channelsFirst"!==a)throw new Error("Unknown dataFormat "+a);[l,h,u,c]=t}const[d,p,,f]=e,[A,m]=cs(n),[g,y]=cs(r),w=ds(d,g),b=ds(p,y),{padInfo:v,outHeight:x,outWidth:_}=function(t,e,n,r,i,s,o,a,l){let u,c,h;if("number"==typeof t){u={top:t,bottom:t,left:t,right:t,type:0===t?"VALID":"NUMBER"};const i=function(t,e,n,r,i){null==r&&(r=us(t,e,n));const s=t[1],o=ps((t[0]-e+2*r)/n+1,i);ht(yt(o),()=>`The output # of rows (${o}) must be an integer. Change the stride and/or zero pad parameters`);const a=ps((s-e+2*r)/n+1,i);return ht(yt(a),()=>`The output # of columns (${a}) must be an integer. Change the stride and/or zero pad parameters`),[o,a]}([e,n],s,r,t,a);c=i[0],h=i[1]}else if("same"===t){c=Math.ceil(e/r),h=Math.ceil(n/i);const t=Math.max(0,(c-1)*r+s-e),a=Math.max(0,(h-1)*i+o-n),l=Math.floor(t/2),d=t-l,p=Math.floor(a/2);u={top:l,bottom:d,left:p,right:a-p,type:"SAME"}}else if("valid"===t)u={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((e-s+1)/r),h=Math.ceil((n-o+1)/i);else{if("object"!=typeof t)throw Error("Unknown padding parameter: "+t);{const d="channelsLast"===l?t[1][0]:t[2][0],p="channelsLast"===l?t[1][1]:t[2][1],f="channelsLast"===l?t[2][0]:t[3][0],A="channelsLast"===l?t[2][1]:t[3][1];u={top:d,bottom:p,left:f,right:A,type:0===d&&0===p&&0===f&&0===A?"VALID":"EXPLICIT"},c=ps((e-s+d+p)/r+1,a),h=ps((n-o+f+A)/i+1,a)}}return{padInfo:u,outHeight:c,outWidth:h}}(i,u,c,A,m,w,b,s,a),C=o?f*h:f;let S;return"channelsFirst"===a?S=[l,C,x,_]:"channelsLast"===a&&(S=[l,x,_,C]),{batchSize:l,dataFormat:a,inHeight:u,inWidth:c,inChannels:h,outHeight:x,outWidth:_,outChannels:C,padInfo:v,strideHeight:A,strideWidth:m,filterHeight:d,filterWidth:p,effectiveFilterHeight:w,effectiveFilterWidth:b,dilationHeight:g,dilationWidth:y,inShape:t,outShape:S,filterShape:e}}function ls(t,e,n,r,i,s=!1,o="channelsLast",a){let[l,u,c,h,d]=[-1,-1,-1,-1,-1];if("channelsLast"===o)[l,u,c,h,d]=t;else{if("channelsFirst"!==o)throw new Error("Unknown dataFormat "+o);[l,d,u,c,h]=t}const[p,f,A,,m]=e,[g,y,w]=hs(n),[b,v,x]=hs(r),_=ds(p,b),C=ds(f,v),S=ds(A,x),{padInfo:E,outDepth:B,outHeight:k,outWidth:N}=function(t,e,n,r,i,s,o,a,l,u,c){let h,d,p,f;if("number"==typeof t){h={top:t,bottom:t,left:t,right:t,front:t,back:t,type:0===t?"VALID":"NUMBER"};const s=function(t,e,n,r,i,s){null==i&&(i=us(t,e,r));const o=t[1],a=t[2],l=ps((t[0]-e+2*i)/r+1,s);ht(yt(l),()=>`The output # of depths (${l}) must be an integer. Change the stride and/or zero pad parameters`);const u=ps((o-e+2*i)/r+1,s);ht(yt(u),()=>`The output # of rows (${u}) must be an integer. Change the stride and/or zero pad parameters`);const c=ps((a-e+2*i)/r+1,s);return ht(yt(c),()=>`The output # of columns (${c}) must be an integer. Change the stride and/or zero pad parameters`),[l,u,c,1]}([e,n,r,1],a,0,i,t,c);d=s[0],p=s[1],f=s[2]}else if("same"===t){d=Math.ceil(e/i),p=Math.ceil(n/s),f=Math.ceil(r/o);const t=(d-1)*i+a-e,c=(p-1)*s+l-n,A=(f-1)*o+u-r,m=Math.floor(t/2),g=t-m,y=Math.floor(c/2),w=c-y,b=Math.floor(A/2);h={top:y,bottom:w,left:b,right:A-b,front:m,back:g,type:"SAME"}}else{if("valid"!==t)throw Error("Unknown padding parameter: "+t);h={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},d=Math.ceil((e-a+1)/i),p=Math.ceil((n-l+1)/s),f=Math.ceil((r-u+1)/o)}return{padInfo:h,outDepth:d,outHeight:p,outWidth:f}}(i,u,c,h,g,y,w,_,C,S,a),I=s?m*d:m;let F;return"channelsFirst"===o?F=[l,I,B,k,N]:"channelsLast"===o&&(F=[l,B,k,N,I]),{batchSize:l,dataFormat:o,inDepth:u,inHeight:c,inWidth:h,inChannels:d,outDepth:B,outHeight:k,outWidth:N,outChannels:I,padInfo:E,strideDepth:g,strideHeight:y,strideWidth:w,filterDepth:p,filterHeight:f,filterWidth:A,effectiveFilterDepth:_,effectiveFilterHeight:C,effectiveFilterWidth:S,dilationDepth:b,dilationHeight:v,dilationWidth:x,inShape:t,outShape:F,filterShape:e}}function us(t,e,n,r=1){const i=ds(e,r);return Math.floor((t[0]*(n-1)-n+i)/2)}function cs(t){return"number"==typeof t?[t,t,t]:2===t.length?[t[0],t[1],1]:t}function hs(t){return"number"==typeof t?[t,t,t]:t}function ds(t,e){return e<=1?t:t+(t-1)*(e-1)}function ps(t,e){if(!e)return t;switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error("Unknown roundingMode "+e)}}function fs(t){const[e,n,r]=cs(t);return 1===e&&1===n&&1===r}function As(t,e){return fs(t)||fs(e)}function ms(t){if("NHWC"===t)return"channelsLast";if("NCHW"===t)return"channelsFirst";throw new Error("Unknown dataFormat "+t)}const gs=wi({avgPool3dBackprop_:function(t,e,n,r,i=[1,1,1],s,o){const a=gi(t,"dy","avgPool3dBackprop"),l=gi(e,"input","avgPool3dBackprop");let u=a,c=l,h=!1;4===l.rank&&(h=!0,u=qi(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]]),c=qi(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]])),ht(5===u.rank,()=>"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+u.rank+"."),ht(5===c.rank,()=>"Error in avgPool3dBackprop: input must be rank 5 but got rank "+c.rank+"."),ht(As(r,i),()=>`Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides ${r} and dilations '${i}'`),null!=o&&ht(yt(s),()=>`Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode ${o} but got pad ${s}.`);const d=Se.runKernelFunc(t=>{const e=os(c.shape,n,r,i,s,o);return t.avgPool3dBackprop(u,c,e)},{dy:u,input:c},null,je,{filterSize:n,strides:r,dilations:i,pad:s,dimRoundingMode:o});return h?qi(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}}),ys={kernelName:qe,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:i,strides:s,dilations:o,pad:a,dimRoundingMode:l}=n,u=null==o?[1,1,1]:o;return{x:()=>gs(t,r,i,s,u,a,l)}}},ws=wi({avgPoolBackprop_:function(t,e,n,r,i){const s=gi(t,"dy","avgPoolBackprop"),o=gi(e,"input","avgPoolBackprop");ht(o.rank===s.rank,()=>`Rank of input (${o.rank}) does not match rank of dy (${s.rank})`);let a=o,l=s,u=!1;3===o.rank&&(u=!0,a=qi(o,[1,o.shape[0],o.shape[1],o.shape[2]]),l=qi(s,[1,s.shape[0],s.shape[1],s.shape[2]])),ht(4===l.rank,()=>"Error in avgPoolBackprop: dy must be rank 4 but got rank "+l.rank+"."),ht(4===a.rank,()=>"Error in avgPoolBackprop: input must be rank 4 but got rank "+a.rank+".");const c=Se.runKernelFunc(t=>{const e=ss(a.shape,n,r,1,i);return t.avgPoolBackprop(l,a,e)},{dy:l,input:a},null,Ve,{filterSize:n,strides:r,pad:i});return u?qi(c,[c.shape[1],c.shape[2],c.shape[3]]):c}}),bs={kernelName:$e,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:i,strides:s,pad:o}=n;return{x:()=>ws(t,r,i,s,o)}}},vs=wi({matMul_:function(t,e,n=!1,r=!1){let i=gi(t,"a","matMul"),s=gi(e,"b","matMul");[i,s]=we(i,s),ht(i.rank>=2&&s.rank>=2&&i.rank===s.rank,()=>`Error in matMul: inputs must have the same rank of at least 2, got ranks ${i.rank} and ${s.rank}.`);const o=n?i.shape[i.rank-2]:i.shape[i.rank-1],a=r?s.shape[s.rank-1]:s.shape[s.rank-2],l=n?i.shape[i.rank-1]:i.shape[i.rank-2],u=r?s.shape[s.rank-2]:s.shape[s.rank-1],c=i.shape.slice(0,-2),h=s.shape.slice(0,-2),d=At(c),p=At(h);ht(gt(c,h),()=>`Error in matMul: outer dimensions (${c}) and (${h}) of Tensors with shapes ${i.shape} and `+s.shape+" must match."),ht(o===a,()=>`Error in matMul: inner shapes (${o}) and (${a}) of Tensors with shapes ${i.shape} and ${s.shape} and transposeA=${n} and transposeB=${r} must match.`);const f=i.shape.slice(0,-2).concat([l,u]),A=qi(i,n?[d,o,l]:[d,l,o]),m=qi(s,r?[p,u,a]:[p,a,u]),g=Se.runKernelFunc((t,e)=>(e([A,m]),t.batchMatMul(A,m,n,r)),{a:A,b:m},null,Ke,{transposeA:n,transposeB:r});return qi(g,f)}}),xs={kernelName:Ke,inputsToSave:["a","b"],gradFunc:(t,e,n)=>{const[r,i]=e,{transposeA:s,transposeB:o}=n;return s||o?!s&&o?{a:()=>vs(t,i,!1,!1),b:()=>vs(t,r,!0,!1)}:s&&!o?{a:()=>vs(i,t,!1,!0),b:()=>vs(r,t,!1,!1)}:{a:()=>vs(i,t,!0,!0),b:()=>vs(t,r,!0,!0)}:{a:()=>vs(t,i,!1,!0),b:()=>vs(r,t,!0,!1)}}},_s=wi({spaceToBatchND_:function(t,e,n){const r=gi(t,"x","spaceToBatchND");return ht(r.rank>=1+e.length,()=>`input rank ${r.rank} should be > than [blockShape] ${e.length}`),ht(n.length===e.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${e.length}`),ht(r.shape.reduce((t,r,i)=>i>0&&i<=e.length?t&&(r+n[i-1][0]+n[i-1][1])%e[i-1]==0:t,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${e.toString()}`),Se.runKernelFunc(t=>t.spaceToBatchND(r,e,n),{x:r},null,Kr,{blockShape:e,paddings:n})}}),Cs={kernelName:We,gradFunc:(t,e,n)=>{const{blockShape:r,crops:i}=n;return{x:()=>_s(t,r,i)}}},Ss={kernelName:Ge,gradFunc:(t,e,n)=>{const r=n.inputShape,i=n.shape,s=Array.from(i);for(let a=r.length-1;a>=0;a--)if(r[a]===i[a])s[a]=1;else if(1!==r[a])throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${i}].`);const o=[];for(let a=0;a<s.length;a++)s[a]>1&&o.push(a);return{x:()=>ts(t,o,!0)}}},Es={kernelName:Xe,gradFunc:t=>({x:()=>t.clone()})},Bs={kernelName:Ye,gradFunc:t=>({x:()=>Pi(t)})},ks=wi({greaterEqual_:function(t,e){let n=gi(t,"a","greaterEqual"),r=gi(e,"b","greaterEqual");return[n,r]=we(n,r),Li(n.shape,r.shape),Se.runKernelFunc((t,e)=>{const i=t.greaterEqual(n,r);return e([n,r]),i},{a:n,b:r},null,Dn)}}),Ns=wi({lessEqual_:function(t,e){let n=gi(t,"a","lessEqual"),r=gi(e,"b","lessEqual");return[n,r]=we(n,r),Li(n.shape,r.shape),Se.runKernelFunc((t,e)=>{const i=t.lessEqual(n,r);return e([n,r]),i},{a:n,b:r},null,$n)}}),Is=wi({logicalAnd_:function(t,e){const n=gi(t,"a","logicalAnd","bool"),r=gi(e,"b","logicalAnd","bool");return Li(n.shape,r.shape),Se.runKernelFunc(t=>t.logicalAnd(n,r),{a:n,b:r},null,Kn)}}),Fs=wi({where_:function(t,e,n){const r=gi(e,"a","where"),i=gi(n,"b","where"),s=gi(t,"condition","where","bool"),o=Li(r.shape,i.shape),a=r.broadcastTo(o),l=i.broadcastTo(o);return 1===s.rank&&ht(s.shape[0]===r.shape[0],()=>"The first dimension of `a` must match the size of `condition`."),1!==s.rank&&dt(s.shape,l.shape,"Error in where: "),Se.runKernelFunc((t,e)=>{const n=t.select(s,a,l);return e([s]),n},{condition:s,t:a,e:l},null,Mr)}}),Ts={kernelName:Je,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{clipValueMin:i,clipValueMax:s}=n;return{x:()=>Fs(Is(ks(r,i),Ns(r,s)),t,Pi(t))}}};function Rs(t,e,n=0){let r=[];if("number"==typeof e)ht(t.shape[n]%e==0,()=>"Number of splits must evenly divide the axis."),r=new Array(e).fill(t.shape[n]/e);else{ht(e.reduce((t,e)=>(-1===e&&(t+=1),t),0)<=1,()=>"There should be only one negative value in split array.");const i=e.indexOf(-1);if(-1!==i){const r=e.reduce((t,e)=>e>0?t+e:t);e[i]=t.shape[n]-r}ht(t.shape[n]===e.reduce((t,e)=>t+e),()=>"The sum of sizes must match the size of the axis dimension."),r=e}return r}const Os=wi({split_:function(t,e,n=0){const r=gi(t,"x","split");return Se.runKernelFunc((t,i)=>{const s=St(n,r.shape)[0],o=Rs(r,e,s);return t.split(r,o,s)},{x:r},null,Wr,{numOrSizeSplits:e,axis:n})}}),Ds={kernelName:tn,saveAllInputs:!0,gradFunc:(t,e,n)=>{const r=e.map(t=>t.shape),{axis:i}=n,s=St(i,e[0].shape)[0],o=r.map(t=>t[s]);return Os(t,o,s).map(t=>()=>t)}},Ls=wi({conv2DBackpropFilter_:function(t,e,n,r,i,s="NHWC",o){let a=t;3===t.rank&&(a=qi(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;3===l.rank&&(l=qi(e,[1,e.shape[0],e.shape[1],e.shape[2]])),ht(4===a.rank,()=>"Error in conv2dDerFilter: input must be rank 4, but got shape "+a.shape+"."),ht(4===l.rank,()=>"Error in conv2dDerFilter: dy must be rank 4, but got shape "+l.shape+"."),ht(4===n.length,()=>"Error in conv2dDerFilter: filterShape must be length 4, but got "+n+".");const u="NHWC"===s?a.shape[3]:a.shape[1],c="NHWC"===s?l.shape[3]:l.shape[1];return ht(u===n[2],()=>`Error in conv2dDerFilter: depth of input ${u}) must match input depth in filter (${n[2]}.`),ht(c===n[3],()=>`Error in conv2dDerFilter: depth of dy (${c}) must match output depth for filter (${n[3]}).`),null!=o&&ht(yt(i),()=>`Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode ${o} but got pad ${i}.`),Se.runKernelFunc(t=>{const e=ms(s),u=as(a.shape,n,r,1,i,o,!1,e);return t.conv2dDerFilter(a,l,u)},{x:a,dy:l},null,nn,{strides:r,pad:i,dataFormat:s,dimRoundingMode:o})}}),Ms=wi({conv2DBackpropInput_:function(t,e,n,r,i,s="NHWC",o){ht(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let a=t,l=e,u=!1;3===e.rank&&(u=!0,l=qi(e,[1,e.shape[0],e.shape[1],e.shape[2]]),a=[1,t[0],t[1],t[2]]),ht(4===a.length,()=>"Error in conv2dDerInput: inShape must be length 4, but got length "+a.length+"."),ht(4===l.rank,()=>"Error in conv2dDerInput: dy must be rank 4, but got rank "+l.rank),ht(4===n.rank,()=>"Error in conv2dDerInput: filter must be rank 4, but got rank "+n.rank);const c="NHWC"===s?a[3]:a[1],h="NHWC"===s?l.shape[3]:l.shape[1];ht(c===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${c}) must match input depth for filter ${n.shape[2]}.`),ht(h===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${h}) must match output depth for filter ${n.shape[3]}.`),null!=o&&ht(yt(i),()=>`Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode ${o} but got pad ${i}.`);const d=Se.runKernelFunc((t,e)=>{const u=ms(s),c=as(a,n.shape,r,1,i,o,!1,u),h=t.conv2dDerInput(l,n,c);return e([l,n]),h},{dy:l,filter:n},null,rn,{strides:r,pad:i,dataFormat:s,dimRoundingMode:o,inputShape:a});return u?qi(d,[d.shape[1],d.shape[2],d.shape[3]]):d}}),Us={kernelName:en,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,i]=e,{dilations:s,strides:o,pad:a,dataFormat:l}=n;return ht(fs(s),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`),{x:()=>Ms(r.shape,t,i,o,a,l),filter:()=>Ls(r,t,i.shape,o,a,l)}}},Ps=wi({conv2d_:function(t,e,n,r,i="NHWC",s=[1,1],o){const a=gi(t,"x","conv2d"),l=gi(e,"filter","conv2d");let u=a,c=!1;3===a.rank&&(c=!0,u=qi(a,[1,a.shape[0],a.shape[1],a.shape[2]])),ht(4===u.rank,()=>`Error in conv2d: input must be rank 4, but got rank ${u.rank}.`),ht(4===l.rank,()=>"Error in conv2d: filter must be rank 4, but got rank "+l.rank+"."),null!=o&&ht(yt(r),()=>`Error in conv2d: pad must be an integer when using, dimRoundingMode ${o} but got pad ${r}.`);const h="NHWC"===i?u.shape[3]:u.shape[1];ht(h===l.shape[2],()=>`Error in conv2d: depth of input (${h}) must match input depth for filter ${l.shape[2]}.`),ht(As(n,s),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`);const d=Se.runKernelFunc((t,e)=>{const a=ms(i),c=as(u.shape,l.shape,n,s,r,o,!1,a),h=t.conv2d(u,l,c);return e([u,l]),h},{x:u,filter:l},null,en,{strides:n,pad:r,dataFormat:i,dilations:s,dimRoundingMode:o});return c?qi(d,[d.shape[1],d.shape[2],d.shape[3]]):d}}),zs={kernelName:rn,inputsToSave:["dy","filter"],gradFunc:(t,e,n)=>{const[r,i]=e,{strides:s,pad:o,dataFormat:a,dimRoundingMode:l}=n;return{dy:()=>Ps(t,i,s,o,a,1,l),filter:()=>Ls(t,r,i.shape,s,o,a,l)}}},Qs=wi({conv3DBackpropFilter_:function(t,e,n,r,i){let s=t;4===t.rank&&(s=qi(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]));let o=e;return 4===o.rank&&(o=qi(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]])),ht(5===s.rank,()=>"Error in conv3dDerFilter: input must be rank 5, but got shape "+s.shape+"."),ht(5===o.rank,()=>"Error in conv3dDerFilter: dy must be rank 5, but got shape "+o.shape+"."),ht(5===n.length,()=>"Error in conv3dDerFilter: filterShape must be length 5, but got "+n+"."),ht(s.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${s.shape[4]}) must match input depth in filter (${n[3]}.`),ht(o.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${o.shape[4]}) must match output depth for filter (${n[4]}).`),Se.runKernelFunc(t=>{const e=ls(s.shape,n,r,1,i);return t.conv3dDerFilter(s,o,e)},{x:s,y:o},null,on,{strides:r,pad:i})}}),Hs=wi({conv3DBackpropInput_:function(t,e,n,r,i){ht(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let s=t,o=e,a=!1;4===e.rank&&(a=!0,o=qi(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),s=[1,t[0],t[1],t[2],t[3]]);const l=s[4],u=o.shape[4];ht(5===s.length,()=>"Error in conv3dDerInput: inShape must be length 5, but got length "+s.length+"."),ht(5===o.rank,()=>"Error in conv3dDerInput: dy must be rank 5, but got rank "+o.rank),ht(5===n.rank,()=>"Error in conv3dDerInput: filter must be rank 5, but got rank "+n.rank),ht(l===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[3]}.`),ht(u===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${u}) must match output depth for filter ${n.shape[4]}.`);const c=Se.runKernelFunc(t=>{const e=ls(s,n.shape,r,1,i);return t.conv3dDerInput(o,n,e)},{dy:o},null,an,{pad:i});return a?qi(c,[c.shape[1],c.shape[2],c.shape[3],c.shape[4]]):c}}),$s={kernelName:sn,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:i,pad:s}=n;ht(fs(r),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);const[o,a]=e;return{x:()=>Hs(o.shape,t,a,i,s),filter:()=>Qs(o,t,a.shape,i,s)}}},Vs=wi({sin_:function(t){const e=gi(t,"x","sin");return Se.runKernelFunc((t,n)=>{const r=t.sin(e);return n([e]),r},{x:e},null,zr)}}),qs={kernelName:ln,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>vi(Ei(Vs(bi(n,"float32"))),t)}}},js=wi({sinh_:function(t){const e=gi(t,"x","sinh");return Se.runKernelFunc((t,n)=>{const r=t.sinh(e);return n([e]),r},{x:e},null,Qr)}}),Ks={kernelName:un,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>vi(js(bi(n,"float32")),t)}}},Ws=wi({transpose_:function(t,e){const n=gi(t,"x","transpose");return null==e&&(e=n.shape.map((t,e)=>e).reverse()),ht(n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} must match length of perm ${e}.`),e.forEach(t=>{ht(t>=0&&t<n.rank,()=>"All entries in 'perm' must be between 0 and "+(n.rank-1)+" but got "+e)}),n.rank<=1?n.clone():Se.runKernelFunc(t=>t.transpose(n,e),{x:n},null,si,{perm:e})}}),Gs=wi({cumsum_:function(t,e=0,n=!1,r=!1){const i=gi(t,"x","cumsum");return Se.runKernelFunc((t,s)=>{const o=Yi([e],i.rank);let a=i;null!=o&&(a=Ws(i,o));const l=Zi(1,i.rank)[0];let u=t.cumsum(a,l,n,r);if(s([i]),null!=o){const t=Ji(o);u=Ws(u,t)}return u},{x:i},null,cn,{axis:e,exclusive:n,reverse:r})}}),Xs={kernelName:cn,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:i,exclusive:s,reverse:o}=n;return{x:()=>{const e=Yi([i],r.rank);let n=Gs(t,i,s,!o);return null!=e&&(n=Ws(n,e)),n}}}},Ys=wi({depthwiseConv2dNativeBackpropFilter_:function(t,e,n,r){let i=t;3===t.rank&&(i=qi(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let s=e;return 3===s.rank&&(s=qi(e,[1,e.shape[0],e.shape[1],e.shape[2]])),Se.runKernelFunc(t=>t.depthwiseConv2DDerFilter(i,s,r),{x:i,dy:s},null,fn)}}),Js=wi({depthwiseConv2dNativeBackpropInput_:function(t,e,n,r){let i=e,s=!1;3===e.rank&&(s=!0,i=qi(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const o=Se.runKernelFunc(t=>t.depthwiseConv2DDerInput(i,n,r),{dy:i},null,An);return s?qi(o,[o.shape[1],o.shape[2],o.shape[3]]):o}}),Zs={kernelName:pn,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:i,pad:s,dimRoundingMode:o}=n,a=null==r?[1,1]:r;ht(fs(a),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${a}'`);const[l,u]=e;ht(4===l.rank,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`),ht(4===u.rank,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${u.rank}.`),ht(l.shape[3]===u.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${u.shape[2]}.`),ht(As(i,a),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${i} and dilations '${a}'.`),null!=o&&ht(yt(s),()=>`Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode ${o} but got pad ${s}.`);const c=as(l.shape,u.shape,i,a,s,o,!0);return{x:()=>Js(l.shape,t,u,c),filter:()=>Ys(l,t,u.shape,c)}}},to={kernelName:gn,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,i]=e,s={x:r,filter:i,dy:t},o={x:r,filter:i,dy:t};return{x:()=>Se.runKernel(yn,s,n),filter:()=>Se.runKernel(wn,o,n)}}},eo={kernelName:bn,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=Li(n.shape,r.shape);return{a:()=>{const e=Si(t,r.toFloat()),s=Di(n.shape,i);return s.length>0?ts(e,s).reshape(n.shape):e},b:()=>{let e=vi(t,n.toFloat());const s=Di(r.shape,i);s.length>0&&(e=qi(ts(e,s),r.shape));const o=Ii(r);return Ei(Si(e,o.toFloat()))}}}},no={kernelName:vn,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e,r=e=>e.eluDer(t,n),i={dy:t,y:n};return{x:()=>Se.runKernelFunc(r,i,null,xn)}}},ro=wi({exp_:function(t){const e=gi(t,"x","exp");return Se.runKernelFunc((t,n)=>{const r=t.exp(e);return n([r]),r},{x:e},null,Sn)}}),io={kernelName:_n,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=vi(ro(Ei(Ii(n))),2/Math.sqrt(Math.PI));return{x:()=>vi(t,r)}}},so={kernelName:Sn,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>vi(t,n)}}},oo={kernelName:En,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>vi(t,ro(n))}}},ao={kernelName:kn,gradFunc:t=>({x:()=>Pi(t)})},lo={kernelName:Nn,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=Li(n.shape,r.shape);return{a:()=>{const e=t.div(r.toFloat()),s=Di(n.shape,i);return s.length>0?e.sum(s).reshape(n.shape):e},b:()=>{let e=t.mul(n.toFloat());const s=Di(r.shape,i);s.length>0&&(e=e.sum(s).reshape(r.shape));const o=r.square();return e.div(o.toFloat()).neg()}}}},uo=wi({rsqrt_:function(t){const e=gi(t,"x","rsqrt");return Se.runKernelFunc((t,n)=>{const r=t.rsqrt(e);return n([e]),r},{x:e},null,Dr)}}),co=wi({tile_:function(t,e){const n=gi(t,"x","tile",null);return ht(n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${e}.`),Se.runKernelFunc((t,r)=>{const i=t.tile(n,e);return r([n]),i},{x:n},null,ri,{reps:e},[n])}}),ho={kernelName:Fn,inputsToSave:["x","mean","variance","scale"],gradFunc:(t,e,n)=>{const{varianceEpsilon:r}=n,[i,s,o,a]=e,l=null==a?ki(1):a,u=Di(s.shape,i.shape),c=[];if(1===s.rank){for(let t=0;t<i.shape.length-1;++t)c.push(i.shape[t]);c.push(1)}const h=Fi(i,s),d=vi(t,l),p=uo($i(o,ki(r))),f=vi(vi(vi(p,p),p),ki(-.5));return{x:()=>qi(vi(vi(t,1===s.rank?co(p.as4D(1,1,1,s.shape[0]),c):p),l),i.shape),mean:()=>{let t=vi(vi(p,ki(-1)),d);return 1===s.rank&&(t=ts(t,u)),qi(t,s.shape)},variance:()=>{let t=vi(vi(f,h),d);return 1===s.rank&&(t=ts(t,u)),qi(t,s.shape)},scale:()=>{const e=vi(h,p);let n=vi(t,e);return 1===s.rank&&(n=ts(n,u)),qi(n,s.shape)},offset:()=>{let e=t;return 1===s.rank&&(e=ts(e,u)),qi(e,s.shape)}}}},po=wi({unsortedSegmentSum_:function(t,e,n){const r=gi(t,"x","unsortedSegmentSum"),i=gi(e,"segmentIds","unsortedSegmentSum","int32");return ht(yt(n),()=>"numSegments must be of dtype int"),Se.runKernelFunc((t,e)=>{const s=t.unsortedSegmentSum(r,i,n);return e([i]),s},{x:r,segmentIds:i},null,ai,{numSegments:n})}}),fo={kernelName:Tn,inputsToSave:["x","indices"],gradFunc:(t,e,n)=>{const[r,i]=e,{axis:s}=n,o=St(s,r.shape)[0];return{x:()=>{const e=r.shape,n=i.size,a=e.slice(0,o),l=a.length,u=e.slice(s,e.length).slice(1),c=u.length,h=Ao(0,l),d=Ao(l+1,l+1+c),p=mo([a,[n],u]),f=qi(t,p),A=qi(i,[n]),m=mo([[l],h,d]),g=Ws(f,m);let y=po(g,A,r.shape[o]);const w=Ji(m);return y=Ws(y,w),y},indices:()=>i}}};function Ao(t,e){const n=[];for(let r=t;r<e;++r)n.push(r);return n}function mo(t){const e=[];for(let n=0;n<t.length;++n)for(let r=0;r<t[n].length;++r)e.push(t[n][r]);return e}const go={kernelName:Dn,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>Pi(n),b:()=>Pi(r)}}},yo={kernelName:Ln,gradFunc:t=>({x:()=>t.toFloat()})},wo={kernelName:Pn,gradFunc:t=>({x:()=>Pi(t)})},bo={kernelName:zn,gradFunc:t=>({x:()=>Pi(t)})},vo={kernelName:Qn,gradFunc:t=>({x:()=>Pi(t)})},xo={kernelName:jn,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Si(t,$i(n,1))}}},_o={kernelName:qn,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Si(t,bi(n,"float32"))}}},Co={kernelName:Xn,inputsToSave:[],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{axis:i}=n;return{logits:()=>{const e=r.exp();return t.sub(t.sum(i,!0).mul(e))}}}},So=wi({localResponseNormalizationBackprop_:function(t,e,n,r=5,i=1,s=1,o=.5){return Se.runKernelFunc(a=>a.LRNGrad(n,t,e,r,i,s,o),{x:t,y:e,dy:n},null,Jn,{depthRadius:r,bias:i,alpha:s,beta:o})}}),Eo={kernelName:Yn,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,i]=e,{depthRadius:s,bias:o,alpha:a,beta:l}=n;return{x:()=>So(r,i,t,s,o,a,l)}}},Bo=wi({equal_:function(t,e){let n=gi(t,"a","equal"),r=gi(e,"b","equal");return[n,r]=we(n,r),Li(n.shape,r.shape),Se.runKernelFunc(t=>t.equal(n,r),{a:n,b:r},null,Cn)}});function ko(t,e,n,r,i){return e.rank<n.rank&&(e=qi(e,Gi(e.shape,r))),t.rank<n.rank&&(t=qi(t,Gi(t.shape,r))),{x:()=>{const r=vi(t,bi(Bo(n,e),t.dtype));return null==i?r:Ws(r,i)}}}const No={kernelName:Zn,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{reductionIndices:i}=r,[s,o]=e,a=St(i,s.shape),l=Yi(a,s.rank),u=ko(t,o,s,a,l);return{x:()=>{let t=u.x();return null!=l&&(t=Ws(t)),t}}}},Io=wi({less_:function(t,e){let n=gi(t,"a","less"),r=gi(e,"b","less");return[n,r]=we(n,r),Li(n.shape,r.shape),Se.runKernelFunc(t=>t.less(n,r),{a:n,b:r},null,Hn)}}),Fo={kernelName:tr,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>vi(t,bi(ks(n,r),"float32")),b:()=>vi(t,bi(Io(n,r),"float32"))}}},To=wi({maxPool3dBackprop_:function(t,e,n,r,i,s=[1,1,1],o,a){const l=gi(t,"dy","maxPool3dBackprop"),u=gi(e,"input","maxPool3dBackprop"),c=gi(n,"output","maxPool3dBackprop");let h=l,d=u,p=c,f=!1;4===u.rank&&(f=!0,h=qi(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),d=qi(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]]),p=qi(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),ht(5===h.rank,()=>"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+h.rank+"."),ht(5===d.rank,()=>"Error in maxPool3dBackprop: input must be rank 5 but got rank "+d.rank+"."),ht(5===p.rank,()=>"Error in maxPool3dBackprop: output must be rank 5 but got rank "+p.rank+"."),ht(As(i,s),()=>`Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides ${i} and dilations '${s}'`),null!=a&&ht(yt(o),()=>`Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode ${a} but got pad ${o}.`);const A=Se.runKernelFunc(t=>{const e=os(d.shape,r,i,s,o,a);return t.maxPool3dBackprop(h,d,p,e)},{dy:h,input:d,output:p},null,ir,{filterSize:r,strides:i,dilations:s,pad:o,dimRoundingMode:a});return f?qi(A,[A.shape[1],A.shape[2],A.shape[3],A.shape[4]]):A}}),Ro={kernelName:rr,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,i]=e,{filterSize:s,strides:o,dilations:a,pad:l,dimRoundingMode:u}=n,c=null==a?[1,1,1]:a;return{x:()=>To(t,r,i,s,o,c,l,u)}}},Oo=wi({maxPoolBackprop_:function(t,e,n,r,i,s,o){const a=gi(t,"dy","maxPoolBackprop"),l=gi(e,"input","maxPoolBackprop"),u=gi(n,"output","maxPoolBackprop");return ht(l.rank===a.rank,()=>`Rank of input (${l.rank}) does not match rank of dy (${a.rank})`),ht(4===a.rank,()=>"Error in maxPoolBackprop: dy must be rank 4 but got rank "+a.rank+"."),ht(4===l.rank,()=>"Error in maxPoolBackprop: input must be rank 4 but got rank "+l.rank+"."),null!=o&&ht(yt(s),()=>`Error in maxPoolBackprop: pad must be an integer when using, dimRoundingMode ${o} but got pad ${s}.`),Se.runKernelFunc(t=>{const e=ss(l.shape,r,i,1,s,o);return t.maxPoolBackprop(a,l,u,e)},{dy:a,input:l,output:u},null,nr,{filterSize:r,strides:i,pad:s,dimRoundingMode:o})}}),Do={kernelName:er,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,i]=e,{filterSize:s,strides:o,pad:a}=n;return{x:()=>Oo(t,r,i,s,o,a)}}},Lo={kernelName:ar,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{axis:i}=r,[s,o]=e,a=St(i,s.shape),l=Yi(a,s.rank),u=ko(t,o,s,a,l);return{x:()=>{let t=u.x();return null!=l&&(t=Ws(t)),t}}}},Mo=wi({greater_:function(t,e){let n=gi(t,"a","greater"),r=gi(e,"b","greater");return[n,r]=we(n,r),Li(n.shape,r.shape),Se.runKernelFunc(t=>t.greater(n,r),{a:n,b:r},null,On)}}),Uo={kernelName:lr,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>vi(t,bi(Ns(n,r),"float32")),b:()=>vi(t,bi(Mo(n,r),"float32"))}}},Po=wi({floor_:function(t){const e=gi(t,"x","floor");return Se.runKernelFunc(t=>t.floor(e),{x:e},null,kn)}}),zo={kernelName:ur,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=Li(n.shape,r.shape);return{a:()=>{const e=Di(n.shape,i);return e.length>0?qi(ts(t,e),n.shape):t},b:()=>{const e=vi(t,Ei(Po(Si(n,r)))),s=Di(r.shape,i);return s.length>0?qi(ts(e,s),r.shape):e}}}},Qo={kernelName:cr,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=Li(n.shape,r.shape);return{a:()=>{const e=vi(t,bi(r,"float32")),s=Di(n.shape,i);return s.length>0?qi(ts(e,s),n.shape):e},b:()=>{const e=vi(t,bi(n,"float32")),s=Di(r.shape,i);return s.length>0?qi(ts(e,s),r.shape):e}}}},Ho={kernelName:hr,gradFunc:t=>({x:()=>Ei(t)})},$o=wi({complex_:function(t,e){const n=gi(t,"real","complex"),r=gi(e,"imag","complex");return dt(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`),Se.runKernelFunc(t=>t.complex(n,r),{real:n,imag:r},null,Ze)}});function Vo(t,e="float32"){if("complex64"===e){const e=Vo(t,"float32"),n=Vo(t,"float32");return $o(e,n)}const n=qt(At(t),e);return Se.makeTensor(n,t,e)}const qo={kernelName:gr,inputsToSave:["indices"],gradFunc:(t,e)=>{const n=e[0];return{indices:()=>Vo(n.shape,"float32")}}},jo={kernelName:mr,gradFunc:t=>({x:()=>Pi(t)})},Ko={kernelName:yr,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:i}=n,s=i.map(t=>t[0]);return{x:()=>t.slice(s,r.shape)}}},Wo=wi({log_:function(t){const e=gi(t,"x","log");return Se.runKernelFunc((t,n)=>{const r=t.log(e);return n([e]),r},{x:e},null,qn)}}),Go=wi({pow_:function(t,e){let n=gi(t,"base","pow"),r=gi(e,"exp","pow");return[n,r]=we(n,r),Se.runKernelFunc((t,e)=>{const i=t.pow(n,r);return e([n,r,i]),i},{a:n,b:r},null,br)}}),Xo={kernelName:br,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(t,e)=>{const[n,r,i]=e,s=n,o=r,a=Li(s.shape,o.shape);return{a:()=>{const e=bi(o,"float32");let n=vi(t,vi(e,Go(s,Fi(e,ki(1)))));const r=Di(s.shape,a);return r.length>0&&(n=ts(n,r)),qi(n,s.shape)},b:()=>{const e=Mo(s,0),n=Fs(e,Wo(s),Pi(s));let r=vi(t,vi(i,n));const l=Di(o.shape,a);return l.length>0&&(r=ts(r,l)),qi(r,o.shape)}}}},Yo={kernelName:vr,inputsToSave:["x","alpha"],gradFunc:(t,e)=>{const[n,r]=e,i=Mo(n,0);return{x:()=>Fs(i,t,vi(t,r)),alpha:()=>{let e=Fs(i,Pi(t),vi(t,n));const s=Di(r.shape,t.shape);return s.length>0&&(e=ts(e,s)),qi(e,r.shape)}}}},Jo={kernelName:Sr,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Si(t,Ei(Ii(n)))}}},Zo={kernelName:Tr,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=vi(Ns(n,6),xi(n));return{x:()=>vi(t,bi(r,"float32"))}}},ta={kernelName:Er,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>vi(t,bi(xi(n),"float32"))}}},ea={kernelName:Br,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>qi(t,n.shape)}}},na={kernelName:Ir,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,i=e=>{const{alignCorners:i}=n;return e.resizeBilinearBackprop(t,r,i)},s={images:r};return{images:()=>Se.runKernelFunc(i,s,null,Fr,n)}}},ra={kernelName:kr,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,i=e=>{const{alignCorners:i}=n;return e.resizeNearestNeighborBackprop(t,r,i)},s={images:r};return{images:()=>Se.runKernelFunc(i,s,null,Nr,n)}}},ia=wi({clone_:function(t){const e=gi(t,"x","clone",null);return Se.runKernelFunc(()=>Se.makeTensorFromDataId(e.dataId,e.shape,e.dtype),{x:e},null,Ln)}}),sa=wi({reverse_:function(t,e){const n=gi(t,"x","reverse");return Se.runKernelFunc(t=>{const r=St(e,n.shape);if(0===n.rank)return ia(n);const i=t.reverse(n,r);return qi(i,n.shape)},{x:n},null,Rr,{dims:e})}}),oa={kernelName:Rr,gradFunc:(t,e,n)=>{const{dims:r}=n,i=St(r,t.shape);return{x:()=>sa(t,i)}}},aa={kernelName:Or,gradFunc:t=>({x:()=>Pi(t)})},la={kernelName:Dr,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ei(Si(t,vi(Go(n,1.5),2)))}}},ua=wi({logicalNot_:function(t){const e=gi(t,"x","logicalNot","bool");return Se.runKernelFunc(t=>t.logicalNot(e),{x:e},null,Wn)}}),ca={kernelName:Mr,inputsToSave:["condition"],gradFunc:(t,e)=>{const[n]=e;return{condition:()=>bi(Pi(n),"float32"),t:()=>vi(t,bi(n,t.dtype)),e:()=>vi(t,bi(ua(n),t.dtype))}}},ha=1.7580993408473768,da=1.0507009873554805,pa={kernelName:Ur,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const e=Mo(n,ki(0)),r=ki(ha),i=ki(da),s=vi(t,i),o=vi(vi(t,r),ro(bi(n,"float32")));return Fs(e,s,o)}}}},fa={kernelName:$r,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>vi(t,vi(n,Fi(ki(1),n)))}}},Aa={kernelName:Hr,gradFunc:t=>({x:()=>Pi(t)})},ma=wi({cos_:function(t){const e=gi(t,"x","cos");return Se.runKernelFunc((t,n)=>{const r=t.cos(e);return n([e]),r},{x:e},null,ln)}}),ga={kernelName:zr,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>vi(ma(bi(n,"float32")),t)}}},ya=wi({cosh_:function(t){const e=gi(t,"x","cosh");return Se.runKernelFunc((t,n)=>{const r=t.cosh(e);return n([e]),r},{x:e},null,un)}}),wa={kernelName:Qr,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>vi(ya(bi(n,"float32")),t)}}},ba=wi({pad_:function(t,e,n=0){const r=gi(t,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");return Se.runKernelFunc((t,i)=>(i([r]),t.pad(r,e,n)),{x:r},null,yr,{paddings:e,constantValue:n})}});function va(t,e,n){ht(t.rank===e.length,()=>`Error in slice${t.rank}D: Length of begin ${e} must match the rank of the array (${t.rank}).`),ht(t.rank===n.length,()=>`Error in slice${t.rank}D: Length of size ${n} must match the rank of the array (${t.rank}).`);for(let r=0;r<t.rank;++r)ht(e[r]+n[r]<=t.shape[r],()=>`Error in slice${t.rank}D: begin[${r}] + size[${r}] (${e[r]+n[r]}) would overflow input.shape[${r}] (${t.shape[r]})`)}function xa(t){const e=[];let n=0;for(;t>0;)1&t&&e.push(n),t/=2,n++;return e}function _a(t,e,n){const r=[];for(let i=0;i<t.length;i++)r[i]=Math.ceil((e[i]-t[i])/n[i]);return r}function Ca(t,e,n,r){const i=[...t];for(let s=i.length;s<r.length;s++)i.push(1);for(let s=0;s<n;s++)0===s?i[e]=1:(i.splice(e,0,1),i.pop());return i}function Sa(t,e,n){return n<=t?n:n-(e-1)}function Ea(t,e){const n=[];for(let r=0;r<t;r++)n.push(e+r);return n}function Ba(t,e,n,r,i){const s=[...i],o=Ea(n,e);for(let a=0;a<s.length;a++)if(o.indexOf(a)>-1)s[a]=0;else{const i=Sa(e,n,a);let o=r[i];t&1<<i&&(o=0),s[a]=o}return s}function ka(t,e,n,r,i){const s=[...i],o=Ea(n,e);for(let a=0;a<s.length;a++)if(o.indexOf(a)>-1)s[a]=Number.MAX_SAFE_INTEGER;else{const i=Sa(e,n,a);let o=r[i];t&1<<i&&(o=Number.MAX_SAFE_INTEGER),s[a]=o}for(let a=0;a<s.length;a++){const t=i[a];s[a]<0&&(s[a]+=t),s[a]=ot(0,s[a],i[a])}return s}function Na(t,e,n){let r=t[e];return(n&1<<e||null==r)&&(r=1),r}function Ia(t,e,n,r,i,s){let o=e[i];(t&1<<i||s&1<<i||null==o)&&(o=(n[i]||1)>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);const a=r[i];return o<0&&(o+=a),o=ot(0,o,a-1),o}function Fa(t,e,n,r,i,s){let o=e[i];const a=n[i]||1;(t&1<<i||s&1<<i||null==o)&&(o=a>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);const l=r[i];return o<0&&(o+=l),o=a>0?ot(0,o,l):ot(-1,o,l-1),o}function Ta(t,e,n){let r=n.length;for(let i=0;i<n.length;i++)if(n[i]>1){r=i;break}for(let i=r+1;i<n.length;i++)if(e[i]>0||n[i]!==t[i])return!1;return!0}function Ra(t,e){let n=t.length>0?t[t.length-1]:1;for(let r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function Oa(t,e,n){let r,i;return r="number"==typeof e?[e,...new Array(t.rank-1).fill(0)]:e.length<t.rank?e.concat(new Array(t.rank-e.length).fill(0)):e.slice(),r.forEach(t=>{ht(-1!==t,()=>"slice() does not support negative begin indexing.")}),i=null==n?new Array(t.rank).fill(-1):"number"==typeof n?[n,...new Array(t.rank-1).fill(-1)]:n.length<t.rank?n.concat(new Array(t.rank-n.length).fill(-1)):n,i=i.map((e,n)=>e>=0?e:(ht(-1===e,()=>`Negative size values should be exactly -1 but got ${e} for the slice() size at index ${n}.`),t.shape[n]-r[n])),[r,i]}const Da={kernelName:Pr,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{begin:i,size:s}=n,o=r.shape,[a,l]=Oa(r,i,s),u=[];for(let c=0;c<t.rank;c++)u.push([a[c],o[c]-a[c]-l[c]]);return{x:()=>ba(t,u)}}},La={kernelName:Gr,outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{dim:i}=n,s=vi(t,r);return{logits:()=>Fi(s,vi(ts(s,[i],!0),r))}}},Ma=wi({sigmoid_:function(t){const e=gi(t,"x","sigmoid");return Se.runKernelFunc((t,n)=>{const r=t.sigmoid(e);return n([r]),r},{x:e},null,$r)}}),Ua={kernelName:Vr,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>vi(t,Ma(n))}}},Pa=wi({batchToSpaceND_:function(t,e,n){const r=gi(t,"x","batchToSpaceND"),i=e.reduce((t,e)=>t*e);return ht(r.rank>=1+e.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${e.length}`),ht(n.length===e.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${e.length}`),ht(r.shape[0]%i==0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${i}`),Se.runKernelFunc(t=>t.batchToSpaceND(r,e,n),{x:r},null,We,{blockShape:e,crops:n})}}),za={kernelName:Kr,gradFunc:(t,e,n)=>{const{blockShape:r,paddings:i}=n;return{x:()=>Pa(t,r,i)}}};function Qa(t,e){const n=t[0].length;t.forEach((t,e)=>{ht(t.length===n,()=>`Error in concat${n}D: rank of tensors[${e}] must be the same as the rank of the rest (${n})`)}),ht(e>=0&&e<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const r=t[0];t.forEach((t,i)=>{for(let s=0;s<n;s++)ht(s===e||t[s]===r[s],()=>`Error in concat${n}D: Shape of tensors[${i}] (${t}) does not match the shape of the rest (${r}) along the non-concatenated axis ${i}.`)})}function Ha(t,e){const n=t[0].slice();for(let r=1;r<t.length;r++)n[e]+=t[r][e];return n}function $a(t,e,n){return Bi(t,e,Ai(t,n),n)}const Va=wi({concat_:function(t,e=0){ht(t.length>=1,()=>"Pass at least one tensor to concat");let n=yi(t,"tensors","concat");"complex64"===n[0].dtype&&n.forEach(t=>{if("complex64"!==t.dtype)throw new Error(`Cannot concatenate complex64 tensors with a tensor\n          with dtype ${t.dtype}. `)});const r=St(e,n[0].shape)[0],i=Ha(n.map(t=>t.shape),r);return 0===At(i)?$a([],i):(n=n.filter(t=>t.size>0),1===n.length?n[0]:(Qa(n.map(t=>t.shape),r),Se.runKernelFunc((t,e)=>{const i=t.concat(n,r);return e(n),i},n,null,tn,{axis:e})))}}),qa={kernelName:Wr,gradFunc:(t,e,n)=>{const{axis:r}=n;return{x:()=>Va(t,r)}}},ja={kernelName:qr,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Si(t,vi(Ni(bi(n,"float32")),2))}}},Ka={kernelName:Yr,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>vi(t,vi(n.toFloat(),2))}}},Wa={kernelName:Xr,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=ki(2);return{a:()=>vi(t,vi(i,Fi(n,r))),b:()=>vi(t,vi(i,Fi(r,n)))}}},Ga={kernelName:ui,gradFunc:t=>({x:()=>Pi(t)})},Xa={kernelName:Jr,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=Li(n.shape,r.shape);return{a:()=>{let e=t;const r=Di(n.shape,i);return r.length>0&&(e=ts(e,r)),qi(e,n.shape)},b:()=>{let e=t;const n=Di(r.shape,i);return n.length>0&&(e=ts(e,n)),qi(Ei(e),r.shape)}}}};function Ya(t,e="float32"){if("complex64"===e){const e=Ya(t,"float32"),n=Vo(t,"float32");return $o(e,n)}const n=Vt(At(t),e);return Se.makeTensor(n,t,e)}const Ja={kernelName:jr,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,i=r.shape.slice(),{axis:s}=n;St(s,r.shape).forEach(t=>{i[t]=1});const o=qi(t,i),a=vi(o,Ya(r.shape,"float32"));return{x:()=>a}}},Za={kernelName:ei,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Si(t,Ii(ma(n)))}}},tl={kernelName:ni,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>vi(Fi(ki(1),Ii(n)),t)}}},el=wi({slice_:function(t,e,n){const r=gi(t,"x","slice");if(0===r.rank)throw new Error("Slicing scalar is not possible");const[i,s]=Oa(r,e,n);return va(r,i,s),Se.runKernelFunc((t,e)=>(e([r]),t.slice(r,i,s)),{x:r},null,Pr,{begin:e,size:n})}}),nl={kernelName:ri,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{reps:i}=n;return{x:()=>{let e=Pi(r);if(1===r.rank)for(let n=0;n<i[0];++n)e=$i(e,el(t,[n*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(let n=0;n<i[0];++n)for(let s=0;s<i[1];++s)e=$i(e,el(t,[n*r.shape[0],s*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(let n=0;n<i[0];++n)for(let s=0;s<i[1];++s)for(let o=0;o<i[2];++o)e=$i(e,el(t,[n*r.shape[0],s*r.shape[1],o*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+r.rank+" tensors yet.");for(let n=0;n<i[0];++n)for(let s=0;s<i[1];++s)for(let o=0;o<i[2];++o)for(let a=0;a<i[3];++a)e=$i(e,el(t,[n*r.shape[0],s*r.shape[1],o*r.shape[2],a*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return e}}}},rl={kernelName:si,gradFunc:(t,e,n)=>{const r=n,{perm:i}=r,s=Ji(i);return{x:()=>Ws(t,s)}}},il=wi({expandDims_:function(t,e=0){const n=gi(t,"x","expandDims",null);ht(e<=n.rank,()=>"Axis must be <= rank of the tensor");const r=n.shape.slice();return e<0&&(ht(-(n.rank+1)<=e,()=>`Axis must be in the interval [${-(n.rank+1)}, ${n.rank}]`),e=n.rank+e+1),r.splice(e,0,1),qi(n,r)}}),sl=wi({stack_:function(t,e=0){const n=yi(t,"tensors","stack");if(ht(n.length>=1,()=>"Pass at least one tensor to tf.stack"),1===n.length)return il(n[0],e);const r=n[0].shape,i=n[0].dtype;ht(e<=n[0].rank,()=>"Axis must be <= rank of the tensor"),n.forEach(t=>{dt(r,t.shape,"All tensors passed to stack must have matching shapes"),ht(i===t.dtype,()=>"All tensors passed to stack must have matching dtypes")});const s=n.map(t=>il(t,e));return Va(s,e)}}),ol={kernelName:oi,gradFunc:(t,e,n)=>{const r=n,{axis:i}=r;return{value:()=>sl(t,i)}}},al=30;function ll(t){return t<=al?t:zt(t,Math.floor(Math.sqrt(t)))}function ul(t,e){let n,r=!1;for(t<=al?(n=t,r=!0):n=zt(t,Math.floor(Math.sqrt(t)));!r;)n>e||n===t?r=!0:n=zt(t,n+1);return n}function cl(t,e,n){const r=[],i=t.length;for(let s=0;s<i;s++)r.push(s!==e?t[s]:n);return r}function hl(t,e,n){const r=t.shape[n],i=[];let s=1,o=1;for(let a=0;a<n;a++)i.push(t.shape[a]),s*=t.shape[a];for(let a=0;a<e.rank;a++)i.push(e.shape[a]);for(let a=n+1;a<t.rank;a++)i.push(t.shape[a]),o*=t.shape[a];return{batchSize:s,sliceSize:o,dimSize:r,outputShape:i}}const dl=wi({gather_:function(t,e,n=0){const r=gi(t,"x","gather"),i=gi(e,"indices","gather","int32");return Se.runKernelFunc((t,e)=>{const s=St(n,r.shape)[0],o=hl(r,i,s),a=t.gather(r,i.flatten(),s);return e([r,i]),a.reshape(o.outputShape)},{x:r,indices:i},null,Tn,{axis:n})}}),pl=wi({maximum_:function(t,e){let n=gi(t,"a","maximum"),r=gi(e,"b","maximum");return[n,r]=we(n,r),"bool"===n.dtype&&(n=bi(n,"int32"),r=bi(r,"int32")),Li(n.shape,r.shape),Se.runKernelFunc((t,e)=>{const i=t.maximum(n,r);return e([n,r]),i},{a:n,b:r},null,tr)}}),fl=[_i,Ti,Ri,Mi,Ui,zi,Qi,Hi,Vi,es,ns,rs,ys,bs,xs,Cs,Ss,Es,Bs,Ts,Ds,zs,Us,$s,qs,Ks,Xs,Zs,to,eo,no,io,so,oo,lo,ao,ho,fo,go,yo,wo,bo,vo,xo,_o,Co,Eo,No,No,Fo,Ro,Do,Lo,Uo,zo,Qo,Ho,qo,jo,Ko,Ko,Xo,Yo,Jo,Zo,ta,ea,na,ra,oa,aa,la,ca,pa,fa,Aa,ga,wa,Da,La,Ua,za,za,qa,qa,ja,Wa,Ka,Ga,Xa,Ja,Za,tl,nl,rl,ol,{kernelName:ai,inputsToSave:["segmentIds"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>function(t,e){const n=pl(e,Pi(e)),r=dl(t,n);let i=ks(e,ki(0,"int32"));const s=r.rank-i.rank;for(let a=0;a<s;++a)i=il(i,a+1);i=Is(i,Ya(r.shape,"bool"));const o=Pi(r);return Fs(i,r,o)}(t,n)}}},{kernelName:li,gradFunc:t=>({x:()=>Pi(t)})}];for(const dk of fl)et(dk);let Al;V().get("IS_BROWSER")&&V().setPlatform("browser",new class{fetch(t,e){return fetch(t,e)}now(){return performance.now()}encode(t,e){if("utf-8"!==e&&"utf8"!==e)throw new Error("Browser's encoder only supports utf-8, but got "+e);return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(t)}decode(t,e){return new TextDecoder(e).decode(t)}}),V().get("IS_NODE")&&V().setPlatform("node",new class{constructor(){this.util=n(2),this.textEncoder=new this.util.TextEncoder}fetch(t,e){return null!=V().global.fetch?V().global.fetch(t,e):(null==Al&&(Al=n(1)),Al(t,e))}now(){const t=process.hrtime();return 1e3*t[0]+t[1]/1e6}encode(t,e){if("utf-8"!==e&&"utf8"!==e)throw new Error("Node built-in encoder only supports utf-8, but got "+e);return this.textEncoder.encode(t)}decode(t,e){return 0===t.length?"":new this.util.TextDecoder(e).decode(t)}});const ml={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};async function gl(t,e){const n=[],r=[],i=Array.isArray(t)?t.map(t=>t.name):Object.keys(t);for(let s=0;s<i.length;++s){const o=i[s],a=Array.isArray(t)?t[s].tensor:t[o];if("float32"!==a.dtype&&"int32"!==a.dtype&&"bool"!==a.dtype&&"string"!==a.dtype&&"complex64"!==a.dtype)throw new Error(`Unsupported dtype in weight '${o}': ${a.dtype}`);const l={name:o,shape:a.shape,dtype:a.dtype};if("string"===a.dtype){const t=new Promise(async t=>{const e=await a.bytes(),n=e.reduce((t,e)=>t+e.length,0)+4*e.length,r=new Uint8Array(n);let i=0;for(let s=0;s<e.length;s++){const t=e[s],n=new Uint8Array(new Uint32Array([t.length]).buffer);r.set(n,i),i+=4,r.set(t,i),i+=t.length}t(r)});r.push(t)}else r.push(a.data());null!=e&&(l.group=e),n.push(l)}return{data:wl(await Promise.all(r)),specs:n}}function yl(t,e){const n={};let r,i=0;for(const s of e){const e=s.name,o=s.dtype,a=s.shape,l=At(a);let u;if("quantization"in s){const n=s.quantization;if("uint8"===n.dtype||"uint16"===n.dtype){if(!("min"in n)||!("scale"in n))throw new Error(`Weight ${s.name} with quantization ${n.dtype} doesn't have corresponding metadata min and scale.`)}else{if("float16"!==n.dtype)throw new Error(`Weight ${s.name} has unknown quantization dtype ${n.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);if("float32"!==o)throw new Error(`Weight ${s.name} is quantized with ${n.dtype} which only supports weights of type float32 not ${o}.`)}const a=ml[n.dtype],c=t.slice(i,i+l*a),h="uint8"===n.dtype?new Uint8Array(c):new Uint16Array(c);if("float32"===o)if("uint8"===n.dtype||"uint16"===n.dtype){u=new Float32Array(h.length);for(let t=0;t<h.length;t++)u[t]=h[t]*n.scale+n.min}else{if("float16"!==n.dtype)throw new Error(`Unsupported quantization type ${n.dtype} for weight type float32.`);void 0===r&&(r=Sl()),u=r(h)}else{if("int32"!==o)throw new Error(`Unsupported dtype in weight '${e}': ${o}`);if("uint8"!==n.dtype&&"uint16"!==n.dtype)throw new Error(`Unsupported quantization type ${n.dtype} for weight type int32.`);u=new Int32Array(h.length);for(let t=0;t<h.length;t++)u[t]=Math.round(h[t]*n.scale+n.min)}i+=l*a}else if("string"===o){const e=At(s.shape);u=[];for(let n=0;n<e;n++){const e=new Uint32Array(t.slice(i,i+4))[0];i+=4;const n=new Uint8Array(t.slice(i,i+e));u.push(n),i+=e}}else{const r=ml[o],s=t.slice(i,i+l*r);if("float32"===o)u=new Float32Array(s);else if("int32"===o)u=new Int32Array(s);else if("bool"===o)u=new Uint8Array(s);else{if("complex64"!==o)throw new Error(`Unsupported dtype in weight '${e}': ${o}`);{u=new Float32Array(s);const t=new Float32Array(u.length/2),r=new Float32Array(u.length/2);for(let e=0;e<t.length;e++)t[e]=u[2*e],r[e]=u[2*e+1];const i=$a(t,a,"float32"),o=$a(r,a,"float32");n[e]=$o(i,o)}}i+=l*r}"complex64"!==o&&(n[e]=$a(u,a,o))}return n}function wl(t){if(null===t)throw new Error("Invalid input value: "+JSON.stringify(t));let e=0;const n=[];t.forEach(t=>{if(e+=t.byteLength,n.push(t.byteLength===t.buffer.byteLength?t:new t.constructor(t)),!(t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+t.constructor.name)});const r=new Uint8Array(e);let i=0;return n.forEach(t=>{r.set(new Uint8Array(t.buffer),i),i+=t.byteLength}),r.buffer}const bl="undefined"!=typeof Buffer&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);function vl(t){return bl?Buffer.byteLength(t):new Blob([t]).size}function xl(t){if(1===t.length)return t[0];let e=0;t.forEach(t=>{e+=t.byteLength});const n=new Uint8Array(e);let r=0;return t.forEach(t=>{n.set(new Uint8Array(t),r),r+=t.byteLength}),n.buffer}function _l(t){for(t=t.trim();t.endsWith("/");)t=t.slice(0,t.length-1);const e=t.split("/");return e[e.length-1]}function Cl(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==t.modelTopology?0:vl(JSON.stringify(t.modelTopology)),weightSpecsBytes:null==t.weightSpecs?0:vl(JSON.stringify(t.weightSpecs)),weightDataBytes:null==t.weightData?0:t.weightData.byteLength}}function Sl(){const t=function(){const t=t=>{let e=t<<13,n=0;for(;0==(8388608&e);)n-=8388608,e<<=1;return e&=-8388609,n+=947912704,e|n},e=new Uint32Array(2048);e[0]=0;for(let n=1;n<1024;n++)e[n]=t(n);for(let n=1024;n<2048;n++)e[n]=939524096+(n-1024<<13);return e}(),e=function(){const t=new Uint32Array(64);t[0]=0,t[31]=1199570944,t[32]=2147483648,t[63]=3347054592;for(let e=1;e<31;e++)t[e]=e<<23;for(let e=33;e<63;e++)t[e]=2147483648+(e-32<<23);return t}(),n=function(){const t=new Uint32Array(64);for(let e=0;e<64;e++)t[e]=1024;return t[0]=t[32]=0,t}();return r=>{const i=new ArrayBuffer(4*r.length),s=new Uint32Array(i);for(let o=0;o<r.length;o++){const i=r[o];s[o]=t[n[i>>10]+(1023&i)]+e[i>>10]}return new Float32Array(i)}}class El{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return null==El.instance&&(El.instance=new El),El.instance}static registerSaveRouter(t){El.getInstance().saveRouters.push(t)}static registerLoadRouter(t){El.getInstance().loadRouters.push(t)}static getSaveHandlers(t){return El.getHandlers(t,"save")}static getLoadHandlers(t,e){return El.getHandlers(t,"load",e)}static getHandlers(t,e,n){const r=[];return("load"===e?El.getInstance().loadRouters:El.getInstance().saveRouters).forEach(e=>{const i=e(t,n);null!==i&&r.push(i)}),r}}const Bl=t=>El.registerSaveRouter(t),kl=t=>El.registerLoadRouter(t),Nl=t=>El.getSaveHandlers(t),Il=(t,e)=>El.getLoadHandlers(t,e);class Fl{constructor(){this.managers={}}static getInstance(){return null==Fl.instance&&(Fl.instance=new Fl),Fl.instance}static registerManager(t,e){ht(null!=t,()=>"scheme must not be undefined or null."),t.endsWith("://")&&(t=t.slice(0,t.indexOf("://"))),ht(t.length>0,()=>"scheme must not be an empty string.");const n=Fl.getInstance();ht(null==n.managers[t],()=>`A model store manager is already registered for scheme '${t}'.`),n.managers[t]=e}static getManager(t){const e=this.getInstance().managers[t];if(null==e)throw new Error(`Cannot find model manager for scheme '${t}'`);return e}static getSchemes(){return Object.keys(this.getInstance().managers)}}function Tl(t){if(-1===t.indexOf("://"))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+Fl.getSchemes().join(","));return{scheme:t.split("://")[0],path:t.split("://")[1]}}async function Rl(t,e,n=!1){ht(t!==e,()=>`Old path and new path are the same: '${t}'`);const r=El.getLoadHandlers(t);ht(r.length>0,()=>`Copying failed because no load handler is found for source URL ${t}.`),ht(r.length<2,()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${t}.`);const i=r[0],s=El.getSaveHandlers(e);ht(s.length>0,()=>`Copying failed because no save handler is found for destination URL ${e}.`),ht(s.length<2,()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${e}.`);const o=s[0],a=Tl(t).scheme,l=Tl(t).path,u=a===Tl(t).scheme,c=await i.load();n&&u&&await Fl.getManager(a).removeModel(l);const h=await o.save(c);return n&&!u&&await Fl.getManager(a).removeModel(l),h.modelArtifactsInfo}async function Ol(){const t=Fl.getSchemes(),e={};for(const n of t){const t=await Fl.getManager(n).listModels();for(const r in t)e[n+"://"+r]=t[r]}return e}async function Dl(t){const e=Tl(t);return Fl.getManager(e.scheme).removeModel(e.path)}async function Ll(t,e){return Rl(t,e,!1)}async function Ml(t,e){return Rl(t,e,!0)}function Ul(){if(!V().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const t="undefined"==typeof window?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(null==e)throw new Error("The current browser does not appear to support IndexedDB.");return e}function Pl(t){const e=t.result;e.createObjectStore("models_store",{keyPath:"modelPath"}),e.createObjectStore("model_info_store",{keyPath:"modelPath"})}class zl{constructor(t){if(this.indexedDB=Ul(),null==t||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,t)}async load(){return this.databaseAction(this.modelPath)}databaseAction(t,e){return new Promise((t,n)=>{const r=this.indexedDB.open("tensorflowjs",1);r.onupgradeneeded=()=>Pl(r),r.onsuccess=()=>{const i=r.result;if(null==e){const e=i.transaction("models_store","readonly"),r=e.objectStore("models_store").get(this.modelPath);r.onsuccess=()=>{if(null==r.result)return i.close(),n(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));t(r.result.modelArtifacts)},r.onerror=t=>(i.close(),n(r.error)),e.oncomplete=()=>i.close()}else{const r=Cl(e),s=i.transaction("model_info_store","readwrite");let o=s.objectStore("model_info_store");const a=o.put({modelPath:this.modelPath,modelArtifactsInfo:r});let l;a.onsuccess=()=>{l=i.transaction("models_store","readwrite");const a=l.objectStore("models_store").put({modelPath:this.modelPath,modelArtifacts:e,modelArtifactsInfo:r});a.onsuccess=()=>t({modelArtifactsInfo:r}),a.onerror=t=>{o=s.objectStore("model_info_store");const e=o.delete(this.modelPath);e.onsuccess=()=>(i.close(),n(a.error)),e.onerror=t=>(i.close(),n(a.error))}},a.onerror=t=>(i.close(),n(a.error)),s.oncomplete=()=>{null==l?i.close():l.oncomplete=()=>i.close()}}},r.onerror=t=>n(r.error)})}}zl.URL_SCHEME="indexeddb://";const Ql=t=>{return V().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(zl.URL_SCHEME)?(e=t.slice(zl.URL_SCHEME.length),new zl(e)):null;var e};El.registerSaveRouter(Ql),El.registerLoadRouter(Ql);class Hl{constructor(){this.indexedDB=Ul()}async listModels(){return new Promise((t,e)=>{const n=this.indexedDB.open("tensorflowjs",1);n.onupgradeneeded=()=>Pl(n),n.onsuccess=()=>{const r=n.result,i=r.transaction("model_info_store","readonly"),s=i.objectStore("model_info_store").getAll();s.onsuccess=()=>{const e={};for(const t of s.result)e[t.modelPath]=t.modelArtifactsInfo;t(e)},s.onerror=t=>(r.close(),e(s.error)),i.oncomplete=()=>r.close()},n.onerror=t=>e(n.error)})}async removeModel(t){var e;return t=(e=t).startsWith(zl.URL_SCHEME)?e.slice(zl.URL_SCHEME.length):e,new Promise((e,n)=>{const r=this.indexedDB.open("tensorflowjs",1);r.onupgradeneeded=()=>Pl(r),r.onsuccess=()=>{const i=r.result,s=i.transaction("model_info_store","readwrite"),o=s.objectStore("model_info_store"),a=o.get(t);let l;a.onsuccess=()=>{if(null==a.result)return i.close(),n(new Error(`Cannot find model with path '${t}' in IndexedDB.`));{const r=o.delete(t),s=()=>{l=i.transaction("models_store","readwrite");const r=l.objectStore("models_store").delete(t);r.onsuccess=()=>e(a.result.modelArtifactsInfo),r.onerror=t=>n(a.error)};r.onsuccess=s,r.onerror=t=>(s(),i.close(),n(a.error))}},a.onerror=t=>(i.close(),n(a.error)),s.oncomplete=()=>{null==l?i.close():l.oncomplete=()=>i.close()}},r.onerror=t=>n(r.error)})}}if(V().getBool("IS_BROWSER"))try{Fl.registerManager(zl.URL_SCHEME,new Hl)}catch(hk){}const $l="tensorflowjs_models",Vl="info",ql="model_topology",jl="weight_specs",Kl="weight_data",Wl="model_metadata";function Gl(t){return{info:[$l,t,Vl].join("/"),topology:[$l,t,ql].join("/"),weightSpecs:[$l,t,jl].join("/"),weightData:[$l,t,Kl].join("/"),modelMetadata:[$l,t,Wl].join("/")}}function Xl(t){const e=t.split("/");if(e.length<3)throw new Error("Invalid key format: "+t);return e.slice(1,e.length-1).join("/")}class Yl{constructor(t){if(!V().getBool("IS_BROWSER")||"undefined"==typeof window||void 0===window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==t||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=Gl(this.modelPath)}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const e=JSON.stringify(t.modelTopology),n=JSON.stringify(t.weightSpecs),r=Cl(t);try{return this.LS.setItem(this.keys.info,JSON.stringify(r)),this.LS.setItem(this.keys.topology,e),this.LS.setItem(this.keys.weightSpecs,n),this.LS.setItem(this.keys.weightData,function(t){if(bl)return Buffer.from(t).toString("base64");const e=new Uint8Array(t);let n="";for(let r=0,i=e.length;r<i;r++)n+=String.fromCharCode(e[r]);return btoa(n)}(t.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,userDefinedMetadata:t.userDefinedMetadata})),{modelArtifactsInfo:r}}catch(hk){throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${r.modelTopologyBytes}, weightSpecsBytes=${r.weightSpecsBytes}, weightDataBytes=${r.weightDataBytes}.`)}}}async load(){const t=JSON.parse(this.LS.getItem(this.keys.info));if(null==t)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if("JSON"!==t.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const e={},n=JSON.parse(this.LS.getItem(this.keys.topology));if(null==n)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);e.modelTopology=n;const r=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(null==r)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);e.weightSpecs=r;const i=this.LS.getItem(this.keys.modelMetadata);if(null!=i){const t=JSON.parse(i);e.format=t.format,e.generatedBy=t.generatedBy,e.convertedBy=t.convertedBy,e.userDefinedMetadata=t.userDefinedMetadata}const s=this.LS.getItem(this.keys.weightData);if(null==s)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return e.weightData=function(t){if(bl){const e=Buffer.from(t,"base64");return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}const e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)n.set([e.charCodeAt(r)],r);return n.buffer}(s),e}}Yl.URL_SCHEME="localstorage://";const Jl=t=>{return V().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Yl.URL_SCHEME)?(e=t.slice(Yl.URL_SCHEME.length),new Yl(e)):null;var e};El.registerSaveRouter(Jl),El.registerLoadRouter(Jl);class Zl{constructor(){ht(V().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),ht("undefined"==typeof window||void 0!==window.localStorage,()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const t={},e=$l+"/",n="/"+Vl;for(let r=0;r<this.LS.length;++r){const i=this.LS.key(r);i.startsWith(e)&&i.endsWith(n)&&(t[Xl(i)]=JSON.parse(this.LS.getItem(i)))}return t}async removeModel(t){var e;const n=Gl(t=(e=t).startsWith(Yl.URL_SCHEME)?e.slice(Yl.URL_SCHEME.length):e);if(null==this.LS.getItem(n.info))throw new Error(`Cannot find model at path '${t}'`);const r=JSON.parse(this.LS.getItem(n.info));return this.LS.removeItem(n.info),this.LS.removeItem(n.topology),this.LS.removeItem(n.weightSpecs),this.LS.removeItem(n.weightData),r}}if(V().getBool("IS_BROWSER"))try{Fl.registerManager(Yl.URL_SCHEME,new Zl)}catch(hk){}function tu(t){return new Promise(t=>setTimeout(t)).then(t)}class eu{constructor(t){if(!V().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(eu.URL_SCHEME)&&(t=t.slice(eu.URL_SCHEME.length)),null!=t&&0!==t.length||(t="model"),this.modelTopologyFileName=t+".json",this.weightDataFileName=t+".weights.bin"}async save(t){if("undefined"==typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");const e=window.URL.createObjectURL(new Blob([t.weightData],{type:"application/octet-stream"}));if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const n=window.URL.createObjectURL(new Blob([JSON.stringify({modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}]})],{type:"application/json"})),r=null==this.jsonAnchor?document.createElement("a"):this.jsonAnchor;if(r.download=this.modelTopologyFileName,r.href=n,await tu(()=>r.dispatchEvent(new MouseEvent("click"))),null!=t.weightData){const t=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor;t.download=this.weightDataFileName,t.href=e,await tu(()=>t.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:Cl(t)}}}}eu.URL_SCHEME="downloads://";class nu{constructor(t){if(null==t||t.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+t);this.files=t}async load(){const t=this.files[0],e=this.files.slice(1);return new Promise((n,r)=>{const i=new FileReader;i.onload=i=>{const s=JSON.parse(i.target.result),o=s.modelTopology;if(null==o)return void r(new Error("modelTopology field is missing from file "+t.name));0===e.length&&n({modelTopology:o});const a=s.weightsManifest;if(null==a)return void r(new Error("weightManifest field is missing from file "+t.name));let l;try{l=this.checkManifestAndWeightFiles(a,e)}catch(hk){return void r(hk)}const u=[],c=[],h=[];a.forEach(t=>{t.paths.forEach(t=>{c.push(t),h.push(null)}),u.push(...t.weights)}),a.forEach(t=>{t.paths.forEach(t=>{const e=new FileReader;e.onload=e=>{const r=e.target.result,i=c.indexOf(t);h[i]=r,-1===h.indexOf(null)&&n({modelTopology:o,weightSpecs:u,weightData:xl(h),format:s.format,generatedBy:s.generatedBy,convertedBy:s.convertedBy,userDefinedMetadata:s.userDefinedMetadata})},e.onerror=e=>r(`Failed to weights data from file of path '${t}'.`),e.readAsArrayBuffer(l[t])})})},i.onerror=e=>r(`Failed to read model topology and weights manifest JSON from file '${t.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),i.readAsText(t)})}checkManifestAndWeightFiles(t,e){const n=[],r=e.map(t=>_l(t.name)),i={};for(const s of t)s.paths.forEach(t=>{const s=_l(t);if(-1!==n.indexOf(s))throw new Error(`Duplicate file basename found in weights manifest: '${s}'`);if(n.push(s),-1===r.indexOf(s))throw new Error(`Weight file with basename '${s}' is not provided.`);i[t]=e[r.indexOf(s)]});if(n.length!==e.length)throw new Error(`Mismatch in the number of files in weights manifest (${n.length}) and the number of weight files provided (${e.length}).`);return i}}function ru(t){return new nu(t)}function iu(t,e,n,r){!function(t){ht(null!=t&&Array.isArray(t)&&t.length>0,()=>"promises must be a none empty array")}(t),function(t,e){ht(t>=0&&t<=1,()=>"Progress fraction must be in range [0, 1], but got startFraction "+t),ht(e>=0&&e<=1,()=>"Progress fraction must be in range [0, 1], but got endFraction "+e),ht(e>=t,()=>`startFraction must be no more than endFraction, but got startFraction ${t} and endFraction `+e)}(n=null==n?0:n,r=null==r?1:r);let i=0;return Promise.all(t.map(s=>(s.then(s=>{const o=n+ ++i/t.length*(r-n);return e(o),s}),s)))}async function su(t,e){null==e&&(e={});const n=null==e.fetchFunc?V().platform.fetch:e.fetchFunc,r=t.map(t=>n(t,e.requestInit,{isBinary:!0})),i=(null==e.onProgress?await Promise.all(r):await iu(r,e.onProgress,0,.5)).map(t=>t.arrayBuffer());return null==e.onProgress?await Promise.all(i):await iu(i,e.onProgress,.5,1)}async function ou(t,e="",n,r){return au(t=>su(t,{requestInit:r}))(t,e,n)}function au(t){return async(e,n="",r)=>{const i=e.map(()=>!1),s={},o=null!=r?r.map(()=>!1):[],a=[];if(e.forEach((t,e)=>{let n=0;t.weights.forEach(t=>{const l=ml["quantization"in t?t.quantization.dtype:t.dtype]*At(t.shape),u=()=>{i[e]=!0,null==s[e]&&(s[e]=[]),s[e].push({manifestEntry:t,groupOffset:n,sizeBytes:l})};null!=r?r.forEach((e,n)=>{e===t.name&&(u(),o[n]=!0)}):u(),a.push(t.name),n+=l})}),!o.every(t=>t)){const t=r.filter((t,e)=>!o[e]);throw new Error("Could not find weights in manifest with names: "+t.join(", ")+". \nManifest JSON has weights with names: "+a.join(", ")+".")}const l=i.reduce((t,e,n)=>(e&&t.push(n),t),[]),u=[];l.forEach(t=>{e[t].paths.forEach(t=>{const e=n+(n.endsWith("/")?"":"/")+t;u.push(e)})});const c=await t(u),h={};let d=0;return l.forEach(t=>{const n=e[t].paths.length;let r=0;for(let e=0;e<n;e++)r+=c[d+e].byteLength;const i=new ArrayBuffer(r),o=new Uint8Array(i);let a=0;for(let e=0;e<n;e++){const t=new Uint8Array(c[d+e]);o.set(t,a),a+=t.byteLength}s[t].forEach(t=>{const e=yl(i.slice(t.groupOffset,t.groupOffset+t.sizeBytes),[t.manifestEntry]);for(const n in e)h[n]=e[n]}),d+=n}),h}}El.registerSaveRouter(t=>V().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(eu.URL_SCHEME)?function(t="model"){return new eu(t)}(t.slice(eu.URL_SCHEME.length)):null);class lu{constructor(t,e){if(this.DEFAULT_METHOD="POST",null==e&&(e={}),this.weightPathPrefix=e.weightPathPrefix,this.onProgress=e.onProgress,null!=e.fetchFunc?(ht("function"==typeof e.fetchFunc,()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=e.fetchFunc):this.fetch=V().platform.fetch,ht(null!=t&&t.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(t)&&ht(2===t.length,()=>`URL paths for http must have a length of 2, (actual length is ${t.length}).`),this.path=t,null!=e.requestInit&&null!=e.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=e.requestInit||{}}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const e=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);e.body=new FormData,e.body.append("model.json",new Blob([JSON.stringify({modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,userDefinedMetadata:t.userDefinedMetadata,weightsManifest:[{paths:["./model.weights.bin"],weights:t.weightSpecs}]})],{type:"application/json"}),"model.json"),null!=t.weightData&&e.body.append("model.weights.bin",new Blob([t.weightData],{type:"application/octet-stream"}),"model.weights.bin");const n=await this.fetch(this.path,e);if(n.ok)return{modelArtifactsInfo:Cl(t),responses:[n]};throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+n.status+".")}async load(){const t=await this.fetch(this.path,this.requestInit);if(!t.ok)throw new Error(`Request to ${this.path} failed with status code `+t.status+". Please verify this URL points to the model JSON of the model to load.");let e;try{e=await t.json()}catch(c){let t=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?t+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":t+=" Please make sure the server is serving valid JSON for this request.",new Error(t)}const n=e.modelTopology,r=e.weightsManifest,i=e.generatedBy,s=e.convertedBy,o=e.format,a=e.userDefinedMetadata;if(null==n&&null==r)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);let l,u;if(null!=r){const t=await this.loadWeights(r);[l,u]=t}return{modelTopology:n,weightSpecs:l,weightData:u,userDefinedMetadata:a,generatedBy:i,convertedBy:s,format:o}}async loadWeights(t){const e=Array.isArray(this.path)?this.path[1]:this.path,[n,r]=function(t){const e=t.lastIndexOf("/"),n=t.lastIndexOf("?");return[t.substring(0,e)+"/",n>e?t.substring(n):""]}(e),i=this.weightPathPrefix||n,s=[];for(const a of t)s.push(...a.weights);const o=[];return t.forEach(t=>{t.paths.forEach(t=>{o.push(i+t+r)})}),[s,xl(await su(o,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress}))]}}function uu(t){return null!=t.match(lu.URL_SCHEME_REGEX)}lu.URL_SCHEME_REGEX=/^https?:\/\//;const cu=(t,e)=>{if("undefined"==typeof fetch&&(null==e||null==e.fetchFunc))return null;{let n=!0;if(n=Array.isArray(t)?t.every(t=>uu(t)):uu(t),n)return hu(t,e)}return null};function hu(t,e){return new lu(t,e)}function du(t,e){return hu(t,e)}El.registerSaveRouter(cu),El.registerLoadRouter(cu);class pu{constructor(t){this.modelArtifacts=t}async load(){return this.modelArtifacts}}class fu{constructor(t){this.saveHandler=t}async save(t){return this.saveHandler(t)}}function Au(t,e,n,r){return 1===arguments.length?null!=t.modelTopology||null!=t.weightSpecs?new pu(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new pu({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new pu({modelTopology:t,weightSpecs:e,weightData:n,trainingConfig:r}))}function mu(t){return new fu(t)}const gu=wi({oneHot_:function(t,e,n=1,r=0){if(e<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+e);const i=gi(t,"indices","oneHot","int32"),s=[...i.shape,e];return Se.runKernelFunc((t,o)=>(o([i]),qi(t.oneHot(i.flatten(),e,n,r),s)),{indices:i},null,gr,{depth:e,onValue:n,offValue:r})}}),yu=wi({confusionMatrix_:function(t,e,n){const r=gi(t,"labels","confusionMatrix"),i=gi(e,"predictions","confusionMatrix");ht(null==n||n>0&&Number.isInteger(n),()=>"If provided, numClasses must be a positive integer, but got "+n),ht(1===r.rank,()=>"Expected the rank of labels to be 1, but got "+r.rank),ht(1===i.rank,()=>"Expected the rank of predictions to be 1, but got "+i.rank),ht(r.shape[0]===i.shape[0],()=>`Mismatch in the number of examples: ${r.shape[0]} vs. ${i.shape[0]}. Labels and predictions should have the same number of elements.`),ht(n>0&&Number.isInteger(n),()=>"numClasses is required to be a positive integer, but got "+n);const s=gu(r.asType("int32"),n),o=gu(i.asType("int32"),n);return s.transpose().matMul(o).asType("int32")}});function wu(t,e,n){if(pt(t),null!=e&&3!==e.length)throw new Error("tensor3d() requires shape to have three numbers");const r=Ai(t,n);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==e)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Bi(t,e,r,n)}let bu;async function vu(t,e){let n=gi(t,"img","toPixels");if(!(t instanceof ue)){const t=n;n=t.toInt(),t.dispose()}if(2!==n.rank&&3!==n.rank)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${n.rank}.`);const[r,i]=n.shape.slice(0,2),s=2===n.rank?1:n.shape[2];if(s>4||2===s)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+s);const o=await n.data(),a=n.min(),l=n.max(),u=await Promise.all([a.data(),l.data()]),c=u[0][0],h=u[1][0];if(a.dispose(),l.dispose(),"float32"===n.dtype){if(c<0||h>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but got range [${c} - ${h}].`)}else{if("int32"!==n.dtype)throw new Error(`Unsupported type for toPixels: ${n.dtype}. Please use float32 or int32 tensors.`);if(c<0||h>255)throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but got range [${c} - ${h}].`)}const d="float32"===n.dtype?255:1,p=new Uint8ClampedArray(i*r*4);for(let f=0;f<r*i;++f){let t,e,n,r;1===s?(t=o[f]*d,e=o[f]*d,n=o[f]*d,r=255):3===s?(t=o[3*f]*d,e=o[3*f+1]*d,n=o[3*f+2]*d,r=255):4===s&&(t=o[4*f]*d,e=o[4*f+1]*d,n=o[4*f+2]*d,r=o[4*f+3]*d);const i=4*f;p[i+0]=Math.round(t),p[i+1]=Math.round(e),p[i+2]=Math.round(n),p[i+3]=Math.round(r)}if(null!=e){e.width=i,e.height=r;const t=e.getContext("2d"),n=new ImageData(p,i,r);t.putImageData(n,0,0)}return n!==t&&n.dispose(),p}const xu=wi({fromPixels_:function(t,e=3){if(e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==t)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,r=!1,i=!1,s=!1,o=!1;if(t.data instanceof Uint8Array)n=!0;else if("undefined"!=typeof ImageData&&t instanceof ImageData)r=!0;else if("undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement)i=!0;else if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement)s=!0;else{if(null==t.getContext)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+t.constructor.name);o=!0}if(i){const e=2;if(i&&t.readyState<e)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.")}if(null!=Y(ci,Se.backendName))return Se.runKernel(ci,{pixels:t},{numChannels:e});const[a,l]=i?[t.videoWidth,t.videoHeight]:[t.width,t.height];let u,c;if(o?u=t.getContext("2d").getImageData(0,0,a,l).data:r||n?u=t.data:(s||i)&&(null==bu&&(bu=document.createElement("canvas").getContext("2d")),bu.canvas.width=a,bu.canvas.height=l,bu.drawImage(t,0,0,a,l),u=bu.getImageData(0,0,a,l).data),4===e)c=new Int32Array(u);else{const t=a*l;c=new Int32Array(t*e);for(let n=0;n<t;n++)for(let t=0;t<e;++t)c[n*e+t]=u[4*n+t]}return wu(c,[l,a,e],"int32")}});function _u(t,e){if(t.rank<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.rank<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if("int32"!==e.dtype)throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[e.rank-1]>t.rank)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[e.rank-1]} vs. ${t.rank}`);if(0===t.size)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);const n=e.shape,r=n[n.length-1];let i=1;for(let u=0;u<n.length-1;++u)i*=n[u];const s=t.shape,o=n.slice();o.pop();let a=1;for(let u=r;u<t.rank;++u)a*=s[u],o.push(s[u]);const l=[...Qt(t.shape).map(t=>t/a),1].slice(0,r);return[o,i,a,l]}function Cu(t,e,n){const r=e.rank>1?e.shape[e.rank-1]:1,i=e.rank>1?e.rank-1:1,s="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+n.shape+`, indices.shape: ${e.shape}, shape: ${t}`+`, sliceDim: ${r}, and batchDim: ${i}.`;if(n.rank<i)throw new Error(s+` update.rank < ${i}. `);if(t.length<r+(n.rank-i))throw new Error(s+" Output shape length < "+(r+(n.rank-i)));if(n.rank!==i+t.length-r)throw new Error(s+" update.rank != "+(i+t.length-r));for(let o=0;o<i;++o)if(n.shape[o]!==e.shape[o])throw new Error(s+` updates.shape[${o}] (${n.shape[o]}) != indices.shape[${o}] (${e.shape[o]}).`);for(let o=0;o<n.rank-i;++o)if(n.shape[o+i]!==t[o+r])throw new Error(s+` updates.shape[${o+i}] (${n.shape[o+i]}) != shape[${o+i}] (${t[o+i]})`)}function Su(t,e,n){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if("int32"!==e.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: "+e.dtype);if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+n);if(0===n.length){if(0===e.size)throw new Error("Indices specified for empty output. indices shape: "+e.shape);if(0===t.size)throw new Error("Updates specified for empty output. updates shape: "+t.shape)}Cu(n,e,t)}function Eu(t,e,n){const r=e.shape.length,i=r>1?e.shape[r-1]:1,s=n.length;let o=1;for(let l=i;l<s;++l)o*=n[l];const a=i<1?1:i;return{sliceRank:i,numUpdates:At(e.shape)/a,sliceSize:o,strides:[...Qt(n.slice(0,i)),1],outputSize:At(n)}}class Bu{getClassName(){return this.constructor.className}static fromConfig(t,e){return new t(e)}}class ku{constructor(){this.classNameMap={}}static getMap(){return null==ku.instance&&(ku.instance=new ku),ku.instance}static register(t){ku.getMap().classNameMap[t.className]=[t,t.fromConfig]}}function Nu(t){ht(null!=t.className,()=>"Class being registered does not have the static className property defined."),ht("string"==typeof t.className,()=>"className is required to be a string, but got type "+typeof t.className),ht(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),ku.register(t)}const Iu=.1;function Fu(t,e,n){return null==n&&(n=Tu()),Ru(t,e,(t,e)=>Mu(t,e,n))}function Tu(){return 32===Se.backend.floatPrecision()?.001:Iu}function Ru(t,e,n){let r=!0;if((Tt(t)||Tt(e))&&(r=!1),Tt(t)&&Tt(e)&&(r=!0),r){const n=t.constructor.name,r=e.constructor.name;if(n!==r)throw new Error(`Arrays are of different type. Actual: ${n}. Expected: `+r)}if(Array.isArray(t)&&Array.isArray(e)){const n=Ai(t),r=Ai(e);if(!gt(n,r))throw new Error(`Arrays have different shapes. Actual: [${n}]. Expected: [${r}]`)}const i=Tt(t)?t:ft(t),s=Tt(e)?e:ft(e);if(i.length!==s.length)throw new Error(`Arrays have different lengths actual: ${i.length} vs expected: ${s.length}.\nActual:   ${i}.\nExpected: ${s}.`);for(let o=0;o<s.length;++o){const t=i[o],e=s[o];if(!n(t,e))throw new Error(`Arrays differ: actual[${o}] = ${t}, expected[${o}] = ${e}.\nActual:   ${i}.\nExpected: ${s}.`)}}function Ou(t,e){t().then(()=>e.fail(),()=>e())}function Du(t,e){const n="string"==typeof e||"number"==typeof e||"boolean"==typeof e?[e]:e;return Dt(t)||Dt(t[0])||Dt(e)||Dt(e[0])?Ru(t,n,(t,e)=>t==e):Ru(t,e,(t,e)=>Mu(t,e,0))}function Lu(t,e,n){if(null==n&&(n=Tu()),!Mu(t,e,n))throw new Error(`Numbers differ: actual === ${t}, expected === ${e}`)}function Mu(t,e,n){return!isFinite(t)&&!isFinite(e)||!(isNaN(t)||isNaN(e)||Math.abs(t-e)>n)}function Uu(t,e,n){for(let r=0;r<t.length;r++)if(t[r]<e||t[r]>n)throw new Error(`Value out of range:${t[r]} low: ${e}, high: ${n}`)}function Pu(t,e){expect(new Float32Array(t)).toEqual(new Float32Array(e))}const zu="2.1.0";function Qu(){V().set("PROD",!0)}function Hu(){V().set("DEBUG",!0)}function $u(){V().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function Vu(t){V().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(t+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function qu(){Se.disposeVariables()}function ju(){return Se}function Ku(){return Se.memory()}function Wu(t){return Se.profile(t)}function Gu(t,e){return Se.tidy(t,e)}function Xu(t){xe(t).forEach(t=>t.dispose())}function Yu(t){return Se.keep(t)}function Ju(t){return Se.time(t)}function Zu(t){return Se.setBackend(t)}function tc(){return Se.ready()}function ec(){return Se.backendName}function nc(t){Se.removeBackend(t)}function rc(t){return Se.findBackend(t)}function ic(t){return Se.findBackendFactory(t)}function sc(t,e,n=1){return Se.registerBackend(t,e,n)}function oc(){return Se.backend}function ac(t,e){V().setPlatform(t,e)}le=Vu;const lc=wi({abs_:function(t){const e=gi(t,"x","abs");return Se.runKernelFunc((t,n)=>(n([e]),"complex64"===e.dtype?t.complexAbs(e):t.abs(e)),{x:e},null,Ne)}}),uc=wi({acos_:function(t){const e=gi(t,"x","acos");return Se.runKernelFunc((t,n)=>{const r=t.acos(e);return n([e]),r},{x:e},null,Ie)}}),cc=wi({acosh_:function(t){const e=gi(t,"x","acosh");return Se.runKernelFunc((t,n)=>{const r=t.acosh(e);return n([e]),r},{x:e},null,Fe)}}),hc=wi({addN_:function(t){ht(Array.isArray(t),()=>"The argument passed to tf.addN() must be a list of tensors"),ht(t.length>=1,()=>"Must pass at least one tensor to tf.addN(), but got "+t.length);const e=t.map((t,e)=>gi(t,"tensors"+e,"addN")),n=e[0];return e.forEach(t=>{if(t.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(t=>{if(!gt(t.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}),Se.runKernelFunc((t,n)=>{const r=t.addN(e);return n(e),r},e,null,Re)}}),dc=wi({all_:function(t,e=null,n=!1){let r=gi(t,"x","all","bool");return Se.runKernelFunc(t=>{const i=St(e,r.shape);let s=i;const o=Yi(s,r.rank);null!=o&&(r=r.transpose(o),s=Zi(s.length,r.rank));const a=t.all(r,s);if(n){const t=Gi(a.shape,i);return a.reshape(t)}return a},{x:r},null,Oe,{axis:e,keepDims:n})}}),pc=wi({any_:function(t,e=null,n=!1){let r=gi(t,"x","any","bool");return Se.runKernelFunc(t=>{const i=St(e,r.shape);let s=i;const o=Yi(s,r.rank);null!=o&&(r=r.transpose(o),s=Zi(s.length,r.rank));const a=t.any(r,s);if(n){const t=Gi(a.shape,i);return a.reshape(t)}return a},{x:r},null,De,{axis:e,keepDims:n})}}),fc=wi({argMax_:function(t,e=0){let n=gi(t,"x","argMax");return Se.runKernelFunc((t,r)=>{r([n]);let i=St(e,n.shape);const s=Yi(i,n.rank);return null!=s&&(n=n.transpose(s),i=Zi(i.length,n.rank)),t.argMax(n,i[0])},{x:n},null,Le,{axis:e})}}),Ac=wi({argMin_:function(t,e=0){let n=gi(t,"x","argMin");return Se.runKernelFunc((t,r)=>{r([n]),null==e&&(e=0);let i=St(e,n.shape);const s=Yi(i,n.rank);return null!=s&&(n=n.transpose(s),i=Zi(i.length,n.rank)),t.argMin(n,i[0])},{x:n},null,Me,{axis:e})}}),mc=wi({asin_:function(t){const e=gi(t,"x","asin");return Se.runKernelFunc((t,n)=>{const r=t.asin(e);return n([e]),r},{x:e},null,Ue)}}),gc=wi({asinh_:function(t){const e=gi(t,"x","asinh");return Se.runKernelFunc((t,n)=>{const r=t.asinh(e);return n([e]),r},{x:e},null,Pe)}}),yc=wi({atan_:function(t){const e=gi(t,"x","atan");return Se.runKernelFunc((t,n)=>{const r=t.atan(e);return n([e]),r},{x:e},null,ze)}}),wc=wi({atan2_:function(t,e){let n=gi(t,"a","atan2"),r=gi(e,"b","atan2");return[n,r]=we(n,r),Se.runKernelFunc((t,e)=>{const i=t.atan2(n,r);return e([n,r]),i},{a:n,b:r},null,He)}}),bc=wi({atanh_:function(t){const e=gi(t,"x","atanh");return Se.runKernelFunc((t,n)=>{const r=t.atanh(e);return n([e]),r},{x:e},null,Qe)}}),vc=wi({avgPool_:function(t,e,n,r,i){const s=gi(t,"x","avgPool","float32");ht(As(n,1),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '1'`);let o=s,a=!1;3===s.rank&&(a=!0,o=qi(s,[1,s.shape[0],s.shape[1],s.shape[2]])),ht(4===o.rank,()=>`Error in avgPool: x must be rank 4 but got rank ${o.rank}.`),null!=i&&ht(yt(r),()=>`Error in avgPool: pad must be an integer when using, dimRoundingMode ${i} but got pad ${r}.`);let l=Se.runKernelFunc((t,s)=>{const a=ss(o.shape,e,n,1,r,i);return s([o]),1===a.filterWidth&&1===a.filterHeight&&gt(a.inShape,a.outShape)?o.clone():t.avgPool(o,a)},{x:o},null,$e,{filterSize:e,strides:n,pad:r,dimRoundingMode:i});return l=bi(l,s.dtype),a?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}}),xc=wi({avgPool3d_:function(t,e,n,r,i,s="NDHWC",o){null==o?o=[1,1,1]:Vu("dilations is deprecated, this field will be gone in v3.0.0.");const a=gi(t,"x","avgPool3d","float32");let l=a,u=!1;4===a.rank&&(u=!0,l=qi(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),ht(5===l.rank,()=>`Error in avgPool3d: x must be rank 5 but got rank ${l.rank}.`),ht("NDHWC"===s,()=>"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+s),ht(As(n,o),()=>`Error in avgPool3d: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`),null!=i&&ht(yt(r),()=>`Error in avgPool3d: pad must be an integer when using, dimRoundingMode ${i} but got pad ${r}.`);let c=Se.runKernelFunc((t,a)=>{null==o&&(o=[1,1,1]);const u=os(l.shape,e,n,o,r,i,s);return a([l]),t.avgPool3d(l,u)},{x:l},null,qe,{filterSize:e,strides:n,pad:r,dimRoundingMode:i,dataFormat:s,dilations:o});return c=bi(c,l.dtype),u?c.as4D(c.shape[1],c.shape[2],c.shape[3],c.shape[4]):c}}),_c=wi({tanh_:function(t){const e=gi(t,"x","tanh");return Se.runKernelFunc((t,n)=>{const r=t.tanh(e);return n([r]),r},{x:e},null,ni)}}),Cc=wi({basicLSTMCell_:function(t,e,n,r,i,s){const o=gi(t,"forgetBias","basicLSTMCell"),a=gi(e,"lstmKernel","basicLSTMCell"),l=gi(n,"lstmBias","basicLSTMCell"),u=gi(r,"data","basicLSTMCell"),c=gi(i,"c","basicLSTMCell"),h=gi(s,"h","basicLSTMCell"),d=Va([u,h],1),p=vs(d,a),f=$i(p,l),A=f.shape[1]/4,m=[f.shape[0],A],g=el(f,[0,0],m),y=el(f,[0,A],m),w=el(f,[0,2*A],m),b=el(f,[0,3*A],m),v=$i(vi(Ma(g),_c(y)),vi(c,Ma($i(o,w))));return[v,vi(_c(v),Ma(b))]}});function Sc(t){return null==t?null:0===t.rank?t.as1D():1===t.rank?t:2===t.rank?t.as4D(1,1,t.shape[0],t.shape[1]):3===t.rank?t.as4D(1,t.shape[0],t.shape[1],t.shape[2]):t}const Ec=wi({batchNorm_:function(t,e,n,r,i,s){null==s&&(s=.001);const o=gi(t,"x","batchNorm"),a=gi(e,"mean","batchNorm"),l=gi(n,"variance","batchNorm");let u,c;null!=i&&(u=gi(i,"scale","batchNorm")),null!=r&&(c=gi(r,"offset","batchNorm")),ht(a.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),ht(null==c||a.rank===c.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),ht(null==u||a.rank===u.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const h=function(t){let e;return e=0===t.rank||1===t.rank?t.as4D(1,1,1,t.size):2===t.rank?t.as4D(1,1,t.shape[0],t.shape[1]):3===t.rank?t.as4D(1,t.shape[0],t.shape[1],t.shape[2]):t,e}(o),d=Se.runKernelFunc((t,e)=>(e([h,a,l,u]),t.batchNorm(h,Sc(a),Sc(l),Sc(c),Sc(u),s)),{x:h,scale:u,offset:c,mean:a,variance:l},null,Fn,{varianceEpsilon:s});return qi(d,o.shape)}}),Bc=wi({batchNorm2d_:function(t,e,n,r,i,s){const o=gi(t,"x","batchNorm"),a=gi(e,"mean","batchNorm"),l=gi(n,"variance","batchNorm");let u,c;return null!=i&&(u=gi(i,"scale","batchNorm")),null!=r&&(c=gi(r,"offset","batchNorm")),ht(2===o.rank,()=>"Error in batchNorm3D: x must be rank 3 but got rank "+o.rank+"."),ht(2===a.rank||1===a.rank,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${a.rank}.`),ht(2===l.rank||1===l.rank,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),null!=u&&ht(2===u.rank||1===u.rank,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${u.rank}.`),null!=c&&ht(2===c.rank||1===c.rank,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${c.rank}.`),Ec(o,a,l,c,u,s)}}),kc=wi({batchNorm3d_:function(t,e,n,r,i,s){const o=gi(t,"x","batchNorm"),a=gi(e,"mean","batchNorm"),l=gi(n,"variance","batchNorm");let u,c;return null!=i&&(u=gi(i,"scale","batchNorm")),null!=r&&(c=gi(r,"offset","batchNorm")),ht(3===o.rank,()=>"Error in batchNorm3D: x must be rank 3 but got rank "+o.rank+"."),ht(3===a.rank||1===a.rank,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${a.rank}.`),ht(3===l.rank||1===l.rank,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),null!=u&&ht(3===u.rank||1===u.rank,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${u.rank}.`),null!=c&&ht(3===c.rank||1===c.rank,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${c.rank}.`),Ec(o,a,l,c,u,s)}}),Nc=wi({batchNorm4d_:function(t,e,n,r,i,s){const o=gi(t,"x","batchNorm"),a=gi(e,"mean","batchNorm"),l=gi(n,"variance","batchNorm");let u,c;return null!=i&&(u=gi(i,"scale","batchNorm")),null!=r&&(c=gi(r,"offset","batchNorm")),ht(4===o.rank,()=>"Error in batchNorm4D: x must be rank 4 but got rank "+o.rank+"."),ht(4===a.rank||1===a.rank,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${a.rank}.`),ht(4===l.rank||1===l.rank,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),null!=u&&ht(4===u.rank||1===u.rank,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${u.rank}.`),null!=c&&ht(4===c.rank||1===c.rank,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${c.rank}.`),Ec(o,a,l,c,u,s)}}),Ic=wi({broadcastTo_:function(t,e){let n=gi(t,"broadcastTo","x");const r=n.shape;if(e.some(t=>!(t>0)||t%1!=0))throw new Error(`broadcastTo(): Invalid broadcast shape [${e}].`);if(e.length<n.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${n.rank}.`);if(e.length>n.rank){const t=n.shape.slice();for(;t.length<e.length;)t.unshift(1);n=qi(n,t)}const i=n.shape,s=Array.from(e);for(let o=e.length-1;o>=0;o--)if(i[o]===e[o])s[o]=1;else if(1!==n.shape[o])throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${e}].`);return 0===s.map((t,e)=>t>1?e:-1).filter(t=>t>=0).length?ia(n):Se.runKernelFunc(t=>t.tile(n,s),{x:n},null,Ge,{shape:e,inputShape:i})}});function Fc(t,e="float32",n){return e=e||"float32",Wt(t),new se(t,e,n)}const Tc=wi({ceil_:function(t){const e=gi(t,"x","ceil");return Se.runKernelFunc(t=>t.ceil(e),{x:e},null,Ye)}}),Rc=wi({clipByValue_:function(t,e,n){const r=gi(t,"x","clipByValue");return ht(e<=n,()=>`Error in clip: min (${e}) must be less than or equal to max (${n}).`),Se.runKernelFunc((t,i)=>{const s=t.clip(r,e,n);return i([r]),s},{x:r},null,Je,{clipValueMin:e,clipValueMax:n})}}),Oc=wi({concat1d_:function(t){return Va(t,0)}}),Dc=wi({concat2d_:function(t,e){return Va(t,e)}}),Lc=wi({concat3d_:function(t,e){return Va(t,e)}}),Mc=wi({concat4d_:function(t,e){return Va(t,e)}}),Uc=wi({conv1d_:function(t,e,n,r,i="NWC",s=1,o){const a=gi(t,"x","conv1d"),l=gi(e,"filter","conv1d");let u=a,c=!1;2===a.rank&&(c=!0,u=qi(a,[1,a.shape[0],a.shape[1]])),ht(3===u.rank,()=>`Error in conv1d: input must be rank 3, but got rank ${u.rank}.`),ht(3===l.rank,()=>"Error in conv1d: filter must be rank 3, but got rank "+l.rank+"."),null!=o&&ht(yt(r),()=>`Error in conv1d: pad must be an integer when using, dimRoundingMode ${o} but got pad ${r}.`),ht(u.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${u.shape[2]}) must match input depth for filter ${l.shape[1]}.`),ht(As(n,s),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${s}'`),ht("NWC"===i,()=>`Error in conv1d: got dataFormat of ${i} but only NWC is currently supported.`);const h=qi(l,[1,l.shape[0],l.shape[1],l.shape[2]]),d=qi(u,[u.shape[0],1,u.shape[1],u.shape[2]]),p=Ps(d,h,[1,n],r,"NHWC",[1,s],o);return qi(p,c?[p.shape[2],p.shape[3]]:[p.shape[0],p.shape[2],p.shape[3]])}}),Pc=wi({conv2dTranspose_:function(t,e,n,r,i,s){const o=gi(t,"x","conv2dTranspose"),a=gi(e,"filter","conv2dTranspose");return Ms(n,o,a,r,i,"NHWC",s)}}),zc=wi({conv3d_:function(t,e,n,r,i="NDHWC",s=[1,1,1]){const o=gi(t,"x","conv3d"),a=gi(e,"filter","conv3d");let l=o,u=!1;4===o.rank&&(u=!0,l=qi(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),ht(5===l.rank,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),ht(5===a.rank,()=>"Error in conv3d: filter must be rank 5, but got rank "+a.rank+"."),ht(l.shape[4]===a.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${a.shape[3]}.`),ht(As(n,s),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),ht("NDHWC"===i,()=>`Error in conv3d: got dataFormat of ${i} but only NDHWC is currently supported.`);const c=Se.runKernelFunc((t,e)=>{const i=ls(l.shape,a.shape,n,s,r),o=t.conv3d(l,a,i);return e([l,a]),o},{x:l,filter:a},null,sn,{strides:n,pad:r,dataFormat:i,dilations:s});return u?c.as4D(c.shape[1],c.shape[2],c.shape[3],c.shape[4]):c}}),Qc=wi({conv3dTranspose_:function(t,e,n,r,i){const s=gi(t,"x","conv3dTranspose"),o=gi(e,"filter","conv3dTranspose");return Hs(n,s,o,r,i)}}),Hc=wi({depthToSpace_:function(t,e,n="NHWC"){const r=gi(t,"x","depthToSpace"),i="NHWC"===n?r.shape[1]:r.shape[2],s="NHWC"===n?r.shape[2]:r.shape[3],o="NHWC"===n?r.shape[3]:r.shape[1];return ht(i*e>=0,()=>`Negative dimension size caused by overflow when multiplying\n    ${i} and ${e}  for depthToSpace with input shape\n    ${r.shape}`),ht(s*e>=0,()=>`Negative dimension size caused by overflow when multiplying\n    ${s} and ${e} for depthToSpace with input shape\n        ${r.shape}`),ht(o%(e*e)==0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${o} for depthToSpace with input shape ${r.shape}`),Se.runKernelFunc(t=>t.depthToSpace(r,e,n),{x:r},null,dn,{blockSize:e,dataFormat:n})}}),$c=wi({depthwiseConv2d_:function(t,e,n,r,i="NHWC",s=[1,1],o){const a=gi(t,"x","depthwiseConv2d"),l=gi(e,"filter","depthwiseConv2d");let u=a,c=!1;3===a.rank&&(c=!0,u=qi(a,[1,a.shape[0],a.shape[1],a.shape[2]])),ht(4===u.rank,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${u.rank}.`),ht(4===l.rank,()=>"Error in depthwiseConv2d: filter must be rank 4, but got rank "+l.rank+"."),ht(u.shape[3]===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${u.shape[3]}) must match the inChannels dimension in filter ${l.shape[2]}.`),null!=o&&ht(yt(r),()=>`Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode ${o} but got pad ${r}.`);const h=Se.runKernelFunc((t,e)=>{null==s&&(s=[1,1]),ht(As(n,s),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`);const i=as(u.shape,l.shape,n,s,r,o,!0),a=t.depthwiseConv2D(u,l,i);return e([u,l]),a},{x:u,filter:l},null,pn,{strides:n,pad:r,dataFormat:i,dilations:s,dimRoundingMode:o});return c?qi(h,[h.shape[1],h.shape[2],h.shape[3]]):h}}),Vc=wi({diag_:function(t){const e=gi(t,"x","diag").flatten();return Se.runKernelFunc(n=>{const r=n.diag(e),i=[...t.shape,...t.shape];return qi(r,i)},{x:e},null,mn)}}),qc=wi({dilation2d_:function(t,e,n,r,i=[1,1],s="NHWC"){const o=gi(t,"x","dilation2d"),a=gi(e,"filter","dilation2d");ht(3===o.rank||4===o.rank,()=>"Error in dilation2d: input must be rank 3 or 4, but got rank "+o.rank+"."),ht(3===a.rank,()=>"Error in dilation2d: filter must be rank 3, but got rank "+a.rank+"."),ht("NHWC"===s,()=>"Error in dilation2d: Only NHWC is currently supported, but got dataFormat of "+s);let l=o,u=!1;3===o.rank&&(l=qi(o,[1,o.shape[0],o.shape[1],o.shape[2]]),u=!0);const c=Se.runKernel(gn,{x:l,filter:a},{strides:n,pad:r,dilations:i});return u?qi(c,[c.shape[1],c.shape[2],c.shape[3]]):c}}),jc=wi({divNoNan_:function(t,e){let n=gi(t,"a","div"),r=gi(e,"b","div");[n,r]=we(n,r);const i=Si(n,r),s=Pi(i),o=r.equal(s);return Fs(o,s,i)}}),Kc=wi({dot_:function(t,e){const n=gi(t,"t1","dot"),r=gi(e,"t2","dot");ht(!(1!==n.rank&&2!==n.rank||1!==r.rank&&2!==r.rank),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);const i=1===n.rank?n.size:n.shape[1],s=1===r.rank?r.size:r.shape[0];if(ht(i===s,()=>`Error in dot: inner dimensions of inputs must match, but got ${i} and ${s}.`),1===n.rank&&1===r.rank){const t=qi(n,[1,-1]),e=qi(r,[-1,1]),i=vs(t,e);return qi(i,[])}if(1===n.rank&&2===r.rank){const t=qi(n,[1,-1]),e=qi(r,[r.shape[0],r.shape[1]]),i=vs(t,e);return qi(i,[i.size])}if(2===n.rank&&1===r.rank){const t=qi(r,[-1,1]),e=vs(n,t);return qi(e,[e.size])}{const t=qi(r,[r.shape[0],r.shape[1]]);return vs(n,t)}}}),Wc=wi({elu_:function(t){const e=gi(t,"x","elu");return Se.runKernelFunc((t,n)=>{const r=t.elu(e);return n([r]),r},{x:e},null,vn)}}),Gc=wi({erf_:function(t){let e=gi(t,"x","erf");return ht("int32"===e.dtype||"float32"===e.dtype,()=>"Input dtype must be `int32` or `float32`."),"int32"===e.dtype&&(e=e.toFloat()),Se.runKernelFunc((t,n)=>{const r=t.erf(e);return n([e]),r},{x:e},null,_n)}}),Xc=wi({expm1_:function(t){const e=gi(t,"x","expm1");return Se.runKernelFunc((t,n)=>{const r=t.expm1(e);return n([e]),r},{x:e},null,En)}}),Yc=wi({eye_:function(t,e,n,r="float32"){null==e&&(e=t);const i=Fc([t,e],r),s=t<=e?t:e;for(let a=0;a<s;++a)i.set(1,a,a);const o=i.toTensor().as2D(t,e);if(null==n)return o;if(1===n.length)return co(il(o,0),[n[0],1,1]);if(2===n.length)return co(il(il(o,0),0),[n[0],n[1],1,1]);if(3===n.length)return co(il(il(il(o,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}}),Jc=wi({fft_:function(t){return ht("complex64"===t.dtype,()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`),Se.runKernelFunc(e=>{const n=t.shape[t.shape.length-1],r=t.as2D(t.size/n,n);return e.fft(r).reshape(t.shape)},{input:t},null,Bn)}});function Zc(t,e,n){return Se.runKernelFunc(r=>r.fill(t,e,n),{},null,In,{shape:t,value:e,dtype:n})}const th=wi({ifft_:function(t){return ht("complex64"===t.dtype,()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`),Se.runKernelFunc(e=>{const n=t.shape[t.shape.length-1],r=t.as2D(t.size/n,n);return e.ifft(r).reshape(t.shape)},{input:t},null,Mn)}}),eh=wi({imag_:function(t){const e=gi(t,"input","imag");return Se.runKernelFunc(t=>t.imag(e),{input:e},null,Un)}}),nh=wi({real_:function(t){const e=gi(t,"input","real");return Se.runKernelFunc(t=>t.real(e),{input:e},null,Cr)}}),rh=wi({irfft_:function(t){const e=t.shape[t.shape.length-1],n=t.size/e;let r;if(e<=2){const i=qi(t,[n,e]);r=th(i)}else{const i=[n,2*(e-1)],s=qi(nh(t),[n,e]),o=qi(eh(t),[n,e]),a=sa(el(s,[0,1],[n,e-2]),1),l=vi(sa(el(o,[0,1],[n,e-2]),1),ki(-1)),u=Va([s,a],1),c=Va([o,l],1),h=qi($o(u,c),[i[0],i[1]]);r=th(h)}if(r=nh(r),3===t.rank&&0!==t.shape[0]){const e=r,n=t.shape[0];r=qi(r,[n,r.shape[0]/n,r.shape[1]]),e.dispose()}return r}}),ih=wi({isFinite_:function(t){const e=gi(t,"x","isFinite");return Se.runKernelFunc(t=>t.isFinite(e),{x:e},null,Pn)}}),sh=wi({isInf_:function(t){const e=gi(t,"x","isInf");return Se.runKernelFunc(t=>t.isInf(e),{x:e},null,zn)}}),oh=wi({isNaN_:function(t){const e=gi(t,"x","isNaN");return Se.runKernelFunc(t=>t.isNaN(e),{x:e},null,Qn)}}),ah=wi({leakyRelu_:function(t,e=.2){const n=gi(t,"x","leakyRelu");return pl(vi(ki(e),n),n)}});function lh(t,e,n){if(n<=0)throw new Error("The number of values should be positive.");return Se.runKernelFunc(r=>r.linspace(t,e,n),{},null,Vn,{start:t,stop:e,num:n})}const uh=wi({localResponseNormalization_:function(t,e=5,n=1,r=1,i=.5){const s=gi(t,"x","localResponseNormalization");ht(4===s.rank||3===s.rank,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ${s.rank}.`),ht(yt(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let o=s,a=!1;3===s.rank&&(a=!0,o=qi(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const l=Se.runKernelFunc((t,s)=>{const a=t.localResponseNormalization4D(o,e,n,r,i);return s([o,a]),a},{x:o},null,Yn,{depthRadius:e,bias:n,alpha:r,beta:i});return a?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}}),ch=wi({log1p_:function(t){const e=gi(t,"x","log1p");return Se.runKernelFunc((t,n)=>{const r=t.log1p(e);return n([e]),r},{x:e},null,jn)}});function hh(t){return ht(Pt(t),()=>"The f passed in grad(f) must be a function"),(e,n)=>{const r=gi(e,"x","tf.grad",null),i=null!=n?gi(n,"dy","tf.grad"):null;return Se.tidy(()=>{const{value:e,grads:n}=Se.gradients(()=>t(r),[r],i);return null!=i&&dt(e.shape,i.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),gh(n),n[0]})}}function dh(t){return ht(Pt(t),()=>"The f passed in grads(f) must be a function"),(e,n)=>{ht(Array.isArray(e),()=>"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s");const r=yi(e,"args","tf.grads",null),i=null!=n?gi(n,"dy","tf.grads"):null;return Se.tidy(()=>{const{value:e,grads:n}=Se.gradients(()=>t(...r),r,i);return null!=i&&dt(e.shape,i.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),gh(n),n})}}function ph(t){return ht(Pt(t),()=>"The f passed in valueAndGrad(f) must be a function"),(e,n)=>{ht(e instanceof ue,()=>"The x passed in valueAndGrad(f)(x) must be a tensor"),ht(null==n||n instanceof ue,()=>"The dy passed in valueAndGrad(f)(x, dy) must be a tensor");const{grads:r,value:i}=Se.gradients(()=>t(e),[e],n);return gh(r),{grad:r[0],value:i}}}function fh(t){return ht(Pt(t),()=>"The f passed in valueAndGrads(f) must be a function"),(e,n)=>{ht(Array.isArray(e)&&e.every(t=>t instanceof ue),()=>"The args passed in valueAndGrads(f)(args) must be array of tensors"),ht(null==n||n instanceof ue,()=>"The dy passed in valueAndGrads(f)(args, dy) must be a tensor");const r=Se.gradients(()=>t(...e),e,n);return null!=n&&dt(r.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),gh(r.grads),r}}function Ah(t,e){ht(Pt(t),()=>"The f passed in variableGrads(f) must be a function"),ht(null==e||Array.isArray(e)&&e.every(t=>t instanceof ce),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=null!=e;if(!n){e=[];for(const t in Se.registeredVariables)e.push(Se.registeredVariables[t])}const r=n?e.filter(t=>!t.trainable):null,i=e.length;ht((e=e.filter(t=>t.trainable)).length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${i} variables is trainable.`);const{value:s,grads:o}=Se.gradients(t,e,null,!0);ht(o.some(t=>null!=t),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),ht(0===s.rank,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${s.rank} tensor`);const a={};return e.forEach((t,e)=>{null!=o[e]&&(a[t.name]=o[e])}),null!=r&&r.forEach(t=>a[t.name]=null),{value:s,grads:a}}function mh(t){return Se.customGrad(t)}function gh(t){if(t.filter(t=>null==t).length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that\n    the f you passed encloses all operations that lead from x to y.")}const yh=wi({logSigmoid_:function(t){const e=gi(t,"x","logSigmoid");return mh(t=>({value:Ei(Ei(t).softplus()),gradFunc:e=>vi(e,Ma(Ei(t)))}))(e)}}),wh=wi({max_:function(t,e=null,n=!1){const r=gi(t,"x","max");return Se.runKernelFunc((t,i)=>{let s=St(e,r.shape);const o=Yi(s,r.rank);let a=r;null!=o&&(a=Ws(r,o),s=Zi(s.length,a.rank));const l=t.max(a,s);null!=o&&a.dispose();let u=l;if(n){const t=Gi(u.shape,St(e,r.shape));u=qi(u,t),l.dispose()}return i([r,u]),u},{x:r},null,Zn,{reductionIndices:e,keepDims:n})}}),bh=wi({logSoftmax_:function(t,e=-1){const n=gi(t,"logits","logSoftmax");if(-1===e&&(e=n.rank-1),e!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${e}`);return Se.runKernelFunc((n,r)=>{const i=wh(t,e,!0),s=Fi(t,i),o=s.toFloat().sub(s.exp().sum(e,!0).log());return r([o]),o},{logits:n},null,Xn,{axis:e})}}),vh=wi({logSumExp_:function(t,e=null,n=!1){const r=gi(t,"x","logSumExp"),i=St(e,r.shape),s=wh(r,i,!0),o=Fi(r,s),a=ro(o),l=ts(a,i),u=Wo(l),c=$i(qi(s,u.shape),u);if(n){const t=Gi(c.shape,i);return qi(c,t)}return c}}),xh=wi({logicalOr_:function(t,e){const n=gi(t,"a","logicalOr","bool"),r=gi(e,"b","logicalOr","bool");return Li(n.shape,r.shape),Se.runKernelFunc(t=>t.logicalOr(n,r),{a:n,b:r},null,Gn)}}),_h=wi({logicalXor_:function(t,e){const n=gi(t,"a","logicalXor","bool"),r=gi(e,"b","logicalXor","bool");return Li(n.shape,r.shape),Is(xh(t,e),ua(Is(t,e)))}}),Ch=wi({maxPool_:function(t,e,n,r,i){const s=gi(t,"x","maxPool");let o=s,a=!1;3===s.rank&&(a=!0,o=qi(s,[1,s.shape[0],s.shape[1],s.shape[2]])),ht(4===o.rank,()=>`Error in maxPool: input must be rank 4 but got rank ${o.rank}.`),ht(As(n,1),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '1'`),null!=i&&ht(yt(r),()=>`Error in maxPool: pad must be an integer when using, dimRoundingMode ${i} but got pad ${r}.`);const l=Se.runKernelFunc((t,s)=>{const a=ss(o.shape,e,n,1,r,i);let l;return l=1===a.filterWidth&&1===a.filterHeight&&gt(a.inShape,a.outShape)?o.clone():t.maxPool(o,a),s([o,l]),l},{x:o},null,er,{filterSize:e,strides:n,pad:r,dimRoundingMode:i});return a?qi(l,[l.shape[1],l.shape[2],l.shape[3]]):l}}),Sh=wi({maxPool3d_:function(t,e=[1,1,1],n,r,i,s="NDHWC",o){null==o?o=[1,1,1]:Vu("dilations is deprecated, this field will be gone in v3.0.0.");const a=gi(t,"x","maxPool3d");let l=a,u=!1;4===a.rank&&(u=!0,l=a.as5D(1,a.shape[0],a.shape[1],a.shape[2],a.shape[3])),ht(5===l.rank,()=>`Error in maxPool3d: x must be rank 5 but got rank ${l.rank}.`),ht("NDHWC"===s,()=>"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+s),ht(As(n,o),()=>`Error in maxPool3d: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`),null!=i&&ht(yt(r),()=>`Error in maxPool3d: pad must be an integer when using, dimRoundingMode ${i} but got pad ${r}.`);const c=Se.runKernelFunc((t,a)=>{null==o&&(o=[1,1,1]);const u=os(l.shape,e,n,o,r,i,s),c=t.maxPool3d(l,u);return a([l,c]),c},{x:l},null,rr,{filterSize:e,strides:n,pad:r,dimRoundingMode:i,dataFormat:s,dilations:o});return u?qi(c,[c.shape[1],c.shape[2],c.shape[3],c.shape[4]]):c}}),Eh=wi({maxPoolWithArgmax_:function(t,e,n,r,i=!1){const s=gi(t,"x","maxPoolWithArgmax"),o=Se.runKernel(sr,{x:s},{filterSize:e,strides:n,pad:r,includeBatchInIndex:i});return{result:o[0],indexes:o[1]}}}),Bh=wi({mean_:function(t,e=null,n=!1){const r=gi(t,"x","mean"),i=St(e,r.shape),s=At(Wi(r.shape,i)[1]);return mh(t=>{const r=ki(s),o=r.dtype===t.dtype?t:bi(t,r.dtype),a=Si(o,r);return{value:ts(a,e,n),gradFunc:e=>{const n=t.shape.slice();i.forEach(t=>{n[t]=1});const r=qi(e,n);return Si(vi(r,Ya(t.shape,"float32")),s)}}})(r)}}),kh=wi({min_:function(t,e=null,n=!1){const r=gi(t,"x","min");return Se.runKernelFunc((t,i)=>{const s=St(e,r.shape);let o=s;const a=Yi(o,r.rank);let l=r;null!=a&&(l=Ws(r,a),o=Zi(o.length,r.rank));const u=t.min(l,o);null!=a&&l.dispose();let c=u;if(n){const t=Gi(c.shape,s);c=qi(u,t),u.dispose()}return i([r,c]),c},{x:r},null,ar,{axis:e,keepDims:n})}}),Nh=wi({minimum_:function(t,e){let n=gi(t,"a","minimum"),r=gi(e,"b","minimum");return[n,r]=we(n,r),"bool"===n.dtype&&(n=bi(n,"int32"),r=bi(r,"int32")),Li(n.shape,r.shape),Se.runKernelFunc((t,e)=>{const i=t.minimum(n,r);return e([n,r]),i},{a:n,b:r},null,lr)}}),Ih=wi({mod_:function(t,e){let n=gi(t,"a","mod"),r=gi(e,"b","mod");return[n,r]=we(n,r),Se.runKernelFunc((t,e)=>{const i=t.mod(n,r);return e([n,r]),i},{a:n,b:r},null,ur)}}),Fh=wi({moments_:function(t,e=null,n=!1){const r=St(e,(t=gi(t,"x","moments")).shape),i=Bh(t,r,n);let s=i.shape;n||(s=Gi(i.shape,r));const o=Ii(Fi(bi(t,"float32"),qi(i,s)));return{mean:i,variance:Bh(o,r,n)}}}),Th=wi({multiRNNCell_:function(t,e,n,r){const i=gi(e,"data","multiRNNCell"),s=yi(n,"c","multiRNNCell"),o=yi(r,"h","multiRNNCell");let a=i;const l=[];for(let h=0;h<t.length;h++){const e=t[h](a,s[h],o[h]);l.push(e[0]),l.push(e[1]),a=e[1]}const u=[],c=[];for(let h=0;h<l.length;h+=2)u.push(l[h]),c.push(l[h+1]);return[u,c]}}),Rh=wi({multinomial_:function(t,e,n,r=!1){const i=gi(t,"logits","multinomial"),s=i.size,o=i.rank;if(s<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+s+".");if(o>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+o);n=n||Math.random();const a=1===o?i.as2D(1,-1):i,l=Se.runKernelFunc(t=>t.multinomial(a,r,e,n),{logits2D:a});return 1===o?l.as1D():l}}),Oh=wi({notEqual_:function(t,e){let n=gi(t,"a","notEqual"),r=gi(e,"b","notEqual");return[n,r]=we(n,r),Li(n.shape,r.shape),Se.runKernelFunc(t=>t.notEqual(n,r),{a:n,b:r},null,dr)}}),Dh=wi({onesLike_:function(t){const e=gi(t,"x","onesLike");return Se.runKernelFunc((t,n)=>{if("complex64"===e.dtype){const t=Dh(nh(e)),n=Pi(eh(e));return $o(t,n)}return t.onesLike(e)},{x:e},null,mr)}}),Lh=wi({outerProduct_:function(t,e){const n=gi(t,"v1","outerProduct"),r=gi(e,"v2","outerProduct");ht(1===n.rank&&1===r.rank,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${n.rank} and ${r.rank}.`);const i=qi(n,[-1,1]),s=qi(r,[1,-1]);return vs(i,s)}}),Mh=wi({pad1d_:function(t,e,n=0){return ht(2===e.length,()=>"Invalid number of paddings. Must be length of 2."),ba(t,[e],n)}}),Uh=wi({pad2d_:function(t,e,n=0){return ht(2===e.length&&2===e[0].length&&2===e[1].length,()=>"Invalid number of paddings. Must be length of 2 each."),ba(t,e,n)}}),Ph=wi({pad3d_:function(t,e,n=0){return ht(3===e.length&&2===e[0].length&&2===e[1].length&&2===e[2].length,()=>"Invalid number of paddings. Must be length of 2 each."),ba(t,e,n)}}),zh=wi({pad4d_:function(t,e,n=0){return ht(4===e.length&&2===e[0].length&&2===e[1].length&&2===e[2].length&&2===e[3].length,()=>"Invalid number of paddings. Must be length of 2 each."),ba(t,e,n)}}),Qh=wi({pool_:function(t,e,n,r,i,s){null==i&&(i=[1,1]),null==s&&(s=1),0===r&&(r="valid");const o=gi(t,"x","maxPool");let a=o,l=!1;3===o.rank&&(l=!0,a=qi(o,[1,o.shape[0],o.shape[1],o.shape[2]])),ht(As(s,i),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${s} and dilations '${i}'`);const u=ss(a.shape,e,s,i,r),c=[u.dilationHeight,u.dilationWidth];let h;h="same"===r?function(t,e){const n=t.map((t,n)=>t+(t-1)*(e[n]-1)).map(t=>t-1),r=n.map(t=>Math.floor(t/2)),i=n.map((t,e)=>t-r[e]);return n.map((t,e)=>[r[e],i[e]])}([u.filterHeight,u.filterWidth],c):[[0,0],[0,0]];const d=1===c[0]&&1===c[1],[p,f]=function(t,e,n){const r=n.map(t=>t[0]),i=n.map(t=>t[1]),s=t.concat(r,i),o=e.map((t,e)=>(t-s[e]%t)%t),a=i.map((t,e)=>t+o[e]);return[e.map((t,e)=>[r[e],a[e]]),e.map((t,e)=>[0,o[e]])]}([u.inHeight,u.inWidth],c,h),A=d?r:"valid",m=d?a:_s(a,c,p),g=("avg"===n?()=>vc(m,e,s,A):()=>Ch(m,e,s,A))(),y=d?g:Pa(g,c,f);return l?qi(y,[y.shape[1],y.shape[2],y.shape[3]]):y}}),Hh=wi({prelu_:function(t,e){const n=gi(t,"x","prelu"),r=gi(e,"alpha","prelu");return Se.runKernelFunc((t,e)=>{const i=t.prelu(n,r);return e([n,r]),i},{x:n,alpha:r},null,vr)}});function $h(t,e=!1){console.log(t.toString(e))}const Vh=wi({prod_:function(t,e=null,n=!1){let r=gi(t,"x","prod");return Se.runKernelFunc(t=>{"bool"===r.dtype&&(r=r.toInt());const i=St(e,r.shape),s=Yi(i,r.rank);let o=i,a=r;null!=s&&(a=r.transpose(s),o=Zi(o.length,r.rank));let l=t.prod(a,o);if(n){const t=Gi(l.shape,i);l=l.reshape(t)}return l},{x:r},null,xr,{axis:e,keepDims:n})}}),qh=wi({rand_:function(t,e,n){const r=At(t);let i=null;if(null==n||"float32"===n)i=new Float32Array(r);else if("int32"===n)i=new Int32Array(r);else{if("bool"!==n)throw new Error("Unknown data type "+n);i=new Uint8Array(r)}for(let s=0;s<r;s++)i[s]=e();return Se.makeTensor(i,t,n)}});var jh=n("YSVl");class Kh{constructor(t,e,n,r,i){this.mean=t,this.stdDev=e,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);const s=i||Math.random();this.random=jh.alea(s.toString())}nextValue(){if(!isNaN(this.nextVal)){const t=this.nextVal;return this.nextVal=NaN,t}let t,e,n=!1;for(;!n;){let r,i,s;do{r=2*this.random()-1,i=2*this.random()-1,s=r*r+i*i}while(s>=1||0===s);const o=Math.sqrt(-2*Math.log(s)/s);t=this.mean+this.stdDev*r*o,e=this.mean+this.stdDev*i*o,this.truncated&&!this.isValidTruncated(t)||(n=!0)}return this.truncated&&!this.isValidTruncated(e)||(this.nextVal=this.convertValue(e)),this.convertValue(t)}convertValue(t){return null==this.dtype||"float32"===this.dtype?t:Math.round(t)}isValidTruncated(t){return t<=this.upper&&t>=this.lower}}class Wh{constructor(t,e,n,r){this.alpha=t,this.beta=1/e,this.dtype=n;const i=r||Math.random();this.randu=jh.alea(i.toString()),this.randn=new Kh(0,1,n,!1,this.randu()),this.d=t<1?t+2/3:t-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let t,e,n,r,i,s;for(;;){do{r=this.randn.nextValue(),s=1+this.c*r}while(s<=0);if(s*=s*s,t=r*r,e=1-.331*t*t,n=.5*t+this.d*(1-s+Math.log(s)),i=this.randu(),i<e||Math.log(i)<n)break}return s*=1/this.beta*this.d,this.alpha<1&&(s*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(s)}convertValue(t){return"float32"===this.dtype?t:Math.round(t)}}class Gh{constructor(t=0,e=1,n,r){if(this.canReturnFloat=()=>null==this.dtype||"float32"===this.dtype,this.min=t,this.range=e-t,this.dtype=n,null==r&&(r=Math.random()),"number"==typeof r&&(r=r.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${t} - ${e} <= 1 and dtype is not float`);this.random=jh.alea(r)}convertValue(t){return this.canReturnFloat()?t:Math.round(t)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}const Xh=wi({randomGamma_:function(t,e,n=1,r="float32",i){if(null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error("Unsupported data type "+r);const s=new Wh(e,n,r,i),o=Fc(t,r);for(let a=0;a<o.values.length;a++)o.values[a]=s.nextValue();return o.toTensor()}}),Yh=wi({randomNormal_:function(t,e=0,n=1,r,i){if(null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);const s=new Kh(e,n,r,!1,i),o=Fc(t,r);for(let a=0;a<o.values.length;a++)o.values[a]=s.nextValue();return o.toTensor()}}),Jh=wi({randomUniform_:function(t,e=0,n=1,r="float32",i){const s=Fc(t,r),o=new Gh(e,n,null,i);for(let a=0;a<s.values.length;a++)s.values[a]=o.nextValue();return s.toTensor()}});function Zh(t,e){pt(t);const n=Ai(t,e);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Bi(t,null,n,e)}function td(t,e,n=1,r="float32"){if(0===n)throw new Error("Cannot have a step of zero");return Se.runKernelFunc(()=>{if(t===e||t<e&&n<0||e<t&&n>1)return Vo([0],r);const i=qt(Math.abs(Math.ceil((e-t)/n)),r);e<t&&1===n&&(n=-1),i[0]=t;for(let t=1;t<i.length;t++)i[t]=i[t-1]+n;return Zh(i,r)},{},null,_r,{start:t,stop:e,step:n,dtype:r})}const ed=wi({reciprocal_:function(t){const e=gi(t,"x","reciprocal");return Se.runKernelFunc((t,n)=>{const r=t.reciprocal(e);return n([e]),r},{x:e},null,Sr)}}),nd=wi({relu_:function(t){const e=gi(t,"x","relu");return Se.runKernelFunc((t,n)=>(n([e]),"bool"===e.dtype?e.toInt():t.relu(e)),{x:e},null,Er)}}),rd=wi({relu6_:function(t){const e=gi(t,"x","relu6");return Se.runKernelFunc((t,n)=>(n([e]),"bool"===e.dtype?bi(e,"int32"):t.relu6(e)),{x:e},null,Tr)}}),id=wi({reverse1d_:function(t){const e=gi(t,"x","reverse");return ht(1===e.rank,()=>`Error in reverse1D: x must be rank 1 but got rank ${e.rank}.`),sa(e,0)}}),sd=wi({reverse2d_:function(t,e){const n=gi(t,"x","reverse");return ht(2===n.rank,()=>`Error in reverse2D: x must be rank 2 but got rank ${n.rank}.`),sa(n,e)}}),od=wi({reverse3d_:function(t,e){const n=gi(t,"x","reverse");return ht(3===n.rank,()=>`Error in reverse3D: x must be rank 3 but got rank ${n.rank}.`),sa(n,e)}}),ad=wi({reverse4d_:function(t,e){const n=gi(t,"x","reverse");return ht(4===n.rank,()=>`Error in reverse4D: x must be rank 4 but got rank ${n.rank}.`),sa(n,e)}}),ld=wi({rfft_:function(t,e){ht("float32"===t.dtype,()=>"The dtype for rfft() must be real value but got "+t.dtype);let n=t.shape[t.shape.length-1];const r=t.size/n;let i;if(null!=e&&e<n){const r=t.shape.map(t=>0),s=t.shape.map(t=>t);s[t.shape.length-1]=e,i=el(t,r,s),n=e}else if(null!=e&&e>n){const r=t.shape.map(t=>t);r[t.shape.length-1]=e-n,i=Va([t,Vo(r)],t.shape.length-1),n=e}else i=t;const s=Pi(i),o=qi($o(i,s),[r,n]),a=Jc(o),l=Math.floor(n/2)+1,u=nh(a),c=eh(a),h=Os(u,[l,n-l],u.shape.length-1),d=Os(c,[l,n-l],c.shape.length-1),p=i.shape.slice();return p[i.shape.length-1]=l,qi($o(h[0],d[0]),p)}}),ud=wi({round_:function(t){const e=gi(t,"x","round");return Se.runKernelFunc(t=>t.round(e),{x:e},null,Or)}}),cd=wi({selu_:function(t){const e=gi(t,"x","selu");return Se.runKernelFunc((t,n)=>{const r=t.selu(e);return n([e]),r},{x:e},null,Ur)}}),hd=wi({separableConv2d_:function(t,e,n,r,i,s=[1,1],o="NHWC"){const a=gi(t,"x","separableConv2d"),l=gi(e,"depthwiseFilter","separableConv2d"),u=gi(n,"pointwiseFilter","separableConv2d");let c=a,h=!1;if(3===a.rank&&(h=!0,c=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),"NCHW"===o)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");ht(4===c.rank,()=>`Error in separableConv2d: input must be rank 4, but got rank ${c.rank}.`),ht(4===l.rank,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),ht(4===u.rank,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),ht(1===u.shape[0],()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${u.shape[0]}.`),ht(1===u.shape[1],()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${u.shape[1]}.`);const d=l.shape[2],p=l.shape[3];ht(u.shape[2]===d*p,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${d*p}, but got ${u.shape[2]}.`);const f=$c(c,l,r,i,o,s),A=Ps(f,u,1,"valid",o);return h?A.as3D(A.shape[1],A.shape[2],A.shape[3]):A}}),dd=async function(t,e){const n=gi(t,"x","setdiff1d"),r=gi(e,"y","setdiff1d");ht(n.dtype===r.dtype,()=>`x and y should have the same dtype, but got x (${n.dtype}) and y (${r.dtype}).`),ht(1===n.rank,()=>`x should be 1D tensor, but got x (${n.shape}).`),ht(1===r.rank,()=>`y should be 1D tensor, but got y (${r.shape}).`);const i=await n.data(),s=await r.data(),o=new Set(s);let a=0;for(let c=0;c<i.length;c++)o.has(i[c])||a++;const l=new se([a],n.dtype),u=new se([a],"int32");for(let c=0,h=0;c<i.length;c++)o.has(i[c])||(l.values[h]=i[c],u.values[h]=c,h++);return[l.toTensor(),u.toTensor()]},pd=wi({sign_:function(t){const e=gi(t,"x","sign");return Se.runKernelFunc(t=>t.sign(e),{x:e},null,Hr)}}),fd=wi({slice1d_:function(t,e,n){const r=gi(t,"x","slice1d");return ht(1===r.rank,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),el(r,[e],[n])}}),Ad=wi({slice2d_:function(t,e,n){const r=gi(t,"x","slice2d");return ht(2===r.rank,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),el(r,e,n)}}),md=wi({slice3d_:function(t,e,n){const r=gi(t,"x","slice3d");return ht(3===r.rank,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),el(r,e,n)}}),gd=wi({slice4d_:function(t,e,n){const r=gi(t,"x","slice4d");return ht(4===r.rank,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),el(r,e,n)}}),yd=wi({softmax_:function(t,e=-1){const n=gi(t,"logits","softmax","float32");if(-1===e&&(e=n.rank-1),e!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${e}`);return Se.runKernelFunc((t,r)=>{const i=t.softmax(n,e);return r([i]),i},{logits:n},null,Gr,{dim:e})}}),wd=wi({softplus_:function(t){const e=gi(t,"x","softplus");return Se.runKernelFunc((t,n)=>{const r=t.softplus(e);return n([e]),r},{x:e},null,Vr)}}),bd=wi({squaredDifference_:function(t,e){let n=gi(t,"a","squaredDifference"),r=gi(e,"b","squaredDifference");return[n,r]=we(n,r),Li(n.shape,r.shape),Se.runKernelFunc((t,e)=>{const i=t.squaredDifference(n,r);return e([n,r]),i},{a:n,b:r},null,Xr,{})}}),vd=wi({squeeze_:function(t,e){const n=gi(t,"x","squeeze");return qi(n,Et(n.shape,e).newShape)}}),xd=wi({stridedSlice_:function(t,e,n,r,i=0,s=0,o=0,a=0,l=0){null==r&&(r=new Array(e.length));let u=gi(t,"x","stridedSlice");return Se.runKernelFunc(t=>{const c=xa(o);if(c.length>1)throw new Error("Multiple ellipses in slice is not allowed.");if(0!==o&&0!==a)throw new Error("Using both ellipsisMask and newAxisMask is not yet supported.");if(0!==o&&0!==l)throw new Error("Using both ellipsisMask and shrinkAxisMask is not yet supported.");const h=u.rank-e.length,d=xa(a),p=u.shape.slice();if(d.forEach(t=>{e[t]=0,n[t]=1,p.splice(t,0,1)}),u=qi(u,p),c.length&&h>0){const t=c[0],o=h+1;e=Ba(i,t,o,e,u.shape),n=ka(s,t,o,n,u.shape),r=Ca(r,t,o,u.shape)}else for(let a=0;a<u.rank;a++)e[a]=Ia(i,e,r,u.shape,a,o),n[a]=Fa(s,n,r,u.shape,a,o),r[a]=Na(r,a,o);const f=xa(l);f.forEach(t=>{n[t]=e[t]+1,r[t]=1});const A=_a(e,n,r),m=A.filter((t,e)=>-1===f.indexOf(e));return r.every(t=>1===t)?qi(el(u,e,A),m):t.stridedSlice(u,e,n,r).reshape(m)},{x:u},null,ti,{begin:e,end:n,strides:r,beginMask:i,endMask:s,ellipsisMask:o,newAxisMask:a,shrinkAxisMask:l})}}),_d=wi({tan_:function(t){const e=gi(t,"x","tan");return Se.runKernelFunc((t,n)=>{const r=t.tan(e);return n([e]),r},{x:e},null,ei)}});function Cd(t,e,n){if(pt(t),null!=e&&2!==e.length)throw new Error("tensor2d() requires shape to have two numbers");const r=Ai(t,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==e)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Bi(t,e,r,n)}function Sd(t,e,n){if(pt(t),null!=e&&4!==e.length)throw new Error("tensor4d() requires shape to have four numbers");const r=Ai(t,n);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==e)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Bi(t,e,r,n)}function Ed(t,e,n){if(pt(t),null!=e&&5!==e.length)throw new Error("tensor5d() requires shape to have five numbers");const r=Ai(t,n);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==e)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Bi(t,e,r,n)}function Bd(t,e,n){if(pt(t),null!=e&&6!==e.length)throw new Error("tensor6d() requires shape to have six numbers");const r=Ai(t,n);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==e)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return Bi(t,e=e||r,r,n)}const kd=wi({topk_:function(t,e=1,n=!0){const r=gi(t,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");const i=r.shape[r.shape.length-1];if(e>i)throw new Error(`'k' passed to topk() must be <= the last dimension (${i}) but got `+e);const s={x:r},o={k:e,sorted:n},[a,l]=Se.runKernelFunc(t=>t.topk(r,e,n),s,null,ii,o);return{values:a,indices:l}}}),Nd=wi({truncatedNormal_:function(t,e=0,n=1,r,i){if(null!=r&&"bool"===r)throw new Error("Unsupported data type $ { dtype }");const s=new Kh(e,n,r,!0,i),o=Fc(t,r);for(let a=0;a<o.values.length;a++)o.values[a]=s.nextValue();return o.toTensor()}}),Id=wi({unstack_:function(t,e=0){const n=gi(t,"x","unstack");return ht(e>=-n.shape.length&&e<n.shape.length,()=>`Axis = ${e} is not in [-${n.shape.length}, ${n.shape.length})`),e<0&&(e+=n.shape.length),Se.runKernelFunc(t=>t.unstack(n,e),{value:n},null,oi,{axis:e})}});function Fd(t,e=!0,n,r){return Se.makeVariable(t,e,n,r)}function Td(t,e){const n=[];for(let s=0;s<e.length;s++)e[s]&&n.push(s);const r=Fc(t,"int32"),i=Fc([n.length,t.length],"int32");for(let s=0;s<n.length;s++){const e=r.indexToLoc(n[s]);i.values.set(e,s*t.length)}return i.toTensor()}const Rd=async function(t){const e=gi(t,"condition","whereAsync","bool"),n=await e.data(),r=Td(e.shape,n);return t!==e&&e.dispose(),r},Od=async function(t,e,n){const r=gi(t,"tensor","boolMask"),i=gi(e,"mask","boolMask","bool"),s=null==n?0:n,o=i.rank,a=r.shape;ht(o>0,()=>"mask cannot be scalar"),dt(a.slice(s,s+o),i.shape,"mask's shape must match the first K dimensions of tensor's shape,");let l=1;for(let A=s;A<s+o;A++)l*=a[A];const u=a.slice(0,s).concat([l],a.slice(s+o)),c=r.reshape(u),h=i.reshape([-1]),d=await Rd(h),p=d.squeeze([1]),f=dl(c,p,s);return t!==r&&r.dispose(),e!==i&&i.dispose(),p.dispose(),c.dispose(),h.dispose(),d.dispose(),f},Dd=wi({equalStrict_:function(t,e){Vu("strict variants of ops have been deprecated and will be removed in future");const n=gi(t,"a","equalStrict"),r=gi(e,"b","equalStrict");return dt(n.shape,r.shape,"Error in equalStrict: "),n.equal(r)}}),Ld=wi({greaterEqualStrict_:function(t,e){Vu("strict variants of ops have been deprecated and will be removed in future");const n=gi(t,"a","greaterEqualStrict"),r=gi(e,"b","greaterEqualStrict");return dt(n.shape,r.shape,"Error in greaterEqualStrict: "),n.greaterEqual(r)}}),Md=wi({greaterStrict_:function(t,e){Vu("strict variants of ops have been deprecated and will be removed in future");const n=gi(t,"a","greaterStrict"),r=gi(e,"b","greaterStrict");return dt(n.shape,r.shape,"Error in greaterStrict: "),n.greater(r)}}),Ud=wi({lessEqualStrict_:function(t,e){Vu("strict variants of ops have been deprecated and will be removed in future");const n=gi(t,"a","lessEqualStrict"),r=gi(e,"b","lessEqualStrict");return dt(n.shape,r.shape,"Error in lessEqualStrict: "),n.lessEqual(r)}}),Pd=wi({lessStrict_:function(t,e){Vu("strict variants of ops have been deprecated and will be removed in future");const n=gi(t,"a","lessStrict"),r=gi(e,"b","lessStrict");return dt(n.shape,r.shape,"Error in lessStrict: "),n.less(r)}}),zd=wi({notEqualStrict_:function(t,e){Vu("strict variants of ops have been deprecated and will be removed in future");const n=gi(t,"a","notEqualStrict"),r=gi(e,"b","notEqualStrict");return dt(n.shape,r.shape,"Error in notEqualStrict: "),n.notEqual(r)}}),Qd=wi({addStrict_:function(t,e){Vu("strict variants of ops have been deprecated and will be removed in future");const n=gi(t,"a","addStrict"),r=gi(e,"b","addStrict");return dt(n.shape,r.shape,"Error in addStrict: "),n.add(r)}}),Hd=wi({divStrict_:function(t,e){Vu("strict variants of ops have been deprecated and will be removed in future");const n=gi(t,"a","div"),r=gi(e,"b","div");return dt(n.shape,r.shape,"Error in divideStrict: "),n.div(r)}}),$d=wi({maximumStrict_:function(t,e){Vu("strict variants of ops have been deprecated and will be removed in future");const n=gi(t,"a","maximumStrict"),r=gi(e,"b","maximumStrict");return dt(n.shape,r.shape,"Error in maximumStrict: "),n.maximum(r)}}),Vd=wi({minimumStrict_:function(t,e){Vu("strict variants of ops have been deprecated and will be removed in future");const n=gi(t,"a","minimumStrict"),r=gi(e,"b","minimumStrict");return dt(n.shape,r.shape,"Error in minimumStrict: "),n.minimum(r)}}),qd=wi({modStrict_:function(t,e){Vu("strict variants of ops have been deprecated and will be removed in future");const n=gi(t,"a","modStrict"),r=gi(e,"b","modStrict");return dt(n.shape,r.shape,"Error in modStrict: "),n.mod(r)}}),jd=wi({mulStrict_:function(t,e){Vu("strict variants of ops have been deprecated and will be removed in future");const n=gi(t,"a","mul"),r=gi(e,"b","mul");return dt(n.shape,r.shape,"Error in multiplyStrict: "),n.mul(r)}}),Kd=wi({powStrict_:function(t,e){return Vu("strict variants of ops have been deprecated and will be removed in future"),dt(t.shape,e.shape,"Error in powStrict: "),t.pow(e)}}),Wd=wi({squaredDifferenceStrict_:function(t,e){Vu("strict variants of ops have been deprecated and will be removed in future");const n=gi(t,"a","squaredDifferenceStrict"),r=gi(e,"b","squaredDifferenceStrict");return dt(n.shape,r.shape,"Error in squaredDifferenceStrict: "),n.squaredDifference(r)}}),Gd=wi({subStrict_:function(t,e){Vu("strict variants of ops have been deprecated and will be removed in future");const n=gi(t,"a","subStrict"),r=gi(e,"b","subStrict");return dt(n.shape,r.shape,"Error in subStrict: "),n.sub(r)}}),Xd=wi({norm_:function(t,e="euclidean",n=null,r=!1){const i=function t(e,n,r=null){if(0===e.rank)return lc(e);if(1!==e.rank&&null===r)return t(qi(e,[-1]),n,r);if(1===e.rank||"number"==typeof r||Array.isArray(r)&&1===r.length){if(1===n)return ts(lc(e),r);if(n===1/0)return wh(lc(e),r);if(n===-1/0)return kh(lc(e),r);if("euclidean"===n||2===n)return Ni(ts(Go(lc(e),ki(2,"int32")),r));throw new Error("Error in norm: invalid ord value: "+n)}if(Array.isArray(r)&&2===r.length){if(1===n)return wh(ts(lc(e),r[0]),r[1]-1);if(n===1/0)return wh(ts(lc(e),r[1]),r[0]);if(n===-1/0)return kh(ts(lc(e),r[1]),r[0]);if("fro"===n||"euclidean"===n)return Ni(ts(Ii(e),r));throw new Error("Error in norm: invalid ord value: "+n)}throw new Error("Error in norm: invalid axis: "+r)}(t=gi(t,"x","norm"),e,n);let s=i.shape;if(r){const e=St(n,t.shape);s=Gi(i.shape,e)}return i.reshape(s)}}),Yd=wi({movingAverage_:function(t,e,n,r,i=!0){const s=gi(t,"v","movingAverage"),o=gi(e,"x","movingAverage"),a=gi(n,"decay","movingAverage");be(s,o),ht(gt(s.shape,o.shape),()=>"Shape mismatch in v and x");const l=ki(1),u=Fi(l,a);let c=vi(Fi(o,s),u);if(i){ht(null!=r,()=>"When using zeroDebias: true, step is required.");const t=gi(r,"step","movingAverage");c=Si(c,Fi(l,Go(a,t)))}return $i(s,c)}}),Jd=wi({scatterND_:function(t,e,n){const r=gi(t,"indices","scatterND","int32"),i=gi(e,"updates","scatterND");return Su(i,r,n),Se.runKernelFunc(t=>t.scatterND(r,i,n),{indices:r,updates:i},null,Lr,{shape:n})}}),Zd=wi({sparseToDense_:function(t,e,n,r=0){const i=gi(t,"sparseIndices","sparseToDense","int32"),s=gi(e,"sparseValues","sparseToDense"),o=gi(r,"defaultValue","sparseToDense",s.dtype);return function(t,e,n,r){if("int32"!==t.dtype)throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${t.shape}.`);const i=t.rank>0?t.shape[0]:1,s=t.rank>1?t.shape[1]:1;if(n.length!==s)throw new Error(`outputShape has incorrect number of elements:, ${n.length}, should be: ${s}.`);if(0!==e.rank&&(1!==e.rank||e.size!==i))throw new Error(`sparseValues has incorrect shape ${e.shape}, should be [] or [${i}]`);if(e.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(i,s,n,o),Se.runKernelFunc(t=>t.sparseToDense(i,s,n,o),{sparseIndices:i,sparseValues:s,defaultValue:o},null,Zr,{outputShape:n})}}),tp=wi({gatherND_:function(t,e){const n=gi(e,"indices","gatherND","int32"),r=gi(t,"x","gatherND");return Se.runKernelFunc(t=>t.gatherND(r,n),{params:r,indices:n},null,Rn)}}),ep=wi({dropout_:function(t,e,n,r){const i=gi(t,"x","dropout");if(ht("float32"===i.dtype,()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${i.dtype} tensor instead.`),ht(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),0===e)return t instanceof ue?i.clone():i;const s=function(t,e){if(null==e)return t.shape.slice();if(gt(t.shape,e))return e;if(t.shape.length===e.length){const n=[];for(let r=0;r<t.shape.length;r++)n.push(null==e[r]&&null!=t.shape[r]?t.shape[r]:e[r]);return n}return e}(i,n),o=1-e,a=Jh(s,0,1,"float32",r).add(o).floor().div(o);return i.mul(a)}});function np(t){return Math.floor(Math.pow(2,Math.ceil(Math.log(t)/Math.log(2))))}function rp(t,e,n){const r=1-t%2,i=new Float32Array(t);for(let s=0;s<t;++s){const o=2*Math.PI*s/(t+r-1);i[s]=e-n*Math.cos(o)}return Zh(i,"float32")}const ip=async function(t,e,n=1){const r=gi(t,"predictions","inTopK"),i=gi(e,"targets","inTopK");ht(r.rank>1,()=>"inTopK() expects the predictions to be of rank 2 or higher, but got "+r.rank),ht(r.rank-1===i.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${r.rank} and targets rank ${i.rank}`),dt(r.shape.slice(0,r.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const s=r.shape[r.shape.length-1];ht(n>0&&n<=s,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${s}), but got ${n}`);const o=await r.data(),a=await i.data(),[l,u]=[o.length/s,s],c=Bt("bool",l);for(let h=0;h<l;h++){const t=h*u,e=o.subarray(t,t+u),r=[];for(let n=0;n<e.length;n++)r.push({value:e[n],index:n});r.sort((t,e)=>e.value-t.value),c[h]=0;for(let i=0;i<n;i++)if(r[i].index===a[h]){c[h]=1;break}}return t!==r&&r.dispose(),e!==i&&i.dispose(),$a(c,i.shape,"bool")};function sp(t,e,n){if(null==n||"linear"===n)return t;if("relu"===n)return t.mul(e.step());throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function op(t,e){let n=e;const r=Di(t.shape,e.shape);return r.length>0&&(n=n.sum(r)),n.reshape(t.shape)}function ap(t,e,n){if("linear"===e)return t;if("relu"===e)return nd(t);if("elu"===e)return Wc(t);if("relu6"===e)return rd(t);if("prelu"===e)return Hh(t,n);throw new Error(`Unknown fused activation ${e}.`)}const lp=(t,e)=>!(t>0)||"linear"===e,up=wi({fusedConv2d_:function({x:t,filter:e,strides:n,pad:r,dataFormat:i="NHWC",dilations:s=[1,1],dimRoundingMode:o,bias:a,activation:l="linear",preluActivationWeights:u}){if(!1===lp(Se.state.gradientDepth,l=l||"linear")){let c=Ps(t,e,n,r,i,s,o);return null!=a&&(c=$i(c,a)),ap(c,l,u)}const c=gi(t,"x","conv2d"),h=gi(e,"filter","conv2d");let d=c,p=!1;3===c.rank&&(p=!0,d=c.as4D(1,c.shape[0],c.shape[1],c.shape[2])),ht(4===d.rank,()=>"Error in fused conv2d: input must be rank 4, but got rank "+d.rank+"."),ht(4===h.rank,()=>"Error in fused conv2d: filter must be rank 4, but got rank "+h.rank+"."),null!=o&&ht(yt(r),()=>`Error in fused conv2d: pad must be an integer when using, dimRoundingMode ${o} but got pad ${r}.`),ht(d.shape[3]===h.shape[2],()=>`Error in conv2d: depth of input (${d.shape[3]}) must match input depth for filter ${h.shape[2]}.`),ht(As(n,s),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),ht("NHWC"===i,()=>`Error in conv2d: got dataFormat of ${i} but only NHWC is currently supported.`);const f=as(d.shape,h.shape,n,s,r,o);let A,m;null!=a&&(A=gi(a,"bias","fused conv2d"),[A]=we(A,c),Li(f.outShape,A.shape)),null!=u&&(m=gi(u,"prelu weights","fused conv2d"));const g=(t,e)=>{const[i,o,a,u]=e,c=sp(t,a,l);ht(fs(s),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`);const h=[Ms(o.shape,c,i,n,r),Ls(o,c,i.shape,n,r)];if(null!=u){const t=op(u,c);h.push(t)}return h},y=t=>t.fusedConv2d({input:d,filter:h,convInfo:f,bias:A,activation:l,preluActivationWeights:m}),w={x:d,filter:h,bias:A,preluActivationWeights:m},b={strides:n,pad:r,dataFormat:i,dilations:s,dimRoundingMode:o,activation:l};return null==a?mh((t,e,n)=>{let r=Se.runKernelFunc(y,w,null,pi,b);return n([e,t,r]),p&&(r=r.as3D(r.shape[1],r.shape[2],r.shape[3])),{value:r,gradFunc:g}})(d,h):mh((t,e,n,r)=>{let i=Se.runKernelFunc(y,w,null,pi,b);return r([e,t,i,n]),p&&(i=i.as3D(i.shape[1],i.shape[2],i.shape[3])),{value:i,gradFunc:g}})(d,h,A)}}),cp=wi({fusedDepthwiseConv2d_:function({x:t,filter:e,strides:n,pad:r,dataFormat:i="NHWC",dilations:s=[1,1],dimRoundingMode:o,bias:a,activation:l="linear",preluActivationWeights:u}){if(!1===lp(Se.state.gradientDepth,l)){let c=$c(t,e,n,r,i,s,o);return null!=a&&(c=$i(c,a)),ap(c,l,u)}const c=gi(t,"x","depthwiseConv2d"),h=gi(e,"filter","depthwiseConv2d");let d=c,p=!1;3===c.rank&&(p=!0,d=c.as4D(1,c.shape[0],c.shape[1],c.shape[2])),ht(4===d.rank,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${d.rank}.`),ht(4===h.rank,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${h.rank}.`),ht(d.shape[3]===h.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${d.shape[3]}) must match the inChannels dimension in filter ${h.shape[2]}.`),null==s&&(s=[1,1]),ht(As(n,s),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),null!=o&&ht(yt(r),()=>`Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode ${o} but got pad ${r}.`);const f=as(d.shape,h.shape,n,s,r,o,!0);let A,m;null!=a&&(A=gi(a,"bias","fused conv2d"),[A]=we(A,c),Li(f.outShape,A.shape)),null!=u&&(m=gi(u,"prelu weights","fused depthwiseConv2d"));const g=(t,e)=>{ht(fs(s),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${s}'`);const[n,r,i,o]=e,a=sp(t,i,l),u=Js(r.shape,a,n,f),c=Ys(r,a,n.shape,f);return null!=o?[u,c,op(A,a)]:[u,c]},y=t=>t.fusedDepthwiseConv2D({input:d,filter:h,convInfo:f,bias:A,activation:l,preluActivationWeights:m}),w={x:d,filter:h,bias:A,preluActivationWeights:m},b={strides:n,pad:r,dataFormat:i,dilations:s,dimRoundingMode:o,activation:l};return null==a?mh((t,e,n)=>{let r=Se.runKernelFunc(y,w,null,fi,b);return n([e,t,r]),p&&(r=r.as3D(r.shape[1],r.shape[2],r.shape[3])),{value:r,gradFunc:g}})(d,h):mh((t,e,n,r)=>{let i=Se.runKernelFunc(y,w,null,fi,b);return r([e,t,i,n]),p&&(i=i.as3D(i.shape[1],i.shape[2],i.shape[3])),{value:i,gradFunc:g}})(d,h,A)}}),hp=wi({fusedMatMul_:function({a:t,b:e,transposeA:n=!1,transposeB:r=!1,bias:i,activation:s="linear",preluActivationWeights:o}){if(!1===lp(Se.state.gradientDepth,s)){let a=vs(t,e,n,r);return null!=i&&(a=$i(a,i)),ap(a,s,o)}let a=gi(t,"a","fused matMul"),l=gi(e,"b","fused matMul");[a,l]=we(a,l);const u=n?a.shape[a.rank-2]:a.shape[a.rank-1],c=r?l.shape[l.rank-1]:l.shape[l.rank-2],h=n?a.shape[a.rank-1]:a.shape[a.rank-2],d=r?l.shape[l.rank-2]:l.shape[l.rank-1],p=a.shape.slice(0,-2),f=l.shape.slice(0,-2),A=At(p),m=At(f);ht(a.rank>=2&&l.rank>=2&&a.rank===l.rank,()=>`Error in fused matMul: inputs must have the same rank of at least 2, got ranks ${a.rank} and ${l.rank}.`),ht(gt(p,f),()=>`Error in fused matMul: outer dimensions (${p}) and (${f}) of Tensors with shapes ${a.shape} and `+l.shape+" must match."),ht(u===c,()=>`Error in fused matMul: inner shapes (${u}) and (${c}) of Tensors with shapes ${a.shape} and ${l.shape} and transposeA=${n} and transposeB=${r} must match.`);const g=a.shape.slice(0,-2).concat([h,d]),y=n?a.as3D(A,u,h):a.as3D(A,h,u),w=r?l.as3D(m,d,c):l.as3D(m,c,d);let b,v;null!=i&&(b=gi(i,"bias","fused matMul"),[b]=we(b,a),Li(g,b.shape)),null!=o&&(v=gi(o,"prelu weights","fused matMul"));const x=(t,e)=>{const[o,a,l,u]=e,c=sp(qi(t,l.shape),l,s);let h,d;return n||r?!n&&r?(h=vs(c,a,!1,!1),d=vs(c,o,!0,!1)):n&&!r?(h=vs(a,c,!1,!0),d=vs(o,c,!1,!1)):(h=vs(a,c,!0,!0),d=vs(c,o,!0,!0)):(h=vs(c,a,!1,!0),d=vs(o,c,!0,!1)),null!=i?[h,d,op(u,c)]:[h,d]},_=t=>t.fusedBatchMatMul({a:y,b:w,transposeA:n,transposeB:r,bias:b,activation:s,preluActivationWeights:v}),C={a:y,b:w,bias:b,preluActivationWeights:v},S={transposeA:n,transposeB:r,activation:s};return null==i?mh((t,e,n)=>{const r=Se.runKernelFunc(_,C,null,di,S);return n([t,e,r]),{value:qi(r,g),gradFunc:x}})(y,w):mh((t,e,n,r)=>{const i=Se.runKernelFunc(_,C,null,di,S);return r([t,e,i,n]),{value:qi(i,g),gradFunc:x}})(y,w,b)}}),dp=wi({hammingWindow_:function(t){return rp(t,.54,.46)}}),pp=wi({hannWindow_:function(t){return rp(t,.5,.5)}}),fp=wi({frame_:function(t,e,n,r=!1,i=0){let s=0;const o=[];for(;s+e<=t.size;)o.push(el(t,s,e)),s+=n;if(r)for(;s<t.size;){const r=s+e-t.size,a=Va([el(t,s,e-r),Zc([r],i)]);o.push(a),s+=n}return 0===o.length?Cd([],[0,e]):qi(Va(o),[o.length,e])}}),Ap=wi({stft_:function(t,e,n,r,i=pp){null==r&&(r=np(e));const s=fp(t,e,n),o=vi(s,i(e)),a=[];for(let l=0;l<s.shape[0];l++)a.push(ld(el(o,[l,0],[1,e]),r));return Va(a)}}),mp=wi({cropAndResize_:function(t,e,n,r,i,s){const o=gi(t,"image","cropAndResize"),a=gi(e,"boxes","cropAndResize","float32"),l=gi(n,"boxInd","cropAndResize","int32");i=i||"bilinear",s=s||0;const u=a.shape[0];return ht(4===o.rank,()=>`Error in cropAndResize: image must be rank 4,but got rank ${o.rank}.`),ht(2===a.rank&&4===a.shape[1],()=>`Error in cropAndResize: boxes must be have size [${u},4] but had shape ${a.shape}.`),ht(1===l.rank&&l.shape[0]===u,()=>`Error in cropAndResize: boxInd must be have size [${u}] but had shape ${a.shape}.`),ht(2===r.length,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),ht(r[0]>=1&&r[1]>=1,()=>"cropSize must be atleast [1,1], but was "+r),ht("bilinear"===i||"nearest"===i,()=>"method must be bilinear or nearest, but was "+i),Se.runKernelFunc(t=>t.cropAndResize(o,a,l,r,i,s),{image:o,boxes:a,boxInd:l},null,hn,{method:i,extrapolationValue:s,cropSize:r})}}),gp=wi({rotateWithOffset_:function(t,e,n=0,r=.5){const i=gi(t,"image","rotateWithOffset","float32");return ht(4===i.rank,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${i.rank}.`),Se.runKernel(hi,{image:i},{radians:e,fillValue:n,center:r})}});function yp(t,e,n,r,i,s){null==r&&(r=.5),null==i&&(i=Number.NEGATIVE_INFINITY),null==s&&(s=0);const o=t.shape[0];return n=Math.min(n,o),ht(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),ht(2===t.rank,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),ht(4===t.shape[1],()=>"boxes must have 4 columns, but 2nd dimension was "+t.shape[1]),ht(1===e.rank,()=>"scores must be a 1D tensor"),ht(e.shape[0]===o,()=>`scores has incompatible shape with boxes. Expected ${o}, but was `+e.shape[0]),ht(0<=s&&s<=1,()=>`softNmsSigma must be in [0, 1], but was '${s}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:s}}const wp=wi({nonMaxSuppression_:function(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY){const s=gi(t,"boxes","nonMaxSuppression"),o=gi(e,"scores","nonMaxSuppression"),a=yp(s,o,n,r,i);return Se.runKernelFunc(t=>t.nonMaxSuppression(s,o,n,r,i),{boxes:s,scores:o},null,pr,{maxOutputSize:n=a.maxOutputSize,iouThreshold:r=a.iouThreshold,scoreThreshold:i=a.scoreThreshold})}});function bp(t,e,n){const r=function(t,e,n){return function(t,e,n){let r=0,i=t.length,s=0,o=!1;for(;r<i;){s=r+(i-r>>>1);const a=n(e,t[s]);a>0?r=s+1:(i=s,o=!a)}return o?r:-r-1}(t,e,n||vp)}(t,e,n);t.splice(r<0?-(r+1):r,0,e)}function vp(t,e){return t>e?1:t<e?-1:0}function xp(t,e,n,r,i){return Sp(t,e,n,r,i,0).selectedIndices}function _p(t,e,n,r,i,s){return Sp(t,e,n,r,i,0,!1,s,!0)}function Cp(t,e,n,r,i,s){return Sp(t,e,n,r,i,s,!0)}function Sp(t,e,n,r,i,s,o=!1,a=!1,l=!1){const u=[];for(let m=0;m<e.length;m++)e[m]>i&&u.push({score:e[m],boxIndex:m,suppressBeginIndex:0});u.sort(kp);const c=s>0?-.5/s:0,h=[],d=[];for(;h.length<n&&u.length>0;){const e=u.pop(),{score:n,boxIndex:s,suppressBeginIndex:o}=e;if(n<i)break;let a=!1;for(let l=h.length-1;l>=o;--l){const n=Ep(t,s,h[l]);if(n>=r){a=!0;break}if(e.score=e.score*Bp(r,c,n),e.score<=i)break}e.suppressBeginIndex=h.length,a||(e.score===n?(h.push(s),d.push(e.score)):e.score>i&&bp(u,e,kp))}const p=h.length,f=n-p;a&&f>0&&(h.push(...new Array(f).fill(0)),d.push(...new Array(f).fill(0)));const A={selectedIndices:Zh(h,"int32")};return o&&(A.selectedScores=Zh(d,"float32")),l&&(A.validOutputs=ki(p,"int32")),A}function Ep(t,e,n){const r=t.subarray(4*e,4*e+4),i=t.subarray(4*n,4*n+4),s=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),a=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),u=Math.min(i[0],i[2]),c=Math.min(i[1],i[3]),h=Math.max(i[0],i[2]),d=Math.max(i[1],i[3]),p=(a-s)*(l-o),f=(h-u)*(d-c);if(p<=0||f<=0)return 0;const A=Math.max(s,u),m=Math.max(o,c),g=Math.min(a,h),y=Math.min(l,d),w=Math.max(g-A,0)*Math.max(y-m,0);return w/(p+f-w)}function Bp(t,e,n){const r=Math.exp(e*n*n);return n<=t?r:0}function kp(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}const Np=wi({nonMaxSuppressionWithScore_:function(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,s=0){const o=gi(t,"boxes","nonMaxSuppression"),a=gi(e,"scores","nonMaxSuppression"),l=yp(o,a,n,r,i,s),u=Se.runKernel(Ar,{boxes:o,scores:a},{maxOutputSize:n=l.maxOutputSize,iouThreshold:r=l.iouThreshold,scoreThreshold:i=l.scoreThreshold,softNmsSigma:s=l.softNmsSigma});return{selectedIndices:u[0],selectedScores:u[1]}}}),Ip=wi({nonMaxSuppressionPadded_:function(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,s=!1){const o=gi(t,"boxes","nonMaxSuppression"),a=gi(e,"scores","nonMaxSuppression"),l=yp(o,a,n,r,i,null),u=Se.runKernel(fr,{boxes:o,scores:a},{maxOutputSize:l.maxOutputSize,iouThreshold:l.iouThreshold,scoreThreshold:l.scoreThreshold,padToMaxOutputSize:s});return{selectedIndices:u[0],validOutputs:u[1]}}}),Fp=wi({resizeBilinear_:function(t,e,n=!1){const r=gi(t,"images","resizeBilinear");ht(3===r.rank||4===r.rank,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${r.rank}.`),ht(2===e.length,()=>"Error in resizeBilinear: new shape must 2D, but got shape "+e+".");let i=r,s=!1;3===r.rank&&(s=!0,i=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));const[o,a]=e,l=Se.runKernelFunc((t,e)=>(e([i]),t.resizeBilinear(i,o,a,n)),{images:i},null,Ir,{alignCorners:n,size:e});return s?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}}),Tp=wi({resizeNearestNeighbor_:function(t,e,n=!1){const r=gi(t,"images","resizeNearestNeighbor");ht(3===r.rank||4===r.rank,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${r.rank}.`),ht(2===e.length,()=>"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+e+"."),ht("float32"===r.dtype||"int32"===r.dtype,()=>"`images` must have `int32` or `float32` as dtype");let i=r,s=!1;3===r.rank&&(s=!0,i=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));const[o,a]=e,l=Se.runKernelFunc((t,e)=>(e([i]),t.resizeNearestNeighbor(i,o,a,n)),{images:i},null,kr,{alignCorners:n,size:e});return s?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}}),Rp=wi({bandPart_:function(t,e,n){ht(e%1==0,()=>`bandPart(): numLower must be an integer, got ${e}.`),ht(n%1==0,()=>`bandPart(): numUpper must be an integer, got ${n}.`);const r=gi(t,"a","bandPart");ht(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const i=r.shape,[s,o]=r.shape.slice(-2);if(!(e<=s))throw new Error(`bandPart(): numLower (${e}) must not be greater than the number of rows (${s}).`);if(!(n<=o))throw new Error(`bandPart(): numUpper (${n}) must not be greater than the number of columns (${o}).`);e<0&&(e=s),n<0&&(n=o);const a=qi(td(0,s,1,"int32"),[-1,1]),l=td(0,o,1,"int32"),u=Fi(a,l),c=Is(Ns(u,ki(+e,"int32")),ks(u,ki(-n,"int32"))),h=Vo([s,o],r.dtype);return qi(sl(Id(qi(r,[-1,s,o])).map(t=>Fs(c,t,h))),i)}}),Op=wi({gramSchmidt_:function(t){let e;if(Array.isArray(t)){e=!1,ht(null!=t&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const n=t[0].shape[0];for(let e=1;e<t.length;++e)ht(t[e].shape[0]===n,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[e].shape[0]} vs. ${n})`)}else e=!0,t=Os(t,t.shape[0],0).map(t=>vd(t,[0]));ht(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);const n=[],r=t;for(let i=0;i<t.length;++i)n.push(Se.tidy(()=>{let t=r[i];if(i>0)for(let e=0;e<i;++e){const r=vi(ts(vi(n[e],t)),n[e]);t=Fi(t,r)}return Si(t,Xd(t,"euclidean"))}));return e?sl(n,0):n}});function Dp(t,e=!1){return Se.tidy(()=>{ht(2===t.shape.length,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);const n=t.shape[0],r=t.shape[1];let i=Yc(n),s=ia(t);const o=Cd([[1]],[1,1]);let a=ia(o);const l=n>=r?r:n;for(let t=0;t<l;++t){const e=s,l=a,u=i;[a,s,i]=Se.tidy(()=>{const e=el(s,[t,t],[n-t,1]),l=Xd(e),u=el(s,[t,t],[1,1]),c=Fs(Mo(u,0),Cd([[-1]]),Cd([[1]])),h=Fi(u,vi(c,l)),d=Si(e,h);a=1===d.shape[0]?ia(o):Va([o,el(d,[1,0],[d.shape[0]-1,d.shape[1]])],0);const p=Ei(Si(vs(c,h),l)),f=el(s,[t,0],[n-t,r]),A=vi(p,a),m=Ws(a);if(0===t)s=Fi(f,vs(A,vs(m,f)));else{const e=Fi(f,vs(A,vs(m,f)));s=Va([el(s,[0,0],[t,r]),e],0)}const g=Ws(A),y=el(i,[0,t],[n,i.shape[1]-t]);if(0===t)i=Fi(y,vs(vs(y,a),g));else{const e=Fi(y,vs(vs(y,a),g));i=Va([el(i,[0,0],[n,t]),e],1)}return[a,s,i]}),Xu([e,l,u])}return!e&&n>r&&(i=el(i,[0,0],[n,r]),s=el(s,[0,0],[r,r])),[i,s]})}const Lp=wi({qr_:function(t,e=!1){if(ht(t.rank>=2,()=>"qr() requires input tensor to have a rank >= 2, but got rank "+t.rank),2===t.rank)return Dp(t,e);{const n=t.shape.slice(0,t.shape.length-2).reduce((t,e)=>t*e),r=Id(qi(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),i=[],s=[];return r.forEach(t=>{const[n,r]=Dp(t,e);i.push(n),s.push(r)}),[qi(sl(i,0),t.shape),qi(sl(s,0),t.shape)]}}});var Mp;!function(t){t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(Mp||(Mp={}));const Up=wi({computeWeightedLoss_:function(t,e,n=Mp.SUM_BY_NONZERO_WEIGHTS){const r=gi(t,"losses","computeWeightedLoss");let i=null;null!=e&&(i=gi(e,"weights","computeWeightedLoss"));const s=null==i?r:vi(r,i);if(n===Mp.NONE)return s;if(n===Mp.SUM)return ts(s);if(n===Mp.MEAN){if(null==i)return Bh(s);{const t=r.size/i.size,e=Si(ts(s),ts(i));return t>1?Si(e,ki(t)):e}}if(n===Mp.SUM_BY_NONZERO_WEIGHTS){if(null==i)return Si(ts(s),ki(r.size));{const t=vi(i,Ya(r.shape)),e=bi(ts(Oh(t,ki(0))),"float32");return Si(ts(s),e)}}throw Error("Unknown reduction: "+n)}}),Pp=wi({absoluteDifference_:function(t,e,n,r=Mp.SUM_BY_NONZERO_WEIGHTS){const i=gi(t,"labels","absoluteDifference"),s=gi(e,"predictions","absoluteDifference");let o=null;null!=n&&(o=gi(n,"weights","absoluteDifference")),dt(i.shape,s.shape,"Error in absoluteDifference: ");const a=lc(Fi(i,s));return Up(a,o,r)}}),zp=wi({cosineDistance_:function(t,e,n,r,i=Mp.SUM_BY_NONZERO_WEIGHTS){const s=gi(t,"labels","cosineDistance"),o=gi(e,"predictions","cosineDistance");let a=null;null!=r&&(a=gi(r,"weights","cosineDistance")),dt(s.shape,o.shape,"Error in cosineDistance: ");const l=ki(1),u=Fi(l,ts(vi(s,o),n,!0));return Up(u,a,i)}}),Qp=wi({hingeLoss_:function(t,e,n,r=Mp.SUM_BY_NONZERO_WEIGHTS){let i=gi(t,"labels","hingeLoss");const s=gi(e,"predictions","hingeLoss");let o=null;null!=n&&(o=gi(n,"weights","hingeLoss")),dt(i.shape,s.shape,"Error in hingeLoss: ");const a=ki(1);i=Fi(vi(ki(2),i),a);const l=nd(Fi(a,vi(i,s)));return Up(l,o,r)}}),Hp=wi({huberLoss_:function(t,e,n,r=1,i=Mp.SUM_BY_NONZERO_WEIGHTS){const s=gi(t,"labels","huberLoss"),o=gi(e,"predictions","huberLoss");let a=null;null!=n&&(a=gi(n,"weights","huberLoss")),dt(s.shape,o.shape,"Error in huberLoss: ");const l=ki(r),u=lc(Fi(o,s)),c=Nh(u,l),h=Fi(u,c),d=$i(vi(ki(.5),Ii(c)),vi(l,h));return Up(d,a,i)}}),$p=wi({logLoss_:function(t,e,n,r=1e-7,i=Mp.SUM_BY_NONZERO_WEIGHTS){const s=gi(t,"labels","logLoss"),o=gi(e,"predictions","logLoss");let a=null;null!=n&&(a=gi(n,"weights","logLoss")),dt(s.shape,o.shape,"Error in logLoss: ");const l=ki(1),u=ki(r),c=Ei(vi(s,Wo($i(o,u)))),h=vi(Fi(l,s),Wo($i(Fi(l,o),u))),d=Fi(c,h);return Up(d,a,i)}}),Vp=wi({meanSquaredError_:function(t,e,n,r=Mp.SUM_BY_NONZERO_WEIGHTS){const i=gi(t,"labels","meanSquaredError"),s=gi(e,"predictions","meanSquaredError");let o=null;null!=n&&(o=gi(n,"weights","meanSquaredError")),dt(i.shape,s.shape,"Error in meanSquaredError: ");const a=bd(i,s);return Up(a,o,r)}}),qp=wi({sigmoidCrossEntropy_:function(t,e,n,r=0,i=Mp.SUM_BY_NONZERO_WEIGHTS){let s=gi(t,"multiClassLabels","sigmoidCrossEntropy");const o=gi(e,"logits","sigmoidCrossEntropy");let a=null;if(null!=n&&(a=gi(n,"weights","sigmoidCrossEntropy")),dt(s.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){const t=ki(r),e=ki(1),n=ki(.5);s=$i(vi(s,Fi(e,t)),vi(n,t))}const l=function(t,e){const n=gi(t,"labels","sigmoidCrossEntropyWithLogits"),r=gi(e,"logits","sigmoidCrossEntropyWithLogits");dt(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");const i=nd(r),s=vi(r,n),o=ch(ro(Ei(lc(r))));return $i(Fi(i,s),o)}(s,o);return Up(l,a,i)}}),jp=wi({softmaxCrossEntropy_:function(t,e,n,r=0,i=Mp.SUM_BY_NONZERO_WEIGHTS){let s=gi(t,"onehotLabels","softmaxCrossEntropy");const o=gi(e,"logits","softmaxCrossEntropy");let a=null;if(null!=n&&(a=gi(n,"weights","softmaxCrossEntropy")),dt(s.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){const t=ki(r),e=ki(1),n=ki(s.shape[1]);s=$i(vi(s,Fi(e,t)),Si(t,n))}const l=function(t,e,n=-1){if(-1===n&&(n=e.rank-1),n!==e.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${e.rank} and dim was `+n);return mh((t,e,r)=>{const i=vh(e,[n],!0),s=Fi(bi(e,"float32"),i);r([t,s]);const o=Ei(vi(s,t));return{value:ts(o,[n]),gradFunc:(t,e)=>{const[r,i]=e,s=Gi(t.shape,[n]);return[vi(qi(t,s),Fi(bi(r,"float32"),ro(i))),vi(qi(t,s),Fi(ro(i),bi(r,"float32")))]}}})(t,e)}(s,o);return Up(l,a,i)}}),Kp={fft:Jc,ifft:th,rfft:ld,irfft:rh},Wp={hammingWindow:dp,hannWindow:pp,frame:fp,stft:Ap},Gp={resizeNearestNeighbor:Tp,resizeBilinear:Fp,rotateWithOffset:gp,cropAndResize:mp,nonMaxSuppression:wp,nonMaxSuppressionAsync:async function(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY){const s=gi(t,"boxes","nonMaxSuppressionAsync"),o=gi(e,"scores","nonMaxSuppressionAsync"),a=yp(s,o,n,r,i);n=a.maxOutputSize,r=a.iouThreshold,i=a.scoreThreshold;const l=await Promise.all([s.data(),o.data()]),u=xp(l[0],l[1],n,r,i);return s!==t&&s.dispose(),o!==e&&o.dispose(),u},nonMaxSuppressionWithScore:Np,nonMaxSuppressionWithScoreAsync:async function(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,s=0){const o=gi(t,"boxes","nonMaxSuppressionAsync"),a=gi(e,"scores","nonMaxSuppressionAsync"),l=yp(o,a,n,r,i,s);n=l.maxOutputSize,r=l.iouThreshold,i=l.scoreThreshold,s=l.softNmsSigma;const u=await Promise.all([o.data(),a.data()]),c=Cp(u[0],u[1],n,r,i,s);return o!==t&&o.dispose(),a!==e&&a.dispose(),c},nonMaxSuppressionPadded:Ip,nonMaxSuppressionPaddedAsync:async function(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,s=!1){const o=gi(t,"boxes","nonMaxSuppressionAsync"),a=gi(e,"scores","nonMaxSuppressionAsync"),l=yp(o,a,n,r,i,null),u=l.maxOutputSize,c=l.iouThreshold,h=l.scoreThreshold,[d,p]=await Promise.all([o.data(),a.data()]),f=_p(d,p,u,c,h,s);return o!==t&&o.dispose(),a!==e&&a.dispose(),f}},Xp={bandPart:Rp,gramSchmidt:Op,qr:Lp},Yp={absoluteDifference:Pp,computeWeightedLoss:Up,cosineDistance:zp,hingeLoss:Qp,huberLoss:Hp,logLoss:$p,meanSquaredError:Vp,sigmoidCrossEntropy:qp,softmaxCrossEntropy:jp};class Jp extends Bu{minimize(t,e=!1,n){const{value:r,grads:i}=this.computeGradients(t,n);if(null!=n){const t=n.map(t=>({name:t.name,tensor:i[t.name]}));this.applyGradients(t)}else this.applyGradients(i);return Xu(i),e?r:(r.dispose(),null)}get iterations(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(t,e){return Ah(t,e)}dispose(){null!=this.iterations_&&Xu(this.iterations_)}async saveIterations(){return null==this.iterations_&&(this.iterations_=0),{name:"iter",tensor:ki(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(t){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())}async extractIterations(t){return this.iterations_=(await t[0].tensor.data())[0],t.slice(1)}}Object.defineProperty(Jp,Symbol.hasInstance,{value:t=>null!=t.minimize&&null!=t.computeGradients&&null!=t.applyGradients});class Zp extends Jp{constructor(t,e,n=null){super(),this.learningRate=t,this.rho=e,this.epsilon=n,this.accumulatedGrads=[],this.accumulatedUpdates=[],null==n&&(this.epsilon=Se.backend.epsilon())}applyGradients(t){(Array.isArray(t)?t.map(t=>t.name):Object.keys(t)).forEach((e,n)=>{const r=Se.registeredVariables[e];null==this.accumulatedGrads[n]&&(this.accumulatedGrads[n]={originalName:e+"/accum_grad",variable:Gu(()=>Pi(r).variable(!1))}),null==this.accumulatedUpdates[n]&&(this.accumulatedUpdates[n]={originalName:e+"/accum_var",variable:Gu(()=>Pi(r).variable(!1))});const i=Array.isArray(t)?t[n].tensor:t[e];if(null==i)return;const s=this.accumulatedGrads[n].variable,o=this.accumulatedUpdates[n].variable;Gu(()=>{const t=s.mul(this.rho).add(i.square().mul(1-this.rho)),e=o.add(this.epsilon).sqrt().div(s.add(this.epsilon).sqrt()).mul(i),n=o.mul(this.rho).add(e.square().mul(1-this.rho));s.assign(t),o.assign(n);const a=e.mul(-this.learningRate).add(r);r.assign(a)})}),this.incrementIterations()}dispose(){null!=this.accumulatedUpdates&&(Xu(this.accumulatedGrads.map(t=>t.variable)),Xu(this.accumulatedUpdates.map(t=>t.variable)))}async getWeights(){const t=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(t.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(t){const e=(t=await this.extractIterations(t)).length/2;this.accumulatedGrads=t.slice(0,e).map(t=>({originalName:t.name,variable:t.tensor.variable(!1)})),this.accumulatedUpdates=t.slice(e,2*e).map(t=>({originalName:t.name,variable:t.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(t,e){return new t(e.learningRate,e.rho,e.epsilon)}}Zp.className="Adadelta",Nu(Zp);class tf extends Jp{constructor(t,e=.1){super(),this.learningRate=t,this.initialAccumulatorValue=e,this.accumulatedGrads=[]}applyGradients(t){(Array.isArray(t)?t.map(t=>t.name):Object.keys(t)).forEach((e,n)=>{const r=Se.registeredVariables[e];if(null==this.accumulatedGrads[n]){const t=!1;this.accumulatedGrads[n]={originalName:e+"/accumulator",variable:Gu(()=>Zc(r.shape,this.initialAccumulatorValue).variable(t))}}const i=Array.isArray(t)?t[n].tensor:t[e];if(null==i)return;const s=this.accumulatedGrads[n].variable;Gu(()=>{const t=s.add(i.square());s.assign(t);const e=i.div(t.add(Se.backend.epsilon()).sqrt()).mul(-this.learningRate).add(r);r.assign(e)})}),this.incrementIterations()}dispose(){null!=this.accumulatedGrads&&Xu(this.accumulatedGrads.map(t=>t.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(t){t=await this.extractIterations(t),this.accumulatedGrads=t.map(t=>({originalName:t.name,variable:t.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(t,e){return new t(e.learningRate,e.initialAccumulatorValue)}}tf.className="Adagrad",Nu(tf);class ef extends Jp{constructor(t,e,n,r=null){super(),this.learningRate=t,this.beta1=e,this.beta2=n,this.epsilon=r,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],Gu(()=>{this.accBeta1=ki(e).variable(),this.accBeta2=ki(n).variable()}),null==r&&(this.epsilon=Se.backend.epsilon())}applyGradients(t){const e=Array.isArray(t)?t.map(t=>t.name):Object.keys(t);Gu(()=>{const n=Fi(1,this.accBeta1),r=Fi(1,this.accBeta2);e.forEach((e,i)=>{const s=Se.registeredVariables[e];null==this.accumulatedFirstMoment[i]&&(this.accumulatedFirstMoment[i]={originalName:e+"/m",variable:Gu(()=>Pi(s).variable(!1))}),null==this.accumulatedSecondMoment[i]&&(this.accumulatedSecondMoment[i]={originalName:e+"/v",variable:Gu(()=>Pi(s).variable(!1))});const o=Array.isArray(t)?t[i].tensor:t[e];if(null==o)return;const a=this.accumulatedFirstMoment[i].variable,l=this.accumulatedSecondMoment[i].variable,u=a.mul(this.beta1).add(o.mul(1-this.beta1)),c=l.mul(this.beta2).add(o.square().mul(1-this.beta2)),h=u.div(n),d=c.div(r);a.assign(u),l.assign(c);const p=h.div(d.sqrt().add(this.epsilon)).mul(-this.learningRate).add(s);s.assign(p)}),this.accBeta1.assign(this.accBeta1.mul(this.beta1)),this.accBeta2.assign(this.accBeta2.mul(this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&Xu(this.accumulatedFirstMoment.map(t=>t.variable)),null!=this.accumulatedSecondMoment&&Xu(this.accumulatedSecondMoment.map(t=>t.variable))}async getWeights(){const t=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(t.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(t){t=await this.extractIterations(t),Gu(()=>{this.accBeta1.assign(Go(this.beta1,this.iterations_+1)),this.accBeta2.assign(Go(this.beta2,this.iterations_+1))});const e=t.length/2;this.accumulatedFirstMoment=t.slice(0,e).map(t=>({originalName:t.name,variable:t.tensor.variable(!1)})),this.accumulatedSecondMoment=t.slice(e,2*e).map(t=>({originalName:t.name,variable:t.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(t,e){return new t(e.learningRate,e.beta1,e.beta2,e.epsilon)}}ef.className="Adam",Nu(ef);class nf extends Jp{constructor(t,e,n,r=null,i=0){super(),this.learningRate=t,this.beta1=e,this.beta2=n,this.epsilon=r,this.decay=i,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],Gu(()=>{this.iteration=ki(0).variable(),this.accBeta1=ki(e).variable()}),null==r&&(this.epsilon=Se.backend.epsilon())}applyGradients(t){const e=Array.isArray(t)?t.map(t=>t.name):Object.keys(t);Gu(()=>{const n=Fi(1,this.accBeta1),r=Si(-this.learningRate,this.iteration.mul(this.decay).add(1));e.forEach((e,i)=>{const s=Se.registeredVariables[e];null==this.accumulatedFirstMoment[i]&&(this.accumulatedFirstMoment[i]={originalName:e+"/m",variable:Pi(s).variable(!1)}),null==this.accumulatedWeightedInfNorm[i]&&(this.accumulatedWeightedInfNorm[i]={originalName:e+"/v",variable:Pi(s).variable(!1)});const o=Array.isArray(t)?t[i].tensor:t[e];if(null==o)return;const a=this.accumulatedFirstMoment[i].variable,l=this.accumulatedWeightedInfNorm[i].variable,u=a.mul(this.beta1).add(o.mul(1-this.beta1)),c=l.mul(this.beta2),h=o.abs(),d=c.maximum(h);a.assign(u),l.assign(d);const p=r.div(n).mul(u.div(d.add(this.epsilon))).add(s);s.assign(p)}),this.iteration.assign(this.iteration.add(1)),this.accBeta1.assign(this.accBeta1.mul(this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&Xu(this.accumulatedFirstMoment.map(t=>t.variable)),null!=this.accumulatedWeightedInfNorm&&Xu(this.accumulatedWeightedInfNorm.map(t=>t.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(t){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(t,e){return new t(e.learningRate,e.beta1,e.beta2,e.epsilon,e.decay)}}nf.className="Adamax",Nu(nf);class rf extends Jp{constructor(t){super(),this.learningRate=t,this.setLearningRate(t)}applyGradients(t){(Array.isArray(t)?t.map(t=>t.name):Object.keys(t)).forEach((e,n)=>{const r=Array.isArray(t)?t[n].tensor:t[e];if(null==r)return;const i=Se.registeredVariables[e];Gu(()=>{const t=this.c.mul(r).add(i);i.assign(t)})}),this.incrementIterations()}setLearningRate(t){this.learningRate=t,null!=this.c&&this.c.dispose(),this.c=Yu(ki(-t))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(t){if(0!==(t=await this.extractIterations(t)).length)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(t,e){return new t(e.learningRate)}}rf.className="SGD",Nu(rf);class sf extends rf{constructor(t,e,n=!1){super(t),this.learningRate=t,this.momentum=e,this.useNesterov=n,this.accumulations=[],this.m=ki(this.momentum)}applyGradients(t){(Array.isArray(t)?t.map(t=>t.name):Object.keys(t)).forEach((e,n)=>{const r=Se.registeredVariables[e];if(null==this.accumulations[n]){const t=!1;this.accumulations[n]={originalName:e+"/momentum",variable:Gu(()=>Pi(r).variable(t))}}const i=this.accumulations[n].variable,s=Array.isArray(t)?t[n].tensor:t[e];null!=s&&Gu(()=>{let t;const e=this.m.mul(i).add(s);t=this.useNesterov?this.c.mul(s.add(e.mul(this.m))).add(r):this.c.mul(e).add(r),i.assign(e),r.assign(t)})}),this.incrementIterations()}dispose(){this.m.dispose(),null!=this.accumulations&&Xu(this.accumulations.map(t=>t.variable))}setMomentum(t){this.momentum=t}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(t){t=await this.extractIterations(t),this.accumulations=t.map(t=>({originalName:t.name,variable:t.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(t,e){return new t(e.learningRate,e.momentum,e.useNesterov)}}sf.className="Momentum",Nu(sf);class of extends Jp{constructor(t,e=.9,n=0,r=null,i=!1){if(super(),this.learningRate=t,this.decay=e,this.momentum=n,this.epsilon=r,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=i,null==r&&(this.epsilon=Se.backend.epsilon()),null==t)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(t){(Array.isArray(t)?t.map(t=>t.name):Object.keys(t)).forEach((e,n)=>{const r=Se.registeredVariables[e];null==this.accumulatedMeanSquares[n]&&(this.accumulatedMeanSquares[n]={originalName:e+"/rms",variable:Gu(()=>Pi(r).variable(!1))}),null==this.accumulatedMoments[n]&&(this.accumulatedMoments[n]={originalName:e+"/momentum",variable:Gu(()=>Pi(r).variable(!1))}),null==this.accumulatedMeanGrads[n]&&this.centered&&(this.accumulatedMeanGrads[n]={originalName:e+"/mg",variable:Gu(()=>Pi(r).variable(!1))});const i=Array.isArray(t)?t[n].tensor:t[e];if(null==i)return;const s=this.accumulatedMeanSquares[n].variable,o=this.accumulatedMoments[n].variable;Gu(()=>{const t=s.mul(this.decay).add(i.square().mul(1-this.decay));if(this.centered){const e=this.accumulatedMeanGrads[n].variable,a=e.mul(this.decay).add(i.mul(1-this.decay)),l=o.mul(this.momentum).add(i.mul(this.learningRate).div(t.sub(a.square().add(this.epsilon)).sqrt()));s.assign(t),e.assign(a),o.assign(l);const u=r.sub(l);r.assign(u)}else{const t=s.mul(this.decay).add(i.square().mul(1-this.decay)),e=o.mul(this.momentum).add(i.mul(this.learningRate).div(t.add(this.epsilon).sqrt()));s.assign(t),o.assign(e);const n=r.sub(e);r.assign(n)}})}),this.incrementIterations()}dispose(){null!=this.accumulatedMeanSquares&&Xu(this.accumulatedMeanSquares.map(t=>t.variable)),null!=this.accumulatedMeanGrads&&this.centered&&Xu(this.accumulatedMeanGrads.map(t=>t.variable)),null!=this.accumulatedMoments&&Xu(this.accumulatedMoments.map(t=>t.variable))}async getWeights(){const t=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&t.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(t.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(t){t=await this.extractIterations(t);const e=this.centered?t.length/3:t.length/2;this.accumulatedMeanSquares=t.slice(0,e).map(t=>({originalName:t.name,variable:t.tensor.variable(!1)})),this.accumulatedMoments=t.slice(e,2*e).map(t=>({originalName:t.name,variable:t.tensor.variable(!1)})),this.centered&&(this.accumulatedMeanGrads=t.slice(2*e,3*e).map(t=>({originalName:t.name,variable:t.tensor.variable(!1)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(t,e){return new t(e.learningRate,e.decay,e.momentum,e.epsilon,e.centered)}}of.className="RMSProp",Nu(of);class af{static sgd(t){return new rf(t)}static momentum(t,e,n=!1){return new sf(t,e,n)}static rmsprop(t,e=.9,n=0,r=null,i=!1){return new of(t,e,n,r,i)}static adam(t=.001,e=.9,n=.999,r=null){return new ef(t,e,n,r)}static adadelta(t=.001,e=.95,n=null){return new Zp(t,e,n)}static adamax(t=.002,e=.9,n=.999,r=null,i=0){return new nf(t,e,n,r,i)}static adagrad(t,e=.1){return new tf(t,e)}}const lf={sgd:af.sgd,momentum:af.momentum,adadelta:af.adadelta,adagrad:af.adagrad,rmsprop:af.rmsprop,adamax:af.adamax,adam:af.adam},uf="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:"undefined"!=typeof setImmediate?setImmediate:t=>t();function cf(){return new Promise(t=>uf(()=>t()))}function hf(t,e,n){return[n*("number"==typeof t?t:t[0]),e*("number"==typeof t?t:t[1])]}function df(t,e,n,r=!0){let i=[];if(r)i=i.concat(e.slice(0)),i.push(t[0]/n),i=i.concat(t.slice(1));else{i=i.concat(t[0]);const n=e.length;for(let r=0;r<n;++r)i=i.concat([t[r+1]/e[r],e[r]]);i=i.concat(t.slice(n+1))}return i}function pf(t,e,n=!0){const r=[];if(n){r.push(e);for(let n=e+1;n<t;++n)n<=2*e?(r.push(n),r.push(n-(e+1))):r.push(n)}else{const n=[],i=[];for(let r=1;r<t;++r)r>=2*e+1||r%2==1?i.push(r):n.push(r);r.push(...n),r.push(0),r.push(...i)}return r}function ff(t,e,n,r=!0){const i=[];i.push(r?t[0]/n:t[0]*n);for(let s=1;s<t.length;++s)i.push(s<=e.length?r?e[s-1]*t[s]:t[s]/e[s-1]:t[s]);return i}function Af(t,e){const n=[0];for(let r=0;r<e;++r)n.push(t[r][0]);return n}function mf(t,e,n){const r=t.slice(0,1);for(let i=0;i<n;++i)r.push(t[i+1]-e[i][0]-e[i][1]);return r}const gf=.3275911,yf=.254829592,wf=-.284496736,bf=1.421413741,vf=-1.453152027,xf=1.061405429;function _f(...t){V().getBool("IS_TEST")||console.warn(...t)}function Cf(...t){V().getBool("IS_TEST")||console.log(...t)}function Sf(t,e){if(t.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${e.length}.`);const n=new Float32Array(2*t.length);for(let r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function Ef(t){const e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}function Bf(t){const e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let i=0;i<t.length;i+=4)n[Math.floor(i/4)]=t[i],r[Math.floor(i/4)]=t[i+1];return{real:n,imag:r}}function kf(t){const e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let i=2;i<t.length;i+=4)n[Math.floor(i/4)]=t[i],r[Math.floor(i/4)]=t[i+1];return{real:n,imag:r}}function Nf(t,e){return{real:t[2*e],imag:t[2*e+1]}}function If(t,e,n,r){t[2*r]=e,t[2*r+1]=n}function Ff(t,e){const n=new Float32Array(t/2),r=new Float32Array(t/2);for(let i=0;i<Math.ceil(t/2);i++){const s=(e?2:-2)*Math.PI*(i/t);n[i]=Math.cos(s),r[i]=Math.sin(s)}return{real:n,imag:r}}function Tf(t,e,n){const r=(n?2:-2)*Math.PI*(t/e);return{real:Math.cos(r),imag:Math.sin(r)}}function Rf(t,e,n){if("complex64"===e){if("complex64"===t.dtype)return t.clone();const e=Vo(t.shape),r=t.toFloat(),i=n.complex(r,e);return e.dispose(),r.dispose(),i}if(!Ft(t.dtype,e))return Se.makeTensorFromDataId(t.dataId,t.shape,e);if("complex64"===t.dtype){const r=n.real(t),i=r.cast(e);return r.dispose(),i}if("int32"===e)return n.int(t);if("bool"===e){const e=ki(0,t.dtype),r=n.notEqual(t,e);return e.dispose(),r}throw new Error(`Error in Cast: failed to cast ${t.dtype} to ${e}`)}function Of(t,e){return Se.makeTensorFromDataId(t.dataId,e,t.dtype)}function Df(t,e,n){const r=(e-t)/(n-1),i=qt(n,"float32");i[0]=t;for(let s=1;s<i.length;s++)i[s]=i[s-1]+r;return Zh(i,"float32")}function Lf(t,e,n){const r=new Array(t.rank).fill(0),i=t.shape.slice();return e.map(e=>{const s=[...i];s[n]=e;const o=t.slice(r,s);return r[n]+=e,o})}function Mf(t,e){const n=new Array(t.rank);for(let i=0;i<n.length;i++)n[i]=t.shape[i]*e[i];const r=Fc(n,t.dtype);for(let i=0;i<r.values.length;++i){const e=r.indexToLoc(i),n=new Array(t.rank);for(let r=0;r<n.length;r++)n[r]=e[r]%t.shape[r];const s=t.locToIndex(n);r.values[i]=t.values[s]}return r.toTensor()}function Uf(t,e,n,r,i){const s=e[e.length-1],[o,a]=[t.length/s,s],l=Bt(n,o*r),u=Bt("int32",o*r);for(let h=0;h<o;h++){const e=h*a,n=t.subarray(e,e+a),i=[];for(let t=0;t<n.length;t++)i.push({value:n[t],index:t});i.sort((t,e)=>e.value-t.value);const s=h*r,o=l.subarray(s,s+r),c=u.subarray(s,s+r);for(let t=0;t<r;t++)o[t]=i[t].value,c[t]=i[t].index}const c=e.slice();return c[c.length-1]=r,[$a(l,c,n),$a(u,c,"int32")]}class Pf{constructor(t,e){this.backend=t,this.dataMover=e,this.data=new WeakMap,this.dataIdsCount=0}get(t){return this.data.has(t)||this.dataMover.moveData(this.backend,t),this.data.get(t)}set(t,e){this.dataIdsCount++,this.data.set(t,e)}has(t){return this.data.has(t)}delete(t){return this.dataIdsCount--,this.data.delete(t)}numDataIds(){return this.dataIdsCount}}class zf{time(t){return Qf("time")}read(t){return Qf("read")}readSync(t){return Qf("readSync")}numDataIds(){return Qf("numDataIds")}disposeData(t){return Qf("disposeData")}write(t,e,n){return Qf("write")}move(t,e,n,r){return Qf("move")}memory(){return Qf("memory")}floatPrecision(){return Qf("floatPrecision")}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}batchMatMul(t,e,n,r){return Qf("batchMatMul")}fusedBatchMatMul({}){return Qf("fusedBatchMatMul")}slice(t,e,n){return Qf("slice")}stridedSlice(t,e,n,r){return Qf("stridedSlice")}unstack(t,e){return Qf("unstack")}reverse(t,e){return Qf("reverse")}concat(t,e){return Qf("concat")}neg(t){return Qf("neg")}add(t,e){return Qf("add")}addN(t){return Qf("addN")}subtract(t,e){return Qf("subtract")}multiply(t,e){return Qf("multiply")}realDivide(t,e){return Qf("realDivide")}floorDiv(t,e){return Qf("floorDiv")}sum(t,e){return Qf("sum")}prod(t,e){return Qf("prod")}unsortedSegmentSum(t,e,n){return Qf("unsortedSegmentSum")}argMin(t,e){return Qf("argMin")}argMax(t,e){return Qf("argMax")}equal(t,e){return Qf("equal")}notEqual(t,e){return Qf("notEqual")}less(t,e){return Qf("less")}lessEqual(t,e){return Qf("lessEqual")}greater(t,e){return Qf("greater")}greaterEqual(t,e){return Qf("greaterEqual")}logicalNot(t){return Qf("logicalNot")}logicalAnd(t,e){return Qf("logicalAnd")}logicalOr(t,e){return Qf("logicalOr")}where(t){return Qf("where")}select(t,e,n){return Qf("select")}topk(t,e,n){return Qf("topk")}min(t,e){return Qf("min")}minimum(t,e){return Qf("minimum")}mod(t,e){return Qf("mod")}max(t,e){return Qf("max")}maximum(t,e){return Qf("maximum")}all(t,e){return Qf("all")}any(t,e){return Qf("any")}squaredDifference(t,e){return Qf("squaredDifference")}ceil(t){return Qf("ceil")}floor(t){return Qf("floor")}round(t){return Qf("round")}sign(t){return Qf("sign")}isNaN(t){return Qf("isNaN")}isInf(t){return Qf("isInf")}isFinite(t){return Qf("isFinite")}pow(t,e){return Qf("pow")}exp(t){return Qf("exp")}expm1(t){return Qf("expm1")}softmax(t,e){return Qf("softmax")}log(t){return Qf("log")}log1p(t){return Qf("log1p")}sqrt(t){return Qf("sqrt")}rsqrt(t){return Qf("rsqrt")}square(t){return Qf("square")}reciprocal(t){return Qf("reciprocal")}relu(t){return Qf("relu")}relu6(t){return Qf("relu6")}prelu(t,e){return Qf("prelu")}elu(t){return Qf("elu")}eluDer(t,e){return Qf("eluDer")}selu(t){return Qf("selu")}int(t){return Qf("int")}clip(t,e,n){return Qf("clip")}abs(t){return Qf("abs")}complexAbs(t){return Qf("complexAbs")}sigmoid(t){return Qf("sigmoid")}softplus(t){return Qf("softplus")}sin(t){return Qf("sin")}cos(t){return Qf("cos")}tan(t){return Qf("tan")}asin(t){return Qf("asin")}acos(t){return Qf("acos")}atan(t){return Qf("atan")}atan2(t,e){return Qf("atan2")}sinh(t){return Qf("sinh")}cosh(t){return Qf("cosh")}tanh(t){return Qf("tanh")}asinh(t){return Qf("asinh")}acosh(t){return Qf("acosh")}atanh(t){return Qf("atanh")}erf(t){return Qf("erf")}step(t,e){return Qf("step")}fusedConv2d({}){return Qf("fusedConv2d")}conv2d(t,e,n){return Qf("conv2d")}conv2dDerInput(t,e,n){return Qf("conv2dDerInput")}conv2dDerFilter(t,e,n){return Qf("conv2dDerFilter")}fusedDepthwiseConv2D({}){return Qf("fusedDepthwiseConv2D")}depthwiseConv2D(t,e,n){return Qf("depthwiseConv2D")}depthwiseConv2DDerInput(t,e,n){return Qf("depthwiseConv2DDerInput")}depthwiseConv2DDerFilter(t,e,n){return Qf("depthwiseConv2DDerFilter")}conv3d(t,e,n){return Qf("conv3d")}conv3dDerInput(t,e,n){return Qf("conv3dDerInput")}conv3dDerFilter(t,e,n){return Qf("conv3dDerFilter")}maxPool(t,e){return Qf("maxPool")}maxPoolBackprop(t,e,n,r){return Qf("maxPoolBackprop")}avgPool(t,e){return Qf("avgPool")}avgPoolBackprop(t,e,n){return Qf("avgPoolBackprop")}avgPool3d(t,e){return Qf("avgPool3d")}avgPool3dBackprop(t,e,n){return Qf("avgPool3dBackprop")}maxPool3d(t,e){return Qf("maxPool3d")}maxPool3dBackprop(t,e,n,r){return Qf("maxPool3dBackprop")}reshape(t,e){return Qf("reshape")}cast(t,e){return Qf("cast")}tile(t,e){return Qf("tile")}pad(t,e,n){return Qf("pad")}transpose(t,e){return Qf("transpose")}gather(t,e,n){return Qf("gather")}gatherND(t,e){return Qf("gatherND")}scatterND(t,e,n){return Qf("scatterND")}batchToSpaceND(t,e,n){return Qf("batchToSpaceND")}spaceToBatchND(t,e,n){return Qf("spaceToBatchND")}resizeBilinear(t,e,n,r){return Qf("resizeBilinear")}resizeBilinearBackprop(t,e,n){return Qf("resizeBilinearBackprop")}resizeNearestNeighbor(t,e,n,r){return Qf("resizeNearestNeighbor")}resizeNearestNeighborBackprop(t,e,n){return Qf("resizeNearestNeighborBackprop")}batchNorm(t,e,n,r,i,s){return Qf("batchNorm")}localResponseNormalization4D(t,e,n,r,i){return Qf("localResponseNormalization4D")}LRNGrad(t,e,n,r,i,s,o){return Qf("LRNGrad")}multinomial(t,e,n,r){return Qf("multinomial")}oneHot(t,e,n,r){return Qf("oneHot")}cumsum(t,e,n,r){return Qf("cumsum")}nonMaxSuppression(t,e,n,r,i){return Qf("nonMaxSuppression")}fft(t){return Qf("fft")}ifft(t){return Qf("ifft")}complex(t,e){return Qf("complex")}real(t){return Qf("real")}imag(t){return Qf("imag")}cropAndResize(t,e,n,r,i,s){return Qf("cropAndResize")}depthToSpace(t,e,n){return Qf("depthToSpace")}split(t,e,n){return Qf("split")}sparseToDense(t,e,n,r){return Qf("sparseToDense")}diag(t){return Qf("diag")}fill(t,e,n){return Qf("fill")}onesLike(t){return Qf("onesLike")}zerosLike(t){return Qf("zerosLike")}linspace(t,e,n){return Qf("linspace")}dispose(){return Qf("dispose")}}function Qf(t){throw new Error(`'${t}' not yet implemented or not found in the registry. Did you forget to import the kernel?`)}let Hf;function $f(){return null==Hf&&(Hf=oc().epsilon()),Hf}ue.prototype.abs=function(){return this.throwIfDisposed(),lc(this)},ue.prototype.acos=function(){return this.throwIfDisposed(),uc(this)},ue.prototype.acosh=function(){return this.throwIfDisposed(),cc(this)},ue.prototype.addStrict=function(t){return this.throwIfDisposed(),Qd(this,t)},ue.prototype.add=function(t){return this.throwIfDisposed(),$i(this,t)},ue.prototype.all=function(t,e){return this.throwIfDisposed(),dc(this,t,e)},ue.prototype.any=function(t,e){return this.throwIfDisposed(),pc(this,t,e)},ue.prototype.argMax=function(t){return this.throwIfDisposed(),fc(this,t)},ue.prototype.argMin=function(t){return this.throwIfDisposed(),Ac(this,t)},ue.prototype.asScalar=function(){return this.throwIfDisposed(),ht(1===this.size,()=>"The array must have only 1 element."),qi(this,[])},ue.prototype.asType=function(t){return this.throwIfDisposed(),bi(this,t)},ue.prototype.as1D=function(){return this.throwIfDisposed(),qi(this,[this.size])},ue.prototype.as2D=function(t,e){return this.throwIfDisposed(),qi(this,[t,e])},ue.prototype.as3D=function(t,e,n){return this.throwIfDisposed(),qi(this,[t,e,n])},ue.prototype.as4D=function(t,e,n,r){return this.throwIfDisposed(),qi(this,[t,e,n,r])},ue.prototype.as5D=function(t,e,n,r,i){return this.throwIfDisposed(),qi(this,[t,e,n,r,i])},ue.prototype.asin=function(){return this.throwIfDisposed(),mc(this)},ue.prototype.asinh=function(){return this.throwIfDisposed(),gc(this)},ue.prototype.atan=function(){return this.throwIfDisposed(),yc(this)},ue.prototype.atan2=function(t){return this.throwIfDisposed(),wc(this,t)},ue.prototype.atanh=function(){return this.throwIfDisposed(),bc(this)},ue.prototype.avgPool=function(t,e,n,r){return this.throwIfDisposed(),vc(this,t,e,n,r)},ue.prototype.batchToSpaceND=function(t,e){return this.throwIfDisposed(),Pa(this,t,e)},ue.prototype.batchNorm=function(t,e,n,r,i){return this.throwIfDisposed(),Ec(this,t,e,n,r,i)},ue.prototype.broadcastTo=function(t){return this.throwIfDisposed(),Ic(this,t)},ue.prototype.cast=function(t){return this.throwIfDisposed(),bi(this,t)},ue.prototype.ceil=function(){return this.throwIfDisposed(),Tc(this)},ue.prototype.clipByValue=function(t,e){return this.throwIfDisposed(),Rc(this,t,e)},ue.prototype.concat=function(t,e){return this.throwIfDisposed(),t instanceof ue&&(t=[t]),Va([this,...t],e)},ue.prototype.conv1d=function(t,e,n,r,i,s){return this.throwIfDisposed(),Uc(this,t,e,n,r,i,s)},ue.prototype.conv2dTranspose=function(t,e,n,r,i){return this.throwIfDisposed(),Pc(this,t,e,n,r,i)},ue.prototype.conv2d=function(t,e,n,r,i,s){return this.throwIfDisposed(),Ps(this,t,e,n,r,i,s)},ue.prototype.cos=function(){return this.throwIfDisposed(),ma(this)},ue.prototype.cosh=function(){return this.throwIfDisposed(),ya(this)},ue.prototype.cumsum=function(t,e,n){return this.throwIfDisposed(),Gs(this,t,e,n)},ue.prototype.depthToSpace=function(t,e){return this.throwIfDisposed(),Hc(this,t,e)},ue.prototype.depthwiseConv2D=function(t,e,n,r,i,s){return Vu("depthwiseConv2D is deprecated, use depthwiseConv2d instead"),this.throwIfDisposed(),$c(this,t,e,n,r,i,s)},ue.prototype.depthwiseConv2d=function(t,e,n,r,i,s){return this.throwIfDisposed(),$c(this,t,e,n,r,i,s)},ue.prototype.dilation2d=function(t,e,n,r,i){return this.throwIfDisposed(),qc(this,t,e,n,r,i)},ue.prototype.divNoNan=function(t){return this.throwIfDisposed(),jc(this,t)},ue.prototype.divStrict=function(t){return this.throwIfDisposed(),Hd(this,t)},ue.prototype.div=function(t){return this.throwIfDisposed(),Si(this,t)},ue.prototype.dot=function(t){return this.throwIfDisposed(),Kc(this,t)},ue.prototype.elu=function(){return this.throwIfDisposed(),Wc(this)},ue.prototype.equalStrict=function(t){return this.throwIfDisposed(),Dd(this,t)},ue.prototype.equal=function(t){return this.throwIfDisposed(),Bo(this,t)},ue.prototype.erf=function(){return this.throwIfDisposed(),Gc(this)},ue.prototype.exp=function(){return this.throwIfDisposed(),ro(this)},ue.prototype.expandDims=function(t){return this.throwIfDisposed(),il(this,t)},ue.prototype.expm1=function(){return this.throwIfDisposed(),Xc(this)},ue.prototype.fft=function(){return this.throwIfDisposed(),Jc(this)},ue.prototype.flatten=function(){return this.throwIfDisposed(),qi(this,[this.size])},ue.prototype.floor=function(){return this.throwIfDisposed(),Po(this)},ue.prototype.floorDiv=function(t){return this.throwIfDisposed(),Ci(this,t)},ue.prototype.gather=function(t,e){return this.throwIfDisposed(),dl(this,t,e)},ue.prototype.greaterEqualStrict=function(t){return this.throwIfDisposed(),Ld(this,t)},ue.prototype.greaterEqual=function(t){return this.throwIfDisposed(),ks(this,t)},ue.prototype.greaterStrict=function(t){return this.throwIfDisposed(),Md(this,t)},ue.prototype.greater=function(t){return this.throwIfDisposed(),Mo(this,t)},ue.prototype.ifft=function(){return this.throwIfDisposed(),th(this)},ue.prototype.irfft=function(){return this.throwIfDisposed(),rh(this)},ue.prototype.isFinite=function(){return this.throwIfDisposed(),ih(this)},ue.prototype.isInf=function(){return this.throwIfDisposed(),sh(this)},ue.prototype.isNaN=function(){return this.throwIfDisposed(),oh(this)},ue.prototype.leakyRelu=function(t){return this.throwIfDisposed(),ah(this,t)},ue.prototype.lessEqualStrict=function(t){return this.throwIfDisposed(),Ud(this,t)},ue.prototype.lessEqual=function(t){return this.throwIfDisposed(),Ns(this,t)},ue.prototype.lessStrict=function(t){return this.throwIfDisposed(),Pd(this,t)},ue.prototype.less=function(t){return this.throwIfDisposed(),Io(this,t)},ue.prototype.localResponseNormalization=function(t,e,n,r){return this.throwIfDisposed(),uh(this,t,e,n,r)},ue.prototype.logSigmoid=function(){return this.throwIfDisposed(),yh(this)},ue.prototype.logSoftmax=function(t){return this.throwIfDisposed(),bh(this,t)},ue.prototype.logSumExp=function(t,e){return this.throwIfDisposed(),vh(this,t,e)},ue.prototype.log=function(){return this.throwIfDisposed(),Wo(this)},ue.prototype.log1p=function(){return this.throwIfDisposed(),ch(this)},ue.prototype.logicalAnd=function(t){return this.throwIfDisposed(),Is(this,t)},ue.prototype.logicalNot=function(){return this.throwIfDisposed(),ua(this)},ue.prototype.logicalOr=function(t){return this.throwIfDisposed(),xh(this,t)},ue.prototype.logicalXor=function(t){return this.throwIfDisposed(),_h(this,t)},ue.prototype.matMul=function(t,e,n){return this.throwIfDisposed(),vs(this,t,e,n)},ue.prototype.maxPool=function(t,e,n,r){return this.throwIfDisposed(),Ch(this,t,e,n,r)},ue.prototype.max=function(t,e){return this.throwIfDisposed(),wh(this,t,e)},ue.prototype.maximumStrict=function(t){return this.throwIfDisposed(),$d(this,t)},ue.prototype.maximum=function(t){return this.throwIfDisposed(),pl(this,t)},ue.prototype.mean=function(t,e){return this.throwIfDisposed(),Bh(this,t,e)},ue.prototype.min=function(t,e){return this.throwIfDisposed(),kh(this,t,e)},ue.prototype.minimumStrict=function(t){return this.throwIfDisposed(),Vd(this,t)},ue.prototype.minimum=function(t){return this.throwIfDisposed(),Nh(this,t)},ue.prototype.modStrict=function(t){return this.throwIfDisposed(),qd(this,t)},ue.prototype.mod=function(t){return this.throwIfDisposed(),Ih(this,t)},ue.prototype.mulStrict=function(t){return this.throwIfDisposed(),jd(this,t)},ue.prototype.mul=function(t){return this.throwIfDisposed(),vi(this,t)},ue.prototype.neg=function(){return this.throwIfDisposed(),Ei(this)},ue.prototype.norm=function(t,e,n){return this.throwIfDisposed(),Xd(this,t,e,n)},ue.prototype.notEqualStrict=function(t){return this.throwIfDisposed(),zd(this,t)},ue.prototype.notEqual=function(t){return this.throwIfDisposed(),Oh(this,t)},ue.prototype.oneHot=function(t,e=1,n=0){return this.throwIfDisposed(),gu(this,t,e,n)},ue.prototype.onesLike=function(){return this.throwIfDisposed(),Dh(this)},ue.prototype.pad=function(t,e){return this.throwIfDisposed(),ba(this,t,e)},ue.prototype.pool=function(t,e,n,r,i){return this.throwIfDisposed(),Qh(this,t,e,n,r,i)},ue.prototype.powStrict=function(t){return this.throwIfDisposed(),Kd(this,t)},ue.prototype.pow=function(t){return this.throwIfDisposed(),Go(this,t)},ue.prototype.prelu=function(t){return this.throwIfDisposed(),Hh(this,t)},ue.prototype.prod=function(t,e){return this.throwIfDisposed(),Vh(this,t,e)},ue.prototype.reciprocal=function(){return this.throwIfDisposed(),ed(this)},ue.prototype.relu=function(){return this.throwIfDisposed(),nd(this)},ue.prototype.relu6=function(){return this.throwIfDisposed(),rd(this)},ue.prototype.reshapeAs=function(t){return this.throwIfDisposed(),qi(this,t.shape)},ue.prototype.reshape=function(t){return this.throwIfDisposed(),qi(this,t)},ue.prototype.resizeBilinear=function(t,e){return this.throwIfDisposed(),Fp(this,t,e)},ue.prototype.resizeNearestNeighbor=function(t,e){return this.throwIfDisposed(),Tp(this,t,e)},ue.prototype.reverse=function(t){return this.throwIfDisposed(),sa(this,t)},ue.prototype.rfft=function(){return this.throwIfDisposed(),ld(this)},ue.prototype.round=function(){return this.throwIfDisposed(),ud(this)},ue.prototype.rsqrt=function(){return this.throwIfDisposed(),uo(this)},ue.prototype.selu=function(){return this.throwIfDisposed(),cd(this)},ue.prototype.separableConv2d=function(t,e,n,r,i,s){return this.throwIfDisposed(),hd(this,t,e,n,r,i,s)},ue.prototype.sigmoid=function(){return this.throwIfDisposed(),Ma(this)},ue.prototype.sign=function(){return this.throwIfDisposed(),pd(this)},ue.prototype.sin=function(){return this.throwIfDisposed(),Vs(this)},ue.prototype.sinh=function(){return this.throwIfDisposed(),js(this)},ue.prototype.slice=function(t,e){return this.throwIfDisposed(),el(this,t,e)},ue.prototype.softmax=function(t){return this.throwIfDisposed(),yd(this,t)},ue.prototype.softplus=function(){return this.throwIfDisposed(),wd(this)},ue.prototype.spaceToBatchND=function(t,e){return this.throwIfDisposed(),_s(this,t,e)},ue.prototype.split=function(t,e){return this.throwIfDisposed(),Os(this,t,e)},ue.prototype.sqrt=function(){return this.throwIfDisposed(),Ni(this)},ue.prototype.square=function(){return this.throwIfDisposed(),Ii(this)},ue.prototype.squaredDifference=function(t){return this.throwIfDisposed(),bd(this,t)},ue.prototype.squaredDifferenceStrict=function(t){return this.throwIfDisposed(),Wd(this,t)},ue.prototype.squeeze=function(t){return this.throwIfDisposed(),vd(this,t)},ue.prototype.stack=function(t,e){this.throwIfDisposed();const n=t instanceof ue?[this,t]:[this,...t];return sl(n,e)},ue.prototype.step=function(t){return this.throwIfDisposed(),xi(this,t)},ue.prototype.stridedSlice=function(t,e,n,r,i,s,o,a){return this.throwIfDisposed(),xd(this,t,e,n,r,i,s,o,a)},ue.prototype.subStrict=function(t){return this.throwIfDisposed(),Gd(this,t)},ue.prototype.sub=function(t){return this.throwIfDisposed(),Fi(this,t)},ue.prototype.sum=function(t,e){return this.throwIfDisposed(),ts(this,t,e)},ue.prototype.tan=function(){return this.throwIfDisposed(),_d(this)},ue.prototype.tanh=function(){return this.throwIfDisposed(),_c(this)},ue.prototype.tile=function(t){return this.throwIfDisposed(),co(this,t)},ue.prototype.toBool=function(){return this.throwIfDisposed(),bi(this,"bool")},ue.prototype.toFloat=function(){return this.throwIfDisposed(),bi(this,"float32")},ue.prototype.toInt=function(){return this.throwIfDisposed(),bi(this,"int32")},ue.prototype.topk=function(t,e){return this.throwIfDisposed(),kd(this,t,e)},ue.prototype.transpose=function(t){return this.throwIfDisposed(),Ws(this,t)},ue.prototype.unsortedSegmentSum=function(t,e){return this.throwIfDisposed(),po(this,t,e)},ue.prototype.unstack=function(t){return this.throwIfDisposed(),Id(this,t)},ue.prototype.where=function(t,e){return this.throwIfDisposed(),Fs(t,this,e)},ue.prototype.zerosLike=function(){return this.throwIfDisposed(),Pi(this)},ae=m;class Vf extends Error{constructor(t){super(t),Object.setPrototypeOf(this,Vf.prototype)}}class qf extends Error{constructor(t){super(t),Object.setPrototypeOf(this,qf.prototype)}}class jf extends Error{constructor(t){super(t),Object.setPrototypeOf(this,jf.prototype)}}class Kf extends Error{constructor(t){super(t),Object.setPrototypeOf(this,Kf.prototype)}}class Wf extends Error{constructor(t){super(t),Object.setPrototypeOf(this,Wf.prototype)}}function Gf(t,e){if(Array.isArray(t)){let n=[];for(let r=0;r<e;r++)n=n.concat(t);return n}{const n=new Array(e);return n.fill(t),n}}function Xf(t,e){if(!t)throw new Wf(e)}function Yf(t,e){let n=0;for(const r of t)r===e&&n++;return n}function Jf(t){return 1===t.length?t[0]:t}function Zf(t){return Array.isArray(t)?t:[t]}function tA(t){const e=t.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==e[0]?e:"private"+e}function eA(t){return t.length<=1||-1===t.indexOf("_")?t:t.replace(/[_]+(\w|$)/g,(t,e)=>e.toUpperCase())}Error;let nA={};function rA(t){if(null==t)return null;const e={};return e.className=t.getClassName(),e.config=t.getConfig(),e}function iA(t,e={},n={},r="object",i=!1){if("string"==typeof t){const i=t;let s;if(i in n)s=n[i];else if(i in nA)s=nA[i];else if(s=e[i],null==s)throw new jf(`Unknown ${r}: ${t}. This may be due to one of the following reasons:\n1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.\n2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return s}{const s=t;if(null==s.className||null==s.config)throw new jf(r+": Improper config format: "+JSON.stringify(s)+".\n'className' and 'config' must set.");const o=s.className;let a,l;if(o in n?[a,l]=n[o]:o in nA?[a,l]=nA.className:o in e&&([a,l]=e[o]),null==a)throw new jf(`Unknown ${r}: ${o}. This may be due to one of the following reasons:\n1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.\n2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(null!=l){const t={};for(const n of Object.keys(nA))t[n]=nA[n];for(const i of Object.keys(n))t[i]=n[i];s.config.customObjects=t;const e=Object.assign({},nA);for(const i of Object.keys(n))nA[i]=n[i];!function t(e){if(null!=e&&"object"==typeof e)if(Array.isArray(e))e.forEach(e=>t(e));else{const n=Object.keys(e);for(const r of n){const n=e[r];null!=n&&"object"==typeof n&&(Array.isArray(n)||"ndarray"!==n.type||"number"!=typeof n.value?t(n):e[r]=n.value)}}}(s.config);const r=l(a,s.config,n,i);return nA=Object.assign({},e),r}{const t=Object.assign({},nA);for(const r of Object.keys(n))nA[r]=n[r];const e=new a(s.config);return nA=Object.assign({},t),e}}}function sA(t,e){return-1*function(t,e){return t<e?-1:t>e?1:0}(t,e)}function oA(t){if(null==t)return t;const e=[];for(const n of t)-1===e.indexOf(n)&&e.push(n);return e}function aA(t){if(null==t)throw new jf("Invalid value in obj: "+JSON.stringify(t));for(const e in t)if(t.hasOwnProperty(e))return!1;return!0}function lA(t,e,n){if(null!=n&&t.indexOf(n)<0)throw new jf(`${n} is not a valid ${e}.  Valid values are ${t} or null/undefined.`)}function uA(t,e,n=0,r=1/0){return Xf(n>=0),Xf(r>=n),Array.isArray(t)&&t.length>=n&&t.length<=r&&t.every(t=>typeof t===e)}function cA(t,e){Array.isArray(t)?(r.assert(t.length>0,()=>e+" is unexpectedly an empty array."),t.forEach((t,n)=>cA(t,`element ${n+1} of ${e}`))):r.assert(Number.isInteger(t)&&t>0,()=>`Expected ${e} to be a positive integer, but got `+function t(e){return null===e?"null":Array.isArray(e)?"["+e.map(e=>t(e)).join(",")+"]":"string"==typeof e?`"${e}"`:""+e}(t)+".")}function hA(t){return"relu"===t?"relu":"linear"===t?"linear":"elu"===t?"elu":null}function dA(t,e){return Gu(()=>Ni(ts(vi(t,t),e,!0)))}class pA extends p.Serializable{getConfig(){return{}}}class fA extends pA{constructor(t){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=null!=t.maxValue?t.maxValue:this.defaultMaxValue,this.axis=null!=t.axis?t.axis:this.defaultAxis}apply(t){return Gu(()=>{const e=dA(t,this.axis),n=Rc(e,0,this.maxValue);return vi(t,Si(n,$i($f(),e)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}fA.className="MaxNorm",p.registerClass(fA);class AA extends pA{constructor(t){super(),this.defaultAxis=0,this.axis=null!=t.axis?t.axis:this.defaultAxis}apply(t){return Gu(()=>Si(t,$i($f(),dA(t,this.axis))))}getConfig(){return{axis:this.axis}}}AA.className="UnitNorm",p.registerClass(AA);class mA extends pA{apply(t){return nd(t)}}mA.className="NonNeg",p.registerClass(mA);class gA extends pA{constructor(t){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=null!=t.minValue?t.minValue:this.defaultMinValue,this.maxValue=null!=t.maxValue?t.maxValue:this.defaultMaxValue,this.rate=null!=t.rate?t.rate:this.defaultRate,this.axis=null!=t.axis?t.axis:this.defaultAxis}apply(t){return Gu(()=>{const e=dA(t,this.axis),n=$i(vi(this.rate,Rc(e,this.minValue,this.maxValue)),vi(1-this.rate,e));return vi(t,Si(n,$i($f(),e)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}gA.className="MinMaxNorm",p.registerClass(gA);const yA={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function wA(t){return rA(t)}function bA(t,e={}){return iA(t,p.SerializationMap.getMap().classNameMap,e,"constraint")}function vA(t){return null==t?null:"string"==typeof t?bA({className:t in yA?yA[t]:t,config:{}}):t instanceof pA?t:bA(t)}function xA(t){return new fA(t)}function _A(t){return new AA(t)}function CA(){return new mA}function SA(t){return new gA(t)}const EA=["channelsFirst","channelsLast"],BA=["valid","same","causal"],kA=["max","avg"],NA=["sum","mul","concat","ave"],IA=new Map;function FA(t){lA(EA,"DataFormat",t)}function TA(t){lA(BA,"PaddingMode",t)}function RA(t){lA(kA,"PoolMode",t)}const OA=[];function DA(t,e){OA.push(t);try{const t=e();return OA.pop(),t}catch(n){throw OA.pop(),n}}function LA(t){if(!PA(t))throw new Error("Not a valid tensor name: '"+t+"'");return(0===OA.length?"":OA.join("/")+"/")+t}function MA(t){if(!PA(t))throw new Error("Not a valid tensor name: '"+t+"'");IA.has(t)||IA.set(t,0);const e=IA.get(t);if(IA.set(t,IA.get(t)+1),e>0){const n=`${t}_${e}`;return IA.set(n,1),n}return t}const UA=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function PA(t){return!!t.match(UA)}function zA(t,e,n){null==e&&(e=0),null==n&&(n=t.length);let r=1;for(let i=e;i<n;++i)r*=t[i];return r}function QA(t){return Zh(t=Array.isArray(t)?new Float32Array(t):t)}function HA(t){return kh(QA(t)).dataSync()[0]}function $A(t){return wh(QA(t)).dataSync()[0]}function VA(t,e){if(e<t)throw new jf(`end (${e}) < begin (${t}) is forbidden.`);const n=[];for(let r=t;r<e;++r)n.push(r);return n}function qA(t,e){return t.asType(e)}function jA(t,e=-1){const n=t.shape.slice();return e<0&&(e=n.length+e+1),n.splice(e,0,1),t.reshape(n)}function KA(t,e,n){return Gu(()=>{switch(t.rank){case 1:return fd(t,e,n);case 2:return Ad(t,[e,0],[n,t.shape[1]]);case 3:return md(t,[e,0,0],[n,t.shape[1],t.shape[2]]);case 4:return gd(t,[e,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3]]);case 5:return el(t,[e,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4]]);case 6:return el(t,[e,0,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4],t.shape[5]]);default:throw new jf("sliceAlongFirstAxis() received an unsupported tensor rank: "+t.rank)}})}function WA(t,e,n){return Gu(()=>{switch(t.rank){case 1:return fd(t,e,n);case 2:return Ad(t,[0,e],[t.shape[0],n]);case 3:return md(t,[0,0,e],[t.shape[0],t.shape[1],n]);case 4:return gd(t,[0,0,0,e],[t.shape[0],t.shape[1],t.shape[2],n]);default:throw new jf("sliceAlongLastAxis() received an unsupported tensor rank: "+t.rank)}})}function GA(t,e,n,r){return Gu(()=>{switch(t.rank){case 1:return fd(t,e,n);case 2:switch(r){case 1:return KA(t,e,n);case 2:return WA(t,e,n);default:throw new jf("The axis is not within the rank of the tensor "+r)}case 3:switch(r){case 1:return KA(t,e,n);case 2:return md(t,[0,e,0],[t.shape[0],n,t.shape[2]]);case 3:return WA(t,e,n);default:throw new jf("The axis is not within the rank of the tensor "+r)}case 4:switch(r){case 1:return KA(t,e,n);case 2:return gd(t,[0,e,0,0],[t.shape[0],n,t.shape[2],t.shape[3]]);case 3:return gd(t,[0,0,e,0],[t.shape[0],t.shape[1],n,t.shape[3]]);case 4:return WA(t,e,n);default:throw new jf("The axis is not within the rank of the tensor "+r)}default:throw new jf("sliceAlongLastAxis() received an unsupported tensor rank: "+t.rank)}})}function XA(t,e=-1){let n;return e<0&&(n=t[0].rank,e=0!==n?n:0),e===t[0].rank&&(e=-1),Va(t,e)}function YA(t,e){switch(t.rank){case 1:return Oc([t,e]);case 2:return Dc([t,e],0);case 3:return Lc([t,e],0);case 4:return Mc([t,e],0);default:throw new jf("concatAlongFirstAxis() received an unsupported tensor rank: "+t.rank)}}function JA(t,e){if(Array.isArray(e)||(e=[e]),t.rank!==e.length)throw new jf(`The length of input n (${e.length}) does not match the number of dimensions in input x (${t.rank})`);return co(t,e)}function ZA(t,e=0,n=1,r,i){return Yh(t,e,n,r,i)}function tm(t,e,n,r){if(t.rank<2||e.rank<2)throw new Kf(`dot requires both inputs to be rank >= 2 but got x shape = ${t.shape} and y shape = ${e.shape}`);if(e.rank>=3&&t.shape.slice(-1)[0]!==e.shape.slice(-2)[0])throw new Kf(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${t.shape} and  y shape = `+e.shape);if(2===t.rank&&2===e.rank)return A.matMul({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?rm(t.rank,r,"channelsLast"):null,activation:n});{const i=t.shape.slice(),s=i.pop();t=t.reshape([-1,s]);const o=e.shape.slice(),a=o.pop(),l=o.pop(),u=[...o,a],c=Array.from({length:e.rank},(t,n)=>0===n?e.rank-2:n<=e.rank-2?n-1:n);e=e.transpose(c).reshape([l,-1]);const h=[...i,...u];return A.matMul({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?rm(t.rank,r,"channelsLast"):null,activation:n}).reshape(h)}}function em(t,e,n){return Gu(()=>(e=Array.isArray(e)?Zh(e,"int32"):e.toInt(),dl(t,e,n)))}function nm(t){return vi(t,t)}function rm(t,e,n){const r=e.shape;if(1!==e.rank&&e.rank!==t)throw new jf("Unexpected bias dimensions: "+e.rank+"; expected it to be 1 or "+t);if(5===t){if("channelsFirst"===n)return e.reshape(1===r.length?[1,r[0],1,1,1]:[1,r[3],r[0],r[1],r[2]]);if("channelsLast"===n)return e.reshape(1===r.length?[1,1,1,1,r[0]]:[1].concat(r))}else if(4===t){if("channelsFirst"===n)return e.reshape(1===r.length?[1,r[0],1,1]:[1,r[2],r[0],r[1]]);if("channelsLast"===n)return e.reshape(1===r.length?[1,1,1,r[0]]:[1].concat(r))}else if(3===t){if("channelsFirst"===n)return e.reshape(1===r.length?[1,r[0],1]:[1,r[1],r[0]]);if("channelsLast"===n)return e.reshape(1===r.length?[1,1,r[0]]:[1].concat(r))}else if(t<3)return e;throw new jf("Unsupported input rank by biasAdd: "+e.rank)}function im(t,e,n){return Gu(()=>(null==n&&(n="channelsLast"),FA(n),t.add(rm(t.rank,e,n))))}function sm(t,e,n,r){return Gu(()=>ep(t,e,n,r))}function om(t,e,n=!1){return n?t():e()}const am=["fanIn","fanOut","fanAvg"],lm=["normal","uniform","truncatedNormal"];class um extends p.Serializable{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class cm extends um{apply(t,e){return Vo(t,e)}}cm.className="Zeros",p.registerClass(cm);class hm extends um{apply(t,e){return Ya(t,e)}}hm.className="Ones",p.registerClass(hm);class dm extends um{constructor(t){if(super(),"object"!=typeof t)throw new jf("Expected argument of type ConstantConfig but got "+t);if(void 0===t.value)throw new jf("config must have value set but got "+t);this.value=t.value}apply(t,e){return Gu(()=>vi(ki(this.value),Ya(t,e)))}getConfig(){return{value:this.value}}}dm.className="Constant",p.registerClass(dm);class pm extends um{constructor(t){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=t.minval||this.DEFAULT_MINVAL,this.maxval=t.maxval||this.DEFAULT_MAXVAL,this.seed=t.seed}apply(t,e){return Jh(t,this.minval,this.maxval,e)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}pm.className="RandomUniform",p.registerClass(pm);class fm extends um{constructor(t){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=t.mean||this.DEFAULT_MEAN,this.stddev=t.stddev||this.DEFAULT_STDDEV,this.seed=t.seed}apply(t,e){if("float32"!==(e=e||"float32")&&"int32"!==e)throw new Kf(`randomNormal does not support dType ${e}.`);return ZA(t,this.mean,this.stddev,e,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}fm.className="RandomNormal",p.registerClass(fm);class Am extends um{constructor(t){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=t.mean||this.DEFAULT_MEAN,this.stddev=t.stddev||this.DEFAULT_STDDEV,this.seed=t.seed}apply(t,e){if("float32"!==(e=e||"float32")&&"int32"!==e)throw new Kf(`truncatedNormal does not support dType ${e}.`);return Nd(t,this.mean,this.stddev,e,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}Am.className="TruncatedNormal",p.registerClass(Am);class mm extends um{constructor(t){super(),this.gain=null!=t.gain?t.gain:1}apply(t,e){return Gu(()=>{if(2!==t.length||t[0]!==t[1])throw new jf("Identity matrix initializer can only be used for 2D square matrices.");return vi(this.gain,Yc(t[0]))})}getConfig(){return{gain:this.gain}}}mm.className="Identity",p.registerClass(mm);class gm extends um{constructor(t){if(super(),t.scale<0)throw new jf("scale must be a positive float. Got: "+t.scale);this.scale=null==t.scale?1:t.scale,this.mode=null==t.mode?"fanIn":t.mode,lA(am,"FanMode",this.mode),this.distribution=null==t.distribution?"normal":t.distribution,function(t){lA(lm,"Distribution",t)}(this.distribution),this.seed=t.seed}apply(t,e){const n=function(t,e="channelsLast"){let n,r;if(FA(e),2===t.length)n=t[0],r=t[1];else if(-1!==[3,4,5].indexOf(t.length)){if("channelsFirst"===e){const e=zA(t,2);n=t[1]*e,r=t[0]*e}else if("channelsLast"===e){const e=zA(t,0,t.length-2);n=t[t.length-2]*e,r=t[t.length-1]*e}}else{const e=zA(t);n=Math.sqrt(e),r=Math.sqrt(e)}return[n,r]}(t),r=n[0],i=n[1];let s=this.scale;if(s/="fanIn"===this.mode?Math.max(1,r):"fanOut"===this.mode?Math.max(1,i):Math.max(1,(r+i)/2),"normal"===this.distribution){const n=Math.sqrt(s);if("float32"!==(e=e||"float32")&&"int32"!==e)throw new Kf(`${this.getClassName()} does not support dType ${e}.`);return Nd(t,0,n,e,this.seed)}{const n=Math.sqrt(3*s);return Jh(t,-n,n,e)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}gm.className="VarianceScaling",p.registerClass(gm);class ym extends gm{constructor(t){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:null==t?null:t.seed})}getClassName(){return gm.className}}ym.className="GlorotUniform",p.registerClass(ym);class wm extends gm{constructor(t){super({scale:1,mode:"fanAvg",distribution:"normal",seed:null==t?null:t.seed})}getClassName(){return gm.className}}wm.className="GlorotNormal",p.registerClass(wm);class bm extends gm{constructor(t){super({scale:2,mode:"fanIn",distribution:"normal",seed:null==t?null:t.seed})}getClassName(){return gm.className}}bm.className="HeNormal",p.registerClass(bm);class vm extends gm{constructor(t){super({scale:2,mode:"fanIn",distribution:"uniform",seed:null==t?null:t.seed})}getClassName(){return gm.className}}vm.className="HeUniform",p.registerClass(vm);class xm extends gm{constructor(t){super({scale:1,mode:"fanIn",distribution:"normal",seed:null==t?null:t.seed})}getClassName(){return gm.className}}xm.className="LeCunNormal",p.registerClass(xm);class _m extends gm{constructor(t){super({scale:1,mode:"fanIn",distribution:"uniform",seed:null==t?null:t.seed})}getClassName(){return gm.className}}_m.className="LeCunNormal",p.registerClass(_m);class Cm extends um{constructor(t){if(super(),this.DEFAULT_GAIN=1,this.gain=null==t.gain?this.DEFAULT_GAIN:t.gain,this.seed=t.seed,null!=this.seed)throw new Kf("Random seed is not implemented for Orthogonal Initializer yet.")}apply(t,e){return Gu(()=>{if(2!==t.length)throw new Kf("The Orthogonal Initializer does not support non-2D shapes yet.");t[0]*t[1]>2e3&&console.warn(`Orthogonal initializer is being called on a matrix with more than 2000 (${t[0]*t[1]}) elements: Slowness may result.`);const e=ZA(t[0]>t[1]?[t[1],t[0]]:t,0,1,"float32");let n=Xp.gramSchmidt(e);return t[0]>t[1]&&(n=n.transpose()),vi(this.gain,n)})}getConfig(){return{gain:this.gain,seed:this.seed}}}Cm.className="Orthogonal",p.registerClass(Cm);const Sm={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function Em(t,e={}){return iA(t,p.SerializationMap.getMap().classNameMap,e,"initializer")}function Bm(t){return rA(t)}function km(t){if("string"==typeof t){const e=t in Sm?Sm[t]:t;if("GlorotNormal"===e)return new wm;if("GlorotUniform"===e)return new ym;if("HeNormal"===e)return new bm;if("HeUniform"===e)return new vm;if("LeCunNormal"===e)return new xm;if("LeCunUniform"===e)return new _m;{const t={};return t.className=e,t.config={},Em(t)}}return t instanceof um?t:Em(t)}function Nm(){return new cm}function Im(){return new hm}function Fm(t){return new dm(t)}function Tm(t){return new pm(t)}function Rm(t){return new fm(t)}function Om(t){return new Am(t)}function Dm(t){return new mm(t)}function Lm(t){return new gm(t)}function Mm(t){return new ym(t)}function Um(t){return new wm(t)}function Pm(t){return new bm(t)}function zm(t){return new vm(t)}function Qm(t){return new xm(t)}function Hm(t){return new _m(t)}function $m(t){return new Cm(t)}let Vm=0;function qm(){return Vm++}const jm={};function Km(t=""){return t in jm||(jm[t]=0),jm[t]+=1,t+jm[t].toString()}function Wm(t){return Array.isArray(t)&&Array.isArray(t[0])}function Gm(t){return 0===t.length?[]:Array.isArray(t[0])?t:[t]}function Xm(t){let e;if(Array.isArray(t)){if(1!==t.length)throw new jf("Expected Tensor length to be 1; got "+t.length);e=t[0]}else e=t;return e}function Ym(t){if(Array.isArray(t)&&Array.isArray(t[0])){if(1===t.length)return(t=t)[0];throw new jf("Expected exactly 1 Shape; got "+t.length)}return t}function Jm(t){let e=0;for(const n of t)e+=0===n.shape.length?1:n.shape.reduce((t,e)=>t*e);return e}class Zm{constructor(t,e="float32",n="Variable",r=!0,i=null){this.dtype=null==e?"float32":e,this.shape=t.shape,this.id=qm(),this.originalName=LA(n=null==n?"Variable":n),this.name=MA(this.originalName),this.trainable_=r,this.constraint=i,this.val=Fd(t,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(t){return this.assertNotDisposed(),function(t,e){if(t.shape.toString()!==e.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(t.shape)+" vs. "+JSON.stringify(e.shape))}(this.val,t),this.val.id!==t.id&&(this.val.assign(t),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(t){this.trainable_=t,this.val.trainable=t}}function tg(t){return t.map(t=>t.read())}function eg(t){t.forEach(t=>{t[0].write(t[1])})}class ng{constructor(t){this.dtype=t.dtype,this.shape=t.shape,this.ndim=null!=t.shape?t.shape.length:t.ndim,this.maxNDim=t.maxNDim,this.minNDim=t.minNDim,this.axes=t.axes||{}}}class rg{constructor(t,e,n,r,i,s,o){this.dtype=t,this.shape=e,this.sourceLayer=n,this.inputs=r,this.callArgs=i,this.outputTensorIndex=o,this.id=qm(),null!=s&&(this.originalName=LA(s),this.name=MA(this.originalName)),this.rank=e.length}}let ig=0;class sg{constructor(t,e){this.callArgs=e,this.id=ig++,this.outboundLayer=t.outboundLayer,this.inboundLayers=t.inboundLayers,this.nodeIndices=t.nodeIndices,this.tensorIndices=t.tensorIndices,this.inputTensors=t.inputTensors,this.outputTensors=t.outputTensors,this.inputMasks=t.inputMasks,this.outputMasks=t.outputMasks,this.inputShapes=t.inputShapes,this.outputShapes=t.outputShapes;for(const n of t.inboundLayers)null!=n&&n.outboundNodes.push(this);t.outboundLayer.inboundNodes.push(this)}getConfig(){const t=[];for(const e of this.inboundLayers)t.push(null!=e?e.name:null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:t,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}let og=0;class ag extends p.Serializable{constructor(t={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=og++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let e=t.name;if(!e){const t=this.getClassName();e=tA(t)+"_"+Km(t)}if(this.name=e,this.trainable_=null==t.trainable||t.trainable,null!=t.inputShape||null!=t.batchInputShape){let e;if(null!=t.batchInputShape)e=t.batchInputShape;else if(null!=t.inputShape){let n=null;null!=t.batchSize&&(n=t.batchSize),e=[n].concat(t.inputShape)}this.batchInputShape=e;let n=t.dtype;null==n&&(n=t.inputDType),null==n&&(n="float32"),this.dtype=n}this.initialWeights=null!=t.weights?t.weights:null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(t,e){return t.name+"_ib-"+e.toString()}getNodeAtIndex(t,e){if(0===this.inboundNodes.length)throw new qf(`The layer has never been called and thus has no defined ${e}.`);if(this.inboundNodes.length<=t)throw new jf(`Asked to get ${e} at node ${t}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[t]}getInputAt(t){return Jf(this.getNodeAtIndex(t,"input").inputTensors)}getOutputAt(t){return Jf(this.getNodeAtIndex(t,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new Vf("Layer "+this.name+' has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use `getInputAt(nodeIndex)` instead.');if(0===this.inboundNodes.length)throw new Vf("Layer "+this.name+" is not connected, no input to return.");return Jf(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(0===this.inboundNodes.length)throw new Vf("Layer "+this.name+" has no inbound nodes.");if(this.inboundNodes.length>1)throw new Vf("Layer "+this.name+' has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use `getOutputAt(nodeIndex)` instead.');return Jf(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(t=>t())}get updates(){return this._updates}get built(){return this._built}set built(t){this._built=t}get trainable(){return this.trainable_}set trainable(t){this._trainableWeights.forEach(e=>e.trainable=t),this.trainable_=t}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(t=>t.trainable):[]}set trainableWeights(t){this._trainableWeights=t}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(t=>!t.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(t){this._nonTrainableWeights=t}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(t){if(t=Zf(t),null==this.inputSpec||0===this.inputSpec.length)return;const e=Zf(this.inputSpec);if(t.length!==e.length)throw new jf(`Layer ${this.name} expects ${e.length} inputs, but it received ${t.length} input tensors. Input received: `+t);for(let n=0;n<t.length;n++){const r=t[n],i=e[n];if(null==i)continue;const s=r.rank;if(null!=i.ndim&&s!==i.ndim)throw new jf(`Input ${n} is incompatible with layer ${this.name}: expected ndim=${i.ndim}, found ndim=${s}`);if(null!=i.maxNDim&&s>i.maxNDim)throw new jf(`Input ${n} is incompatible with layer ${this.name}: expected max_ndim=${i.maxNDim}, found ndim=${s}`);if(null!=i.minNDim&&s<i.minNDim)throw new jf(`Input ${n} is incompatible with layer ${this.name}: expected min_ndim=${i.minNDim}, found ndim=${s}.`);if(null!=i.dtype&&r.dtype!==i.dtype)throw new jf(`Input ${n} is incompatible with layer ${this.name} : expected dtype=${i.dtype}, found dtype=${r.dtype}.`);if(i.axes){const t=r.shape;for(const e in i.axes){const r=Number(e),s=i.axes[e],o=r>=0?t[r]:t[t.length+r];if(null!=s&&-1===[s,null].indexOf(o))throw new jf(`Input ${n} is incompatible with layer ${this.name}: expected axis ${r} of input shape to have value ${s} but got shape ${t}.`)}}if(null!=i.shape)for(let t=0;t<i.shape.length;++t){const e=i.shape[t],s=r.shape[t];if(null!=e&&null!=s&&e!==s)throw new jf(`Input ${n} is incompatible with layer ${this.name}: expected shape=${i.shape}, found shape=${r.shape}.`)}}}call(t,e){return t}invokeCallHook(t,e){null!=this._callHook&&this._callHook(t,e)}setCallHook(t){this._callHook=t}clearCallHook(){this._callHook=null}apply(t,e){e=e||{},this.assertNotDisposed();const n=Zf(t);let r=!0;for(const s of n)if(!(s instanceof rg)){r=!1;break}let i=!0;for(const s of n)if(s instanceof rg){i=!1;break}if(r===i)throw new jf("Arguments to apply() must be all SymbolicTensors or all Tensors");return DA(this.name,()=>{if(!this.built){this.assertInputCompatibility(t);const e=[];for(const n of Zf(t))e.push(n.shape);this.build(Jf(e)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),null===this._refCount&&i&&(this._refCount=1)}if(this.assertInputCompatibility(t),i){let r=this.call(t,e);const i=Zf(r),s=[];for(let t of i)-1!==n.indexOf(t)&&(t=t.clone()),s.push(t);if(r=Jf(s),null!=this.activityRegularizer)throw new Kf("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return r}{const n=function(t){t=Zf(t);const e=[];for(const n of t)e.push(n.shape);return Jf(e)}(t),r=this.computeOutputShape(n);let i;const s="float32";if(this.warnOnIncompatibleInputShape(Array.isArray(t)?n[0]:n),i=null!=r&&r.length>0&&Array.isArray(r[0])?r.map((n,r)=>new rg(s,n,this,Zf(t),e,this.name,r)):new rg(s,r,this,Zf(t),e,this.name),this.addInboundNode(t,i,null,null,n,r,e),this._refCount++,null!=this.activityRegularizer)throw new Kf("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return i}})}warnOnIncompatibleInputShape(t){if(null!=this.batchInputShape)if(t.length!==this.batchInputShape.length)console.warn("The rank of the input tensor provided (shape: "+JSON.stringify(t)+") does not match that of the "+`batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer `+this.name);else{let e=!1;this.batchInputShape.forEach((n,r)=>{null!=n&&null!=t[r]&&t[r]!==n&&(e=!0)}),e&&console.warn(`The shape of the input tensor (${JSON.stringify(t)}) does not match the expectation of layer ${this.name}: `+JSON.stringify(this.batchInputShape))}}get outputShape(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new Vf(`The layer ${this.name} has never been called and thus has no defined output shape.`);const t=[];for(const e of this.inboundNodes){const n=JSON.stringify(e.outputShapes);-1===t.indexOf(n)&&t.push(n)}if(1===t.length){const t=this.inboundNodes[0].outputShapes;return Array.isArray(t)&&Array.isArray(t[0])&&1===t.length?t[0]:t}throw new Vf(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new qf(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return Jm(this.weights)}build(t){this.built=!0}getWeights(t=!1){return tg(t?this.trainableWeights:this.weights)}setWeights(t){Gu(()=>{const e=this.weights;if(e.length!==t.length)throw new jf(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${t.length}, but the layer was expecting ${e.length} weights. Provided weights: ${t}...`);if(0===e.length)return;const n=[],i=tg(e);for(let s=0;s<i.length;++s){const o=i[s],a=e[s],l=t[s];if(!r.arraysEqual(o.shape,l.shape))throw new jf(`Layer weight shape ${o.shape} not compatible with provided weight shape `+l.shape);n.push([a,l])}eg(n)})}addWeight(t,e,n,r,i,s,o){if(-1!==this._addedWeightNames.indexOf(t))throw new jf(`Duplicate weight name ${t} for layer ${this.name}`);this._addedWeightNames.push(t),null==n&&(n="float32"),this.fastWeightInitDuringBuild&&(r=km("zeros"));const a=r.apply(e,n),l=new Zm(a,n,t,s,o);return a.dispose(),null!=i&&this.addLoss(()=>i.apply(l.read())),null==s&&(s=!0),s?this._trainableWeights.push(l):this._nonTrainableWeights.push(l),l}setFastWeightInitDuringBuild(t){this.fastWeightInitDuringBuild=t}addLoss(t){null==t||Array.isArray(t)&&0===t.length||(t=Zf(t),null!=this._losses&&this.losses.push(...t))}computeOutputShape(t){return t}computeMask(t,e){if(!this.supportsMasking){if(null!=e){if(!Array.isArray(e))throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);e.forEach(t=>{if(null!=t)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)})}return null}return e}addInboundNode(t,e,n,r,i,s,o=null){const a=Zf(t);e=Zf(e),n=Zf(n),r=Zf(r),i=Gm(i),s=Gm(s);const l=[],u=[],c=[];for(const h of a)l.push(h.sourceLayer),u.push(h.nodeIndex),c.push(h.tensorIndex);new sg({outboundLayer:this,inboundLayers:l,nodeIndices:u,tensorIndices:c,inputTensors:a,outputTensors:e,inputMasks:n,outputMasks:r,inputShapes:i,outputShapes:s},o);for(let h=0;h<e.length;h++)e[h].sourceLayer=this,e[h].nodeIndex=this.inboundNodes.length-1,e[h].tensorIndex=h}getConfig(){const t={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(t.batchInputShape=this.batchInputShape),null!=this.dtype&&(t.dtype=this.dtype),t}disposeWeights(){return this.weights.forEach(t=>t.dispose()),this.weights.length}assertNotDisposed(){if(0===this._refCount)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(null===this._refCount)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let t=0;return 0==--this._refCount&&(t=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:t}}}class lg extends ag{constructor(t){if(super({dtype:t.dtype,name:null!=t.name?t.name:Km("input").toString()}),null==t.batchSize&&(t.batchSize=null),null==t.sparse&&(t.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=t.sparse,null!=t.inputShape&&null!=t.batchInputShape)throw new jf("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let e=t.batchInputShape;if(null==e){if(null==t.inputShape)throw new jf("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");e=[t.batchSize].concat(t.inputShape)}else if(null!=t.batchSize)throw new jf("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const n=t.dtype||"float32";this.batchInputShape=e,this.dtype=n,this.inputSpec=[{shape:e}];const r=new rg(this.dtype,this.batchInputShape,this,[],{},this.name);r.nodeIndex=0,r.tensorIndex=0,new sg({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[r],outputTensors:[r],inputMasks:[null],outputMasks:[null],inputShapes:[e],outputShapes:[e]})}apply(t,e){throw new jf("Cannot pass any input to an InputLayer's apply() method. InputLayer name: "+this.name)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}function ug(t){if(null==t.batchShape&&null==t.shape)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=t.batchShape&&null!=t.shape)throw new jf("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let e=t.batchShape;null!=t.shape&&null==e&&(e=[null].concat(t.shape));let n=t.dtype;return null==n&&(n="float32"),new lg({batchInputShape:e,name:t.name,dtype:n,sparse:t.sparse}).inboundNodes[0].outputTensors[0]}async function cg(t){if(null==t)return;const e=[],n=[],r=[];for(const i in t){const s=t[i];if("number"!=typeof s){const t=s;e.push(t.data()),n.push(i),r.push(t)}}if(e.length>0){const i=await Promise.all(e);for(let e=0;e<i.length;++e)t[n[e]]=i[e][0];Xu(r)}}function hg(t){if(null!=t)for(const e in t){const n=t[e];"number"!=typeof n&&n.dispose()}}var dg;lg.className="InputLayer",p.registerClass(lg),function(t){t[t.SILENT=0]="SILENT",t[t.VERBOSE=1]="VERBOSE"}(dg||(dg={}));class pg{constructor(){this.validationData=null}setParams(t){this.params=t}async onEpochBegin(t,e){}async onEpochEnd(t,e){}async onBatchBegin(t,e){}async onBatchEnd(t,e){}async onTrainBegin(t){}async onTrainEnd(t){}setModel(t){}}class fg{constructor(t,e=10){null==t&&(t=[]),this.callbacks=t,this.queueLength=e}append(t){this.callbacks.push(t)}setParams(t){for(const e of this.callbacks)e.setParams(t)}setModel(t){for(const e of this.callbacks)e.setModel(t)}async onEpochBegin(t,e){null==e&&(e={});for(const n of this.callbacks)await n.onEpochBegin(t,e)}async onEpochEnd(t,e){null==e&&(e={});for(const n of this.callbacks)await n.onEpochEnd(t,e)}async onBatchBegin(t,e){null==e&&(e={});for(const n of this.callbacks)await n.onBatchBegin(t,e)}async onBatchEnd(t,e){null==e&&(e={});for(const n of this.callbacks)await n.onBatchEnd(t,e)}async onTrainBegin(t){null==t&&(t={});for(const e of this.callbacks)await e.onTrainBegin(t)}async onTrainEnd(t){null==t&&(t={});for(const e of this.callbacks)await e.onTrainEnd(t)}}class Ag extends pg{constructor(){super()}async onEpochBegin(t){this.seen=0,this.totals={}}async onBatchEnd(t,e){null==e&&(e={});const n=null==e.size?0:e.size;this.seen+=n;for(const r in e){const t=e[r];if("number"==typeof t)this.totals.hasOwnProperty(r)||(this.totals[r]=0),this.totals[r]=this.totals[r]+t*n;else{let e;r in this.totals?e=this.totals[r]:this.totals[r]=0;const i=Gu(()=>$i(this.totals[r],vi(t,n)));this.totals[r]=i,null!=e&&e.dispose()}}}async onEpochEnd(t,e){if(null!=e)for(const n of this.params.metrics)null!=this.totals[n]&&("number"==typeof this.totals[n]?e[n]=this.totals[n]/this.seen:Gu(()=>{const t=vi(Si(1,this.seen),this.totals[n]);e[n]=t,this.totals[n].dispose(),Yu(e[n])}))}}class mg extends pg{async onTrainBegin(t){this.epoch=[],this.history={}}async onEpochEnd(t,e){null==e&&(e={}),this.epoch.push(t);for(const n in e)null==this.history[n]&&(this.history[n]=[]),this.history[n].push(e[n])}async syncData(){const t=[],e=[],n=[];for(const i in this.history){const r=this.history[i];for(let s=0;s<r.length;++s)"number"!=typeof r[s]&&(t.push(r[s].data()),e.push(i),n.push(s))}const r=await Promise.all(t);for(let i=0;i<r.length;++i)this.history[e[i]][n[i]].dispose(),this.history[e[i]][n[i]]=r[i][0]}}class gg extends pg{constructor(t,e){if(super(),this.currentEpoch=0,this.yieldEvery=e||"auto","auto"===this.yieldEvery&&(this.yieldEvery=125),"never"===this.yieldEvery&&null!=t.onYield)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");r.isNumber(this.yieldEvery)&&(this.maybeWait=function(t,e){let n,i=r.now();return(...s)=>{const o=r.now();return o-i<e||(i=o,n=t(...s)),n}}(this.maybeWait.bind(this),this.yieldEvery)),this.trainBegin=t.onTrainBegin,this.trainEnd=t.onTrainEnd,this.epochBegin=t.onEpochBegin,this.epochEnd=t.onEpochEnd,this.batchBegin=t.onBatchBegin,this.batchEnd=t.onBatchEnd,this.yield=t.onYield}async maybeWait(t,e,n){const r=[];null!=this.yield&&(await cg(n),r.push(this.yield(t,e,n))),r.push(cf()),await Promise.all(r)}async onEpochBegin(t,e){this.currentEpoch=t,null!=this.epochBegin&&(await cg(e),await this.epochBegin(t,e))}async onEpochEnd(t,e){const n=[];null!=this.epochEnd&&(await cg(e),n.push(this.epochEnd(t,e))),"epoch"===this.yieldEvery&&n.push(cf()),await Promise.all(n)}async onBatchBegin(t,e){null!=this.batchBegin&&(await cg(e),await this.batchBegin(t,e))}async onBatchEnd(t,e){const n=[];null!=this.batchEnd&&(await cg(e),n.push(this.batchEnd(t,e))),"batch"===this.yieldEvery?n.push(cf()):r.isNumber(this.yieldEvery)&&n.push(this.maybeWait(this.currentEpoch,t,e)),await Promise.all(n)}async onTrainBegin(t){null!=this.trainBegin&&(await cg(t),await this.trainBegin(t))}async onTrainEnd(t){null!=this.trainEnd&&(await cg(t),await this.trainEnd(t))}}function yg(t,e){return null==t&&(t={}),t instanceof pg?[t]:Array.isArray(t)&&t[0]instanceof pg?t:Zf(t).map(t=>new gg(t,e))}class wg{constructor(){}static registerCallbackConstructor(t,e){r.assert(t>=0&&Number.isInteger(t),()=>"Verbosity level is expected to be an integer >= 0, but got "+t),wg.checkForDuplicate(e),null==wg.constructors[t]&&(wg.constructors[t]=[]),wg.constructors[t].push(e)}static checkForDuplicate(t){for(const e in wg.constructors)wg.constructors[+e].forEach(e=>{if(e===t)throw new jf("Duplicate callback constructor.")})}static clear(){wg.constructors={}}static createCallbacks(t){const e=[];for(const n in wg.constructors){const r=+n;t>=r&&e.push(...wg.constructors[r])}return e.map(t=>new t)}}function bg(t,e,n,r,i,s,o,a,l){const u=new mg,c=[new Ag,...wg.createCallbacks(e)];null!=t&&c.push(...t),c.push(u);const h=new fg(c);return h.setParams({epochs:n,initialEpoch:r,samples:i,steps:s,batchSize:o,verbose:e,doValidation:a,metrics:l}),{callbackList:h,history:u}}function vg(t,e={},n=!1){return iA(t,p.SerializationMap.getMap().classNameMap,e,"layer",n)}function xg(t,e){return Gu(()=>{"float32"!==t.dtype&&(t=t.asType("float32"));const n=ts(nm(t),e,!0),r=Zc(n.shape,$f()),i=Ni(pl(n,r));return Si(t,i)})}function _g(t,e){return Gu(()=>Bh(nm(Fi(e,t)),-1))}function Cg(t,e){return Gu(()=>Bh(lc(Fi(e,t)),-1))}function Sg(t,e){return Gu(()=>{const n=Fi(t,e),r=Rc(lc(t),$f(),Number.MAX_VALUE),i=lc(Si(n,r));return vi(100,Bh(i,-1))})}function Eg(t,e,n=!1){return Gu(()=>{if(n)e=yd(e);else{const t=ts(e,e.shape.length-1,!0);e=Si(e,t)}return e=Rc(e,$f(),1-$f()),Ei(ts(vi(t.toFloat(),Wo(e)),e.shape.length-1))})}function Bg(t,e,n=!1){return Gu(()=>{const r=Po(function(t){const e=[zA(t.shape)];return t.reshape(e)}(t)).toInt(),i=(e=Rc(e,$f(),1-$f())).shape;return Eg(gu(r,i[i.length-1]).reshape(i),e,n)})}function kg(t,e){return Gu(()=>{let n;return n=Rc(e,$f(),1-$f()),n=Wo(Si(n,Fi(1,n))),Bh(function(t,e){if(!r.arraysEqual(t.shape,e.shape))throw new jf(`logits and labels must have the same shape, but got shapes ${JSON.stringify(t.shape)} and ${JSON.stringify(e.shape)}`);return Gu(()=>{const n=e.relu(),r=e.abs().neg();return n.sub(e.mul(t)).add(r.exp().log1p())})}(t,n),-1)})}function Ng(t,e){return Gu(()=>{const n=xg(t,-1),r=xg(e,-1),i=vi(n,r);return Ei(ts(i,-1))})}wg.constructors={};const Ig={meanSquaredError:_g,meanAbsoluteError:Cg,meanAbsolutePercentageError:Sg,meanSquaredLogarithmicError:function(t,e){return Gu(()=>{const n=Rc(e,$f(),Number.MAX_VALUE),r=Wo($i(1,n)),i=Rc(t,$f(),Number.MAX_VALUE),s=Wo($i(1,i));return Bh(nm(Fi(r,s)),-1)})},squaredHinge:function(t,e){return Gu(()=>{const n=pl(0,Fi(1,vi(t,e)));return Bh(nm(n),-1)})},hinge:function(t,e){return Gu(()=>{const n=pl(0,Fi(1,vi(t,e)));return Bh(n,-1)})},categoricalHinge:function(t,e){return Gu(()=>{const n=ts(vi(t,e),-1),r=wh(vi(Fi(1,t),e),-1);return pl(0,$i(1,Fi(r,n)))})},logcosh:function(t,e){return Gu(()=>{const n=Math.log(2),r=Fi(e,t),i=Fi($i(r,wd(vi(-2,r))),n);return Bh(i,-1)})},categoricalCrossentropy:Eg,sparseCategoricalCrossentropy:Bg,binaryCrossentropy:kg,kullbackLeiblerDivergence:function(t,e){return Gu(()=>{const n=Rc(t,$f(),1),r=Rc(e,$f(),1);return ts(vi(t,Wo(Si(n,r))),-1)})},poisson:function(t,e){return Gu(()=>{const n=Wo($i($f(),e));return Bh(Fi(e,vi(t,n)),-1)})},cosineProximity:Ng};function Fg(t){if("string"==typeof t){if(t in Ig)return Ig[t];let e="Unknown loss "+t;throw t.toLowerCase().includes("softmaxcrossentropy")&&(e=`Unknown loss ${t}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new jf(e)}return t}function Tg(t,e){return Gu(()=>{const n=vi(.5,Dh(e)),r=qA(Mo(e,n),t.dtype);return Bh(Bo(t,r),-1)})}function Rg(t,e){return Gu(()=>qA(Bo(fc(t,-1),fc(e,-1)),"float32"))}function Og(t,e){return Gu(()=>Is(t.equal(1),e.equal(1)).sum().cast("float32"))}function Dg(t,e){return Gu(()=>{const n=Og(t,e),r=function(t,e){return Gu(()=>Is(t.equal(0),e.equal(1)).sum().cast("float32"))}(t,e),i=n.add(r);return Fs(Mo(i,0),n.div(i),0).cast("float32")})}function Lg(t,e){return kg(t,e)}function Mg(t,e){return t.rank===e.rank&&(t=t.squeeze([t.rank-1])),(e=e.argMax(-1)).dtype!==t.dtype&&(e=e.asType(t.dtype)),Bo(t,e).asType("float32")}const Ug=Eg,Pg=Bg,zg={binaryAccuracy:Tg,categoricalAccuracy:Rg,precision:Dg,categoricalCrossentropy:Ug,sparseCategoricalCrossentropy:Pg,mse:_g,MSE:_g,mae:Cg,MAE:Cg,mape:Sg,MAPE:Sg,cosine:Ng};function Qg(t){if("string"==typeof t&&t in zg)return zg[t];if("string"!=typeof t&&null!=t)return t;throw new jf("Unknown metric "+t)}function Hg(t){if(Xf(null!==t,"Unknown LossOrMetricFn "+t),"string"==typeof t)return t;{let e;for(const n of Object.keys(Ig))if(Ig[n]===t){e=n;break}if(void 0!==e)return e;for(const n of Object.keys(zg))if(zg[n]===t){e=n;break}return void 0!==e?e:t.name}}function $g(t,e,n=!1){if(null==t||"object"!=typeof t||Object.getPrototypeOf(t)!==Object.prototype||!function t(e){if(null===e)return!0;if("object"==typeof e){if(Object.getPrototypeOf(e)===Object.prototype){const n=Object.keys(e);for(const r of n){if("string"!=typeof r)return!1;if(!t(e[r]))return!1}return!0}if(Array.isArray(e)){for(const n of e)if(!t(n))return!1;return!0}return!1}{const t=typeof e;return"string"===t||"number"===t||"boolean"===t}}(t))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const n=JSON.stringify(t);n.length>1048576&&console.warn(`User-defined metadata of model "${e}" is too large in size (length=${n.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= 1048576.`)}}function Vg(t,e,n=console.log){let r="";for(let i=0;i<t.length;++i)i>0&&(r=r.slice(0,r.length-1)+" "),r+=t[i],r=r.slice(0,e[i]),r+=" ".repeat(e[i]-r.length);n(r)}function qg(t,e,n){let r;try{r=JSON.stringify(t.outputShape)}catch(hk){r="multiple"}Vg([`${t.name} (${t.getClassName()})`,r,t.countParams().toString()],e,n)}function jg(t,e,n,r){let i;try{i=JSON.stringify(t.outputShape)}catch(hk){i="multiple"}const s=[];for(const u of t.inboundNodes)if(!(null!=n&&n.length>0&&-1===n.indexOf(u)))for(let t=0;t<u.inboundLayers.length;++t)s.push(`${u.inboundLayers[t].name}[${u.nodeIndices[t]}][${u.tensorIndices[t]}]`);const o=t.name,a=t.getClassName(),l=0===s.length?"":s[0];Vg([`${o} (${a})`,i,t.countParams().toString(),l],e,r);for(let u=1;u<s.length;++u)Vg(["","","",s[u]],e,r)}function Kg(t,e,n){return("inboundNodes"===t||"outputLayers"===t||"inputLayers"===t)&&0===e&&"string"==typeof n}function Wg(t,e){if(null===t)return null;if("string"==typeof t)return eA(t);if("number"==typeof t||"boolean"==typeof t)return t;if(t instanceof Array){const n=[],r=t.length;for(let i=0;i<r;++i){const r=t[i];Kg(e,i,r)?n.push(r):n.push(Wg(r,e))}return n}{const e={};for(const n of Object.keys(t)){const r=t[n];if("name"===n&&"string"==typeof r)e[n]=r;else{const t=eA(n);e[t]=Wg(r,t)}}return e}}const Gg="2.1.0";class Xg{constructor(t){if(this.id2Value={},this.id2Mask={},this.name2Id={},t instanceof Xg)for(const e in t.id2Value)this.id2Value[e]=t.id2Value[e],e in t.id2Mask&&(this.id2Mask[e]=t.id2Mask[e]);else{if(null==t)return;for(const e of t)this.add(e.key,e.value)}}add(t,e,n){if(null!=this.id2Value[t.id])throw new jf(`Duplicate key: name=${t.name}, id=${t.id}`);return this.id2Value[t.id]=function(t,e){if(null==t.dtype||t.dtype===e.dtype)return e;try{return bi(e,t.dtype)}catch(hk){throw new jf(`The dtype of the feed (${e.dtype}) can not be cast to the dtype of the key '${t.name}' (${t.dtype}).`)}}(t,e),this.name2Id[t.name]=t.id,null!=n&&(this.id2Mask[t.id]=n),this}addFeed(t){this.add(t.key,t.value)}hasKey(t){return null!=this.id2Value[t.id]}names(){return Object.keys(this.name2Id)}getValue(t){if(t instanceof rg){if(null==this.id2Value[t.id])throw new jf("Nonexistent key: "+t.name);return this.id2Value[t.id]}{const e=this.name2Id[t];if(null==e)throw new jf("Feed dict has no SymbolicTensor name: "+t);return this.id2Value[e]}}getMask(t){if(t instanceof rg){if(null==this.id2Value[t.id])throw new jf("Nonexistent key: "+t.name);return this.id2Mask[t.id]}{const e=this.name2Id[t];if(null==e)throw new jf("Feed dict has no SymbolicTensor name: "+t);return this.id2Mask[e]}}disposeMasks(){null!=this.id2Mask&&Xu(this.id2Mask)}}const Yg={},Jg={};function Zg(t,e,n,i){const s=null!=n&&n.training,o=Array.isArray(t),a=o?t:[t],l=a.map(t=>t.name),u=[],c=e.names();for(const r of l)-1!==c.indexOf(r)?u.push(e.getValue(r)):u.push(null);null!=i&&(i.maxNumTensors=-1/0,i.minNumTensors=1/0);const h=l.join(",")+"|"+e.names().join(",");let d,p;if(null==Yg[h]){const t=function(t,e){r.assert(null!=t&&t.length>0,()=>"Expected at least one fetch, got none");let n=[],i={};if(1===t.length){const r=ey(t[0],e);n=r.sorted,i=r.recipientMap}else{const r=new Set;for(const s of t){const{sorted:t,recipientMap:o}=ey(s,e);for(const e of t)r.has(e.name)||(n.push(e),r.add(e.name));for(const e in o)null==i[e]&&(i[e]=new Set),o[e].forEach(t=>i[e].add(t))}}return{sorted:n,recipientCounts:ty(i)}}(a,e);d=t.sorted,p=t.recipientCounts,Yg[h]=d,Jg[h]=p}d=Yg[h],p={},s||Object.assign(p,Jg[h]);const f=new Xg(e);for(let r=0;r<d.length;++r){if(null!=i){const t=Ku().numTensors;t>i.maxNumTensors&&(i.maxNumTensors=t),t<i.minNumTensors&&(i.minNumTensors=t)}const t=d[r],o=t.sourceLayer;if(o instanceof lg)continue;const a=[],c=[],h=[];let A=!1;for(const n of t.inputs){const t=f.getValue(n),r=f.getMask(n);a.push(t),c.push(r),null!=r&&(A=!0),s||(p[n.name]--,0!==p[n.name]||e.hasKey(n)||-1!==l.indexOf(n.name)||t.isDisposed||!0===n.sourceLayer.stateful||h.push(t))}A&&((n=n||{}).mask=c[0]);const m=Zf(o.apply(a,n));let g=null;o.supportsMasking&&(g=o.computeMask(a,c));const y=ny(t),w=Array.isArray(y)?y:[y];for(let e=0;e<w.length;++e){f.hasKey(w[e])||f.add(w[e],m[e],Array.isArray(g)?g[0]:g);const t=l.indexOf(w[e].name);-1!==t&&(u[t]=m[e])}s||Xu(h)}return f.disposeMasks(),o?u:u[0]}function ty(t){const e={};for(const n in t)e[n]=t[n].size;return e}function ey(t,e){const n=new Set,r=[],i={};for(const a of e.names())n.add(a);const s=[],o=[];for(s.push(t);s.length>0;){const t=s[s.length-1];if(n.has(t.name)){s.pop();continue}const e=o[o.length-1]===s.length-1;if(0===t.inputs.length||e)s.pop(),r.push(t),n.add(t.name),e&&o.pop();else{o.push(s.length-1);for(const e of t.inputs)null==i[e.name]&&(i[e.name]=new Set),i[e.name].add(t.name),n.has(e.name)||s.push(e)}}return{sorted:r,recipientMap:i}}function ny(t){let e;if(1===t.sourceLayer.inboundNodes.length)e=t.sourceLayer.output;else{let n=null;for(let e=0;e<t.sourceLayer.inboundNodes.length;++e)for(const r of t.sourceLayer.inboundNodes[e].outputTensors)if(r.id===t.id){n=e;break}e=t.sourceLayer.getOutputAt(n)}return e}class ry extends ag{constructor(t){if(super({}),this.containerNodes=new Set,this.name=t.name,null==this.name){const t=this.getClassName().toLowerCase();this.name=Km(t)}if(this.supportsMasking=!1,this.trainable_=!0,this.inputs=Array.isArray(t.inputs)?t.inputs.slice():[t.inputs],this.outputs=Array.isArray(t.outputs)?t.outputs.slice():[t.outputs],oA(this.inputs).length!==this.inputs.length)throw new jf("The list of inputs passed to the model is redundant. All inputs should only appear once. Found: "+this.inputs.map(t=>t.name));oA(this.outputs).length!==this.outputs.length&&console.warn("The list of outputs passed to the model is redundant. All outputs should only appear once. Found: "+this.outputs.map(t=>t.name)),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const g of this.outputs){const t=g.nodeIndex,e=g.tensorIndex;this.outputLayers.push(g.sourceLayer),this.outputLayersNodeIndices.push(t),this.outputLayersTensorIndices.push(e)}for(const g of this.inputs){const t=g.sourceLayer,e=g.nodeIndex,n=g.tensorIndex;Xf(0===e,"input layer has >1 nodes"),Xf(0===n,"input layer has >1 tensors"),this.inputLayers.push(t),this.inputLayersNodeIndices.push(e),this.inputLayersTensorIndices.push(n)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let g=0;g<this.inputLayers.length;g++){const e=this.inputLayers[g];if(!(e instanceof lg))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${t.inputs}. Input ${g} (0-based) originates from layer type ${e.getClassName()}.`);this.inputNames.push(e.name),this.feedInputShapes.push(e.batchInputShape),this.feedInputNames.push(e.name)}for(const g of this.outputLayers)this.outputNames.push(g.name);this.internalInputShapes=this.inputs.map(t=>t.shape),this.internalOutputShapes=this.outputs.map(t=>t.shape);const e={},n={},r={},i={},s={},o=[],a=(t,e,n,r,i,l)=>{null!=r&&null!=i&&null!=l||(r=t.sourceLayer,i=t.nodeIndex,l=t.tensorIndex);const u=r.inboundNodes[i];if(-1!==n.indexOf(u))throw new qf(`The tensor ${t.name} at layer "${r.name}" is part of a cycle.`);if(-1!==e.indexOf(u))return;this.containerNodes.add(ry.nodeKey(r,i)),r.id in s||(s[r.id]=Object.keys(s).length),-1===n.indexOf(u)&&n.push(u);const c=u.inboundLayers.length;for(let s=0;s<c;s++)a(u.inputTensors[s],e,n,u.inboundLayers[s],u.nodeIndices[s],u.tensorIndices[s]);for(e.push(u);n.indexOf(u)>=0;)n.splice(n.indexOf(u),1);o.push(u)},l=[],u=[];for(const g of this.outputs)a(g,l,u);const c=o.slice().reverse();for(const g of c){n[g.id]=g,g.id in e||(e[g.id]=0);let t=e[g.id];t=Math.max(t,null==r[g.outboundLayer.id]?0:r[g.outboundLayer.id]),r[g.outboundLayer.id]=t,i[g.outboundLayer.id]=g.outboundLayer,e[g.id]=t;for(let r=0;r<g.inboundLayers.length;r++){const i=g.inboundLayers[r].inboundNodes[g.nodeIndices[r]];e[i.id]=Math.max(t+1,null==e[i.id]?0:e[i.id]),n[i.id]=i}}const h={};for(const g in e){const t=e[g];t in h||(h[t]=[]),h[t].push(n[g])}const d={};for(const g in r){const t=r[g];t in d||(d[t]=[]),d[t].push(i[g])}let p=Object.keys(d).map(t=>parseInt(t,10)).sort(sA);this.layers=[];for(const g of p){const t=d[g];t.sort((t,e)=>{const n=s[t.id],r=s[e.id];return n<r?-1:n>r?1:0});for(const e of t)e instanceof ry&&this.internalContainerRefs.push(e),this.layers.push(e)}this.layersByDepth=d,p=Object.keys(h).map(t=>parseInt(t,10)).sort(sA);const f=this.inputs.slice(),A=[];for(const g of p)for(const t of h[g]){const e=t.outboundLayer;if(null!=e){for(const n of t.inputTensors)if(-1===f.indexOf(n))throw new qf("Graph disconnected: cannot obtain value for tensor "+n+` at layer "${e.name}". The following previous layers were accessed without issue: `+A);for(const e of t.outputTensors)f.push(e);A.push(e.name)}}this.nodesByDepth=h;const m=this.layers.map(t=>t.name);for(const g of m){const t=m.filter(t=>t===g).length;if(1!==t)throw new qf(`The name "${g}" is used ${t} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(m))}this.outboundNodes=[],this.inboundNodes=[],new sg({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(t=>null),outputMasks:this.outputs.map(t=>null),inputShapes:this.inputs.map(t=>t.shape),outputShapes:this.outputs.map(t=>t.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(0===this._refCount)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const t={refCountAfterDispose:null,numDisposedVariables:0};if(0==--this._refCount){for(const e of this.layers)t.numDisposedVariables+=e.dispose().numDisposedVariables;for(const e of this.internalContainerRefs)t.numDisposedVariables+=e.dispose().numDisposedVariables}return t.refCountAfterDispose=this._refCount,t}get trainable(){return this.trainable_}set trainable(t){this.layers.forEach(e=>{e._trainableWeights.forEach(e=>e.trainable=t)}),this.trainable_=t}get trainableWeights(){if(this._trainableWeights.length>0)throw new jf("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let t=[];for(const e of this.layers)t=t.concat(e.trainableWeights);return t}get nonTrainableWeights(){const t=[];for(const e of this.layers)t.push(...e.nonTrainableWeights);if(!this.trainable){const e=[];for(const t of this.layers)e.push(...t.trainableWeights);return e.concat(t)}return t}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(t,e=!0){const n={};let r=0;for(const s of this.layers)for(const t of s.weights){if(null!=n[t.originalName])throw new jf("Duplicate weight name: "+t.originalName);n[t.originalName]=t,r++}const i=[];for(const s in t){let r=s;if(null==n[s]){const t=s.split("/");r=t.slice(0,-2).concat([t[t.length-1]]).join("/")}if(null!=n[r])i.push([n[r],t[s]]);else if(e)throw new jf("Provided weight data has no target variable: "+s);delete n[r]}if(e){const t=[];for(const e in n)t.push(e);if(t.length>0)throw new jf(`${t.length} of ${r} weights are not set: `+t)}eg(i)}updatedConfig(){const t=this.getConfig(),e={};return e.className=this.getClassName(),e.config=t,e.kerasVersion="tfjs-layers "+Gg,e.backend="TensorFlow.js",e}toJSON(t,e=!0){const n=function t(e,n){if(null==e)return null;if("string"==typeof e)return tA(e);if("number"==typeof e||"boolean"==typeof e)return e;if(e instanceof Array){const r=[],i=e.length;for(let s=0;s<i;++s){const i=e[s];Kg(n,s,i)?r.push(i):r.push(t(i,n))}return r}{const n={};for(const r of Object.keys(e)){const i=e[r];n[tA(r)]="name"!==r&&"className"!==r||"string"!=typeof i?t(i,r):i}return n}}(this.updatedConfig());return e?JSON.stringify(n):n}call(t,e){return Gu(()=>{t=Zf(t);const n=new Xg;for(let e=0;e<this.inputs.length;++e)n.add(this.inputs[e],t[e]);return Zg(this.outputs,n,e)})}computeMask(t,e){return Gu(()=>{let n;return t=Zf(t),n=null==e?Gf(null,t.length):Zf(e),this.runInternalGraph(t,n)[1]})}computeOutputShape(t){const e=Gm(t);if(e.length!==this.inputLayers.length)throw new jf(`Invalid inputShape argument ${t}: model has ${this.inputLayers.length} tensor inputs.`);const n={};for(let o=0;o<e.length;o++)n[this.inputLayers[o].name+"_0_0"]=e[o];const r=Object.keys(this.nodesByDepth).map(t=>parseInt(t,10)).sort(sA);if(r.length>1)for(const o of r){const t=this.nodesByDepth[o];for(const e of t){const t=e.outboundLayer;if(-1!==this.inputLayers.map(t=>t.id).indexOf(t.id))continue;const r=[];for(let o=0;o<e.inboundLayers.length;o++)r.push(n[`${e.inboundLayers[o].name}_${e.nodeIndices[o]}_${e.tensorIndices[o]}`]);const i=Gm(t.computeOutputShape(Jf(r))),s=t.inboundNodes.indexOf(e);for(let e=0;e<i.length;e++)n[`${t.name}_${s}_${e}`]=i[e]}}const i=[],s=[];for(let o=0;o<this.outputLayers.length;o++)s.push(`${this.outputLayers[o].name}_${this.outputLayersNodeIndices[o]}_${this.outputLayersTensorIndices[o]}`);for(let o=0;o<s.length;o++){const t=s[o];Xf(t in n),i.push(n[t])}return Jf(i)}runInternalGraph(t,e){null==e&&(e=Gf(null,t.length));const n={};for(let a=0;a<this.inputs.length;++a)n[this.inputs[a].id]=[t[a],e[a]];const r=Object.keys(this.nodesByDepth).map(t=>parseInt(t,10)).sort(sA);for(const a of r){const t=this.nodesByDepth[a];for(const e of t){const t=e.outboundLayer,r=e.inputTensors,i=e.outputTensors,s=new Array;for(const e of r)e.id in n&&s.push(n[e.id]);if(s.length===r.length){let r,o,a,l,u={};if(null!=e.callArgs&&(u=e.callArgs),1===s.length){const[e,n]=s[0];null==u.mask&&(u.mask=n),a=Zf(t.call(e,u)),l=Zf(t.computeMask(e,n)),r=[e],o=[n]}else r=s.map(t=>t[0]),o=s.map(t=>t[1]),null==u.mask&&(u.mask=o),a=Zf(t.call(r,u)),l=Zf(t.computeMask(r,o));if(t.activityRegularizer)throw new Kf("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let t=0;t<i.length;++t)n[i[t].id]=[a[t],l[t]]}}}const i=[],s=[],o=[];for(const a of this.outputs){Xf(a.id in n,`Could not compute output ${a.name} : ${a.id}`);const[t,e]=n[a.id];o.push(t.shape),i.push(t),s.push(e)}return[i,s,o]}buildNodeConversionMap(t){const e={};let n;for(const r of this.layers){n=r instanceof ry?1:0;for(let t=0;t<r.inboundNodes.length;t++){const i=ry.nodeKey(r,t);this.containerNodes.has(i)&&(e[i]=n,n+=1)}}return e}getLayer(t,e){if(null!=e){if(this.layers.length<=e)throw new jf(`Was asked to retrieve layer at index ${e}, but model only has ${this.layers.length} layer(s).`);return this.layers[e]}if(null==t)throw new jf("Provide either a layer name or layer index");for(const n of this.layers)if(n.name===t)return n;throw new jf("No such layer: "+t)}calculateLosses(){return Gu(()=>{const t=[];for(const e of this.layers)for(let n=0;n<e.inboundNodes.length;++n){const r=ry.nodeKey(e,n);this.containerNodes.has(r)&&t.push(...e.calculateLosses())}return t})}getConfig(){const t={name:this.name},e=this.buildNodeConversionMap(this.layers),n=[];for(const s of this.layers){const t=s.getClassName(),r=s.getConfig(),i=[];for(let n=0;n<s.inboundNodes.length;n++){const t=s.inboundNodes[n],r=ry.nodeKey(s,n);let o={};if(this.containerNodes.has(r)){if(t.callArgs)try{JSON.stringify(t.callArgs),o=t.callArgs}catch(hk){console.warn(`Layer ${s.name} was passed non-serializable keyword arguments: `+t.callArgs+". They will not be included in the serialized model (and thus will be missing at deserialization time)."),o={}}if(t.inboundLayers.length>0){const n=[];for(let r=0;r<t.inboundLayers.length;r++){const i=t.inboundLayers[r],s=t.tensorIndices[r];let a=e[ry.nodeKey(i,t.nodeIndices[r])];null==a&&(a=0),n.push([i.name,a,s,o])}i.push(n)}}}const o={};o.name=s.name,o.className=t,o.config=r,o.inboundNodes=i,n.push(o)}t.layers=n;const r=[];for(let s=0;s<this.inputLayers.length;s++){const t=this.inputLayers[s],n=ry.nodeKey(t,this.inputLayersNodeIndices[s]);if(!this.containerNodes.has(n))continue;let i=e[n];null==i&&(i=0),r.push([t.name,i,this.inputLayersTensorIndices[s]])}t.inputLayers=r;const i=[];for(let s=0;s<this.outputLayers.length;s++){const t=this.outputLayers[s],n=ry.nodeKey(t,this.outputLayersNodeIndices[s]);if(!this.containerNodes.has(n))continue;let r=e[n];null==r&&(r=0),i.push([t.name,r,this.outputLayersTensorIndices[s]])}return t.outputLayers=i,t}static fromConfig(t,e,n={},r=!1){const i={},s={};function o(t,e){t.name in s?s[t.name].push(e):s[t.name]=[e]}function a(t,e){const n=[];let r;for(const s of e){const a=s[0],l=s[1],u=s[2];if(r=null==s[3]?{}:s[3],!(a in i))return void o(t,e);const c=i[a];if(c.inboundNodes.length<=l)return void o(t,e);n.push(c.inboundNodes[l].outputTensors[u])}n.length>0&&t.apply(Jf(n),r)}function l(t){const n=t.name,s=vg(t,null!=e.customObjects?e.customObjects:{});s.setFastWeightInitDuringBuild(r),i[n]=s,t.inboundNodes.forEach(t=>{if(!(t instanceof Array))throw new jf("Corrupted configuration, expected array for nodeData: "+t);o(s,t)})}const u=e.name,c=e.layers;for(const A of c)l(A);for(;!aA(s);)for(const t of c){const e=i[t.name];if(e.name in s){const t=s[e.name];delete s[e.name];for(const n of t)a(e,n)}}const h=[],d=[],p=e.inputLayers;for(const A of p){const t=A[0],e=A[1],n=A[2];Xf(t in i),h.push(i[t].inboundNodes[e].outputTensors[n])}const f=e.outputLayers;for(const A of f){const t=A[0],e=A[1],n=A[2];Xf(t in i),d.push(i[t].inboundNodes[e].outputTensors[n])}return new t({inputs:h,outputs:d,name:u})}get stateful(){if(this._stateful)throw new jf("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const t of this.layers)if(t.stateful)return!0;return!1}resetStates(){Gu(()=>{this.layers.forEach(t=>{t.stateful&&t.resetStates()})})}}function iy(t,e){return function(t,e,n){const r=e.length;if(null==t||Array.isArray(t)&&0===t.length)return e.map(t=>null);if(1===r)return Array.isArray(t)&&1===t.length?t:"object"==typeof t&&e[0]in t?[t[e[0]]]:[t];if(Array.isArray(t)){if(t.length!==r)throw new Error(`Provided classWeight is an array of ${t.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return t}if("object"==typeof t&&Object.keys(t).length>0&&"object"==typeof t[Object.keys(t)[0]]){const n=[];return e.forEach(e=>{n.push(e in t?t[e]:null)}),n}throw new Error(`The model has multiple (${r}) outputs, so classWeight must be either an array with ${r} elements or an object with ${e} keys. Provided classWeight not understood: ${JSON.stringify(t)}`)}(t,e)}async function sy(t,e,n,r){if(null!=e||null!=r)throw new Error("Support sampleWeight is not implemented yet");if(null!=n){const e=Gu(()=>{if(1===t.shape.length)return t.clone();if(2===t.shape.length){if(t.shape[1]>1)return t.argMax(1);if(1===t.shape[1])return t.reshape([t.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${t.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}throw new Error(`Unexpected rank of target (y) tensor (${t.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),r=Array.from(await e.data());Xu(e);const i=[];return r.forEach(t=>{if(null==n[t])throw new Error(`classWeight must contain all classes in the training data. The class ${t} exists in the data but not in classWeight`);i.push(n[t])}),Zh(i,"float32")}return null}function oy(t,e){return vi(t,e)}function ay(t,e){let n,i;n=e.xs,i=e.ys,r.assert(null!=n&&null!=i,()=>"A Dataset iterator for fitDataset() is expected to generate objects of the form `{xs: xVal, ys: yVal}`, where the two values may be `tf.Tensor`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates "+e);const s=ly("input",t.inputNames,n),o=ly("output",t.outputNames,i),a=s[0].shape[0];r.assert(s.length===t.inputs.length,()=>`LayersModel has ${t.inputs.length} inputs, but the dataset provides ${s.length} inputs.  (Expected input keys: `+JSON.stringify(t.inputNames)+")"),r.assert(o.length===t.outputs.length,()=>`LayersModel has ${t.outputs.length} outputs, but the dataset provides ${o.length} outputs.  (Expected output keys: `+JSON.stringify(t.outputNames)+")");for(let l=0;l<s.length;l++)r.assert(s[l].shape[0]===a,()=>`Batch size mismatch: input ${t.inputNames[l]} has ${s[l].shape[0]}; expected  ${a} based on input ${t.inputNames[0]}.`);for(let l=0;l<o.length;l++)r.assert(o[l].shape[0]===a,()=>`Batch size mismatch: output ${t.outputNames[l]} has ${o[l].shape[0]}; expected  ${a} based on input ${t.inputNames[0]}.`);return{xs:s,ys:o}}function ly(t,e,n){if(n instanceof ue)return[n];if(Array.isArray(n))return r.assert(n.length===e.length,()=>`Received an array of ${n.length} Tensors, but expected ${e.length} to match the ${t} keys ${e}.`),n;{const r=[];for(const i of e){if(null==n[i])throw new jf(`The feature data generated by the dataset lacks the required ${t} key '${i}'.`);r.push(n[i])}return r}}function uy(t){return"function"==typeof t.iterator}function cy(t){r.assert(t>0&&Number.isInteger(t),()=>"batchSize is required to be a positive integer, but got "+t)}function hy(t,e,n){return null==t?[null]:Array.isArray(t)?t.map(t=>KA(t,e,n-e)):KA(t,e,n-e)}function dy(t,e){return Gu(()=>null==t?null:Array.isArray(t)?t.map(t=>dy(t,e)):em(t,"int32"===e.dtype?e:e.toInt()))}function py(t,e){const n=[];let r=0,i=null;for(;r<t;)i=r+e,i>=t&&(i=t),n.push([r,i]),r=i;return n}function fy(t){const e=[];t instanceof ue&&(t=[t]);for(let n=0;n<t.length;++n){const r=t[n];if(1===r.rank)e.push(jA(r,1));else{if(0===r.rank)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");e.push(r)}}return e}function Ay(t,e){if(null==t)return;const n=[];if(e instanceof ue)n.push(e.id);else if(Array.isArray(e))e.forEach(t=>n.push(t.id));else if(null!=e)for(const i in e)n.push(e[i].id);const r=[];if(t instanceof ue)-1===n.indexOf(t.id)&&r.push(t);else if(Array.isArray(t))t.forEach(t=>{-1===n.indexOf(t.id)&&r.push(t)});else if(null!=t)for(const i in t){const e=t[i];-1===n.indexOf(e.id)&&r.push(e)}r.forEach(t=>{t.isDisposed||t.dispose()})}function my(t){return Array.isArray(t)}function gy(t){return!function(t){return t instanceof ue}(t)&&!my(t)}function yy(t,e,n,r=!0,i=""){if(null==e||0===e.length){if(null!=t){let e=!1;if(my(t)&&t.length>0)e=!0;else if(gy(t)){for(const n in t)if(t.hasOwnProperty(n)){e=!0;break}}else e=!0;if(e)throw new jf(`Error when checking model ${i} expected no data, but got `+t)}return[]}if(null==t)return e.map(t=>null);let s;if(gy(t)){t=t,s=[];for(const n of e){if(null==t[n])throw new jf(`No data provided for "${n}". Need data for each key in: `+e);s.push(t[n])}}else if(my(t)){if((t=t).length!==e.length)throw new jf(`Error when checking model ${i}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${e.length} Tensor(s), but instead got the following list of Tensor(s): `+t);s=t}else{if(t=t,e.length>1)throw new jf(`The model ${i} expects ${e.length} Tensor(s), but only received one Tensor. Found: Tensor with shape `+t.shape);s=[t]}if(s=fy(s),null!=n)for(let o=0;o<e.length;++o){if(null==n[o])continue;const t=s[o];if(t.shape.length!==n[o].length)throw new jf(`Error when checking ${i}: expected ${e[o]} to have ${n[o].length} dimension(s). but got array with shape `+t.shape);for(let s=0;s<n[o].length;++s){if(0===s&&!r)continue;const a=t.shape[s],l=n[o][s];if(null!=l&&l>=0&&a!==l)throw new jf(`Error when checking ${i}: expected ${e[o]} to have shape [${n[o]}], but got array with shape [${t.shape}].`)}}return s}function wy(t,e,n,r=!0,i=""){let s;if(Array.isArray(t)){if(t.length!==e.length)throw new jf(`Error when checking model ${i}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${e.length} Tensor(s), but instead got ${t.length} Tensors(s).`);s=t}else{if(e.length>1)throw new jf(`The model expects ${e.length} ${i} Tensors, but only received one Tensor. Found: array with shape `+JSON.stringify(t.shape)+".");s=[t]}if(null!=n)for(let o=0;o<e.length;++o){if(null==n[o])continue;const t=s[o];if(t.shape.length!==n[o].length)throw new jf(`Error when checking ${i}: expected ${e[o]} to have ${n[o].length} dimension(s), but got array with shape `+JSON.stringify(t.shape));for(let s=0;s<n[o].length;++s){if(0===s&&!r)continue;const a=t.shape[s],l=n[o][s];if(null!=l&&l!==a)throw new jf(`Error when checking ${i}: expected ${e[o]} to have shape ${JSON.stringify(n[o])} but got array with shape ${JSON.stringify(t.shape)}.`)}}}class by extends ry{constructor(t){super(t),this.isTraining=!1}summary(t,e,n=console.log){if(!this.built)throw new jf("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");!function(t,e,n,r=console.log){const i=function(t){let e=!0;const n=[],r=[];for(const i in t.nodesByDepth)n.push(t.nodesByDepth[i]);for(const i of n){if(i.length>1||1===i.length&&i[0].inboundLayers.length>1){e=!1;break}r.push(...i)}if(e)for(const i of t.layers){let t=!1;for(const n of i.inboundNodes)if(-1!==r.indexOf(n)){if(t){e=!1;break}t=!0}if(!e)break}return e}(t),s=["Layer (type)","Output shape","Param #"];let o;if(i?(e=e||65,n=n||[.45,.85,1]):(e=e||98,n=n||[.33,.55,.67,1]),n[n.length-1]<=1&&(n=n.map(t=>Math.floor(e*t))),!i){s.push("Receives inputs"),o=[];for(const e in t.nodesByDepth)o.push(...t.nodesByDepth[e])}r("_".repeat(e)),Vg(s,n,r),r("=".repeat(e));const a=t.layers;for(let c=0;c<a.length;++c)i?qg(a[c],n,r):jg(a[c],n,o,r),r((c===a.length-1?"=":"_").repeat(e));t.checkTrainableWeightsConsistency();const l=function(t){let e;return e=Jm(null!=t.collectedTrainableWeights?t.collectedTrainableWeights:t.trainableWeights),e}(t),u=Jm(t.nonTrainableWeights);r("Total params: "+(l+u)),r("Trainable params: "+l),r("Non-trainable params: "+u),r("_".repeat(e))}(this,t,e,n)}compile(t){if(null==t.loss&&(t.loss=[]),this.loss=t.loss,"string"==typeof t.optimizer)this.optimizer_=function(t){const e={Adagrad:()=>lf.adagrad(.01),Adadelta:()=>lf.adadelta(1,.95,$f()),Adam:()=>lf.adam(.001,.9,.999,$f()),Adamax:()=>lf.adamax(.002,.9,.999,$f(),0),RMSProp:()=>lf.rmsprop(.001,.9,0,$f()),SGD:()=>lf.sgd(.01)};if(e.adagrad=e.Adagrad,e.adadelta=e.Adadelta,e.adam=e.Adam,e.adamax=e.Adamax,e.rmsprop=e.RMSProp,e.sgd=e.SGD,t in e)return e[t]();throw new jf("Unknown Optimizer "+t)}(t.optimizer),this.isOptimizerOwned=!0;else{if(!(t.optimizer instanceof Jp))throw new jf("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=t.optimizer,this.isOptimizerOwned=!1}let e=[];if(Array.isArray(t.loss)||"string"==typeof t.loss||"function"==typeof t.loss)if(Array.isArray(t.loss)){if(t.loss.length!==this.outputs.length)throw new jf(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${t.loss}.`);e=t.loss.map(t=>Fg(t))}else{const n=Fg(t.loss);this.outputs.forEach(t=>{e.push(n)})}else{t.loss=t.loss;for(const e in t.loss)if(-1===this.outputNames.indexOf(e))throw new jf(`Unknown entry in loss dictionary: "${e}". Only expected the following keys: `+this.outputNames);for(const n of this.outputNames)null==t.loss[n]&&console.warn(`Output "${n}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${n} during training`),e.push(Fg(t.loss[n]))}this.lossFunctions=e,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let s=0;s<this.outputs.length;++s){const t=this.internalOutputShapes[s];this.feedOutputNames.push(this.outputNames[s]),this.feedOutputShapes.push(t),this.feedLossFns.push(this.lossFunctions[s])}const n=[];this.metrics=t.metrics,this.metricsNames=["loss"],this.metricsTensors=[],DA("loss",()=>{for(let t=0;t<this.outputs.length;++t){if(-1!==n.indexOf(t))continue;const e=this.lossFunctions[t];this.outputs.length>1&&(this.metricsTensors.push([e,t]),this.metricsNames.push(this.outputNames[t]+"_loss"))}});const r=function(t,e){if(null==t||Array.isArray(t)&&0===t.length)return e.map(t=>[]);let n;if("string"==typeof t||"function"==typeof t)n=[t];else{if(!Array.isArray(t)&&"object"!=typeof t)throw new TypeError("Type of metrics argument not understood. Expected an string,function, Array, or Object, found: "+t);n=t}if(Array.isArray(n))return e.map(t=>n);{const t=[];for(const r of e){let e=n.hasOwnProperty(r)?n[r]:[];Array.isArray(e)||(e=[e]),t.push(e)}return t}}(t.metrics,this.outputNames),i=(t,e,n)=>{this.outputNames.length>1&&(e=this.outputNames[t]+"_"+e),this.metricsNames.push(e),this.metricsTensors.push([n,t])};DA("metric",()=>{for(let t=0;t<this.outputs.length;++t)-1===n.indexOf(t)&&(e=>{let n,r,s;for(const o of e){if("string"==typeof o&&-1!==["accuracy","acc","crossentropy","ce"].indexOf(o)){const e=this.internalOutputShapes[t];let i;1===e[e.length-1]||this.lossFunctions[t]===kg?-1!==["accuracy","acc"].indexOf(o)?r=Tg:-1!==["crossentropy","ce"].indexOf(o)&&(r=Lg):this.lossFunctions[t]===Bg?-1!==["accuracy","acc"].indexOf(o)?r=Mg:-1!==["crossentropy","ce"].indexOf(o)&&(r=Pg):-1!==["accuracy","acc"].indexOf(o)?r=Rg:-1!==["crossentropy","ce"].indexOf(o)&&(r=Ug),-1!==["accuracy","acc"].indexOf(o)?i="acc":-1!==["crossentropy","ce"].indexOf(o)&&(i="ce"),s=r,n=""+i}else{const t=Qg(o);s=t,n=""+Hg(o)}let e;DA(n,()=>{e=s}),i(t,n,e)}})(r[t])}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){null!=this.collectedTrainableWeights&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(t,e,n={}){const r=null==n.batchSize?32:n.batchSize;cy(r);const i=this.standardizeUserDataXY(t,e,!0,r);try{const s=i[0].concat(i[1]);return this.makeTestFunction(),Jf(this.testLoop(this.testFunction,s,r,n.verbose,n.steps))}finally{Ay(i[0],t),Ay(i[1],e)}}async evaluateDataset(t,e){return this.makeTestFunction(),async function(t,e,n){const i=null!=(n=n||{}).batches,s=t.testFunction;let o=[];if(n.verbose>0)throw new Kf("Verbose mode is not implemented yet.");r.assert(!i||n.batches>0&&Number.isInteger(n.batches),()=>"Test loop expects `batches` to be a positive integer, but received "+JSON.stringify(n.batches));const a="function"==typeof e.next?e:await e.iterator();let l=0,u=0;for(;!i||u<n.batches;){const e=await a.next();if(o=Gu(()=>{if(e.value){const{xs:n,ys:r}=ay(t,e.value),i=n.concat(r),a=Gu(()=>s(i));if(Xu(i),0===u)for(let t=0;t<a.length;++t)o.push(ki(0));const c=i[0].shape[0];for(let t=0;t<a.length;++t){const e=a[t],n=o[t];o[t]=Gu(()=>$i(o[t],vi(c,e))),u>0&&Xu(n)}Xu(a),l+=c,++u}return o}),e.done){i&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let r=0;r<o.length;++r){const t=o[r];o[r]=Si(o[r],l),Xu(t)}return Jf(o)}(this,t,e)}checkNumSamples(t,e,n,r="steps"){let i;if(null!=n){if(i=null,null!=e)throw new jf(`If ${r} is set, batchSize must be null or undefined.Got batchSize = `+e)}else{if(null==t)throw new jf("Either the input data should have a defined shape, or "+r+" shoud be specified.");i=Array.isArray(t)?t[0].shape[0]:t.shape[0]}return i}execute(t,e){if(Array.isArray(e)&&0===e.length)throw new jf("`outputs` is an empty Array, which is not allowed.");const n=Array.isArray(e),r=this.retrieveSymbolicTensors(n?e:[e]),i=new Xg;if(t instanceof ue&&(t=[t]),Array.isArray(t)){if(t.length!==this.inputs.length)throw new jf(`The number of inputs provided (${t.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let e=0;e<this.inputs.length;++e)i.add(this.inputs[e],t[e])}else for(const o of this.inputs){const e=t[o.name];if(null==e)throw new jf("No value is provided for the model's input "+o.name);i.add(o,e)}const s=Zg(r,i);return n?s:s[0]}retrieveSymbolicTensors(t){const e=Gf(null,t.length);let n=t.length;for(const r of this.layers){const i=Array.isArray(r.output)?r.output:[r.output],s=i.map(t=>t.name);for(let r=0;r<t.length;++r){const o=s.indexOf(t[r]);if(-1!==o&&(e[r]=i[o],n--),0===n)break}if(0===n)break}if(n>0){const n=[];throw e.forEach((e,r)=>{null==e&&n.push(t[r])}),new jf("Cannot find SymbolicTensors for output name(s): "+JSON.stringify(n))}return e}predictLoop(t,e=32,n=!1){return Gu(()=>{const r=this.checkNumSamples(t);if(n)throw new Kf("Verbose predictLoop() is not implemented yet.");const i=py(r,e),s=this.outputs.map(t=>[]);for(let e=0;e<i.length;++e)Gu(()=>{const n=hy(t,i[e][0],i[e][1]),r=[];if(Array.isArray(n))for(let t=0;t<n.length;++t)r.push({key:this.inputs[t],value:n[t]});else r.push({key:this.inputs[0],value:n});const s=new Xg(r);return Zg(this.outputs,s)}).forEach((t,e)=>s[e].push(t));return Jf(s.map(t=>Va(t,0)))})}predict(t,e={}){const n=fy(t);wy(n,this.inputNames,this.feedInputShapes,!1);try{const r=null==e.batchSize?32:e.batchSize;return cy(r),this.predictLoop(n,r)}finally{Ay(n,t)}}predictOnBatch(t){wy(t,this.inputNames,this.feedInputShapes,!0);const e=(Array.isArray(t)?t[0]:t).shape[0];return this.predictLoop(t,e)}standardizeUserDataXY(t,e,n=!0,i){if(null==this.optimizer_)throw new qf("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const s=[];for(let r=0;r<this.feedOutputShapes.length;++r){const t=this.feedOutputShapes[r];s.push(this.feedLossFns[r]===Bg?t.slice(0,t.length-1).concat([1]):t)}if(function(t,e,n){const i=oA(t.map(t=>t.shape[0]));i.sort();const s=oA(e.map(t=>t.shape[0]));if(s.sort(),i.length>1)throw new jf("All input Tensors (x) should have the same number of samples. Got array shapes: "+JSON.stringify(t.map(t=>t.shape)));if(s.length>1)throw new jf("All target Tensors (y) should have the same number of samples. Got array shapes: "+JSON.stringify(e.map(t=>t.shape)));if(i.length>0&&s.length>0&&!r.arraysEqual(i,s))throw new jf(`Input Tensors should have the same number of samples as target Tensors. Found ${i[0]} input sample(s) and ${s[0]} target sample(s).`)}(t=yy(t,this.feedInputNames,this.feedInputShapes,!1,"input"),e=yy(e,this.feedOutputNames,s,!1,"target")),function(t,e,n){const r=[_g,kg,Eg];for(let i=0;i<t.length;++i){const s=t[i],o=e[i],a=n[i];if(null!=o){if(o===Eg&&1===s.shape[s.shape.length-1])throw new jf(`You are passing a target array of shape ${s.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(-1!==r.indexOf(o)){const t=s.shape.slice(1),e=a.slice(1);for(let n=0;n<t.length;++n){const r=t[n],i=e[n];if(null!=i&&r!==i)throw new jf(`A target Tensor with shape ${s.shape} was passed for an output of shape ${a}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}(e,this.feedLossFns,this.feedOutputShapes),this.stateful&&null!=i&&i>0&&t[0].shape[0]%i!=0)throw new jf(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${i}. Found: ${t[0].shape[0]} sample(s).`);return[t,e]}async standardizeUserData(t,e,n,r,i=!0,s){const[o,a]=this.standardizeUserDataXY(t,e,i,s);if(null!=n)throw new Error("sample weight is not supported yet.");let l=null;if(null!=r){const t=iy(r,this.outputNames);l=[];for(let e=0;e<t.length;++e)l.push(await sy(a[e],null,t[e]))}return[o,a,l]}testLoop(t,e,n,r=0,i){return Gu(()=>{const s=this.checkNumSamples(e,n,i,"steps"),o=[];if(r>0)throw new Kf("Verbose mode is not implemented yet.");if(null!=i)throw new Kf("steps mode in testLoop() is not implemented yet");{const r=py(s,n),i=Zh(VA(0,s));for(let n=0;n<r.length;++n){const s=r[n][0],a=r[n][1],l=KA(i,s,a-s),u=dy(e,l),c=t(u);if(0===n)for(let t=0;t<c.length;++t)o.push(ki(0));for(let t=0;t<c.length;++t)o[t]=$i(o[t],vi(a-s,c[t]))}for(let t=0;t<o.length;++t)o[t]=Si(o[t],s)}return o})}getDedupedMetricsNames(){const t=this.metricsNames,e=[];for(let n=0;n<t.length;++n){const r=t[n];let i=r;Yf(t,r)>1&&(i+="_"+Yf(t.slice(0,n),r)),e.push(i)}return e}makeTrainFunction(){return t=>{const e=[],n=t.slice(0,this.inputs.length),r=t.slice(this.inputs.length,this.inputs.length+this.outputs.length),i=t.slice(this.inputs.length+this.outputs.length,this.inputs.length+2*this.outputs.length),s=[],o=this.collectedTrainableWeights.map(t=>t.read());return[this.optimizer_.minimize(()=>{const t=[];for(let e=0;e<this.inputs.length;++e)t.push({key:this.inputs[e],value:n[e]});const o=new Xg(t),a=Zg(this.outputs,o,{training:!0});let l;for(let n=0;n<this.lossFunctions.length;++n){let t=(0,this.lossFunctions[n])(r[n],a[n]);null!=i[n]&&(t=oy(t,i[n]));const s=Bh(t);e.push(s),l=0===n?t:$i(l,t)}for(let n=0;n<this.metricsTensors.length;++n){let t;if(this.outputs.length>1&&n<this.outputs.length)t=e[n];else{const e=this.metricsTensors[n][1];t=Bh((0,this.metricsTensors[n][0])(r[e],a[e]))}Yu(t),s.push(t)}return l=Bh(l),this.calculateLosses().forEach(t=>{l=$i(l,t)}),l},!0,o)].concat(s)}}makeTestFunction(){this.testFunction=t=>Gu(()=>{const e=[];let n;const r=t.slice(0,this.inputs.length),i=t.slice(this.inputs.length,this.inputs.length+this.outputs.length),s=[];for(let t=0;t<this.inputs.length;++t)s.push({key:this.inputs[t],value:r[t]});const o=new Xg(s),a=Zg(this.outputs,o);for(let t=0;t<this.lossFunctions.length;++t){const r=Bh((0,this.lossFunctions[t])(i[t],a[t]));n=0===t?r:$i(n,r),e.push(n)}for(let t=0;t<this.metricsTensors.length;++t){const n=this.metricsTensors[t][1],r=Bh((0,this.metricsTensors[t][0])(i[n],a[n]));e.push(r)}return e})}async fit(t,e,n={}){return async function(t,e,n,i={}){if(t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");let s,o,a,l,u,c,h;t.isTraining=!0;try{const d=null==i.batchSize?32:i.batchSize;cy(d);const p=!1,f=await t.standardizeUserData(e,n,i.sampleWeight,i.classWeight,p,d);s=f[0],o=f[1],h=f[2];let A,m=!1;if(null!=i.validationData&&i.validationData.length>0){if(m=!0,2!==i.validationData.length)throw 3===i.validationData.length?new Kf("validationData including sample weights is not supported yet."):new jf("When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; "+i.validationData+" is invalid.");a=i.validationData[0],l=i.validationData[1];const e=!0,n=await t.standardizeUserData(a,l,null,null,e,d);u=n[0],c=n[1],A=u.concat(c)}else if(null!=i.validationSplit&&i.validationSplit>0&&i.validationSplit<1){m=!0;const t=Math.floor(s[0].shape[0]*(1-i.validationSplit)),e=s[0].shape[0];u=hy(s,t,e),s=hy(s,0,t),c=hy(o,t,e),o=hy(o,0,t),A=u.concat(c)}else null!=i.validationSteps&&(m=!0);const g=s.concat(o).concat(h);t.checkTrainableWeightsConsistency();const y=t.makeTrainFunction(),w=t.getDedupedMetricsNames();let b,v;m?(t.makeTestFunction(),b=t.testFunction,v=w.slice().concat(w.map(t=>"val_"+t))):(b=null,A=[],v=w.slice());const x=yg(i.callbacks,i.yieldEvery);return await async function(t,e,n,i,s,o,a,l,u,c,h,d,p,f,A){null==s&&(s=32),null==o&&(o=1),null==h&&(h=!0),null==p&&(p=0);let m=!1;null!=u&&null!=c&&(m=!0);const g=t.checkNumSamples(n,s,null,"steps_per_epoch");let y;null!=g&&(y=VA(0,g)),null==a&&(a=1);const{callbackList:w,history:b}=bg(l,a,o,p,g,null,s,m,d);w.setModel(t),t.history=b,await w.onTrainBegin(),t.stopTraining_=!1;for(let v=p;v<o;++v){await w.onEpochBegin(v);const o={};{if("batch"===h)throw new Kf("batch shuffling is not implemneted yet");h&&r.shuffle(y);const a=Zh(y),l=py(g,s);for(let r=0;r<l.length;++r){const h={};if(await w.onBatchBegin(r,h),Gu(()=>{const d=l[r][0],p=l[r][1],f=KA(a,d,p-d);h.batch=r,h.size=p-d;const A=dy(n,f),g=e(A);for(let t=0;t<i.length;++t){const e=g[t];h[i[t]]=e,Yu(e)}if(r===l.length-1&&m){const e=t.testLoop(u,c,s);for(let t=0;t<i.length;++t){const n=i[t],r=e[t];Yu(r),o["val_"+n]=r}}}),await w.onBatchEnd(r,h),hg(h),t.stopTraining_)break}a.dispose()}if(await w.onEpochEnd(v,o),t.stopTraining_)break}return await w.onTrainEnd(),await t.history.syncData(),t.history}(t,y,g,w,d,i.epochs,i.verbose,x,b,A,i.shuffle,v,i.initialEpoch)}finally{t.isTraining=!1,Ay(s,e),Ay(o,n),Ay(u,a),Ay(c,l),null!=h&&Xu(h)}}(this,t,e,n)}async fitDataset(t,e){return async function(t,e,n){const i=null!=n.batchesPerEpoch;if(r.assert(null!=t.optimizer,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),r.assert(null!=n,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),r.assert(null!=n.epochs&&n.epochs>0&&Number.isInteger(n.epochs),()=>"For fitDataset(), config.epochs is expected to be a positive integer, but got "+n.epochs),r.assert(!i||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>"For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got "+n.batchesPerEpoch),r.assert(null==n.validationSplit,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0;try{const s=null!=n.validationData;let o,a;if(s)if(uy(n.validationData))r.assert(null==n.validationBatches||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>"For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got "+n.validationBatches);else{const t=function(t){if(3===t.length)throw new Kf("Validation with sample weights is not implemented yet.");return{xs:t[0],ys:t[1]}}(n.validationData);o=t.xs,a=t.ys}const l=t.makeTrainFunction(),u=t.getDedupedMetricsNames();let c;c=s?u.slice().concat(u.map(t=>"val_"+t)):u.slice();const h=yg(n.callbacks,n.yieldEvery),d=null==n.verbose?1:n.verbose,{callbackList:p,history:f}=bg(h,d,n.epochs,null,null,function(t,e){let n=null;return null!=e.batchesPerEpoch?n=e.batchesPerEpoch:Number.isFinite(t.size)&&(n=t.size),n}(e,n),null,s,c);p.setModel(t),t.history=f,await p.onTrainBegin(),t.stopTraining_=!1;let A=null==n.initialEpoch?0:n.initialEpoch,m=await e.iterator();for(;A<n.epochs;){const r={};await p.onEpochBegin(A);let c=0,h=0;for(i||(m=await e.iterator());!i||c<n.batchesPerEpoch;){const e=await m.next();if(i&&e.done){console.warn("You provided `batchesPerEpoch` as "+n.batchesPerEpoch+", but your dataset iterator ran out of data after "+c+" batches; interrupting training. Make sure that your dataset can generate at least `batchesPerEpoch * epochs` batches (in this case, "+n.batchesPerEpoch*n.epochs+" batches). You may need to use the repeat() function when building your dataset.");break}if(null!=e.value){const{xs:r,ys:i}=ay(t,e.value),s={};s.batch=h,s.size=r[0].shape[0],await p.onBatchBegin(h,s);const o=[];if(null!=n.classWeight){const e=iy(n.classWeight,t.outputNames);for(let t=0;t<e.length;++t)o.push(await sy(i[t],null,e[t]))}const a=r.concat(i).concat(o),d=l(a);Xu(a);for(let t=0;t<u.length;++t){const e=d[t];s[u[t]]=e,Yu(e)}await p.onBatchEnd(h,s),hg(s),h++,c++}if(i?c>=n.batchesPerEpoch:e.done){if(s){let e;e=uy(n.validationData)?Zf(await t.evaluateDataset(n.validationData,{batches:n.validationBatches})):Zf(t.evaluate(o,a,{batchSize:null==n.validationBatchSize?32:n.validationBatchSize,verbose:0}));for(let n=0;n<t.metricsNames.length;++n)r["val_"+t.metricsNames[n]]=e[n]}break}if(t.stopTraining_)break}if(await p.onEpochEnd(A,r),A++,t.stopTraining_)break}return await p.onTrainEnd(),await t.history.syncData(),t.history}finally{t.isTraining=!1}}(this,t,e)}async trainOnBatch(t,e){const n=await this.standardizeUserData(t,e),r=n[0],i=n[1],s=this.makeTrainFunction()(r.concat(i)),o=[];for(const a of s){const t=await a.data();o.push(t[0])}return Xu(s),Jf(o)}getNamedWeights(t){const e=[],n=null!=t&&t.trainableOnly,r=n?this.trainableWeights:this.weights,i=this.getWeights(n);for(let s=0;s<r.length;++s)n&&!r[s].trainable||e.push({name:r[s].originalName,tensor:i[s]});return e}set stopTraining(t){this.stopTraining_=t}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(t){this.optimizer_!==t&&(this.optimizer_=t,this.isOptimizerOwned=!1)}dispose(){const t=super.dispose();if(0===t.refCountAfterDispose&&null!=this.optimizer&&this.isOptimizerOwned){const e=Ku().numTensors;this.optimizer_.dispose(),t.numDisposedVariables+=e-Ku().numTensors}return t}getLossIdentifiers(){let t;if("string"==typeof this.loss)t=tA(this.loss);else if(Array.isArray(this.loss)){for(const t of this.loss)if("string"!=typeof t)throw new Error("Serialization of non-string loss is not supported.");t=this.loss.map(t=>tA(t))}else{const e=Object.keys(this.loss);t={};const n=this.loss;for(const r of e){if("string"!=typeof n[r])throw new Error("Serialization of non-string loss is not supported.");t[r]=tA(n[r])}}return t}getMetricIdentifiers(){if("string"==typeof this.metrics||"function"==typeof this.metrics)return[tA(Hg(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(t=>tA(Hg(t)));{const t={};for(const e in this.metrics)t[e]=tA(Hg(this.metrics[e]));return t}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(t){if(null!=t.weighted_metrics)throw new Error("Loading weight_metrics is not supported yet.");if(null!=t.loss_weights)throw new Error("Loading loss_weights is not supported yet.");if(null!=t.sample_weight_mode)throw new Error("Loading sample_weight_mode is not supported yet.");const e=vg(Wg(t.optimizer_config));let n,r;if("string"==typeof t.loss)n=eA(t.loss);else if(Array.isArray(t.loss))n=t.loss.map(t=>eA(t));else if(null!=t.loss){n={};for(const e in t.loss)n[e]=eA(t.loss[e])}if(Array.isArray(t.metrics))r=t.metrics.map(t=>eA(t));else if(null!=t.metrics){r={};for(const e in t.metrics)r[e]=eA(t.metrics[e])}this.compile({loss:n,metrics:r,optimizer:e})}async save(t,e){if("string"==typeof t){const e=l.getSaveHandlers(t);if(0===e.length)throw new jf(`Cannot find any save handlers for URL '${t}'`);if(e.length>1)throw new jf(`Found more than one (${e.length}) save handlers for URL '${t}'`);t=e[0]}if(null==t.save)throw new jf("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const n=await l.encodeWeights(this.getNamedWeights(e)),r={modelTopology:this.toJSON(null,!1),format:"layers-model",generatedBy:"TensorFlow.js tfjs-layers v"+Gg,convertedBy:null};if(null!=e&&e.includeOptimizer&&null!=this.optimizer){r.trainingConfig=this.getTrainingConfig();const t="optimizer",{data:e,specs:i}=await l.encodeWeights(await this.optimizer.getWeights(),t);n.specs.push(...i),n.data=l.concatenateArrayBuffers([n.data,e])}return null!=this.userDefinedMetadata&&($g(this.userDefinedMetadata,this.name,!0),r.userDefinedMetadata=this.userDefinedMetadata),r.weightData=n.data,r.weightSpecs=n.specs,t.save(r)}setUserDefinedMetadata(t){$g(t,this.name),this.userDefinedMetadata=t}getUserDefinedMetadata(){return this.userDefinedMetadata}}async function vy(t,e){"modelTopology"in t||(t={modelTopology:t});let n=(t=t).modelTopology;null!=n.model_config&&(n=n.model_config);const r=vg(Wg(n),e);if(null!=t.weightsManifest){const e=await l.loadWeights(t.weightsManifest,t.pathPrefix,r.weights.map(t=>t.originalName)),n={};for(const t of r.weights)n[t.originalName]=e[t.originalName];r.loadWeights(n),Xu(e)}return r}by.className="Model",p.registerClass(by);class xy extends by{constructor(t){if(super({inputs:[],outputs:[]}),t=t||{},this.trainable=!0,this.built=!1,this.name=null!=t.name?t.name:Km("sequential_"),null!=t.layers)for(const e of t.layers)this.add(e)}checkShape(t){if(t.inboundNodes[0].outputTensors[0].shape.some(t=>t<0))throw new jf("Negative dimension size caused by adding layer "+t.name+" with input shape ["+t.inboundNodes[0].inputTensors[0].shape+"]")}add(t){const e=t instanceof xy||t instanceof by;let n;if(e){if(n=t,1!==n.outputs.length)throw new jf("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==n.inputs.length)throw new jf("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===t.inboundNodes.length){if(null==t.batchInputShape)throw new jf("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const e=ug({batchShape:t.batchInputShape,dtype:t.dtype,name:t.name+"_input"});t.apply(e)}if(e)this.outputs=n.outputs,this.inputs=n.inputs;else{if(1!==t.inboundNodes.length)throw new jf(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${t.name} which has ${t.inboundNodes.length} pre-existing inbound connections.`);if(1!==t.inboundNodes[0].outputTensors.length)throw new jf("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(t),this.outputs=[t.inboundNodes[0].outputTensors[0]],this.inputs=function t(e,n,r){if((null==n||null!=r&&r>0)&&(n=e.sourceLayer,r=e.nodeIndex),0===n.inboundNodes.length)return[e];{const e=n.inboundNodes[r];if(0===e.inboundLayers.length)return e.inputTensors;{const n=[];for(let r=0;r<e.inboundLayers.length;r++){const i=t(e.inputTensors[r],e.inboundLayers[r],e.nodeIndices[r]);for(const t of i)-1===n.indexOf(t)&&n.push(t)}return n}}}(this.outputs[0])}this.inboundNodes=[],new sg({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:Gf(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(t=>t.shape),outputShapes:this.outputs[0].shape})}else{const e=t.apply(this.outputs[0]);if(Array.isArray(e))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(t),this.outputs=[e],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(t),this.built=!1}pop(){if(0===this.layers.length)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const t=this.layers.length-1;this.layers[t].outboundNodes=[],this.outputs=[this.layers[t].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(t,e){return null==this.model&&this.build(),this.model.call(t,e)}build(t){if(Ym(t),0===this.inputs.length||0===this.outputs.length)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new by({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(t,e,n=console.log){this.built||this.build(),super.summary(t,e,n)}setWeights(t){null==this.model&&this.build(),this.model.setWeights(t)}evaluate(t,e,n={}){if(!this.built)throw new qf("The model needs to be compiled before being used.");return this.model.evaluate(t,e,n)}async evaluateDataset(t,e){if(!this.built)throw new qf("The model needs to be compiled before being used.");return this.model.evaluateDataset(t,e)}predict(t,e={}){return null==this.model&&this.build(),this.model.predict(t,e)}predictOnBatch(t){return null==this.model&&this.build(),this.model.predictOnBatch(t)}compile(t){this.build(),this.model.compile(t),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return null==this.model?void 0:this.model.optimizer}set optimizer(t){this.model.optimizer=t}async fit(t,e,n={}){if(!this.built)throw new qf("The model needs to be compiled before being used.");return this.model.fit(t,e,n)}async fitDataset(t,e){if(!this.built)throw new qf("The model needs to be compiled before being used.");return this.model.fitDataset(t,e)}async trainOnBatch(t,e){return this.model.trainOnBatch(t,e)}static fromConfig(t,e,n={},i=!1){let s,o={};if(e instanceof Array){if(null==e[0].className||"Merge"===e[0].className)throw new jf("Legacy serialization format not supported yet.");s=e}else r.assert(null!=e.layers,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),s=e.layers,delete e.layers,o=e;const a=new t(o);if(!(a instanceof xy))throw new Kf("Sequential.fromConfig called on non-Sequential input: "+a);for(const r of s){const t=vg(r,void 0,i);i&&t.setFastWeightInitDuringBuild(!0),a.add(t)}return a}set stopTraining(t){if(null==this.model)throw new jf("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=t}get stopTraining(){if(null==this.model)throw new jf("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const t=[];for(const e of this.layers){const n={};n.className=e.getClassName(),n.config=e.getConfig(),t.push(n)}return{name:this.name,layers:t}}}function _y(t){return new by(t)}function Cy(t){return new xy(t)}function Sy(t,e){return null==e&&(e={}),async function(t,e){if(null==e&&(e={}),"string"==typeof t){const n=l.getLoadHandlers(t,e);if(0===n.length)n.push(l.browserHTTPRequest(t,e));else if(n.length>1)throw new jf(`Found more than one (${n.length}) load handlers for URL '${t}'`);t=n[0]}return async function(t,e,n){if(null==n&&(n={}),null==t.load)throw new jf("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const r=await t.load();let i=r.modelTopology;null!=i.model_config&&(i=i.model_config);const s=null==n.strict||n.strict,o=null!=r.weightData&&null!=r.weightSpecs&&s,a=vg(Wg(i),void 0,o),u=r.trainingConfig;if(null!=u&&a.loadTrainingConfig(u),null!=r.userDefinedMetadata&&a.setUserDefinedMetadata(r.userDefinedMetadata),null!=r.weightData){if(null==r.weightSpecs)throw new jf("LayersModel artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");const{modelWeights:t,optimizerWeights:e}=function(t,e){const n=l.decodeWeights(t,e),r={},i=[];return e.forEach(t=>{"optimizer"===t.group?i.push({name:t.name,tensor:n[t.name]}):r[t.name]=n[t.name]}),{modelWeights:r,optimizerWeights:i}}(r.weightData,r.weightSpecs);a.loadWeights(t,s),null!=a.optimizer&&e.length>0&&await a.optimizer.setWeights(e),Xu(t),Xu(e.map(t=>t.tensor))}return a}(t,0,e)}(t,e)}function Ey(t){return ug(t)}function By(t,e){wg.registerCallbackConstructor(t,e)}xy.className="Sequential",p.registerClass(xy);class ky extends p.Serializable{getConfig(){return{}}}class Ny extends ky{apply(t,e=1){return function(t,e=1){if(1!==e)throw new Kf(`Support for alpha values other than 1 (${e}) is not implemented yet.`);return Wc(t)}(t,e)}}Ny.className="elu",p.registerClass(Ny);class Iy extends ky{apply(t){return cd(t)}}Iy.className="selu",p.registerClass(Iy);class Fy extends ky{apply(t){return nd(t)}}Fy.className="relu",p.registerClass(Fy);class Ty extends ky{apply(t){return Gu(()=>Nh(6,nd(t)))}}Ty.className="relu6",p.registerClass(Ty);class Ry extends ky{apply(t){return t}}Ry.className="linear",p.registerClass(Ry);class Oy extends ky{apply(t){return Ma(t)}}Oy.className="sigmoid",p.registerClass(Oy);class Dy extends ky{apply(t){return function(t){return Gu(()=>{const e=$i(.5,vi(.2,t));return Rc(e,0,1)})}(t)}}Dy.className="hardSigmoid",p.registerClass(Dy);class Ly extends ky{apply(t){return wd(t)}}Ly.className="softplus",p.registerClass(Ly);class My extends ky{apply(t){return function(t){return Gu(()=>Si(t,lc(t).add(1)))}(t)}}My.className="softsign",p.registerClass(My);class Uy extends ky{apply(t){return _c(t)}}Uy.className="tanh",p.registerClass(Uy);class Py extends ky{apply(t,e=-1){return yd(t,e)}}Py.className="softmax",p.registerClass(Py);class zy extends ky{apply(t,e=-1){return bh(t,e)}}function Qy(t){return t.getClassName()}function Hy(t,e={}){return iA(t,p.SerializationMap.getMap().classNameMap,e,"activation")}function $y(t){if(null==t)return Hy({className:"linear",config:{}});if("string"==typeof t){const e={};return e.className=t,e.config={},Hy(e)}return t instanceof ky?t:Hy(t)}function Vy(t){if(null!=t&&"object"!=typeof t)throw new Error("Argument to L1L2 regularizer's constructor is expected to be an object, but received: "+t)}zy.className="logSoftmax",p.registerClass(zy);class qy extends p.Serializable{}class jy extends qy{constructor(t){super(),Vy(t),this.l1=null==t||null==t.l1?.01:t.l1,this.l2=null==t||null==t.l2?.01:t.l2,this.hasL1=0!==this.l1,this.hasL2=0!==this.l2}apply(t){return Gu(()=>{let e=Vo([1]);return this.hasL1&&(e=$i(e,ts(vi(this.l1,lc(t))))),this.hasL2&&(e=$i(e,ts(vi(this.l2,nm(t))))),e.asScalar()})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(t,e){return new t({l1:e.l1,l2:e.l2})}}jy.className="L1L2",p.registerClass(jy);const Ky={l1l2:"L1L2"};function Wy(t){return rA(t)}function Gy(t,e={}){return iA(t,p.SerializationMap.getMap().classNameMap,e,"regularizer")}function Xy(t){return null==t?null:"string"==typeof t?Gy({className:t in Ky?Ky[t]:t,config:{}}):t instanceof qy?t:Gy(t)}class Yy extends ag{constructor(t){super(null==t?{}:t),this.supportsMasking=!0,null!=t&&(this.maxValue=t.maxValue)}call(t,e){t=Xm(t);let n=nd(t);return null!=this.maxValue&&(n=Rc(n,0,this.maxValue)),n}computeOutputShape(t){return t}getConfig(){const t={maxValue:this.maxValue},e=super.getConfig();return Object.assign(t,e),t}}Yy.className="ReLU",p.registerClass(Yy);class Jy extends ag{constructor(t){super(null==t?{}:t),this.DEFAULT_ALPHA=.3,null==t&&(t={}),this.alpha=null==t.alpha?this.DEFAULT_ALPHA:t.alpha}call(t,e){const n=Xm(t);return ah(n,this.alpha)}computeOutputShape(t){return t}getConfig(){const t={alpha:this.alpha},e=super.getConfig();return Object.assign(t,e),t}}Jy.className="LeakyReLU",p.registerClass(Jy);class Zy extends ag{constructor(t){if(super(null==t?{}:t),this.DEFAULT_ALPHA_INITIALIZER="zeros",null==t&&(t={}),this.supportsMasking=!0,this.alphaInitializer=km(t.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=Xy(t.alphaRegularizer),this.alphaConstraint=vA(t.alphaConstraint),null==t.sharedAxes)this.sharedAxes=null;else if(Array.isArray(t.sharedAxes))this.sharedAxes=t.sharedAxes;else{if("number"!=typeof t.sharedAxes)throw new jf("Expected sharedAxes to be a number or an array of numbers, but got "+t.sharedAxes);this.sharedAxes=[t.sharedAxes]}}build(t){const e=(t=Ym(t)).slice(1);if(null!=this.sharedAxes)for(const r of this.sharedAxes)e[r-1]=1;this.alpha=this.addWeight("alpha",e,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const n={};if(null!=this.sharedAxes)for(let r=1;r<t.length;++r)n[r]=t[r];this.inputSpec=[new ng({ndim:t.length,axes:n})],this.built=!0}call(t,e){return t=Xm(t),Hh(t,this.alpha.read())}getConfig(){const t={alphaInitializer:Bm(this.alphaInitializer),alphaRegularizer:Wy(this.alphaRegularizer),alphaConstraint:wA(this.alphaConstraint),sharedAxes:this.sharedAxes},e=super.getConfig();return Object.assign(t,e),t}}Zy.className="PReLU",p.registerClass(Zy);class tw extends ag{constructor(t){if(super(null==t?{}:t),this.DEFAULT_ALPHA=1,null==t&&(t={}),null!=t.alpha&&t.alpha!==this.DEFAULT_ALPHA)throw new Kf(`Non-default alpha value (${t.alpha}) is not supported by the ELU layer yet.`);this.alpha=null==t.alpha?this.DEFAULT_ALPHA:t.alpha}call(t,e){const n=Xm(t);return Wc(n)}computeOutputShape(t){return t}getConfig(){const t={alpha:this.alpha},e=super.getConfig();return Object.assign(t,e),t}}tw.className="ELU",p.registerClass(tw);class ew extends ag{constructor(t){super(null==t?{}:t),this.DEFAULT_THETA=1,null==t&&(t={}),this.theta=null==t.theta?this.DEFAULT_THETA:t.theta}call(t,e){const n=Xm(t);return n.mul(qA(n.greater(this.theta),"float32"))}computeOutputShape(t){return t}getConfig(){const t={theta:this.theta},e=super.getConfig();return Object.assign(t,e),t}}ew.className="ThresholdedReLU",p.registerClass(ew);class nw extends ag{constructor(t){super(null==t?{}:t),this.DEFAULT_AXIS=1,null==t&&(t={}),this.softmax=(new Py).apply,this.axis=null==t.axis?this.DEFAULT_AXIS:t.axis}call(t,e){const n=Xm(t);return this.softmax(n,this.axis)}computeOutputShape(t){return t}getConfig(){const t={axis:this.axis},e=super.getConfig();return Object.assign(t,e),t}}function rw(t,e,n){if("number"==typeof t)return Gf(t,e);if(t.length!==e)throw new jf(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${t.length} elements.`);for(let i=0;i<e;++i){const s=t[i];if((r=s)!==parseInt(r.toString(),10))throw new jf(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${JSON.stringify(t)} including a non-integer number `+s)}return t;var r}function iw(t,e,n,r,i=1){if(null==t)return t;let s;return s="same"===n?t:t-(e+(e-1)*(i-1))+1,Math.floor((s+r-1)/r)}function sw(t,e,n,r){if(null==t)return null;if("valid"===r)t=t*e+$A([n-e,0]);else{if("same"!==r)throw new jf(`Unsupport padding mode: ${r}.`);t*=e}return t}function ow(t,e){return Gu(()=>(FA(e),"channelsFirst"===e?Ws(t,[0,2,3,1]):t))}function aw(t,e){return Gu(()=>(FA(e),"channelsFirst"===e?Ws(t,[0,2,3,4,1]):t))}function lw(t,e,n,r=[1,1],i="valid",s,o,a=null){return Gu(()=>{if(null==s&&(s="channelsLast"),FA(s),3!==t.rank&&4!==t.rank)throw new jf(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${t.rank}.`);if(3!==e.rank&&4!==e.rank)throw new jf(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${t.rank}.`);let l=ow(t,s);if("causal"===i)throw new Kf("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=A.conv2d({x:l,filter:e,strides:r,pad:"same"===i?"same":"valid",dilations:o,dataFormat:"NHWC",bias:n,activation:a}),"channelsFirst"===s&&(l=Ws(l,[0,3,1,2])),l})}nw.className="Softmax",p.registerClass(nw);class uw extends ag{constructor(t,e){if(super(e),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",uw.verifyArgs(e),this.rank=t,cA(this.rank,"rank"),1!==this.rank&&2!==this.rank&&3!==this.rank)throw new Kf(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=rw(e.kernelSize,t,"kernelSize"),this.strides=rw(null==e.strides?1:e.strides,t,"strides"),this.padding=null==e.padding?"valid":e.padding,TA(this.padding),this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,FA(this.dataFormat),this.activation=$y(e.activation),this.useBias=null==e.useBias||e.useBias,this.biasInitializer=km(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=vA(e.biasConstraint),this.biasRegularizer=Xy(e.biasRegularizer),this.activityRegularizer=Xy(e.activityRegularizer),this.dilationRate=rw(null==e.dilationRate?1:e.dilationRate,t,"dilationRate"),1===this.rank&&Array.isArray(this.dilationRate)&&1!==this.dilationRate.length)throw new jf("dilationRate must be a number or an array of a single number for 1D convolution, but received "+JSON.stringify(this.dilationRate));if(2===this.rank){if("number"==typeof this.dilationRate)this.dilationRate=[this.dilationRate,this.dilationRate];else if(2!==this.dilationRate.length)throw new jf("dilationRate must be a number or array of two numbers for 2D convolution, but received "+JSON.stringify(this.dilationRate))}else if(3===this.rank)if("number"==typeof this.dilationRate)this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(3!==this.dilationRate.length)throw new jf("dilationRate must be a number or array of three numbers for 3D convolution, but received "+JSON.stringify(this.dilationRate))}static verifyArgs(t){if(Xf("kernelSize"in t,"required key 'kernelSize' not in config"),"number"!=typeof t.kernelSize&&!uA(t.kernelSize,"number",1,3))throw new jf(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(t.kernelSize)}.`)}getConfig(){const t={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:Qy(this.activation),useBias:this.useBias,biasInitializer:Bm(this.biasInitializer),biasRegularizer:Wy(this.biasRegularizer),activityRegularizer:Wy(this.activityRegularizer),biasConstraint:wA(this.biasConstraint)},e=super.getConfig();return Object.assign(t,e),t}}class cw extends uw{constructor(t,e){super(t,e),this.kernel=null,cw.verifyArgs(e),this.filters=e.filters,cA(this.filters,"filters"),this.kernelInitializer=km(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=vA(e.kernelConstraint),this.kernelRegularizer=Xy(e.kernelRegularizer)}build(t){t=Ym(t);const e="channelsFirst"===this.dataFormat?1:t.length-1;if(null==t[e])throw new jf("The channel dimension of the input should be defined. Found "+t[e]);const n=t[e],r=this.kernelSize.concat([n,this.filters]);this.kernel=this.addWeight("kernel",r,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[e]:n}}],this.built=!0}call(t,e){return Gu(()=>{let e;t=Xm(t);const n=null==this.bias?null:this.bias.read(),r=hA(this.activation.getClassName());if(null!=r&&2===this.rank)e=lw(t,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate,r);else{if(1===this.rank)e=function(t,e,n,r=1,i="valid",s,o=1){return Gu(()=>{if(null==s&&(s="channelsLast"),FA(s),3!==t.shape.length)throw new jf("The input of a conv1dWithBias operation should be 3, but is "+t.shape.length+" instead.");if(3!==e.shape.length)throw new jf("The kernel for a conv1dWithBias operation should be 3, but is "+e.shape.length+" instead");if(null!=n&&1!==n.shape.length)throw new jf("The bias for a conv1dWithBias operation should be 1, but is "+e.shape.length+" instead");if("channelsFirst"===s&&(t=Ws(t,[0,2,1])),"causal"===i)throw new Kf("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let a=Uc(t,e,r,"same"===i?"same":"valid","NWC",o);return null!=n&&(a=im(a,n)),a})}(t,this.kernel.read(),n,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(2===this.rank)e=lw(t,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate);else{if(3!==this.rank)throw new Kf("convolutions greater than 3D are not implemented yet.");e=function(t,e,n,r=[1,1,1],i="valid",s,o){return Gu(()=>{if(null==s&&(s="channelsLast"),FA(s),4!==t.rank&&5!==t.rank)throw new jf("conv3dWithBias expects input to be of rank 4 or 5, but received "+t.rank+".");if(4!==e.rank&&5!==e.rank)throw new jf("conv3dWithBias expects kernel to be of rank 4 or 5, but received "+t.rank+".");let a=aw(t,s);if("causal"===i)throw new Kf("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return a=zc(a,e,r,"same"===i?"same":"valid","NDHWC",o),null!=n&&(a=im(a,n)),"channelsFirst"===s&&(a=Ws(a,[0,4,1,2,3])),a})}(t,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate)}null!=this.activation&&(e=this.activation.apply(e))}return e})}computeOutputShape(t){t=Ym(t);const e=[],n="channelsLast"===this.dataFormat?t.slice(1,t.length-1):t.slice(2);for(let i=0;i<n.length;++i){const t=iw(n[i],this.kernelSize[i],this.padding,this.strides[i],"number"==typeof this.dilationRate?this.dilationRate:this.dilationRate[i]);e.push(t)}let r=[t[0]];return"channelsLast"===this.dataFormat?(r=r.concat(e),r.push(this.filters)):(r.push(this.filters),r=r.concat(e)),r}getConfig(){const t={filters:this.filters,kernelInitializer:Bm(this.kernelInitializer),kernelRegularizer:Wy(this.kernelRegularizer),kernelConstraint:wA(this.kernelConstraint)},e=super.getConfig();return Object.assign(t,e),t}static verifyArgs(t){if(!("filters"in t)||"number"!=typeof t.filters||t.filters<1)throw new jf("Convolution layer expected config.filters to be a 'number' > 0 but got "+JSON.stringify(t.filters))}}class hw extends cw{constructor(t){super(2,t),hw.verifyArgs(t)}getConfig(){const t=super.getConfig();return delete t.rank,t}static verifyArgs(t){if("number"!=typeof t.kernelSize&&!uA(t.kernelSize,"number",1,2))throw new jf(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(t.kernelSize)}.`)}}hw.className="Conv2D",p.registerClass(hw);class dw extends cw{constructor(t){super(3,t),dw.verifyArgs(t)}getConfig(){const t=super.getConfig();return delete t.rank,t}static verifyArgs(t){if("number"!=typeof t.kernelSize&&(!Array.isArray(t.kernelSize)||1!==t.kernelSize.length&&3!==t.kernelSize.length))throw new jf(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(t.kernelSize)}.`)}}dw.className="Conv3D",p.registerClass(dw);class pw extends hw{constructor(t){if(super(t),this.inputSpec=[new ng({ndim:4})],"same"!==this.padding&&"valid"!==this.padding)throw new jf("Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode "+this.padding)}build(t){if(4!==(t=Ym(t)).length)throw new jf("Input should have rank 4; Received input shape: "+JSON.stringify(t));const e="channelsFirst"===this.dataFormat?1:t.length-1;if(null==t[e])throw new jf("The channel dimension of the inputs should be defined. Found `None`.");const n=t[e],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new ng({ndim:4,axes:{[e]:n}})],this.built=!0}call(t,e){return Gu(()=>{let e=Xm(t);if(4!==e.shape.length)throw new jf("Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-"+e.shape.length);const n=e.shape;let r,i;"channelsFirst"===this.dataFormat?(r=2,i=3):(r=1,i=2);const s=n[i],o=this.kernelSize[1],a=this.strides[1],l=[n[0],sw(n[r],this.strides[0],this.kernelSize[0],this.padding),sw(s,a,o,this.padding),this.filters];"channelsLast"!==this.dataFormat&&(e=Ws(e,[0,2,3,1]));let u=Pc(e,this.kernel.read(),l,this.strides,this.padding);return"channelsLast"!==this.dataFormat&&(u=Ws(u,[0,3,1,2])),null!=this.bias&&(u=im(u,this.bias.read(),this.dataFormat)),null!=this.activation&&(u=this.activation.apply(u)),u})}computeOutputShape(t){const e=(t=Ym(t)).slice();let n,r,i;"channelsFirst"===this.dataFormat?(n=1,r=2,i=3):(n=3,r=1,i=2);const s=this.kernelSize[0],o=this.kernelSize[1],a=this.strides[0],l=this.strides[1];return e[n]=this.filters,e[r]=sw(e[r],a,s,this.padding),e[i]=sw(e[i],l,o,this.padding),e}getConfig(){const t=super.getConfig();return delete t.dilationRate,t}}pw.className="Conv2DTranspose",p.registerClass(pw);class fw extends cw{constructor(t,e){if(super(t,e),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,null==e.filters)throw new jf("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(null!=e.kernelInitializer||null!=e.kernelRegularizer||null!=e.kernelConstraint)throw new jf("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(null!=e.padding&&"same"!==e.padding&&"valid"!==e.padding)throw new jf(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received `+JSON.stringify(e.padding));this.depthMultiplier=null==e.depthMultiplier?1:e.depthMultiplier,this.depthwiseInitializer=km(e.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=Xy(e.depthwiseRegularizer),this.depthwiseConstraint=vA(e.depthwiseConstraint),this.pointwiseInitializer=km(e.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=Xy(e.pointwiseRegularizer),this.pointwiseConstraint=vA(e.pointwiseConstraint)}build(t){if((t=Ym(t)).length<this.rank+2)throw new jf(`Inputs to SeparableConv${this.rank}D should have rank `+(this.rank+2)+", but received input shape: "+JSON.stringify(t));const e="channelsFirst"===this.dataFormat?1:t.length-1;if(null==t[e]||t[e]<0)throw new jf("The channel dimension of the inputs should be defined, but found "+JSON.stringify(t[e]));const n=t[e],r=this.kernelSize.concat([n,this.depthMultiplier]),i=[];for(let s=0;s<this.rank;++s)i.push(1);i.push(n*this.depthMultiplier,this.filters),this.depthwiseKernel=this.addWeight("depthwise_kernel",r,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",i,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,!0,this.pointwiseConstraint),this.bias=this.useBias?this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):null,this.inputSpec=[new ng({ndim:this.rank+2,axes:{[e]:n}})],this.built=!0}call(t,e){return Gu(()=>{let e;if(t=Xm(t),1===this.rank)throw new Kf("1D separable convolution is not implemented yet.");return 2===this.rank&&("channelsFirst"===this.dataFormat&&(t=Ws(t,[0,2,3,1])),e=hd(t,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(e=im(e,this.bias.read(),this.dataFormat)),null!=this.activation&&(e=this.activation.apply(e)),"channelsFirst"===this.dataFormat&&(e=Ws(e,[0,3,1,2])),e})}getConfig(){const t=super.getConfig();return delete t.rank,delete t.kernelInitializer,delete t.kernelRegularizer,delete t.kernelConstraint,t.depthwiseInitializer=Bm(this.depthwiseInitializer),t.pointwiseInitializer=Bm(this.pointwiseInitializer),t.depthwiseRegularizer=Wy(this.depthwiseRegularizer),t.pointwiseRegularizer=Wy(this.pointwiseRegularizer),t.depthwiseConstraint=wA(this.depthwiseConstraint),t.pointwiseConstraint=wA(this.pointwiseConstraint),t}}fw.className="SeparableConv";class Aw extends fw{constructor(t){super(2,t)}}Aw.className="SeparableConv2D",p.registerClass(Aw);class mw extends cw{constructor(t){super(1,t),mw.verifyArgs(t),this.inputSpec=[{ndim:3}]}getConfig(){const t=super.getConfig();return delete t.rank,delete t.dataFormat,t}static verifyArgs(t){if("number"!=typeof t.kernelSize&&!uA(t.kernelSize,"number",1,1))throw new jf(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(t.kernelSize)}.`)}}mw.className="Conv1D",p.registerClass(mw);class gw extends ag{constructor(t){super(t),this.cropping="number"==typeof t.cropping?[[t.cropping,t.cropping],[t.cropping,t.cropping]]:"number"==typeof t.cropping[0]?[[t.cropping[0],t.cropping[0]],[t.cropping[1],t.cropping[1]]]:t.cropping,this.dataFormat=void 0===t.dataFormat?"channelsLast":t.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(t){return"channelsFirst"===this.dataFormat?[t[0],t[1],t[2]-this.cropping[0][0]-this.cropping[0][1],t[3]-this.cropping[1][0]-this.cropping[1][1]]:[t[0],t[1]-this.cropping[0][0]-this.cropping[0][1],t[2]-this.cropping[1][0]-this.cropping[1][1],t[3]]}call(t,e){return Gu(()=>{if(t=Xm(t),"channelsLast"===this.dataFormat){const e=GA(t,this.cropping[0][0],t.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return GA(e,this.cropping[1][0],t.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}{const e=GA(t,this.cropping[0][0],t.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return GA(e,this.cropping[1][0],t.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const t={cropping:this.cropping,dataFormat:this.dataFormat},e=super.getConfig();return Object.assign(t,e),t}}gw.className="Cropping2D",p.registerClass(gw);class yw extends ag{constructor(t){super(t),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=null==t.size?this.DEFAULT_SIZE:t.size,this.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat}computeOutputShape(t){return"channelsFirst"===this.dataFormat?[t[0],t[1],null==t[2]?null:this.size[0]*t[2],null==t[3]?null:this.size[1]*t[3]]:[t[0],null==t[1]?null:this.size[0]*t[1],null==t[2]?null:this.size[1]*t[2],t[3]]}call(t,e){return Gu(()=>{let e=Xm(t);const n=e.shape;if("channelsFirst"===this.dataFormat){e=Ws(e,[0,2,3,1]);const t=e.resizeNearestNeighbor([this.size[0]*n[2],this.size[1]*n[3]]);return Ws(t,[0,3,1,2])}return e.resizeNearestNeighbor([this.size[0]*n[1],this.size[1]*n[2]])})}getConfig(){const t={size:this.size,dataFormat:this.dataFormat},e=super.getConfig();return Object.assign(t,e),t}}yw.className="UpSampling2D",p.registerClass(yw);class ww extends uw{constructor(t){super(2,t),this.depthwiseKernel=null,this.depthMultiplier=null==t.depthMultiplier?1:t.depthMultiplier,this.depthwiseInitializer=km(t.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=vA(t.depthwiseConstraint),this.depthwiseRegularizer=Xy(t.depthwiseRegularizer)}build(t){if((t=Ym(t)).length<4)throw new jf(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(t)}.`);const e="channelsFirst"===this.dataFormat?1:3;if(null==t[e]||t[e]<0)throw new jf(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${t[e]}).`);const n=t[e];this.depthwiseKernel=this.addWeight("depthwise_kernel",[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier],null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.bias=this.useBias?this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):null,this.built=!0}call(t,e){return Gu(()=>{let e=function(t,e,n=[1,1],r="valid",i,s){return Gu(()=>{null==i&&(i="channelsLast"),FA(i);let o=ow(t,i);if(4!==t.rank)throw new jf("Input for depthwiseConv2d is required to be 4-D, but is instead "+t.rank+"-D");if(4!==e.rank)throw new jf("depthwiseKernel is required to be 4-D, but is instead "+e.rank+"-D");return o=$c(o,e,n,"same"===r?"same":"valid","NHWC",s),"channelsFirst"===i&&(o=Ws(o,[0,3,1,2])),o})}(t=Xm(t),this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(e=im(e,this.bias.read(),this.dataFormat)),null!=this.activation&&(e=this.activation.apply(e)),e})}computeOutputShape(t){t=Ym(t);const e="channelsFirst"===this.dataFormat?t[3]:t[2],n="channelsFirst"===this.dataFormat?t[1]*this.depthMultiplier:t[3]*this.depthMultiplier,r=iw("channelsFirst"===this.dataFormat?t[2]:t[1],this.kernelSize[0],this.padding,this.strides[0]),i=iw(e,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[t[0],n,r,i]:[t[0],r,i,n]}getConfig(){const t=super.getConfig();return t.depthMultiplier=this.depthMultiplier,t.depthwiseInitializer=Bm(this.depthwiseInitializer),t.depthwiseRegularizer=Wy(this.depthwiseRegularizer),t.depthwiseConstraint=wA(this.depthwiseRegularizer),t}}ww.className="DepthwiseConv2D",p.registerClass(ww);class bw extends ag{constructor(t){super(t),this.rate=Math.max(Math.min(t.rate,1),0),this.noiseShape=t.noiseShape,this.seed=t.seed,this.supportsMasking=!0}getNoiseShape(t){if(null==this.noiseShape)return this.noiseShape;const e=t.shape,n=[];for(let r=0;r<this.noiseShape.length;++r)n.push(null==this.noiseShape[r]?e[r]:this.noiseShape[r]);return n}call(t,e){return Gu(()=>{this.invokeCallHook(t,e);const n=Xm(t);if(0<this.rate&&this.rate<1){const t=null!=e.training&&e.training,r=this.getNoiseShape(n);return om(()=>sm(n,this.rate,r,this.seed),()=>n,t)}return t})}getConfig(){const t={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},e=super.getConfig();return Object.assign(t,e),t}dispose(){return super.dispose()}}bw.className="Dropout",p.registerClass(bw);class vw extends bw{constructor(t){super(t),this.inputSpec=[{ndim:3}]}getNoiseShape(t){const e=t.shape;return[e[0],1,e[2]]}}vw.className="SpatialDropout1D",p.registerClass(vw);class xw extends ag{constructor(t){if(super(t),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",null==t.batchInputShape&&null==t.inputShape&&null!=t.inputDim){let e=null;null!=t.batchSize&&(e=t.batchSize),this.batchInputShape=[e,t.inputDim]}this.units=t.units,cA(this.units,"units"),this.activation=$y(t.activation),null!=t.useBias&&(this.useBias=t.useBias),this.kernelInitializer=km(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=km(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=vA(t.kernelConstraint),this.biasConstraint=vA(t.biasConstraint),this.kernelRegularizer=Xy(t.kernelRegularizer),this.biasRegularizer=Xy(t.biasRegularizer),this.activityRegularizer=Xy(t.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(t){const e=(t=Ym(t))[t.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[e,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:e}}],this.built=!0}computeOutputShape(t){const e=(t=Ym(t)).slice();return e[e.length-1]=this.units,e}call(t,e){return Gu(()=>{this.invokeCallHook(t,e);const n=Xm(t),r=hA(this.activation.getClassName());let i;return null!=r?i=tm(n,this.kernel.read(),r,this.bias?this.bias.read():null):(i=tm(n,this.kernel.read()),null!=this.bias&&(i=im(i,this.bias.read())),null!=this.activation&&(i=this.activation.apply(i))),i})}getConfig(){const t={units:this.units,activation:Qy(this.activation),useBias:this.useBias,kernelInitializer:Bm(this.kernelInitializer),biasInitializer:Bm(this.biasInitializer),kernelRegularizer:Wy(this.kernelRegularizer),biasRegularizer:Wy(this.biasRegularizer),activityRegularizer:Wy(this.activityRegularizer),kernelConstraint:wA(this.kernelConstraint),biasConstraint:wA(this.biasConstraint)},e=super.getConfig();return Object.assign(t,e),t}}xw.className="Dense",p.registerClass(xw);class _w extends ag{constructor(t){super(t=t||{}),this.inputSpec=[{minNDim:3}],this.dataFormat=t.dataFormat}computeOutputShape(t){t=Ym(t);for(const e of t.slice(1))if(null==e)throw new jf(`The shape of the input to "Flatten" is not fully defined (got ${t.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[t[0],zA(t,1)]}call(t,e){return Gu(()=>{this.invokeCallHook(t,e);let n=Xm(t);if("channelsFirst"===this.dataFormat&&n.rank>1){const t=[0];for(let e=2;e<n.rank;++e)t.push(e);t.push(1),n=n.transpose(t)}return function(t){if(t.rank<=1)throw new jf(`batchFlatten requires a minimum rank of 2. Got rank: ${t.rank}.`);const e=[t.shape[0],zA(t.shape,1)];return t.reshape(e)}(n)})}getConfig(){const t={};null!=this.dataFormat&&(t.dataFormat=this.dataFormat);const e=super.getConfig();return Object.assign(t,e),t}}_w.className="Flatten",p.registerClass(_w);class Cw extends ag{constructor(t){super(t),this.supportsMasking=!0,this.activation=$y(t.activation)}call(t,e){return Gu(()=>{this.invokeCallHook(t,e);const n=Xm(t);return this.activation.apply(n)})}getConfig(){const t={activation:Qy(this.activation)},e=super.getConfig();return Object.assign(t,e),t}}Cw.className="Activation",p.registerClass(Cw);class Sw extends ag{constructor(t){super(t),this.n=t.n,this.inputSpec=[{ndim:2}]}computeOutputShape(t){return[t[0],this.n,t[1]]}call(t,e){return Gu(()=>{return t=Xm(t),e=t,n=this.n,Gu(()=>{if(2!==e.shape.length)throw new jf(`repeat() expects a rank-2 tensor, but received a rank-${e.shape.length} tensor.`);return JA(jA(e,1),[1,n,1])});var e,n})}getConfig(){const t={n:this.n},e=super.getConfig();return Object.assign(t,e),t}}Sw.className="RepeatVector",p.registerClass(Sw);class Ew extends ag{constructor(t){super(t),this.targetShape=t.targetShape;for(let e=0;e<this.targetShape.length;++e)this.isUnknown(this.targetShape[e])&&(this.targetShape[e]=null)}isUnknown(t){return t<0||null==t}fixUnknownDimension(t,e){const n="Total size of new array must be unchanged.",r=e.slice();let i=1,s=null;for(let a=0;a<r.length;++a){const t=r[a];if(this.isUnknown(t)){if(null!==s)throw new jf("Can only specifiy one unknown dimension.");s=a}else i*=t}const o=zA(t);if(null!==s){if(0===i||o%i!=0)throw new jf(n);r[s]=o/i}else if(o!==i)throw new jf(n);return r}computeOutputShape(t){let e=!1;for(let n=0;n<t.length;++n)if(this.isUnknown(t[n])){e=!0;break}return e?t.slice(0,1).concat(this.targetShape):t.slice(0,1).concat(this.fixUnknownDimension(t.slice(1),this.targetShape))}call(t,e){return Gu(()=>{this.invokeCallHook(t,e);const n=Xm(t),r=n.shape,i=r.slice(0,1).concat(this.fixUnknownDimension(r.slice(1),this.targetShape));return n.reshape(i)})}getConfig(){const t={targetShape:this.targetShape},e=super.getConfig();return Object.assign(t,e),t}}Ew.className="Reshape",p.registerClass(Ew);class Bw extends ag{constructor(t){if(super(t),null==t.dims)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(t.dims))throw new Error("Permute constructor requires `dims` to be an Array, but received "+t.dims+" instead.");const e=VA(1,t.dims.length+1);if(!r.arraysEqual(t.dims.slice().sort(),e))throw new Error("Invalid permutation `dims`: "+JSON.stringify(t.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=t.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new ng({ndim:this.dims.length+1})]}computeOutputShape(t){const e=(t=Ym(t)).slice();return this.dims.forEach((n,r)=>{e[r+1]=t[n]}),e}call(t,e){return Ws(Xm(t),this.dimsIncludingBatch)}getConfig(){const t={dims:this.dims},e=super.getConfig();return Object.assign(t,e),t}}Bw.className="Permute",p.registerClass(Bw);class kw extends ag{constructor(t){super(null==t?{}:t),this.supportsMasking=!0,this.maskValue=null!=t?null==t.maskValue?0:t.maskValue:0}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),e={maskValue:this.maskValue};return Object.assign(e,t),e}computeMask(t,e){const n=Xm(t);return pc(Oh(n,this.maskValue),-1)}call(t,e){return Gu(()=>{this.invokeCallHook(t,e);const n=Xm(t),r=pc(Oh(n,this.maskValue),-1,!0);return n.mul(r.asType(n.dtype))})}}kw.className="Masking",p.registerClass(kw);class Nw extends ag{constructor(t){if(super(t),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==t.batchInputShape&&null==t.inputShape){let e=null;null!=t.batchSize&&(e=t.batchSize),this.batchInputShape=null==t.inputLength?[e,null]:[e].concat(Zf(t.inputLength))}this.inputDim=t.inputDim,cA(this.inputDim,"inputDim"),this.outputDim=t.outputDim,cA(this.outputDim,"outputDim"),this.embeddingsInitializer=km(t.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=Xy(t.embeddingsRegularizer),this.activityRegularizer=Xy(t.activityRegularizer),this.embeddingsConstraint=vA(t.embeddingsConstraint),this.maskZero=t.maskZero,this.supportsMasking=t.maskZero,this.inputLength=t.inputLength}build(t){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(t){}computeMask(t,e){return Gu(()=>this.maskZero?(t=Xm(t),Oh(t,Pi(t))):null)}computeOutputShape(t){if(t=Ym(t),null==this.inputLength)return[...t,this.outputDim];const e=Zf(this.inputLength);if(e.length!==t.length-1)throw new jf(`"inputLength" is ${this.inputLength}, but received input shape has shape `+t);{let n=0;for(let r=0;r<e.length;++r){const i=e[r],s=t[r+1];if(null!=i&&null!=s&&i!==s)throw new jf(`"inputLength" is ${this.inputLength}, but received input shape has shape `+t);null==i&&(e[n]=s),n++}}return[t[0],...e,this.outputDim]}call(t,e){return Gu(()=>{this.invokeCallHook(t,e);let n=Xm(t);return"int32"!==n.dtype&&(n=qA(n,"int32")),em(this.embeddings.read(),n.as1D()).reshape(Ym(this.computeOutputShape(n.shape)))})}getConfig(){const t={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:Bm(this.embeddingsInitializer),embeddingsRegularizer:Wy(this.embeddingsRegularizer),activityRegularizer:Wy(this.activityRegularizer),embeddingsConstraint:wA(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},e=super.getConfig();return Object.assign(t,e),t}}Nw.className="Embedding",p.registerClass(Nw);class Iw extends ag{constructor(t){super(t||{}),this.supportsMasking=!0}mergeFunction(t){throw new Kf}computeElementwiseOpOutputShape(t,e){if(null==t||null==e)return null;if(t.length<e.length)return this.computeElementwiseOpOutputShape(e,t);if(0===e.length)return t;const n=t.slice(0,t.length-e.length);for(let r=0;r<e.length;++r){const i=t[t.length-e.length+r],s=e[r];if(null==i||null==s||i<0||s<0)n.push(null);else if(1===i)n.push(s);else if(1===s)n.push(i);else{if(i!==s)throw new jf("Operands could not be broadcast together with shapes "+JSON.stringify(t)+" "+JSON.stringify(e));n.push(i)}}return n}build(t){if(Array.isArray(t)&&!Array.isArray(t[0])&&(t=[Ym(t)]),(t=t).length<2)throw new jf(`A merge layer should be called on an Array of at least 2 inputs. Got ${t.length} input(s).`);let e=[];for(const i of t)null!=i&&null!==i[0]&&e.push(i[0]);if(e=oA(e),e.length>1)throw new jf(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(t)}.`);let n=null==t[0]?null:t[0].slice(1);for(let i=1;i<t.length;++i){const e=null==t[i]?null:t[i].slice(1);n=this.computeElementwiseOpOutputShape(n,e)}const r=t.map(t=>t.length);this.reshapeRequired=-1!==t.indexOf(null)||1!==oA(r).length}call(t,e){return Gu(()=>{if(t=t,this.reshapeRequired){const e=[],n=t.map(t=>t.rank);if(-1===n.indexOf(null)){const r=$A(n);for(let n of t){const t=n.rank;for(let e=0;e<r-t;++e)n=jA(n,1);e.push(n)}return this.mergeFunction(e)}{let n=!1;for(const s of t){const t=s.rank;if(null==t){const t=s.shape,r=t[0],i=t.slice(1).concat([r]);let o=s.reshape([r].concat(zA(t.slice(1))));o=Ws(o,[1,0]),o=o.reshape(i),e.push(o),n=!0}else if(t>1){const r=VA(1,t).concat([0]);e.push(Ws(s,r)),n=!0}else e.push(s)}let r=this.mergeFunction(e);const i=r.rank;if(n)if(null==i){const t=r.shape,e=t[t.length-1],n=[e].concat(t.slice(0,t.length-1));r=Ws(r.reshape([-1,e]),[1,0]).reshape(n)}else if(i>1){const t=[i-1].concat(VA(0,i-1));r=Ws(r,t)}return r}}return this.mergeFunction(t)})}computeOutputShape(t){let e;e=null==(t=t)[0]?null:t[0].slice(1);for(let r=1;r<t.length;++r){const n=null==t[r]?null:t[r].slice(1);e=this.computeElementwiseOpOutputShape(e,n)}let n=[];for(const r of t)null!=r&&null!==r[0]&&n.push(r[0]);return n=oA(n),e=1===n.length?n.concat(e):[null].concat(e),e}computeMask(t,e){return Gu(()=>{if(null==e)return null;if(!Array.isArray(e))throw new jf("`mask` should be an Array");if(!Array.isArray(t))throw new jf("`inputs` should be an Array");if(e.length!==t.length)throw new jf(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${t.length} vs ${e.length})`);if(e.every(t=>null==t))return null;let n=(e=e.map(t=>null==t?t:il(t,0)))[0];for(let t=1;t<e.length-1;++t)n=Is(n,e[t]);return n})}}class Fw extends Iw{constructor(t){super(t)}mergeFunction(t){return Gu(()=>{let e=t[0].clone();for(let n=1;n<t.length;++n)e=$i(e,t[n]);return e})}}Fw.className="Add",p.registerClass(Fw);class Tw extends Iw{constructor(t){super(t)}mergeFunction(t){return Gu(()=>{let e=t[0].clone();for(let n=1;n<t.length;++n)e=vi(e,t[n]);return e})}}Tw.className="Multiply",p.registerClass(Tw);class Rw extends Iw{constructor(t){super(t)}mergeFunction(t){return Gu(()=>{let e=t[0].clone();for(let n=1;n<t.length;++n)e=$i(e,t[n]);return vi(1/t.length,e)})}}Rw.className="Average",p.registerClass(Rw);class Ow extends Iw{constructor(t){super(t)}mergeFunction(t){return Gu(()=>{let e=t[0];for(let n=1;n<t.length;++n)e=pl(e,t[n]);return e})}}Ow.className="Maximum",p.registerClass(Ow);class Dw extends Iw{constructor(t){super(t)}mergeFunction(t){return Gu(()=>{let e=t[0];for(let n=1;n<t.length;++n)e=Nh(e,t[n]);return e})}}Dw.className="Minimum",p.registerClass(Dw);class Lw extends Iw{constructor(t){super(t),this.DEFAULT_AXIS=-1,null==t&&(t={}),this.axis=null==t.axis?this.DEFAULT_AXIS:t.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(t){if(!Array.isArray(t)||!Array.isArray(t[0])||1===t.length)throw new jf("A `Concatenate` layer should be called on a list of at least 2 inputs");t=t;let e=!0;for(const r of t)if(null!=r){e=!1;break}if(e)return;const n=[];for(let i=0;i<t.length;++i){const e=t[i].slice();e.splice(this.axis,1);let s=!1;for(const t of n)if(r.arraysEqual(t,e)){s=!0;break}s||n.push(e)}if(n.length>1)throw new jf("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(t))}mergeFunction(t){return Gu(()=>XA(t,this.axis))}computeOutputShape(t){if(!Array.isArray(t)||!Array.isArray(t[0]))throw new jf("A `Concatenate` layer should be called on a list of inputs.");const e=t,n=e[0].slice(),r=this.axis<0?n.length+this.axis:this.axis;for(const i of e.slice(1)){if(null==n[r]||null==i[r]){n[r]=null;break}n[r]+=i[r]}return n}computeMask(t,e){if(null==e)return null;if(!Array.isArray(e))throw new jf("`mask` should be an array for Concatenate");if(!Array.isArray(t))throw new jf("`inputs` should be an array for Concatenate");if(e.length!==t.length)throw new jf(`Mismatch in the length of mask (${e.length}) and the legnth of inputs (${t.length})`);return Gu(()=>{let n=!0;if(e.forEach(t=>{null==t||(n=!1)}),n)return null;const r=[];for(let s=0;s<t.length;++s)r.push(null==e[s]?Dh(t[s]).asType("bool"):e[s].rank<t[s].rank?il(e[s],-1):e[s]);const i=Va(r,this.axis);return dc(i,-1,!1)})}getConfig(){const t={axis:this.axis},e=super.getConfig();return Object.assign(t,e),t}}function Mw(t,e){for(;t<0;)t+=e;return t}Lw.className="Concatenate",p.registerClass(Lw);class Uw extends Iw{constructor(t){super(t),this.axes=t.axes,this.normalize=null!=t.normalize&&t.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(t){r.assert(Array.isArray(t)&&2===t.length&&Array.isArray(t[0])&&Array.isArray(t[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const e=t[0],n=t[1];if(e.length>3||n.length>3)throw new Kf("Dot layer does not support tensors of 4D or higher rank yet.");const i=this.interpretAxes(e,n);if(e[i[0]]!==n[i[1]])throw new jf(`Dimension incompatibility: ${e[i[0]]} !== ${n[i[1]]}`)}mergeFunction(t){if(2!==t.length)throw new jf(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${t.length} input(s).`);let e,n=t[0],i=t[1];return e=Array.isArray(this.axes)?this.axes.map((e,n)=>Mw(e,t[n].shape.length)):[Mw(this.axes,n.shape.length),Mw(this.axes,i.shape.length)],this.normalize&&(n=xg(n,e[0]),i=xg(i,e[1])),function(t,e,n){if(t.shape.length>3||e.shape.length>3)throw new Kf("batchDot is not implemented for tensors of 4D or higher rank yet");if(r.assert(t.shape.length>=2,()=>"batchDot requires the rank of x to be >= 2, but got "+t.shape.length),r.assert(t.shape.length>=2,()=>"batchDot requires the rank of y to be >= 2, but got "+e.shape.length),"number"==typeof n&&(n=[n,n]),"complex64"===t.dtype||"complex64"===e.dtype)throw new Kf("batchDot is not implemented for complex64-type Tensors yet.");const i=t.shape.length,s=e.shape.length;null==n&&(n=[i-1,s-2]);const o=n;return Gu(()=>{let n,r;if(i>s){n=i-s;const t=[];for(let e=0;e<n;++e)t.push(1);e=e.reshape(e.shape.concat(t))}else if(s>i){n=s-i;const e=[];for(let t=0;t<n;++t)e.push(1);t=t.reshape(t.shape.concat(e))}else n=0;if(r=2===t.shape.length&&2===e.shape.length?o[0]===o[1]?t.mul(e).sum(o[0]):t.transpose([1,0]).mul(e).sum(o[1]):t.matMul(e,o[0]!==t.shape.length-1,o[1]===e.shape.length-1),n>0){let t;t=i>s?i+s-3:i-1;const e=[];for(let r=t;r<t+n;++r)e.push(r);r=r.squeeze(e)}return 1===r.shape.length&&(r=r.expandDims(1)),r})}(n,i,e)}interpretAxes(t,e){let n;return n=Array.isArray(this.axes)?this.axes:[Mw(this.axes,t.length),Mw(this.axes,e.length)],n}computeOutputShape(t){r.assert(Array.isArray(t)&&2===t.length&&Array.isArray(t[0])&&Array.isArray(t[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const e=t[0].slice(),n=t[1].slice();if(e.length>3||n.length>3)throw new Kf("Dot layer does not support tensors of 4D or higher rank yet.");const i=this.interpretAxes(e,n);e.splice(i[0],1),n.splice(i[1],1),n.splice(0,1);const s=e.concat(n);return 1===s.length&&s.push(1),s}computeMask(t,e){return null}getConfig(){const t={axes:this.axes,normalize:this.normalize},e=super.getConfig();return Object.assign(t,e),t}}Uw.className="Dot",p.registerClass(Uw);class Pw extends ag{constructor(t){super(t),this.supportsMasking=!0,this.stddev=t.stddev}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),e={stddev:this.stddev};return Object.assign(e,t),e}call(t,e){return Gu(()=>{this.invokeCallHook(t,e);const n=Xm(t);return om(()=>ZA(n.shape,0,this.stddev).add(n),()=>n,e.training||!1)})}}Pw.className="GaussianNoise",p.registerClass(Pw);class zw extends ag{constructor(t){super(t),this.supportsMasking=!0,this.rate=t.rate}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),e={rate:this.rate};return Object.assign(e,t),e}call(t,e){return Gu(()=>{this.invokeCallHook(t,e);const n=Xm(t);return this.rate>0&&this.rate<1?om(()=>{const t=Math.sqrt(this.rate/(1-this.rate));return n.mul(ZA(n.shape,1,t))},()=>n,e.training||!1):n})}}zw.className="GaussianDropout",p.registerClass(zw);class Qw extends ag{constructor(t){super(t),this.supportsMasking=!0,this.rate=t.rate,this.noiseShape=t.noiseShape}_getNoiseShape(t){return this.noiseShape||Xm(t).shape}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),e={rate:this.rate};return Object.assign(e,t),e}call(t,e){return Gu(()=>{if(this.rate<1&&this.rate>0){const n=this._getNoiseShape(t);return om(()=>{const e=Xm(t),r=-1.7580993408473766;let i=ks(Jh(n),this.rate);i=qA(i,"float32");const s=((1-this.rate)*(1+this.rate*r**2))**-.5,o=-s*r*this.rate;return e.mul(i).add(i.add(-1).mul(r)).mul(s).add(o)},()=>Xm(t),e.training||!1)}return t})}}function Hw(t,e,n,r,i,s=.001){let o;if(2===t.rank)o=Bc(t,e,n,r,i,s);else if(3===t.rank)o=kc(t,e,n,r,i,s);else{if(4!==t.rank)throw new Kf(`batchNormalization is not implemented for array of rank ${t.rank} yet`);o=Nc(t,e,n,r,i,s)}return o}Qw.className="AlphaDropout",p.registerClass(Qw);class $w extends ag{constructor(t){null==t&&(t={}),super(t),this.supportsMasking=!0,this.axis=null==t.axis?-1:t.axis,this.momentum=null==t.momentum?.99:t.momentum,this.epsilon=null==t.epsilon?.001:t.epsilon,this.center=null==t.center||t.center,this.scale=null==t.scale||t.scale,this.betaInitializer=km(t.betaInitializer||"zeros"),this.gammaInitializer=km(t.gammaInitializer||"ones"),this.movingMeanInitializer=km(t.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=km(t.movingVarianceInitializer||"ones"),this.betaConstraint=vA(t.betaConstraint),this.gammaConstraint=vA(t.gammaConstraint),this.betaRegularizer=Xy(t.betaRegularizer),this.gammaRegularizer=Xy(t.gammaRegularizer)}build(t){t=Ym(t);const e=this.axis>=0?this.axis:this.axis+t.length,n=t[e];if(null==n)throw new jf(`Axis ${e} of input tensor should have a defined dimension but the layer received an input with shape `+JSON.stringify(t)+".");this.inputSpec=[new ng({ndim:t.length,axes:{[e]:n}})];const r=[n];this.scale&&(this.gamma=this.addWeight("gamma",r,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",r,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",r,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",r,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(t,e){return Gu(()=>{const n=null!=e.training&&e.training,i=Xm(t),s=i.shape,o=s.length,a=VA(0,o),l=this.axis>=0?this.axis:this.axis+o;a.splice(l,1);const u=Gf(1,o);u[l]=s[l];const c=a.slice();c.sort();const h=!r.arraysEqual(c,VA(0,o).slice(0,o-1));if(!n)return(()=>{if(h){const t=this.movingMean.read().reshape(u),e=this.movingVariance.read().reshape(u),n=this.center?this.beta.read().reshape(u):null,r=this.scale?this.gamma.read().reshape(u):null;return Hw(i,t,e,n,r,this.epsilon)}return Hw(i,this.movingMean.read(),this.movingVariance.read(),null==this.beta?null:this.beta.read(),null==this.gamma?null:this.gamma.read(),this.epsilon)})();const[d,p,f]=function(t,e,n,i,s=.001){return r.arraysEqual(i.slice().sort(),VA(0,t.rank-1))?function(t,e,n,r,i=.001){return Gu(()=>{const s=Fh(t,r),o=s.mean,a=s.variance;return[Hw(t,o,a,n,e,i),o,a]})}(t,e,n,i,s):function(t,e,n,r,i=.001){return Gu(()=>{const s=Fh(t,r),o=s.mean,a=s.variance,l=[];for(const e of VA(0,t.rank))-1!==r.indexOf(e)?l.push(1):l.push(t.shape[e]);const u=o.reshape(l),c=a.reshape(l),h=null==e?null:e.reshape(l),d=null==n?null:n.reshape(l);return[Hw(t,u,c,d,h,i),o,a]})}(t,e,n,i,s)}(i,this.gamma.read(),this.beta.read(),a,this.epsilon),A=(t,e,n)=>{Gu(()=>{const r=1-n,i=t.read(),s=i.sub(e).mul(r);t.write(i.sub(s))})};return(()=>{A(this.movingMean,p,this.momentum),A(this.movingVariance,f,this.momentum)})(),d})}getConfig(){const t={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Bm(this.betaInitializer),gammaInitializer:Bm(this.gammaInitializer),movingMeanInitializer:Bm(this.movingMeanInitializer),movingVarianceInitializer:Bm(this.movingVarianceInitializer),betaRegularizer:Wy(this.betaRegularizer),gammaRegularizer:Wy(this.gammaRegularizer),betaConstraint:wA(this.betaConstraint),gammaConstraint:wA(this.gammaConstraint)},e=super.getConfig();return Object.assign(t,e),t}}$w.className="BatchNormalization",p.registerClass($w);class Vw extends ag{constructor(t){if(null==t&&(t={}),super(t),this.axis=null==t.axis?-1:t.axis,"number"==typeof this.axis){if(!Number.isInteger(this.axis))throw new Error("Expected axis to be an integer, but received "+this.axis)}else{if(!Array.isArray(this.axis))throw new Error("Expected axis to be an integer or an array of integers, but received "+JSON.stringify(this.axis));for(const t of this.axis)if(!Number.isInteger(t))throw new Error("Expected axis to be an array of integers, but received "+JSON.stringify(this.axis))}this.epsilon=null==t.epsilon?.001:t.epsilon,this.center=null==t.center||t.center,this.scale=null==t.scale||t.scale,this.betaInitializer=km(t.betaInitializer||"zeros"),this.gammaInitializer=km(t.gammaInitializer||"ones"),this.betaRegularizer=Xy(t.betaRegularizer),this.gammaRegularizer=Xy(t.gammaRegularizer),this.supportsMasking=!0}build(t){const e=(t=Ym(t)).length;"number"==typeof this.axis&&(this.axis=[this.axis]);for(let r=0;r<this.axis.length;++r)this.axis[r]<0&&(this.axis[r]+=e);for(const r of this.axis)if(r<0||r>=e)throw new Error("Invalid axis: "+r);if(this.axis.length!==oA(this.axis).length)throw new Error("Found duplicate axes in: "+this.axis);const n=this.axis.map(e=>t[e]);this.gamma=this.scale?this.addWeight("gamma",n,"float32",this.gammaInitializer,this.gammaRegularizer,!0):null,this.beta=this.center?this.addWeight("beta",n,"float32",this.betaInitializer,this.betaRegularizer,!0):null,this.built=!0}call(t,e){const n=Xm(t),r=n.shape,i=r.length;return Gu(()=>{let{mean:t,variance:e}=Fh(n,this.axis,!0);const s=Gf(1,i);for(const n of this.axis)s[n]=r[n];const o=t=>null!=t&&t.shape.length!==i&&this.axis!==[i-1]?t.reshape(s):t;let a=o(this.gamma.read()),l=o(this.beta.read());const u=[],c=[];for(let n=0;n<i;++n)-1!==this.axis.indexOf(n)?(u.push(r[n]),c.push(1)):(u.push(1),c.push(r[n]));return t=t.tile(u),e=e.tile(u),a=a.tile(c),l=l.tile(c),Hw(n,t,e,l,a,this.epsilon)})}getConfig(){const t={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Bm(this.betaInitializer),gammaInitializer:Bm(this.gammaInitializer),betaRegularizer:Wy(this.betaRegularizer),gammaRegularizer:Wy(this.gammaRegularizer)},e=super.getConfig();return Object.assign(t,e),t}}Vw.className="LayerNormalization",p.registerClass(Vw);class qw extends ag{constructor(t){if(null==t&&(t={}),super(t),this.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,null==t.padding)this.padding=[[1,1],[1,1]];else if("number"==typeof t.padding)this.padding=[[t.padding,t.padding],[t.padding,t.padding]];else{if(t.padding=t.padding,2!==t.padding.length)throw new jf(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${t.padding.length} array.`);let e,n;if("number"==typeof t.padding[0])e=[t.padding[0],t.padding[0]],n=[t.padding[1],t.padding[1]];else{if(t.padding=t.padding,2!==t.padding[0].length)throw new jf(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${t.padding[0].length} array.`);if(e=t.padding[0],2!==t.padding[1].length)throw new jf(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${t.padding[1].length} array.`);n=t.padding[1]}this.padding=[e,n]}this.inputSpec=[new ng({ndim:4})]}computeOutputShape(t){let e,n;return t=Ym(t),"channelsFirst"===this.dataFormat?(e=null!=t[2]&&t[2]>=0?t[2]+this.padding[0][0]+this.padding[0][1]:null,n=null!=t[3]&&t[3]>=0?t[3]+this.padding[1][0]+this.padding[1][1]:null,[t[0],t[1],e,n]):(e=null!=t[1]&&t[1]>=0?t[1]+this.padding[0][0]+this.padding[0][1]:null,n=null!=t[2]&&t[2]>=0?t[2]+this.padding[1][0]+this.padding[1][1]:null,[t[0],e,n,t[3]])}call(t,e){return Gu(()=>{return e=Xm(t),n=this.padding,r=this.dataFormat,Gu(()=>{if(4!==e.rank)throw new jf("temporalPadding expects input tensor to be 4-D, but received a "+e.rank+"-D tensor.");if(null==n&&(n=[[1,1],[1,1]]),2!==n.length||2!==n[0].length||2!==n[1].length)throw new jf("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==r&&(r="channelsLast"),"channelsLast"!==r&&"channelsFirst"!==r)throw new jf(`Unknown data format: ${r}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let t;return t="channelsFirst"===r?[[0,0],[0,0],n[0],n[1]]:[[0,0],n[0],n[1],[0,0]],ba(e,t)});var e,n,r})}getConfig(){const t={padding:this.padding,dataFormat:this.dataFormat},e=super.getConfig();return Object.assign(t,e),t}}function jw(t,e,n,r,i,s){return Gu(()=>{let o;FA(i),RA(s),TA(r),null==n&&(n=[1,1]),null==r&&(r="valid"),null==i&&(i="channelsLast"),null==s&&(s="max"),t=ow(t,i);const a="same"===r?"same":"valid";return o="max"===s?Ch(t,e,n,a):vc(t,e,n,a),"channelsFirst"===i&&(o=Ws(o,[0,3,1,2])),o})}function Kw(t,e,n,r,i,s){return Gu(()=>{let o;FA(i),RA(s),TA(r),null==n&&(n=[1,1,1]),null==r&&(r="valid"),null==i&&(i="channelsLast"),null==s&&(s="max"),t=aw(t,i);const a="same"===r?"same":"valid";return o="max"===s?Sh(t,e,n,a):xc(t,e,n,a),"channelsFirst"===i&&(o=Ws(o,[0,4,1,2,3])),o})}qw.className="ZeroPadding2D",p.registerClass(qw);class Ww extends ag{constructor(t){if(null==t.poolSize&&(t.poolSize=2),super(t),"number"==typeof t.poolSize)this.poolSize=[t.poolSize];else{if(!Array.isArray(t.poolSize)||1!==t.poolSize.length||"number"!=typeof t.poolSize[0])throw new jf("poolSize for 1D convolutional layer must be a number or an Array of a single number, but received "+JSON.stringify(t.poolSize));this.poolSize=t.poolSize}if(cA(this.poolSize,"poolSize"),null==t.strides)this.strides=this.poolSize;else if("number"==typeof t.strides)this.strides=[t.strides];else{if(!Array.isArray(t.strides)||1!==t.strides.length||"number"!=typeof t.strides[0])throw new jf("strides for 1D convolutional layer must be a number or an Array of a single number, but received "+JSON.stringify(t.strides));this.strides=t.strides}cA(this.strides,"strides"),this.padding=null==t.padding?"valid":t.padding,TA(this.padding),this.inputSpec=[new ng({ndim:3})]}computeOutputShape(t){const e=iw((t=Ym(t))[1],this.poolSize[0],this.padding,this.strides[0]);return[t[0],e,t[2]]}call(t,e){return Gu(()=>{this.invokeCallHook(t,e),t=jA(Xm(t),2);const n=this.poolingFunction(Xm(t),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return vd(n,[2])})}getConfig(){const t={poolSize:this.poolSize,padding:this.padding,strides:this.strides},e=super.getConfig();return Object.assign(t,e),t}}class Gw extends Ww{constructor(t){super(t)}poolingFunction(t,e,n,r,i){return FA(i),TA(r),jw(t,e,n,r,i,"max")}}Gw.className="MaxPooling1D",p.registerClass(Gw);class Xw extends Ww{constructor(t){super(t)}poolingFunction(t,e,n,r,i){return FA(i),TA(r),jw(t,e,n,r,i,"avg")}}Xw.className="AveragePooling1D",p.registerClass(Xw);class Yw extends ag{constructor(t){if(null==t.poolSize&&(t.poolSize=[2,2]),super(t),this.poolSize=Array.isArray(t.poolSize)?t.poolSize:[t.poolSize,t.poolSize],null==t.strides)this.strides=this.poolSize;else if(Array.isArray(t.strides)){if(2!==t.strides.length)throw new jf("If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length "+t.strides.length+".");this.strides=t.strides}else this.strides=[t.strides,t.strides];cA(this.poolSize,"poolSize"),cA(this.strides,"strides"),this.padding=null==t.padding?"valid":t.padding,this.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,FA(this.dataFormat),TA(this.padding),this.inputSpec=[new ng({ndim:4})]}computeOutputShape(t){t=Ym(t);let e="channelsFirst"===this.dataFormat?t[2]:t[1],n="channelsFirst"===this.dataFormat?t[3]:t[2];return e=iw(e,this.poolSize[0],this.padding,this.strides[0]),n=iw(n,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[t[0],t[1],e,n]:[t[0],e,n,t[3]]}call(t,e){return Gu(()=>(this.invokeCallHook(t,e),this.poolingFunction(Xm(t),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const t={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},e=super.getConfig();return Object.assign(t,e),t}}class Jw extends Yw{constructor(t){super(t)}poolingFunction(t,e,n,r,i){return FA(i),TA(r),jw(t,e,n,r,i,"max")}}Jw.className="MaxPooling2D",p.registerClass(Jw);class Zw extends Yw{constructor(t){super(t)}poolingFunction(t,e,n,r,i){return FA(i),TA(r),jw(t,e,n,r,i,"avg")}}Zw.className="AveragePooling2D",p.registerClass(Zw);class tb extends ag{constructor(t){if(null==t.poolSize&&(t.poolSize=[2,2,2]),super(t),this.poolSize=Array.isArray(t.poolSize)?t.poolSize:[t.poolSize,t.poolSize,t.poolSize],null==t.strides)this.strides=this.poolSize;else if(Array.isArray(t.strides)){if(3!==t.strides.length)throw new jf("If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length "+t.strides.length+".");this.strides=t.strides}else this.strides=[t.strides,t.strides,t.strides];cA(this.poolSize,"poolSize"),cA(this.strides,"strides"),this.padding=null==t.padding?"valid":t.padding,this.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,FA(this.dataFormat),TA(this.padding),this.inputSpec=[new ng({ndim:5})]}computeOutputShape(t){t=Ym(t);let e="channelsFirst"===this.dataFormat?t[2]:t[1],n="channelsFirst"===this.dataFormat?t[3]:t[2],r="channelsFirst"===this.dataFormat?t[4]:t[3];return e=iw(e,this.poolSize[0],this.padding,this.strides[0]),n=iw(n,this.poolSize[1],this.padding,this.strides[1]),r=iw(r,this.poolSize[2],this.padding,this.strides[2]),"channelsFirst"===this.dataFormat?[t[0],t[1],e,n,r]:[t[0],e,n,r,t[4]]}call(t,e){return Gu(()=>(this.invokeCallHook(t,e),this.poolingFunction(Xm(t),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const t={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},e=super.getConfig();return Object.assign(t,e),t}}class eb extends tb{constructor(t){super(t)}poolingFunction(t,e,n,r,i){return FA(i),TA(r),Kw(t,e,n,r,i,"max")}}eb.className="MaxPooling3D",p.registerClass(eb);class nb extends tb{constructor(t){super(t)}poolingFunction(t,e,n,r,i){return FA(i),TA(r),Kw(t,e,n,r,i,"avg")}}nb.className="AveragePooling3D",p.registerClass(nb);class rb extends ag{constructor(t){super(t),this.inputSpec=[new ng({ndim:3})]}computeOutputShape(t){return[t[0],t[2]]}call(t,e){throw new Kf}}class ib extends rb{constructor(t){super(t||{})}call(t,e){return Gu(()=>{const e=Xm(t);return Bh(e,1)})}}ib.className="GlobalAveragePooling1D",p.registerClass(ib);class sb extends rb{constructor(t){super(t||{})}call(t,e){return Gu(()=>{const e=Xm(t);return wh(e,1)})}}sb.className="GlobalMaxPooling1D",p.registerClass(sb);class ob extends ag{constructor(t){super(t),this.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,FA(this.dataFormat),this.inputSpec=[new ng({ndim:4})]}computeOutputShape(t){return t=t,"channelsLast"===this.dataFormat?[t[0],t[3]]:[t[0],t[1]]}call(t,e){throw new Kf}getConfig(){const t={dataFormat:this.dataFormat},e=super.getConfig();return Object.assign(t,e),t}}class ab extends ob{call(t,e){return Gu(()=>{const e=Xm(t);return Bh(e,"channelsLast"===this.dataFormat?[1,2]:[2,3])})}}ab.className="GlobalAveragePooling2D",p.registerClass(ab);class lb extends ob{call(t,e){return Gu(()=>{const e=Xm(t);return wh(e,"channelsLast"===this.dataFormat?[1,2]:[2,3])})}}function ub(t,e,n,r){if(Array.isArray(t)){if(null!=e||null!=n)throw new jf("When inputs is an array, neither initialState or constants should be provided");null!=r&&(n=t.slice(t.length-r,t.length),t=t.slice(0,t.length-r)),t.length>1&&(e=t.slice(1,t.length)),t=t[0]}function i(t){return null==t||Array.isArray(t)?t:[t]}return{inputs:t,initialState:e=i(e),constants:n=i(n)}}function cb(t,e,n,r=!1,i,s,o=!1,a=!1){return Gu(()=>{const l=e.shape.length;if(l<3)throw new jf(`Input should be at least 3D, but is ${l}D.`);const u=[1,0].concat(VA(2,l));if(e=Ws(e,u),null!=s)throw new Kf("The rnn() functoin of the deeplearn.js backend does not support constants yet.");o&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),null!=i&&((i=i.asType("bool").asType("float32")).rank===l-1&&(i=il(i,-1)),i=Ws(i,u)),r&&(e=sa(e,0),null!=i&&(i=sa(i,0)));const c=[];let h,d=n;const p=e.shape[0],f=Id(e);let A,m;null!=i&&(A=Id(i));for(let e=0;e<p;++e){const n=f[e],r=Gu(()=>t(n,d));if(null==i)h=r[0],d=r[1];else{const t=Gu(()=>{const t=A[e],n=Dh(t).sub(t);return{output:r[0].mul(t).add(d[0].mul(n)),newStates:d.map((e,i)=>r[1][i].mul(t).add(e.mul(n)))}});h=t.output,d=t.newStates}a&&c.push(h)}return a&&(m=sl(c,1)),[h,m,d]})}lb.className="GlobalMaxPooling2D",p.registerClass(lb);class hb extends ag{constructor(t){let e;if(super(t),null==t.cell)throw new jf("cell property is missing for the constructor of RNN.");if(e=Array.isArray(t.cell)?new wb({cells:t.cell}):t.cell,null==e.stateSize)throw new jf("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=e,this.returnSequences=null!=t.returnSequences&&t.returnSequences,this.returnState=null!=t.returnState&&t.returnState,this.goBackwards=null!=t.goBackwards&&t.goBackwards,this._stateful=null!=t.stateful&&t.stateful,this.unroll=null!=t.unroll&&t.unroll,this.supportsMasking=!0,this.inputSpec=[new ng({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){return null==this.states_?VA(0,Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1).map(t=>null):this.states_}setStates(t){this.states_=t}computeOutputShape(t){Wm(t)&&(t=t[0]),t=t;let e=this.cell.stateSize;Array.isArray(e)||(e=[e]);const n=e[0];let r;if(r=this.returnSequences?[t[0],t[1],n]:[t[0],n],this.returnState){const n=[];for(const r of e)n.push([t[0],r]);return[r].concat(n)}return r}computeMask(t,e){return Gu(()=>{Array.isArray(e)&&(e=e[0]);const t=this.returnSequences?e:null;if(this.returnState){const e=this.states.map(t=>null);return[t].concat(e)}return t})}get states(){if(null==this.states_){const t=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,e=[];for(let n=0;n<t;++n)e.push(null);return e}return this.states_}set states(t){this.states_=t}build(t){if(null!=this.numConstants)throw new Kf("Constants support is not implemented in RNN yet.");Wm(t)&&(t=t[0]),t=t,this.inputSpec[0]=new ng({shape:[this.stateful?t[0]:null,null,t[t.length-1]]});const e=[t[0]].concat(t.slice(2));let n;if(this.cell.build(e),n=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],null!=this.stateSpec){if(!r.arraysEqual(this.stateSpec.map(t=>t.shape[t.shape.length-1]),n))throw new jf(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is `+this.cell.stateSize)}else this.stateSpec=n.map(t=>new ng({shape:[null,t]}));this.stateful&&this.resetStates()}resetStates(t,e=!1){Gu(()=>{if(!this.stateful)throw new Vf("Cannot call resetStates() on an RNN Layer that is not stateful.");const n=this.inputSpec[0].shape[0];if(null==n)throw new jf("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==this.states_)this.states_=Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(t=>Vo([n,t])):[Vo([n,this.cell.stateSize])];else if(null==t)Xu(this.states_),null!=this.keptStates&&(Xu(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(t=>Vo([n,t])):this.states_[0]=Vo([n,this.cell.stateSize]);else{if(Array.isArray(t)||(t=[t]),t.length!==this.states_.length)throw new jf(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${t.length} state value(s). Input received: `+t);!0===e?this.keptStates.push(this.states_.slice()):Xu(this.states_);for(let e=0;e<this.states_.length;++e){const i=t[e],s=Array.isArray(this.cell.stateSize)?this.cell.stateSize[e]:this.cell.stateSize,o=[n,s];if(!r.arraysEqual(i.shape,o))throw new jf(`State ${e} is incompatible with layer ${this.name}: expected shape=${o}, received shape=${i.shape}`);this.states_[e]=i}}this.states_=this.states_.map(t=>Yu(t.clone()))})}apply(t,e){let n=null==e?null:e.initialState,r=null==e?null:e.constants;null==e&&(e={});const i=ub(t,n,r,this.numConstants);t=i.inputs,n=i.initialState,r=i.constants;let s=[],o=[];if(null!=n){e.initialState=n,s=s.concat(n),this.stateSpec=[];for(const t of n)this.stateSpec.push(new ng({shape:t.shape}));o=o.concat(this.stateSpec)}if(null!=r&&(e.constants=r,s=s.concat(r),this.numConstants=r.length),s[0]instanceof rg){const n=[t].concat(s),r=this.inputSpec.concat(o),i=this.inputSpec;this.inputSpec=r;const a=super.apply(n,e);return this.inputSpec=i,a}return super.apply(t,e)}call(t,e){return Gu(()=>{const n=null==e?null:e.mask,r=null==e?null:e.training;let i=null==e?null:e.initialState;t=Xm(t),null==i&&(i=this.stateful?this.states_:this.getInitialState(t));const s=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(i.length!==s)throw new jf(`RNN Layer has ${s} state(s) but was passed `+i.length+" initial state(s).");this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const o={training:r},a=cb((t,e)=>{const n=this.cell.call([t].concat(e),o);return[n[0],n.slice(1)]},t,i,this.goBackwards,n,null,this.unroll,this.returnSequences),l=a[0],u=a[1],c=a[2];this.stateful&&this.resetStates(c,r);const h=this.returnSequences?u:l;return this.returnState?[h].concat(c):h})}getInitialState(t){return Gu(()=>{let e=Vo(t.shape);return e=ts(e,[1,2]),e=jA(e),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(t=>t>1?JA(e,[1,t]):e):this.cell.stateSize>1?[JA(e,[1,this.cell.stateSize])]:[e]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(t){super.setFastWeightInitDuringBuild(t),null!=this.cell&&this.cell.setFastWeightInitDuringBuild(t)}getConfig(){const t={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};null!=this.numConstants&&(t.numConstants=this.numConstants);const e=this.cell.getConfig();t.cell={className:this.cell.getClassName(),config:e};const n=super.getConfig();return Object.assign(t,n),t}static fromConfig(t,e,n={}){const r=vg(e.cell,n);return new t(Object.assign(e,{cell:r}))}}hb.className="RNN",p.registerClass(hb);class db extends ag{}class pb extends db{constructor(t){super(t),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=t.units,cA(this.units,"units"),this.activation=$y(null==t.activation?this.DEFAULT_ACTIVATION:t.activation),this.useBias=null==t.useBias||t.useBias,this.kernelInitializer=km(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=km(t.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=km(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Xy(t.kernelRegularizer),this.recurrentRegularizer=Xy(t.recurrentRegularizer),this.biasRegularizer=Xy(t.biasRegularizer),this.kernelConstraint=vA(t.kernelConstraint),this.recurrentConstraint=vA(t.recurrentConstraint),this.biasConstraint=vA(t.biasConstraint),this.dropout=HA([1,$A([0,null==t.dropout?0:t.dropout])]),this.recurrentDropout=HA([1,$A([0,null==t.recurrentDropout?0:t.recurrentDropout])]),this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(t){t=Ym(t),this.kernel=this.addWeight("kernel",[t[t.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.bias=this.useBias?this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):null,this.built=!0}call(t,e){return Gu(()=>{if(2!==(t=t).length)throw new jf(`SimpleRNNCell expects 2 input Tensors, got ${t.length}.`);let n=t[1];t=t[0];const r=null!=e.training&&e.training;let i;0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=bb(()=>Dh(t),this.dropout,r)),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=bb(()=>Dh(n),this.recurrentDropout,r));const s=this.dropoutMask,o=this.recurrentDropoutMask;i=tm(null!=s?vi(t,s):t,this.kernel.read()),null!=this.bias&&(i=im(i,this.bias.read())),null!=o&&(n=vi(n,o));let a=$i(i,tm(n,this.recurrentKernel.read()));return null!=this.activation&&(a=this.activation.apply(a)),[a,a]})}getConfig(){const t={units:this.units,activation:Qy(this.activation),useBias:this.useBias,kernelInitializer:Bm(this.kernelInitializer),recurrentInitializer:Bm(this.recurrentInitializer),biasInitializer:Bm(this.biasInitializer),kernelRegularizer:Wy(this.kernelRegularizer),recurrentRegularizer:Wy(this.recurrentRegularizer),biasRegularizer:Wy(this.biasRegularizer),activityRegularizer:Wy(this.activityRegularizer),kernelConstraint:wA(this.kernelConstraint),recurrentConstraint:wA(this.recurrentConstraint),biasConstraint:wA(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout},e=super.getConfig();return Object.assign(t,e),t}}pb.className="SimpleRNNCell",p.registerClass(pb);class fb extends hb{constructor(t){t.cell=new pb(t),super(t)}call(t,e){return Gu(()=>(null!=this.cell.dropoutMask&&(Xu(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(Xu(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),super.call(t,{mask:null==e?null:e.mask,training:null==e?null:e.training,initialState:null==e?null:e.initialState})))}get units(){return this.cell.units}get activation(){return this.cell.activation}get useBias(){return this.cell.useBias}get kernelInitializer(){return this.cell.kernelInitializer}get recurrentInitializer(){return this.cell.recurrentInitializer}get biasInitializer(){return this.cell.biasInitializer}get kernelRegularizer(){return this.cell.kernelRegularizer}get recurrentRegularizer(){return this.cell.recurrentRegularizer}get biasRegularizer(){return this.cell.biasRegularizer}get kernelConstraint(){return this.cell.kernelConstraint}get recurrentConstraint(){return this.cell.recurrentConstraint}get biasConstraint(){return this.cell.biasConstraint}get dropout(){return this.cell.dropout}get recurrentDropout(){return this.cell.recurrentDropout}getConfig(){const t={units:this.units,activation:Qy(this.activation),useBias:this.useBias,kernelInitializer:Bm(this.kernelInitializer),recurrentInitializer:Bm(this.recurrentInitializer),biasInitializer:Bm(this.biasInitializer),kernelRegularizer:Wy(this.kernelRegularizer),recurrentRegularizer:Wy(this.recurrentRegularizer),biasRegularizer:Wy(this.biasRegularizer),activityRegularizer:Wy(this.activityRegularizer),kernelConstraint:wA(this.kernelConstraint),recurrentConstraint:wA(this.recurrentConstraint),biasConstraint:wA(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout},e=super.getConfig();return delete e.cell,Object.assign(t,e),t}static fromConfig(t,e){return new t(e)}}fb.className="SimpleRNN",p.registerClass(fb);class Ab extends db{constructor(t){if(super(t),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",t.resetAfter)throw new jf("GRUCell does not support reset_after parameter set to true.");this.units=t.units,cA(this.units,"units"),this.activation=$y(void 0===t.activation?this.DEFAULT_ACTIVATION:t.activation),this.recurrentActivation=$y(void 0===t.recurrentActivation?this.DEFAULT_RECURRENT_ACTIVATION:t.recurrentActivation),this.useBias=null==t.useBias||t.useBias,this.kernelInitializer=km(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=km(t.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=km(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Xy(t.kernelRegularizer),this.recurrentRegularizer=Xy(t.recurrentRegularizer),this.biasRegularizer=Xy(t.biasRegularizer),this.kernelConstraint=vA(t.kernelConstraint),this.recurrentConstraint=vA(t.recurrentConstraint),this.biasConstraint=vA(t.biasConstraint),this.dropout=HA([1,$A([0,null==t.dropout?0:t.dropout])]),this.recurrentDropout=HA([1,$A([0,null==t.recurrentDropout?0:t.recurrentDropout])]),this.implementation=t.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(t){t=Ym(t),this.kernel=this.addWeight("kernel",[t[t.length-1],3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.bias=this.useBias?this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):null,this.built=!0}call(t,e){return Gu(()=>{if(2!==(t=t).length)throw new jf("GRUCell expects 2 input Tensors (inputs, h, c), got "+t.length+".");const n=null!=e.training&&e.training;let r=t[1];t=t[0],0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=bb(()=>Dh(t),this.dropout,n,3)),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=bb(()=>Dh(r),this.recurrentDropout,n,3));const i=this.recurrentDropoutMask;let s,o,a;0<this.dropout&&this.dropout<1&&(t=vi(t,this.dropoutMask[0]));let l=tm(t,this.kernel.read());this.useBias&&(l=im(l,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(r=vi(r,i[0]));const u=this.recurrentKernel.read(),[c,h]=Os(u,[2*this.units,this.units],u.rank-1),d=tm(r,c),[p,f,A]=Os(l,3,l.rank-1),[m,g]=Os(d,2,d.rank-1);s=this.recurrentActivation.apply($i(p,m)),o=this.recurrentActivation.apply($i(f,g));const y=tm(vi(o,r),h);a=this.activation.apply($i(A,y));const w=$i(vi(s,r),vi($i(1,Ei(s)),a));return[w,w]})}getConfig(){const t={units:this.units,activation:Qy(this.activation),recurrentActivation:Qy(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Bm(this.kernelInitializer),recurrentInitializer:Bm(this.recurrentInitializer),biasInitializer:Bm(this.biasInitializer),kernelRegularizer:Wy(this.kernelRegularizer),recurrentRegularizer:Wy(this.recurrentRegularizer),biasRegularizer:Wy(this.biasRegularizer),activityRegularizer:Wy(this.activityRegularizer),kernelConstraint:wA(this.kernelConstraint),recurrentConstraint:wA(this.recurrentConstraint),biasConstraint:wA(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1},e=super.getConfig();return Object.assign(t,e),t}}Ab.className="GRUCell",p.registerClass(Ab);class mb extends hb{constructor(t){0===t.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),t.cell=new Ab(t),super(t)}call(t,e){return Gu(()=>(null!=this.cell.dropoutMask&&(Xu(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(Xu(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),super.call(t,{mask:null==e?null:e.mask,training:null==e?null:e.training,initialState:null==e?null:e.initialState})))}get units(){return this.cell.units}get activation(){return this.cell.activation}get recurrentActivation(){return this.cell.recurrentActivation}get useBias(){return this.cell.useBias}get kernelInitializer(){return this.cell.kernelInitializer}get recurrentInitializer(){return this.cell.recurrentInitializer}get biasInitializer(){return this.cell.biasInitializer}get kernelRegularizer(){return this.cell.kernelRegularizer}get recurrentRegularizer(){return this.cell.recurrentRegularizer}get biasRegularizer(){return this.cell.biasRegularizer}get kernelConstraint(){return this.cell.kernelConstraint}get recurrentConstraint(){return this.cell.recurrentConstraint}get biasConstraint(){return this.cell.biasConstraint}get dropout(){return this.cell.dropout}get recurrentDropout(){return this.cell.recurrentDropout}get implementation(){return this.cell.implementation}getConfig(){const t={units:this.units,activation:Qy(this.activation),recurrentActivation:Qy(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Bm(this.kernelInitializer),recurrentInitializer:Bm(this.recurrentInitializer),biasInitializer:Bm(this.biasInitializer),kernelRegularizer:Wy(this.kernelRegularizer),recurrentRegularizer:Wy(this.recurrentRegularizer),biasRegularizer:Wy(this.biasRegularizer),activityRegularizer:Wy(this.activityRegularizer),kernelConstraint:wA(this.kernelConstraint),recurrentConstraint:wA(this.recurrentConstraint),biasConstraint:wA(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1},e=super.getConfig();return delete e.cell,Object.assign(t,e),t}static fromConfig(t,e){return 0===e.implmentation&&(e.implementation=1),new t(e)}}mb.className="GRU",p.registerClass(mb);class gb extends db{constructor(t){super(t),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=t.units,cA(this.units,"units"),this.activation=$y(void 0===t.activation?this.DEFAULT_ACTIVATION:t.activation),this.recurrentActivation=$y(void 0===t.recurrentActivation?this.DEFAULT_RECURRENT_ACTIVATION:t.recurrentActivation),this.useBias=null==t.useBias||t.useBias,this.kernelInitializer=km(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=km(t.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=km(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=t.unitForgetBias,this.kernelRegularizer=Xy(t.kernelRegularizer),this.recurrentRegularizer=Xy(t.recurrentRegularizer),this.biasRegularizer=Xy(t.biasRegularizer),this.kernelConstraint=vA(t.kernelConstraint),this.recurrentConstraint=vA(t.recurrentConstraint),this.biasConstraint=vA(t.biasConstraint),this.dropout=HA([1,$A([0,null==t.dropout?0:t.dropout])]),this.recurrentDropout=HA([1,$A([0,null==t.recurrentDropout?0:t.recurrentDropout])]),this.implementation=t.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(t){var e;let n;if(t=Ym(t),this.kernel=this.addWeight("kernel",[t[t.length-1],4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){const t=this.biasInitializer,r=this.units;n=new((e=class extends um{apply(e,n){const i=t.apply([r]),s=(new hm).apply([r]),o=t.apply([2*r]);return YA(YA(i,s),o)}}).className="CustomInit",e)}else n=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,n,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(t,e){return Gu(()=>{const n=null!=e.training&&e.training;if(3!==(t=t).length)throw new jf("LSTMCell expects 3 input Tensors (inputs, h, c), got "+t.length+".");let r=t[1];const i=t[2];t=t[0],0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=bb(()=>Dh(t),this.dropout,n,4)),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=bb(()=>Dh(r),this.recurrentDropout,n,4));const s=this.recurrentDropoutMask;let o,a,l,u;0<this.dropout&&this.dropout<1&&(t=vi(t,this.dropoutMask[0]));let c=tm(t,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(r=vi(r,s[0])),c=$i(c,tm(r,this.recurrentKernel.read())),this.useBias&&(c=im(c,this.bias.read()));const[h,d,p,f]=Os(c,4,c.rank-1);o=this.recurrentActivation.apply(h),a=this.recurrentActivation.apply(d),l=$i(vi(a,i),vi(o,this.activation.apply(p))),u=this.recurrentActivation.apply(f);const A=vi(u,this.activation.apply(l));return[A,A,l]})}getConfig(){const t={units:this.units,activation:Qy(this.activation),recurrentActivation:Qy(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Bm(this.kernelInitializer),recurrentInitializer:Bm(this.recurrentInitializer),biasInitializer:Bm(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:Wy(this.kernelRegularizer),recurrentRegularizer:Wy(this.recurrentRegularizer),biasRegularizer:Wy(this.biasRegularizer),activityRegularizer:Wy(this.activityRegularizer),kernelConstraint:wA(this.kernelConstraint),recurrentConstraint:wA(this.recurrentConstraint),biasConstraint:wA(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation},e=super.getConfig();return Object.assign(t,e),t}}gb.className="LSTMCell",p.registerClass(gb);class yb extends hb{constructor(t){0===t.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),t.cell=new gb(t),super(t)}call(t,e){return Gu(()=>(null!=this.cell.dropoutMask&&(Xu(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(Xu(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),super.call(t,{mask:null==e?null:e.mask,training:null==e?null:e.training,initialState:null==e?null:e.initialState})))}get units(){return this.cell.units}get activation(){return this.cell.activation}get recurrentActivation(){return this.cell.recurrentActivation}get useBias(){return this.cell.useBias}get kernelInitializer(){return this.cell.kernelInitializer}get recurrentInitializer(){return this.cell.recurrentInitializer}get biasInitializer(){return this.cell.biasInitializer}get unitForgetBias(){return this.cell.unitForgetBias}get kernelRegularizer(){return this.cell.kernelRegularizer}get recurrentRegularizer(){return this.cell.recurrentRegularizer}get biasRegularizer(){return this.cell.biasRegularizer}get kernelConstraint(){return this.cell.kernelConstraint}get recurrentConstraint(){return this.cell.recurrentConstraint}get biasConstraint(){return this.cell.biasConstraint}get dropout(){return this.cell.dropout}get recurrentDropout(){return this.cell.recurrentDropout}get implementation(){return this.cell.implementation}getConfig(){const t={units:this.units,activation:Qy(this.activation),recurrentActivation:Qy(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Bm(this.kernelInitializer),recurrentInitializer:Bm(this.recurrentInitializer),biasInitializer:Bm(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:Wy(this.kernelRegularizer),recurrentRegularizer:Wy(this.recurrentRegularizer),biasRegularizer:Wy(this.biasRegularizer),activityRegularizer:Wy(this.activityRegularizer),kernelConstraint:wA(this.kernelConstraint),recurrentConstraint:wA(this.recurrentConstraint),biasConstraint:wA(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation},e=super.getConfig();return delete e.cell,Object.assign(t,e),t}static fromConfig(t,e){return 0===e.implmentation&&(e.implementation=1),new t(e)}}yb.className="LSTM",p.registerClass(yb);class wb extends db{constructor(t){super(t),this.cells=t.cells}get stateSize(){const t=[];for(const e of this.cells.slice().reverse())Array.isArray(e.stateSize)?t.push(...e.stateSize):t.push(e.stateSize);return t}call(t,e){return Gu(()=>{let n=(t=t).slice(1);const r=[];for(const t of this.cells.slice().reverse())Array.isArray(t.stateSize)?r.push(n.splice(0,t.stateSize.length)):r.push(n.splice(0,1));r.reverse();const i=[];let s;for(let o=0;o<this.cells.length;++o){const a=this.cells[o];n=r[o],s=0===o?[t[0]].concat(n):[s[0]].concat(n),s=a.call(s,e),i.push(s.slice(1))}n=[];for(const t of i.slice().reverse())n.push(...t);return[s[0]].concat(n)})}build(t){let e;Wm(t)&&(t=t[0]),t=t,this.cells.forEach((n,r)=>{DA("RNNCell_"+r,()=>{n.build(t),e=Array.isArray(n.stateSize)?n.stateSize[0]:n.stateSize,t=[t[0],e]})}),this.built=!0}getConfig(){const t=[];for(const r of this.cells)t.push({className:r.getClassName(),config:r.getConfig()});const e={cells:t},n=super.getConfig();return Object.assign(e,n),e}static fromConfig(t,e,n={}){const r=[];for(const i of e.cells)r.push(vg(i,n));return new t({cells:r})}get trainableWeights(){if(!this.trainable)return[];const t=[];for(const e of this.cells)t.push(...e.trainableWeights);return t}get nonTrainableWeights(){const t=[];for(const e of this.cells)t.push(...e.nonTrainableWeights);if(!this.trainable){const e=[];for(const t of this.cells)e.push(...t.trainableWeights);return e.concat(t)}return t}getWeights(){const t=[];for(const e of this.cells)t.push(...e.weights);return tg(t)}setWeights(t){const e=[];for(const n of this.cells){const r=t.splice(n.weights.length);for(let t=0;t<n.weights.length;++t)e.push([n.weights[t],r[t]])}eg(e)}}function bb(t,e,n=null,r=1){function i(){return sm(t(),e)}if(r>1){const e=[];for(let s=0;s<r;s++)e.push(om(i,t,n));return e.map(t=>Yu(t.clone()))}return Yu(om(i,t,n).clone())}wb.className="StackedRNNCells",p.registerClass(wb);class vb extends ag{constructor(t){super(t),this.layer=t.layer}build(t){this.built=!0}get trainable(){return null!=this.layer&&this.layer.trainable}set trainable(t){null!=this.layer&&(this.layer.trainable=t)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(t){this.layer.setWeights(t)}getConfig(){const t={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},e=super.getConfig();return Object.assign(t,e),t}setFastWeightInitDuringBuild(t){super.setFastWeightInitDuringBuild(t),null!=this.layer&&this.layer.setFastWeightInitDuringBuild(t)}static fromConfig(t,e,n={}){const r=vg(e.layer,n);delete e.layer;const i={layer:r};return Object.assign(i,e),new t(i)}}class xb extends vb{constructor(t){super(t),this.supportsMasking=!0}build(t){if((t=Ym(t)).length<3)throw new jf("TimeDistributed layer expects an input shape >= 3D, but received input shape "+JSON.stringify(t));this.inputSpec=[{shape:t}];const e=[t[0]].concat(t.slice(2));this.layer.built||(this.layer.build(e),this.layer.built=!0),super.build(t)}computeOutputShape(t){const e=[(t=Ym(t))[0]].concat(t.slice(2)),n=this.layer.computeOutputShape(e);return[n[0],t[1]].concat(n.slice(1))}call(t,e){return Gu(()=>cb((t,n)=>[Xm(this.layer.call(t,e)),[]],t=Xm(t),[],!1,null,null,!1,!0)[1])}}xb.className="TimeDistributed",p.registerClass(xb);class _b extends vb{constructor(t){super(t);const e=t.layer.getConfig(),n={};n.className=t.layer.getClassName(),n.config=e,this.forwardLayer=vg(n),e.goBackwards=!0!==e.goBackwards;const r={};if(r.className=t.layer.getClassName(),r.config=e,this.backwardLayer=vg(r),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=void 0===t.mergeMode?"concat":t.mergeMode,lA(NA,"BidirectionalMergeMode",this.mergeMode),t.weights)throw new Kf("weights support is not implemented for Bidirectional layer yet.");this._stateful=t.layer.stateful,this.returnSequences=t.layer.returnSequences,this.returnState=t.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=t.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(t){this._trainable=t,null!=this.forwardLayer&&(this.forwardLayer.trainable=t),null!=this.backwardLayer&&(this.backwardLayer.trainable=t)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(t){const e=Math.floor(t.length/2);this.forwardLayer.setWeights(t.slice(0,e)),this.backwardLayer.setWeights(t.slice(e))}computeOutputShape(t){let e,n,r,i=this.forwardLayer.computeOutputShape(t);return Array.isArray(i)&&Array.isArray(i[0])||(i=[i]),i=i,this.returnState?(r=i.slice(1),e=i[0]):e=i[0],e=e,"concat"===this.mergeMode?(e[e.length-1]*=2,n=[e]):n=null==this.mergeMode?[e,e.slice()]:[e],this.returnState?null==this.mergeMode?n.concat(r).concat(r.slice()):[e].concat(r).concat(r.slice()):Jf(n)}apply(t,e){let n=null==e?null:e.initialState,r=null==e?null:e.constants;null==e&&(e={});const i=ub(t,n,r,this.numConstants);if(t=i.inputs,n=i.initialState,r=i.constants,Array.isArray(t)&&(n=t.slice(1),t=t[0]),(null==n||0===n.length)&&null==r)return super.apply(t,e);const s=[],o=[];if(null!=n){const t=n.length;if(t%2>0)throw new jf("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");e.initialState=n,s.push(...n);const r=n.map(t=>new ng({shape:t.shape}));this.forwardLayer.stateSpec=r.slice(0,t/2),this.backwardLayer.stateSpec=r.slice(t/2),o.push(...r)}if(null!=r)throw new Kf("Support for constants in Bidirectional layers is not implemented yet.");const a=s[0]instanceof rg;for(const l of s)if(l instanceof rg!==a)throw new jf("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(a){const n=[t].concat(s),r=this.inputSpec.concat(o),i=this.inputSpec;this.inputSpec=r;const a=super.apply(n,e);return this.inputSpec=i,a}return super.apply(t,e)}call(t,e){return Gu(()=>{const n=e.initialState;let r,i,s,o;if(null==n)r=this.forwardLayer.call(t,e),i=this.backwardLayer.call(t,e);else{const s=n.slice(0,n.length/2),o=n.slice(n.length/2);r=this.forwardLayer.call(t,Object.assign(e,{initialState:s})),i=this.backwardLayer.call(t,Object.assign(e,{initialState:o}))}return this.returnState&&(Array.isArray(r)&&(s=r.slice(1).concat(i.slice(1))),r=r[0],i=i[0]),this.returnSequences&&(i=sa(i,1)),"concat"===this.mergeMode?o=XA([r,i]):"sum"===this.mergeMode?o=$i(r,i):"ave"===this.mergeMode?o=vi(.5,$i(r,i)):"mul"===this.mergeMode?o=vi(r,i):null==this.mergeMode&&(o=[r,i]),this.returnState?null==this.mergeMode?o.concat(s):[o].concat(s):o})}resetStates(t){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(t){DA(this.forwardLayer.name,()=>{this.forwardLayer.build(t)}),DA(this.backwardLayer.name,()=>{this.backwardLayer.build(t)}),this.built=!0}computeMask(t,e){let n;if(Array.isArray(e)&&(e=e[0]),n=this.returnSequences?null==this.mergeMode?[e,e]:e:null==this.mergeMode?[null,null]:null,this.returnState){const t=this.forwardLayer.states.map(t=>null);return Array.isArray(n)?n.concat(t).concat(t):[n].concat(t).concat(t)}return n}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(t){super.setFastWeightInitDuringBuild(t),null!=this.forwardLayer&&this.forwardLayer.setFastWeightInitDuringBuild(t),null!=this.backwardLayer&&this.backwardLayer.setFastWeightInitDuringBuild(t)}getConfig(){const t={mergeMode:this.mergeMode},e=super.getConfig();return Object.assign(t,e),t}static fromConfig(t,e){const n=vg(e.layer);if(delete e.layer,null!=e.numConstants)throw new Kf("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const r=e;return r.layer=n,new t(r)}}function Cb(t){return new lg(t)}function Sb(t){return new tw(t)}function Eb(t){return new Yy(t)}function Bb(t){return new Jy(t)}function kb(t){return new Zy(t)}function Nb(t){return new nw(t)}function Ib(t){return new ew(t)}function Fb(t){return new mw(t)}function Tb(t){return new hw(t)}function Rb(t){return new pw(t)}function Ob(t){return new dw(t)}function Db(t){return new Aw(t)}function Lb(t){return new gw(t)}function Mb(t){return new yw(t)}function Ub(t){return new ww(t)}function Pb(t){return new Cw(t)}function zb(t){return new xw(t)}function Qb(t){return new bw(t)}function Hb(t){return new vw(t)}function $b(t){return new _w(t)}function Vb(t){return new Sw(t)}function qb(t){return new Ew(t)}function jb(t){return new Bw(t)}function Kb(t){return new Nw(t)}function Wb(t){return new Fw(t)}function Gb(t){return new Rw(t)}function Xb(t){return new Lw(t)}function Yb(t){return new Ow(t)}function Jb(t){return new Dw(t)}function Zb(t){return new Tw(t)}function tv(t){return new Uw(t)}function ev(t){return new $w(t)}function nv(t){return new Vw(t)}function rv(t){return new qw(t)}function iv(t){return new Xw(t)}function sv(t){return iv(t)}function ov(t){return iv(t)}function av(t){return new Zw(t)}function lv(t){return av(t)}function uv(t){return av(t)}function cv(t){return new nb(t)}function hv(t){return cv(t)}function dv(t){return cv(t)}function pv(t){return new ib(t)}function fv(t){return new ab(t)}function Av(t){return new sb(t)}function mv(t){return new lb(t)}function gv(t){return new Gw(t)}function yv(t){return new Jw(t)}function wv(t){return new eb(t)}function bv(t){return new mb(t)}function vv(t){return new Ab(t)}function xv(t){return new yb(t)}function _v(t){return new gb(t)}function Cv(t){return new fb(t)}function Sv(t){return new pb(t)}function Ev(t){return new hb(t)}function Bv(t){return new wb(t)}function kv(t){return new _b(t)}function Nv(t){return new xb(t)}_b.className="Bidirectional",p.registerClass(_b);const Iv=Av,Fv=mv,Tv=gv,Rv=yv;function Ov(t){return new Pw(t)}function Dv(t){return new zw(t)}function Lv(t){return new Qw(t)}function Mv(t){return new kw(t)}function Uv(t,e){return Tg(t,e)}function Pv(t,e){return Lg(t,e)}function zv(t,e){return Mg(t,e)}function Qv(t,e){return Rg(t,e)}function Hv(t,e){return Ug(t,e)}function $v(t,e){return Dg(t,e)}function Vv(t,e){return function(t,e){return Gu(()=>{const n=Og(t,e),r=function(t,e){return Gu(()=>Is(t.equal(1),e.equal(0)).sum().cast("float32"))}(t,e),i=n.add(r);return Fs(Mo(i,0),n.div(i),0).cast("float32")})}(t,e)}function qv(t,e){return Ng(t,e)}function jv(t,e){return Cg(t,e)}function Kv(t,e){return Sg(t,e)}function Wv(t,e){return Sg(t,e)}function Gv(t,e){return Sg(t,e)}function Xv(t,e){return _g(t,e)}function Yv(t,e){return _g(t,e)}function Jv(t,e){return _g(t,e)}function Zv(t){return new jy(t)}function tx(t){return Vy(e=t),new jy({l1:null!=e?e.l1:null,l2:0});var e}function ex(t){return Vy(e=t),new jy({l2:null!=e?e.l2:null,l1:0});var e}class nx extends pg{constructor(){super(...arguments),this.model=null}setModel(t){if(!(t instanceof by))throw new Error("model must be a LayersModel, not some other Container");this.model=t}}function rx(t,e){return t<e}function ix(t,e){return t>e}class sx extends nx{constructor(t){if(super(),null==t&&(t={}),t.restoreBestWeights)throw new Kf("restoreBestWeights = True is not implemented in EarlyStopping yet.");this.monitor=t.monitor||"val_loss",this.minDelta=Math.abs(t.minDelta||0),this.patience=t.patience||0,this.verbose=t.verbose||0,this.mode=t.mode||"auto",this.baseline=t.baseline,-1===["auto","min","max"].indexOf(this.mode)&&(console.warn(`EarlyStopping mode '${this.mode}' is invalid. Falling back to mode 'auto'.`),this.mode="auto"),this.monitorFunc="min"===this.mode?rx:"max"===this.mode||-1!==this.monitor.indexOf("acc")?ix:rx,this.monitorFunc===rx&&(this.minDelta*=-1)}async onTrainBegin(t){this.wait=0,this.stoppedEpoch=0,this.best=null!=this.baseline?this.baseline:this.monitorFunc===rx?1/0:-1/0}async onEpochEnd(t,e){await cg(e);const n=this.getMonitorValue(e);null!=n&&(this.monitorFunc(n-this.minDelta,this.best)?(this.best=n,this.wait=0):(this.wait++,this.wait>=this.patience&&(this.stoppedEpoch=t,this.model.stopTraining=!0)))}async onTrainEnd(t){this.stoppedEpoch>0&&this.verbose&&console.log(`Epoch ${this.stoppedEpoch}: early stopping.`)}getMonitorValue(t){null==t&&(t={});const e=t[this.monitor];return null==e&&console.warn(`Metric for EarlyStopping ${this.monitor} is not available. Available metrics are: `+Object.keys(t)),e}}const ox={earlyStopping:function(t){return new sx(t)}};var ax,lx;!function(t){t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF"}(ax||(ax={})),function(t){let e;!function(t){t[t.LEGACY=0]="LEGACY",t[t.V1=1]="V1",t[t.V2=2]="V2"}(e=t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))}(lx||(lx={}));const ux={};function cx(t,e){ux[t]={tfOpName:t,category:"custom",inputs:[],attrs:[],customExecutor:e}}function hx(t){return ux[t]}function dx(t){delete ux[t]}function px(t,e,n,i){const s=e.inputParams[t];if(s&&void 0!==s.inputIndexStart){const t=s.inputIndexStart,o=0===s.inputIndexEnd?void 0:void 0===s.inputIndexEnd?t+1:s.inputIndexEnd;if("tensor"===s.type)return fx(e.inputNames[s.inputIndexStart],n,i);if("tensors"===s.type)return e.inputNames.slice(t,o).map(t=>fx(t,n,i));const a=fx(e.inputNames.slice(t)[0],n,i),l=a.dataSync();return"number"===s.type?l[0]:r.toNestedArray(a.shape,l)}const o=e.attrParams[t];return o&&o.value}function fx(t,e,n){const[r,i]=gx(t),s=n.currentContextIds.find(t=>!!e[mx(r,t)]);return void 0!==s?e[mx(r,s)][i]:void 0}function Ax(t,e){const[n,r]=gx(t);return[mx(n,e&&e.currentContextId),r]}function mx(t,e){return e?`${t}-${e}`:t}function gx(t){const e=t.split(":");return 1===e.length?[t,0]:[e[0],Number(e[e.length-1])]}function yx(t,e,n){let r=px("pad",t,e,n);if("explicit"===r){r=px("explicitPaddings",t,e,n);const i=[[0,0],[0,0],[0,0],[0,0]];for(let t=0;t<4;t++)i[t][0]=r[2*t],i[t][1]=r[2*t+1];return i}return r}const wx=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],bx=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"clip_value_min",name:"clipValueMin",type:"number"},{tfName:"clip_value_max",name:"clipValueMax",type:"number"}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"clipValueMin",name:"clipValueMin",type:"number",defaultValue:0},{tfName:"clipValueMax",name:"clipValueMax",type:"number",defaultValue:6}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],vx=[{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]}],xx=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],_x=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],Cx=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],Sx=[{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]}],Ex=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],Bx=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]}],kx=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],Nx=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],Ix=[{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}],Fx=[{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],Tx=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool",notSupported:!0}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}],Rx=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],Ox=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]}];function Dx(t,e){const n=Array.isArray(t)?String.fromCharCode.apply(null,t):function(t){const e=V().global;if(void 0!==e.atob)return e.atob(t);if("undefined"!=typeof Buffer)return new Buffer(t,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}(t);return e?n:n.toLowerCase()}function Lx(t,e,n,r=!1){const i=t[e];return null!=i?Dx(i.s,r):n}function Mx(t,e,n){const r=t[e];return r?r.b:n}function Ux(t,e,n){const r=t[e]||{},i=null!=r.i?r.i:null!=r.f?r.f:n;return"number"==typeof i?i:parseInt(i,10)}function Px(t){switch("string"==typeof t&&(t=ax[t]),t){case ax.DT_FLOAT:return"float32";case ax.DT_INT32:case ax.DT_INT64:case ax.DT_INT8:case ax.DT_UINT8:return"int32";case ax.DT_BOOL:return"bool";case ax.DT_DOUBLE:return"float32";case ax.DT_STRING:return"string";default:return null}}function zx(t,e,n){const r=t[e];return r&&r.func?r.func.name:n}function Qx(t,e,n){const r=t[e];return r&&r.type?Px(r.type):n}function Hx(t,e,n){const r=t[e];return r&&r.list&&r.list.type?r.list.type.map(t=>Px(t)):n}function $x(t){if(!t.unknownRank)return null!=t.dim?t.dim.map(t=>"number"==typeof t.size?t.size:parseInt(t.size,10)):[]}function Vx(t,e,n){const r=t[e];return r&&r.shape?$x(r.shape):n}function qx(t,e,n){const r=t[e];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(t=>"number"==typeof t?t:parseInt(t,10)):n}function jx(t,e,n,r=!1){const i=t[e];return i&&i.list&&i.list.s?i.list.s.map(t=>Dx(t,r)):n}function Kx(t,e,n){const r=t[e];return r&&r.list&&r.list.shape?r.list.shape.map(t=>$x(t)):n}function Wx(t,e,n){const r=t[e];return r&&r.list&&r.list.b?r.list.b:n}class Gx{constructor(t,e,n){this.node=t,this.tensorMap=e,this.context=n,this.inputs=[],this.attrs={},this.inputs=t.inputNames.map(t=>this.getInput(t)),null!=t.rawAttrs&&(this.attrs=Object.keys(t.rawAttrs).reduce((t,e)=>(t[e]=this.getAttr(e),t),{}))}getInput(t){return fx(t,this.tensorMap,this.context)}getAttr(t,e){const n=this.node.rawAttrs[t];if(null!=n.tensor)return fx(t,this.tensorMap,this.context);if(null!=n.i||null!=n.f)return Ux(this.node.rawAttrs,t,e);if(null!=n.s)return Lx(this.node.rawAttrs,t,e);if(null!=n.b)return Mx(this.node.rawAttrs,t,e);if(null!=n.shape)return Vx(this.node.rawAttrs,t,e);if(null!=n.type)return Qx(this.node.rawAttrs,t,e);if(null!=n.list){if(null!=n.list.i||null!=n.list.f)return qx(this.node.rawAttrs,t,e);if(null!=n.list.s)return jx(this.node.rawAttrs,t,e);if(null!=n.list.shape)return Kx(this.node.rawAttrs,t,e);if(null!=n.list.b)return Wx(this.node.rawAttrs,t,e);if(null!=n.list.type)return Hx(this.node.rawAttrs,t,e)}return e}}function Xx(t,e,n=""){r.assert(function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(-1!==t[n]&&-1!==e[n]&&t[n]!==e[n])return!1;return!0}(t,e),()=>n+` Shapes ${t} and ${e} must match`)}class Yx{constructor(t,e,n,r,i,s,o){this.name=t,this.dtype=e,this.maxSize=n,this.elementShape=r,this.identicalElementShapes=i,this.dynamicSize=s,this.clearAfterRead=o,this.tensors=[],this.closed_=!1,this.idTensor=ki(0),Yu(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(){this.tensors.forEach(t=>t.tensor.dispose()),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(t){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(t<0||t>=this.size())throw new Error(`Tried to read from index ${t}, but array size is: ${this.size()}`);const e=this.tensors[t];if(e.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${t} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(e.cleared=!0),e.read=!0,e.tensor}readMany(t){return t.map(t=>this.read(t))}write(t,e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(t<0||!this.dynamicSize&&t>=this.maxSize)throw new Error(`Tried to write to index ${t}, but array is not resizeable and size is: ${this.maxSize}`);const n=this.tensors[t]||{};if(e.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${t},\n          because the value dtype is ${e.dtype}, but TensorArray dtype is ${this.dtype}.`);if(0!==this.size()||null!=this.elementShape&&0!==this.elementShape.length||(this.elementShape=e.shape),Xx(this.elementShape,e.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${t}.`),n.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${t}, because it has already been read.`);if(n.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${t}, because it has already been written.`);n.tensor=e,Yu(e),n.written=!0,this.tensors[t]=n}writeMany(t,e){if(t.length!==e.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${t.length} is not the same as tensors size: ${e.length}.`);t.forEach((t,n)=>this.write(t,e[n]))}gather(t,e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${e}`);if(t)t=t.slice(0,this.size());else{t=[];for(let e=0;e<this.size();e++)t.push(e)}if(0===t.length)return $a([],[0].concat(this.elementShape));const n=this.readMany(t);return Xx(this.elementShape,n[0].shape,"TensorArray shape mismatch: "),sl(n,0)}concat(t){if(t&&t!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${t}`);if(0===this.size())return $a([],[0].concat(this.elementShape));const e=[];for(let r=0;r<this.size();r++)e.push(r);const n=this.readMany(e);return Xx(this.elementShape,n[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${n[0].shape})`),Va(n,0)}scatter(t,e){if(e.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${e.dtype}`);if(t.length!==e.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${t.length} vs. ${e.shape[0]}`);const n=Math.max(...t);if(!this.dynamicSize&&n>=this.maxSize)throw new Error(`Max index must be < array size (${n}  vs. ${this.maxSize})`);this.writeMany(t,Id(e,0))}split(t,e){if(e.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${e.dtype}`);let n=0;const r=t.map(t=>(n+=t,n));if(n!==e.shape[0])throw new Error(`Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ${n}, and tensor's shape is: ${e.shape}`);if(!this.dynamicSize&&t.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${t.length}), and the TensorArray is not marked as dynamically resizeable`);const i=0===n?0:e.size/n,s=[];Gu(()=>{e=e.reshape([1,n,i]);for(let n=0;n<t.length;++n)s[n]=el(e,[0,0===n?0:r[n-1],0],[1,t[n],i]).reshape(this.elementShape);return s});const o=[];for(let a=0;a<t.length;a++)o[a]=a;this.writeMany(o,s)}}class Jx{constructor(t,e,n,r=-1){this.tensors=t,this.elementShape=e,this.elementDtype=n,null!=t&&t.forEach(t=>{if(n!==t.dtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${t.dtype}`);Xx(e,t.shape,"TensorList shape mismatch: "),Yu(t)}),this.idTensor=ki(0),this.maxNumElements=r,Yu(this.idTensor)}get id(){return this.idTensor.id}copy(){return new Jx([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(){this.tensors.forEach(t=>t.dispose()),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(t,e,n=-1){if(e!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e}, but list elements ${this.elementDtype}`);if(-1!==n&&this.tensors.length!==n)throw new Error(`Operation expected a list with ${n} elements but got a list with ${this.tensors.length} elements.`);return Xx(t,this.elementShape,"TensorList shape mismatch: "),Gu(()=>{const e=this.tensors.map(e=>e.reshape(t));return sl(e,0)})}popBack(t,e){if(e!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e}, but list elements ${this.elementDtype}`);if(0===this.size())throw new Error("Trying to pop from an empty list.");const n=this.tensors.pop();return Xx(n.shape,t,"TensorList shape mismatch: "),n.reshape(t)}pushBack(t){if(t.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${this.elementDtype}`);if(Xx(t.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");Yu(t),this.tensors.push(t)}resize(t){if(t<0)throw new Error("TensorListResize expects size to be non-negative. Got: "+t);if(-1!==this.maxNumElements&&t>this.maxNumElements)throw new Error(`TensorListResize input size ${t} is greater maxNumElement ${this.maxNumElements}.`);this.tensors.length=t}getItem(t,e,n){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(t<0||t>this.tensors.length)throw new Error(`Trying to access element ${t} in a list with ${this.tensors.length} elements.`);if(null==this.tensors[t])throw new Error(`element at index ${t} is null.`);return Xx(this.tensors[t].shape,e,"TensorList shape mismatch: "),this.tensors[t]}setItem(t,e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(t<0||-1!==this.maxNumElements&&t>=this.maxNumElements)throw new Error(`Trying to set element ${t} in a list with max ${this.maxNumElements} elements.`);Xx(this.elementShape,e.shape,"TensorList shape mismatch: "),Yu(e),this.tensors[t]=e}gather(t,e,n){if(e!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e}, but list elements ${this.elementDtype}`);return Xx(this.elementShape,n,"TensorList shape mismatch: "),0===(t=t.slice(0,this.size())).length?$a([],[0].concat(this.elementShape)):Gu(()=>{const e=t.map(t=>this.tensors[t].reshape(n));return sl(e,0)})}concat(t,e){if(t&&t!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${t}`);return Xx(this.elementShape,e,"TensorList shape mismatch: "),0===this.size()?$a([],[0].concat(this.elementShape)):Gu(()=>{const t=this.tensors.map(t=>t.reshape(e));return Va(t,0)})}}function Zx(t,e,n){const i=((t,e,n)=>{switch(t.category){case"arithmetic":return Gu(()=>((t,e,n)=>{switch(t.op){case"BiasAdd":case"AddV2":case"Add":return[$i(px("a",t,e,n),px("b",t,e,n))];case"AddN":return[hc(px("tensors",t,e,n))];case"FloorMod":case"Mod":return[Ih(px("a",t,e,n),px("b",t,e,n))];case"Mul":return[vi(px("a",t,e,n),px("b",t,e,n))];case"RealDiv":case"Div":return[Si(px("a",t,e,n),px("b",t,e,n))];case"DivNoNan":return[jc(px("a",t,e,n),px("b",t,e,n))];case"FloorDiv":return[Ci(px("a",t,e,n),px("b",t,e,n))];case"Sub":return[Fi(px("a",t,e,n),px("b",t,e,n))];case"Minimum":return[Nh(px("a",t,e,n),px("b",t,e,n))];case"Maximum":return[pl(px("a",t,e,n),px("b",t,e,n))];case"Pow":return[Go(px("a",t,e,n),px("b",t,e,n))];case"SquaredDifference":return[bd(px("a",t,e,n),px("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}})(t,e,n));case"basic_math":return Gu(()=>((t,e,n)=>{switch(t.op){case"Abs":case"ComplexAbs":return[lc(px("x",t,e,n))];case"Acos":return[uc(px("x",t,e,n))];case"Acosh":return[cc(px("x",t,e,n))];case"Asin":return[mc(px("x",t,e,n))];case"Asinh":return[gc(px("x",t,e,n))];case"Atan":return[yc(px("x",t,e,n))];case"Atan2":return[wc(px("x",t,e,n),px("y",t,e,n))];case"Atanh":return[bc(px("x",t,e,n))];case"Ceil":return[Tc(px("x",t,e,n))];case"Complex":return[$o(px("real",t,e,n),px("imag",t,e,n))];case"Cos":return[ma(px("x",t,e,n))];case"Cosh":return[ya(px("x",t,e,n))];case"Elu":return[Wc(px("x",t,e,n))];case"Erf":return[Gc(px("x",t,e,n))];case"Exp":return[ro(px("x",t,e,n))];case"Expm1":return[Xc(px("x",t,e,n))];case"Floor":return[Po(px("x",t,e,n))];case"Log":return[Wo(px("x",t,e,n))];case"Log1p":return[ch(px("x",t,e,n))];case"Imag":return[eh(px("x",t,e,n))];case"Neg":return[Ei(px("x",t,e,n))];case"Reciprocal":return[ed(px("x",t,e,n))];case"Real":return[nh(px("x",t,e,n))];case"Relu":return[nd(px("x",t,e,n))];case"Round":return[ud(px("x",t,e,n))];case"Selu":return[cd(px("x",t,e,n))];case"Sigmoid":return[Ma(px("x",t,e,n))];case"Sin":return[Vs(px("x",t,e,n))];case"Sign":return[pd(px("x",t,e,n))];case"Sinh":return[js(px("x",t,e,n))];case"Softplus":return[wd(px("x",t,e,n))];case"Sqrt":return[Ni(px("x",t,e,n))];case"Square":return[Ii(px("x",t,e,n))];case"Tanh":return[_c(px("x",t,e,n))];case"Tan":return[_d(px("x",t,e,n))];case"Relu6":case"ClipByValue":return[Rc(px("x",t,e,n),px("clipValueMin",t,e,n),px("clipValueMax",t,e,n))];case"Rsqrt":return[uo(fx(t.inputNames[0],e,n))];case"Prod":return[Vh(px("x",t,e,n),px("axes",t,e,n))];case"LeakyRelu":return[ah(px("x",t,e,n),px("alpha",t,e,n))];case"Prelu":return[Hh(px("x",t,e,n),px("alpha",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}})(t,e,n));case"control":return(async(t,e,n)=>{switch(t.op){case"If":case"StatelessIf":{const r=px("thenBranch",t,e,n),i=px("elseBranch",t,e,n),s=px("cond",t,e,n),o=px("args",t,e,n);return(await s.data())[0]?n.functionMap[r].executeFunctionAsync(o,n.tensorArrayMap,n.tensorListMap):n.functionMap[i].executeFunctionAsync(o,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{const r=px("body",t,e,n),i=px("cond",t,e,n),s=px("args",t,e,n),o=await n.functionMap[i].executeFunctionAsync(s,n.tensorArrayMap,n.tensorListMap),a=s.map(t=>t.id);let l=await o[0].data();o.forEach(t=>{t.kept||-1!==a.indexOf(t.id)||t.dispose()});let u=s;for(;l[0];){const t=u;u=await n.functionMap[r].executeFunctionAsync(u,n.tensorArrayMap,n.tensorListMap);const e=u.map(t=>t.id);t.forEach(t=>{t.kept||-1!==a.indexOf(t.id)||-1!==e.indexOf(t.id)||t.dispose()});const s=await n.functionMap[i].executeFunctionAsync(u,n.tensorArrayMap,n.tensorListMap);l=await s[0].data(),s.forEach(t=>{t.kept||-1!==a.indexOf(t.id)||-1!==e.indexOf(t.id)||t.dispose()})}return u}case"LoopCond":return[px("pred",t,e,n).clone()];case"Switch":{const r=px("pred",t,e,n),i=px("data",t,e,n);return(await r.data())[0]?[void 0,i.clone()]:[i.clone(),void 0]}case"Merge":{const r=t.inputNames.find(t=>void 0!==fx(t,e,n));return r?[fx(r,e,n).clone()]:void 0}case"Enter":{const r=px("frameName",t,e,n),i=px("tensor",t,e,n);return n.enterFrame(r),[i.clone()]}case"Exit":{const r=px("tensor",t,e,n);return n.exitFrame(),[r.clone()]}case"NextIteration":{const r=px("tensor",t,e,n);return n.nextIteration(),[r.clone()]}case"TensorArrayV3":{const r=px("size",t,e,n),i=px("dtype",t,e,n),s=px("elementShape",t,e,n),o=px("dynamicSize",t,e,n),a=px("clearAfterRead",t,e,n),l=px("identicalElementShapes",t,e,n),u=px("name",t,e,n),c=new Yx(u,i,r,s,l,o,a);return n.addTensorArray(c),[c.idTensor,ki(1)]}case"TensorArrayWriteV3":{const r=px("tensorArrayId",t,e,n),i=px("index",t,e,n),s=px("tensor",t,e,n),o=n.getTensorArray(r.id);return o.write(i,s),[o.idTensor]}case"TensorArrayReadV3":{const r=px("tensorArrayId",t,e,n),i=px("index",t,e,n);return[n.getTensorArray(r.id).read(i)]}case"TensorArrayGatherV3":{const r=px("tensorArrayId",t,e,n),i=px("indices",t,e,n),s=px("dtype",t,e,n);return[n.getTensorArray(r.id).gather(i,s)]}case"TensorArrayScatterV3":{const r=px("tensorArrayId",t,e,n),i=px("indices",t,e,n),s=px("tensor",t,e,n),o=n.getTensorArray(r.id);return o.scatter(i,s),[o.idTensor]}case"TensorArrayConcatV3":{const r=px("tensorArrayId",t,e,n),i=n.getTensorArray(r.id),s=px("dtype",t,e,n);return[i.concat(s)]}case"TensorArraySplitV3":{const r=px("tensorArrayId",t,e,n),i=px("tensor",t,e,n),s=px("lengths",t,e,n),o=n.getTensorArray(r.id);return o.split(s,i),[o.idTensor]}case"TensorArraySizeV3":{const r=px("tensorArrayId",t,e,n);return[ki(n.getTensorArray(r.id).size(),"int32")]}case"TensorArrayCloseV3":{const r=px("tensorArrayId",t,e,n),i=n.getTensorArray(r.id);return i.clearAndClose(),[i.idTensor]}case"TensorListSetItem":{const r=px("tensorListId",t,e,n),i=px("index",t,e,n),s=px("tensor",t,e,n),o=n.getTensorList(r.id);return o.setItem(i,s),[o.idTensor]}case"TensorListGetItem":{const r=px("tensorListId",t,e,n),i=px("index",t,e,n),s=px("elementShape",t,e,n),o=px("elementDType",t,e,n);return[n.getTensorList(r.id).getItem(i,s,o)]}case"TensorListScatterV2":case"TensorListScatter":{const r=px("indices",t,e,n),i=function(t,e,n,r){if(e.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${t.shape[0]}`);const i=Math.max(...e);if(null!=r&&-1!==r&&i>=r)throw new Error(`Max index must be < array size (${i}  vs. ${r})`);const s=new Jx([],n,t.dtype,r),o=Id(t,0);return e.forEach((t,e)=>{s.setItem(t,o[e])}),s}(px("tensor",t,e,n),r,px("elementShape",t,e,n),px("numElements",t,e,n));return n.addTensorList(i),[i.idTensor]}case"TensorListReserve":{const o=(r=px("elementShape",t,e,n),i=px("elementDType",t,e,n),s=px("numElements",t,e,n),new Jx([],r,i,s));return n.addTensorList(o),[o.idTensor]}case"TensorListGather":{const r=px("tensorListId",t,e,n),i=px("indices",t,e,n),s=px("elementShape",t,e,n),o=px("elementDType",t,e,n);return[n.getTensorList(r.id).gather(i,o,s)]}case"TensorListStack":{const r=px("tensorListId",t,e,n),i=px("elementShape",t,e,n),s=px("elementDType",t,e,n),o=px("numElements",t,e,n);return[n.getTensorList(r.id).stack(i,s,o)]}case"TensorListFromTensor":{const r=function(t,e,n){const r=t.dtype;if(t.shape.length<1)throw new Error("Tensor must be at least a vector, but saw shape: "+t.shape);if(t.dtype!==n)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${n}`);Xx(t.shape.slice(1),e,"TensorList shape mismatch: ");const i=t.unstack();return new Jx(i,e,r)}(px("tensor",t,e,n),px("elementShape",t,e,n),px("elementDType",t,e,n));return n.addTensorList(r),[r.idTensor]}case"TensorListConcat":{const r=px("tensorListId",t,e,n),i=n.getTensorList(r.id),s=px("dtype",t,e,n),o=px("elementShape",t,e,n);return[i.concat(s,o)]}case"TensorListPushBack":{const r=px("tensorListId",t,e,n),i=px("tensor",t,e,n),s=n.getTensorList(r.id);return s.pushBack(i),[s.idTensor]}case"TensorListPopBack":{const r=px("tensorListId",t,e,n),i=px("elementShape",t,e,n),s=px("elementDType",t,e,n);return[n.getTensorList(r.id).popBack(i,s)]}case"TensorListSplit":{const r=px("tensor",t,e,n),i=px("elementShape",t,e,n),s=function(t,e,n){let r=0;const i=e.map(t=>(r+=t,r));if(r!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ${r}, and tensor's shape is: ${t.shape}`);const s=0===r?0:t.size/r,o=Gu(()=>{const o=[];t=t.reshape([1,r,s]);for(let r=0;r<e.length;++r)o[r]=el(t,[0,0===r?0:i[r-1],0],[1,e[r],s]).reshape(n);return t.dispose(),o}),a=new Jx([],n,t.dtype,e.length);for(let l=0;l<o.length;l++)a.setItem(l,o[l]);return a}(r,px("lengths",t,e,n),i);return n.addTensorList(s),[s.idTensor]}default:throw TypeError(`Node type ${t.op} is not implemented`)}var r,i,s})(t,e,n);case"convolution":return Gu(()=>((t,e,n)=>{switch(t.op){case"Conv1D":{const r=px("stride",t,e,n),i=px("pad",t,e,n),s=px("dataFormat",t,e,n).toUpperCase(),o=px("dilation",t,e,n);return[Uc(px("x",t,e,n),px("filter",t,e,n),r,i,s,o)]}case"Conv2D":{const r=px("strides",t,e,n),i=yx(t,e,n),s=px("dataFormat",t,e,n).toUpperCase(),o=px("dilations",t,e,n);return[Ps(px("x",t,e,n),px("filter",t,e,n),[r[1],r[2]],i,s,[o[1],o[2]])]}case"_FusedConv2D":case"FusedDepthwiseConv2dNative":{const[r,i]=px("fusedOps",t,e,n),s="biasadd"===r,o="prelu"===i,a="fusedbatchnorm"===r,l=px("numArgs",t,e,n);if(s){if(o&&2!==l)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!o&&1!==l)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(a)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported.");const u=px("strides",t,e,n),c=yx(t,e,n),h=px("dataFormat",t,e,n).toUpperCase(),d=px("dilations",t,e,n),[p,f]=px("args",t,e,n);return[("_FusedConv2D"===t.op?A.conv2d:A.depthwiseConv2d)({x:px("x",t,e,n),filter:px("filter",t,e,n),strides:[u[1],u[2]],pad:c,dataFormat:h,dilations:[d[1],d[2]],bias:p,activation:i,preluActivationWeights:f})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const r=px("outputShape",t,e,n),i=px("strides",t,e,n),s=yx(t,e,n);return[Pc(px("x",t,e,n),px("filter",t,e,n),r,[i[1],i[2]],s)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const r=px("strides",t,e,n),i=yx(t,e,n),s=px("dilations",t,e,n),o=px("dataFormat",t,e,n).toUpperCase();return[$c(px("input",t,e,n),px("filter",t,e,n),[r[1],r[2]],i,o,[s[1],s[2]])]}case"Conv3D":{const r=px("strides",t,e,n),i=px("pad",t,e,n),s=px("dataFormat",t,e,n).toUpperCase(),o=px("dilations",t,e,n);return[zc(px("x",t,e,n),px("filter",t,e,n),[r[1],r[2],r[3]],i,s,[o[1],o[2],o[3]])]}case"AvgPool":{const r=px("strides",t,e,n),i=px("pad",t,e,n),s=px("kernelSize",t,e,n);return[vc(px("x",t,e,n),[s[1],s[2]],[r[1],r[2]],i)]}case"MaxPool":{const r=px("strides",t,e,n),i=px("pad",t,e,n),s=px("kernelSize",t,e,n);return[Ch(px("x",t,e,n),[s[1],s[2]],[r[1],r[2]],i)]}case"MaxPoolWithArgmax":{const r=px("strides",t,e,n),i=px("pad",t,e,n),s=px("kernelSize",t,e,n),o=px("includeBatchInIndex",t,e,n),{result:a,indexes:l}=Eh(px("x",t,e,n),[s[1],s[2]],[r[1],r[2]],i,o);return[a,l]}case"AvgPool3D":{const r=px("strides",t,e,n),i=px("pad",t,e,n),s=px("kernelSize",t,e,n);return[xc(px("x",t,e,n),[s[1],s[2],s[3]],[r[1],r[2],r[3]],i)]}case"MaxPool3D":{const r=px("strides",t,e,n),i=px("pad",t,e,n),s=px("kernelSize",t,e,n);return[Sh(px("x",t,e,n),[s[1],s[2],s[3]],[r[1],r[2],r[3]],i)]}case"Dilation2D":{const r=px("strides",t,e,n),i=px("pad",t,e,n),s=px("dilations",t,e,n),o=r[1],a=r[2],l=s[1],u=s[2];return[qc(px("x",t,e,n),px("filter",t,e,n),[o,a],i,[l,u],"NHWC")]}default:throw TypeError(`Node type ${t.op} is not implemented`)}})(t,e,n));case"creation":return Gu(()=>((t,e,n)=>{switch(t.op){case"Fill":{const r=px("shape",t,e,n),i=px("dtype",t,e,n);return[Zc(r,px("value",t,e,n),i)]}case"LinSpace":return[lh(px("start",t,e,n),px("stop",t,e,n),px("num",t,e,n))];case"Multinomial":{const r=px("logits",t,e,n),i=px("numSamples",t,e,n),s=px("seed",t,e,n);return[Rh(r,i,s)]}case"OneHot":{const r=px("indices",t,e,n),i=px("depth",t,e,n),s=px("onValue",t,e,n),o=px("offValue",t,e,n);return[gu(r,i,s,o)]}case"Ones":return[Ya(px("shape",t,e,n),px("dtype",t,e,n))];case"OnesLike":return[Dh(px("x",t,e,n))];case"RandomUniform":return[Jh(px("shape",t,e,n),px("minval",t,e,n),px("maxval",t,e,n),px("dtype",t,e,n))];case"Range":return[td(px("start",t,e,n),px("stop",t,e,n),px("step",t,e,n),px("dtype",t,e,n))];case"TruncatedNormal":{const r=px("shape",t,e,n),i=px("mean",t,e,n),s=px("stdDev",t,e,n),o=px("seed",t,e,n);return[Nd(r,i,s,px("dtype",t,e,n),o)]}case"Zeros":return[Vo(px("shape",t,e,n),px("dtype",t,e,n))];case"ZerosLike":return[Pi(px("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}})(t,e,n));case"dynamic":return(async(t,e,n)=>{switch(t.op){case"NonMaxSuppressionV5":case"NonMaxSuppressionV4":case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const r=px("boxes",t,e,n),i=px("scores",t,e,n),s=px("maxOutputSize",t,e,n),o=px("iouThreshold",t,e,n),a=px("scoreThreshold",t,e,n);if("NonMaxSuppressionV5"===t.op){const l=px("softNmsSigma",t,e,n),u=await Gp.nonMaxSuppressionWithScoreAsync(r,i,s,o,a,l);return[u.selectedIndices,u.selectedScores]}if("NonMaxSuppressionV4"===t.op){const l=px("padToMaxOutputSize",t,e,n),u=await Gp.nonMaxSuppressionPaddedAsync(r,i,s,o,a,l);return[u.selectedIndices,u.validOutputs]}return[await Gp.nonMaxSuppressionAsync(r,i,s,o,a)]}case"Where":{const r=px("condition",t,e,n).asType("bool"),i=[await Rd(r)];return r.dispose(),i}case"ListDiff":return dd(px("x",t,e,n),px("y",t,e,n));default:throw TypeError(`Node type ${t.op} is not implemented`)}})(t,e,n);case"evaluation":return Gu(()=>((t,e,n)=>{switch(t.op){case"TopKV2":{const r=px("x",t,e,n),i=px("k",t,e,n),s=px("sorted",t,e,n),o=kd(r,i,s);return[o.values,o.indices]}default:throw TypeError(`Node type ${t.op} is not implemented`)}})(t,e,n));case"image":return Gu(()=>((t,e,n)=>{switch(t.op){case"ResizeBilinear":{const r=px("images",t,e,n),i=px("size",t,e,n),s=px("alignCorners",t,e,n);return[Gp.resizeBilinear(r,[i[0],i[1]],s)]}case"ResizeNearestNeighbor":{const r=px("images",t,e,n),i=px("size",t,e,n),s=px("alignCorners",t,e,n);return[Gp.resizeNearestNeighbor(r,[i[0],i[1]],s)]}case"CropAndResize":{const r=px("image",t,e,n),i=px("boxes",t,e,n),s=px("boxInd",t,e,n),o=px("cropSize",t,e,n),a=px("method",t,e,n),l=px("extrapolationValue",t,e,n);return[Gp.cropAndResize(r,i,s,o,a,l)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}})(t,e,n));case"graph":return Gu(()=>((t,e,n)=>{switch(t.op){case"Const":return e[t.name];case"PlaceholderWithDefault":const r=px("default",t,e,n);return[fx(t.name,e,n)||r];case"Placeholder":return[fx(t.name,e,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":return[px("x",t,e,n).clone()];case"IdentityN":return px("x",t,e,n).map(t=>t.clone());case"Snapshot":return[px("x",t,e,n).clone()];case"Shape":return[Zh(px("x",t,e,n).shape,"int32")];case"ShapeN":return px("x",t,e,n).map(t=>Zh(t.shape));case"Size":return[ki(px("x",t,e,n).size,"int32")];case"Rank":return[ki(px("x",t,e,n).rank,"int32")];case"NoOp":return[ki(1)];case"Print":const i=px("x",t,e,n),s=px("data",t,e,n),o=px("message",t,e,n),a=px("summarize",t,e,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(o);for(let t=0;t<s.length;t++)console.log(Array.prototype.slice.call(s[t].dataSync()).slice(0,a));return[i];default:throw TypeError(`Node type ${t.op} is not implemented`)}})(t,e,n));case"logical":return Gu(()=>((t,e,n)=>{switch(t.op){case"Equal":return[Bo(px("a",t,e,n),px("b",t,e,n))];case"NotEqual":return[Oh(px("a",t,e,n),px("b",t,e,n))];case"Greater":return[Mo(px("a",t,e,n),px("b",t,e,n))];case"GreaterEqual":return[ks(px("a",t,e,n),px("b",t,e,n))];case"Less":return[Io(px("a",t,e,n),px("b",t,e,n))];case"LessEqual":return[Ns(px("a",t,e,n),px("b",t,e,n))];case"LogicalAnd":return[Is(px("a",t,e,n),px("b",t,e,n))];case"LogicalNot":return[ua(px("a",t,e,n))];case"LogicalOr":return[xh(px("a",t,e,n),px("b",t,e,n))];case"Select":case"SelectV2":return[Fs(px("condition",t,e,n),px("a",t,e,n),px("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}})(t,e,n));case"matrices":return Gu(()=>((t,e,n)=>{switch(t.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[vs(px("a",t,e,n),px("b",t,e,n),px("transposeA",t,e,n),px("transposeB",t,e,n))];case"Transpose":return[Ws(px("x",t,e,n),px("perm",t,e,n))];case"_FusedMatMul":const[r,i]=px("fusedOps",t,e,n),s="biasadd"===r,o="prelu"===i,a=px("numArgs",t,e,n);if(s){if(o&&2!==a)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!o&&1!==a)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[l,u]=px("args",t,e,n);return[A.matMul({a:px("a",t,e,n),b:px("b",t,e,n),transposeA:px("transposeA",t,e,n),transposeB:px("transposeB",t,e,n),bias:l,activation:i,preluActivationWeights:u})];default:throw TypeError(`Node type ${t.op} is not implemented`)}})(t,e,n));case"normalization":return Gu(()=>((t,e,n)=>{switch(t.op){case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[Ec(px("x",t,e,n),px("mean",t,e,n),px("variance",t,e,n),px("offset",t,e,n),px("scale",t,e,n),px("epsilon",t,e,n))];case"LRN":return[uh(px("x",t,e,n),px("radius",t,e,n),px("bias",t,e,n),px("alpha",t,e,n),px("beta",t,e,n))];case"Softmax":return[yd(px("x",t,e,n))];case"LogSoftmax":return[bh(px("x",t,e,n))];case"SparseToDense":return[Zd(px("sparseIndices",t,e,n),px("outputShape",t,e,n),px("sparseValues",t,e,n),px("defaultValue",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}})(t,e,n));case"reduction":return Gu(()=>((t,e,n)=>{switch(t.op){case"Max":{const r=px("axis",t,e,n),i=px("keepDims",t,e,n);return[wh(px("x",t,e,n),r,i)]}case"Mean":{const r=px("axis",t,e,n),i=px("keepDims",t,e,n);return[Bh(px("x",t,e,n),r,i)]}case"Min":{const r=px("axis",t,e,n),i=px("keepDims",t,e,n);return[kh(px("x",t,e,n),r,i)]}case"Sum":{const r=px("axis",t,e,n),i=px("keepDims",t,e,n);return[ts(px("x",t,e,n),r,i)]}case"All":{const r=px("axis",t,e,n),i=px("keepDims",t,e,n);return[dc(px("x",t,e,n),r,i)]}case"Any":{const r=px("axis",t,e,n),i=px("keepDims",t,e,n);return[pc(px("x",t,e,n),r,i)]}case"ArgMax":{const r=px("axis",t,e,n);return[fc(px("x",t,e,n),r)]}case"ArgMin":{const r=px("axis",t,e,n);return[Ac(px("x",t,e,n),r)]}case"Prod":{const r=px("axis",t,e,n),i=px("keepDims",t,e,n);return[Vh(px("x",t,e,n),r,i)]}case"Cumsum":{const r=px("axis",t,e,n),i=px("exclusive",t,e,n),s=px("reverse",t,e,n);return[Gs(px("x",t,e,n),r,i,s)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}})(t,e,n));case"slice_join":return Gu(()=>((t,e,n)=>{switch(t.op){case"ConcatV2":case"Concat":{const r=px("n",t,e,n),i=px("axis",t,e,n);let s=px("tensors",t,e,n);return s=s.slice(0,r),[Va(s,i)]}case"GatherV2":case"Gather":{const r=px("axis",t,e,n),i=px("x",t,e,n),s=px("indices",t,e,n);return[dl(i,s.asType("int32"),r)]}case"ReverseV2":case"Reverse":{const r=px("axis",t,e,n),i=px("x",t,e,n);return[sa(i,r)]}case"Slice":{const r=px("begin",t,e,n),i=px("size",t,e,n);return[el(px("x",t,e,n),r,i)]}case"StridedSlice":{const r=px("begin",t,e,n),i=px("end",t,e,n),s=px("strides",t,e,n),o=px("beginMask",t,e,n),a=px("endMask",t,e,n),l=px("ellipsisMask",t,e,n),u=px("newAxisMask",t,e,n),c=px("shrinkAxisMask",t,e,n),h=px("x",t,e,n);return[xd(h,r,i,s,o,a,l,u,c)]}case"Pack":return Gu(()=>{const i=px("axis",t,e,n),s=px("tensors",t,e,n),o=s[0].shape,a=s[0].squeeze().shape,l=s.map(t=>{const e=r.arraysEqual(t.shape,o);if(!e&&!r.arraysEqual(t.squeeze().shape,a))throw new Error("the input tensors shape does not match");return e?t:t.reshape(o)});return[sl(l,i)]});case"Unpack":return Gu(()=>{const r=px("axis",t,e,n),i=px("tensor",t,e,n);return Id(i,r)});case"Tile":{const r=px("reps",t,e,n);return[co(px("x",t,e,n),r)]}case"Split":case"SplitV":{const r=px("axis",t,e,n),i=px("numOrSizeSplits",t,e,n),s=px("x",t,e,n);return Os(s,i,r)}case"ScatterNd":{const r=px("indices",t,e,n),i=px("values",t,e,n),s=px("shape",t,e,n);return[Jd(r,i,s)]}case"GatherNd":{const r=px("x",t,e,n),i=px("indices",t,e,n);return[tp(r,i)]}case"SparseToDense":{const r=px("sparseIndices",t,e,n),i=px("outputShape",t,e,n),s=px("sparseValues",t,e,n),o=px("defaultValue",t,e,n);return[Zd(r,s,i,s.dtype===o.dtype?o:o.asType(s.dtype))]}default:throw TypeError(`Node type ${t.op} is not implemented`)}})(t,e,n));case"spectral":return Gu(()=>((t,e,n)=>{switch(t.op){case"FFT":return[Jc(px("x",t,e,n))];case"IFFT":return[th(px("x",t,e,n))];case"RFFT":return[ld(px("x",t,e,n))];case"IRFFT":return[rh(px("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}})(t,e,n));case"transformation":return Gu(()=>((t,e,n)=>{switch(t.op){case"Cast":return[bi(px("x",t,e,n),px("dtype",t,e,n))];case"ExpandDims":{const r=px("axis",t,e,n);return[il(px("x",t,e,n),r)]}case"Squeeze":{const r=px("axis",t,e,n);return[vd(px("x",t,e,n),r)]}case"Reshape":return[qi(px("x",t,e,n),px("shape",t,e,n))];case"PadV2":case"Pad":return[ba(px("x",t,e,n),px("padding",t,e,n),px("constantValue",t,e,n))];case"SpaceToBatchND":{const r=px("blockShape",t,e,n),i=px("paddings",t,e,n);return[_s(px("x",t,e,n),r,i)]}case"BatchToSpaceND":{const r=px("blockShape",t,e,n),i=px("crops",t,e,n);return[Pa(px("x",t,e,n),r,i)]}case"DepthToSpace":{const r=px("blockSize",t,e,n),i=px("dataFormat",t,e,n).toUpperCase();return[Hc(px("x",t,e,n),r,i)]}case"BroadcastTo":return[Ic(px("x",t,e,n),px("shape",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}})(t,e,n));case"custom":const i=hx(t.op);if(i&&i.customExecutor)return i.customExecutor(new Gx(t,e,n));throw TypeError(`Custom op ${t.op} is not registered.`);default:throw TypeError(`Unknown op '${t.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(t,e,n);return i instanceof Promise?i.then(t=>[].concat(t)):[].concat(i)}class t_{constructor(t={},e={},n={},r={}){this.weightMap=t,this.tensorArrayMap=e,this.tensorListMap=n,this.functionMap=r,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(t,e){return{id:t,frameName:e,iterationId:0}}set currentContext(t){this.contexts!==t&&(this.contexts=t,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const t=[];for(let e=0;e<this.contexts.length-1;e++){const n=this.contexts.slice(0,this.contexts.length-e);t.push(this.contextIdforContexts(n))}t.push(""),this._currentContextIds=t}contextIdforContexts(t){return t?t.map(t=>0===t.id&&0===t.iterationId?"":`${t.frameName}-${t.iterationId}`).join("/"):""}enterFrame(t){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,t)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()}nextIteration(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");{this.contexts=this.contexts.slice(),this.lastId++;const t=Object.assign({},this.contexts[this.contexts.length-1]);t.iterationId+=1,t.id=this.lastId,this.contexts.splice(-1,1,t),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}}getWeight(t){return this.weightMap[t]}addTensorArray(t){this.tensorArrayMap[t.id]=t}getTensorArray(t){return this.tensorArrayMap[t]}addTensorList(t){this.tensorListMap[t.id]=t}getTensorList(t){return this.tensorListMap[t]}dispose(){for(const t in this.tensorArrayMap)this.tensorArrayMap[t].clearAndClose();for(const t in this.tensorListMap)this.tensorListMap[t].clearAndClose()}}function e_(t,e,n){const r=new Set,i=[];let s=null,o=null;const a=new Set,l=Object.keys(t).map(t=>gx(t)[0]),u=[...e];for(;u.length>0;){const t=u.pop();(i_(t)||s_(t))&&null==s&&(s=t,o=s.children.map(t=>t.name).filter(t=>r.has(t))),r.add(t.name),null==n[t.name]&&-1===l.indexOf(t.name)&&(0!==t.inputs.length?t.inputs.forEach(t=>{a.has(t.name)||(a.add(t.name),u.push(t))}):i.push(t.name))}return{inputs:t,outputs:e,usedNodes:r,missingInputs:i,dynamicNode:s,syncInputs:o}}const n_=["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"],r_=["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"];function i_(t){return n_.indexOf(t.op)>=0}function s_(t){return r_.indexOf(t.op)>=0}class o_{constructor(t,e){this.graph=t,this.parent=e,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this._functions={},this._functionExecutorMap={},this._outputs=t.outputs,this._inputs=t.inputs,this._signature=t.signature,this._functions=t.functions,null!=t.functions&&Object.keys(t.functions).forEach(e=>{this._functionExecutorMap[e]=new o_(t.functions[e],this)})}get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(t){const e=Object.keys(t).map(e=>t[e].map(t=>t.id));this._weightIds=[].concat(...e),this._weightMap=t}get inputs(){return this._inputs.map(t=>({name:t.name,shape:t.attrParams.shape?t.attrParams.shape.value:void 0,dtype:t.attrParams.dtype?t.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(t=>({name:t.name,shape:t.attrParams.shape?t.attrParams.shape.value:void 0,dtype:t.attrParams.dtype?t.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(t=>t.signatureKey||t.name)}get outputNodes(){return this._outputs.map(t=>{const e=t.signatureKey||t.name;return t.defaultOutput?`${e}:${t.defaultOutput}`:e})}get functions(){return Object.keys(this._functions).reduce((t,e)=>(t[e]=this._functions[e].signature,t),{})}getCompilationKey(t,e){const n=t.map(t=>t.name).sort(),r=e.map(t=>t.name).sort();return n.join(this.SEPERATOR)+"--"+r.join(this.SEPERATOR)}compile(t,e){const n=e_(t,e,this.weightMap),{missingInputs:r,dynamicNode:i,syncInputs:s}=n;if(null!=i)throw new Error(`This execution contains the node '${i.name}', which has the dynamic op '${i.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${s}]`);if(r.length>0){const n=e.map(t=>t.name),i=Object.keys(t);throw new Error(`Cannot compute the outputs [${n}] from the provided inputs [${i}]. Missing the following inputs: [${r}]`)}return function(t,e,n){const{usedNodes:r,inputs:i}=n,s=[];Object.keys(i).map(t=>gx(t)[0]).map(e=>t.nodes[e]).forEach(t=>{r.has(t.name)&&s.push(t)}),t.weights.forEach(t=>{r.has(t.name)&&s.push(t)});const o=new Set,a=[];for(;s.length>0;){const t=s.pop();o.add(t.name),e[t.name]||a.push(t),t.children.forEach(t=>{!o.has(t.name)&&r.has(t.name)&&t.inputs.every(t=>o.has(t.name))&&s.push(t)})}return a}(this.graph,this.weightMap,n)}execute(t,e){t=this.mapInputs(t);const n=Object.keys(t).sort();this.checkInputs(t),this.checkInputShapeAndType(t),e=this.mapOutputs(e),this.checkOutputs(e);const r=n.map(t=>this.graph.nodes[gx(t)[0]]),i=e.map(t=>this.graph.nodes[gx(t)[0]]),s=this.getCompilationKey(r,i);let o=this.compiledMap.get(s);null==o&&(o=this.compile(t,i),this.compiledMap.set(s,o));const a={},l={};return Gu(()=>{const n=new t_(this.weightMap,a,l,this.functionExecutorMap),r=Object.assign({},this.weightMap);Object.keys(t).forEach(e=>{const[n,i]=gx(e),s=[];s[i]=t[e],r[n]=s});const i=this.getFrozenTensorIds(r),s={};for(let t=0;t<o.length;t++){const a=o[t];if(!r[a.name]){const t=Zx(a,r,n);if(t instanceof Promise)throw new Error(`The execution of the op '${a.op}' returned a promise. Please use model.executeAsync() instead.`);r[a.name]=t,this.checkTensorForDisposal(a.name,a,r,n,i,e,s)}}return null==this.parent&&n.dispose(),e.map(t=>fx(t,r,n))})}getFrozenTensorIds(t){const e=[].concat.apply([],Object.keys(t).map(e=>t[e]).map(t=>t.map(t=>t.id)));return new Set(e)}checkTensorForDisposal(t,e,n,r,i,s,o){"control"!==e.category&&-1===s.indexOf(t)&&(n[t].forEach(t=>{null!=t&&(o[t.id]=(o[t.id]||0)+e.children.length)}),e.inputs.forEach(t=>{if("control"!==t.category){const e=function(t,e,n){return e[mx(t,n.currentContextId)]}(t.name,n,r);null!=e&&e.forEach(t=>{if(t&&!i.has(t.id)){const e=o[t.id];1===e?(t.dispose(),delete o[t.id]):null!=e&&o[t.id]--}})}}))}async executeAsync(t,e){return this._executeAsync(t,e)}async _executeAsync(t,e,n=!1,r={},i={}){n||(t=this.mapInputs(t),this.checkInputs(t),this.checkInputShapeAndType(t),e=this.mapOutputs(e),this.checkOutputs(e));const s=new t_(this.weightMap,r,i,this.functionExecutorMap),o=await this.executeWithControlFlow(t,s,e,n),a=e.map(t=>fx(t,o,s)),l=new Set(a.map(t=>t.id)),u=new Set(Object.keys(t).map(e=>t[e].id));return Object.keys(o).forEach(t=>{o[t].forEach(t=>{!t||t.isDisposed||l.has(t.id)||u.has(t.id)||-1!==this.weightIds.indexOf(t.id)||t.dispose()})}),null==this.parent&&s.dispose(),a}async executeFunctionAsync(t,e,n){const r=t.reduce((t,e,n)=>(t[this.inputs[n].name]=e,t),{});return this._executeAsync(r,this.outputNodes,!0,e,n)}async executeWithControlFlow(t,e,n,r){const i=Object.keys(t),s=i.map(t=>this.graph.nodes[gx(t)[0]]),o=n.map(t=>this.graph.nodes[gx(t)[0]]),{usedNodes:a,missingInputs:l,dynamicNode:u,syncInputs:c}=e_(t,o,this.weightMap),h=[...s,...this.graph.weights].map(t=>({node:t,contexts:e.currentContext})),d=Object.assign({},this.weightMap);Object.keys(t).forEach(e=>{const[n,r]=gx(e),i=[];i[r]=t[e],d[n]=i});const p={},f=this.getFrozenTensorIds(d),A={};for(;h.length>0;){const t=this.processStack(s,h,e,d,A,f,n,p,a);await Promise.all(t)}null!=u||r||console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const m=o.filter(t=>!i_(t)&&!fx(t.name,d,e)).map(t=>t.name);if(m.length>0){let t="";throw null!=u&&(t=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${c}]`),new Error(`Cannot compute the outputs [${m}] from the provided inputs [${i}]. Consider providing the following inputs: [${l}]. ${t}`)}return d}processStack(t,e,n,r,i,s,o,a,l){const u=[];for(;e.length>0;){const c=e.pop();n.currentContext=c.contexts;let h="";if("Enter"===c.node.op&&px("isConstant",c.node,r,n)&&([h]=Ax(c.node.name,n)),-1===t.indexOf(c.node)){const t=Zx(c.node,r,n);h||([h]=Ax(c.node.name,n));const d=n.currentContext;t instanceof Promise?u.push(t.then(t=>(r[h]=t,n.currentContext=d,this.checkTensorForDisposal(h,c.node,r,n,s,o,a),this.processChildNodes(c.node,e,n,r,i,l),t))):(r[h]=t,this.checkTensorForDisposal(h,c.node,r,n,s,o,a),this.processChildNodes(c.node,e,n,r,i,l))}else this.processChildNodes(c.node,e,n,r,i,l)}return u}processChildNodes(t,e,n,r,i,s){t.children.forEach(t=>{const[o]=Ax(t.name,n);!i[o]&&s.has(t.name)&&("Merge"===t.op?t.inputNames.some(t=>!!fx(t,r,n))&&(i[o]=!0,e.push({contexts:n.currentContext,node:t})):t.inputNames.every(t=>!!fx(t,r,n))&&(i[o]=!0,e.push({contexts:n.currentContext,node:t})))})}dispose(){Object.keys(this.weightMap).forEach(t=>this.weightMap[t].forEach(t=>t.dispose()))}checkInputShapeAndType(t){Object.keys(t).forEach(e=>{const n=t[e],[i]=gx(e),s=this.graph.nodes[i];if(s.attrParams.shape&&s.attrParams.shape.value){const t=s.attrParams.shape.value,e=t.length===n.shape.length&&n.shape.every((e,n)=>-1===t[n]||t[n]===e);r.assert(e,()=>`The shape of dict['${s.name}'] provided in model.execute(dict) must be [${t}], but was [${n.shape}]`)}s.attrParams.dtype&&s.attrParams.dtype.value&&r.assert(n.dtype===s.attrParams.dtype.value,()=>`The dtype of dict['${s.name}'] provided in model.execute(dict) must be ${s.attrParams.dtype.value}, but was ${n.dtype}`)})}mapInputs(t){const e={};for(const n in t)null!=this._signature&&null!=this._signature.inputs&&null!=this._signature.inputs[n]?e[this._signature.inputs[n].name]=t[n]:e[n]=t[n];return e}checkInputs(t){const e=Object.keys(t).filter(t=>{const[e]=gx(t);return null==this.graph.nodes[e]});if(e.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${e}] that are not part of graph`)}mapOutputs(t){return t.map(t=>null!=this._signature&&null!=this._signature.outputs&&null!=this._signature.outputs[t]?this._signature.outputs[t].name:t,{})}checkOutputs(t){t.forEach(t=>{const[e]=gx(t);if(!this.graph.nodes[e])throw new Error(`The output '${t}' is not found in the graph`)})}}class a_{constructor(t,e={}){this.modelUrl=t,this.loadOptions=e,this.version="n/a",null==e&&(this.loadOptions={})}get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}findIOHandler(){const t=this.modelUrl;if(null!=t.load)this.handler=t;else if(null!=this.loadOptions.requestInit)this.handler=l.browserHTTPRequest(t,this.loadOptions);else{const e=l.getLoadHandlers(t,this.loadOptions);if(0===e.length)e.push(l.browserHTTPRequest(t,this.loadOptions));else if(e.length>1)throw new Error(`Found more than one (${e.length}) load handlers for URL '${[t]}'`);this.handler=e[0]}}async load(){if(this.findIOHandler(),null==this.handler.load)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const t=await this.handler.load();return this.loadSync(t)}loadSync(t){this.artifacts=t;const e=this.artifacts.modelTopology;let n={};null!=this.artifacts.userDefinedMetadata&&(n=this.artifacts.userDefinedMetadata.signature),this.version=`${e.versions.producer}.${e.versions.minConsumer}`;const r=l.decodeWeights(this.artifacts.weightData,this.artifacts.weightSpecs);return this.executor=new o_(class{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const t=[].concat(...[S,E,B,k,N,I,F,O,R,T,D,L,M,U,P,z].map(t=>t.json));this.opMappers=t.reduce((t,e)=>(t[e.tfOpName]=e,t),{})}transformGraph(t,e={}){const n=[],r=[],i=t.node.reduce((t,e)=>(t[e.name]=this.mapNode(e),e.op.startsWith("Placeholder")&&n.push(t[e.name]),"Const"===e.op&&r.push(t[e.name]),t),{});let s=[];const o=[];let a={},l={};null!=e&&(a=this.mapSignatureEntries(e.inputs),l=this.mapSignatureEntries(e.outputs));const u=Object.keys(i);u.forEach(t=>{const e=i[t];e.inputNames.forEach(t=>{const[n]=Ax(t);e.inputs.push(i[n]),i[n].children.push(e)})}),0===Object.keys(l).length?u.forEach(t=>{const e=i[t];0===e.children.length&&o.push(e)}):Object.keys(l).forEach(t=>{const[e]=Ax(t),n=i[e];null!=n&&(n.signatureKey=l[t],o.push(n))}),Object.keys(a).length>0?Object.keys(a).forEach(t=>{const[e]=Ax(t),n=i[e];n&&(n.signatureKey=a[t],s.push(n))}):s=n;let c={};return null!=t.library&&null!=t.library.function&&(c=t.library.function.reduce((t,e)=>(t[e.signature.name]=this.mapFunction(e),t),{})),{nodes:i,inputs:s,outputs:o,weights:r,placeholders:n,signature:e,functions:c}}mapSignatureEntries(t){return Object.keys(t||{}).reduce((e,n)=>(e[t[n].name]=n,e),{})}mapNode(t){const e=hx(t.op)||this.opMappers[t.op]||{};null==t.attr&&(t.attr={});const n={name:t.name,op:t.op,category:e.category,inputNames:(t.input||[]).map(t=>t.startsWith("^")?t.substr(1):t),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:t.attr};return null!=e.inputs&&(n.inputParams=e.inputs.reduce((t,e)=>(t[e.name]={type:e.type,inputIndexStart:e.start,inputIndexEnd:e.end},t),{})),null!=e.attrs&&(n.attrParams=e.attrs.reduce((e,n)=>{const r=n.type;let i=void 0;switch(n.type){case"string":i=Lx(t.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=Lx(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"string[]":i=jx(t.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=jx(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"number":i=Ux(t.attr,n.tfName,n.defaultValue||0),void 0===i&&n.tfDeprecatedName&&(i=Ux(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"number[]":i=qx(t.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=qx(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool":i=Mx(t.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=Mx(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool[]":i=Wx(t.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=Wx(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape":i=Vx(t.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=Vx(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape[]":i=Kx(t.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=Kx(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype":i=Qx(t.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=Qx(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype[]":i=Hx(t.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=Hx(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"func":i=zx(t.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=zx(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${n.type} for op: ${t.op}`)}return e[n.name]={value:i,type:r},e},{})),n}mapFunction(t){const e=t.nodeDef,n=[];let r={};null!=e&&(r=e.reduce((t,e)=>(t[e.name]=this.mapNode(e),"Const"===e.op&&n.push(t[e.name]),t),{}));const i=[],s=[];t.signature.inputArg.forEach(t=>{const[e]=Ax(t.name),n={name:e,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:Px(t.type),type:"dtype"}},children:[]};n.signatureKey=t.name,i.push(n),r[e]=n}),Object.keys(r).forEach(t=>{const e=r[t];e.inputNames.forEach(t=>{const[n]=Ax(t);e.inputs.push(r[n]),r[n].children.push(e)})});const o=t.ret;t.signature.outputArg.forEach(t=>{const[e,n]=Ax(o[t.name]),i=r[e];null!=i&&(i.defaultOutput=n,s.push(i))});const a=this.mapArgsToSignature(t);return{nodes:r,inputs:i,outputs:s,weights:n,placeholders:[],signature:a}}mapArgsToSignature(t){return{methodName:t.signature.name,inputs:t.signature.inputArg.reduce((t,e)=>(t[e.name]=this.mapArgToTensorInfo(e),t),{}),outputs:t.signature.outputArg.reduce((e,n)=>(e[n.name]=this.mapArgToTensorInfo(n,t.ret),e),{})}}mapArgToTensorInfo(t,e){let n=t.name;return null!=e&&(n=e[n]),{name:n,dtype:t.type}}}.Instance.transformGraph(e,n)),this.executor.weightMap=this.convertTensorMapToTensorsMap(r),!0}async save(t,e){if("string"==typeof t){const e=l.getSaveHandlers(t);if(0===e.length)throw new Error(`Cannot find any save handlers for URL '${t}'`);if(e.length>1)throw new Error(`Found more than one (${e.length}) save handlers for URL '${t}'`);t=e[0]}if(null==t.save)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return t.save(this.artifacts)}predict(t,e){return this.execute(t,this.outputNodes)}normalizeInputs(t){if(!(t instanceof ue||Array.isArray(t)))return t;if((t=Array.isArray(t)?t:[t]).length!==this.inputNodes.length)throw new Error(`Input tensor count mismatch,the graph model has ${this.inputNodes.length} placeholders, while there are ${t.length} input tensors.`);return this.inputNodes.reduce((e,n,r)=>(e[n]=t[r],e),{})}normalizeOutputs(t){return t=t||this.outputNodes,Array.isArray(t)?t:[t]}execute(t,e){t=this.normalizeInputs(t),e=this.normalizeOutputs(e);const n=this.executor.execute(t,e);return n.length>1?n:n[0]}async executeAsync(t,e){t=this.normalizeInputs(t),e=this.normalizeOutputs(e);const n=await this.executor.executeAsync(t,e);return n.length>1?n:n[0]}convertTensorMapToTensorsMap(t){return Object.keys(t).reduce((e,n)=>(e[n]=[t[n]],e),{})}dispose(){this.executor.dispose()}}async function l_(t,e={}){if(null==t)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");null==e&&(e={}),e.fromTFHub&&null==t.load&&(t.endsWith("/")||(t+="/"),t+="model.json?tfjs-format=file");const n=new a_(t,e);return await n.load(),n}const u_="2.1.0";function c_(t,e,n=new Map,r=new Set){if(null==t)return null;if(r.has(t))throw new Error("Circular references are not supported.");if(n.has(t))return n.get(t);const i=e(t);if(i.recurse&&null!==i.value)throw new Error("A deep map function may not return both a value and recurse=true.");if(i.recurse){if(p_(t)){const i=Array.isArray(t)?[]:{};r.add(t);for(const s in t){const o=c_(t[s],e,n,r);i[s]=o}return r.delete(t),i}throw new Error("Can't recurse into non-iterable type: "+t)}return n.set(t,i.value),i.value}function h_(t){return null===t?null:p_(t[0])?{value:null,recurse:!0}:{value:t,recurse:!1}}async function d_(t,e){const n=new Map;c_(t,e,n);for(const r of Array.from(n.keys())){const t=n.get(r);if(t instanceof Promise){const e=await t;n.set(r,e)}}return c_(t,e,n)}function p_(t){return null!=t&&!ArrayBuffer.isView(t)&&(Array.isArray(t)||"object"==typeof t&&!(t instanceof ue))}function f_(t){return t instanceof ue?{value:t.clone(),recurse:!1}:p_(t)?{value:null,recurse:!0}:{value:t,recurse:!1}}class A_{constructor(t){if(this.capacity=t,this.begin=0,this.end=0,null==t)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(t<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(t),this.doubledCapacity=2*t}wrap(t){for(;t<0;)t+=this.doubledCapacity;return t%this.doubledCapacity}get(t){if(t<0)throw new RangeError("Can't get item at a negative index.");return this.data[t%this.capacity]}set(t,e){if(t<0)throw new RangeError("Can't set item at a negative index.");this.data[t%this.capacity]=e}length(){let t=this.end-this.begin;return t<0&&(t=this.doubledCapacity+t),t}isFull(){return this.length()===this.capacity}isEmpty(){return 0===this.length()}push(t){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,t),this.end=this.wrap(this.end+1)}pushAll(t){for(const e of t)this.push(e)}pop(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);const t=this.get(this.end);return this.set(this.end,void 0),t}unshift(t){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,t)}shift(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");const t=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),t}shuffleExcise(t){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");const e=this.wrap(this.begin+t),n=this.get(e);return this.set(e,this.pop()),n}}class m_ extends A_{constructor(){super(m_.INITIAL_CAPACITY)}isFull(){return!1}push(t){super.isFull()&&this.expand(),super.push(t)}unshift(t){super.isFull()&&this.expand(),super.unshift(t)}expand(){const t=2*this.capacity,e=new Array(t),n=this.length();for(let r=0;r<n;r++)e[r]=this.get(this.wrap(this.begin+r));this.data=e,this.capacity=t,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=n}}function g_(t){return new b_(t)}function y_(t){return new v_(t)}m_.INITIAL_CAPACITY=32;class w_{async toArray(){const t=[];let e=await this.next();for(;!e.done;)t.push(e.value),e=await this.next();return t}async toArrayForTest(){const t=this.prefetch(100),e=[];let n=await t.next();for(;!n.done;)e.push(n.value),n=await t.next();return e}async resolveFully(){let t=await this.next();for(;!t.done;)t=await this.next()}async resolveWhile(t){let e=await this.next(),n=t(e.value);for(;!e.done&&n;)e=await this.next(),n=t(e.value)}handleErrors(t){return new k_(this,t)}filter(t){return new E_(this,t)}map(t){return new B_(this,t)}mapAsync(t){return new N_(this,t)}serialMapAsync(t){return new N_(this,t).serial()}flatmap(t){return new F_(this,t)}async forEachAsync(t){return this.map(t).resolveFully()}async serialForEach(t){return this.serialMapAsync(t).resolveWhile(t=>!0===t)}rowMajorBatch(t,e=!0){return new S_(this,t,e)}columnMajorBatch(t,e=!0,n=h_){return this.rowMajorBatch(t,e).map(t=>function(t,e=h_){return function t(e,n,r=new Set){const i=e[0];if(r.has(i))throw new Error("Circular references are not supported.");const s=n(e);if(s.recurse&&null!==s.value)throw new Error("A deep zip function may not return both a value and recurse=true.");if(s.recurse){if(p_(i)){const s=Array.isArray(i)?[]:{};r.add(i);for(const o in i){const i=t(e.map(t=>t[o]),n,r);s[o]=i}return r.delete(i),s}throw new Error("Can't recurse into non-iterable type: "+i)}return s.value}(t,e)}(t,n))}concatenate(t,e){return new T_(g_([this,t]),e)}take(t){return t<0||null==t?this:new C_(this,t)}skip(t){return t<0||null==t?this:new __(this,t)}prefetch(t){return new D_(this,t)}shuffle(t,e){return new L_(this,t,e)}serial(){return new x_(this)}}class b_ extends w_{constructor(t){super(),this.items=t,this.trav=0}summary(){return`Array of ${this.items.length} items`}async next(){if(this.trav>=this.items.length)return{value:null,done:!0};const t=this.items[this.trav];return this.trav++,{value:(e=t,c_(e,f_)),done:!1};var e}}class v_ extends w_{constructor(t){super(),this.nextFn=t}summary(){return"Function call"}async next(){try{return this.nextFn()}catch(t){throw t.message="Error thrown while iterating through a dataset: "+t.message,t}}}class x_ extends w_{constructor(t){super(),this.upstream=t,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return this.upstream.summary()+" -> Serial"}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){return this.upstream.next()}}class __ extends w_{constructor(t,e){super(),this.upstream=t,this.maxCount=e,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return this.upstream.summary()+" -> Skip"}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;this.count++<this.maxCount;){const t=await this.upstream.next();if(t.done)return t;Xu(t.value)}return this.upstream.next()}}class C_ extends w_{constructor(t,e){super(),this.upstream=t,this.maxCount=e,this.count=0}summary(){return this.upstream.summary()+" -> Take"}async next(){return this.count++>=this.maxCount?{value:null,done:!0}:this.upstream.next()}}class S_ extends w_{constructor(t,e,n=!0){super(),this.upstream=t,this.batchSize=e,this.enableSmallLastBatch=n,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return this.upstream.summary()+" -> RowMajorBatch"}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){const t=[];for(;t.length<this.batchSize;){const e=await this.upstream.next();if(e.done)return this.enableSmallLastBatch&&t.length>0?{value:t,done:!1}:{value:null,done:!0};t.push(e.value)}return{value:t,done:!1}}}class E_ extends w_{constructor(t,e){super(),this.upstream=t,this.predicate=e,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return this.upstream.summary()+" -> Filter"}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;;){const t=await this.upstream.next();if(t.done||this.predicate(t.value))return t;Xu(t.value)}}}class B_ extends w_{constructor(t,e){super(),this.upstream=t,this.transform=e}summary(){return this.upstream.summary()+" -> Map"}async next(){const t=await this.upstream.next();if(t.done)return{value:null,done:!0};const e=i.getTensorsInContainer(t.value),n=this.transform(t.value),r=i.getTensorsInContainer(n);for(const s of e)i.isTensorInList(s,r)||s.dispose();return{value:n,done:!1}}}class k_ extends w_{constructor(t,e){super(),this.upstream=t,this.handler=e,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return this.upstream.summary()+" -> handleErrors"}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;;)try{return await this.upstream.next()}catch(t){if(!this.handler(t))return{value:null,done:!0}}}}class N_ extends w_{constructor(t,e){super(),this.upstream=t,this.transform=e}summary(){return this.upstream.summary()+" -> AsyncMap"}async next(){const t=await this.upstream.next();if(t.done)return{value:null,done:!0};const e=i.getTensorsInContainer(t.value),n=await this.transform(t.value),r=i.getTensorsInContainer(n);for(const s of e)i.isTensorInList(s,r)||s.dispose();return{value:n,done:!1}}}class I_ extends w_{constructor(){super(),this.outputQueue=new m_,this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;0===this.outputQueue.length();)if(!(await this.pump()))return{value:null,done:!0};return{value:this.outputQueue.shift(),done:!1}}}class F_ extends I_{constructor(t,e){super(),this.upstream=t,this.transform=e}summary(){return this.upstream.summary()+" -> Flatmap"}async pump(){const t=await this.upstream.next();if(t.done)return!1;const e=i.getTensorsInContainer(t.value),n=this.transform(t.value),r=i.getTensorsInContainer(n);this.outputQueue.pushAll(n);for(const s of e)i.isTensorInList(s,r)||s.dispose();return!0}}class T_ extends w_{constructor(t,e){super(),this.baseErrorHandler=e,this.lastRead=null,this.iterator=null,this.moreIterators=t}summary(){return"TODO: fill in upstream of chained summaries -> Chained"}async next(){return this.lastRead=this.readFromChain(this.lastRead),this.lastRead}async readFromChain(t){if(await t,null==this.iterator){const t=await this.moreIterators.next();if(t.done)return{value:null,done:!0};this.iterator=t.value,null!=this.baseErrorHandler&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler))}const e=await this.iterator.next();return e.done?(this.iterator=null,this.readFromChain(t)):e}}var R_;!function(t){t[t.FAIL=0]="FAIL",t[t.SHORTEST=1]="SHORTEST",t[t.LONGEST=2]="LONGEST"}(R_||(R_={}));class O_ extends w_{constructor(t,e=R_.FAIL){super(),this.iterators=t,this.mismatchMode=e,this.count=0,this.currentPromise=null}summary(){return"{TODO: fill in upstream of zip summaries} -> Zip"}async nextState(t){await t;let e=0,n=0;const r=await d_(this.iterators,(function(t){return t instanceof w_?{value:t.next().then(t=>(e++,t.done&&n++,t.value)),recurse:!1}:{value:null,recurse:!0}}));if(e===n)return{value:null,done:!0};if(n>0)switch(this.mismatchMode){case R_.FAIL:throw new Error(`Zipped streams should have the same length. Mismatched at element ${this.count}.`);case R_.SHORTEST:return{value:null,done:!0}}return this.count++,{value:r,done:!1}}async next(){return this.currentPromise=this.nextState(this.currentPromise),this.currentPromise}}class D_ extends w_{constructor(t,e){super(),this.upstream=t,this.bufferSize=e,this.buffer=new A_(e)}summary(){return this.upstream.summary()+" -> Prefetch"}refill(){for(;!this.buffer.isFull();){const t=this.upstream.next();this.buffer.push(t)}}next(){return this.refill(),this.buffer.shift()}}class L_ extends D_{constructor(t,e,n){super(t,e),this.upstream=t,this.windowSize=e,this.upstreamExhausted=!1,this.random=jh.alea(n||r.now().toString()),this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}randomInt(t){return Math.floor(this.random()*t)}chooseIndex(){return this.randomInt(this.buffer.length())}async serialNext(){for(this.upstreamExhausted||this.refill();!this.buffer.isEmpty();){const t=this.chooseIndex(),e=await this.buffer.shuffleExcise(t);if(!e.done)return this.refill(),e;this.upstreamExhausted=!0}return{value:null,done:!0}}}class M_{constructor(){this.size=null}batch(t,e=!0){const n=this;let i;return r.assert(t>0,()=>"batchSize needs to be positive, but it is\n      "+t),i=this.size===1/0||null==this.size?this.size:e?Math.ceil(this.size/t):Math.floor(this.size/t),U_(async()=>(await n.iterator()).columnMajorBatch(t,e,Q_),i)}concatenate(t){const e=this;let n;return n=this.size===1/0||t.size===1/0?1/0:null!=this.size&&null!=t.size?this.size+t.size:null,U_(async()=>(await e.iterator()).concatenate(await t.iterator()),n)}filter(t){const e=this;let n;return n=this.size===1/0?1/0:null,U_(async()=>(await e.iterator()).filter(e=>Gu(()=>t(e))),n)}async forEachAsync(t){return(await this.iterator()).forEachAsync(t)}map(t){const e=this;return U_(async()=>(await e.iterator()).map(e=>Gu(()=>t(e))),this.size)}mapAsync(t){const e=this;return U_(async()=>(await e.iterator()).mapAsync(t),this.size)}prefetch(t){if(null==t)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");const e=this;return U_(async()=>(await e.iterator()).prefetch(t),this.size)}repeat(t){const e=this;let n;return n=null!=this.size&&t>0?this.size*t:0===t?0:null!=this.size&&(void 0===t||t<0)?1/0:null,U_(async()=>{return n=y_(async()=>({value:await e.iterator(),done:!1})).take(t),new T_(n,void 0);var n},n)}skip(t){const e=this;let n;return n=null!=this.size&&t>=0&&this.size>=t?this.size-t:null!=this.size&&(this.size<t||void 0===t||t<0)?0:null,U_(async()=>(await e.iterator()).skip(t),n)}shuffle(t,e,n=!0){if(null==t||t<0)throw null==this.size?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError(`\`Dataset.shuffle()\` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for \`tf.Tensor\`s), consider setting bufferSize to the dataset size (${this.size} elements)`);const i=this,s=jh.alea(e||r.now().toString());return U_(async()=>{let e=s.int32();return n&&(e+=s.int32()),(await i.iterator()).shuffle(t,e.toString())},this.size)}take(t){const e=this;let n;return n=null!=this.size&&this.size>t?t:null!=this.size&&this.size<=t?this.size:null,U_(async()=>(await e.iterator()).take(t),n)}async toArray(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArray()}async toArrayForTest(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArrayForTest()}}function U_(t,e=null){return new class extends M_{constructor(){super(...arguments),this.size=e}async iterator(){return t()}}}function P_(t){return U_(async()=>g_(t),t.length)}function z_(t){if(!p_(t))throw new Error("The argument to zip() must be an object or array.");let e;if(Array.isArray(t))for(let n=0;n<t.length;n++)e=null==e?t[n].size:Math.min(e,t[n].size);else if(t instanceof Object)for(const n in t)e=null==e?t[n].size:Math.min(e,t[n].size);return U_(async()=>function(t,e=R_.FAIL){return new O_(t,e)}(await d_(t,t=>{if(t instanceof M_)return{value:t.iterator(),recurse:!1};if(p_(t))return{value:null,recurse:!0};throw new Error("Leaves of the structure passed to zip() must be Datasets, not primitives.")}),R_.SHORTEST),e)}function Q_(t){return null===t?null:null==(e=t[0])||null===(n=e)||"object"!=typeof n&&"function"!=typeof n||Array.isArray(e)||"object"==typeof e&&e instanceof ue||r.isTypedArray(e)?{value:function(t){if(0===t.length)throw new Error("Can't make a batch of zero elements.");return t[0]instanceof ue?sl(t):$a(t)}(t),recurse:!1}:{value:null,recurse:!0};var e,n}M_.MAX_BUFFER_SIZE=1e4;class H_ extends M_{constructor(t){super(),this.input=t}async iterator(){return(await this.input.iterator()).decodeUTF8().split("\n").map(t=>(t.endsWith("\r")&&(t=t.slice(0,-1)),t))}}const $_=Symbol("out"),V_=Symbol("field"),q_=Symbol("quote"),j_=Symbol("quoteafterquote"),K_=Symbol("quoteinquote");class W_ extends M_{constructor(t,e){super(),this.input=t,this.hasHeader=!0,this.fullColumnNames=null,this.columnNamesValidated=!1,this.columnConfigs=null,this.configuredColumnsOnly=!1,this.delimiter=",",this.delimWhitespace=!1,this.base=new H_(t),e||(e={}),this.hasHeader=!1!==e.hasHeader,this.fullColumnNames=e.columnNames,this.columnConfigs=e.columnConfigs,this.configuredColumnsOnly=e.configuredColumnsOnly,e.delimWhitespace?(r.assert(null==e.delimiter,()=>"Delimiter should not be provided when delimWhitespace is true."),this.delimWhitespace=!0,this.delimiter=" "):this.delimiter=e.delimiter?e.delimiter:","}async columnNames(){return this.columnNamesValidated||await this.setColumnNames(),this.configuredColumnsOnly?Object.keys(this.columnConfigs):this.fullColumnNames}async setColumnNames(){const t=await this.maybeReadHeaderLine();if(!this.fullColumnNames&&!t)throw new Error("Column names must be provided if there is no header line.");this.fullColumnNames&&t&&r.assert(t.length===this.fullColumnNames.length,()=>"The length of provided columnNames ("+this.fullColumnNames.length.toString()+") does not match the length of the header line read from file ("+t.length.toString()+")."),this.fullColumnNames||(this.fullColumnNames=t);const e=this.fullColumnNames.reduce((t,e)=>(t[e]=t[e]+1||1,t),{}),n=Object.keys(e).filter(t=>e[t]>1);if(r.assert(0===n.length,()=>"Duplicate column names found: "+n.toString()),this.columnConfigs)for(const r of Object.keys(this.columnConfigs))if(-1===this.fullColumnNames.indexOf(r))throw new Error('The key "'+r+'" provided in columnConfigs does not match any of the column names ('+this.fullColumnNames.toString()+").");this.columnNamesValidated=!0}async maybeReadHeaderLine(){if(this.hasHeader){const t=await this.base.iterator(),e=await t.next();if(e.done)throw new Error("No data was found for CSV parsing.");return this.parseRow(e.value,!1)}return null}async iterator(){this.columnNamesValidated||await this.setColumnNames();let t=await this.base.iterator();return this.hasHeader&&(t=t.skip(1)),t.map(t=>this.makeDataElement(t))}makeDataElement(t){const e=this.parseRow(t),n={},r={};for(let i=0;i<this.fullColumnNames.length;i++){const s=this.fullColumnNames[i],o=this.columnConfigs?this.columnConfigs[s]:null;if(!this.configuredColumnsOnly||o){const a=e[i];let l=null;if(""===a)if(o&&void 0!==o.default)l=o.default;else{if(o&&(o.required||o.isLabel))throw new Error(`Required column ${s} is empty in this line: ${t}`);l=void 0}else{const t=Number(a);if(isNaN(t))l=o&&"bool"===o.dtype?this.getBoolean(a):a;else if(o&&o.dtype)switch(o.dtype){case"float32":l=t;break;case"int32":l=Math.floor(t);break;case"bool":l=this.getBoolean(a);break;default:l=t}else l=t}o&&o.isLabel?r[s]=l:n[s]=l}}return 0===Object.keys(r).length?n:{xs:n,ys:r}}getBoolean(t){return"1"===t||"true"===t.toLowerCase()?1:0}parseRow(t,e=!0){const n=[];let r=0;const i=t.length;let s=$_;for(let o=0;o<i;o++)switch(s){case $_:switch(t.charAt(o)){case'"':r=o+1,s=q_;break;case this.delimiter:if(r=o+1," "===this.delimiter&&this.delimWhitespace)break;n.push(""),s=$_;break;default:s=V_,r=o}break;case V_:switch(t.charAt(o)){case this.delimiter:n.push(t.substring(r,o)),s=$_,r=o+1}break;case q_:switch(t.charAt(o)){case'"':s=j_}break;case j_:switch(t.charAt(o)){case this.delimiter:n.push(t.substring(r,o-1)),s=$_,r=o+1;break;case'"':s=q_;break;default:s=K_}break;case K_:switch(t.charAt(o)){case'"':s=q_}}if(n.push(s===j_?t.substring(r,i-1):t.substring(r)),e&&n.length!==this.fullColumnNames.length)throw new Error(`Invalid row in csv file. Should have ${this.fullColumnNames.length} elements in a row, but got ${n}`);return n}}class G_ extends w_{constructor(t){super(),this.microphoneConfig=t,this.isClosed=!1,this.fftSize=t.fftSize||1024;const e=Math.log2(this.fftSize);if(this.fftSize<0||e<4||e>14||!Number.isInteger(e))throw new Error("Invalid fftSize: it must be a power of 2 between 2 to 4 and 2 to 14, but got "+this.fftSize);if(this.numFrames=t.numFramesPerSpectrogram||43,this.sampleRateHz=t.sampleRateHz,this.columnTruncateLength=t.columnTruncateLength||this.fftSize,this.audioTrackConstraints=t.audioTrackConstraints,this.smoothingTimeConstant=t.smoothingTimeConstant||0,this.includeSpectrogram=!1!==t.includeSpectrogram,this.includeWaveform=!0===t.includeWaveform,!this.includeSpectrogram&&!this.includeWaveform)throw new Error("Both includeSpectrogram and includeWaveform are false. At least one type of data should be returned.")}summary(){return"microphone"}static async create(t={}){if(V().get("IS_NODE"))throw new Error("microphone API is only supported in browser environment.");const e=new G_(t);return await e.start(),e}async start(){try{this.stream=await navigator.mediaDevices.getUserMedia({audio:null==this.audioTrackConstraints||this.audioTrackConstraints,video:!1})}catch(n){throw new Error("Error thrown while initializing video stream: "+n.message)}if(!this.stream)throw new Error("Could not obtain audio from microphone.");const t=window.AudioContext||window.webkitAudioContext;if(this.audioContext=new t,this.sampleRateHz){if(this.audioContext.sampleRate!==this.sampleRateHz)throw new Error(`Mismatch in sampling rate: Expected: ${this.sampleRateHz}; Actual: `+this.audioContext.sampleRate)}else this.sampleRateHz=this.audioContext.sampleRate;const e=this.audioContext.createMediaStreamSource(this.stream);this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=2*this.fftSize,this.analyser.smoothingTimeConstant=this.smoothingTimeConstant,e.connect(this.analyser),this.freqData=new Float32Array(this.fftSize),this.timeData=new Float32Array(this.fftSize)}async next(){if(this.isClosed)return{value:null,done:!0};let t,e;const n=await this.getAudioData();if(this.includeSpectrogram){const e=this.flattenQueue(n.freqDataQueue);t=this.getTensorFromAudioDataArray(e,[this.numFrames,this.columnTruncateLength,1])}if(this.includeWaveform){const t=this.flattenQueue(n.timeDataQueue);e=this.getTensorFromAudioDataArray(t,[this.numFrames*this.fftSize,1])}return{value:{spectrogram:t,waveform:e},done:!1}}async capture(){return(await this.next()).value}async getAudioData(){const t=[],e=[];let n=0;return new Promise(r=>{const i=setInterval(()=>{this.includeSpectrogram&&(this.analyser.getFloatFrequencyData(this.freqData),this.freqData[0]===-1/0&&r({freqDataQueue:t,timeDataQueue:e}),t.push(this.freqData.slice(0,this.columnTruncateLength))),this.includeWaveform&&(this.analyser.getFloatTimeDomainData(this.timeData),e.push(this.timeData.slice())),++n===this.numFrames&&(clearInterval(i),r({freqDataQueue:t,timeDataQueue:e}))},this.fftSize/this.sampleRateHz*1e3)})}stop(){this.isClosed||(this.isClosed=!0,this.analyser.disconnect(),this.audioContext.close(),null!=this.stream&&this.stream.getTracks().length>0&&this.stream.getTracks()[0].stop())}toArray(){throw new Error("Can not convert infinite audio stream to array.")}getSampleRate(){return this.sampleRateHz}flattenQueue(t){const e=t[0].length,n=new Float32Array(t.length*e);return t.forEach((t,r)=>n.set(t,r*e)),n}getTensorFromAudioDataArray(t,e){const n=new Float32Array(r.sizeFromShape(e));return n.set(t,n.length-t.length),$a(n,e)}}class X_ extends w_{constructor(t,e){if(super(),this.webcamVideoElement=t,this.webcamConfig=e,this.isClosed=!0,this.resize=!1,this.needToResize())if(this.resize=!0,this.cropSize=[this.webcamConfig.resizeHeight,this.webcamConfig.resizeWidth],this.cropBoxInd=Zh([0],"int32"),this.webcamConfig.centerCrop){const t=1*this.webcamConfig.resizeWidth/this.webcamVideoElement.width,e=1*this.webcamConfig.resizeHeight/this.webcamVideoElement.height,n=(1-t)/2,r=(1-e)/2;this.cropBox=Cd([r,n,e+r,n+t],[1,4])}else this.cropBox=Cd([0,0,1,1],[1,4])}summary(){return"webcam"}static async create(t,e={}){if(V().get("IS_NODE"))throw new Error("tf.data.webcam is only supported in browser environment.");if(!t){if(t=document.createElement("video"),!e.resizeWidth||!e.resizeHeight)throw new Error("Please provide webcam video element, or resizeWidth and resizeHeight to create a hidden video element.");t.width=e.resizeWidth,t.height=e.resizeHeight}const n=new X_(t,e);return await n.start(),n}async start(){this.webcamConfig.facingMode&&r.assert("user"===this.webcamConfig.facingMode||"environment"===this.webcamConfig.facingMode,()=>`Invalid webcam facing mode: ${this.webcamConfig.facingMode}. Please provide 'user' or 'environment'`);try{this.stream=await navigator.mediaDevices.getUserMedia({video:{deviceId:this.webcamConfig.deviceId,facingMode:this.webcamConfig.facingMode?this.webcamConfig.facingMode:"user",width:this.webcamVideoElement.width,height:this.webcamVideoElement.height}})}catch(t){throw t.message="Error thrown while initializing video stream: "+t.message,t}if(!this.stream)throw new Error("Could not obtain video from webcam.");try{this.webcamVideoElement.srcObject=this.stream}catch(e){console.log(e),this.webcamVideoElement.src=window.URL.createObjectURL(this.stream)}return this.webcamVideoElement.play(),this.isClosed=!1,new Promise(t=>{this.webcamVideoElement.onloadedmetadata=()=>{t()}})}async next(){if(this.isClosed)return{value:null,done:!0};let t;try{t=c.fromPixels(this.webcamVideoElement)}catch(e){throw new Error("Error thrown converting video to pixels: "+JSON.stringify(e))}if(!this.resize)return{value:t,done:!1};try{return{value:this.cropAndResizeFrame(t),done:!1}}catch(e){throw new Error("Error thrown cropping the video: "+e.message)}finally{t.dispose()}}needToResize(){return!(!this.webcamConfig.resizeWidth||!this.webcamConfig.resizeHeight||this.webcamVideoElement.width===this.webcamConfig.resizeWidth&&this.webcamVideoElement.height===this.webcamConfig.resizeHeight)}cropAndResizeFrame(t){return Gu(()=>{const e=t.toFloat().expandDims(0);let n;return n=Gp.cropAndResize(e,this.cropBox,this.cropBoxInd,this.cropSize,"bilinear"),n.reshape(n.shape.slice(1))})}async capture(){return(await this.next()).value}stop(){this.stream.getTracks().forEach(t=>t.stop());try{this.webcamVideoElement.srcObject=null}catch(t){console.log(t),this.webcamVideoElement.src=null}this.isClosed=!0}toArray(){throw new Error("Can not convert infinite video stream to array.")}}class Y_{}class J_ extends w_{split(t){return new Z_(this,t)}}class Z_ extends J_{constructor(t,e){super(),this.upstream=t,this.impl=new tC(t,e)}summary(){return this.impl.summary()}async next(){return this.impl.next()}}class tC extends I_{constructor(t,e){super(),this.upstream=t,this.separator=e,this.carryover=""}summary(){return`${this.upstream.summary()} -> Split('${this.separator}')`}async pump(){const t=await this.upstream.next();if(t.done)return""!==this.carryover&&(this.outputQueue.push(this.carryover),this.carryover="",!0);const e=t.value.split(this.separator);e[0]=this.carryover+e[0];for(const n of e.slice(0,-1))this.outputQueue.push(n);return this.carryover=e[e.length-1],!0}}class eC extends w_{decodeUTF8(){return new nC(this)}}class nC extends J_{constructor(t){super(),this.upstream=t,this.impl=new rC(t)}summary(){return this.impl.summary()}async next(){return this.impl.next()}}class rC extends I_{constructor(t){if(super(),this.upstream=t,V().get("IS_BROWSER"))this.decoder=new TextDecoder("utf-8");else{const{StringDecoder:t}=n(4);this.decoder=new t("utf8")}}summary(){return this.upstream.summary()+" -> Utf8"}async pump(){const t=await this.upstream.next();let e,n;return!t.done&&(e=t.value,n=V().get("IS_BROWSER")?this.decoder.decode(e,{stream:!0}):this.decoder.write(Buffer.from(e.buffer)),this.outputQueue.push(n),!0)}}class iC extends eC{constructor(t,e={}){super(),this.file=t,this.options=e,r.assert(t instanceof Uint8Array||!!V().get("IS_BROWSER")&&(t instanceof File||t instanceof Blob),()=>"FileChunkIterator only supports File, Blob and Uint8Array right now."),this.offset=e.offset||0,this.chunkSize=e.chunkSize||1048576}summary(){return"FileChunks "+this.file}async next(){if(this.offset>=(this.file instanceof Uint8Array?this.file.byteLength:this.file.size))return{value:null,done:!0};const t=new Promise((t,e)=>{const n=this.offset+this.chunkSize;if(this.file instanceof Uint8Array)t(new Uint8Array(this.file.slice(this.offset,n)));else{const r=new FileReader;r.onload=n=>{let i=r.result;if(i instanceof ArrayBuffer&&(i=new Uint8Array(i)),!(i instanceof Uint8Array))return e(new TypeError("FileReader returned unknown type."));t(i)},r.onabort=t=>e(new Error("Aborted")),r.onerror=t=>e(new Error(t.type));const i=this.file.slice(this.offset,n);r.readAsArrayBuffer(i)}this.offset=n});return{value:await t,done:!1}}}function sC(t){return"string"==typeof t&&"file://"===t.substr(0,7)}class oC extends Y_{constructor(t,e={}){super(),this.input=t,this.options=e}async iterator(){if(sC(this.input)&&V().get("IS_NODE")){const t=n(5);this.input=t.readFileSync(this.input.substr(7))}return new iC(this.input,this.options)}}class aC extends Y_{constructor(t,e={}){super(),this.url=t,this.fileOptions=e}async iterator(){return sC(this.url)?new oC(this.url,this.fileOptions).iterator():async function(t,e={}){let n,i;var s;"string"==typeof t?n=t:(n=t.url,i={method:(s=t).method,headers:s.headers,body:s.body,mode:s.mode,credentials:s.credentials,cache:s.cache,redirect:s.redirect,referrer:s.referrer,integrity:s.integrity});const o=await r.fetch(n,i);if(o.ok){const t=new Uint8Array(await o.arrayBuffer());return new iC(t,e)}throw new Error(o.statusText)}(this.url,this.fileOptions)}}function lC(t,e={}){return new W_(new aC(t),e)}function uC(t){const e=y_(t);return U_(async()=>e)}function cC(t){return U_(async()=>{const e=await t();return y_(()=>e.next())})}async function hC(t,e){return X_.create(t,e)}async function dC(t){return G_.create(t)}const pC="2.1.0";function fC(t,e,n,i){const s=r.getTypedArrayFromDType(i,r.sizeFromShape(n));for(let r=0;r<s.length;++r){const n=r*e;let i=t[n];for(let r=0;r<e;++r){const e=t[n+r];e>i&&(i=e)}s[r]=i}return s}function AC(t,e,n,i,s){const o=e.length,a=r.sizeFromShape(e),l=r.computeStrides(e),u=r.computeStrides(s),c=r.getTypedArrayFromDType(n,r.sizeFromShape(s));for(let h=0;h<a;++h){const e=r.indexToLoc(h,o,l),n=new Array(e.length);for(let t=0;t<n.length;t++)n[t]=e[i[t]];c[r.locToIndex(n,o,u)]=t[h]}return c}function mC(t,e){Array.isArray(t)||(t=[t]),t.forEach(t=>{null!=t&&r.assert("complex64"!==t.dtype,()=>e+" does not support complex64 tensors in the CPU backend.")})}function gC(t,e,n,r,i,s){const o=i.strideHeight,a=i.strideWidth,l=i.dilationHeight,u=i.dilationWidth,c=i.effectiveFilterHeight,h=i.effectiveFilterWidth,d=i.padInfo.top,p=i.padInfo.left,f="max"===s?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,A=Fc(i.outShape,n),m=A.values,g=i.outShape[1]*i.outShape[2]*i.outShape[3],y=i.outShape[2]*i.outShape[3],w=i.outShape[3];for(let b=0;b<i.batchSize;++b){const e=b*g,n=b*r[0];for(let A=0;A<i.inChannels;++A)for(let g=0;g<i.outHeight;++g){const b=g*o-d,v=Math.max(0,b),x=Math.min(i.inHeight,c+b),_=e+g*y;for(let e=0;e<i.outWidth;++e){const o=e*a-p,c=Math.max(0,o),d=Math.min(i.inWidth,h+o);let g=f,y=0,b=0;for(let e=v;e<x;e+=l){const i=n+e*r[1];for(let e=c;e<d;e+=u){const n=t[i+e*r[2]+A];"max"===s&&n>g?g=n:"avg"===s&&(y+=n,b++)}if(isNaN(g))break}m[_+e*w+A]="avg"===s?y/b:g}}}return A}function yC(t,e,n,r,i=!1,s=!1){const o=Fc(r.outShape,"int32"),a=r.strideHeight,l=r.strideWidth,u=r.dilationHeight,c=r.dilationWidth,h=r.effectiveFilterHeight,d=r.effectiveFilterWidth,p=r.padInfo.top,f=r.padInfo.left,A=Fc(e,n,t);for(let m=0;m<r.batchSize;++m)for(let t=0;t<r.inChannels;++t)for(let e=0;e<r.outHeight;++e){const n=e*a-p;let g=n;for(;g<0;)g+=u;const y=Math.min(r.inHeight,h+n);for(let a=0;a<r.outWidth;++a){const h=a*l-f;let p=h;for(;p<0;)p+=c;const w=Math.min(r.inWidth,d+h);let b=Number.NEGATIVE_INFINITY,v=-1;for(let e=g;e<y;e+=u){const o=e-n;for(let n=p;n<w;n+=c){const a=n-h,l=A.get(m,e,n,t);l>b&&(b=l,v=i?s?((m*r.inHeight+e)*r.inWidth+n)*r.inChannels+t:(e*r.inWidth+n)*r.inChannels+t:o*d+a)}}o.set(v,m,e,a,t)}}return o}const wC=y.nonMaxSuppressionV3Impl,bC=y.split,vC=y.tile,xC=y.topkImpl,_C=y.whereImpl;function CC(t,e,n,r){if("linear"===n)return t.linear(e);if("relu"===n)return t.relu(e);if("elu"===n)return t.elu(e);if("relu6"===n)return t.relu6(e);if("prelu"===n)return t.prelu(e,r);throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}class SC extends zf{constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new Pf(this,ju())}write(t,e,n){this.firstUse&&(this.firstUse=!1,V().get("IS_NODE")&&g.warn("\n============================\nHi there \ud83d\udc4b. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.\n============================"));const r={};return this.data.set(r,{values:t,dtype:n}),r}move(t,e,n,r){this.data.set(t,{values:e,dtype:r})}numDataIds(){return this.data.numDataIds()}async read(t){return this.readSync(t)}readSync(t){const{dtype:e,complexTensors:n}=this.data.get(t);if("complex64"===e){const t=this.readSync(n.real.dataId),e=this.readSync(n.imag.dataId);return g.mergeRealAndImagArrays(t,e)}return this.data.get(t).values}bufferSync(t){const e=this.readSync(t.dataId);let n=e;if("string"===t.dtype)try{n=e.map(t=>r.decodeString(t))}catch(i){throw new Error("Failed to decode encoded string bytes into utf-8")}return Fc(t.shape,t.dtype,n)}makeOutput(t,e,n){const r=this.write(t,e,n);return ju().makeTensorFromDataId(r,e,n,this)}disposeData(t){if(this.data.has(t)){const{complexTensors:e}=this.data.get(t);null!=e&&(e.real.dispose(),e.imag.dispose()),this.data.delete(t)}}async time(t){const e=r.now();return t(),{kernelMs:r.now()-e}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}complex(t,e){const n=this.makeOutput(null,t.shape,"complex64");return this.data.get(n.dataId).complexTensors={real:ju().keep(t.clone()),imag:ju().keep(e.clone())},n}real(t){return this.data.get(t.dataId).complexTensors.real.clone()}imag(t){return this.data.get(t.dataId).complexTensors.imag.clone()}slice(t,e,n){if(mC(t,"slice"),o.isSliceContinous(t.shape,e,n)){const i=o.computeFlatOffset(e,t.strides),s=r.sizeFromShape(n);return $a(this.readSync(t.dataId).subarray(i,i+s),n,t.dtype)}const i=Fc(n,t.dtype),s=this.bufferSync(t);for(let r=0;r<i.size;++r){const t=i.indexToLoc(r).map((t,n)=>t+e[n]);i.values[r]=s.get(...t)}return i.toTensor()}stridedSlice(t,e,n,r){mC(t,"stridedSlice");const i=o.computeOutShape(e,n,r);if(i.some(t=>0===t))return $a([],i);const s=Fc(i,t.dtype),a=this.bufferSync(t);for(let o=0;o<s.size;o++){const t=s.indexToLoc(o),n=new Array(t.length);for(let i=0;i<n.length;i++)n[i]=t[i]*r[i]+e[i];s.set(a.get(...n),...t)}return s.toTensor()}diag(t){const e=this.readSync(t.dataId),n=Fc([t.size,t.size],t.dtype),r=n.values;for(let i=0;i<e.length;i++)r[i*t.size+i]=e[i];return n.toTensor()}unstack(t,e){const n=t.shape[e],r=new Array(t.rank-1);let i=0;for(let l=0;l<t.rank;l++)l!==e&&(r[i++]=t.shape[l]);const s=new Array(t.rank).fill(0),o=t.shape.slice();o[e]=1;const a=new Array(n);for(let l=0;l<a.length;l++)s[e]=l,a[l]=this.slice(t,s,o).reshape(r);return a}reverse(t,e){mC(t,"reverse");const n=Fc(t.shape,t.dtype),r=this.bufferSync(t);for(let i=0;i<n.size;i++){const s=n.indexToLoc(i),o=s.slice();e.forEach(e=>o[e]=t.shape[e]-1-o[e]),n.set(r.get(...o),...s)}return n.toTensor()}concat(t,e){if("complex64"===t[0].dtype){const n=t.map(t=>nh(t)),r=t.map(t=>eh(t));return $o(this.concat(n,e),this.concat(r,e))}const n=t.map(t=>{const n=r.sizeFromShape(t.shape.slice(e));return t.as2D(-1,n)}),i=g.computeOutShape(n.map(t=>t.shape),1),s=Fc(i,t[0].dtype).values;if(1===n[0].shape[0]){let t=0;n.forEach(e=>{s.set(this.readSync(e.dataId),t),t+=e.size})}else{let t=0;n.forEach(e=>{const n=this.readSync(e.dataId);let r=0;for(let o=0;o<e.shape[0];++o){const a=o*i[1]+t;for(let t=0;t<e.shape[1];++t)s[a+t]=n[r++]}t+=e.shape[1]})}const o=g.computeOutShape(t.map(t=>t.shape),e);return $a(s,o,t[0].dtype)}neg(t){return mC(t,"neg"),this.multiply(ki(-1),t)}add(t,e){return"complex64"===t.dtype||"complex64"===e.dtype?this.broadcastedBinaryComplexOp(t.cast("complex64"),e.cast("complex64"),(t,e,n,r)=>({real:t+n,imag:e+r})):this.broadcastedBinaryOp(t,e,ge(t.dtype,e.dtype),(t,e)=>t+e)}addN(t){mC(t,"addN");const e=t.map(t=>this.readSync(t.dataId)),n=Fc(t[0].shape,t[0].dtype),r=n.values;for(let i=0;i<t.length;i++){const t=e[i];for(let e=0;e<r.length;e++)r[e]+=t[e]}return n.toTensor()}softmax(t,e){const n=r.parseAxisParam([e],t.shape),i=wh(t,n),s=g.expandShapeToKeepDim(i.shape,n),o=this.subtract(t,i.reshape(s)),a=this.exp(o),l=this.sum(a,n).reshape(s);return Si(a,l)}subtract(t,e){return"complex64"===t.dtype||"complex64"===e.dtype?this.broadcastedBinaryComplexOp(t.cast("complex64"),e.cast("complex64"),(t,e,n,r)=>({real:t-n,imag:e-r})):this.broadcastedBinaryOp(t,e,ge(t.dtype,e.dtype),(t,e)=>t-e)}pow(t,e){return mC([t,e],"pow"),this.broadcastedBinaryOp(t,e,t.dtype,(t,e)=>Math.pow(t,e))}batchMatMul(t,e,n,r){mC([t,e],"matMul");const i=n?t.shape[1]:t.shape[2],s=n?t.shape[2]:t.shape[1],o=r?e.shape[1]:e.shape[2],a=t.shape[0],l=this.readSync(t.dataId),u=this.readSync(e.dataId),[c,h,d]=n?[t.strides[0],1,t.strides[1]]:[t.strides[0],t.strides[1],1],[p,f,A]=r?[1,e.strides[1],e.strides[0]]:[e.strides[1],1,e.strides[0]],m=s*o,g=Fc([a,s,o],t.dtype),y=g.values,w=this.blockSize;for(let b=0;b<a;b++)for(let t=0;t<s;t+=w)for(let e=0;e<o;e+=w)for(let n=0;n<i;n+=w){const r=Math.min(t+w,s),a=Math.min(e+w,o),g=Math.min(n+w,i);for(let i=t;i<r;i++)for(let t=e;t<a;t++){let e=0;for(let r=n;r<g;r++)e+=l[b*c+i*h+r*d]*u[r*p+t*f+b*A];y[b*m+(i*o+t)]+=e}}return g.toTensor()}fusedBatchMatMul({a:t,b:e,transposeA:n,transposeB:r,bias:i,activation:s,preluActivationWeights:o}){let a=this.batchMatMul(t,e,n,r);return i&&(a=this.add(a,i)),s&&(a=CC(this,a,s,o)),a}multiply(t,e){return"complex64"===t.dtype||"complex64"===e.dtype?this.broadcastedBinaryComplexOp(t.cast("complex64"),e.cast("complex64"),(t,e,n,r)=>({real:t*n-e*r,imag:t*r+e*n})):this.broadcastedBinaryOp(t,e,ge(t.dtype,e.dtype),(t,e)=>t*e)}floorDiv(t,e){return mC([t,e],"floorDiv"),this.broadcastedBinaryOp(t,e,"int32",(t,e)=>Math.floor(t/e))}sum(t,e){mC(t,"sum"),g.assertAxesAreInnerMostDims("sum",e,t.rank);const[n,i]=g.computeOutAndReduceShapes(t.shape,e),s=Vo(n,ge(t.dtype,"int32")),o=r.sizeFromShape(i),a=this.readSync(s.dataId),l=this.readSync(t.dataId);for(let r=0;r<a.length;++r){const t=r*o;let e=0;for(let n=0;n<o;++n)e+=l[t+n];a[r]=e}return s}prod(t,e){mC(t,"sum");const[n,i]=g.computeOutAndReduceShapes(t.shape,e),s=Vo(n,ge(t.dtype,"int32")),o=r.sizeFromShape(i),a=this.readSync(s.dataId),l=this.readSync(t.dataId);for(let r=0;r<a.length;++r){const t=r*o;let e=1;for(let n=0;n<o;++n)e*=l[t+n];a[r]=e}return s}unsortedSegmentSum(t,e,n){mC(t,"unsortedSegmentSum");const r=[],i=t.rank-e.rank;for(let s=0;s<i;++s)e=e.expandDims(s+1);for(let s=0;s<n;++s){const n=ki(s,"int32"),i=Bo(n,e).asType("float32").mul(t).sum(0);r.push(i)}return sl(r)}argMin(t,e){mC(t,"argMin");const n=[e];g.assertAxesAreInnerMostDims("argMin",n,t.rank);const[i,s]=g.computeOutAndReduceShapes(t.shape,n),o=Vo(i,"int32"),a=r.sizeFromShape(s),l=this.readSync(o.dataId),u=this.readSync(t.dataId);for(let r=0;r<l.length;++r){const t=r*a;let e=u[t],n=0;for(let r=0;r<a;++r){const i=u[t+r];i<e&&(e=i,n=r)}l[r]=n}return o}argMax(t,e){mC(t,"argMax");const n=[e];g.assertAxesAreInnerMostDims("argMax",n,t.rank);const[i,s]=g.computeOutAndReduceShapes(t.shape,n),o=Vo(i,"int32"),a=r.sizeFromShape(s),l=this.readSync(o.dataId),u=this.readSync(t.dataId);for(let r=0;r<l.length;++r){const t=r*a;let e=u[t],n=0;for(let r=0;r<a;++r){const i=u[t+r];i>e&&(e=i,n=r)}l[r]=n}return o}cumsum(t,e,n,r){if(mC(t,"cumsum"),e!==t.rank-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${t.rank-1} but got axis=`+e);const i=ge(t.dtype,"int32"),s=Vo(t.shape,i),o=this.readSync(s.dataId),a=this.readSync(t.dataId),l=t.shape[t.rank-1],u=r?(t,e)=>t+l-e-1:(t,e)=>t+e;for(let c=0;c<a.length;c+=l)for(let t=0;t<l;t++){const e=u(c,t);if(0===t)o[e]=n?0:a[e];else{const r=u(c,t-1);o[e]=n?a[r]+o[r]:a[e]+o[r]}}return s}equal(t,e){return mC([t,e],"equal"),this.broadcastedBinaryOp(t,e,"bool",(t,e)=>t===e?1:0)}notEqual(t,e){return mC([t,e],"notEqual"),this.broadcastedBinaryOp(t,e,"bool",(t,e)=>t!==e?1:0)}less(t,e){return mC([t,e],"less"),this.broadcastedBinaryOp(t,e,"bool",(t,e)=>t<e?1:0)}lessEqual(t,e){return mC([t,e],"lessEqual"),this.broadcastedBinaryOp(t,e,"bool",(t,e)=>t<=e?1:0)}greater(t,e){return mC([t,e],"greater"),this.broadcastedBinaryOp(t,e,"bool",(t,e)=>t>e?1:0)}greaterEqual(t,e){return mC([t,e],"greaterEqual"),this.broadcastedBinaryOp(t,e,"bool",(t,e)=>t>=e?1:0)}logicalNot(t){mC(t,"logicalNot");const e=this.readSync(t.dataId),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)n[r]=e[r]?0:1;return this.makeOutput(n,t.shape,"bool")}logicalAnd(t,e){return mC([t,e],"logicalAnd"),this.broadcastedBinaryOp(t,e,"bool",(t,e)=>t&&e)}logicalOr(t,e){return mC([t,e],"logicalOr"),this.broadcastedBinaryOp(t,e,"bool",(t,e)=>t||e)}select(t,e,n){mC([t,e,n],"select");const i=this.readSync(t.dataId),s=this.readSync(e.dataId),o=this.readSync(n.dataId),a=Vo(e.shape,ge(e.dtype,n.dtype)),l=this.readSync(a.dataId);let u=0;const c=0===t.rank||t.rank>1||1===e.rank?1:r.sizeFromShape(e.shape.slice(1));for(let r=0;r<i.length;r++)for(let t=0;t<c;t++)l[u++]=1===i[r]?s[r]:o[r];return a}where(t){mC([t],"where");const e=this.readSync(t.dataId);return _C(t.shape,e)}topk(t,e,n){mC(t,"topk");const r=this.readSync(t.dataId);return xC(r,t.shape,t.dtype,e,n)}min(t,e){mC(t,"min"),g.assertAxesAreInnerMostDims("min",e,t.rank);const[n,i]=g.computeOutAndReduceShapes(t.shape,e),s=Vo(n,t.dtype),o=r.sizeFromShape(i),a=this.readSync(s.dataId),l=this.readSync(t.dataId);for(let r=0;r<a.length;++r){const t=r*o;let e=l[t];for(let n=0;n<o;++n){const r=l[t+n];r<e&&(e=r)}a[r]=e}return s}minimum(t,e){return mC([t,e],"minimum"),this.broadcastedBinaryOp(t,e,t.dtype,(t,e)=>Math.min(t,e))}mod(t,e){return mC([t,e],"mod"),this.broadcastedBinaryOp(t,e,t.dtype,(t,e)=>{const n=t%e;return t<0&&e<0||t>=0&&e>=0?n:(n+e)%e})}maximum(t,e){return mC([t,e],"maximum"),this.broadcastedBinaryOp(t,e,t.dtype,(t,e)=>Math.max(t,e))}all(t,e){mC(t,"all"),g.assertAxesAreInnerMostDims("all",e,t.rank);const[n,i]=g.computeOutAndReduceShapes(t.shape,e),s=Vo(n,t.dtype),o=r.sizeFromShape(i),a=this.readSync(s.dataId),l=this.readSync(t.dataId);for(let r=0;r<a.length;++r){const t=r*o;let e=l[t];for(let n=0;n<o;++n){const r=l[t+n];e=e&&r}a[r]=e}return s}any(t,e){mC(t,"any"),g.assertAxesAreInnerMostDims("any",e,t.rank);const[n,i]=g.computeOutAndReduceShapes(t.shape,e),s=Vo(n,t.dtype),o=r.sizeFromShape(i),a=this.readSync(s.dataId),l=this.readSync(t.dataId);for(let r=0;r<a.length;++r){const t=r*o;let e=l[t];for(let n=0;n<o;++n){const r=l[t+n];e=e||r}a[r]=e}return s}squaredDifference(t,e){return mC([t,e],"squaredDifference"),this.broadcastedBinaryOp(t,e,t.dtype,(t,e)=>{const n=t-e;return n*n})}ceil(t){mC(t,"ceil");const e=this.readSync(t.dataId),n=new Float32Array(e.length);for(let r=0;r<e.length;++r)n[r]=Math.ceil(e[r]);return this.makeOutput(n,t.shape,"float32")}floor(t){mC(t,"floor");const e=this.readSync(t.dataId),n=new Float32Array(e.length);for(let r=0;r<e.length;++r)n[r]=Math.floor(e[r]);return this.makeOutput(n,t.shape,"float32")}sign(t){mC(t,"x");const e=this.readSync(t.dataId),n=new Float32Array(e.length);for(let r=0;r<e.length;++r)n[r]=e[r]<0?-1:e[r]>0?1:0;return this.makeOutput(n,t.shape,"float32")}isNaN(t){mC(t,"x");const e=this.readSync(t.dataId),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)Number.isNaN(e[r])&&(n[r]=1);return this.makeOutput(n,t.shape,"bool")}isInf(t){mC(t,"x");const e=this.readSync(t.dataId),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)Math.abs(e[r])===1/0&&(n[r]=1);return this.makeOutput(n,t.shape,"bool")}isFinite(t){mC(t,"x");const e=this.readSync(t.dataId),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)Number.isFinite(e[r])&&(n[r]=1);return this.makeOutput(n,t.shape,"bool")}round(t){mC(t,"round");const e=this.readSync(t.dataId),n=new Float32Array(e.length);for(let r=0;r<e.length;++r){const t=Math.floor(e[r]);n[r]=e[r]-t<.5?Math.floor(e[r]):e[r]-t>.5?Math.ceil(e[r]):t%2==0?t:t+1}return this.makeOutput(n,t.shape,"float32")}exp(t){mC(t,"exp");const e=this.readSync(t.dataId),n=new Float32Array(e.length);for(let r=0;r<e.length;++r)n[r]=Math.exp(e[r]);return this.makeOutput(n,t.shape,"float32")}expm1(t){mC(t,"expm1");const e=this.readSync(t.dataId),n=new Float32Array(e.length);for(let r=0;r<e.length;++r)n[r]=Math.expm1(e[r]);return this.makeOutput(n,t.shape,"float32")}log(t){mC(t,"log");const e=this.readSync(t.dataId),n=new Float32Array(e.length);for(let r=0;r<e.length;++r)n[r]=Math.log(e[r]);return this.makeOutput(n,t.shape,"float32")}log1p(t){mC(t,"log1p");const e=this.readSync(t.dataId),n=new Float32Array(e.length);for(let r=0;r<e.length;++r)n[r]=Math.log1p(e[r]);return this.makeOutput(n,t.shape,"float32")}sqrt(t){mC(t,"sqrt");const e=this.readSync(t.dataId),n=new Float32Array(e.length);for(let r=0;r<e.length;++r)n[r]=Math.sqrt(e[r]);return this.makeOutput(n,t.shape,"float32")}rsqrt(t){mC(t,"rsqrt");const e=this.readSync(t.dataId),n=new Float32Array(e.length);for(let r=0;r<e.length;++r)n[r]=1/Math.sqrt(e[r]);return this.makeOutput(n,t.shape,"float32")}reciprocal(t){mC(t,"reciprocal");const e=this.readSync(t.dataId),n=new Float32Array(e.length);for(let r=0;r<e.length;++r)n[r]=1/e[r];return this.makeOutput(n,t.shape,"float32")}linear(t){return t}relu(t){mC(t,"relu");const e=Vo(t.shape,t.dtype),n=this.readSync(e.dataId),r=this.readSync(t.dataId);for(let i=0;i<r.length;++i)n[i]=Math.max(0,r[i]);return e}relu6(t){mC(t,"relu");const e=Vo(t.shape,t.dtype),n=this.readSync(e.dataId),r=this.readSync(t.dataId);for(let i=0;i<r.length;++i)n[i]=Math.min(Math.max(0,r[i]),6);return e}prelu(t,e){return mC([t,e],"prelu"),this.broadcastedBinaryOp(t,e,t.dtype,(t,e)=>t<0?e*t:t)}elu(t){mC(t,"elu");const e=new Float32Array(t.size),n=this.readSync(t.dataId);for(let r=0;r<n.length;++r){const t=n[r];e[r]=t>=0?t:Math.exp(t)-1}return this.makeOutput(e,t.shape,"float32")}eluDer(t,e){mC([t,e],"eluDer");const n=new Float32Array(e.size),r=this.readSync(e.dataId),i=this.readSync(t.dataId);for(let s=0;s<r.length;++s){const t=r[s];n[s]=t>=1?i[s]:i[s]*(t+1)}return this.makeOutput(n,e.shape,"float32")}selu(t){mC(t,"selu");const e=g.SELU_SCALEALPHA,n=g.SELU_SCALE,r=new Float32Array(t.size),i=this.readSync(t.dataId);for(let s=0;s<i.length;++s){const t=i[s];r[s]=t>=0?n*t:e*(Math.exp(t)-1)}return this.makeOutput(r,t.shape,"float32")}clip(t,e,n){mC(t,"clip");const r=new Float32Array(t.size),i=this.readSync(t.dataId);for(let s=0;s<i.length;++s){const t=i[s];r[s]=t>n?n:t<e?e:t}return this.makeOutput(r,t.shape,"float32")}abs(t){const e=new Float32Array(t.size),n=this.readSync(t.dataId);for(let r=0;r<n.length;++r)e[r]=Math.abs(n[r]);return this.makeOutput(e,t.shape,"float32")}complexAbs(t){const e=new Float32Array(t.size),n=this.readSync(t.dataId);for(let r=0;r<t.size;++r)e[r]=Math.hypot(n[2*r],n[2*r+1]);return this.makeOutput(e,t.shape,"float32")}int(t){mC(t,"int");const e=new Int32Array(t.size),n=this.readSync(t.dataId);for(let r=0;r<n.length;++r)e[r]=n[r];return this.makeOutput(e,t.shape,"int32")}sigmoid(t){mC(t,"sigmoid");const e=new Float32Array(t.size),n=this.readSync(t.dataId);for(let r=0;r<n.length;++r)e[r]=1/(1+Math.exp(-n[r]));return this.makeOutput(e,t.shape,"float32")}softplus(t){mC(t,"softplus");const e=Math.log(1.1920928955078125e-7)+2,n=new Float32Array(t.size),r=this.readSync(t.dataId);for(let i=0;i<r.length;++i){const t=r[i]>-e,s=r[i]<e,o=Math.exp(r[i]);let a;a=s?o:t?r[i]:Math.log(1+o),n[i]=a}return this.makeOutput(n,t.shape,"float32")}sin(t){mC(t,"sin");const e=new Float32Array(t.size),n=this.readSync(t.dataId);for(let r=0;r<n.length;++r)e[r]=Math.sin(n[r]);return this.makeOutput(e,t.shape,"float32")}cos(t){mC(t,"cos");const e=new Float32Array(t.size),n=this.readSync(t.dataId);for(let r=0;r<n.length;++r)e[r]=Math.cos(n[r]);return this.makeOutput(e,t.shape,"float32")}tan(t){mC(t,"tan");const e=new Float32Array(t.size),n=this.readSync(t.dataId);for(let r=0;r<n.length;++r)e[r]=Math.tan(n[r]);return this.makeOutput(e,t.shape,"float32")}asin(t){mC(t,"asin");const e=new Float32Array(t.size),n=this.readSync(t.dataId);for(let r=0;r<n.length;++r)e[r]=Math.asin(n[r]);return this.makeOutput(e,t.shape,"float32")}acos(t){mC(t,"acos");const e=new Float32Array(t.size),n=this.readSync(t.dataId);for(let r=0;r<n.length;++r)e[r]=Math.acos(n[r]);return this.makeOutput(e,t.shape,"float32")}atan(t){mC(t,"atan");const e=new Float32Array(t.size),n=this.readSync(t.dataId);for(let r=0;r<n.length;++r)e[r]=Math.atan(n[r]);return this.makeOutput(e,t.shape,"float32")}atan2(t,e){return mC([t,e],"atan2"),this.broadcastedBinaryOp(t,e,t.dtype,(t,e)=>Math.atan2(t,e))}sinh(t){mC(t,"sinh");const e=new Float32Array(t.size),n=this.readSync(t.dataId);for(let r=0;r<n.length;++r)e[r]=Math.sinh(n[r]);return this.makeOutput(e,t.shape,"float32")}cosh(t){mC(t,"cosh");const e=new Float32Array(t.size),n=this.readSync(t.dataId);for(let r=0;r<n.length;++r)e[r]=Math.cosh(n[r]);return this.makeOutput(e,t.shape,"float32")}tanh(t){mC(t,"tanh");const e=new Float32Array(t.size),n=this.readSync(t.dataId);for(let i=0;i<n.length;++i)e[i]=r.tanh(n[i]);return this.makeOutput(e,t.shape,"float32")}asinh(t){mC(t,"asinh");const e=new Float32Array(t.size),n=this.readSync(t.dataId);for(let r=0;r<n.length;++r)e[r]=Math.asinh(n[r]);return this.makeOutput(e,t.shape,"float32")}acosh(t){mC(t,"acosh");const e=new Float32Array(t.size),n=this.readSync(t.dataId);for(let r=0;r<n.length;++r)e[r]=Math.acosh(n[r]);return this.makeOutput(e,t.shape,"float32")}atanh(t){mC(t,"atanh");const e=new Float32Array(t.size),n=this.readSync(t.dataId);for(let r=0;r<n.length;++r)e[r]=Math.atanh(n[r]);return this.makeOutput(e,t.shape,"float32")}erf(t){mC(t,"erf");const e=new Float32Array(t.size),n=this.readSync(t.dataId),r=g.ERF_P,i=g.ERF_A1,s=g.ERF_A2,o=g.ERF_A3,a=g.ERF_A4,l=g.ERF_A5;for(let u=0;u<n.length;++u){const t=Math.sign(n[u]),c=Math.abs(n[u]),h=1/(1+r*c);e[u]=t*(1-((((l*h+a)*h+o)*h+s)*h+i)*h*Math.exp(-c*c))}return this.makeOutput(e,t.shape,"float32")}step(t,e=0){mC(t,"step");const n=new Float32Array(t.size),r=this.readSync(t.dataId);for(let i=0;i<r.length;++i){const t=r[i];n[i]=isNaN(t)?NaN:t>0?1:e}return this.makeOutput(n,t.shape,"float32")}fusedConv2d({input:t,filter:e,convInfo:n,bias:r,activation:i,preluActivationWeights:s}){let o=this.conv2d(t,e,n);return r&&(o=this.add(o,r)),i&&(o=CC(this,o,i,s)),o}conv2d(t,e,n){mC([t,e],"conv2d");const r=n.filterHeight,i=n.filterWidth,s=n.dilationHeight,o=n.dilationWidth,a=n.padInfo.left,l=n.padInfo.top,u="channelsLast"===n.dataFormat,c=Fc(n.outShape,t.dtype),h=t.strides[0],d=u?t.strides[1]:t.strides[2],p=u?t.strides[2]:1,f=u?1:t.strides[1],A=c.strides[0],m=u?c.strides[1]:c.strides[2],g=u?c.strides[2]:1,y=u?1:c.strides[1],w=this.readSync(t.dataId),b=this.readSync(e.dataId),v=c.values;for(let x=0;x<n.batchSize;++x){const t=x*h,u=x*A;for(let c=0;c<n.outHeight;++c){const h=u+c*m,A=c*n.strideHeight-l;for(let l=0;l<r;l++){const r=A+l*s;if(r<0||r>=n.inHeight)continue;const u=l*e.strides[0],c=t+r*d;for(let t=0;t<n.outWidth;++t){const r=h+t*g,s=t*n.strideWidth-a;for(let t=0;t<i;t++){const i=s+t*o;if(i<0||i>=n.inWidth)continue;const a=c+i*p;let l=u+t*e.strides[1];for(let t=0;t<n.inChannels;++t){const e=w[a+t*f];for(let t=0;t<n.outChannels;++t)v[r+t*y]+=e*b[l+t];l+=n.outChannels}}}}}}return c.toTensor()}conv3d(t,e,n){const r=n.filterDepth,i=n.filterHeight,s=n.filterWidth,o=n.dilationDepth,a=n.dilationHeight,l=n.dilationWidth,u=n.padInfo.front,c=n.padInfo.left,h=n.padInfo.top,d=Fc(n.outShape,t.dtype),p=this.readSync(t.dataId),f=this.readSync(e.dataId),A=d.values;for(let m=0;m<n.batchSize;++m){const g=m*t.strides[0],y=m*d.strides[0];for(let m=0;m<n.outDepth;++m){const w=y+m*d.strides[1],b=m*n.strideDepth-u;for(let u=0;u<r;u++){const r=b+u*o;if(r<0||r>=n.inDepth)continue;const m=u*e.strides[0],y=g+r*t.strides[1];for(let o=0;o<n.outHeight;++o){const r=w+o*d.strides[2],u=o*n.strideHeight-h;for(let o=0;o<i;o++){const i=u+o*a;if(i<0||i>=n.inHeight)continue;const h=m+o*e.strides[1],d=y+i*t.strides[2];for(let t=0;t<n.outWidth;++t){const i=r+t*n.outChannels,o=t*n.strideWidth-c;for(let t=0;t<s;t++){const r=o+t*l;if(r<0||r>=n.inWidth)continue;const s=d+r*n.inChannels;let a=h+t*e.strides[2];for(let t=0;t<n.inChannels;++t){const e=p[s+t];for(let t=0;t<n.outChannels;++t)A[i+t]+=e*f[a+t];a+=n.outChannels}}}}}}}}return d.toTensor()}conv2dDerInput(t,e,n){mC([t,e],"conv2dDerInput");const r=Fc(n.inShape,"float32"),i=r.values,s=this.readSync(t.dataId),o=this.readSync(e.dataId),[a,l,u]=e.strides,{batchSize:c,filterHeight:h,filterWidth:d,inChannels:p,inHeight:f,inWidth:A,outChannels:m,outHeight:g,outWidth:y,strideHeight:w,strideWidth:b,dataFormat:v}=n,x=h-1-n.padInfo.top,_=d-1-n.padInfo.left,C="channelsLast"===v,S=r.strides[0],E=C?r.strides[1]:r.strides[2],B=C?r.strides[2]:1,k=C?1:r.strides[1],N=t.strides[0],I=C?t.strides[1]:t.strides[2],F=C?t.strides[2]:1,T=C?1:t.strides[1];for(let R=0;R<c;++R)for(let t=0;t<p;++t)for(let e=0;e<f;++e){const n=e-x,r=Math.max(0,Math.ceil(n/w)),c=Math.min(g,(h+n)/w);for(let p=0;p<A;++p){const f=p-_,A=Math.max(0,Math.ceil(f/b)),g=Math.min(y,(d+f)/b);let v=0;for(let e=r;e<c;++e){const r=e*w-n;for(let n=A;n<g;++n){const i=N*R+I*e+F*n,c=a*(h-1-r)+l*(d-1-(n*b-f))+u*t;for(let t=0;t<m;++t)v+=s[i+T*t]*o[c+t]}}i[S*R+E*e+B*p+k*t]=v}}return r.toTensor()}conv3dDerInput(t,e,n){const r=Fc(n.inShape,"float32"),i=r.values,[s,o,a,l]=r.strides,u=this.readSync(t.dataId),[c,h,d,p]=t.strides,f=this.readSync(e.dataId),[A,m,g,y]=e.strides,{batchSize:w,filterDepth:b,filterHeight:v,filterWidth:x,inChannels:_,inDepth:C,inHeight:S,inWidth:E,outChannels:B,outDepth:k,outHeight:N,outWidth:I,strideDepth:F,strideHeight:T,strideWidth:R}=n,O=b-1-n.padInfo.front,D=v-1-n.padInfo.top,L=x-1-n.padInfo.left;for(let M=0;M<w;++M)for(let t=0;t<_;++t)for(let e=0;e<C;++e){const n=e-O,r=Math.max(0,Math.ceil(n/F)),w=Math.min(k,(b+n)/F);for(let _=0;_<S;++_){const C=_-D,S=Math.max(0,Math.ceil(C/T)),k=Math.min(N,(v+C)/T);for(let N=0;N<E;++N){const E=N-L,O=Math.max(0,Math.ceil(E/R)),D=Math.min(I,(x+E)/R);let U=0;for(let e=r;e<w;++e){const r=e*F-n;for(let n=S;n<k;++n){const i=n*T-C;for(let s=O;s<D;++s){const o=c*M+h*e+d*n+p*s,a=A*(b-1-r)+m*(v-1-i)+g*(x-1-(s*R-E))+y*t;for(let t=0;t<B;++t)U+=u[o+t]*f[a+t]}}}i[s*M+o*e+a*_+l*N+t]=U}}}return r.toTensor()}conv2dDerFilter(t,e,n){mC([t,e],"conv2dDerFilter");const r=n.strideHeight,i=n.strideWidth,s=n.filterHeight,o=n.filterWidth,a="channelsLast"===n.dataFormat,l=Fc(n.filterShape,"float32"),u=n.padInfo.left,c=n.padInfo.top,h=this.bufferSync(t),d=this.bufferSync(e);for(let p=0;p<s;++p){const t=Math.max(0,Math.ceil((c-p)/r)),e=Math.min(n.outHeight,(n.inHeight+c-p)/r);for(let s=0;s<o;++s){const o=Math.max(0,Math.ceil((u-s)/i)),f=Math.min(n.outWidth,(n.inWidth+u-s)/i);for(let A=0;A<n.inChannels;++A)for(let m=0;m<n.outChannels;++m){let g=0;for(let l=0;l<n.batchSize;++l)for(let n=t;n<e;++n){const t=p+n*r-c;for(let e=o;e<f;++e){const r=s+e*i-u;g+=a?h.get(l,t,r,A)*d.get(l,n,e,m):h.get(l,A,t,r)*d.get(l,m,n,e)}}l.set(g,p,s,A,m)}}}return l.toTensor()}conv3dDerFilter(t,e,n){const r=n.strideDepth,i=n.strideHeight,s=n.strideWidth,o=n.filterDepth,a=n.filterHeight,l=n.filterWidth,u=Fc(n.filterShape,"float32"),c=u.values,[h,d,p,f]=u.strides,A=this.readSync(e.dataId),[m,g,y,w]=e.strides,b=this.readSync(t.dataId),[v,x,_,C]=t.strides,S=n.padInfo.front,E=n.padInfo.left,B=n.padInfo.top;for(let k=0;k<o;++k){const t=Math.max(0,Math.ceil((S-k)/r)),e=Math.min(n.outDepth,(n.inDepth+S-k)/r),o=k*h;for(let u=0;u<a;++u){const a=Math.max(0,Math.ceil((B-u)/i)),h=Math.min(n.outHeight,(n.inHeight+B-u)/i),N=u*d+o;for(let o=0;o<l;++o){const l=Math.max(0,Math.ceil((E-o)/s)),d=Math.min(n.outWidth,(n.inWidth+E-o)/s),I=o*p+N;for(let p=0;p<n.inChannels;++p){const N=p*f+I;for(let f=0;f<n.outChannels;++f){let I=0;for(let c=0;c<n.batchSize;++c){const n=c*v,N=c*m;for(let c=t;c<e;++c){const t=(k+c*r-S)*x+n,e=c*g+N;for(let n=a;n<h;++n){const r=(u+n*i-B)*_+t,a=n*y+e;for(let t=l;t<d;++t)I+=b[(o+t*s-E)*C+r+p]*A[t*w+a+f]}}}c[N+f]=I}}}}}return u.toTensor()}fusedDepthwiseConv2D({input:t,filter:e,convInfo:n,bias:r,activation:i,preluActivationWeights:s}){let o=this.depthwiseConv2D(t,e,n);return r&&(o=this.add(o,r)),i&&(o=CC(this,o,i,s)),o}depthwiseConv2D(t,e,n){mC([t,e],"depthwiseConv2D");const r=n.filterHeight,i=n.filterWidth,s=n.dilationHeight,o=n.dilationWidth,a=n.padInfo.left,l=n.padInfo.top,u=n.outChannels/n.inChannels,c=Fc(n.outShape,t.dtype),h=this.readSync(t.dataId),d=this.readSync(e.dataId),p=c.values;for(let f=0;f<n.batchSize;++f){const A=f*t.strides[0],m=f*c.strides[0];for(let f=0;f<n.outHeight;++f){const g=m+f*c.strides[1],y=f*n.strideHeight-a;for(let a=0;a<r;++a){const r=y+a*s;if(r<0||r>=n.inHeight)continue;const f=a*e.strides[0],m=A+r*t.strides[1];for(let t=0;t<n.outWidth;++t){const r=g+t*c.strides[2],s=t*n.strideWidth-l;for(let t=0;t<i;++t){const i=s+t*o;if(i<0||i>=n.inWidth)continue;const a=m+i*n.inChannels;let l=r,c=f+t*e.strides[1];for(let t=0;t<n.inChannels;++t){const e=h[a+t];for(let t=0;t<u;++t)p[l+t]+=e*d[c+t];l+=u,c+=u}}}}}}return c.toTensor()}depthwiseConv2DDerInput(t,e,n){mC([t,e],"depthwiseConv2DDerInput");const r=Fc(n.inShape,"float32"),i=r.values,[s,o,a]=r.strides,l=this.readSync(t.dataId),[u,c,h]=t.strides,d=this.readSync(e.dataId),[p,f,A]=e.strides,{batchSize:m,filterHeight:g,filterWidth:y,inChannels:w,inHeight:b,inWidth:v,outChannels:x,outHeight:_,outWidth:C,strideHeight:S,strideWidth:E}=n,B=g-1-n.padInfo.top,k=y-1-n.padInfo.left,N=x/w;for(let I=0;I<m;++I)for(let t=0;t<w;++t)for(let e=0;e<b;++e){const n=e-B,r=Math.max(0,Math.ceil(n/S)),m=Math.min(_,(g+n)/S);for(let w=0;w<v;++w){const b=w-k,v=Math.max(0,Math.ceil(b/E)),x=Math.min(C,(y+b)/E);let _=0;for(let e=r;e<m;++e){const r=e*S-n;for(let n=v;n<x;++n){const i=u*I+c*e+h*n,s=p*(g-1-r)+f*(y-1-(n*E-b))+A*t;for(let e=0;e<N;++e)_+=l[i+(t*N+e)]*d[s+e]}}i[s*I+o*e+a*w+t]=_}}return r.toTensor()}depthwiseConv2DDerFilter(t,e,n){mC([t,e],"depthwiseConv2DDerFilter");const r=n.strideHeight,i=n.strideWidth,s=n.filterHeight,o=n.filterWidth,a=Fc(n.filterShape,"float32"),l=n.padInfo.left,u=n.padInfo.top,c=n.outChannels/n.inChannels,h=this.bufferSync(t),d=this.bufferSync(e);for(let p=0;p<s;++p){const t=Math.max(0,Math.ceil((u-p)/r)),e=Math.min(n.outHeight,(n.inHeight+u-p)/r);for(let s=0;s<o;++s){const o=Math.max(0,Math.ceil((l-s)/i)),f=Math.min(n.outWidth,(n.inWidth+l-s)/i);for(let A=0;A<n.outChannels;++A){const m=Math.trunc(A/c),g=A%c;let y=0;for(let a=0;a<n.batchSize;++a)for(let n=t;n<e;++n){const t=p+n*r-u;for(let e=o;e<f;++e)y+=h.get(a,t,s+e*i-l,m)*d.get(a,n,e,A)}a.set(y,p,s,m,g)}}}return a.toTensor()}tile(t,e){return mC(t,"tile"),vC(this.bufferSync(t),e)}pad(t,e,n){mC(t,"pad");const r=e.map((e,n)=>e[0]+t.shape[n]+e[1]),i=e.map(t=>t[0]),s=this.bufferSync(t),o=Fc(r,t.dtype);0!==n&&o.values.fill(n);for(let a=0;a<t.size;a++){const t=s.indexToLoc(a),e=t.map((t,e)=>t+i[e]);o.set(s.get(...t),...e)}return o.toTensor()}gather(t,e,n){mC([t,e],"gather");const r=t.shape.slice(),i=this.readSync(e.dataId);r[n]=i.length;const s=Fc(r,t.dtype),o=this.bufferSync(t);for(let a=0;a<s.size;++a){const t=s.indexToLoc(a),e=t.slice();e[n]=i[t[n]];const r=o.locToIndex(e);s.values[a]=o.values[r]}return s.toTensor()}batchToSpaceND(t,e,n){mC([t],"batchToSpaceND");const r=e.reduce((t,e)=>t*e),i=g.getReshaped(t.shape,e,r),s=g.getPermuted(i.length,e.length),o=g.getReshapedPermuted(t.shape,e,r),a=g.getSliceBeginCoords(n,e.length),l=g.getSliceSize(o,n,e.length);return Ws(t.reshape(i),s).reshape(o).slice(a,l)}spaceToBatchND(t,e,n){mC([t],"spaceToBatchND");const r=e.reduce((t,e)=>t*e),i=[[0,0]];i.push(...n);for(let c=1+e.length;c<t.shape.length;++c)i.push([0,0]);const s=t.pad(i),o=g.getReshaped(s.shape,e,r,!1),a=g.getPermuted(o.length,e.length,!1),l=g.getReshapedPermuted(s.shape,e,r,!1),u=Ws(s.reshape(o),a);return qi(u,l)}maxPool(t,e){return mC(t,"maxPool"),gC(this.readSync(t.dataId),0,t.dtype,t.strides,e,"max").toTensor()}maxPoolBackprop(t,e,n,r){mC([e,n],"maxPoolBackprop");const i=this.readSync(e.dataId),s=Fc(r.outShape,e.dtype,yC(i,e.shape,e.dtype,r).values),o=r.strideHeight,a=r.strideWidth,l=r.dilationHeight,u=r.dilationWidth,c=r.effectiveFilterHeight,h=r.effectiveFilterWidth,d=h-1-r.padInfo.left,p=c-1-r.padInfo.top,f=Fc(e.shape,"float32"),A=this.bufferSync(t);for(let m=0;m<r.batchSize;++m)for(let t=0;t<r.inChannels;++t)for(let e=0;e<r.inHeight;++e)for(let n=0;n<r.inWidth;++n){const i=e-p,g=n-d;let y=0;for(let e=0;e<c;e+=l){const n=(i+e)/o;if(!(n<0||n>=r.outHeight||Math.floor(n)!==n))for(let i=0;i<h;i+=u){const o=(g+i)/a;if(o<0||o>=r.outWidth||Math.floor(o)!==o)continue;const l=c*h-1-s.get(m,n,o,t)===e*h+i?1:0;0!==l&&(y+=A.get(m,n,o,t)*l)}}f.set(y,m,e,n,t)}return f.toTensor()}avgPoolBackprop(t,e,n){mC([t,e],"avgPoolBackprop");const r=n.strideHeight,i=n.strideWidth,s=n.filterHeight,o=n.filterWidth,a=n.dilationHeight,l=n.dilationWidth,u=n.effectiveFilterHeight,c=n.effectiveFilterWidth,h=c-1-n.padInfo.left,d=u-1-n.padInfo.top,p=Fc(e.shape,"float32"),f=1/(s*o),A=this.bufferSync(t);for(let m=0;m<n.batchSize;++m)for(let t=0;t<n.inChannels;++t)for(let e=0;e<n.inHeight;++e)for(let s=0;s<n.inWidth;++s){const o=e-d,g=s-h;let y=0;for(let e=0;e<u;e+=a){const s=(o+e)/r;if(!(s<0||s>=n.outHeight||Math.floor(s)!==s))for(let e=0;e<c;e+=l){const r=(g+e)/i;r<0||r>=n.outWidth||Math.floor(r)!==r||(y+=A.get(m,s,r,t))}}p.set(y*f,m,e,s,t)}return p.toTensor()}pool3d(t,e,n){mC(t,"pool3d");const r=e.strideDepth,i=e.strideHeight,s=e.strideWidth,o=e.dilationDepth,a=e.dilationHeight,l=e.dilationWidth,u=e.effectiveFilterDepth,c=e.effectiveFilterHeight,h=e.effectiveFilterWidth,d=e.padInfo.front,p=e.padInfo.top,f=e.padInfo.left,A="max"===n?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=this.readSync(t.dataId),g=Fc(e.outShape,t.dtype),y=g.values,w=e.outShape[1]*e.outShape[2]*e.outShape[3]*e.outShape[4],b=e.outShape[2]*e.outShape[3]*e.outShape[4],v=e.outShape[3]*e.outShape[4],x=e.outShape[4];for(let _=0;_<e.batchSize;++_){const g=_*w,C=_*t.strides[0];for(let w=0;w<e.inChannels;++w)for(let _=0;_<e.outDepth;++_){const S=_*r-d;let E=S;for(;E<0;)E+=o;const B=Math.min(e.inDepth,u+S),k=g+_*b;for(let r=0;r<e.outHeight;++r){const u=r*i-p;let d=u;for(;d<0;)d+=a;const g=Math.min(e.inHeight,c+u),b=k+r*v;for(let r=0;r<e.outWidth;++r){const i=r*s-f;let u=i;for(;u<0;)u+=l;const c=Math.min(e.inWidth,h+i),p=b+r*x;let v=A,_=0,S=0;for(let e=E;e<B;e+=o){const r=C+e*t.strides[1];for(let e=d;e<g;e+=a){const i=r+e*t.strides[2];for(let e=u;e<c;e+=l){const r=m[i+e*t.strides[3]+w];if("max"===n&&r>v?v=r:"avg"===n&&(_+=r,S++),isNaN(v))break}if(isNaN(v))break}if(isNaN(v))break}y[p+w]="avg"===n?_/S:v}}}}return g.toTensor()}avgPool3d(t,e){return mC(t,"avgPool3d"),this.pool3d(t,e,"avg").toFloat()}avgPool3dBackprop(t,e,n){mC([t,e],"avgPool3dBackprop");const r=n.strideDepth,i=n.strideHeight,s=n.strideWidth,o=n.filterDepth,a=n.filterHeight,l=n.filterWidth,u=n.dilationDepth,c=n.dilationHeight,h=n.dilationWidth,d=n.effectiveFilterDepth,p=n.effectiveFilterHeight,f=n.effectiveFilterWidth,A=d-1-n.padInfo.front,m=f-1-n.padInfo.left,g=p-1-n.padInfo.top,y=Fc(e.shape,"float32"),w=1/(o*a*l),b=this.bufferSync(t);for(let v=0;v<n.batchSize;++v)for(let t=0;t<n.inChannels;++t)for(let e=0;e<n.inDepth;++e)for(let o=0;o<n.inHeight;++o)for(let a=0;a<n.inWidth;++a){const l=e-A,x=o-g,_=a-m;let C=0;for(let e=0;e<d;e+=u){const o=(l+e)/r;if(!(o<0||o>=n.outDepth||Math.floor(o)!==o))for(let e=0;e<p;e+=c){const r=(x+e)/i;if(!(r<0||r>=n.outHeight||Math.floor(r)!==r))for(let e=0;e<f;e+=h){const i=(_+e)/s;i<0||i>=n.outWidth||Math.floor(i)!==i||(C+=b.get(v,o,r,i,t))}}}y.set(C*w,v,e,o,a,t)}return y.toTensor()}maxPool3d(t,e){return mC(t,"maxPool3d"),this.pool3d(t,e,"max").toFloat()}maxPool3dPositions(t,e){const n=Fc(e.outShape,"int32"),r=e.strideDepth,i=e.strideHeight,s=e.strideWidth,o=e.dilationDepth,a=e.dilationHeight,l=e.dilationWidth,u=e.effectiveFilterDepth,c=e.effectiveFilterHeight,h=e.effectiveFilterWidth,d=e.padInfo.front,p=e.padInfo.top,f=e.padInfo.left,A=this.bufferSync(t);for(let m=0;m<e.batchSize;++m)for(let t=0;t<e.inChannels;++t)for(let g=0;g<e.outDepth;++g){const y=g*r-d;let w=y;for(;w<0;)w+=o;const b=Math.min(e.inDepth,u+y);for(let r=0;r<e.outHeight;++r){const u=r*i-p;let d=u;for(;d<0;)d+=a;const v=Math.min(e.inHeight,c+u);for(let i=0;i<e.outWidth;++i){const p=i*s-f;let x=p;for(;x<0;)x+=l;const _=Math.min(e.inWidth,h+p);let C=Number.NEGATIVE_INFINITY,S=-1;for(let e=w;e<b;e+=o){const n=e-y;for(let r=d;r<v;r+=a){const i=r-u;for(let s=x;s<_;s+=l){const o=s-p,a=A.get(m,e,r,s,t);a>=C&&(C=a,S=n*c*h+i*c+o)}}}n.set(S,m,g,r,i,t)}}}return n.toTensor()}maxPool3dBackprop(t,e,n,r){mC([e,n],"maxPool3dBackprop");const i=this.maxPool3dPositions(e,r),s=r.strideDepth,o=r.strideHeight,a=r.strideWidth,l=r.dilationDepth,u=r.dilationHeight,c=r.dilationWidth,h=r.effectiveFilterDepth,d=r.effectiveFilterHeight,p=r.effectiveFilterWidth,f=h-1-r.padInfo.front,A=p-1-r.padInfo.left,m=d-1-r.padInfo.top,g=Fc(e.shape,"float32"),y=this.bufferSync(i),w=this.bufferSync(t);for(let b=0;b<r.batchSize;++b)for(let t=0;t<r.inChannels;++t)for(let e=0;e<r.inDepth;++e)for(let n=0;n<r.inHeight;++n)for(let i=0;i<r.inWidth;++i){const v=e-f,x=n-m,_=i-A;let C=0;for(let e=0;e<h;e+=l){const n=(v+e)/s;if(!(n<0||n>=r.outDepth||Math.floor(n)!==n))for(let i=0;i<d;i+=u){const s=(x+i)/o;if(!(s<0||s>=r.outHeight||Math.floor(s)!==s))for(let o=0;o<p;o+=c){const l=(_+o)/a;if(l<0||l>=r.outWidth||Math.floor(l)!==l)continue;const u=h*d*p-1-y.get(b,n,s,l,t)===e*d*p+i*p+o?1:0;0!==u&&(C+=w.get(b,n,s,l,t)*u)}}}g.set(C,b,e,n,i,t)}return g.toTensor()}cast(t,e){return g.castTensor(t,e,this)}reshape(t,e){return g.reshapeTensor(t,e)}avgPool(t,e){return mC(t,"avgPool"),mC(t,"maxPool"),gC(this.readSync(t.dataId),0,t.dtype,t.strides,e,"avg").toTensor().toFloat()}resizeBilinear(t,e,n,i){mC(t,"resizeBilinear");const[s,o,a,l]=t.shape,u=this.readSync(t.dataId),c=new Float32Array(r.sizeFromShape([s,e,n,l])),h=[i&&e>1?o-1:o,i&&n>1?a-1:a],d=[i&&e>1?e-1:e,i&&n>1?n-1:n];let p=0;const f=h[0]/d[0],A=h[1]/d[1];for(let r=0;r<s;r++)for(let i=0;i<e;i++){const e=f*i,s=Math.floor(e),h=e-s,d=Math.min(o-1,Math.ceil(e)),m=r*t.strides[0]+s*t.strides[1],g=r*t.strides[0]+d*t.strides[1];for(let r=0;r<n;r++){const e=A*r,n=Math.floor(e),i=e-n,s=Math.min(a-1,Math.ceil(e)),o=m+n*t.strides[2],d=g+n*t.strides[2],f=m+s*t.strides[2],y=g+s*t.strides[2];for(let t=0;t<l;t++){const e=u[o+t],n=u[d+t],r=e+(u[f+t]-e)*i;c[p++]=r+(n+(u[y+t]-n)*i-r)*h}}}return $a(c,[s,e,n,l])}resizeBilinearBackprop(t,e,n){mC([t,e],"resizeBilinearBackprop");const[r,i,s,o]=e.shape,[,a,l]=t.shape,u=new Float32Array(r*i*s*o),c=[n&&a>1?i-1:i,n&&l>1?s-1:s],h=[n&&a>1?a-1:a,n&&l>1?l-1:l],d=c[0]/h[0],p=c[1]/h[1],f=this.readSync(t.dataId);let A=0;for(let m=0;m<r;m++){const t=m*e.strides[0];for(let n=0;n<a;n++){const r=n*d,a=Math.floor(r),c=Math.min(Math.ceil(r),i-1),h=t+a*e.strides[1],m=t+c*e.strides[1],g=r-a,y=1-g;for(let t=0;t<l;t++){const n=t*p,r=Math.floor(n),i=Math.min(Math.ceil(n),s-1),a=n-r,l=1-a,c=h+r*e.strides[2],d=h+i*e.strides[2],w=m+r*e.strides[2],b=m+i*e.strides[2],v=y*l,x=y*a,_=g*l,C=g*a;for(let t=0;t<o;t++){const e=f[A++];u[c+t]+=e*v,u[d+t]+=e*x,u[w+t]+=e*_,u[b+t]+=e*C}}}}return Sd(u,[r,s,i,o],e.dtype)}resizeNearestNeighbor(t,e,n,r){mC(t,"resizeNearestNeighbor");const[i,s,o,a]=t.shape,l=this.readSync(t.dataId),u=new Float32Array(i*e*n*a),c=[r&&e>1?s-1:s,r&&n>1?o-1:o],h=[r&&e>1?e-1:e,r&&n>1?n-1:n],d=c[0]/h[0],p=c[1]/h[1];let f=0;for(let A=0;A<i;A++){const i=A*t.strides[0];for(let c=0;c<e;c++){const e=d*c,h=i+Math.min(s-1,r?Math.round(e):Math.floor(e))*t.strides[1];for(let i=0;i<n;i++){const e=p*i,n=h+Math.min(o-1,r?Math.round(e):Math.floor(e))*t.strides[2];for(let t=0;t<a;t++)u[f++]=l[n+t]}}}return $a(u,[i,e,n,a],t.dtype)}resizeNearestNeighborBackprop(t,e,n){mC([t,e],"resizeNearestNeighborBackprop");const[r,i,s,o]=e.shape,[,a,l]=t.shape,u=new Float32Array(r*i*s*o),c=this.readSync(t.dataId),h=[n&&a>1?i-1:i,n&&l>1?s-1:s],d=[n&&a>1?a-1:a,n&&l>1?l-1:l],p=h[0]/d[0],f=h[1]/d[1],A=1/p,m=1/f,g=2*Math.ceil(A)+2,y=2*Math.ceil(m)+2;for(let w=0;w<r;w++){const r=w*e.strides[0];for(let h=0;h<i;h++){const d=r+h*e.strides[1],w=Math.floor(h*A),b=Math.floor(w-g/2);for(let A=0;A<s;A++){const w=d+A*e.strides[2],v=Math.floor(A*m),x=Math.floor(v-y/2);for(let e=0;e<o;e++){let o=0;for(let u=0;u<g;u++){const d=u+b;if(d<0||d>=a)continue;const m=r+d*t.strides[1],g=d*p;if(h===Math.min(i-1,n?Math.round(g):Math.floor(g)))for(let r=0;r<y;r++){const i=r+x;if(i<0||i>=l)continue;const a=m+i*t.strides[2],u=i*f;A===Math.min(s-1,n?Math.round(u):Math.floor(u))&&(o+=c[a+e])}}u[w+e]=o}}}}return Sd(u,e.shape,e.dtype)}batchNorm(t,e,n,r,i,s){mC([t,e,n,i,r],"batchNorm");const o=this.readSync(t.dataId),a=this.readSync(e.dataId),l=this.readSync(n.dataId),u=i?this.readSync(i.dataId):new Float32Array([1]),c=r?this.readSync(r.dataId):new Float32Array([0]),h=new Float32Array(o.length),d=c.length,p=u.length,f=l.length,A=a.length;let m=0,g=0,y=0,w=0;for(let b=0;b<o.length;++b)h[b]=c[m++]+(o[b]-a[g++])*u[y++]/Math.sqrt(l[w++]+s),m>=d&&(m=0),g>=A&&(g=0),y>=p&&(y=0),w>=f&&(w=0);return Sd(h,t.shape)}localResponseNormalization4D(t,e,n,r,i){mC(t,"localResponseNormalization4D");const s=t.shape[3],o=s-1,a=this.readSync(t.dataId),l=t.size,u=new Float32Array(l);function c(t){const n=t%s;let r=t-n+Math.max(0,n-e);const i=t-n+Math.min(n+e,o);let l=0;for(;r<=i;r++){const t=a[r];l+=t*t}return l}for(let h=0;h<l;h++){const t=c(h),e=a[h]*Math.pow(n+r*t,-i);u[h]=e}return Sd(u,t.shape)}LRNGrad(t,e,n,r,i,s,o){mC(t,"LRNGrad");const a=t.shape[3],l=this.readSync(t.dataId),u=this.readSync(e.dataId),c=this.readSync(n.dataId),h=new Float32Array(t.size),d=t.size;for(let p=0;p<d;p++){const t=p%a,e=p-t+Math.max(0,t-r),n=p-t+Math.min(a,t+r+1);let d=0;for(let r=e;r<n;r++)d+=Math.pow(u[r],2);d=s*d+i;for(let r=e;r<n;r++){let t=-2*s*o*u[r]*c[p]/d;p===r&&(t+=Math.pow(d,-o)),t*=l[p],h[r]+=t}}return Sd(h,t.shape)}multinomial(t,e,n,r){mC(t,"multinomial");const i=e?t:yd(t),s=i.shape[0],o=i.shape[1],a=Vo([s,n],"int32"),l=this.readSync(a.dataId),u=this.readSync(i.dataId);for(let c=0;c<s;++c){const t=c*o,e=new Float32Array(o-1);e[0]=u[t];for(let n=1;n<e.length;++n)e[n]=e[n-1]+u[t+n];const i=jh.alea(r.toString()),s=c*n;for(let r=0;r<n;++r){const t=i();l[s+r]=e.length;for(let n=0;n<e.length;n++)if(t<e[n]){l[s+r]=n;break}}}return a}oneHot(t,e,n,r){mC(t,"oneHot");const i=new Float32Array(t.size*e);i.fill(r);const s=this.readSync(t.dataId);for(let o=0;o<t.size;++o)s[o]>=0&&s[o]<e&&(i[o*e+s[o]]=n);return Cd(i,[t.size,e],"int32")}nonMaxSuppression(t,e,n,r,i){mC(t,"nonMaxSuppression");const s=this.readSync(t.dataId),o=this.readSync(e.dataId);return wC(s,o,n,r,i)}fft(t){return this.fftBatch(t,!1)}ifft(t){return this.fftBatch(t,!0)}fftBatch(t,e){const n=t.shape[0],r=t.shape[1],i=Fc(t.shape,"float32"),s=Fc(t.shape,"float32"),o=nh(t).as2D(n,r),a=eh(t).as2D(n,r);for(let l=0;l<n;l++){const t=o.slice([l,0],[1,r]),n=a.slice([l,0],[1,r]),u=$o(t,n),c=this.readSync(this.fftImpl(u,e).dataId);for(let e=0;e<r;e++){const t=g.getComplexWithIndex(c,e);i.values[l*r+e]=t.real,s.values[l*r+e]=t.imag}}return $o(i.toTensor(),s.toTensor()).as2D(n,r)}fftImpl(t,e){const n=t.as1D(),r=n.size;if(this.isExponentOf2(r)){let i=this.fftRadix2(n,r,e).as2D(t.shape[0],t.shape[1]);return e&&(i=$o(nh(i).div(ki(r)),eh(i).div(ki(r)))),i}{const n=this.readSync(t.dataId),i=this.fourierTransformByMatmul(n,r,e),s=g.splitRealAndImagArrays(i);return $o(s.real,s.imag).as2D(t.shape[0],t.shape[1])}}isExponentOf2(t){return 0==(t&t-1)}fftRadix2(t,e,n){if(1===e)return t;const r=this.readSync(t.dataId),i=e/2,s=g.complexWithEvenIndex(r);let o=$o(s.real,s.imag).as1D();const a=g.complexWithOddIndex(r);let l=$o(a.real,a.imag).as1D();o=this.fftRadix2(o,i,n),l=this.fftRadix2(l,i,n);const u=g.exponents(e,n),c=$o(u.real,u.imag).mul(l),h=o.add(c),d=o.sub(c),p=nh(h).concat(nh(d)),f=eh(h).concat(eh(d));return $o(p,f).as1D()}fourierTransformByMatmul(t,e,n){const r=new Float32Array(2*e);for(let i=0;i<e;i++){let s=0,o=0;for(let r=0;r<e;r++){const a=g.exponent(i*r,e,n),l=g.getComplexWithIndex(t,r);s+=l.real*a.real-l.imag*a.imag,o+=l.real*a.imag+l.imag*a.real}n&&(s/=e,o/=e),g.assignToTypedArray(r,s,o,i)}return r}depthToSpace(t,e,n){r.assert("NHWC"===n,()=>"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+n),r.assert(e>1,()=>"blockSize should be > 1 for depthToSpace, but was: "+e);const i=t.shape[0],s=t.shape[1],o=t.shape[2],a=t.shape[3],l=s*e,u=o*e,c=a/(e*e),h=this.readSync(t.dataId),d=new Float32Array(i*l*u*c);let p=0;for(let r=0;r<i;++r)for(let t=0;t<l;++t){const n=Math.floor(t/e),i=t%e;for(let t=0;t<u;++t){const l=Math.floor(t/e),u=(i*e+t%e)*c;for(let t=0;t<c;++t)d[p++]=h[t+u+a*(l+o*(n+s*r))]}}return Sd(d,[i,l,u,c])}broadcastedBinaryOp(t,e,n,r){const i=g.assertAndGetBroadcastShape(t.shape,e.shape),s=Fc(i,n),o=this.readSync(t.dataId),a=this.readSync(e.dataId),l=g.getBroadcastDims(t.shape,i),u=g.getBroadcastDims(e.shape,i),c=s.values;if(l.length+u.length===0)for(let h=0;h<c.length;++h)c[h]=r(o[h%o.length],a[h%a.length]);else{const n=this.bufferSync(t),i=this.bufferSync(e);for(let h=0;h<c.length;++h){const d=s.indexToLoc(h),p=d.slice(-t.rank);l.forEach(t=>p[t]=0);const f=n.locToIndex(p),A=d.slice(-e.rank);u.forEach(t=>A[t]=0);const m=i.locToIndex(A);c[h]=r(o[f],a[m])}}return s.toTensor()}broadcastedBinaryComplexOp(t,e,n){const r=g.assertAndGetBroadcastShape(t.shape,e.shape),i=Fc(r,"float32"),s=Fc(r,"float32"),o=this.readSync(t.dataId),a=this.readSync(e.dataId),l=g.getBroadcastDims(t.shape,r),u=g.getBroadcastDims(e.shape,r),c=i.values,h=s.values;if(l.length+u.length===0)for(let d=0;d<c.length;d++){const t=d%o.length,e=d%a.length,r=n(o[2*t],o[2*t+1],a[2*e],a[2*e+1]);c[d]=r.real,h[d]=r.imag}else{const r=this.bufferSync(this.data.get(t.dataId).complexTensors.real),s=this.bufferSync(this.data.get(e.dataId).complexTensors.real);for(let d=0;d<c.length;d++){const p=i.indexToLoc(d),f=p.slice(-t.rank);l.forEach(t=>f[t]=0);const A=r.locToIndex(f),m=p.slice(-e.rank);u.forEach(t=>m[t]=0);const g=s.locToIndex(m),y=n(o[2*A],o[2*A+1],a[2*g],a[2*g+1]);c[d]=y.real,h[d]=y.imag}}return this.complex(i.toTensor(),s.toTensor())}split(t,e,n){return bC(t,e,n)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}cropAndResize(t,e,n,r,i,s){const[o,a,l,u]=t.shape,c=e.shape[0],[h,d]=r,p=Fc([c,h,d,u],"float32"),f=this.readSync(e.dataId),A=this.readSync(n.dataId),m=this.readSync(t.dataId),g=t.strides,y=p.strides;for(let w=0;w<c;w++){const t=4*w,e=f[t],n=f[t+1],r=f[t+2],c=f[t+3],b=A[w];if(b>=o)continue;const v=h>1?(r-e)*(a-1)/(h-1):0,x=d>1?(c-n)*(l-1)/(d-1):0;for(let o=0;o<h;o++){const t=h>1?e*(a-1)+o*v:.5*(e+r)*(a-1);if(t<0||t>a-1)for(let e=0;e<d;e++)for(let t=0;t<u;t++)p.values[t+e*y[2]+o*y[1]+w*y[0]]=s;else if("bilinear"===i){const e=Math.floor(t),r=Math.ceil(t),i=t-e;for(let t=0;t<d;t++){const a=d>1?n*(l-1)+t*x:.5*(n+c)*(l-1);if(a<0||a>l-1){for(let e=0;e<u;e++)p.values[e+t*y[2]+o*y[1]+w*y[0]]=s;continue}const h=Math.floor(a),f=Math.ceil(a),A=a-h;for(let n=0;n<u;n++){let s=n+h*g[2]+e*g[1]+b*g[0];const a=m[s];s=n+f*g[2]+e*g[1]+b*g[0];const l=m[s];s=n+h*g[2]+r*g[1]+b*g[0];const u=m[s];s=n+f*g[2]+r*g[1]+b*g[0];const c=m[s],d=a+(l-a)*A;s=n+t*y[2]+o*y[1]+w*y[0],p.values[s]=d+(u+(c-u)*A-d)*i}}}else for(let e=0;e<d;++e){const r=d>1?n*(l-1)+e*x:.5*(n+c)*(l-1);if(r<0||r>l-1){for(let t=0;t<u;t++)p.values[t+e*y[2]+o*y[1]+w*y[0]]=s;continue}const i=Math.round(r),a=Math.round(t);for(let t=0;t<u;t++)p.values[t+e*y[2]+o*y[1]+w*y[0]]=m[t+i*g[2]+a*g[1]+b*g[0]]}}}return p.toTensor()}sparseToDense(t,e,n,r){const{sliceRank:i,numUpdates:s,sliceSize:o,strides:a,outputSize:l}=g.calculateShapes(e,t,n);return this.scatter(t,e,n,l,o,s,i,a,r,!1)}gatherND(t,e){const n=e.shape,r=n[n.length-1],[i,s,o,a]=g.prepareAndValidate(t,e);if(0===s)return $a([],i,t.dtype);const l=new se([s,o],t.dtype),u=this.readSync(e.dataId),c=this.readSync(t.dataId);for(let h=0;h<s;h++){const e=[];let n=0;for(let t=0;t<r;t++){const i=u[h*r+t];n+=i*a[t],e.push(i)}if(n<0||n>=t.size/o)throw new Error(`Invalid indices: ${e} does not index into ${t.shape}`);for(let t=0;t<o;t++)l.values[h*o+t]=c[n*o+t]}return l.toTensor().reshape(i)}scatterND(t,e,n){const{sliceRank:r,numUpdates:i,sliceSize:s,strides:o,outputSize:a}=g.calculateShapes(e,t,n),l=ki(0);return this.scatter(t,e,n,a,s,i,r,o,l,!0)}fill(t,e,n){n=n||r.inferDtype(e);const i=r.getArrayFromDType(n,r.sizeFromShape(t));return i.fill(e),ju().makeTensor(i,t,n,this)}onesLike(t){if("string"===t.dtype)throw new Error("onesLike is not supported for string tensors");return this.fill(t.shape,1,t.dtype)}zerosLike(t){const e=r.getArrayFromDType(t.dtype,r.sizeFromShape(t.shape));return this.makeOutput(e,t.shape,t.dtype)}linspace(t,e,n){return g.linspaceImpl(t,e,n)}scatter(t,e,n,r,i,s,o,a,l,u){const c=[r/i,i],h=this.readSync(t.dataId),d=this.readSync(e.dataId);if(0===r)return $a([],n,e.dtype);const p=new se(c,e.dtype);p.values.fill(this.readSync(l.dataId)[0]);for(let f=0;f<s;f++){const t=[];let s=0;for(let e=0;e<o;e++){const n=h[f*o+e];t.push(n),s+=n*a[e]}if(s<0||s>=r/i)throw new Error(`Invalid indices: ${t} does not index into ${n}`);for(let n=0;n<i;n++)u?p.values[s*i+n]+=d[f*i+n]:p.values[s*i+n]=0===e.rank?d[0]:d[f*i+n]}return p.toTensor().reshape(n)}}const EC={kernelName:gn,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:i,filter:s}=t,{strides:o,pad:a,dilations:l}=n,u=e,c=r.toNestedArray(i.shape,u.data.get(i.dataId).values),h=r.toNestedArray(s.shape,u.data.get(s.dataId).values),{batchSize:d,inHeight:p,inWidth:f,inChannels:A,outHeight:m,outWidth:y,padInfo:w,strideHeight:b,strideWidth:v,filterHeight:x,filterWidth:_,dilationHeight:C,dilationWidth:S,outShape:E}=g.computeDilation2DInfo(i.shape,s.shape,o,a,"NHWC",l),B=r.makeZerosNestedTypedArray(E,i.dtype);for(let r=0;r<d;++r)for(let t=0;t<m;++t){const e=t*b-w.top;for(let n=0;n<y;++n){const i=n*v-w.left;for(let s=0;s<A;++s){let o=Number.MIN_SAFE_INTEGER;for(let t=0;t<x;++t){const n=e+t*C;if(n>=0&&n<p)for(let e=0;e<_;++e){const a=i+e*S;if(a>=0&&a<f){const i=c[r][n][a][s]+h[t][e][s];i>o&&(o=i)}}}B[r][t][n][s]=o}}}return{dataId:u.write(r.toTypedArray(B,i.dtype),E,i.dtype),shape:E,dtype:i.dtype}}},BC={kernelName:wn,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:i,filter:s,dy:o}=t,{strides:a,pad:l,dilations:u}=n,c=e,h=r.toNestedArray(i.shape,c.data.get(i.dataId).values),d=r.toNestedArray(s.shape,c.data.get(s.dataId).values),{batchSize:p,inHeight:f,inWidth:A,inChannels:m,outHeight:y,outWidth:w,padInfo:b,strideHeight:v,strideWidth:x,filterHeight:_,filterWidth:C,dilationHeight:S,dilationWidth:E,outShape:B}=g.computeDilation2DInfo(i.shape,s.shape,a,l,"NHWC",u);r.assert(o.rank===B.length,()=>`Error in ${wn}, dy must have the same rank as output ${B.length}, but got `+o.rank);const k=r.toNestedArray(B,c.data.get(o.dataId).values),N=r.makeZerosNestedTypedArray(s.shape,s.dtype);for(let r=0;r<p;++r)for(let t=0;t<y;++t){const e=t*v-b.top;for(let n=0;n<w;++n){const i=n*x-b.left;for(let s=0;s<m;++s){let o=Number.MIN_SAFE_INTEGER,a=0,l=0;for(let t=0;t<_;++t){const n=e+t*S;if(n>=0&&n<f)for(let e=0;e<C;++e){const u=i+e*E;if(u>=0&&u<A){const i=h[r][n][u][s]+d[t][e][s];i>o&&(o=i,a=t,l=e)}}}N[a][l][s]+=k[r][t][n][s]}}}return{dataId:c.write(r.toTypedArray(N,i.dtype),s.shape,s.dtype),shape:s.shape,dtype:s.dtype}}},kC={kernelName:yn,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:i,filter:s,dy:o}=t,{strides:a,pad:l,dilations:u}=n,c=e,h=r.toNestedArray(i.shape,c.data.get(i.dataId).values),d=r.toNestedArray(s.shape,c.data.get(s.dataId).values),{batchSize:p,inHeight:f,inWidth:A,inChannels:m,outHeight:y,outWidth:w,padInfo:b,strideHeight:v,strideWidth:x,filterHeight:_,filterWidth:C,dilationHeight:S,dilationWidth:E,outShape:B}=g.computeDilation2DInfo(i.shape,s.shape,a,l,"NHWC",u);r.assert(o.rank===B.length,()=>`Error in ${yn}, dy must have the same rank as output ${B.length}, but got `+o.rank);const k=r.toNestedArray(B,c.data.get(o.dataId).values),N=r.makeZerosNestedTypedArray(i.shape,i.dtype);for(let r=0;r<p;++r)for(let t=0;t<y;++t){const e=t*v-b.top;for(let n=0;n<w;++n){const i=n*x-b.left;for(let s=0;s<m;++s){let o=Number.MIN_SAFE_INTEGER,a=e<0?0:e,l=i<0?0:i;for(let t=0;t<_;++t){const n=e+t*S;if(n>=0&&n<f)for(let e=0;e<C;++e){const u=i+e*E;if(u>=0&&u<A){const i=h[r][n][u][s]+d[t][e][s];i>o&&(o=i,a=n,l=u)}}}N[r][a][l][s]+=k[r][t][n][s]}}}return{dataId:c.write(r.toTypedArray(N,i.dtype),i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}};function NC(t,e){return{kernelName:t,backendName:"cpu",kernelFunc:({inputs:n,backend:r})=>{const{a:i,b:s}=n,o=r;mC([i,s],t);const a=o.data.get(i.dataId).values,l=o.data.get(s.dataId).values,[u,c]=e(i.shape,s.shape,a,l,i.dtype);return{dataId:o.write(u,c,i.dtype),shape:c,dtype:i.dtype}}}}function IC(t){return(e,n,i,s,o)=>{const a=g.assertAndGetBroadcastShape(e,n),l=a.length,u=r.computeStrides(a),c=r.sizeFromShape(a),h=r.getTypedArrayFromDType(o,c),d=e.length,p=n.length,f=r.computeStrides(e),A=r.computeStrides(n),m=g.getBroadcastDims(e,a),y=g.getBroadcastDims(n,a);if(m.length+y.length===0)for(let r=0;r<h.length;++r)h[r]=t(i[r%i.length],s[r%s.length]);else for(let g=0;g<h.length;++g){const e=r.indexToLoc(g,l,u),n=e.slice(-d);m.forEach(t=>n[t]=0);const o=r.locToIndex(n,d,f),a=e.slice(-p);y.forEach(t=>a[t]=0);const c=r.locToIndex(a,p,A);h[g]=t(i[o],s[c])}return[h,a]}}const FC=IC((t,e)=>t/e),TC=NC(bn,FC),RC={kernelName:Zn,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:i}=t,{reductionIndices:s,keepDims:o}=e,a=n;let l=i.shape;const u=l.length,c=r.parseAxisParam(s,l);let h=c;const d=g.getAxesPermutation(h,u);let p=a.data.get(i.dataId).values;if(null!=d){const t=new Array(u);for(let e=0;e<t.length;e++)t[e]=l[d[e]];p=AC(p,l,i.dtype,d,t),h=g.getInnerMostAxes(h.length,u),l=t}mC(i,"max"),g.assertAxesAreInnerMostDims("max",h,u);const[f,A]=g.computeOutAndReduceShapes(l,h),m=fC(p,r.sizeFromShape(A),f,i.dtype),y=a.write(m,f,i.dtype);let w=f;return o&&(w=g.expandShapeToKeepDim(f,c)),{dataId:y,shape:w,dtype:i.dtype}}},OC={kernelName:sr,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:i}=t,{filterSize:s,strides:o,pad:a,includeBatchInIndex:l}=e,u=n;mC(i,"MaxPoolWithArgmax");const c=u.data.get(i.dataId).values,h=g.computePool2DInfo(i.shape,s,o,[1,1],a),[d,p]=function(t,e,n,i,s){const o=gC(t,0,n,r.computeStrides(e),s,"max"),a=yC(t,e,n,s,!0,i);return[o.values,a.values]}(c,i.shape,i.dtype,l,h),f=u.write(d,h.outShape,i.dtype),A=u.write(p,h.outShape,i.dtype);return[{dataId:f,shape:h.outShape,dtype:i.dtype},{dataId:A,shape:h.outShape,dtype:"int32"}]}},DC=y.nonMaxSuppressionV4Impl,LC={kernelName:fr,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{boxes:r,scores:i}=t,{maxOutputSize:s,iouThreshold:o,scoreThreshold:a,padToMaxOutputSize:l}=n,u=e;mC(r,"NonMaxSuppressionPadded");const c=u.data.get(r.dataId).values,h=u.data.get(i.dataId).values,{selectedIndices:d,validOutputs:p}=DC(c,h,s,o,a,l);return[d,p]}},MC=y.nonMaxSuppressionV5Impl,UC={kernelName:Ar,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{boxes:r,scores:i}=t,{maxOutputSize:s,iouThreshold:o,scoreThreshold:a,softNmsSigma:l}=n,u=e;mC(r,"NonMaxSuppressionWithScore");const c=u.data.get(r.dataId).values,h=u.data.get(i.dataId).values,d=s,p=o,f=a,A=l,{selectedIndices:m,selectedScores:g}=MC(c,h,d,p,f,A);return[m,g]}},PC={kernelName:hi,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:i}=t,{radians:s,fillValue:o,center:a}=e,l=n,u=r.getTypedArrayFromDType(i.dtype,r.sizeFromShape(i.shape)),[c,h,d,p]=i.shape,[f,A]=g.getImageCenter(a,h,d),m=Math.sin(s),y=Math.cos(s),w=l.data.get(i.dataId).values;for(let r=0;r<c;r++){const t=r*d*h*p;for(let e=0;e<h;e++){const n=e*(d*p);for(let r=0;r<d;r++){const i=r*p;for(let s=0;s<p;s++){const a=[c,e,r,s],l=a[2],g=a[1];let b=(l-f)*y-(g-A)*m,v=(l-f)*m+(g-A)*y;b=Math.round(b+f),v=Math.round(v+A);let x=o;"number"!=typeof o&&(x=3===s?255:o[s]),b>=0&&b<d&&v>=0&&v<h&&(x=w[t+v*(d*p)+b*p+s]),u[t+n+i+s]=x}}}}return{dataId:l.write(u,i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}},zC={kernelName:Yr,backendName:"cpu",kernelFunc:({inputs:t,backend:e})=>{const{x:n}=t,r=e;mC(n,"square");const i=r.data.get(n.dataId).values,s=new Float32Array(i.length);for(let o=0;o<i.length;++o){const t=i[o];s[o]=t*t}return{dataId:r.write(s,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}},QC=IC((t,e)=>{const n=t-e;return n*n}),HC=[EC,kC,BC,TC,OC,RC,LC,UC,PC,zC,NC(Xr,QC),{kernelName:si,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{perm:i}=e,s=n;mC(r,"transpose");const o=new Array(r.shape.length);for(let l=0;l<o.length;l++)o[l]=r.shape[i[l]];const a=AC(s.data.get(r.dataId).values,r.shape,r.dtype,i,o);return{dataId:s.write(a,o,r.dtype),shape:o,dtype:r.dtype}}}];for(const dk of HC)tt(dk);sc("cpu",()=>new SC,1);const $C={},VC={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function qC(t){t in $C||($C[t]=function(t){if(1!==t&&2!==t)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const e=function(t){if("undefined"!=typeof OffscreenCanvas&&2===t)return new OffscreenCanvas(300,150);if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(t);return e.addEventListener("webglcontextlost",e=>{e.preventDefault(),delete $C[t]},!1),1===t?e.getContext("webgl",VC)||e.getContext("experimental-webgl",VC):e.getContext("webgl2",VC)}(t));const e=$C[t];return e.isContextLost()?(delete $C[t],qC(t)):(e.disable(e.DEPTH_TEST),e.disable(e.STENCIL_TEST),e.disable(e.BLEND),e.disable(e.DITHER),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SAMPLE_COVERAGE),e.enable(e.SCISSOR_TEST),e.enable(e.CULL_FACE),e.cullFace(e.BACK),$C[t])}var jC,KC,WC;function GC(t,e){return[e,t]}function XC(t){const e=r.sizeFromShape(t),n=Math.ceil(e/4);return r.sizeToSquarishShape(n)}function YC(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function JC(t,e){const n=t;let r,i,s,o,a,l,u,c,h,d;return 2===V().getNumber("WEBGL_VERSION")?(r=n.R32F,i=n.R16F,s=n.RGBA16F,o=n.RGBA32F,a=n.RED,u=4,c=1,h=n.HALF_FLOAT,d=n.FLOAT):(r=t.RGBA,i=t.RGBA,s=t.RGBA,o=n.RGBA,a=t.RGBA,u=4,c=4,h=null!=e?e.HALF_FLOAT_OES:null,d=t.FLOAT),l=t.RGBA,{internalFormatFloat:r,internalFormatHalfFloat:i,internalFormatPackedHalfFloat:s,internalFormatPackedFloat:o,textureFormatFloat:a,downloadTextureFormat:l,downloadUnpackNumChannels:u,defaultNumChannels:c,textureTypeHalfFloat:h,textureTypeFloat:d}}function ZC(t,e){const n=e();return V().getBool("DEBUG")&&function(t){const e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+function(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+e}}(t,e))}(t),n}function tS(t){return!!(V().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===t||5.96e-8<Math.abs(t)&&Math.abs(t)<65504)}function eS(t,e){return lS(t,()=>t.getExtension(e),'Extension "'+e+'" not supported on this browser.')}!function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"}(jC||(jC={})),function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"}(KC||(KC={})),function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(WC||(WC={}));const nS=/ERROR: [0-9]+:([0-9]+):/g;function rS(t,e){if(ZC(t,()=>t.validateProgram(e)),!1===t.getProgramParameter(e,t.VALIDATE_STATUS))throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function iS(t,e,n,r,i,s,o){const a=t.getAttribLocation(e,n);return-1!==a&&(ZC(t,()=>t.bindBuffer(t.ARRAY_BUFFER,r)),ZC(t,()=>t.vertexAttribPointer(a,i,t.FLOAT,!1,s,o)),ZC(t,()=>t.enableVertexAttribArray(a)),!0)}function sS(t,e,n){ZC(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),ZC(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0))}function oS(t,e){ZC(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,e)),ZC(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function aS(t){const e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+function(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+e}}(t,e))}function lS(t,e,n){const r=ZC(t,()=>e());if(null==r)throw new Error(n);return r}function uS(t,e=2){return r.sizeFromShape(t.slice(0,t.length-e))}function cS(t){if(0===t.length)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function hS(t){let e=[1,1,1];return 0===t.length||1===t.length&&1===t[0]||(e=[uS(t),...cS(t)]),e}function dS(t){return t%2==0}function pS(t,e){if(t=t.slice(-2),e=e.slice(-2),r.arraysEqual(t,e))return!0;if(!t.length||!e.length)return!0;if(0===t[0]||0===t[1]||0===e[0]||0===e[1])return!0;if(t.length!==e.length){const n=t.slice(-1)[0],r=e.slice(-1)[0];if(n===r)return!0;if(dS(n)&&dS(r)&&(1===t[0]||1===e[0]))return!0}return t[1]===e[1]&&dS(t[0])&&dS(e[0])}let fS,AS;function mS(t,e){return null!=t.getExtension(e)}function gS(t){try{if(null!=qC(t))return!0}catch(e){return!1}return!1}function yS(t){const e=JC(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);const r=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);const i=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(r),i}const wS=V();wS.registerFlag("HAS_WEBGL",()=>wS.getNumber("WEBGL_VERSION")>0),wS.registerFlag("WEBGL_VERSION",()=>gS(2)?2:gS(1)?1:0),wS.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1),wS.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>2===wS.get("WEBGL_VERSION")),wS.registerFlag("WEBGL_CPU_FORWARD",()=>!0),wS.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1),wS.registerFlag("WEBGL_PACK",()=>wS.getBool("HAS_WEBGL")),wS.registerFlag("WEBGL_PACK_NORMALIZATION",()=>wS.getBool("WEBGL_PACK")),wS.registerFlag("WEBGL_PACK_CLIP",()=>wS.getBool("WEBGL_PACK")),wS.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>!1),wS.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>wS.getBool("WEBGL_PACK")),wS.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>wS.getBool("WEBGL_PACK")),wS.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>wS.getBool("WEBGL_PACK")),wS.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>wS.getBool("WEBGL_PACK")),wS.registerFlag("WEBGL_PACK_REDUCE",()=>wS.getBool("WEBGL_PACK")),wS.registerFlag("WEBGL_LAZILY_UNPACK",()=>wS.getBool("WEBGL_PACK")),wS.registerFlag("WEBGL_CONV_IM2COL",()=>wS.getBool("WEBGL_PACK")),wS.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>function(t){if(null==fS){const e=qC(t);fS=e.getParameter(e.MAX_TEXTURE_SIZE)}return fS}(wS.getNumber("WEBGL_VERSION"))),wS.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>function(t){if(null==AS){const e=qC(t);AS=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,AS)}(wS.getNumber("WEBGL_VERSION"))),wS.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const t=wS.getNumber("WEBGL_VERSION");return 0===t?0:function(t){if(0===t)return 0;let e;const n=qC(t);return e=mS(n,"EXT_disjoint_timer_query_webgl2")&&2===t?2:mS(n,"EXT_disjoint_timer_query")?1:0,e}(t)}),wS.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>wS.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!s.isMobile()),wS.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>function(t){if(0===t)return!1;const e=qC(t);if(1===t){if(!mS(e,"OES_texture_float"))return!1}else if(!mS(e,"EXT_color_buffer_float"))return!1;return yS(e)}(wS.getNumber("WEBGL_VERSION"))),wS.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>!wS.getBool("WEBGL_FORCE_F16_TEXTURES")&&wS.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")),wS.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>function(t){if(0===t)return!1;const e=qC(t);if(1!==t){if(mS(e,"EXT_color_buffer_float"))return yS(e);const t="EXT_color_buffer_half_float";if(mS(e,t)){const n=e.getExtension(t);return function(t,e){const n=JC(t,e),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const i=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,i),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);const s=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(i),s}(e,n)}return!1}return!!mS(e,"OES_texture_float")&&!!mS(e,"WEBGL_color_buffer_float")&&yS(e)}(wS.getNumber("WEBGL_VERSION"))),wS.registerFlag("WEBGL_FENCE_API_ENABLED",()=>{return 2===(t=wS.getNumber("WEBGL_VERSION"))&&null!=qC(t).fenceSync;var t}),wS.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>wS.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0),wS.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if(t<0&&-1!==t)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${t}.`)});class bS{constructor(t,e){this.outputShape=[],this.outputShape=t,this.variableNames=e.map((t,e)=>"T"+e);const n=[];this.variableNames.forEach(t=>{n.push(`float v${t} = get${t}AtOutCoords();`)});const r=this.variableNames.map(t=>"v"+t).join(" + ");this.userCode=`\n      void main() {\n        ${n.join("\n        ")}\n\n        float result = ${r};\n        setOutput(result);\n      }\n    `}}class vS{constructor(t,e){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=e.map((t,e)=>"T"+e);const n=[];this.variableNames.forEach(t=>{n.push(`vec4 v${t} = get${t}AtOutCoords();`)});const r=this.variableNames.map(t=>"v"+t).join(" + ");this.userCode=`\n      void main() {\n        ${n.join("\n        ")}\n\n        vec4 result = ${r};\n        setOutput(result);\n      }\n    `}}class xS{constructor(t,e,n){this.variableNames=["A"];const r=t.windowSize,i=t.batchSize,s=Math.ceil(t.inSize/r);n||this.variableNames.push("bestIndicesA"),this.outputShape=[i,s],this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${r};\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ${r}; i++) {\n          int inIdx = ${n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));"};\n          float candidate = getA(batch, inIdx);\n          if (candidate ${"max"===e?">":"<"} bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    `}}function _S(t,e){return["x","y","z","w","u","v"].slice(0,e).map(e=>`${t}.${e}`)}function CS(t,e){return 1===e?[t]:_S(t,e)}function SS(){let t,e,n,r,i,s,o,a,l,u;return 2===V().getNumber("WEBGL_VERSION")?(t="#version 300 es",e="in",n="out",r="in",i="texture",s="outputColor",o="out vec4 outputColor;",a="\n      bool isnan_custom(float val) {\n        return (val > 0.0 || val < 0.0) ? false : val != 0.0;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ",l="",u="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(t="",e="attribute",n="varying",r="varying",i="texture2D",s="gl_FragColor",o="",a="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",l="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",u="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:i,output:s,defineOutput:o,defineSpecialNaN:a,defineSpecialInf:l,defineRound:u}}function ES(t,e,n="index"){const i=r.computeStrides(e);return i.map((e,r)=>`int ${t[r]} = ${n} / ${e}; ${r===i.length-1?`int ${t[r+1]} = ${n} - ${t[r]} * ${e}`:`index -= ${t[r]} * ${e}`};`).join("")}function BS(t){const e=r.computeStrides(t).map(t=>t.toString());return`\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;\n  }\n`}const kS="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",{getBroadcastDims:NS}=g;const IS="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",FS="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",TS="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",RS="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function OS(t){return"offset"+t}function DS(t){const e=t.name,n=r.sizeFromShape(t.shapeInfo.logicalShape);return n<2?`return ${e};`:`\n    for (int i = 0; i < ${n}; i++) {\n      if (i == index) {\n        return ${e}[i];\n      }\n    }\n  `}function LS(t){if(t<=1)return"int";if(2===t)return"ivec2";if(3===t)return"ivec3";if(4===t)return"ivec4";if(5===t)return"ivec5";if(6===t)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function MS(t,e){const n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function US(t,e){return e.map(e=>t[e]).join(", ")}class PS{constructor(t,e,n,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,r.assert(t.length>2,()=>`Packed arg${n.charAt(0).toUpperCase()+n.slice(1)} supports only inputs with rank above 2.`);const s=Math.ceil(t[t.length-1]/e);this.outputShape=t.slice(0,-1),s>1&&this.outputShape.push(s),i||this.variableNames.push("bestIndicesA");const o=this.outputShape,a=o.length,l=LS(a),u=CS("coords",a);let c,h;if(1===s){h=a+1;const t=LS(h);c=`\n        ${t} sourceLocR = ${t}(${u.join()}, 0);\n        ++${u[a-1]};\n        ${t} sourceLocG = ${t}(${u.join()}, 0);\n        ++${u[a-2]};\n        ${t} sourceLocA = ${t}(${u.join()}, 0);\n        --${u[a-1]};\n        ${t} sourceLocB = ${t}(${u.join()}, 0);\n        --${u[a-2]};`}else h=a,c=`\n        ${l} sourceLocR = coords;\n        ++${u[a-1]};\n        ${l} sourceLocG = coords;\n        ++${u[a-2]};\n        ${l} sourceLocA = coords;\n        --${u[a-1]};\n        ${l} sourceLocB = coords;\n        --${u[a-2]};`;const d=["x","y","z","w","u","v"].slice(0,h),p="."+d[h-1],f=d.map(t=>"int "+t),A=CS("sourceLocR",h-1).concat("inIdx.r"),m=CS("sourceLocG",h-1).concat("inIdx.g"),g=CS("sourceLocB",h-1).concat("inIdx.b"),y=CS("sourceLocA",h-1).concat("inIdx.a"),w="max"===n?"greaterThan":"lessThan",b=i?"":`\n          inIdx = round(vec4(getBestIndicesAChannel(${A.join()}),\n                             getBestIndicesAChannel(${m.join()}),\n                             getBestIndicesAChannel(${g.join()}),\n                             getBestIndicesAChannel(${y.join()})));`,v=`vec4(\n            getAChannel(${A.join()}),\n            hasNextCol ? getAChannel(${m.join()}) : 0.,\n            hasNextRow ? getAChannel(${g.join()}) : 0.,\n            hasNextRow && hasNextCol ? getAChannel(${y.join()}) : 0.)`,x=i?"":`\n      float getBestIndicesAChannel(${f.join()}) {\n        return getChannel(getBestIndicesA(${d.join()}),\n                                          vec2(${d.slice(-2).join()}));\n      }`;this.userCode=`\n      float getAChannel(${f.join()}) {\n        return getChannel(getA(${d.join()}),\n                               vec2(${d.slice(-2).join()}));\n      }\n      ${x}\n      void main() {\n        ${l} coords = getOutputCoords();\n        bool hasNextCol = ${u[a-1]} < ${o[a-1]-1};\n        bool hasNextRow = ${u[a-2]} < ${o[a-2]-1};\n        ${c}\n        ivec4 srcIdx = ivec4(sourceLocR${p}, sourceLocG${p},\n          sourceLocB${p}, sourceLocA${p}) * ${e};\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ${v};\n\n        for (int i = 0; i < ${e}; i++) {\n          inIdx = srcIdx;\n          ${b}\n          vec4 candidate = ${v};\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(${w}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    `}}class zS{constructor(t){this.variableNames=["dy"],this.outputShape=t.inShape;const e=t.effectiveFilterHeight,n=t.effectiveFilterWidth;this.userCode=`\n      const ivec2 pads = ivec2(${e-1-t.padInfo.top}, ${n-1-t.padInfo.left});\n      const float avgMultiplier = float(${1/(t.filterHeight*t.filterWidth)});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${e};\n            wR += ${t.dilationHeight}) {\n          float dyR = float(dyRCorner + wR) / ${t.strideHeight}.0;\n\n          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ${n};\n            wC+= ${t.dilationWidth}) {\n            float dyC = float(dyCCorner + wC) / ${t.strideWidth}.0;\n\n            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class QS{constructor(t){this.variableNames=["dy"],this.outputShape=t.inShape;const e=t.effectiveFilterDepth,n=t.effectiveFilterHeight,r=t.effectiveFilterWidth;this.userCode=`\n      const ivec3 pads = ivec3(${e-1-t.padInfo.front}, ${n-1-t.padInfo.top}, ${r-1-t.padInfo.left});\n      const float avgMultiplier = float(${1/(t.filterDepth*t.filterHeight*t.filterWidth)});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ${e};\n            wD += ${t.dilationDepth}) {\n          float dyD = float(dyDCorner + wD) / ${t.strideDepth}.0;\n\n          if (dyD < 0.0 || dyD >= ${t.outDepth}.0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ${n};\n              wR += ${t.dilationHeight}) {\n            float dyR = float(dyRCorner + wR) / ${t.strideHeight}.0;\n\n            if (dyR < 0.0 || dyR >= ${t.outHeight}.0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ${r};\n                wC += ${t.dilationWidth}) {\n              float dyC = float(dyCCorner + wC) / ${t.strideWidth}.0;\n\n              if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class HS{constructor(t,e,n,r,i,s){this.outputShape=[],this.variableNames=["x","mean","variance"],g.assertAndGetBroadcastShape(t,e),g.assertAndGetBroadcastShape(t,n);let o="0.0";null!=r&&(g.assertAndGetBroadcastShape(t,r),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");let a="1.0";null!=i&&(g.assertAndGetBroadcastShape(t,i),this.variableNames.push("scale"),a="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ${o};\n        float scale = ${a};\n        float inv = scale * inversesqrt(variance + float(${s}));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    `}}class $S{constructor(t,e,n,r,i,s){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],g.assertAndGetBroadcastShape(t,e),g.assertAndGetBroadcastShape(t,n);let o="vec4(0.0)";null!=r&&(g.assertAndGetBroadcastShape(t,r),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");let a="vec4(1.0)";null!=i&&(g.assertAndGetBroadcastShape(t,i),this.variableNames.push("scale"),a="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`\n      void main() {\n        vec4 offset = ${o};\n        vec4 scale = ${a};\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(${s}));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    `}}class VS{constructor(t,e,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=g.assertAndGetBroadcastShape(e,n),this.userCode=`\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ${t}\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    `}}const qS="return a + b;",jS="return a - b;",KS="return a * b;",WS="return (a < 0.) ? b * a : a;";class GS{constructor(t,e,n){this.variableNames=["A","B"],this.outputShape=g.assertAndGetBroadcastShape(e,n),this.userCode=`\n      float binaryOperation(float a, float b) {\n        ${t}\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    `}}const XS="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";class YS{constructor(t,e,n,i=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=g.assertAndGetBroadcastShape(e,n);const s=this.outputShape.length;let o="";if(i)if(0===s||1===r.sizeFromShape(this.outputShape))o="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else if(o=`\n          ${LS(s)} coords = getOutputCoords();\n        `,1===s)o+=`\n            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          `;else{const t=CS("coords",s);o+=`\n            bool nextRowOutOfBounds =\n              (${t[s-2]} + 1) >= ${this.outputShape[s-2]};\n            bool nextColOutOfBounds =\n              (${t[s-1]} + 1) >= ${this.outputShape[s-1]};\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          `}this.userCode=`\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ${t}\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ${o}\n\n        setOutput(result);\n      }\n    `}}class JS{constructor(t){this.variableNames=["A"],this.outputShape=t,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}getCustomSetupFunc(t,e){return(n,r)=>{null==this.minLoc&&(this.minLoc=n.getUniformLocationNoThrow(r,"minVal"),this.maxLoc=n.getUniformLocationNoThrow(r,"maxVal")),n.gl.uniform1f(this.minLoc,t),n.gl.uniform1f(this.maxLoc,e)}}}class ZS{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}getCustomSetupFunc(t,e){return(n,r)=>{null==this.minLoc&&(this.minLoc=n.getUniformLocationNoThrow(r,"minVal"),this.maxLoc=n.getUniformLocationNoThrow(r,"maxVal")),n.gl.uniform1f(this.minLoc,t),n.gl.uniform1f(this.maxLoc,e)}}}class tE{constructor(t){this.variableNames=["real","imag"],this.outputShape=t,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}}class eE{constructor(t){this.outputShape=[],this.outputShape=g.computeOutShape(t,1),this.variableNames=t.map((t,e)=>"T"+e);const e=new Array(t.length-1);e[0]=t[0][1];for(let r=1;r<e.length;r++)e[r]=e[r-1]+t[r][1];const n=[`if (yC < ${e[0]}) setOutput(getT0(yR, yC));`];for(let r=1;r<e.length;r++)n.push(`else if (yC < ${e[r]}) setOutput(getT${r}(yR, yC-${e[r-1]}));`);n.push(`else setOutput(getT${e.length}(yR, yC-${e[e.length-1]}));`),this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ${n.join("\n        ")}\n      }\n    `}}class nE{constructor(t,e){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=g.computeOutShape(t,e);const n=this.outputShape,r=n.length,i=LS(r),s=CS("coords",r),o=["x","y","z","w","u","v"].slice(0,r);this.variableNames=t.map((t,e)=>"T"+e);const a=new Array(t.length-1);a[0]=t[0][e];for(let p=1;p<a.length;p++)a[p]=a[p-1]+t[p][e];const l=o[e],u=o.slice(-2),c=o.join();let h=`if (${l} < ${a[0]}) {\n        return getChannel(\n            getT0(${c}), vec2(${u.join()}));\n        }`;for(let p=1;p<a.length;p++){const t=a[p-1];h+=`\n        if (${l} < ${a[p]}  && ${l} >= ${a[p-1]}) {\n          return getChannel(\n            getT${p}(${rE(o,l,t)}),\n            vec2(${rE(u,l,t)}));\n        }`}const d=a[a.length-1];h+=`\n        return getChannel(\n          getT${a.length}(${rE(o,l,d)}),\n          vec2(${rE(u,l,d)}));`,this.userCode=`\n      float getValue(${o.map(t=>"int "+t)}) {\n        ${h}\n      }\n\n      void main() {\n        ${i} coords = getOutputCoords();\n        vec4 result = vec4(getValue(${s}), 0., 0., 0.);\n\n        ${s[r-1]} = ${s[r-1]} + 1;\n        if (${s[r-1]} < ${n[r-1]}) {\n          result.g = getValue(${s});\n        }\n\n        ${s[r-2]} = ${s[r-2]} + 1;\n        if (${s[r-2]} < ${n[r-2]}) {\n          result.a = getValue(${s});\n        }\n\n        ${s[r-1]} = ${s[r-1]} - 1;\n        if (${s[r-2]} < ${n[r-2]} &&\n            ${s[r-1]} < ${n[r-1]}) {\n          result.b = getValue(${s});\n        }\n        setOutput(result);\n      }\n    `}}function rE(t,e,n){const r=t.indexOf(e);return t.map((t,e)=>e===r?`${t} - ${n}`:t).join()}class iE{constructor(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ${t.batchSize}; b++) {\n          for (int yR = 0; yR < ${t.outHeight}; yR++) {\n            int xR = wR + yR * ${t.strideHeight} - ${t.padInfo.top};\n\n            if (xR < 0 || xR >= ${t.inHeight}) {\n              continue;\n            }\n\n            for (int yC = 0; yC < ${t.outWidth}; yC++) {\n              int xC = wC + yC * ${t.strideWidth} - ${t.padInfo.left};\n\n              if (xC < 0 || xC >= ${t.inWidth}) {\n                continue;\n              }\n\n              if (${"channelsLast"===t.dataFormat}) {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class sE{constructor(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;const e=t.filterHeight,n=t.filterWidth,r="channelsLast"===t.dataFormat;this.userCode=`\n      const ivec2 pads = ivec2(${e-1-t.padInfo.top}, ${n-1-t.padInfo.left});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[${r?3:1}];\n\n        ivec2 dyCorner = ivec2(coords[${r?1:2}], coords[${r?2:3}]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${e}; wR++) {\n          float dyR = float(dyRCorner + wR) / ${t.strideHeight}.0;\n\n          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ${e} - 1 - wR;\n\n          for (int wC = 0; wC < ${n}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${t.strideWidth}.0;\n\n            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ${n} - 1 - wC;\n\n            for (int d2 = 0; d2 < ${t.outChannels}; d2++) {\n\n              if (${r}) {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class oE{constructor(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape,this.userCode=`\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ${t.batchSize}; b++) {\n          for (int yF = 0; yF < ${t.outDepth}; yF++) {\n            int xF = wF + yF * ${t.strideDepth} - ${t.padInfo.front};\n\n            if (xF < 0 || xF >= ${t.inDepth}) {\n              continue;\n            }\n\n            for (int yR = 0; yR < ${t.outHeight}; yR++) {\n              int xR = wR + yR * ${t.strideHeight} - ${t.padInfo.top};\n\n              if (xR < 0 || xR >= ${t.inHeight}) {\n                continue;\n              }\n\n              for (int yC = 0; yC < ${t.outWidth}; yC++) {\n                int xC = wC + yC * ${t.strideWidth} - ${t.padInfo.left};\n\n                if (xC < 0 || xC >= ${t.inWidth}) {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class aE{constructor(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;const e=t.filterDepth,n=t.filterHeight,r=t.filterWidth;this.userCode=`\n      const ivec3 pads = ivec3(${e-1-t.padInfo.front}, ${n-1-t.padInfo.top}, ${r-1-t.padInfo.left});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ${e}; wF++) {\n          float dyF = float(dyFCorner + wF) / ${t.strideDepth}.0;\n\n          if (dyF < 0.0 || dyF >= ${t.outDepth}.0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ${e} - 1 - wF;\n\n          for (int wR = 0; wR < ${n}; wR++) {\n            float dyR = float(dyRCorner + wR) / ${t.strideHeight}.0;\n\n            if (dyR < 0.0 || dyR >= ${t.outHeight}.0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ${n} - 1 - wR;\n\n            for (int wC = 0; wC < ${r}; wC++) {\n              float dyC = float(dyCCorner + wC) / ${t.strideWidth}.0;\n\n              if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ${r} - 1 - wC;\n\n              for (int d2 = 0; d2 < ${t.outChannels}; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class lE{constructor(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ${t.outChannels/t.inChannels} + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ${t.batchSize}; b++) {\n          for (int yR = 0; yR < ${t.outHeight}; yR++) {\n            int xR = wR + yR * ${t.strideHeight} - ${t.padInfo.top};\n\n            if (xR < 0 || xR >= ${t.inHeight}) {\n              continue;\n            }\n\n            for (int yC = 0; yC < ${t.outWidth}; yC++) {\n              int xC = wC + yC * ${t.strideWidth} - ${t.padInfo.left};\n\n              if (xC < 0 || xC >= ${t.inWidth}) {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class uE{constructor(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;const e=t.filterHeight,n=t.filterWidth,r=t.outChannels/t.inChannels;this.userCode=`\n      const ivec2 pads = ivec2(${e-1-t.padInfo.top}, ${n-1-t.padInfo.left});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ${e}; wR++) {\n          float dyR = float(dyRCorner + wR) / ${t.strideHeight}.0;\n\n          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ${e} - 1 - wR;\n\n          for (int wC = 0; wC < ${n}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${t.strideWidth}.0;\n\n            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ${n} - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ${r}; dm++) {\n              int d2 = d1 * ${r} + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class cE{constructor(t,e=!1,n=null,r=!1){this.variableNames=["x","W"],this.outputShape=t.outShape;const i=t.padInfo.top,s=t.padInfo.left,o=t.strideHeight,a=t.strideWidth,l=t.dilationHeight,u=t.dilationWidth,c=t.filterHeight,h=t.filterWidth,d=4*Math.floor(t.inChannels/4),p=t.inChannels%4,f="channelsLast"===t.dataFormat,A=f?1:2,m=f?2:3,g=f?3:1;let y="",w="";n&&(y=r?`float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ${n}\n        }`:`\n          float activation(float x) {\n            ${n}\n          }\n        `,w="result = activation(result);");const b=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`\n      ${y}\n\n      const ivec2 strides = ivec2(${o}, ${a});\n      const ivec2 pads = ivec2(${i}, ${s});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[${g}];\n\n        ivec2 xRCCorner =\n            ivec2(coords[${A}], coords[${m}]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${c}; wR++) {\n          int xR = xRCorner + wR * ${l};\n\n          if (xR < 0 || xR >= ${t.inHeight}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${h}; wC++) {\n            int xC = xCCorner + wC * ${u};\n\n            if (xC < 0 || xC >= ${t.inWidth}) {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ${d}; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (${f}) {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (${1===p}) {\n\n              if (${f}) {\n                dotProd +=\n                    getX(batch, xR, xC, ${d}) *\n                    getW(wR, wC, ${d}, d2);\n              } else {\n                dotProd +=\n                    getX(batch, ${d}, xR, xC) *\n                    getW(wR, wC, ${d}, d2);\n              }\n\n            } else if (${2===p}) {\n              vec2 wValues = vec2(\n                getW(wR, wC, ${d}, d2),\n                getW(wR, wC, ${d} + 1, d2)\n              );\n\n              if (${f}) {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ${d}),\n                  getX(batch, xR, xC, ${d} + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ${d}, xR, xC),\n                  getX(batch, ${d} + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (${3===p}) {\n              vec3 wValues = vec3(\n                getW(wR, wC, ${d}, d2),\n                getW(wR, wC, ${d} + 1, d2),\n                getW(wR, wC, ${d} + 2, d2)\n              );\n\n              if (${f}) {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ${d}),\n                  getX(batch, xR, xC, ${d} + 1),\n                  getX(batch, xR, xC, ${d} + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ${d}, xR, xC),\n                  getX(batch, ${d} + 1, xR, xC),\n                  getX(batch, ${d} + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ${b}\n        ${w}\n        setOutput(result);\n      }\n    `}}class hE{constructor(t){this.variableNames=["x","W"],this.outputShape=t.outShape;const e=t.padInfo.front,n=t.padInfo.top,r=t.padInfo.left,i=t.strideDepth,s=t.strideHeight,o=t.strideWidth,a=t.dilationDepth,l=t.dilationHeight,u=t.dilationWidth,c=t.filterDepth,h=t.filterHeight,d=t.filterWidth,p=4*Math.floor(t.inChannels/4),f=t.inChannels%4;this.userCode=`\n      const ivec3 strides = ivec3(${i}, ${s}, ${o});\n      const ivec3 pads = ivec3(${e}, ${n}, ${r});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ${c}; wF++) {\n          int xF = xFCorner + wF * ${a};\n\n          if (xF < 0 || xF >= ${t.inDepth}) {\n            continue;\n          }\n\n          for (int wR = 0; wR < ${h}; wR++) {\n            int xR = xRCorner + wR * ${l};\n\n            if (xR < 0 || xR >= ${t.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${d}; wC++) {\n              int xC = xCCorner + wC * ${u};\n\n              if (xC < 0 || xC >= ${t.inWidth}) {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ${p}; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (${1===f}) {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ${p}) *\n                  getW(wF, wR, wC, ${p}, d2);\n              } else if (${2===f}) {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ${p}),\n                  getX(batch, xF, xR, xC, ${p} + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ${p}, d2),\n                  getW(wF, wR, wC, ${p} + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (${3===f}) {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ${p}),\n                  getX(batch, xF, xR, xC, ${p} + 1),\n                  getX(batch, xF, xR, xC, ${p} + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ${p}, d2),\n                  getW(wF, wR, wC, ${p} + 1, d2),\n                  getW(wF, wR, wC, ${p} + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class dE{constructor(t,e=!1,n=null,r=!1){this.variableNames=["x","W"],this.outputShape=t.outShape;const i=t.inHeight,s=t.inWidth,o=t.padInfo.top,a=t.padInfo.left,l=t.strideHeight,u=t.strideWidth,c=t.dilationHeight,h=t.dilationWidth,d=t.filterHeight,p=t.filterWidth,f=t.outChannels/t.inChannels;let A="",m="";n&&(A=r?`float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ${n}\n        }`:`\n          float activation(float x) {\n            ${n}\n          }\n        `,m="result = activation(result);");const g=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`\n      ${A}\n\n      const ivec2 strides = ivec2(${l}, ${u});\n      const ivec2 pads = ivec2(${o}, ${a});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ${f};\n        int q = d2 - d1 * ${f};\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ${d}; wR++) {\n          int xR = xRCorner + wR * ${c};\n\n          if (xR < 0 || xR >= ${i}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${p}; wC++) {\n            int xC = xCCorner + wC * ${h};\n\n            if (xC < 0 || xC >= ${s}) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ${g}\n        ${m}\n        setOutput(result);\n      }\n    `}}class pE{constructor(t,e=!1,n=null,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.outShape;const s=t.inHeight,o=t.inWidth,a=t.padInfo.top,l=t.padInfo.left,u=t.strideHeight,c=t.strideWidth,h=t.dilationHeight,d=t.dilationWidth,p=t.filterHeight,f=t.filterWidth,A=f;let m="int xR; int xC; int xCOffset;";for(let r=0;r<p;r++)for(let t=0;t<f;t++)m+=`\n          vec4 xTexelR${r}C${2*t} = vec4(0.);\n          vec4 wR${r}C${t} = vec4(0.);\n          vec4 xR${r}C${t} = vec4(0.);`;for(let b=0;b<p;b++)for(let t=0;t<A;t++){const e=2*t;if(m+=`\n          xR = xRCorner + ${b*h};\n          xC = xCCorner + ${e*d};\n        `,1===c){if(e<f&&(m+=l%2==1?`\n                xCOffset = xC + 1;\n                if(xR >= 0 && xR < ${s} && xCOffset >= 0 && xCOffset < ${o}) {\n                  xTexelR${b}C${e} = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= ${o}) {\n                    xTexelR${b}C${e}.zw = vec2(0.);\n                  }\n                } else {\n                  xTexelR${b}C${e} = vec4(0.);\n                }\n\n                xCOffset = xC + 1 - 2;\n                if(xR >= 0 && xR < ${s} && xCOffset >= 0 && xCOffset < ${o}) {\n                  vec4 previous = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= ${o}) {\n                    previous.zw = vec2(0.);\n                  }\n\n                  xR${b}C${e} = vec4(previous.zw, xTexelR${b}C${e}.xy);\n                } else {\n                  xR${b}C${e} = vec4(0, 0, xTexelR${b}C${e}.xy);\n                }\n              `:`\n                if(xR >= 0 && xR < ${s} && xC >= 0 && xC < ${o}) {\n                  xTexelR${b}C${e} = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR${b}C${e} = vec4(0.);\n                }\n\n                xR${b}C${e} = xTexelR${b}C${e};\n              `,e+1<f)){const t=l%2==0?r.nearestLargerEven(d):d;d%2==0&&l%2==1||d%2!=0&&l%2!=1?(m+=`\n                  xCOffset = xC + ${l%2} + ${t};\n\n                  if(xR >= 0 && xR < ${s} &&\n                    xCOffset >= 0 && xCOffset < ${o}) {\n                    xTexelR${b}C${e+2} = getX(batch, xR, xCOffset, d1);\n                  }\n                `,d>1&&(m+=`\n                    xCOffset -= 2;\n                    if(xR >= 0 && xR < ${s} &&\n                      xCOffset >= 0 && xCOffset < ${o}) {\n                      xTexelR${b}C${e} = getX(batch, xR, xCOffset, d1);\n                    } else {\n                      xTexelR${b}C${e} = vec4(0.);\n                    }\n                  `),m+=`\n                  xR${b}C${e+1} = vec4(\n                    xTexelR${b}C${e}.zw, xTexelR${b}C${e+2}.xy);\n                `):m+=`\n                  xCOffset = xC + ${t};\n\n                  if(xR >= 0 && xR < ${s} &&\n                    xCOffset >= 0 && xCOffset < ${o}) {\n                    xTexelR${b}C${e+2} = getX(batch, xR, xCOffset, d1);\n                  }\n\n                  xR${b}C${e+1} = xTexelR${b}C${e+2};\n                `}}else e<f&&(m+=`\n              if(xR >= 0 && xR < ${s}) {\n            `,l%2==1?(m+=`\n                xCOffset = xC + 1 - ${c};\n                if(xCOffset >= 0 && xCOffset < ${o}) {\n                  xTexelR${b}C${e} = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR${b}C${e} = vec4(0.);\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < ${o}) {\n                  xTexelR${b}C${e+2} = getX(batch, xR, xC + 1, d1);\n                } else {\n                  xTexelR${b}C${e+2} = vec4(0.);\n                }\n\n                xR${b}C${e} = vec4(\n                  xTexelR${b}C${e}.zw, xTexelR${b}C${e+2}.zw);\n              `,e+1<f&&(m+=`\n                  vec4 final = vec4(0.);\n                  xCOffset = xC + 1 + ${c};\n                  if(xCOffset >= 0 && xCOffset < ${o}) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xR${b}C${e+1} = vec4(xTexelR${b}C${e+2}.xy, final.xy);\n                `)):(m+=`\n                if(xC >= 0 && xC < ${o}) {\n                  xTexelR${b}C${e} = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR${b}C${e} = vec4(0.);\n                }\n\n                xCOffset = xC + ${c};\n                if(xCOffset >= 0 && xCOffset < ${o}) {\n                  xTexelR${b}C${e+2} = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR${b}C${e+2} = vec4(0.);\n                }\n\n                xR${b}C${e} = vec4(\n                  xTexelR${b}C${e}.xy, xTexelR${b}C${e+2}.xy);\n              `,e+1<f&&(m+=`\n                  xR${b}C${e+1} = vec4(\n                    xTexelR${b}C${e}.zw, xTexelR${b}C${e+2}.zw);\n                `)),m+="}");e<f&&(m+=`\n            vec4 wTexelR${b}C${e} = getW(${b}, ${e}, d1, q);\n            wR${b}C${e} = vec4(wTexelR${b}C${e}.xz, wTexelR${b}C${e}.xz);\n          `,e+1<f&&(m+=`\n              vec4 wTexelR${b}C${e+1} = getW(${b}, ${e+1}, d1, q);\n              wR${b}C${e+1} =\n                vec4(wTexelR${b}C${e+1}.xz, wTexelR${b}C${e+1}.xz);`))}for(let r=0;r<p;r++)for(let t=0;t<f;t++)m+=`dotProd += xR${r}C${t} * wR${r}C${t};`;let g="",y="";n&&(g=i?`vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ${n}\n        }`:`vec4 activation(vec4 x) {\n          ${n}\n        }`,y="result = activation(result);");const w=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),this.userCode=`\n      ${g}\n\n      const ivec2 strides = ivec2(${u}, ${c});\n      const ivec2 pads = ivec2(${a}, ${l});\n\n      void main() {\n\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2;\n        int q = 0;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        vec4 dotProd = vec4(0.);\n\n        ${m}\n\n        vec4 result = dotProd;\n        ${w}\n        ${y}\n        setOutput(result);\n      }\n    `}}class fE{constructor(t,e,n,r,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[s,o,a,l]=t,[u]=e,[c,h]=n;this.outputShape=[u,c,h,l];const d="bilinear"===r?1:0,[p,f]=[o-1+".0",a-1+".0"],[A,m,g]=c>1?[""+(o-1)/(c-1),"(y2-y1) * height_ratio",`y1*${p} + float(y)*(height_scale)`]:["0.0","0.0","0.5 * (y1+y2) * "+p],[y,w,b]=h>1?[""+(a-1)/(h-1),"(x2-x1) * width_ratio",`x1*${f} + float(x)*(width_scale)`]:["0.0","0.0","0.5 * (x1+x2) * "+f];this.userCode=`\n      const float height_ratio = float(${A});\n      const float width_ratio = float(${y});\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ${s}) {\n          return;\n        }\n\n        float height_scale = ${m};\n        float width_scale = ${w};\n\n        float in_y = ${g};\n        if( in_y < 0.0 || in_y > ${p} ) {\n          setOutput(float(${i}));\n          return;\n        }\n        float in_x = ${b};\n        if( in_x < 0.0 || in_x > ${f} ) {\n          setOutput(float(${i}));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(${d} == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    `}}class AE{constructor(t,e,n){this.variableNames=["x"],this.outputShape=t;const r=t.length,i=e?"0.0":`getX(${mE(r,"coords")})`,s=t[t.length-1];let o="",a="";e?(o=n?"end != "+(s-1):"end != 0",a=n?"end + 1":"end - 1"):(o=n?"end + pow2 < "+s:"end >= pow2",a=n?"end + pow2":"end - pow2"),this.userCode=`\n      uniform float index;\n      void main() {\n        ${LS(r)} coords = getOutputCoords();\n        int end = ${gE(r,"coords")};\n        float val = ${i};\n        int pow2 = int(pow(2.0, index));\n        if (${o}) {\n          int idx = ${a};\n          ${gE(r,"coords")} = idx;\n          val += getX(${mE(r,"coords")});\n        }\n        setOutput(val);\n      }\n    `}getCustomSetupFunc(t){return(e,n)=>{null==this.index&&(this.index=e.getUniformLocation(n,"index")),e.gl.uniform1f(this.index,t)}}}function mE(t,e){if(1===t)return""+e;if(2===t)return`${e}.x, ${e}.y`;if(3===t)return`${e}.x, ${e}.y, ${e}.z`;if(4===t)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw Error(`Cumulative sum for rank ${t} is not yet supported`)}function gE(t,e){if(1===t)return""+e;if(2===t)return e+".y";if(3===t)return e+".z";if(4===t)return e+".w";throw Error(`Cumulative sum for rank ${t} is not yet supported`)}class yE{constructor(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=jC.DENSE;const e=XC(t),n=SS();this.outputShape=t,this.userCode=`\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ${ES(["r","c","d"],t)}\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2(${e[0]}, ${e[1]}));\n        int index = 4 * (resTexRC.x * ${e[1]} + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ${n.output} = result;\n      }\n    `}}class wE{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=jC.DENSE;const e=XC(t),n=SS();this.outputShape=t,this.userCode=`\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ${ES(["r","c","d"],t)}\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2(${e[0]}, ${e[1]}));\n        int index = 4 * (resTexRC.x * ${e[1]} + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ${n.output} = result;\n      }\n    `}}class bE{constructor(t,e,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=e,this.dataFormat=n,this.userCode=`\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ${this.getHeightCoordString()};\n      int w = ${this.getWidthCoordString()};\n      int d = ${this.getDepthCoordString()};\n\n      int in_h = h / ${e};\n      int offset_h = imod(h, ${e});\n      int in_w = w / ${e};\n      int offset_w = imod(w, ${e});\n      int offset_d = (offset_h * ${e} + offset_w) *\n        ${this.getOutputDepthSize()};\n      int in_d = d + offset_d;\n\n      float result = ${this.getInputSamplingString()};\n      setOutput(result);\n    }\n  `}getHeightCoordString(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}getWidthCoordString(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}getDepthCoordString(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}getOutputDepthSize(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}class vE{constructor(t){this.variableNames=["X"],this.outputShape=[t,t],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}}class xE{constructor(t){this.variableNames=["A"],this.outTexUsage=KC.DOWNLOAD;const e=SS();this.outputShape=t,this.userCode=`\n      ${kS}\n\n      void main() {\n        float x = getAAtOutCoords();\n        ${e.output} = encode_float(x);\n      }\n    `}}class _E{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=KC.DOWNLOAD;const e=SS();this.outputShape=t,this.userCode=`\n      ${kS}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ${e.output} = encode_float(x);\n      }\n    `}}class CE{constructor(t,e,n=!1){this.variableNames=["A"];const r=SS(),[i,s]=e;this.outputShape=t;let o="result";n&&(o="floor(result * 255. + 0.5)"),this.userCode=`\n      ${BS(t)}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n\n        int r = flatIndex / ${s};\n        int c = imod(flatIndex, ${s});\n        vec2 uv = (vec2(c, r) + halfCR) / vec2(${s}.0, ${i}.0);\n        vec4 values = ${r.texture2D}(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        ${r.output} = vec4(${o}, 0., 0., 0.);\n      }\n    `}}class SE{constructor(t,e,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const r=SS(),[i,s]=e;this.outputShape=t;let o="",a="result";n&&(a="floor(result * 255. + 0.5)");for(let l=0;l<=1;l++)for(let e=0;e<=1;e++){const n=2*l+e;o+=`\n          localCoords = coords;\n          if(localCoords[2] + ${e} < ${t[2]}) {\n            localCoords[2] += ${e};\n            if(localCoords[1] + ${l} < ${t[1]}) {\n              localCoords[1] += ${l};\n\n              flatIndex = getFlatIndex(localCoords);\n              offset = imod(flatIndex, 4);\n\n              flatIndex = idiv(flatIndex, 4, 1.);\n\n              r = flatIndex / ${s};\n              c = imod(flatIndex, ${s});\n              uv = (vec2(c, r) + halfCR) / vec2(${s}.0, ${i}.0);\n              values = ${r.texture2D}(A, uv);\n\n              if(offset == 0) {\n                result[${n}] = values[0];\n              } else if(offset == 1) {\n                result[${n}] = values[1];\n              } else if(offset == 2) {\n                result[${n}] = values[2];\n              } else {\n                result[${n}] = values[3];\n              }\n            }\n          }\n        `}this.userCode=`\n      ${BS(t)}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        vec4 result = vec4(0.);\n        int flatIndex, r, c, offset;\n        ivec3 localCoords;\n        vec2 uv;\n        vec4 values;\n\n        ${o}\n\n        ${r.output} = ${a};\n      }\n    `}}class EE{constructor(t,e,n){this.variableNames=["real","imag"];const r=e[1];this.outputShape=e;const i=n?"2.0 * "+Math.PI:"-2.0 * "+Math.PI;this.userCode=`\n      const float exponentMultiplier = ${i};\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ${t}\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(${r});\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ${r}; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ${n?r+".0":"1.0"};\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    `}}class BE{constructor(t,e){this.outputShape=[],this.variableNames=["x"],this.outputShape=t,this.userCode="\n      uniform float value;\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}getCustomSetupFunc(t){return(e,n)=>{null==this.valueLoc&&(this.valueLoc=e.getUniformLocationNoThrow(n,"value")),e.gl.uniform1f(this.valueLoc,t)}}}class kE{constructor(t,e,n){this.variableNames=["A","indices"];const r=t.slice();r[n]=e,this.outputShape=r,this.rank=r.length;const i=LS(this.rank),s=function(t,e){const n=t.length;if(n>4)throw Error(`Gather for rank ${n} is not yet supported`);if(1===n)return"int(getIndices(resRC))";const r=["resRC.x","resRC.y","resRC.z","resRC.w"],i=[];for(let s=0;s<t.length;s++)i.push(s===e?`int(getIndices(${r[s]}))`:""+r[s]);return i.join()}(t,n);this.userCode=`\n      void main() {\n        ${i} resRC = getOutputCoords();\n        setOutput(getA(${s}));\n      }\n    `}}class NE{constructor(t,e,n){this.sliceDim=t,this.strides=e,this.variableNames=["x","indices"],this.outputShape=n;const r=LS(e.length),i=LS(n.length);this.userCode=`\n        ${r} strides = ${r}(${this.strides});\n         void main() {\n          ${i} coords = getOutputCoords();\n          int flattenIndex = 0;\n          for (int j = 0; j < ${this.sliceDim}; j++) {\n            int index = round(getIndices(coords[0], j));\n            flattenIndex += index * ${this.sliceDim>1?"strides[j]":"strides"};\n          }\n          setOutput(getX(flattenIndex, coords[1]));\n        }\n      `}}function IE(t,e,n,r,i,s){!function(t,e){const n=V().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0)throw new Error(`Requested texture size [${t}x${e}] is invalid.`);if(t>n||e>n)throw new Error(`Requested texture size [${t}x${e}] greater than WebGL maximum on this browser / GPU [${n}x${n}].`)}(e,n);const o=function(t){return lS(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}(t),a=t.TEXTURE_2D;return ZC(t,()=>t.bindTexture(a,o)),ZC(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),ZC(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),ZC(t,()=>t.texParameteri(a,t.TEXTURE_MIN_FILTER,t.NEAREST)),ZC(t,()=>t.texParameteri(a,t.TEXTURE_MAG_FILTER,t.NEAREST)),ZC(t,()=>t.texImage2D(a,0,r,e,n,0,i,s,null)),ZC(t,()=>t.bindTexture(t.TEXTURE_2D,null)),o}function FE(t){return t.internalFormatFloat}function TE(t){return t.internalFormatHalfFloat}function RE(t){return t.downloadTextureFormat}function OE(t){return t.internalFormatPackedFloat}function DE(t){return t.internalFormatPackedHalfFloat}class LE{constructor(t){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];const e=V().getNumber("WEBGL_VERSION");null!=t?(this.gl=t,function(t,e){$C[t]=e}(e,t)):this.gl=qC(e);let n="WEBGL_color_buffer_float";if(1===V().getNumber("WEBGL_VERSION")){const t="OES_texture_half_float";if(this.textureFloatExtension=eS(this.gl,"OES_texture_float"),mS(this.gl,t))this.textureHalfFloatExtension=eS(this.gl,t);else if(V().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(n),mS(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=eS(this.gl,"EXT_color_buffer_half_float");else if(V().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(n="EXT_color_buffer_float",mS(this.gl,n))this.colorBufferFloatExtension=this.gl.getExtension(n);else{if(!mS(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=function(t){return function(t,e){const n=lS(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return ZC(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),ZC(t,()=>t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)),n}(t,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}(this.gl),this.indexBuffer=function(t){return function(t,e){const n=lS(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return ZC(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)),ZC(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)),n}(t,new Uint16Array([0,1,2,2,1,3]))}(this.gl),this.framebuffer=function(t){return lS(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}(this.gl),this.textureConfig=JC(this.gl,this.textureHalfFloatExtension)}get debug(){return V().getBool("DEBUG")}dispose(){if(this.disposed)return;null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const t=this.gl;ZC(t,()=>t.finish()),ZC(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,null)),ZC(t,()=>t.deleteFramebuffer(this.framebuffer)),ZC(t,()=>t.bindBuffer(t.ARRAY_BUFFER,null)),ZC(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)),ZC(t,()=>t.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(t,e){return this.throwIfDisposed(),function(t,e,n,r){const[i,s]=GC(e,n);return IE(t,i,s,FE(r),r.textureFormatFloat,t.FLOAT)}(this.gl,t,e,this.textureConfig)}createFloat16MatrixTexture(t,e){return this.throwIfDisposed(),function(t,e,n,r){const[i,s]=GC(e,n);return IE(t,i,s,TE(r),r.textureFormatFloat,r.textureTypeHalfFloat)}(this.gl,t,e,this.textureConfig)}createUnsignedBytesMatrixTexture(t,e){return this.throwIfDisposed(),function(t,e,n,r){const[i,s]=GC(e,n);return IE(t,i,s,RE(r),t.RGBA,t.UNSIGNED_BYTE)}(this.gl,t,e,this.textureConfig)}uploadPixelDataToTexture(t,e){this.throwIfDisposed(),function(t,e,n){ZC(t,()=>t.bindTexture(t.TEXTURE_2D,e)),n.data instanceof Uint8Array?ZC(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n.width,n.height,0,t.RGBA,t.UNSIGNED_BYTE,n.data)):ZC(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)),ZC(t,()=>t.bindTexture(t.TEXTURE_2D,null))}(this.gl,t,e)}uploadDenseMatrixToTexture(t,e,n,r){this.throwIfDisposed(),function(t,e,n,r,i,s){let o,a,l;ZC(t,()=>t.bindTexture(t.TEXTURE_2D,e)),i instanceof Uint8Array?(o=new Uint8Array(n*r*4),a=t.UNSIGNED_BYTE,l=t.RGBA):(o=new Float32Array(n*r*4),a=t.FLOAT,l=s.internalFormatPackedFloat),o.set(i),ZC(t,()=>t.texImage2D(t.TEXTURE_2D,0,l,n,r,0,t.RGBA,a,o)),ZC(t,()=>t.bindTexture(t.TEXTURE_2D,null))}(this.gl,t,e,n,r,this.textureConfig)}createFloat16PackedMatrixTexture(t,e){return this.throwIfDisposed(),function(t,e,n,r){const[i,s]=YC(e,n);return IE(t,i,s,DE(r),t.RGBA,r.textureTypeHalfFloat)}(this.gl,t,e,this.textureConfig)}createPackedMatrixTexture(t,e){return this.throwIfDisposed(),function(t,e,n,r){const[i,s]=YC(e,n);return IE(t,i,s,OE(r),t.RGBA,t.FLOAT)}(this.gl,t,e,this.textureConfig)}deleteMatrixTexture(t){this.throwIfDisposed(),this.outputTexture===t&&(oS(this.gl,this.framebuffer),this.outputTexture=null),ZC(this.gl,()=>this.gl.deleteTexture(t))}downloadByteEncodedFloatMatrixFromOutputTexture(t,e,n){return this.downloadMatrixDriver(t,()=>function(t,e,n,r){const[i,s]=GC(e,n),o=new Uint8Array(e*n*4);return ZC(t,()=>t.readPixels(0,0,i,s,r.downloadTextureFormat,t.UNSIGNED_BYTE,o)),new Float32Array(o.buffer)}(this.gl,e,n,this.textureConfig))}downloadPackedMatrixFromBuffer(t,e,n,r,i,s){return function(t,e,n,r,i,s,o,a){const l=t,u=new Float32Array(function(t,e){const[n,r]=YC(t,e);return n*r*4}(s,o));return l.bindBuffer(l.PIXEL_PACK_BUFFER,e),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,u),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),u}(this.gl,t,0,0,0,i,s)}downloadFloat32MatrixFromBuffer(t,e){return function(t,e,n){const r=t,i=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,i),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),i}(this.gl,t,e)}createBufferFromTexture(t,e,n){this.bindTextureToFrameBuffer(t);const r=function(t,e,n,r){const i=t.createBuffer();ZC(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,i));const s=16*e*n;return ZC(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,s,t.STREAM_READ)),ZC(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,0)),ZC(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),i}(this.gl,e,n);return this.unbindTextureToFrameBuffer(),r}createAndWaitForFence(){const t=this.createFence(this.gl);return this.pollFence(t)}createFence(t){let e,n;if(V().getBool("WEBGL_FENCE_API_ENABLED")){const r=t,i=r.fenceSync(r.SYNC_GPU_COMMANDS_COMPLETE,0);t.flush(),n=()=>{const t=r.clientWaitSync(i,0,0);return t===r.ALREADY_SIGNALED||t===r.CONDITION_SATISFIED},e=i}else V().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(e=this.beginQuery(),this.endQuery(),n=()=>this.isQueryAvailable(e,V().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):n=()=>!0;return{query:e,isFencePassed:n}}downloadMatrixFromPackedTexture(t,e,n){return this.downloadMatrixDriver(t,()=>function(t,e,n){const r=new Float32Array(e*n*4);return ZC(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,r)),r}(this.gl,e,n))}createProgram(t){this.throwIfDisposed();const e=this.gl,n=function(t,e){const n=lS(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(ZC(t,()=>t.shaderSource(n,e)),ZC(t,()=>t.compileShader(n)),!1===t.getShaderParameter(n,t.COMPILE_STATUS))throw function(t,e){const n=nS.exec(e);if(null==n)return console.log("Couldn't parse line number in error: "+e),void console.log(t);const i=+n[1],s=t.split("\n"),o=s.length.toString().length+2,a=s.map((t,e)=>r.rightPad((e+1).toString(),o)+t);let l=0;for(let r=0;r<a.length;r++)l=Math.max(a[r].length,l);const u=a.slice(0,i-1),c=a.slice(i-1,i),h=a.slice(i);console.log(u.join("\n")),console.log(e.split("\n")[0]),console.log("%c "+r.rightPad(c[0],l),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(h.join("\n"))}(e,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}(e,t),i=function(t){const e=SS();return function(t,e){const n=lS(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(ZC(t,()=>t.shaderSource(n,e)),ZC(t,()=>t.compileShader(n)),!1===t.getShaderParameter(n,t.COMPILE_STATUS))throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}(t,`${e.version}\n    precision highp float;\n    ${e.attribute} vec3 clipSpacePos;\n    ${e.attribute} vec2 uv;\n    ${e.varyingVs} vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }`)}(e),s=function(t){return lS(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}(e);return ZC(e,()=>e.attachShader(s,i)),ZC(e,()=>e.attachShader(s,n)),function(t,e){if(ZC(t,()=>t.linkProgram(e)),!1===t.getProgramParameter(e,t.LINK_STATUS))throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}(e,s),this.debug&&rS(e,s),this.vertexAttrsAreBound||(this.setProgram(s),this.vertexAttrsAreBound=function(t,e,n){return ZC(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),iS(t,e,"clipSpacePos",n,3,20,0)&&iS(t,e,"uv",n,2,20,12)}(e,this.program,this.vertexBuffer)),s}deleteProgram(t){this.throwIfDisposed(),t===this.program&&(this.program=null),null!=t&&ZC(this.gl,()=>this.gl.deleteProgram(t))}setProgram(t){this.throwIfDisposed(),this.program=t,null!=this.program&&this.debug&&rS(this.gl,this.program),ZC(this.gl,()=>this.gl.useProgram(t))}getUniformLocation(t,e,n=!0){return this.throwIfDisposed(),n?function(t,e,n){return lS(t,()=>t.getUniformLocation(e,n),'uniform "'+n+'" not present in program.')}(this.gl,t,e):function(t,e,n){return t.getUniformLocation(e,n)}(this.gl,t,e)}getAttributeLocation(t,e){return this.throwIfDisposed(),ZC(this.gl,()=>this.gl.getAttribLocation(t,e))}getUniformLocationNoThrow(t,e){return this.throwIfDisposed(),this.gl.getUniformLocation(t,e)}setInputMatrixTexture(t,e,n){this.throwIfDisposed(),this.throwIfNoProgram(),function(t,e,n,r){ZC(t,()=>function(t,e,n){(function(t,e){const n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n)throw new Error(`textureUnit must be in [gl.TEXTURE0, gl.TEXTURE${n}].`)})(t,n),ZC(t,()=>t.activeTexture(t.TEXTURE0+n)),ZC(t,()=>t.bindTexture(t.TEXTURE_2D,e))}(t,e,r)),ZC(t,()=>t.uniform1i(n,r))}(this.gl,t,e,n)}setOutputMatrixTexture(t,e,n){this.setOutputMatrixTextureDriver(t,n,e)}setOutputPackedMatrixTexture(t,e,n){this.throwIfDisposed();const[r,i]=YC(e,n);this.setOutputMatrixTextureDriver(t,r,i)}setOutputMatrixWriteRegion(t,e,n,r){this.setOutputMatrixWriteRegionDriver(n,t,r,e)}setOutputPackedMatrixWriteRegion(t,e,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){null!=this.program&&rS(this.gl,this.program),aS(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const t=this.gl;this.debug&&this.debugValidate(),ZC(t,()=>t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),ZC(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=eS(this.gl,2===V().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(2===V().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const t=this.gl,e=this.getQueryTimerExtensionWebGL2(),n=t.createQuery();return t.beginQuery(e.TIME_ELAPSED_EXT,n),n}const t=this.getQueryTimerExtensionWebGL1(),e=t.createQueryEXT();return t.beginQueryEXT(t.TIME_ELAPSED_EXT,e),e}endQuery(){if(2===V().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const t=this.gl,e=this.getQueryTimerExtensionWebGL2();return void t.endQuery(e.TIME_ELAPSED_EXT)}const t=this.getQueryTimerExtensionWebGL1();t.endQueryEXT(t.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(t){return await r.repeatedTry(()=>this.disposed||this.isQueryAvailable(t,V().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(t,V().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(t,e){if(0===e)return null;if(2===e){const e=this.gl;return e.getQueryParameter(t,e.QUERY_RESULT)/1e6}{const e=this.getQueryTimerExtensionWebGL1();return e.getQueryObjectEXT(t,e.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(t,e){if(0===e)return!0;if(2===e){const e=this.gl,n=this.getQueryTimerExtensionWebGL2(),r=e.getQueryParameter(t,e.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(n.GPU_DISJOINT_EXT)),r&&!this.disjoint}{const e=this.getQueryTimerExtensionWebGL1(),n=e.getQueryObjectEXT(t,e.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(e.GPU_DISJOINT_EXT)),n&&!this.disjoint}}pollFence(t){return new Promise(e=>{this.addItemToPoll(()=>t.isFencePassed(),()=>e())})}pollItems(){const t=function(t){let e=0;for(;e<t.length&&t[e]();++e);return e-1}(this.itemsToPoll.map(t=>t.isDoneFn));for(let e=0;e<=t;++e){const{resolveFn:t}=this.itemsToPoll[e];t()}this.itemsToPoll=this.itemsToPoll.slice(t+1)}addItemToPoll(t,e){this.itemsToPoll.push({isDoneFn:t,resolveFn:e}),this.itemsToPoll.length>1||r.repeatedTry(()=>(this.pollItems(),0===this.itemsToPoll.length))}bindTextureToFrameBuffer(t){this.throwIfDisposed(),sS(this.gl,t,this.framebuffer),this.debug&&aS(this.gl)}unbindTextureToFrameBuffer(){null!=this.outputTexture?(sS(this.gl,this.outputTexture,this.framebuffer),this.debug&&aS(this.gl)):oS(this.gl,this.framebuffer)}downloadMatrixDriver(t,e){this.bindTextureToFrameBuffer(t);const n=e();return this.unbindTextureToFrameBuffer(),n}setOutputMatrixTextureDriver(t,e,n){this.throwIfDisposed();const r=this.gl;sS(r,t,this.framebuffer),this.debug&&aS(r),this.outputTexture=t,ZC(r,()=>r.viewport(0,0,e,n)),ZC(r,()=>r.scissor(0,0,e,n))}setOutputMatrixWriteRegionDriver(t,e,n,r){this.throwIfDisposed(),ZC(this.gl,()=>this.gl.scissor(t,e,n,r))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(null==this.program)throw new Error("No GPU program is currently set.")}}function ME(t,e){if(t.length!==e.length)throw Error(`Binary was compiled with ${t.length} inputs, but was executed with ${e.length} inputs`);t.forEach((t,n)=>{const i=t.logicalShape,s=e[n],o=s.shape;if(!r.arraysEqual(i,o))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${i} and ${o} must match`);if(t.isUniform&&s.isUniform)return;const a=t.texShape,l=s.isUniform?null:s.texData.texShape;if(!r.arraysEqual(a,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${a} and ${l} must match`)})}class UE{constructor(t,e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;const{filterWidth:r,inChannels:i,strideWidth:s,strideHeight:o,padInfo:a,outWidth:l,dilationWidth:u,dilationHeight:c,dataFormat:h}=n,{left:d,top:p}=a,f=i*r,A=SS(),m="channelsLast"===h,g=m?0:1,y=m?1:2;let w="";for(let b=0;b<=1;b++)for(let n=0;n<=1;n++)w+=`\n          blockIndex = rc.y + ${n};\n          pos = rc.x + ${b};\n\n          if(blockIndex < ${t[1]} && pos < ${t[0]}) {\n            offsetY = int(blockIndex / (${l})) * ${o} - ${p};\n            d0 = offsetY + ${c} * (pos / ${f});\n\n            if(d0 < ${e[g]} && d0 >= 0) {\n\n              offsetX = int(mod(float(blockIndex), ${l}.) * ${s}. - ${d}.);\n              d1 = offsetX + ${u} * (int(mod(float(pos), ${f}.) / ${i}.));\n\n              if(d1 < ${e[y]} && d1 >= 0) {\n\n                ch = int(mod(float(pos), ${i}.));\n\n                if (${m}) {\n                  innerDims = vec2(d1, ch);\n                  result[${2*b+n}] = getChannel(\n                    getA(d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[${2*b+n}] = getChannel(\n                    getA(ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        `;this.userCode=`\n      void main() {\n        ivec2 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ${w}\n\n        ${A.output} = result;\n      }\n    `}}class PE{constructor(t,e,n,r,i){this.variableNames=["x"],this.outputShape=[];const s=e,o=t[3]-1;let a;this.outputShape=t;const l=`float(${n}) + float(${r}) * sum`;a=.5===i?`inversesqrt(${l})`:1===i?`1.0/(${l})`:`exp(log(${l}) * float(-${i}));`,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -${s}; j <= ${s}; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ${o}) {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ${a};\n        setOutput(val);\n      }\n    `}}class zE{constructor(t,e,n,r,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=e,this.bias=n,this.alpha=r,this.beta=i,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ${this.depth}; ++d) {\n          int depthBegin = int(max(0.0, float(d - ${e})));\n          int depthEnd = int(min(float(${this.depth}),\n              float(d + ${e} + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ${this.depth};\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(${r}) * norm + float(${n});\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(${r})\n                * float(${i})\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ${i});\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    `}}class QE{constructor(t,e,n,r,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const s=e,o=t[3]-1;let a;this.outputShape=t;const l=`float(${n}) + float(${r}) * sum`;a=.5===i?`inversesqrt(${l})`:1===i?`1.0/(${l})`:`exp(log(${l}) * float(-${i}));`,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ${this.outputShape[3]};\n        bool hasNextRow = c < ${this.outputShape[2]};\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ${s};\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ${s}; j <= ${s}; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${o}));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ${a};\n        setOutput(result);\n      }\n    `}}class HE{constructor(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;const e=t.effectiveFilterHeight,n=t.effectiveFilterWidth;this.userCode=`\n      const ivec2 pads = ivec2(${e-1-t.padInfo.top}, ${n-1-t.padInfo.left});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${e};\n          wR += ${t.dilationHeight}) {\n          float dyR = float(dyRCorner + wR) / ${t.strideHeight}.0;\n\n          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ${n}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${t.strideWidth}.0;\n\n            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ${e*n-1} - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ${n} + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class $E{constructor(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;const e=t.effectiveFilterDepth,n=t.effectiveFilterHeight,r=t.effectiveFilterWidth;this.userCode=`\n      const ivec3 pads = ivec3(${e-1-t.padInfo.front}, ${n-1-t.padInfo.top}, ${r-1-t.padInfo.left});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ${e};\n           wD += ${t.dilationDepth}) {\n          float dyD = float(dyDCorner + wD) / ${t.strideDepth}.0;\n\n          if (dyD < 0.0 || dyD >= ${t.outDepth}.0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ${n};\n              wR += ${t.dilationHeight}) {\n            float dyR = float(dyRCorner + wR) / ${t.strideHeight}.0;\n\n            if (dyR < 0.0 || dyR >= ${t.outHeight}.0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ${r};\n                wC += ${t.dilationWidth}) {\n              float dyC = float(dyCCorner + wC) / ${t.strideWidth}.0;\n\n              if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ${e*n*r-1} -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ${n} * ${r} +\n                  wR * ${r} + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class VE{constructor(t,e,n=!1,r=!1,i=!1,s=null,o=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;const a=Math.ceil((n?t[1]:t[2])/2),l=n?"i * 2, rc.y":"rc.y, i * 2",u=r?"rc.z, i * 2":"i * 2, rc.z",c=n?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],h=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let d="",p="";s&&(d=o?`vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ${s}\n        }`:`vec4 activation(vec4 x) {\n          ${s}\n        }`,p="result = activation(result);");const f=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),this.userCode=`\n      ${d}\n\n      const float sharedDimension = ${a}.0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < ${a}; i++) {\n          vec4 a = getMatrixA(rc.x, ${l});\n          vec4 b = getMatrixB(rc.x, ${u});\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (${c[0]} * ${h[0]});\n          result += (${c[1]} * ${h[1]});\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ${f}\n\n        ${p}\n\n        setOutput(result);\n      }\n    `}}class qE{constructor(t,e,n){this.variableNames=["probs"],this.outputShape=[t,n],this.userCode=`\n      uniform float seed;\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ${e-1}; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(${e-1}));\n      }\n    `}getCustomSetupFunc(t){return(e,n)=>{null==this.seedLoc&&(this.seedLoc=e.getUniformLocation(n,"seed")),e.gl.uniform1f(this.seedLoc,t)}}}class jE{constructor(t,e,n,r){this.variableNames=["indices"],this.outputShape=[t,e],this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(${r}), float(${n}),\n                      float(index == coords.y)));\n      }\n    `}}class KE{constructor(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t;const e=t.length;if(0===e)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{const n=CS("rc",e),r=LS(e),i=function(t,e,n){if(1===t)return"rc > "+e[0];let r="";for(let i=t-2;i<t;i++)r+=`${n[i]} >= ${e[i]}`,i<t-1&&(r+="||");return r}(e,t,n),s=function(t,e,n,r){if(1===t)return"";const i=r.slice(-2);return`\n    int r = ${i[0]};\n    int c = ${i[1]};\n    int rp1 = r + 1;\n    int cp1 = c + 1;\n\n    bool cEdge = cp1 >= ${e};\n    bool rEdge = rp1 >= ${n};\n  `}(e,t[t.length-1],t[t.length-2],n),o=function(t,e){const n=t.length,r=function(t,e){const n=[];for(let r=0;r<=1;r++)for(let i=0;i<=1;i++){let s=`${0===r?"r":"rp1"}, ${0===i?"c":"cp1"}`;for(let n=2;n<t;n++)s=e[e.length-1-n]+","+s;n.push(s)}return n}(n,e);return 1===n?`getA(rc),\n            rc + 1 >= ${t[0]} ? 0. : getA(rc + 1),\n            0, 0`:`getA(${r[0]}),\n          cEdge ? 0. : getA(${r[1]}),\n          rEdge ? 0. : getA(${r[2]}),\n          rEdge || cEdge ? 0. : getA(${r[3]})`}(t,n);this.userCode=`\n        void main() {\n          ${r} rc = getOutputCoords();\n\n          if(${i}) {\n            setOutput(vec4(0));\n          } else {\n            ${s}\n\n            setOutput(vec4(${o}));\n          }\n        }\n      `}}}class WE{constructor(t,e,n){this.variableNames=["x"],this.outputShape=e.map((e,n)=>e[0]+t[n]+e[1]);const r=t.length,i=LS(r),s=e.map(t=>t[0]).join(","),o=e.map((e,n)=>e[0]+t[n]).join(","),a=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=1!==r?`\n      ${i} start = ${i}(${s});\n      ${i} end = ${i}(${o});\n\n      void main() {\n        ${i} outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(float(${n}));\n        } else {\n          ${i} coords = outC - start;\n          setOutput(getX(${a}));\n        }\n      }\n    `:`\n        int start = ${s};\n        int end = ${o};\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(float(${n}));\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      `}}class GE{constructor(t,e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.map((e,n)=>e[0]+t[n]+e[1]);const r=t.length,i=LS(r),s=e.map(t=>t[0]).join(","),o=e.map((e,n)=>e[0]+t[n]).join(","),a=CS("rc",r),l=CS("source",r),u=`${a[r-1]} < ${this.outputShape[r-1]}`,c=1===r?"source":`vec2(${l.slice(-2).join()})`,h=[i+" rc = outputLoc;",`${a[r-1]} += 1;\n       if(${u}) {\n      `,1===r?"":`}\n       rc = outputLoc;\n       ${a[r-2]} += 1;\n       if(${a[r-2]} < ${this.outputShape[r-2]}) {`,1===r?"":`  ${a[r-1]} += 1;\n         if(${u}) {`],d=1===r?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let p="";for(let f=0,A=1===r?2:4;f<A;f++)p+=`\n        ${h[f]}\n        if (${d}) {\n          result[${f}] = float(${n});\n        } else {\n          ${i} source = rc - start;\n          result[${f}] = getChannel(getX(${l.join()}), ${c});\n        }\n      `;p+=1===r?"} ":"}}",this.userCode=`\n      const ${i} start = ${i}(${s});\n      const ${i} end = ${i}(${o});\n\n      void main() {\n        ${i} outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ${p}\n        setOutput(result);\n      }\n    `}}class XE{constructor(t,e,n,r=!1,i=!1){if(this.variableNames=["x"],"avg"===e&&n)throw new Error("Cannot compute positions for average pool.");const s=t.filterWidth,o=t.strideHeight,a=t.strideWidth,l=t.dilationHeight,u=t.dilationWidth,c=t.effectiveFilterHeight,h=t.effectiveFilterWidth,d=t.padInfo.top,p=t.padInfo.left;this.outputShape=t.outShape;const f="avg"===e;let A="0.0";if(f||(A="-1.0 / 1e-20"),n)return void(this.userCode=`\n        const ivec2 strides = ivec2(${o}, ${a});\n        const ivec2 pads = ivec2(${d}, ${p});\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ${c};\n              wR += ${l}) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ${t.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${h};\n                wC += ${u}) {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ${t.inWidth}) {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value >= currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ${r?i?`((batch  * ${t.inHeight} + xR) * ${t.inWidth} + xC) * ${t.inChannels} + d`:`(xR * ${t.inWidth} + xC) * ${t.inChannels} + d`:`wR * ${h} + wC`};\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      `);let m=`${e}(${e}(${e}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"avg"===e&&(m="avgValue / count");const g=4*Math.floor(s/4),y=s%4,w=`\n      if (${f}) {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    `;this.userCode=`\n      const ivec2 strides = ivec2(${o}, ${a});\n      const ivec2 pads = ivec2(${d}, ${p});\n      const float initializationValue = ${A};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ${t.inWidth}) {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(${A});\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ${c};\n            wR += ${l}) {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ${t.inHeight}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${g}; wC += 4) {\n            int xC = xCCorner + wC * ${u};\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${u}, d),\n              getValue(batch, xR, xC + 2 * ${u}, d),\n              getValue(batch, xR, xC + 3 * ${u}, d)\n            );\n\n            ${w}\n          }\n\n          int xC = xCCorner + ${g};\n          if (${1===y}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ${w}\n          } else if (${2===y}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${u}, d),\n              initializationValue,\n              initializationValue\n            );\n\n            ${w}\n          } else if (${3===y}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${u}, d),\n              getValue(batch, xR, xC + 2 * ${u}, d),\n              initializationValue\n            );\n\n            ${w}\n          }\n        }\n        setOutput(${m});\n      }\n    `}}class YE{constructor(t,e,n,r=!1,i=!1){if(this.variableNames=["x"],"avg"===e&&n)throw new Error("Cannot compute positions for average pool.");const s=t.filterWidth,o=t.strideDepth,a=t.strideHeight,l=t.strideWidth,u=t.dilationDepth,c=t.dilationHeight,h=t.dilationWidth,d=t.effectiveFilterDepth,p=t.effectiveFilterHeight,f=t.effectiveFilterWidth,A=t.padInfo.front,m=t.padInfo.top,g=t.padInfo.left;this.outputShape=t.outShape;const y="avg"===e;let w="0.0";if(y||(w="-1.0 / 1e-20"),n)return void(this.userCode=`\n        const ivec3 strides =\n            ivec3(${o}, ${a}, ${l});\n        const ivec3 pads = ivec3(${A}, ${m}, ${g});\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ${d};\n              wD += ${u}) {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ${t.inDepth}) {\n              continue;\n            }\n\n            for (int wR = 0; wR < ${p};\n                wR += ${c}) {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ${t.inHeight}) {\n                continue;\n              }\n\n              for (int wC = 0; wC < ${f};\n                  wC += ${h}) {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ${t.inWidth}) {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value >= currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ${r?i?`(((batch * ${t.inDepth} + xD) * ${t.inHeight} + xR) * ${t.inWidth} + xC) * ${t.inChannels} + ch`:`((xD * ${t.inHeight} + xR) * ${t.inWidth} + xC) * ${t.inChannels} + ch`:`wD * ${p} * ${f} +\n                      wR * ${f} + wC`};\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      `);let b=`${e}(${e}(${e}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"avg"===e&&(b="avgValue / count");const v=4*Math.floor(s/4),x=s%4,_=`\n      if (${y}) {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    `;this.userCode=`\n      const ivec3 strides =\n        ivec3(${o}, ${a}, ${l});\n      const ivec3 pads = ivec3(${A}, ${m}, ${g});\n      const float initializationValue = ${w};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ${t.inWidth}) {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(${w});\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ${d};\n            wD += ${u}) {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ${t.inDepth}) {\n            continue;\n          }\n\n          for (int wR = 0; wR < ${p};\n            wR += ${c}) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ${t.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${v}; wC += 4) {\n              int xC = xCCorner + wC * ${h};\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${h}, ch),\n                getValue(batch, xD, xR, xC + 2 * ${h}, ch),\n                getValue(batch, xD, xR, xC + 3 * ${h}, ch)\n              );\n\n              ${_}\n            }\n\n            int xC = xCCorner + ${v};\n            if (${1===x}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ${_}\n            } else if (${2===x}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${h}, ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ${_}\n            } else if (${3===x}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${h}, ch),\n                getValue(batch, xD, xR, xC + 2 * ${h}, ch),\n                initializationValue\n              );\n\n              ${_}\n            }\n          }\n          setOutput(${b});\n        }\n      }\n    `}}class JE{constructor(t,e){this.variableNames=["x"];const n=t.windowSize,r=t.batchSize,i=t.inSize,s=Math.ceil(i/n);this.outputShape=[r,s];let o="0.0",a="";"prod"===e?o="1.0":"min"===e?(o="1.0 / 1e-20",a="min"):"max"===e&&(o="-1.0 / 1e-20",a="max");let l=`${e}(${e}(${e}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"sum"===e?l="sumValue":"prod"===e?l="prodValue":"all"===e?l="allValue":"any"===e&&(l="anyValue");const u=4*Math.floor(n/4),c=n%4;let h=`\n      if (${"sum"===e}) {\n        sumValue += dot(values, ones);\n      } else if (${"prod"===e}) {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ${a}(values, minMaxValue);\n      }\n    `,d="vec4";"all"===e?(o="1.0",h="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",d="bvec4"):"any"===e&&(o="0.0",h="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",d="bvec4");let p="";i%n>0&&(p=`\n        if (inIdx < 0 || inIdx >= ${i}) {\n          return initializationValue;\n        }\n      `),this.userCode=`\n      const float initializationValue = ${o};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ${p}\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${n};\n\n        vec4 minMaxValue = vec4(${o});\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ${u}; i += 4) {\n          int inIdx = inOffset + i;\n          ${d} values = ${d}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ${h}\n        }\n\n        int inIdx = inOffset + ${u};\n        if (${1===c}) {\n          ${d} values = ${d}(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ${h}\n        } else if (${2===c}) {\n          ${d} values = ${d}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ${h}\n        } else if (${3===c}) {\n          ${d} values = ${d}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ${h}\n        }\n        setOutput(${l});\n      }\n    `}}class ZE{constructor(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;let n="";for(let i=0;i<4;i++){let t="thisRC = rc;";i%2==1&&(t+="thisRC.z += 1;"),i>1&&(t+="thisRC.y += 1;"),n+=`\n        ${t}\n        ${i>0?"if(thisRC.y < rows && thisRC.z < cols){":""}\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[${i}] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ${i>0?"}":""}\n      `}var r;this.userCode=`\n      ${r=e,`\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ${ES(["r","c","d"],r)}\n      return ivec3(r, c, d);\n    }\n  `}\n      ${BS(t)}\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ${t[1]};\n        int cols = ${t[2]};\n\n        ${n}\n\n        setOutput(result);\n      }\n    `}}class tB{constructor(t,e,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e.shape;const[,r,i]=e.shape,[,s,o]=t.shape,a=[n&&s>1?r-1:r,n&&o>1?i-1:i],l=[n&&s>1?s-1:s,n&&o>1?o-1:o],u=a[0]/l[0],c=a[1]/l[1],h=1/u,d=1/c,p=2*Math.ceil(h)+2,f=2*Math.ceil(d)+2;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(${u});\n        const float widthScale = float(${c});\n\n        const float invHeightScale = float(${h});\n        const float invWidthScale = float(${d});\n\n        const int winHeight = int(${p});\n        const int winWidth = int(${f});\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ${s}) {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ${o}) {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ${r-1}.0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ${i-1}.0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    `}}class eB{constructor(t,e,n,r){this.variableNames=["A"],this.outputShape=[];const[i,s,o,a]=t;this.outputShape=[i,e,n,a];const l=[r&&e>1?s-1:s,r&&n>1?o-1:o],u=[r&&e>1?e-1:e,r&&n>1?n-1:n];this.userCode=`\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ${l[0]/u[0]},\n          ${l[1]/u[1]});\n      const vec2 inputShapeRC = vec2(${s}.0, ${o}.0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    `}}class nB{constructor(t,e,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[i,s,o,a]=t;this.outputShape=[i,e,n,a];const l=[r&&e>1?s-1:s,r&&n>1?o-1:o],u=[r&&e>1?e-1:e,r&&n>1?n-1:n];this.userCode=`\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ${l[0]/u[0]},\n          ${l[1]/u[1]},\n          ${l[1]/u[1]});\n      const vec3 inputShapeRC = vec3(${s}.0, ${o}.0,\n                                     ${o}.0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ${a-1};\n        bool hasNextRow = coords.z < ${n-1};\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    `}}class rB{constructor(t,e,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e.shape;const[,r,i]=e.shape,[,s,o]=t.shape,a=[n&&s>1?r-1:r,n&&o>1?i-1:i],l=[n&&s>1?s-1:s,n&&o>1?o-1:o],u=a[0]/l[0],c=a[1]/l[1],h=1/u,d=1/c,p=2*Math.ceil(h)+2,f=2*Math.ceil(d)+2;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(${u});\n        const float widthScale = float(${c});\n\n        const float invHeightScale = float(${h});\n        const float invWidthScale = float(${d});\n\n        const int winHeight = int(${p});\n        const int winWidth = int(${f});\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ${s}) {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ${o}) {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(${a[0]}) *\n                (float(dyR) / float(${l[0]}));\n\n            float sourceFracCol =\n                float(${a[1]}) *\n                  (float(dyC) / float(${l[1]}));\n\n            int sourceNearestRow = int(min(\n                float(int(${r}) - 1),\n                ${n} ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(${i}) - 1),\n                ${n} ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    `}}class iB{constructor(t,e,n,r){this.variableNames=["A"],this.outputShape=[];const[i,s,o,a]=t;this.outputShape=[i,e,n,a];const l=[r&&e>1?s-1:s,r&&n>1?o-1:o],u=[r&&e>1?e-1:e,r&&n>1?n-1:n];this.userCode=`\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ${l[0]/u[0]},\n          ${l[1]/u[1]});\n      const vec2 inputShapeRC = vec2(${s}.0, ${o}.0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${r?"0.5":"0.0"})));\n\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    `}}class sB{constructor(t,e){this.variableNames=["x"];const n=t.length;if(n>4)throw new Error(`WebGL backend: Reverse of rank-${n} tensor is not yet supported`);if(this.outputShape=t,1===n)return void(this.userCode=`\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(${t[0]} - coord - 1));\n        }\n      `);const r=t.map((n,r)=>(n=>-1!==e.indexOf(n)&&1!==t[n]?`${t[n]} - coords[${n}] - 1`:`coords[${n}]`)(r)).join(","),i=LS(n);this.userCode=`\n      void main() {\n        ${i} coords = getOutputCoords();\n        setOutput(getX(${r}));\n      }\n    `}}class oB{constructor(t,e){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const n=t.length;if(n>4)throw new Error(`WebGL backend: Reverse of rank-${n} tensor is not yet supported`);this.outputShape=t;const r=CS("rc",n),i=`${r[n-1]} + 1 < ${this.outputShape[n-1]}`,s=`${r[n-2]} + 1 < ${this.outputShape[n-2]}`,o=LS(n);function a(n){const r=t.map((r,i)=>function(n,r){return-1!==e.indexOf(n)&&1!==t[n]?`${t[n]} - ${r[n]} - 1`:""+r[n]}(i,n));return`getChannel(getX(${r.join(",")}), vec2(${r.slice(-2).join(",")}))`}this.userCode=1===n?`\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(${t[0]} - rc - 1),\n            ${t[0]} - rc - 1);\n          if(${i}){\n              result.g = getChannel(getX(${t[0]} - (rc  + 1) - 1),\n                ${t[0]} - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      `:`\n        void main() {\n          ${o} rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ${function(t){return a(t)}(r.slice())};\n          if(${i}){\n            result.g = ${function(t){return t[n-1]="("+t[n-1]+" + 1)",a(t)}(r.slice())};\n          }\n          if(${s}) {\n            result.b = ${function(t){return t[n-2]="("+t[n-2]+" + 1)",a(t)}(r.slice())};\n            if(${i}) {\n              result.a = ${function(t){return t[n-1]="("+t[n-1]+" + 1)",t[n-2]="("+t[n-2]+" + 1)",a(t)}(r.slice())};\n            }\n          }\n          setOutput(result);\n        }\n    `}}class aB{constructor(t,e,n,r,i,s,o=!0){this.variableNames=["updates","indices","defaultValue"],this.outputShape=s;const a=LS(i.length),l=LS(s.length);let u="";1===n?u="i":2===n&&(u="i, j");let c="";1===r?c="i":2===r&&(c="i, coords[1]"),this.userCode=`\n        ${a} strides = ${a}(${i});\n\n        void main() {\n          ${l} coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ${t}; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ${e}; j++) {\n              int index = round(getIndices(${u}));\n              flattenedIndex += index * ${e>1?"strides[j]":"strides"};\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += getUpdates(${c});\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      `}}class lB{constructor(t,e){this.variableNames=["x","segmentIds"];const n=t.windowSize,r=t.batchSize,i=t.inSize,s=t.numSegments,o=s*Math.ceil(i/n);this.outputShape=[r,o];const a=4*Math.floor(n/4),l=n%4,u="\n        sumValue += dot(values, segFilter);\n    ";let c="";i%n>0&&(c=`\n        if (inIdx < 0 || inIdx >= ${i}) {\n          return initializationValue;\n        }\n      `);let h="";i%n>0&&(h=`\n        if (inIdx < 0 || inIdx >= ${i}) {\n          return -1.0;\n        }\n      `),this.userCode=`\n      const float initializationValue = 0.0;\n\n      float getValue(int batch, int inIdx) {\n        ${c}\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ${h}\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ${s})) * float(${n}));\n        int currentSeg = int(mod(float(outIdx), float(${s})));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ${a}; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ${u}\n        }\n\n        int inIdx = inOffset + ${a};\n        if (${1===l}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ${u}\n        } else if (${2===l}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ${u}\n        } else if (${3===l}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ${u}\n        }\n        setOutput(sumValue);\n      }\n    `}}class uB{constructor(t,e,n){let r,i;if(this.variableNames=["c","a","b"],this.outputShape=e,n>4)throw Error(`Where for rank ${n} is not yet supported`);if(1===n)i="resRC",r="resRC";else{const n=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[],o=[];for(let r=0;r<e.length;r++)o.push(""+n[r]),r<t&&s.push(""+n[r]);r=s.join(),i=o.join()}const s=LS(n);this.userCode=`\n      void main() {\n        ${s} resRC = getOutputCoords();\n        float cVal = getC(${r});\n        if (cVal >= 1.0) {\n          setOutput(getA(${i}));\n        } else {\n          setOutput(getB(${i}));\n        }\n      }\n    `}}class cB{constructor(t){this.variableNames=["source"],this.outputShape=t,this.rank=t.length;const e=LS(this.rank),n=`uniform int start[${this.rank}];`,r=function(t){if(1===t)return"sourceLoc";if(t<=6)return hB.slice(0,t).map(t=>"sourceLoc."+t).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}(this.rank);let i;i=`\n        ${e} sourceLoc;\n        ${e} coords = getOutputCoords();\n        ${t.map((t,e)=>`sourceLoc.${hB[e]} = start[${e}] + coords.${hB[e]};`).join("\n")}\n      `,this.userCode=`\n      ${n}\n      void main() {\n        ${i}\n        setOutput(getSource(${r}));\n      }\n    `}getCustomSetupFunc(t){if(t.length!==this.rank)throw Error(`The rank (${this.rank}) of the program must match the length of start (${t.length})`);return(e,n)=>{null==this.startLoc&&(this.startLoc=e.getUniformLocationNoThrow(n,"start"),null==this.startLoc)||e.gl.uniform1iv(this.startLoc,t)}}}const hB=["x","y","z","w","u","v"];class dB{constructor(t){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length;const e=LS(this.rank),n=CS("coords",this.rank),r=CS("sourceLoc",this.rank),i=1===this.rank?"sourceLoc":`vec2(${r.slice(-2).join()})`,s=`getChannel(getSource(${r.join()}), ${i})`,o=`\n      result.x = ${s};\n      if (++${n[this.rank-1]} < ${t[this.rank-1]}) {\n        ++${r[this.rank-1]};\n        result.y = ${s};\n        --${r[this.rank-1]};\n      }\n    `,a=1===this.rank?"":`\n      --${n[this.rank-1]};\n      if (++${n[this.rank-2]} < ${t[this.rank-2]}) {\n        ++${r[this.rank-2]};\n        result.z = ${s};\n        if (++${n[this.rank-1]} < ${t[this.rank-1]}) {\n          ++${r[this.rank-1]};\n          result.w = ${s};\n        }\n      }\n    `,l=this.rank<=4?`sourceLoc = coords +\n            ${e}(${t.map((t,e)=>`start[${e}]`).join()});`:t.map((t,e)=>`${r[e]} = ${n[e]} + start[${e}];`).join("\n");this.userCode=`\n      uniform int start[${this.rank}];\n      void main() {\n        ${e} coords = getOutputCoords();\n        ${e} sourceLoc;\n        ${l}\n        vec4 result = vec4(0.);\n        ${o}\n        ${a}\n        setOutput(result);\n      }\n    `}getCustomSetupFunc(t){if(t.length!==this.rank)throw Error(`The rank (${this.rank}) of the program must match the length of start (${t.length})`);return(e,n)=>{null==this.startLoc&&(this.startLoc=e.getUniformLocationNoThrow(n,"start"),null==this.startLoc)||e.gl.uniform1iv(this.startLoc,t)}}}class pB{constructor(t,e,n){this.variableNames=["x"],this.outputShape=n;const r=n.length,i=LS(n.length),s=LS(n.length);let o="";if(1===r)o="coords * strides + begin";else{let t=0;o=n.map((e,r)=>(t++,1===n.length?`coords * strides[${r}] + begin[${r}]`:`coords[${t-1}] * strides[${r}] + begin[${r}]`)).join(",")}this.userCode=`\n      ${i} begin = ${i}(${t});\n      ${i} strides = ${i}(${e});\n\n      void main() {\n        ${s} coords = getOutputCoords();\n        setOutput(getX(${o}));\n      }\n    `}}class fB{constructor(t){this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}acquireTexture(t,e,n){const r=mB(e,n),i=gB(t,r,n);i in this.freeTextures||(this.freeTextures[i]=[]),i in this.usedTextures||(this.usedTextures[i]=[]);const s=AB(t,r,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[i].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=s,this.log();const t=this.freeTextures[i].shift();return this.usedTextures[i].push(t),t}let o;return r===WC.PACKED_2X2_FLOAT32?o=this.gpgpu.createPackedMatrixTexture(t[0],t[1]):r===WC.PACKED_2X2_FLOAT16?o=this.gpgpu.createFloat16PackedMatrixTexture(t[0],t[1]):r===WC.UNPACKED_FLOAT32?o=this.gpgpu.createFloat32MatrixTexture(t[0],t[1]):r===WC.UNPACKED_FLOAT16?o=this.gpgpu.createFloat16MatrixTexture(t[0],t[1]):r===WC.PACKED_4X1_UNSIGNED_BYTE&&(o=this.gpgpu.createUnsignedBytesMatrixTexture(t[0],t[1])),this.usedTextures[i].push(o),this.numUsedTextures++,this._numBytesAllocated+=s,this.log(),o}releaseTexture(t,e,n,r){if(null==this.freeTextures)return;const i=mB(n,r),s=gB(e,i,r);s in this.freeTextures||(this.freeTextures[s]=[]);const o=AB(e,i,this.gpgpu.gl,this.gpgpu.textureConfig,r),a=V().get("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==a&&this._numBytesAllocated>a?(this.gpgpu.deleteMatrixTexture(t),this._numBytesAllocated-=o):(this.freeTextures[s].push(t),this.numFreeTextures++,this._numBytesFree+=o),this.numUsedTextures--;const l=this.usedTextures[s],u=l.indexOf(t);if(u<0)throw new Error("Cannot release a texture that was never provided by this texture manager");l.splice(u,1),this.log()}log(){if(!this.logEnabled)return;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${this.numFreeTextures+this.numUsedTextures})`);const t=this._numBytesFree/this._numBytesAllocated;console.log("Bytes allocated: "+this._numBytesAllocated),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*t)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(null!=this.freeTextures){for(const t in this.freeTextures)this.freeTextures[t].forEach(t=>{this.gpgpu.deleteMatrixTexture(t)});for(const t in this.usedTextures)this.usedTextures[t].forEach(t=>{this.gpgpu.deleteMatrixTexture(t)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function AB(t,e,n,r,i){const s=function(t,e){switch(t){case WC.PACKED_2X2_FLOAT32:return OE(e);case WC.PACKED_2X2_FLOAT16:return DE(e);case WC.UNPACKED_FLOAT32:return FE(e);case WC.UNPACKED_FLOAT16:return TE(e);case WC.PACKED_4X1_UNSIGNED_BYTE:return RE(e);default:throw new Error("Unknown physical texture type "+t)}}(e,r);let o;if(i){const[e,n]=YC(t[0],t[1]);o=e*n}else{const[e,n]=GC(t[0],t[1]);o=e*n}return o*function(t,e){if(e===t.R32F)return 4;if(e===t.R16F)return 2;if(e===t.RGBA32F)return 16;if(e===t.RGBA)return 16;if(e===t.RGBA16F)return 8;throw new Error("Unknown internal format "+e)}(n,s)}function mB(t,e){if(t===KC.UPLOAD)return WC.PACKED_2X2_FLOAT32;if(t===KC.RENDER||null==t)return function(t){return V().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?WC.PACKED_2X2_FLOAT32:WC.UNPACKED_FLOAT32:t?WC.PACKED_2X2_FLOAT16:WC.UNPACKED_FLOAT16}(e);if(t===KC.DOWNLOAD||t===KC.PIXELS)return WC.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+t)}function gB(t,e,n){return`${t[0]}_${t[1]}_${e}_${n}`}class yB{constructor(t,e){this.variableNames=["A"];const n=new Array(t.length);for(let s=0;s<n.length;s++)n[s]=t[s]*e[s];this.outputShape=n,this.rank=n.length;const r=LS(this.rank),i=function(t){const e=t.length;if(e>5)throw Error(`Tile for rank ${e} is not yet supported`);if(1===e)return`imod(resRC, ${t[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let i=0;i<t.length;i++)r.push(`imod(${n[i]}, ${t[i]})`);return r.join()}(t);this.userCode=`\n      void main() {\n        ${r} resRC = getOutputCoords();\n        setOutput(getA(${i}));\n      }\n    `}}class wB{constructor(t,e){this.variableNames=["A"],this.outputShape=t,this.userCode=`\n      float unaryOperation(float x) {\n        ${e}\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    `}}const bB="return abs(x);",vB="if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : x;\n",xB="if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",_B=`\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ${g.SELU_SCALEALPHA};\n  float scale = ${g.SELU_SCALE};\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n`,CB="return -x;",SB="return ceil(x);",EB="return floor(x);",BB="return exp(x);",kB="return exp(x) - 1.0;",NB=`\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = ${g.ERF_P};\n  float a1 = ${g.ERF_A1};\n  float a2 = ${g.ERF_A2};\n  float a3 = ${g.ERF_A3};\n  float a4 = ${g.ERF_A4};\n  float a5 = ${g.ERF_A5};\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n`,IB="return x;",FB="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",TB="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",RB="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n";class OB{constructor(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.userCode=`\n      vec4 unaryOperation(vec4 x) {\n        ${e}\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    `}}class DB{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t;const e=t.length,n=CS("rc",e),r=LS(e),i=function(t,e){if(1===t)return"rc";let n="";for(let r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}(e,n),s=n.slice(-2),o=e<=1?"rc":`vec2(${s.join(",")})`;this.userCode=`\n      void main() {\n        ${r} rc = getOutputCoords();\n        vec4 packedInput = getA(${i});\n\n        setOutput(getChannel(packedInput, ${o}));\n      }\n    `}}const{segment_util:LB}=g,MB=y.split,UB=y.tile,PB=y.topkImpl,zB=y.whereImpl,QB={};function HB(t,e=!1){if("linear"===t)return"return x;";if("relu"===t)return e?FB:vB;if("elu"===t)return e?RB:"return (x >= 0.0) ? x : (exp(x) - 1.0);";if("relu6"===t)return e?TB:xB;if("prelu"===t)return e?XS:WS;throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}class $B extends zf{constructor(t){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.warnedAboutMemory=!1,this.warnedAboutCPUBackend=!1,this.pendingDeletes=0,this.disposed=!1,!V().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null==t){const t=qC(V().getNumber("WEBGL_VERSION"));this.binaryCache=((e=V().getNumber("WEBGL_VERSION"))in QB||(QB[e]={}),QB[e]),this.gpgpu=new LE(t),this.canvas=t.canvas,this.gpgpuCreatedLocally=!0}else this.gpgpu=t,this.binaryCache={},this.gpgpuCreatedLocally=!1,this.canvas=t.gl.canvas;var e;this.textureManager=new fB(this.gpgpu),this.numMBBeforeWarning=null==V().global.screen?1024:V().global.screen.height*V().global.screen.width*window.devicePixelRatio*600/1024/1024,this.texData=new Pf(this,ju())}numDataIds(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes}write(t,e,n){if((V().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||V().getBool("DEBUG"))&&this.checkNumericalProblems(t),"complex64"===n&&null!=t)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const r={};return this.texData.set(r,{shape:e,dtype:n,values:t,usage:KC.UPLOAD}),r}move(t,e,n,r){if(V().getBool("DEBUG")&&this.checkNumericalProblems(e),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(t,{shape:n,dtype:r,values:e,usage:KC.UPLOAD})}readSync(t){const e=this.texData.get(t),{values:n,dtype:i,complexTensors:s,slice:o,shape:a,isPacked:l}=e;if(null!=o){let e;e=l?new OB(a,IB):new wB(a,IB);const n=this.runWebGLProgram(e,[{dataId:t,shape:a,dtype:i}],i),r=this.readSync(n.dataId);return this.disposeData(n.dataId),r}if(null!=n)return this.convertAndCacheOnCPU(t);if("string"===i)return n;const u=null!=this.activeTimers;let c,h;if(u&&(c=r.now()),"complex64"===i){const t=s.real.dataSync(),e=s.imag.dataSync();h=g.mergeRealAndImagArrays(t,e)}else h=this.getValuesFromTexture(t);return u&&(this.downloadWaitMs+=r.now()-c),this.convertAndCacheOnCPU(t,h)}async read(t){if(this.pendingRead.has(t)){const e=this.pendingRead.get(t);return new Promise(t=>e.push(t))}const e=this.texData.get(t),{values:n,shape:i,slice:s,dtype:o,complexTensors:a,isPacked:l}=e;if(null!=s){let e;e=l?new OB(i,IB):new wB(i,IB);const n=this.runWebGLProgram(e,[{dataId:t,shape:i,dtype:o}],o),r=this.read(n.dataId);return this.disposeData(n.dataId),r}if(null!=n)return this.convertAndCacheOnCPU(t);if(!V().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===V().getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let u,c,h=null;if("complex64"!==o&&V().get("WEBGL_BUFFER_SUPPORTED")){u=this.decode(t);const e=this.texData.get(u.dataId);h=this.gpgpu.createBufferFromTexture(e.texture,...XC(i))}if(this.pendingRead.set(t,[]),"complex64"!==o&&await this.gpgpu.createAndWaitForFence(),"complex64"===o){const t=await Promise.all([a.real.data(),a.imag.data()]);c=g.mergeRealAndImagArrays(t[0],t[1])}else if(null==h)c=this.getValuesFromTexture(t);else{const t=r.sizeFromShape(i);c=this.gpgpu.downloadFloat32MatrixFromBuffer(h,t)}null!=u&&this.disposeData(u.dataId);const d=this.convertAndCacheOnCPU(t,c),p=this.pendingRead.get(t);return this.pendingRead.delete(t),p.forEach(t=>t(d)),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t),this.pendingDeletes--),d}checkNumericalProblems(t){if(null!=t)for(let e=0;e<t.length;e++){const n=t[e];if(!tS(n)){if(V().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error(`The value ${n} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`);throw Error(`The value ${n} cannot be represented on this device.`)}}}getValuesFromTexture(t){const{shape:e,dtype:n,isPacked:i}=this.texData.get(t),s=r.sizeFromShape(e);if(V().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const n=this.decode(t),r=this.texData.get(n.dataId),i=this.gpgpu.downloadMatrixFromPackedTexture(r.texture,...XC(e)).subarray(0,s);return this.disposeData(n.dataId),i}const o=V().getBool("WEBGL_PACK")&&!0===i,a=o?hS(e):e,l=o?new _E(a):new xE(a),u=this.runWebGLProgram(l,[{shape:a,dtype:n,dataId:t}],"float32"),c=this.texData.get(u.dataId),h=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(c.texture,c.texShape[0],c.texShape[1]).subarray(0,s);return this.disposeData(u.dataId),h}async time(t){const e=this.activeTimers,n=[];let i=!1;null==this.programTimersStack?(this.programTimersStack=n,i=!0):this.activeTimers.push(n),this.activeTimers=n,t();const s=r.flatten(this.activeTimers.map(t=>t.query)).filter(t=>null!=t),o=r.flatten(this.activeTimers.map(t=>t.name)).filter(t=>null!=t);this.activeTimers=e,i&&(this.programTimersStack=null);const a={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};if(V().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const t=await Promise.all(s);a.kernelMs=r.sum(t),a.getExtraProfileInfo=()=>t.map((t,e)=>({name:o[e],ms:t})).map(t=>`${t.name}: ${t.ms}`).join(", ")}else a.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,a}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return V().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:r.now(),endMs:null}}endTimer(t){return V().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),t):(t.endMs=r.now(),t)}async getQueryTime(t){return V().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.waitForQueryAndGetTime(t):t.endMs-t.startMs}disposeData(t){if(this.pendingDisposal.has(t))return;if(this.pendingRead.has(t))return this.pendingDisposal.add(t),void this.pendingDeletes++;if(!this.texData.has(t))return;this.releaseGPUData(t);const{complexTensors:e}=this.texData.get(t);null!=e&&(e.real.dispose(),e.imag.dispose()),this.texData.delete(t)}releaseGPUData(t){const{texture:e,dtype:n,texShape:r,usage:i,isPacked:s,slice:o}=this.texData.get(t),a=o&&o.origDataId||t,l=this.dataRefCount.get(a);l>1?this.dataRefCount.set(a,l-1):(this.dataRefCount.delete(a),null!=e&&(this.numBytesInGPU-=this.computeBytes(r,n),this.textureManager.releaseTexture(e,r,i,s)));const u=this.texData.get(t);u.texture=null,u.texShape=null,u.isPacked=!1,u.slice=null}getTexture(t){return this.uploadToGPU(t),this.texData.get(t).texture}getDataInfo(t){return this.texData.get(t)}getCPUBackend(){return V().getBool("WEBGL_CPU_FORWARD")?(null==this.cpuBackend&&(this.cpuBackend=ju().findBackend("cpu")),this.cpuBackend):null}shouldExecuteOnCPU(t,e=128){const n=this.getCPUBackend();return this.warnedAboutCPUBackend||null!=n||V().getBool("IS_TEST")||(console.warn("Your application contains ops that are small enough to be executed on the CPU backend, however the CPU backend cannot be found. Consider importing the CPU backend (@tensorflow/tfjs-backend-cpu) for better performance."),this.warnedAboutCPUBackend=!0),null!=n&&t.every(t=>null==this.texData.get(t.dataId).texture&&r.sizeFromShape(t.shape)<e)}getGPGPUContext(){return this.gpgpu}complex(t,e){const n=this.makeOutput(t.shape,"complex64");return this.texData.get(n.dataId).complexTensors={real:ju().keep(t.clone()),imag:ju().keep(e.clone())},n}real(t){return this.texData.get(t.dataId).complexTensors.real.clone()}imag(t){return this.texData.get(t.dataId).complexTensors.imag.clone()}slice(t,e,n){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.slice(t,e,n);if(0===r.sizeFromShape(n))return $a([],n,t.dtype);const{isPacked:i}=this.texData.get(t.dataId),s=o.isSliceContinous(t.shape,e,n);if(i||!s){const r=V().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new dB(n):new cB(n),i=r.getCustomSetupFunc(e);return this.compileAndRun(r,[t],null,i)}return this.uploadToGPU(t.dataId),this.shallowSlice(t,e,n)}shallowSlice(t,e,n){const r=this.texData.get(t.dataId),i=this.makeOutput(n,t.dtype),s=this.texData.get(i.dataId);Object.assign(s,r),s.shape=n,s.dtype=t.dtype;let a=o.computeFlatOffset(e,t.strides);r.slice&&(a+=r.slice.flatOffset),s.slice={flatOffset:a,origDataId:r.slice&&r.slice.origDataId||t.dataId};const l=this.dataRefCount.get(s.slice.origDataId)||1;return this.dataRefCount.set(s.slice.origDataId,l+1),i}stridedSlice(t,e,n,r){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.stridedSlice(t,e,n,r);const i=o.computeOutShape(e,n,r);if(i.some(t=>0===t))return $a([],i);const s=new pB(e,r,i);return this.compileAndRun(s,[t])}reverse(t,e){const n=V().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new oB(t.shape,e):new sB(t.shape,e);return this.compileAndRun(n,[t])}concat(t,e){if("complex64"===t[0].dtype){const n=t.map(t=>nh(t)),r=t.map(t=>eh(t));return $o(this.concat(n,e),this.concat(r,e))}if(this.shouldExecuteOnCPU(t))return this.cpuBackend.concat(t,e);if(1===t.length)return t[0];if(t.length>V().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const n=Math.floor(t.length/2),r=this.concat(t.slice(0,n),e),i=this.concat(t.slice(n),e);return this.concat([r,i],e)}if(V().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&t[0].rank>1){const n=new nE(t.map(t=>t.shape),e);return this.compileAndRun(n,t)}const n=g.computeOutShape(t.map(t=>t.shape),e),i=t.map(t=>t.as2D(-1,r.sizeFromShape(t.shape.slice(e)))),s=new eE(i.map(t=>t.shape));return this.compileAndRun(s,i).reshape(n)}neg(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.neg(t);if(V().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,CB,t.dtype);const e=new wB(t.shape,CB);return this.compileAndRun(e,[t])}batchMatMul(t,e,n,r){const i=n?t.shape[2]:t.shape[1],s=r?e.shape[1]:e.shape[2],o=n?t.shape[1]:t.shape[2],[a,,]=t.shape;if((1===i||1===s)&&o>1e3){n&&(t=Ws(t,[0,2,1])),r&&(e=Ws(e,[0,2,1]));const i=1===s?t:t.as3D(a,o,1),l=1===s?2:1,u=1===s?e.as3D(a,1,o):e;return this.multiply(i,u).sum(l,!0)}const l=ge(t.dtype,e.dtype),u=new VE(t.shape,[a,i,s],n,r);return this.compileAndRun(u,[t,e],l)}fusedBatchMatMul({a:t,b:e,transposeA:n,transposeB:r,bias:i,activation:s,preluActivationWeights:o}){const a=n?t.shape[2]:t.shape[1],l=r?e.shape[1]:e.shape[2],[u,,]=t.shape,c=ge(t.dtype,e.dtype),h=null!=i,d=null!=o,p=s?HB(s,!0):null,f=new VE(t.shape,[u,a,l],n,r,h,p,d),A=[t,e];return i&&A.push(i),o&&A.push(o),this.compileAndRun(f,A,c)}multiply(t,e){if("complex64"===t.dtype){const n=this.texData.get(t.dataId),r=this.texData.get(e.dataId),i=new VS("return areal * breal - aimag * bimag;",t.shape,e.shape),s=new VS("return areal * bimag + aimag * breal;",t.shape,e.shape),o=[this.makeComplexComponentTensorInfo(t,n.complexTensors.real),this.makeComplexComponentTensorInfo(t,n.complexTensors.imag),this.makeComplexComponentTensorInfo(e,r.complexTensors.real),this.makeComplexComponentTensorInfo(e,r.complexTensors.imag)],a=this.compileAndRun(i,o),l=this.compileAndRun(s,o),u=this.complex(a,l);return a.dispose(),l.dispose(),u}if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.multiply(t,e);if(V().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,KS,t.dtype);const n=new GS(KS,t.shape,e.shape);return this.compileAndRun(n,[t,e],t.dtype)}batchNorm(t,e,n,r,i,s){const o=[t,e,n];let a=null;null!=r&&(a=r.shape,o.push(r));let l=null;if(null!=i&&(l=i.shape,o.push(i)),V().getBool("WEBGL_PACK_NORMALIZATION")){const r=new $S(t.shape,e.shape,n.shape,a,l,s);return this.compileAndRun(r,o)}const u=new HS(t.shape,e.shape,n.shape,a,l,s);return this.compileAndRun(u,o)}localResponseNormalization4D(t,e,n,r,i){const s=V().getBool("WEBGL_PACK_NORMALIZATION")?new QE(t.shape,e,n,r,i):new PE(t.shape,e,n,r,i);return this.compileAndRun(s,[t])}LRNGrad(t,e,n,r,i,s,o){const a=new zE(e.shape,r,i,s,o);return this.compileAndRun(a,[e,n,t])}tile(t,e){if("string"===t.dtype){const n=this.readSync(t.dataId).map(t=>r.decodeString(t)),i=Fc(t.shape,t.dtype,n);return UB(i,e)}const n=new yB(t.shape,e);return this.compileAndRun(n,[t])}pad(t,e,n){const r=V().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new GE(t.shape,e,n):new WE(t.shape,e,n);return this.compileAndRun(r,[t])}gather(t,e,n){if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.gather(t,e,n);const r=new kE(t.shape,e.size,n);return this.compileAndRun(r,[t,e])}batchToSpaceND(t,e,n){r.assert(t.rank<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const i=e.reduce((t,e)=>t*e),s=g.getReshaped(t.shape,e,i),o=g.getPermuted(s.length,e.length),a=g.getReshapedPermuted(t.shape,e,i),l=g.getSliceBeginCoords(n,e.length),u=g.getSliceSize(a,n,e.length);return Ws(t.reshape(s),o).reshape(a).slice(l,u)}spaceToBatchND(t,e,n){r.assert(t.rank<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const i=e.reduce((t,e)=>t*e),s=[[0,0]];s.push(...n);for(let r=1+e.length;r<t.shape.length;++r)s.push([0,0]);const o=t.pad(s),a=g.getReshaped(o.shape,e,i,!1),l=g.getPermuted(a.length,e.length,!1),u=g.getReshapedPermuted(o.shape,e,i,!1),c=Ws(o.reshape(a),l);return qi(c,u)}reduce(t,e,n){const r=t.shape[0],i=t.shape[1],s=g.computeOptimalWindowSize(i),o=new JE({windowSize:s,inSize:i,batchSize:r},e),a=this.compileAndRun(o,[t],n);return 1===a.shape[1]?a:this.reduce(a,e,n)}argReduce(t,e,n=null){let r=t.shape[0],i=t.shape[1];null!=n&&(r=n.shape[0],i=n.shape[1]);const s=g.computeOptimalWindowSize(i),o=new xS({windowSize:s,inSize:i,batchSize:r},e,null==n),a=[t];null!=n&&a.push(n);const l=this.compileAndRun(o,a,"int32");return 1===l.shape[1]?l:this.argReduce(t,e,l)}argReducePacked(t,e,n=null){const r=null!=n?n.shape:t.shape,i=g.computeOptimalWindowSize(r[r.length-1]),s=new PS(r,i,e,null==n),o=this.compileAndRun(s,null==n?[t]:[t,n],"int32");return o.rank===t.rank?this.argReducePacked(t,e,o):o}sum(t,e){g.assertAxesAreInnerMostDims("sum",e,t.rank);const[n,i]=g.computeOutAndReduceShapes(t.shape,e),s=r.sizeFromShape(i),o=t.as2D(-1,s),a=ye(t.dtype);return this.reduce(o,"sum",a).reshape(n)}prod(t,e){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.prod(t,e);const[n,i]=g.computeOutAndReduceShapes(t.shape,e),s=r.sizeFromShape(i),o=t.as2D(-1,s),a=ye(t.dtype);return this.reduce(o,"prod",a).reshape(n)}unsortedSegmentSum(t,e,n){let i=0;const s=g.getAxesPermutation([i],t.rank);let o=t;null!=s&&(o=Ws(t,s),i=g.getInnerMostAxes(1,t.rank)[0]);const a=LB.computeOutShape(o.shape,i,n),l=r.sizeFromShape([o.shape[i]]),u=o.as2D(-1,l),c=ye(t.dtype);let h=this.segOpCompute(u,"unsortedSegmentSum",e,c,n).reshape(a);return null!=s&&(h=Ws(h,g.getUndoAxesPermutation(s))),h}segOpCompute(t,e,n,r,i){const s=t.shape[0],o=t.shape[1],a=LB.segOpComputeOptimalWindowSize(o,i),l=new lB({windowSize:a,inSize:o,batchSize:s,numSegments:i},e),u=this.compileAndRun(l,[t,n],r);return u.shape[1]===i?u:(n=td(0,i).tile([o/a]),this.segOpCompute(u,e,n,r,i))}argMinMaxReduce(t,e,n){const i=[e];if(g.assertAxesAreInnerMostDims("arg"+n.charAt(0).toUpperCase()+n.slice(1),i,t.rank),!V().getBool("WEBGL_PACK_REDUCE")||t.rank<=2){const[e,s]=g.computeOutAndReduceShapes(t.shape,i),o=r.sizeFromShape(s),a=t.as2D(-1,o);return this.argReduce(a,n).reshape(e)}return this.argReducePacked(t,n)}argMin(t,e){return this.argMinMaxReduce(t,e,"min")}argMax(t,e){return this.argMinMaxReduce(t,e,"max")}cumsum(t,e,n,r){if(e!==t.rank-1)throw new Error(`WebGL cumsum shader expects an inner-most axis=${t.rank-1} but got axis=`+e);const i=t.shape[e];let s=t;for(let o=0;o<=Math.ceil(Math.log2(i))-1;o++){const e=new AE(t.shape,!1,r),n=e.getCustomSetupFunc(o),i=s;s=this.compileAndRun(e,[s],s.dtype,n),i.dispose()}if(n){const e=new AE(t.shape,n,r),i=s;s=this.compileAndRun(e,[s]),i.dispose()}return s}equal(t,e){if(V().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,"\n  return vec4(equal(a, b));\n","bool");const n=new GS("return float(a == b);",t.shape,e.shape);return this.compileAndRun(n,[t,e],"bool")}notEqual(t,e){if(V().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,"\n  return vec4(notEqual(a, b));\n","bool");const n=new GS("return float(a != b);",t.shape,e.shape);return this.compileAndRun(n,[t,e],"bool")}less(t,e){if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.less(t,e);if(V().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,"\n  return vec4(lessThan(a, b));\n","bool");const n=new GS("return float(a < b);",t.shape,e.shape);return this.compileAndRun(n,[t,e],"bool")}lessEqual(t,e){if(V().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,"\n  return vec4(lessThanEqual(a, b));\n","bool");const n=new GS("return float(a <= b);",t.shape,e.shape);return this.compileAndRun(n,[t,e],"bool")}greater(t,e){if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.greater(t,e);if(V().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,"\n  return vec4(greaterThan(a, b));\n","bool");const n=new GS("return float(a > b);",t.shape,e.shape);return this.compileAndRun(n,[t,e],"bool")}greaterEqual(t,e){if(V().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,"\n  return vec4(greaterThanEqual(a, b));\n","bool");const n=new GS("return float(a >= b);",t.shape,e.shape);return this.compileAndRun(n,[t,e],"bool")}logicalNot(t){const e=new wB(t.shape,"return float(!(x >= 1.0));");return this.compileAndRun(e,[t])}logicalAnd(t,e){if(V().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n","bool");const n=new GS("return float(a >= 1.0 && b >= 1.0);",t.shape,e.shape);return this.compileAndRun(n,[t,e],"bool")}logicalOr(t,e){if(V().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n","bool");const n=new GS("return float(a >= 1.0 || b >= 1.0);",t.shape,e.shape);return this.compileAndRun(n,[t,e],"bool")}select(t,e,n){const r=new uB(t.rank,e.shape,e.rank);return this.compileAndRun(r,[t,e,n],ge(e.dtype,n.dtype))}where(t){g.warn("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const e=t.dataSync();return zB(t.shape,e)}topk(t,e,n){const r=t.dataSync();return PB(r,t.shape,t.dtype,e,n)}min(t,e){g.assertAxesAreInnerMostDims("min",e,t.rank);const[n,i]=g.computeOutAndReduceShapes(t.shape,e),s=r.sizeFromShape(i),o=t.as2D(-1,s);return this.reduce(o,"min",o.dtype).reshape(n)}minimum(t,e){if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.minimum(t,e);const n=V().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new YS("\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",t.shape,e.shape):new GS("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return min(a, b);\n",t.shape,e.shape);return this.compileAndRun(n,[t,e])}mod(t,e){const n=V().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new YS("\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",t.shape,e.shape):new GS("if (b == 0.0) return NAN;\n  return mod(a, b);",t.shape,e.shape);return this.compileAndRun(n,[t,e])}maximum(t,e){if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.maximum(t,e);const n=V().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new YS("\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",t.shape,e.shape):new GS("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return max(a, b);\n",t.shape,e.shape);return this.compileAndRun(n,[t,e])}all(t,e){g.assertAxesAreInnerMostDims("all",e,t.rank);const[n,i]=g.computeOutAndReduceShapes(t.shape,e),s=r.sizeFromShape(i),o=t.as2D(-1,s);return this.reduce(o,"all",o.dtype).reshape(n)}any(t,e){g.assertAxesAreInnerMostDims("any",e,t.rank);const[n,i]=g.computeOutAndReduceShapes(t.shape,e),s=r.sizeFromShape(i),o=t.as2D(-1,s);return this.reduce(o,"any",o.dtype).reshape(n)}floorDiv(t,e){if(V().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n","int32");const n=new GS("\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",t.shape,e.shape);return this.compileAndRun(n,[t,e],"int32")}add(t,e){if("complex64"===t.dtype&&"complex64"===e.dtype)return this.complexSeparableBinaryOp(t,e,qS);if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.add(t,e);const n=ge(t.dtype,e.dtype);if(V().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,qS,n);const r=new GS(qS,t.shape,e.shape);return this.compileAndRun(r,[t,e],n)}packedUnaryOp(t,e,n){const r=new OB(t.shape,e);return this.compileAndRun(r,[t],n)}packedBinaryOp(t,e,n,r,i=!1){const s=new YS(n,t.shape,e.shape,i);return this.compileAndRun(s,[t,e],r)}complexSeparableBinaryOp(t,e,n){const r=this.texData.get(t.dataId),i=this.texData.get(e.dataId),[s,o]=[[r.complexTensors.real,i.complexTensors.real],[r.complexTensors.imag,i.complexTensors.imag]].map(r=>{const[i,s]=r,o=this.makeComplexComponentTensorInfo(t,i),a=this.makeComplexComponentTensorInfo(e,s),l=new GS(n,t.shape,e.shape);return this.compileAndRun(l,[o,a],ge(i.dtype,s.dtype))}),a=this.complex(s,o);return s.dispose(),o.dispose(),a}makeComplexComponentTensorInfo(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}}addN(t){if(1===t.length)return t[0];if(t.length>V().get("WEBGL_MAX_TEXTURES_IN_SHADER")){const e=Math.floor(t.length/2),n=this.addN(t.slice(0,e)),r=this.addN(t.slice(e));return this.addN([n,r])}const e=t.map(t=>t.dtype).reduce((t,e)=>ge(t,e)),n=t.map(t=>t.shape),r=V().getBool("WEBGL_PACK")?new vS(t[0].shape,n):new bS(t[0].shape,n);return this.compileAndRun(r,t,e)}subtract(t,e){if("complex64"===t.dtype&&"complex64"===e.dtype)return this.complexSeparableBinaryOp(t,e,jS);if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.subtract(t,e);const n=ge(t.dtype,e.dtype);if(V().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,jS,t.dtype);const r=new GS(jS,t.shape,e.shape);return this.compileAndRun(r,[t,e],n)}pow(t,e){const n=V().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new YS("\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",t.shape,e.shape):new GS("\nif(a < 0.0 && floor(b) < b){\n  return NAN;\n}\nif (b == 0.0) {\n  return 1.0;\n}\nreturn (round(mod(b, 2.0)) != 1) ?\n    pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",t.shape,e.shape),r=ge(t.dtype,e.dtype);return this.compileAndRun(n,[t,e],r)}ceil(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.ceil(t);if(V().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,SB,t.dtype);const e=new wB(t.shape,SB);return this.compileAndRun(e,[t])}floor(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.floor(t);if(V().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,EB,t.dtype);const e=new wB(t.shape,EB);return this.compileAndRun(e,[t])}sign(t){const e=new wB(t.shape,"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n");return this.compileAndRun(e,[t])}isNaN(t){const e=new wB(t.shape,"return float(isnan(x));");return this.compileAndRun(e,[t],"bool")}isInf(t){const e=new wB(t.shape,"return float(isinf(x));");return this.compileAndRun(e,[t],"bool")}isFinite(t){const e=new wB(t.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(e,[t],"bool")}round(t){const e=new wB(t.shape,"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n");return this.compileAndRun(e,[t])}exp(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.exp(t);if(V().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,BB,t.dtype);const e=new wB(t.shape,BB);return this.compileAndRun(e,[t])}expm1(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.expm1(t);if(V().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,kB,t.dtype);const e=new wB(t.shape,kB);return this.compileAndRun(e,[t])}softmax(t,e){const n=r.parseAxisParam([e],t.shape),i=wh(t,n),s=g.expandShapeToKeepDim(i.shape,n),o=this.subtract(t,i.reshape(s)),a=this.exp(o),l=this.sum(a,n).reshape(s);return Si(a,l)}log(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.log(t);if(V().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,"\n  vec4 result = log(x);\n  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));\n  result.r = isNaN.r == 1.0 ? NAN : result.r;\n  result.g = isNaN.g == 1.0 ? NAN : result.g;\n  result.b = isNaN.b == 1.0 ? NAN : result.b;\n  result.a = isNaN.a == 1.0 ? NAN : result.a;\n\n  return result;\n",t.dtype);const e=new wB(t.shape,"if (x < 0.0) return NAN;\n  return log(x);");return this.compileAndRun(e,[t])}log1p(t){const e=new wB(t.shape,"return log(1.0 + x);");return this.compileAndRun(e,[t])}sqrt(t){const e=new wB(t.shape,"return sqrt(x);");return this.compileAndRun(e,[t])}rsqrt(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.rsqrt(t);const e=new wB(t.shape,"return inversesqrt(x);");return this.compileAndRun(e,[t])}reciprocal(t){const e=new wB(t.shape,"return 1.0 / x;");return this.compileAndRun(e,[t])}relu(t){let e;return e=V().getBool("WEBGL_PACK")?new OB(t.shape,FB):new wB(t.shape,vB),this.compileAndRun(e,[t])}relu6(t){let e;return e=V().getBool("WEBGL_PACK")?new OB(t.shape,TB):new wB(t.shape,xB),this.compileAndRun(e,[t])}prelu(t,e){const n=V().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new YS(XS,t.shape,e.shape):new GS(WS,t.shape,e.shape);return this.compileAndRun(n,[t,e])}elu(t){if(V().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,RB,t.dtype);const e=new wB(t.shape,"return (x >= 0.0) ? x : (exp(x) - 1.0);");return this.compileAndRun(e,[t])}eluDer(t,e){const n=V().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new YS("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",t.shape,e.shape):new GS("return (b >= 1.0) ? a : a * (b + 1.0);",t.shape,e.shape);return this.compileAndRun(n,[t,e])}selu(t){const e=new wB(t.shape,_B);return this.compileAndRun(e,[t])}int(t){const e=new wB(t.shape,"return float(int(x));");return this.compileAndRun(e,[t],"int32")}clip(t,e,n){let r;r=V().getBool("WEBGL_PACK_CLIP")?new ZS(t.shape):new JS(t.shape);const i=r.getCustomSetupFunc(e,n);return this.compileAndRun(r,[t],null,i)}abs(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.abs(t);if(V().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,bB,t.dtype);const e=new wB(t.shape,bB);return this.compileAndRun(e,[t])}complexAbs(t){const e=this.texData.get(t.dataId),n=new tE(t.shape),r=[this.makeComplexComponentTensorInfo(t,e.complexTensors.real),this.makeComplexComponentTensorInfo(t,e.complexTensors.imag)];return this.compileAndRun(n,r)}sigmoid(t){const e=new wB(t.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(e,[t])}softplus(t){const e=new wB(t.shape,"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n");return this.compileAndRun(e,[t])}sin(t){const e=new wB(t.shape,"if (isnan(x)) return x;\n  return sin(x);\n");return this.compileAndRun(e,[t])}cos(t){const e=new wB(t.shape,"if (isnan(x)) return x;\n  return cos(x);\n");return this.compileAndRun(e,[t])}tan(t){const e=new wB(t.shape,"return tan(x);");return this.compileAndRun(e,[t])}asin(t){const e=new wB(t.shape,"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n");return this.compileAndRun(e,[t])}acos(t){const e=new wB(t.shape,"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n");return this.compileAndRun(e,[t])}atan(t){const e=new wB(t.shape,"if (isnan(x)) return x;\n  return atan(x);\n");return this.compileAndRun(e,[t])}atan2(t,e){const n=V().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new YS("\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",t.shape,e.shape):new GS("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",t.shape,e.shape);return this.compileAndRun(n,[t,e])}sinh(t){const e=new wB(t.shape,"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n");return this.compileAndRun(e,[t])}cosh(t){const e=new wB(t.shape,"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n");return this.compileAndRun(e,[t])}tanh(t){const e=new wB(t.shape,"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n");return this.compileAndRun(e,[t])}asinh(t){const e=new wB(t.shape,"if (isnan(x)) return x;return log(x + sqrt(x * x + 1.0));");return this.compileAndRun(e,[t])}acosh(t){const e=new wB(t.shape,"if (isnan(x)) return x;\n  if (x < 1.0) return NAN;\n  return log(x + sqrt(x * x - 1.0));");return this.compileAndRun(e,[t])}atanh(t){const e=new wB(t.shape,"if (isnan(x)) return x;\n  if ((x < -1.0) || (x > 1.0)) return NAN;\n  return (log(1.0 + x) - log(1.0 - x)) / 2.0;");return this.compileAndRun(e,[t])}erf(t){const e=new wB(t.shape,NB);return this.compileAndRun(e,[t])}step(t,e){const n=new wB(t.shape,function(t=0){return`if (isnan(x)) return x;\n    return x > 0.0 ? 1.0 : float(${t});\n  `}(e));return this.compileAndRun(n,[t])}conv2dByMatMul(t,e,n,i,s,o){const a=t.shape,l=this.texData.get(t.dataId),u="channelsLast"===n.dataFormat,c=a[2]%2!=0&&!!l.isPacked;if((1==a[0]*a[1]*a[2]||1===n.outChannels)&&n.inChannels>1e3||!V().getBool("WEBGL_LAZILY_UNPACK")||!V().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!c){const r=this.reshape(t,[1,u?a[0]*a[1]*a[2]:a[0]*a[2]*a[3],n.inChannels]),l=this.reshape(e,[1,n.inChannels,n.outChannels]);return this.reshape(this.fusedBatchMatMul({a:r,b:l,transposeA:!1,transposeB:!1,bias:i,activation:s,preluActivationWeights:o}),n.outShape)}const h={dataId:t.dataId,shape:[1,u?a[0]*a[1]*(a[2]+1):a[0]*a[2]*(a[3]+1),n.inChannels],dtype:t.dtype},d=l.shape;l.shape=l.shape.slice(),l.shape[l.shape.length-2]++,r.assert(pS(l.shape,h.shape),()=>`packed reshape ${l.shape} to ${h.shape} isn't free`);const p=this.reshape(e,[1,n.inChannels,n.outChannels]),f=this.fusedBatchMatMul({a:h,b:p,transposeA:!1,transposeB:!1,bias:i,activation:s,preluActivationWeights:o}),A=this.texData.get(f.dataId);return r.assert(A.isPacked,()=>"batchMatMul result is expected to be packed"),l.shape=d,A.shape=n.outShape,ju().makeTensorFromDataId(f.dataId,n.outShape,f.dtype)}conv2dWithIm2Row(t,e,n,r,i,s){const{filterWidth:o,filterHeight:a,inChannels:l,outWidth:u,outHeight:c,dataFormat:h}=n,d="channelsLast"===h,p=o*a*l,f=c*u,A=[p,f],m=t.squeeze([0]),g=e.reshape([1,p,-1]),y=new UE(A,m.shape,n),w=this.compileAndRun(y,[m]).reshape([1,A[0],A[1]]),b=null!=r,v=null!=s,x=i?HB(i,!0):null,_=new VE(w.shape,[1,f,n.outChannels],!0,!1,b,x,v),C=[w,g];return r&&C.push(r),v&&C.push(s),this.compileAndRun(_,C).reshape(d?[1,c,u,n.outChannels]:[1,n.outChannels,c,u])}fusedConv2d({input:t,filter:e,convInfo:n,bias:r,activation:i,preluActivationWeights:s}){if(1===n.filterHeight&&1===n.filterWidth&&1===n.dilationHeight&&1===n.dilationWidth&&1===n.strideHeight&&1===n.strideWidth&&("SAME"===n.padInfo.type||"VALID"===n.padInfo.type))return this.conv2dByMatMul(t,e,n,r,i,s);if(V().getBool("WEBGL_CONV_IM2COL")&&1===t.shape[0])return this.conv2dWithIm2Row(t,e,n,r,i,s);const o=null!=r,a=null!=s,l=i?HB(i,!1):null,u=new cE(n,o,l,a),c=[t,e];return r&&c.push(r),s&&c.push(s),this.compileAndRun(u,c)}conv2d(t,e,n){if(1===n.filterHeight&&1===n.filterWidth&&1===n.dilationHeight&&1===n.dilationWidth&&1===n.strideHeight&&1===n.strideWidth&&("SAME"===n.padInfo.type||"VALID"===n.padInfo.type))return this.conv2dByMatMul(t,e,n);if(V().getBool("WEBGL_CONV_IM2COL")&&1===t.shape[0])return this.conv2dWithIm2Row(t,e,n);const r=new cE(n);return this.compileAndRun(r,[t,e])}conv2dDerInput(t,e,n){const r=new sE(n);return this.compileAndRun(r,[t,e])}conv2dDerFilter(t,e,n){const r=new iE(n);return this.compileAndRun(r,[t,e])}fusedDepthwiseConv2D({input:t,filter:e,convInfo:n,bias:r,activation:i,preluActivationWeights:s}){const o=V().getBool("WEBGL_PACK_DEPTHWISECONV")&&n.strideWidth<=2&&n.outChannels/n.inChannels==1,a=i?HB(i,o):null,l=[t,e],u=null!=r,c=null!=s;let h;return u&&l.push(r),c&&l.push(s),o?(h=new pE(n,u,a,c),this.compileAndRun(h,l)):(h=new dE(n,u,a,c),this.compileAndRun(h,l))}depthwiseConv2D(t,e,n){let r;return V().getBool("WEBGL_PACK_DEPTHWISECONV")&&n.strideWidth<=2&&n.outChannels/n.inChannels==1?(r=new pE(n),this.compileAndRun(r,[t,e])):(r=new dE(n),this.compileAndRun(r,[t,e]))}depthwiseConv2DDerInput(t,e,n){const r=new uE(n);return this.compileAndRun(r,[t,e])}depthwiseConv2DDerFilter(t,e,n){const r=new lE(n);return this.compileAndRun(r,[t,e])}conv3d(t,e,n){const r=new hE(n);return this.compileAndRun(r,[t,e])}conv3dDerInput(t,e,n){const r=new aE(n);return this.compileAndRun(r,[t,e])}conv3dDerFilter(t,e,n){const r=new oE(n);return this.compileAndRun(r,[t,e])}maxPool(t,e){const n=new XE(e,"max",!1);return this.compileAndRun(n,[t])}avgPool(t,e){const n=new XE(e,"avg",!1);return this.compileAndRun(n,[t],"float32")}maxPoolBackprop(t,e,n,r){const i=new XE(r,"max",!0),s=this.compileAndRun(i,[e]),o=new HE(r),a=this.compileAndRun(o,[t,s],e.dtype);return s.dispose(),a}avgPoolBackprop(t,e,n){const r=new zS(n);return this.compileAndRun(r,[t],e.dtype)}cast(t,e){return g.castTensor(t,e,this)}unstack(t,e){const n=t.shape[e],r=new Array(t.rank-1);let i=0;for(let l=0;l<t.rank;l++)l!==e&&(r[i++]=t.shape[l]);const s=new Array(t.rank).fill(0),o=t.shape.slice();o[e]=1;const a=new Array(n);for(let l=0;l<a.length;l++)s[e]=l,a[l]=this.slice(t,s,o).reshape(r);return a}avgPool3d(t,e){const n=new YE(e,"avg",!1);return this.compileAndRun(n,[t],"float32")}avgPool3dBackprop(t,e,n){const r=new QS(n);return this.compileAndRun(r,[t],e.dtype)}maxPool3d(t,e){const n=new YE(e,"max",!1);return this.compileAndRun(n,[t],"float32")}maxPool3dBackprop(t,e,n,r){const i=new YE(r,"max",!0),s=this.compileAndRun(i,[e]),o=new $E(r),a=this.compileAndRun(o,[t,s],e.dtype);return s.dispose(),a}reshape(t,e){const n=this.texData.get(t.dataId);if(n.isPacked&&!pS(t.shape,e)&&(null===n.texture||!pS(n.shape,e))){const n=this.packedReshape(t,e);return ju().makeTensorFromDataId(n.dataId,n.shape,n.dtype)}return g.reshapeTensor(t,e)}resizeBilinear(t,e,n,r){const i=V().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new nB(t.shape,e,n,r):new eB(t.shape,e,n,r);return this.compileAndRun(i,[t],"float32")}resizeBilinearBackprop(t,e,n){const r=new tB(t,e,n);return this.compileAndRun(r,[t])}resizeNearestNeighbor(t,e,n,r){const i=new iB(t.shape,e,n,r);return this.compileAndRun(i,[t])}resizeNearestNeighborBackprop(t,e,n){const r=new rB(t,e,n);return this.compileAndRun(r,[t])}multinomial(t,e,n,r){const i=e?t:yd(t),s=new qE(i.shape[0],i.shape[1],n),o=s.getCustomSetupFunc(r);return this.compileAndRun(s,[i],"int32",o)}oneHot(t,e,n,r){const i=new jE(t.size,e,n,r);return this.compileAndRun(i,[t])}diag(t){const e=new vE(t.size);return this.compileAndRun(e,[t])}cropAndResize(t,e,n,r,i,s){const o=new fE(t.shape,e.shape,r,i,s);return this.compileAndRun(o,[t,e,n],"float32")}depthToSpace(t,e,n){r.assert(e>1,()=>"blockSize should be > 1 for depthToSpace, but was: "+e);const i=t.shape[0],s=("NHWC"===n?t.shape[1]:t.shape[2])*e,o=("NHWC"===n?t.shape[2]:t.shape[3])*e,a=("NHWC"===n?t.shape[3]:t.shape[1])/(e*e),l=new bE("NHWC"===n?[i,s,o,a]:[i,a,s,o],e,n);return this.compileAndRun(l,[t])}split(t,e,n){return MB(t,e,n)}scatterND(t,e,n){const{sliceRank:r,numUpdates:i,sliceSize:s,strides:o,outputSize:a}=g.calculateShapes(e,t,n),l=[a/s,s],u=t.reshape([i,r]),c=e.reshape([i,s]);if(0===a)return g.reshapeTensor($a([]),n);const h=ki(0),d=new aB(i,r,u.rank,c.rank,o,l);return this.compileAndRun(d,[c,u,h]).reshape(n)}sparseToDense(t,e,n,r){const{sliceRank:i,numUpdates:s,strides:o,outputSize:a}=g.calculateShapes(e,t,n),l=new aB(s,i,t.rank,e.rank,o,[a,1],!1);return this.compileAndRun(l,[e,t,r]).reshape(n)}fft(t){return this.fftImpl(t,!1)}ifft(t){return this.fftImpl(t,!0)}fftImpl(t,e){const n=this.texData.get(t.dataId),r=new EE("return real * expR - imag * expI;",t.shape,e),i=new EE("return real * expI + imag * expR;",t.shape,e),s=[this.makeComplexComponentTensorInfo(t,n.complexTensors.real),this.makeComplexComponentTensorInfo(t,n.complexTensors.imag)],o=this.compileAndRun(r,s),a=this.compileAndRun(i,s),l=this.complex(o,a).as2D(t.shape[0],t.shape[1]);return o.dispose(),a.dispose(),l}gatherND(t,e){const n=e.shape,r=n[n.length-1],[i,s,o,a]=g.prepareAndValidate(t,e),l=e.reshape([s,r]),u=t.reshape([t.size/o,o]),c=new NE(r,a,[s,o]);return this.compileAndRun(c,[u,l]).reshape(i)}fill(t,e,n){if("string"===(n=n||r.inferDtype(e))){const i=r.getArrayFromDType(n,r.sizeFromShape(t));return i.fill(e),ju().makeTensor(i,t,n,this)}{const r=new BE(t,e),i=r.getCustomSetupFunc(e);return this.compileAndRun(r,[],n,i)}}onesLike(t){if("string"===t.dtype)throw new Error("onesLike is not supported under string dtype");return this.fill(t.shape,1,t.dtype)}zerosLike(t){return this.fill(t.shape,"string"===t.dtype?"":0,t.dtype)}linspace(t,e,n){return g.linspaceImpl(t,e,n)}makeTensorInfo(t,e){const n=this.write(null,t,e);return this.texData.get(n).usage=null,{dataId:n,shape:t,dtype:e}}makeOutput(t,e){const{dataId:n}=this.makeTensorInfo(t,e);return ju().makeTensorFromDataId(n,t,e,this)}unpackTensor(t){const e=new DB(t.shape);return this.runWebGLProgram(e,[t],t.dtype)}packTensor(t){const e=new KE(t.shape);return this.runWebGLProgram(e,[t],t.dtype,null,!0)}packedReshape(t,e){const n=[uS(t.shape),...cS(t.shape)],r={dtype:t.dtype,shape:n,dataId:t.dataId},i=[uS(e),...cS(e)],s=new ZE(i,n),o=this.runWebGLProgram(s,[r],t.dtype,null,!0);return{dataId:o.dataId,shape:e,dtype:o.dtype}}decode(t){const e=this.texData.get(t),{isPacked:n,shape:r,dtype:i}=e,s=hS(r);let o;return o=n?new wE(s):new yE(s),{dtype:i,shape:r,dataId:this.runWebGLProgram(o,[{shape:s,dtype:i,dataId:t}],i,null,!0).dataId}}runWebGLProgram(t,e,n,i,s=!1){const o=this.makeTensorInfo(t.outputShape,n),a=this.texData.get(o.dataId);if(t.packedOutput&&(a.isPacked=!0),t.outPackingScheme===jC.DENSE){const e=XC(t.outputShape);a.texShape=e.map(t=>2*t)}if(null!=t.outTexUsage&&(a.usage=t.outTexUsage),0===r.sizeFromShape(o.shape))return a.values=r.getTypedArrayFromDType(o.dtype,0),o;const l=[],u=e.map(e=>{if("complex64"===e.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let n=this.texData.get(e.dataId);if(null==n.texture){if(!t.packedInputs&&r.sizeFromShape(e.shape)<=V().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:e.shape,texData:null,isUniform:!0,uniformValues:n.values};t.packedInputs&&(n.isPacked=!0,n.shape=e.shape)}else if(!!n.isPacked!=!!t.packedInputs)e=n.isPacked?this.unpackTensor(e):this.packTensor(e),l.push(e),n=this.texData.get(e.dataId);else if(n.isPacked&&!pS(n.shape,e.shape)){const t=e,r=e.shape;e.shape=n.shape,e=this.packedReshape(e,r),l.push(e),n=this.texData.get(e.dataId),t.shape=r}return this.uploadToGPU(e.dataId),{shape:e.shape,texData:n,isUniform:!1}});this.uploadToGPU(o.dataId);const c={shape:o.shape,texData:a,isUniform:!1},h=function(t,e,n){let r="";e.concat(n).forEach(t=>{r+=`${t.shape}_${t.isUniform?"uniform":t.texData.texShape}_${null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0}`});let i=t.constructor.name;return i+="_"+r+"_"+t.userCode,i}(t,u,c),d=this.getAndSaveBinary(h,()=>function(t,e,n,i){const s=e.userCode,o=n.map((t,n)=>{const r={logicalShape:t.shape,texShape:t.isUniform?null:t.texData.texShape,isUniform:t.isUniform,isPacked:!t.isUniform&&t.texData.isPacked,flatOffset:null};return null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0&&(r.flatOffset=t.texData.slice.flatOffset),{name:e.variableNames[n],shapeInfo:r}}),a=o.map(t=>t.shapeInfo),l={logicalShape:i.shape,texShape:i.texData.texShape,isUniform:!1,isPacked:i.texData.isPacked,flatOffset:null},u=function(t,e,n,i){const s=[];t.forEach(t=>{const e=r.sizeFromShape(t.shapeInfo.logicalShape);t.shapeInfo.isUniform?s.push(`uniform float ${t.name}${e>1?`[${e}]`:""};`):(s.push(`uniform sampler2D ${t.name};`),s.push(`uniform int offset${t.name};`))});const o=s.join("\n"),a=t.map(t=>function(t,e,n=!1){let i="";return i+=n?function t(e){switch(e.shapeInfo.logicalShape.length){case 0:return function(t){const e=t.name;return`\n    vec4 ${"get"+e.charAt(0).toUpperCase()+e.slice(1)}() {\n      return ${SS().texture2D}(${e}, halfCR);\n    }\n  `}(e);case 1:return function(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=t.shapeInfo.texShape,i=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],s=SS();return`\n    vec4 ${n}(int index) {\n      vec2 uv = packedUVfrom1D(\n        ${i[0]}, ${i[1]}, index);\n      return ${s.texture2D}(${e}, uv);\n    }\n  `}(e);case 2:return function(t){const e=t.shapeInfo.logicalShape,n=t.name,i="get"+n.charAt(0).toUpperCase()+n.slice(1),s=t.shapeInfo.texShape,o=s[0],a=s[1],l=SS();if(null!=s&&r.arraysEqual(e,s))return`\n      vec4 ${i}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${a}.0, ${o}.0);\n\n        return ${l.texture2D}(${n}, uv);\n      }\n    `;const u=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];return`\n    vec4 ${i}(int row, int col) {\n      vec2 uv = packedUVfrom2D(${Math.ceil(e[1]/2)}, ${u[0]}, ${u[1]}, row, col);\n      return ${l.texture2D}(${n}, uv);\n    }\n  `}(e);case 3:return function(e){const n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=e.shapeInfo.texShape,o=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];if(1===n[0]){const r=[1,2],s=MS(e,n.slice(1)),o=["b","row","col"];return`\n        ${t(s)}\n        vec4 ${i}(int b, int row, int col) {\n          return ${i}(${US(o,r)});\n        }\n      `}const a=o[0],l=o[1],u=Math.ceil(n[2]/2);return`\n    vec4 ${i}(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ${a}, ${l}, ${u*Math.ceil(n[1]/2)}, ${u}, b, row, col);\n      return ${SS().texture2D}(${r}, uv);\n    }\n  `}(e);default:return function(t){const e=t.shapeInfo.logicalShape,n=e.length,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=t.shapeInfo.texShape,o=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],a=o[0],l=o[1],u=Math.ceil(e[n-1]/2);let c=u*Math.ceil(e[n-2]/2),h="int b, int row, int col",d=`b * ${c} + (row / 2) * ${u} + (col / 2)`;for(let p=2;p<n-1;p++)h=`int b${p}, `+h,c*=e[n-p-1],d=`b${p} * ${c} + `+d;return`\n    vec4 ${i}(${h}) {\n      int index = ${d};\n      int texR = index / ${l};\n      int texC = index - texR * ${l};\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${l}, ${a});\n      return ${SS().texture2D}(${r}, uv);\n    }\n  `}(e)}}(t):function t(e){const n=e.shapeInfo.logicalShape;switch(n.length){case 0:return function(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1);if(t.shapeInfo.isUniform)return`float ${n}() {return ${e};}`;const[r,i]=t.shapeInfo.texShape;if(1===r&&1===i)return`\n      float ${n}() {\n        return sampleTexture(${e}, halfCR);\n      }\n    `;const[s,o]=t.shapeInfo.texShape;return`\n    float ${n}() {\n      vec2 uv = uvFromFlat(${s}, ${o}, ${OS(e)});\n      return sampleTexture(${e}, uv);\n    }\n  `}(e);case 1:return function(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1);if(t.shapeInfo.isUniform)return`\n      float ${n}(int index) {\n        ${DS(t)}\n      }\n    `;const r=t.shapeInfo.texShape,i=r[0],s=r[1];if(1===s&&1===i)return`\n      float ${n}(int index) {\n        return sampleTexture(${e}, halfCR);\n      }\n    `;const o=OS(e);return 1===s?`\n      float ${n}(int index) {\n        vec2 uv = vec2(0.5, (float(index + ${o}) + 0.5) / ${i}.0);\n        return sampleTexture(${e}, uv);\n      }\n    `:1===i?`\n      float ${n}(int index) {\n        vec2 uv = vec2((float(index + ${o}) + 0.5) / ${s}.0, 0.5);\n        return sampleTexture(${e}, uv);\n      }\n    `:`\n    float ${n}(int index) {\n      vec2 uv = uvFromFlat(${i}, ${s}, index + ${o});\n      return sampleTexture(${e}, uv);\n    }\n  `}(e);case 2:return function(e){const n=e.shapeInfo.logicalShape,i=e.name,s="get"+i.charAt(0).toUpperCase()+i.slice(1),o=e.shapeInfo.texShape;if(null!=o&&r.arraysEqual(n,o))return`\n    float ${s}(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(${o[1]}.0, ${o[0]}.0);\n      return sampleTexture(${i}, uv);\n    }\n  `;const{newShape:a,keptDims:l}=r.squeezeShape(n);if(a.length<n.length){const n=MS(e,a),r=["row","col"];return`\n      ${t(n)}\n      float ${s}(int row, int col) {\n        return ${s}(${US(r,l)});\n      }\n    `}if(e.shapeInfo.isUniform)return`\n      float ${s}(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));\n        ${DS(e)}\n      }\n    `;const u=o[0],c=o[1],h=OS(i);return 1===c?`\n    float ${s}(int row, int col) {\n      float index = dot(vec3(row, col, ${h}), vec3(${n[1]}, 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ${u}.0);\n      return sampleTexture(${i}, uv);\n    }\n  `:1===u?`\n    float ${s}(int row, int col) {\n      float index = dot(vec3(row, col, ${h}), vec3(${n[1]}, 1, 1));\n      vec2 uv = vec2((index + 0.5) / ${c}.0, 0.5);\n      return sampleTexture(${i}, uv);\n    }\n  `:`\n  float ${s}(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ${n[1]} + col + ${h};\n    vec2 uv = uvFromFlat(${u}, ${c}, index);\n    return sampleTexture(${i}, uv);\n  }\n`}(e);case 3:return function(e){const n=e.shapeInfo.logicalShape,i=e.name,s="get"+i.charAt(0).toUpperCase()+i.slice(1),o=n[1]*n[2],a=n[2],{newShape:l,keptDims:u}=r.squeezeShape(n);if(l.length<n.length){const n=MS(e,l),r=["row","col","depth"];return`\n        ${t(n)}\n        float ${s}(int row, int col, int depth) {\n          return ${s}(${US(r,u)});\n        }\n      `}if(e.shapeInfo.isUniform)return`\n      float ${s}(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(${o}, ${a}, 1)));\n        ${DS(e)}\n      }\n    `;const c=e.shapeInfo.texShape,h=c[0],d=c[1],p=e.shapeInfo.flatOffset;return d===o&&null==p?`\n        float ${s}(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(${a}, 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(${d}.0, ${h}.0);\n          return sampleTexture(${i}, uv);\n        }\n      `:d===a&&null==p?`\n    float ${s}(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${d}.0, ${h}.0);\n      return sampleTexture(${i}, uv);\n    }\n  `:`\n      float ${s}(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ${o} + col * ${a} + depth + ${OS(i)};\n        vec2 uv = uvFromFlat(${h}, ${d}, index);\n        return sampleTexture(${i}, uv);\n      }\n  `}(e);case 4:return function(e){const n=e.shapeInfo.logicalShape,i=e.name,s="get"+i.charAt(0).toUpperCase()+i.slice(1),o=n[3],a=n[2]*o,l=n[1]*a,{newShape:u,keptDims:c}=r.squeezeShape(n);if(u.length<n.length){const n=MS(e,u),r=["row","col","depth","depth2"];return`\n      ${t(n)}\n      float ${s}(int row, int col, int depth, int depth2) {\n        return ${s}(${US(r,c)});\n      }\n    `}if(e.shapeInfo.isUniform)return`\n      float ${s}(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(${l}, ${a}, ${o}, 1)));\n        ${DS(e)}\n      }\n    `;const h=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,p=d[0],f=d[1];return f===l&&null==h?`\n      float ${s}(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(${a}, ${o}, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${f}.0, ${p}.0);\n        return sampleTexture(${i}, uv);\n      }\n    `:f===o&&null==h?`\n      float ${s}(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(${n[1]*n[2]}, ${n[2]}, 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${f}.0, ${p}.0);\n        return sampleTexture(${i}, uv);\n      }\n    `:`\n    float ${s}(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${l} + col * ${a} +\n          depth * ${o} + depth2;\n      vec2 uv = uvFromFlat(${p}, ${f}, index + ${OS(i)});\n      return sampleTexture(${i}, uv);\n    }\n  `}(e);case 5:return function(e){const n=e.shapeInfo.logicalShape,i=e.name,s="get"+i.charAt(0).toUpperCase()+i.slice(1),o=n[4],a=n[3]*o,l=n[2]*a,u=n[1]*l,{newShape:c,keptDims:h}=r.squeezeShape(n);if(c.length<n.length){const n=MS(e,c),r=["row","col","depth","depth2","depth3"];return`\n      ${t(n)}\n      float ${s}(int row, int col, int depth, int depth2, int depth3) {\n        return ${s}(${US(r,h)});\n      }\n    `}if(e.shapeInfo.isUniform)return`\n      float ${s}(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(${u}, ${l}, ${a}, ${o})) +\n          depth3;\n        ${DS(e)}\n      }\n    `;const d=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,f=p[0],A=p[1];return A===u&&null==d?`\n      float ${s}(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(${l}, ${a}, ${o}, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${A}.0, ${f}.0);\n        return sampleTexture(${i}, uv);\n      }\n    `:A===o&&null==d?`\n      float ${s}(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(${n[1]*n[2]*n[3]},\n               ${n[2]*n[3]}, ${n[3]}, 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${A}.0, ${f}.0);\n        return sampleTexture(${i}, uv);\n      }\n    `:`\n    float ${s}(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${u} + col * ${l} + depth * ${a} +\n          depth2 * ${o} + depth3 + ${OS(i)};\n      vec2 uv = uvFromFlat(${f}, ${A}, index);\n      return sampleTexture(${i}, uv);\n    }\n  `}(e);case 6:return function(e){const n=e.shapeInfo.logicalShape,i=e.name,s="get"+i.charAt(0).toUpperCase()+i.slice(1),{newShape:o,keptDims:a}=r.squeezeShape(n);if(o.length<n.length){const n=MS(e,o),r=["row","col","depth","depth2","depth3","depth4"];return`\n      ${t(n)}\n      float ${s}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ${s}(${US(r,a)});\n      }\n    `}const l=n[5],u=n[4]*l,c=n[3]*u,h=n[2]*c,d=n[1]*h;if(e.shapeInfo.isUniform)return`\n      float ${s}(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(${d}, ${h}, ${c}, ${u})) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(${l}, 1)));\n        ${DS(e)}\n      }\n    `;const p=e.shapeInfo.flatOffset,f=e.shapeInfo.texShape,A=f[0],m=f[1];return m===d&&null==p?`\n      float ${s}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(${h}, ${c}, ${u}, ${l})) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${m}.0, ${A}.0);\n        return sampleTexture(${i}, uv);\n      }\n    `:m===l&&null==p?`\n      float ${s}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(${n[1]*n[2]*n[3]*n[4]},\n               ${n[2]*n[3]*n[4]},\n               ${n[3]*n[4]},\n               ${n[4]})) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${m}.0, ${A}.0);\n        return sampleTexture(${i}, uv);\n      }\n    `:`\n    float ${s}(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${d} + col * ${h} + depth * ${c} +\n          depth2 * ${u} + depth3 * ${l} + depth4 + ${OS(i)};\n      vec2 uv = uvFromFlat(${A}, ${m}, index);\n      return sampleTexture(${i}, uv);\n    }\n  `}(e);default:throw new Error(n.length+"-D input sampling is not yet supported")}}(t),t.shapeInfo.logicalShape.length<=e.logicalShape.length&&(i+=n?function(t,e){const n=t.name,i=n.charAt(0).toUpperCase()+n.slice(1),s="get"+i+"AtOutCoords",o=t.shapeInfo.logicalShape.length,a=e.logicalShape.length,l=NS(t.shapeInfo.logicalShape,e.logicalShape),u=LS(a),c=a-o;let h;const d=["x","y","z","w","u","v"];h=0===o?"":a<2&&l.length>=1?"coords = 0;":l.map(t=>`coords.${d[t+c]} = 0;`).join("\n");let p="";p=a<2&&o>0?"coords":t.shapeInfo.logicalShape.map((t,e)=>"coords."+d[e+c]).join(", ");let f="return outputValue;";const A=1===r.sizeFromShape(t.shapeInfo.logicalShape),m=1===r.sizeFromShape(e.logicalShape);if(1!==o||A||m){if(A&&!m)f=1===a?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(l.length){const t=o-2,e=o-1;l.indexOf(t)>-1&&l.indexOf(e)>-1?f="return vec4(outputValue.x);":l.indexOf(t)>-1?f="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":l.indexOf(e)>-1&&(f="return vec4(outputValue.xx, outputValue.zz);")}}else f="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return`\n    vec4 ${s}() {\n      ${u} coords = getOutputCoords();\n      ${h}\n      vec4 outputValue = get${i}(${p});\n      ${f}\n    }\n  `}(t,e):function(t,e){const n=t.name,i=n.charAt(0).toUpperCase()+n.slice(1),s="get"+i+"AtOutCoords",o=t.shapeInfo.logicalShape.length,a=e.logicalShape.length;if(!t.shapeInfo.isUniform&&o===a&&null==t.shapeInfo.flatOffset&&r.arraysEqual(t.shapeInfo.texShape,e.texShape))return`\n      float ${s}() {\n        return sampleTexture(${n}, resultUV);\n      }\n    `;const l=LS(a),u=NS(t.shapeInfo.logicalShape,e.logicalShape),c=a-o;let h;const d=["x","y","z","w","u","v"];h=0===o?"":a<2&&u.length>=1?"coords = 0;":u.map(t=>`coords.${d[t+c]} = 0;`).join("\n");let p="";return p=a<2&&o>0?"coords":t.shapeInfo.logicalShape.map((t,e)=>"coords."+d[e+c]).join(", "),`\n    float ${s}() {\n      ${l} coords = getOutputCoords();\n      ${h}\n      return get${i}(${p});\n    }\n  `}(t,e)),i}(t,e,i)).join("\n"),l=e.texShape,u=SS(),c=function(t){return`\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ${t.texture2D}(textureSampler, uv).r;\n    }\n  `}(u);let h,d,p=function(t){return`${t.version}\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ${t.varyingFs} vec2 resultUV;\n    ${t.defineOutput}\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ${t.defineSpecialNaN}\n    ${t.defineSpecialInf}\n    ${t.defineRound}\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ${IS}\n    ${FS}\n    ${TS}\n  `}(u);return e.isPacked?(h=function(t,e){switch(t.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(t,e){const n=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return 1===n[0]?`\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ${n[1]}.0);\n      }\n    `:1===n[1]?`\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ${n[0]}.0);\n      }\n    `:`\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${n[0]}, ${n[1]}));\n      return 2 * (resTexRC.x * ${n[1]} + resTexRC.y);\n    }\n  `}(0,e);case 2:return function(t,e){const n=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(r.arraysEqual(t,e))return`\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(${n[0]}, ${n[1]}));\n      }\n    `;const i=Math.ceil(t[1]/2);return`\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${n[0]}, ${n[1]}));\n\n      int index = resTexRC.x * ${n[1]} + resTexRC.y;\n      int r = 2 * (index / ${i});\n      int c = imod(index, ${i}) * 2;\n\n      return ivec2(r, c);\n    }\n  `}(t,e);case 3:return function(t,e){const n=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],r=Math.ceil(t[2]/2),i=r*Math.ceil(t[1]/2);return`\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${n[0]}, ${n[1]}));\n      int index = resTexRC.x * ${n[1]} + resTexRC.y;\n\n      int b = index / ${i};\n      index -= b * ${i};\n\n      int r = 2 * (index / ${r});\n      int c = imod(index, ${r}) * 2;\n\n      return ivec3(b, r, c);\n    }\n  `}(t,e);default:return function(t,e){const n=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],r=Math.ceil(t[t.length-1]/2),i=r*Math.ceil(t[t.length-2]/2);let s=i,o="",a="b, r, c";for(let l=2;l<t.length-1;l++)s*=t[t.length-l-1],o=`\n      int b${l} = index / ${s};\n      index -= b${l} * ${s};\n    `+o,a=`b${l}, `+a;return`\n    ivec${t.length} getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${n[0]}, ${n[1]}));\n      int index = resTexRC.x * ${n[1]} + resTexRC.y;\n\n      ${o}\n\n      int b = index / ${i};\n      index -= b * ${i};\n\n      int r = 2 * (index / ${r});\n      int c = imod(index, ${r}) * 2;\n\n      return ivec${t.length}(${a});\n    }\n  `}(t,e)}}(e.logicalShape,l),d=function(t){return`\n    void setOutput(vec4 val) {\n      ${t.output} = val;\n    }\n  `}(u)):(h=function(t,e){switch(t.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return 1===(n=e)[0]?`\n      int getOutputCoords() {\n        return int(resultUV.x * ${n[1]}.0);\n      }\n    `:1===n[1]?`\n      int getOutputCoords() {\n        return int(resultUV.y * ${n[0]}.0);\n      }\n    `:`\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${n[0]}, ${n[1]}));\n      return resTexRC.x * ${n[1]} + resTexRC.y;\n    }\n  `;case 2:return function(t,e){return r.arraysEqual(t,e)?`\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(${e[0]}, ${e[1]}));\n      }\n    `:1===t[1]?`\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(${e[0]}, ${e[1]}));\n        int index = resTexRC.x * ${e[1]} + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    `:1===t[0]?`\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(${e[0]}, ${e[1]}));\n        int index = resTexRC.x * ${e[1]} + resTexRC.y;\n        return ivec2(0, index);\n      }\n    `:`\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${e[0]}, ${e[1]}));\n      int index = resTexRC.x * ${e[1]} + resTexRC.y;\n      int r = index / ${t[1]};\n      int c = index - r * ${t[1]};\n      return ivec2(r, c);\n    }\n  `}(t,e);case 3:return function(t,e){const n=ES(["r","c","d"],t);return`\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${e[0]}, ${e[1]}));\n      int index = resTexRC.x * ${e[1]} + resTexRC.y;\n      ${n}\n      return ivec3(r, c, d);\n    }\n  `}(t,e);case 4:return function(t,e){const n=ES(["r","c","d","d2"],t);return`\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(${e[0]}, ${e[1]}));\n      int index = resTexRC.x * ${e[1]} + resTexRC.y;\n      ${n}\n      return ivec4(r, c, d, d2);\n    }\n  `}(t,e);case 5:return function(t,e){const n=ES(["r","c","d","d2","d3"],t);return`\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${e[0]},\n                             ${e[1]}));\n\n      int index = resTexRC.x * ${e[1]} + resTexRC.y;\n\n      ${n}\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  `}(t,e);case 6:return function(t,e){const n=ES(["r","c","d","d2","d3","d4"],t);return`\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(${e[0]}, ${e[1]}));\n      int index = resTexRC.x * ${e[1]} + resTexRC.y;\n\n      ${n}\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  `}(t,e);default:throw new Error(t.length+"-D output sampling is not yet supported")}var n}(e.logicalShape,l),d=function(t){return`\n    void setOutput(float val) {\n      ${t.output} = vec4(val, 0, 0, 0);\n    }\n  `}(u)),i&&(p+=RS),[p,c,d,o,h,a,n].join("\n")}(o,l,s,e.packedInputs),c=t.createProgram(u);let h=null;const d=t.getUniformLocation(c,"NAN",!1);1===V().getNumber("WEBGL_VERSION")&&(h=t.getUniformLocation(c,"INFINITY",!1));const p={};for(let r=0;r<e.variableNames.length;r++){const n=e.variableNames[r],i=!1;p[n]=t.getUniformLocation(c,n,i),p["offset"+n]=t.getUniformLocation(c,"offset"+n,i)}return{program:e,source:u,webGLProgram:c,uniformLocations:p,inShapeInfos:a,outShapeInfo:l,infLoc:h,nanLoc:d}}(this.gpgpu,t,u,c)),p=null!=this.activeTimers;let f;if(p&&(f=this.startTimer()),function(t,e,n,i,s){ME(e.inShapeInfos,n),ME([e.outShapeInfo],[i]);const o=i.texData.texture,a=i.texData.texShape;i.texData.isPacked?t.setOutputPackedMatrixTexture(o,a[0],a[1]):t.setOutputMatrixTexture(o,a[0],a[1]),t.setProgram(e.webGLProgram),1===V().getNumber("WEBGL_VERSION")&&null!==e.infLoc&&t.gl.uniform1f(e.infLoc,1/0),null!==e.nanLoc&&t.gl.uniform1f(e.nanLoc,NaN),n.forEach((n,i)=>{const s=e.program.variableNames[i],o=e.uniformLocations[s],a=e.uniformLocations["offset"+s];if(null!=o)if(n.isUniform)if(r.sizeFromShape(n.shape)<2)t.gl.uniform1f(o,n.uniformValues[0]);else{let e=n.uniformValues;e instanceof Float32Array||(e=new Float32Array(e)),t.gl.uniform1fv(o,e)}else null!=n.texData.slice&&null!=a&&t.gl.uniform1i(a,n.texData.slice.flatOffset),t.setInputMatrixTexture(n.texData.texture,o,i)}),null!=s&&s(t,e.webGLProgram),t.executeProgram()}(this.gpgpu,d,u,c,i),l.forEach(t=>this.disposeData(t.dataId)),p&&(f=this.endTimer(f),this.activeTimers.push({name:t.constructor.name,query:this.getQueryTime(f)})),!V().getBool("WEBGL_LAZILY_UNPACK")&&a.isPacked&&!1===s){const t=this.unpackTensor(o);return this.disposeData(o.dataId),t}return o}compileAndRun(t,e,n,r,i=!1){const s=this.runWebGLProgram(t,e,n=n||e[0].dtype,r,i);return ju().makeTensorFromDataId(s.dataId,s.shape,s.dtype)}getAndSaveBinary(t,e){return t in this.binaryCache||(this.binaryCache[t]=e()),this.binaryCache[t]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(V().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(t=>{this.gpgpu.deleteProgram(this.binaryCache[t].webGLProgram),delete this.binaryCache[t]}),this.textureManager.dispose(),null!=this.canvas&&"undefined"!=typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return null==this.floatPrecisionValue&&(this.floatPrecisionValue=Gu(()=>{if(!V().get("WEBGL_RENDER_FLOAT32_ENABLED")){const t=V().getBool("DEBUG");V().set("DEBUG",!1);const e=this.abs(ki(1e-8)).dataSync()[0];if(V().set("DEBUG",t),e>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}uploadToGPU(t){const e=this.texData.get(t),{shape:n,dtype:i,values:s,texture:o,usage:a,isPacked:l}=e;if(null!=o)return;const u=null!=this.activeTimers;let c;u&&(c=r.now());let h=e.texShape;if(null==h&&(h=function(t,e=!1){let n=V().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e&&(n*=2,1===(t=t.map((e,n)=>n>=t.length-2?r.nearestLargerEven(t[n]):t[n])).length&&(t=[2,t[0]])),2!==t.length){const e=r.squeezeShape(t);t=e.newShape}let i=r.sizeFromShape(t);if(t.length<=1&&i<=n)return[1,i];if(2===t.length&&t[0]<=n&&t[1]<=n)return t;if(3===t.length&&t[0]*t[1]<=n&&t[2]<=n)return[t[0]*t[1],t[2]];if(3===t.length&&t[0]<=n&&t[1]*t[2]<=n)return[t[0],t[1]*t[2]];if(4===t.length&&t[0]*t[1]*t[2]<=n&&t[3]<=n)return[t[0]*t[1]*t[2],t[3]];if(4===t.length&&t[0]<=n&&t[1]*t[2]*t[3]<=n)return[t[0],t[1]*t[2]*t[3]];if(e){const e=uS(t);let n=2,s=2;return t.length&&([n,s]=cS(t)),i=e*(n/2)*(s/2),r.sizeToSquarishShape(i).map(t=>2*t)}return r.sizeToSquarishShape(i)}(n,l),e.texShape=h),null!=s){const t=hS(n);let o,a=h[1],d=h[0];const p=s instanceof Uint8Array;l?([a,d]=YC(h[0],h[1]),o=new SE(t,[d,a],p)):o=new CE(t,[d,a],p);const f=this.makeTensorInfo([d,a],i);this.texData.get(f.dataId).usage=p?KC.PIXELS:KC.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(f.dataId),a,d,s);const A=this.runWebGLProgram(o,[f],i,null,!0),m=this.texData.get(A.dataId);e.texture=m.texture,e.texShape=m.texShape,e.isPacked=m.isPacked,e.usage=m.usage,this.disposeData(f.dataId),this.texData.delete(A.dataId),e.values=null,u&&(this.uploadWaitMs+=r.now()-c)}else{const t=this.acquireTexture(h,a,i,l);e.texture=t}}convertAndCacheOnCPU(t,e){const n=this.texData.get(t),{dtype:r}=n;return this.releaseGPUData(t),null!=e&&(n.values=function(t,e){if("float32"===e||"complex64"===e)return t;if("int32"===e||"bool"===e){const n="int32"===e?new Int32Array(t.length):new Uint8Array(t.length);for(let e=0;e<n.length;++e)n[e]=Math.round(t[e]);return n}throw new Error("Unknown dtype "+e)}(e,r)),n.values}acquireTexture(t,e,n,r){if(this.numBytesInGPU+=this.computeBytes(t,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){const t=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${t} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(t,e,r)}computeBytes(t,e){return t[0]*t[1]*r.bytesPerElement(e)}}const VB={kernelName:bn,backendName:"webgl",kernelFunc:({inputs:t,backend:e})=>{const{a:n,b:r}=t;return function(t,e,n){let r=new GS("\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",t.shape,e.shape);return V().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&(r=new YS("\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",t.shape,e.shape,!0)),n.runWebGLProgram(r,[t,e],"float32")}(n,r,e)}};class qB{constructor(t){this.variableNames=["A"];const e=SS(),[n,r]=t;this.outputShape=t,this.userCode=`\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}.0, ${n}.0);\n\n        vec4 values = ${e.texture2D}(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    `}}class jB{constructor(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const e=SS(),[n,r]=t;this.outputShape=t,this.userCode=`\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(${r}.0, ${n}.0);\n            vec4 values = ${e.texture2D}(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ${e.output} = result;\n      }\n    `}}const KB={kernelName:ci,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t;let{pixels:i}=e;const{numChannels:s}=r,o="undefined"!=typeof HTMLVideoElement&&i instanceof HTMLVideoElement,a="undefined"!=typeof HTMLImageElement&&i instanceof HTMLImageElement,[l,u]=o?[i.videoWidth,i.videoHeight]:[i.width,i.height],c=[u,l],h=[u,l,s];(a||o)&&(null==WB&&(WB=document.createElement("canvas").getContext("2d")),WB.canvas.width=l,WB.canvas.height=u,WB.drawImage(i,0,0,l,u),i=WB.canvas);const d=n.makeTensorInfo(c,"int32");n.texData.get(d.dataId).usage=KC.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(d.dataId),i);const p=V().getBool("WEBGL_PACK")?new jB(h):new qB(h),f=n.runWebGLProgram(p,[d],"int32");return n.disposeData(d.dataId),f}};let WB;const{maxImpl:GB,transposeImpl:XB}=H;function YB(t,e,n){const r=n.texData.get(t.dataId);return!r.isPacked||pS(t.shape,e)||null!==r.texture&&pS(r.shape,e)?{dataId:t.dataId,shape:e,dtype:t.dtype}:function(t,e,n){const r=[uS(t.shape),...cS(t.shape)],i={dtype:t.dtype,shape:r,dataId:t.dataId},s=[uS(e),...cS(e)],o=new ZE(s,r),a=n.runWebGLProgram(o,[i],t.dtype,null,!0);return{dataId:a.dataId,shape:e,dtype:a.dtype}}(t,e,n)}class JB{constructor(t,e){this.variableNames=["A"];const n=new Array(t.length);for(let s=0;s<n.length;s++)n[s]=t[e[s]];this.outputShape=n,this.rank=n.length;const r=LS(this.rank),i=function(t){const e=t.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e);for(let i=0;i<t.length;i++)r[t[i]]=n[i];return r.join()}(e);this.userCode=`\n    void main() {\n      ${r} resRC = getOutputCoords();\n      setOutput(getA(${i}));\n    }\n    `}}class ZB{constructor(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const n=new Array(t.length);for(let u=0;u<n.length;u++)n[u]=t[e[u]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const r=LS(this.rank),i=_S("rc",this.rank),s=new Array(this.rank);for(let u=0;u<e.length;u++)s[e[u]]=i[u];const o=`vec2(${s.slice(-2).join()})`,a=`++${i[this.rank-1]} < ${n[this.rank-1]}`,l=`getChannel(getA(${s.join()}), ${o})`;this.userCode=`\n    void main() {\n      ${r} rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ${l};\n      if(${a}) {\n        result[1] = ${l};\n      }\n      --${i[this.rank-1]};\n      if(++${i[this.rank-2]} < ${n[this.rank-2]}) {\n        result[2] = ${l};\n        if(${a}) {\n          result[3] = ${l};\n        }\n      }\n      setOutput(result);\n    }\n    `}}function tk(t,e,n){const r=V().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new ZB(t.shape,e):new JB(t.shape,e);return n.runWebGLProgram(r,[t],t.dtype)}const ek={kernelName:Zn,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:i}=t,{reductionIndices:s,keepDims:o}=e,a=n,l=i.shape.length,u=r.parseAxisParam(s,i.shape);let c=u;const h=g.getAxesPermutation(c,l),d=null!=h,p=a.shouldExecuteOnCPU([i]);let f=i;if(d){if(p){const t=a.texData.get(f.dataId).values,e=new Array(l);for(let r=0;r<e.length;r++)e[r]=i.shape[h[r]];const n=XB(t,i.shape,i.dtype,h,e);f=a.makeTensorInfo(e,i.dtype),a.texData.get(f.dataId).values=n}else f=tk(i,h,a);c=g.getInnerMostAxes(c.length,l)}g.assertAxesAreInnerMostDims("max",c,l);const[A,m]=g.computeOutAndReduceShapes(f.shape,c);let y,w=A;if(o&&(w=g.expandShapeToKeepDim(A,u)),p){const t=a.texData.get(f.dataId),e=GB(t.values,r.sizeFromShape(m),w,i.dtype);y=a.makeTensorInfo(w,i.dtype),a.texData.get(y.dataId).values=e}else y=function(t,e,n,i){const s=r.sizeFromShape(e),o=YB(t,[r.sizeFromShape(t.shape)/s,s],i),a=function t(e,n,r,i){const[s,o]=e.shape,a=g.computeOptimalWindowSize(o),l=new JE({windowSize:a,inSize:o,batchSize:s},r),u=i.runWebGLProgram(l,[e],n);return 1===u.shape[1]?u:t(u,n,r,i)}(o,t.dtype,"max",i);return o.dataId!==t.dataId&&i.disposeData(o.dataId),YB(a,n,i)}(f,m,w,a);return d&&a.disposeData(f.dataId),y}},nk={kernelName:sr,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:i}=t,{filterSize:s,strides:o,pad:a,includeBatchInIndex:l}=e,u=n;r.assert(4===i.shape.length,()=>`Error in maxPool: input must be rank 4 but got rank ${i.shape.length}.`);const c=[1,1];r.assert(g.eitherStridesOrDilationsAreOne(o,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const h=g.computePool2DInfo(i.shape,s,o,c,a),[d,p]=function(t,e,n,r){let i=new XE(n,"max",!1);const s=r.runWebGLProgram(i,[t],"float32");return i=new XE(n,"max",!0,!0,e),[s,r.runWebGLProgram(i,[t],"float32")]}(i,l,h,u);return[d,p]}},rk={kernelName:pr,backendName:"webgl",kernelFunc:({inputs:t,backend:e,attrs:n})=>{g.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{boxes:r,scores:i}=t,{maxOutputSize:s,iouThreshold:o,scoreThreshold:a}=n,l=e,u=l.readSync(r.dataId),c=l.readSync(i.dataId);return y.nonMaxSuppressionV3Impl(u,c,s,o,a)}},ik=y.nonMaxSuppressionV4Impl,sk={kernelName:fr,backendName:"webgl",kernelFunc:({inputs:t,backend:e,attrs:n})=>{g.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{boxes:r,scores:i}=t,{maxOutputSize:s,iouThreshold:o,scoreThreshold:a,padToMaxOutputSize:l}=n,u=e,c=u.readSync(r.dataId),h=u.readSync(i.dataId),{selectedIndices:d,validOutputs:p}=ik(c,h,s,o,a,l);return[d,p]}},ok=y.nonMaxSuppressionV5Impl,ak={kernelName:Ar,backendName:"webgl",kernelFunc:({inputs:t,backend:e,attrs:n})=>{g.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{boxes:r,scores:i}=t,{maxOutputSize:s,iouThreshold:o,scoreThreshold:a,softNmsSigma:l}=n,u=e,c=u.readSync(r.dataId),h=u.readSync(i.dataId),d=s,p=o,f=a,A=l,{selectedIndices:m,selectedScores:y}=ok(c,h,d,p,f,A);return[m,y]}};class lk{constructor(t,e,n,r){this.variableNames=["Image"],this.outputShape=[];const i=t[1],s=t[2],o=Math.sin(e).toFixed(3),a=Math.cos(e).toFixed(3);this.outputShape=t;const[l,u]=g.getImageCenter(r,i,s),c=l.toFixed(3),h=u.toFixed(3);let d="";d="number"==typeof n?`float outputValue = ${n.toFixed(2)};`:`\n        vec3 fill = vec3(${n.join(",")});\n        float outputValue = fill[coords[3]];`,this.userCode=`\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - ${c}) * ${a} - (float(y) - ${h}) * ${o};\n          float coordYFloat = (float(x) - ${c}) * ${o} + (float(y) - ${h}) * ${a};\n          int coordX = int(round(coordXFloat + ${c}));\n          int coordY = int(round(coordYFloat + ${h}));\n          ${d}\n          if(coordX >= 0 && coordX < ${s} && coordY >= 0 && coordY < ${i}) {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    `}}const uk=[ek,KB,VB,nk,rk,sk,ak,{kernelName:hi,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:i,fillValue:s,center:o}=e,a=n,l=new lk(r.shape,i,s,o);return a.runWebGLProgram(l,[r],r.dtype)}},{kernelName:Yr,backendName:"webgl",kernelFunc:({inputs:t,backend:e})=>{const{x:n}=t,r=e,i=new wB(n.shape,"return x * x;");return r.runWebGLProgram(i,[n],n.dtype)}},{kernelName:Xr,backendName:"webgl",kernelFunc:({inputs:t,backend:e})=>{const{a:n,b:r}=t,i=e,s=V().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new YS("return (a - b) * (a - b);",n.shape,r.shape):new GS("return (a - b) * (a - b);",n.shape,r.shape);return i.compileAndRun(s,[n,r])}},{kernelName:si,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{perm:i}=e,s=n,o=new Array(r.shape.length);for(let l=0;l<o.length;l++)o[l]=r.shape[i[l]];let a;if(s.shouldExecuteOnCPU([r])){const t=s.texData.get(r.dataId),e=XB(t.values,r.shape,r.dtype,i,o);a=s.makeTensorInfo(o,r.dtype),s.texData.get(a.dataId).values=e}else a=tk(r,i,s);return a}}];for(const dk of uk)tt(dk);s.isBrowser()&&sc("webgl",()=>new $B,2);const ck={"tfjs-core":zu,"tfjs-backend-cpu":"2.1.0","tfjs-backend-webgl":"2.1.0","tfjs-data":pC,"tfjs-layers":Gg,"tfjs-converter":u_,tfjs:"2.1.0"}},zium:function(t,e){var n=n||{};n.Image=function(t,e,n){this.width=t||0,this.height=e||0,this.data=n||[]},n.grayscale=function(t,e){for(var n=t.data,r=e.data,i=n.length,s=0,o=0;s<i;s+=4)r[o++]=.299*n[s]+.587*n[s+1]+.114*n[s+2]+.5&255;return e.width=t.width,e.height=t.height,e},n.threshold=function(t,e,n){var r,i=t.data,s=e.data,o=i.length,a=[];for(r=0;r<256;++r)a[r]=r<=n?0:255;for(r=0;r<o;++r)s[r]=a[i[r]];return e.width=t.width,e.height=t.height,e},n.adaptiveThreshold=function(t,e,r,i){var s,o=t.data,a=e.data,l=o.length,u=[];for(n.stackBoxBlur(t,e,r),s=0;s<768;++s)u[s]=s-255<=-i?255:0;for(s=0;s<l;++s)a[s]=u[o[s]-a[s]+255];return e.width=t.width,e.height=t.height,e},n.otsu=function(t){var e,n,r,i=t.data,s=i.length,o=[],a=0,l=0,u=0,c=0,h=0,d=0;for(r=0;r<256;++r)o[r]=0;for(r=0;r<s;++r)o[i[r]]++;for(r=0;r<256;++r)l+=o[r]*r;for(r=0;r<256;++r)if(0!==(c+=o[r])){if(0==(h=s-c))break;(n=c*h*(e=(u+=o[r]*r)/c-(l-u)/h)*e)>d&&(d=n,a=r)}return a},n.stackBoxBlurMult=[1,171,205,293,57,373,79,137,241,27,391,357,41,19,283,265],n.stackBoxBlurShift=[0,9,10,11,9,12,10,11,12,9,13,13,10,9,13,13],n.BlurStack=function(){this.color=0,this.next=null},n.stackBoxBlur=function(t,e,r){var i,s,o,a,l,u,c,h,d,p,f=t.data,A=e.data,m=t.height,g=t.width,y=m-1,w=g-1,b=r+r+1,v=r+1,x=n.stackBoxBlurMult[r],_=n.stackBoxBlurShift[r];for(i=s=new n.BlurStack,p=1;p<b;++p)i=i.next=new n.BlurStack;for(i.next=s,l=0,d=0;d<m;++d){for(u=l,a=v*(o=f[l]),i=s,p=0;p<v;++p)i.color=o,i=i.next;for(p=1;p<v;++p)i.color=f[l+p],a+=i.color,i=i.next;for(i=s,h=0;h<g;++h)A[l++]=a*x>>>_,a-=i.color-f[c=u+((c=h+v)<w?c:w)],i.color=f[c],i=i.next}for(h=0;h<g;++h){for(u=(l=h)+g,a=v*(o=A[l]),i=s,p=0;p<v;++p)i.color=o,i=i.next;for(p=1;p<v;++p)i.color=A[u],a+=i.color,i=i.next,u+=g;for(i=s,d=0;d<m;++d)A[l]=a*x>>>_,a-=i.color-A[c=h+((c=d+v)<y?c:y)*g],i.color=A[c],i=i.next,l+=g}return e},n.gaussianBlur=function(t,e,r,i){var s=n.gaussianKernel(i);return e.width=t.width,e.height=t.height,r.width=t.width,r.height=t.height,n.gaussianBlurFilter(t,r,s,!0),n.gaussianBlurFilter(r,e,s,!1),e},n.gaussianBlurFilter=function(t,e,n,r){var i,s,o,a,l,u=t.data,c=e.data,h=t.height,d=t.width,p=0,f=n.length>>1;for(o=0;o<h;++o)for(a=0;a<d;++a){for(s=0,l=-f;l<=f;++l)r?(i=p+l,(a+l<0||a+l>=d)&&(i=p)):(i=p+l*d,(o+l<0||o+l>=h)&&(i=p)),s+=n[f+l]*u[i];c[p++]=r?s:s+.5&255}return e},n.gaussianKernel=function(t){var e,n,r,i,s,o,a=[];if(t<=7&&t%2==1)a=[[1],[.25,.5,.25],[.0625,.25,.375,.25,.0625],[.03125,.109375,.21875,.28125,.21875,.109375,.03125]][t>>1];else{for(r=-.5/((n=.8+.3*((e=.5*(t-1))-1))*n),i=0,o=0;o<t;++o)s=o-e,i+=a[o]=Math.exp(r*s*s);for(i=1/i,o=0;o<t;++o)a[o]*=i}return a},n.findContours=function(t,e){var r,i,s,o,a,l,u,c,h,d=t.width,p=t.height,f=[];for(r=n.binaryBorder(t,e),i=n.neighborhoodDeltas(d+2),s=d+3,a=1,c=0;c<p;++c,s+=2)for(h=0;h<d;++h,++s)0!==(o=r[s])&&(l=u=!1,1===o&&0===r[s-1]?l=!0:o>=1&&0===r[s+1]&&(u=!0),(l||u)&&(++a,f.push(n.borderFollowing(r,s,a,{x:h,y:c},u,i))));return f},n.borderFollowing=function(t,e,r,i,s,o){var a,l,u,c,h,d=[];d.hole=s,c=h=s?0:4;do{if(0!==t[a=e+o[c=c-1&7]])break}while(c!==h);if(c===h)t[e]=-r,d.push({x:i.x,y:i.y});else for(l=e;;){h=c;do{u=l+o[++c]}while(0===t[u]);if((c&=7)-1>>>0<h>>>0?t[l]=-r:1===t[l]&&(t[l]=r),d.push({x:i.x,y:i.y}),i.x+=n.neighborhood[c][0],i.y+=n.neighborhood[c][1],u===e&&l===a)break;l=u,c=c+4&7}return d},n.neighborhood=[[1,0],[1,-1],[0,-1],[-1,-1],[-1,0],[-1,1],[0,1],[1,1]],n.neighborhoodDeltas=function(t){for(var e=[],r=n.neighborhood.length,i=0;i<r;++i)e[i]=n.neighborhood[i][0]+n.neighborhood[i][1]*t;return e.concat(e)},n.approxPolyDP=function(t,e){var n,r,i,s,o,a,l,u,c,h,d,p={start_index:0,end_index:0},f={start_index:0,end_index:0},A=[],m=[],g=t.length;for(e*=e,d=0,c=0;c<3;++c)for(o=0,r=t[d=(d+f.start_index)%g],++d===g&&(d=0),h=1;h<g;++h)n=t[d],++d===g&&(d=0),(s=(l=n.x-r.x)*l+(u=n.y-r.y)*u)>o&&(o=s,f.start_index=h);for(o<=e?A.push({x:r.x,y:r.y}):(p.start_index=d,p.end_index=f.start_index+=p.start_index,f.start_index-=f.start_index>=g?g:0,f.end_index=p.start_index,f.end_index<f.start_index&&(f.end_index+=g),m.push({start_index:f.start_index,end_index:f.end_index}),m.push({start_index:p.start_index,end_index:p.end_index}));0!==m.length;){if(i=t[(p=m.pop()).end_index%g],r=t[d=p.start_index%g],++d===g&&(d=0),p.end_index<=p.start_index+1)a=!0;else{for(o=0,l=i.x-r.x,u=i.y-r.y,c=p.start_index+1;c<p.end_index;++c)n=t[d],++d===g&&(d=0),(s=Math.abs((n.y-r.y)*l-(n.x-r.x)*u))>o&&(o=s,f.start_index=c);a=o*o<=e*(l*l+u*u)}a?A.push({x:r.x,y:r.y}):(f.end_index=p.end_index,p.end_index=f.start_index,m.push({start_index:f.start_index,end_index:f.end_index}),m.push({start_index:p.start_index,end_index:p.end_index}))}return A},n.warp=function(t,e,r,i){var s,o,a,l,u,c,h,d,p,f,A,m,g,y,w,b,v,x,_,C,S,E=t.data,B=e.data,k=t.width,N=t.height,I=0;for(m=(A=n.getPerspectiveTransform(r,i-1))[8],g=A[2],y=A[5],C=0;C<i;++C)for(w=m+=A[7],b=g+=A[1],v=y+=A[4],S=0;S<i;++S)h=d=(u=(_=(v+=A[3])/(w+=A[6]))>>>0)*k,p=f=(u===N-1?u:u+1)*k,B[I++]=(1-(c=_-u))*((l=1-(a=(x=(b+=A[0])/w)-(s=x>>>0)))*E[h+s]+a*E[d+(o=s===k-1?s:s+1)])+c*(l*E[p+s]+a*E[f+o])&255;return e.width=i,e.height=i,e},n.getPerspectiveTransform=function(t,e){var r=n.square2quad(t);return r[0]/=e,r[1]/=e,r[3]/=e,r[4]/=e,r[6]/=e,r[7]/=e,r},n.square2quad=function(t){var e,n,r,i,s,o,a,l=[];return n=t[0].y-t[1].y+t[2].y-t[3].y,0==(e=t[0].x-t[1].x+t[2].x-t[3].x)&&0===n?(l[0]=t[1].x-t[0].x,l[1]=t[2].x-t[1].x,l[2]=t[0].x,l[3]=t[1].y-t[0].y,l[4]=t[2].y-t[1].y,l[5]=t[0].y,l[6]=0,l[7]=0,l[8]=1):(l[6]=(e*(o=t[3].y-t[2].y)-(i=t[3].x-t[2].x)*n)/(a=(r=t[1].x-t[2].x)*o-i*(s=t[1].y-t[2].y)),l[7]=(r*n-e*s)/a,l[8]=1,l[0]=t[1].x-t[0].x+l[6]*t[1].x,l[1]=t[3].x-t[0].x+l[7]*t[3].x,l[2]=t[0].x,l[3]=t[1].y-t[0].y+l[6]*t[1].y,l[4]=t[3].y-t[0].y+l[7]*t[3].y,l[5]=t[0].y),l},n.isContourConvex=function(t){var e,n,r,i,s,o,a,l,u=0,c=!0,h=t.length,d=0,p=0;for(s=(e=t[0]).x-(n=t[h-1]).x,o=e.y-n.y;d<h;++d){if(++p===h&&(p=0),n=e,3==(u|=(i=(l=(e=t[p]).y-n.y)*s)>(r=(a=e.x-n.x)*o)?1:i<r?2:3)){c=!1;break}s=a,o=l}return c},n.perimeter=function(t){for(var e,n,r=t.length,i=0,s=r-1,o=0;i<r;s=i++)e=t[i].x-t[s].x,n=t[i].y-t[s].y,o+=Math.sqrt(e*e+n*n);return o},n.minEdgeLength=function(t){for(var e,n,r,i=t.length,s=0,o=i-1,a=1/0;s<i;o=s++)(e=(n=t[s].x-t[o].x)*n+(r=t[s].y-t[o].y)*r)<a&&(a=e);return Math.sqrt(a)},n.countNonZero=function(t,e){var n,r,i=t.data,s=e.height,o=e.width,a=e.x+e.y*t.width,l=t.width-o,u=0;for(n=0;n<s;++n){for(r=0;r<o;++r)0!==i[a++]&&++u;a+=l}return u},n.binaryBorder=function(t,e){var n,r,i=t.data,s=t.height,o=t.width,a=0,l=0;for(r=-2;r<o;++r)e[l++]=0;for(n=0;n<s;++n){for(e[l++]=0,r=0;r<o;++r)e[l++]=0===i[a++]?0:1;e[l++]=0}for(r=-2;r<o;++r)e[l++]=0;return e},t.exports=n},zn8P:function(t,e){function n(t){return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}))}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"}},[[0,0]]]);